var b4w="object"===typeof b4w?b4w:function(a){var w={};a.module=w;var t={};a.Ja=function(a,b){var c=w[a];c&&(c.zq=null);t[b||"__b4w_default"]=null};a.register=function(a,b){w[a]||(w[a]=b)};a.require=function(a,b){if(!w[a])throw Error('Module "'+a+'" not found');b=b||"__b4w_default";t[b]||(t[b]=function(a){return function(b){var c=w[b];if(!c)throw Error('Module "'+b+'" not found');c.zq||(c.zq={});c.zq[a]||(c.zq[a]={},c(c.zq[a],t[a]));return c.zq[a]}}(b));return t[b](a)};a.module_check=function(a){return w[a]?
!0:!1};a.get_namespace=function(a){for(var b in t)if(t[b]==a)return b;return""};a.worker_listeners=[];a.worker_namespaces=[];return a}({});b4w.module.app=function(a,w){function t(){var a=K.xr();document.addEventListener("visibilitychange",function(){document.hidden?(a=K.xr(),K.pause()):a||K.resume()},!1)}function c(){var a=0,b=l.re(),d=K.xr(),f=!0;K.Pt(function(){if(!(a%10)){var c=b.getBoundingClientRect();c.top>window.innerHeight||0>c.bottom?(f&&(d=K.xr()),K.pause(),f=!1):d||f||(K.resume(),f=!0)}a++})}function b(a,b,d,f){var c=document.createElement("canvas"),u=document.getElementById(a);u||(E.error('Warning: canvas container "'+a+
'" not found, appending to body'),u=document.body);c.style.position="absolute";c.style.left=0;c.style.top=0;c.style.width=u.offsetWidth+"px";c.style.height=u.offsetHeight+"px";c.width=u.offsetWidth*window.devicePixelRatio;c.height=u.offsetHeight*window.devicePixelRatio;b?(a=document.createElement("canvas"),a.style.position="absolute",c.style.left=0,c.style.top=0,a.style.pointerEvents="none"):a=null;u.appendChild(c);if(!K.Nf(c,a))return d&&M("Browser could not initialize WebGL","For more info visit",
"https://www.blend4web.com/doc/en/problems_and_solutions.html#problems-upon-startup",f),!1;a&&l.kv(a,"LAST");return!0}function k(a,b){a?(b&&(document.getElementById(b).style.display="block"),R=document.getElementById(a)):(R=document.createElement("div"),R.innerHTML=0,R.style.cssText="position:absolute;font-family: Arial, sans-serif;top: 20px;right: 20px;text-shadow: 0px 0px 6px #000;font-size: 40px;line-height: 50px;font-weight: bold;color: #fff;",l.kv(R,"JUST_AFTER_CANVAS"))}function h(a,b){var d=
String(a);b&&(d+="/"+String(b));R.innerHTML=d}function O(a){a=document.getElementById(a);var b=a.cloneNode(!0);a.parentNode.replaceChild(b,a);return b}function m(a,b,f){var c=Math.max(I.S0(a),1),u=X.Rj(a,da);b=d.Jc(u,b,la);b[2]=0;H.normalize(b,b);H.scale(b,c*f,b);f=X.Me(a,ba);H.add(f,b,f);I.ke(a,f)}function x(a,b){var d=I.QO(a,ca);if(d.up!=d.down){var f=I.ml(a,ea)[1],d=(d.down-f)/(d.down-d.up),f=I.PO(a,ca),d=Math.max(d,2/f.max);I.Lc(a,0,d*b)}}function r(a,b,d,f){X.Bg(a,5*b,5*d,5*f)}function g(a,b,
d){var f=I.SI(a),c=Math.abs(b);d=Math.pow(c*d,1-Math.pow(c*d,.15));X.Bg(a,0,0,0>b?.001<f?-f*d:0:d/(1-d)*f)}function e(a,b,d,f){for(var c=d*b;0<a;--a)d+=c,f+=c,c=d*b;return f}function B(a,b,d,f,c){c?(c=I.m5(a,la),a=I.Me(a),a=H.dist(c,a)+f,f=0<b?e(b,-d,a,f):e(-b,d/(1-d),a,f)):f-=2*b*d;return f}function v(a,b,c,e,h,n){function l(a,b,z,d){if(1==z){I.Sj(a,K);var f=v?.003*K.trans:.003*K.rot;z=u.wd(a,b,0);u.lf(a,b,0).gesture===u.Fx?(Ma+="X"==d?-z*f:0,ab+="Y"==d?-z*f:0):u.lf(a,b,0).gesture===u.Dx&&(a=v?.003*
K.rot:7.5E-4*K.trans,ub+="X"==d?-z*a:0,rb+="Y"==d?-z*a:0)}}function p(a,b,z,d){if(1==z){z=u.wd(a,b,1);I.Sj(a,K);if(v)f=.003*K.trans,c=7.5E-4*K.rot;else var f=.003*K.rot,c=7.5E-4*K.trans;if(1===u.lf(a,b,0).which)ga+="X"==d?-z*f:0,Lb+="Y"==d?-z*f:0;else if(2===u.lf(a,b,0).which||3===u.lf(a,b,0).which)na+="X"==d?-z*c:0,T+="Y"==d?-z*c:0}}function E(a){return a[0]&&(a[1]||a[2]||-.1>a[3])}function J(a){return a[0]&&(a[1]||a[2]||.1<a[3])}function L(a){return a[0]&&(a[1]||-.1>a[2])}function y(a){return a[0]&&
(a[1]||.1<a[2])}function F(a){return a[0]&&(a[1]||a[2]||a[3])}function k(a,b,z){if(1==z)switch(z=u.wd(a,b,0),I.Sj(a,K),b){case "FORWARD":M?V[0]=1:v?(b=I.ml(a,ea)[1],b=Math.abs(b)>=Math.PI/4?d.Ee:d.qc,m(a,b,.5*K.trans*z)):t?g(a,-K.zoom,z):r(a,0,0,-K.trans*z);break;case "BACKWARD":M?V[0]=-1:v?(b=I.ml(a,ea)[1],b=Math.abs(b)>=Math.PI/4?d.Eh:d.ic,m(a,b,.5*K.trans*z)):t?g(a,K.zoom,z):r(a,0,0,K.trans*z);break;case "UP":v?x(a,30*-K.zoom*z):M||r(a,0,K.trans*z,0);break;case "DOWN":v?x(a,30*K.zoom*z):M||r(a,
0,-K.trans*z,0);break;case "LEFT":M?V[1]=1:v?m(a,d.kt,.5*K.trans*z):r(a,-K.trans*z,0,0);break;case "RIGHT":M?V[1]=-1:v?m(a,d.Cf,.5*K.trans*z):r(a,K.trans*z,0,0);break;case "ROT_LEFT":t?I.Lc(a,.75*-K.rot*z,0):I.Lc(a,.75*K.rot*z,0);break;case "ROT_RIGHT":t?I.Lc(a,.75*K.rot*z,0):I.Lc(a,.75*-K.rot*z,0);break;case "ROT_UP":t?I.Lc(a,0,.75*-K.rot*z):I.Lc(a,0,.75*K.rot*z);break;case "ROT_DOWN":t?I.Lc(a,0,.75*K.rot*z):I.Lc(a,0,.75*-K.rot*z)}else switch(b){case "FORWARD":case "BACKWARD":M&&(V[0]=0);break;case "LEFT":case "RIGHT":M&&
(V[1]=0)}M&&(A.hI(M,V[0],V[1]),a=I.Hz(a,ma),A.WB(M,a[0]),A.XB(M,a[1]))}q=a;ja=b;qa=c;C=e;pa=h;ia=n;var R=f.ll();P(R);var t=!1,M=null,v=!1;switch(I.Vi(R)){case I.Ob:t=!a;break;case I.Xc:M=f.Kz();break;case I.He:return;case I.ed:v=!0}var K=I.Sj(R,xa);a=u.ym();if(A.qG(R)){var ua=u.$E(R,null,!0);u.qa(R,"CAMERA_COLLISION",u.Sg,[ua],null,function(a,b){var z=u.lf(a,b,0).coll_dist;if(0>z){var d=u.lf(a,b,0).coll_norm,f=la;H.scale(d,-.25*z,f);z=X.Me(a,ba);H.add(z,f,z);X.fC(a,z)}})}if(M){var ua=X.Me(R),N=X.Rj(R),
N=d.FE(N);ua[2]-=.5;A.dC(M,ua,N);D.rW(R,M);var V=new Float32Array(2),O=!0;A.VB(M,A.BJ);u.Qq(R,"TOGGLE_CHAR_MOVE_TYPE",u.Ai,u.YT,function(){O=!O;A.VB(M,O?A.BJ:A.CT)})}var S,da,z,Da,ta,sa,w,Z,ca;n?ua=N=sa=w=Z=ca=u.zu(0):(ca=U.AX(),N=ca.length?ca[ca.length-1]:0,ua=u.gc(U.Sn,N),N=u.gc(U.Tn,N),sa=u.ne(U.hm,ca),w=u.ne(U.Qn,ca),Z=u.ne(U.im,ca),ca=u.ne(U.Rn,ca));b?b=S=da=z=Da=ta=u.zu(0):(b=u.qd(u.YJ),S=u.qd(u.WJ),da=u.qd(u.RJ),z=u.qd(u.SJ),Da=u.qd(u.dU),ta=u.qd(u.ZT));var Ja=u.qd(u.XJ),oa=u.qd(u.TJ),fa=u.qd(u.UJ),
Fa=u.qd(u.VJ);v||(u.qa(R,"FORWARD",u.ob,[a,b,w],L,k),u.qa(R,"BACKWARD",u.ob,[a,S,w],y,k));t?(u.qa(R,"ROT_UP",u.ob,[a,Ja,Da,ca],E,k),u.qa(R,"ROT_DOWN",u.ob,[a,oa,ta,ca],J,k),u.qa(R,"ROT_LEFT",u.ob,[a,fa,da,Z],E,k),u.qa(R,"ROT_RIGHT",u.ob,[a,Fa,z,Z],J,k)):v?(u.qa(R,"LEFT",u.ob,[a,fa,da,sa],E,k),u.qa(R,"RIGHT",u.ob,[a,Fa,z,sa],J,k),u.qa(R,"FORWARD",u.ob,[a,Ja,b,w],E,k),u.qa(R,"BACKWARD",u.ob,[a,oa,S,w],J,k),u.qa(R,"UP",u.ob,[a,ta,ca],y,k),u.qa(R,"DOWN",u.ob,[a,Da,ca],L,k)):(u.qa(R,"UP",u.ob,[a,Da,ua],
F,k),u.qa(R,"DOWN",u.ob,[a,ta,N],F,k),u.qa(R,"LEFT",u.ob,[a,da,sa],L,k),u.qa(R,"RIGHT",u.ob,[a,z,sa],y,k),u.qa(R,"ROT_UP",u.ob,[a,Ja,ca],L,k),u.qa(R,"ROT_DOWN",u.ob,[a,oa,ca],y,k),u.qa(R,"ROT_LEFT",u.ob,[a,fa,Z],L,k),u.qa(R,"ROT_RIGHT",u.ob,[a,Fa,Z],y,k));if(!c){var Ra=0;c=u.fF(e);var Ha=0;w=u.Py(e);u.qa(R,"MOUSE_WHEEL",u.Zp,[c],null,function(a,b,z){1==z&&(b=u.wd(a,b,0),I.Sj(a,K),t||v?Ra=B(a,b,K.zoom,Ra,t):(K.trans*=1+b*K.zoom,I.x4(a,K)))});u.qa(R,"TOUCH_ZOOM",u.Zp,[w],null,function(a,b,z){1==z&&
(z=u.wd(a,b,0),I.Sj(a,K),u.lf(a,b,0)===u.Ex&&(Ha=B(a,z,.03*K.zoom,Ha,t)))});u.qa(R,"ZOOM_INTERPOL",u.Sg,[a],null,function(a,b){if(t||v)if(1E-5<Math.abs(Ra)||1E-5<Math.abs(Ha)){var z=u.wd(a,b,0),f=d.Tc(Ra,0,z,.1*G);Ra-=f;z=d.Tc(Ha,0,z,.15*G);Ha-=z;v?x(a,-(f+z)):(f=I.SI(a)+f+z,f=Math.max(f,.001),I.o5(a,f))}else Ha=Ra=0})}var ga=0,Lb=0,na=0,T=0,Ka=0,Wa=0;n||(n=function(a){I.Sj(a,K);Ka+=.002*K.trans},c=function(a){I.Sj(a,K);Wa+=.05*K.zoom},w=function(a){I.Sj(a,K);Ka-=.002*K.trans},ca=function(a){I.Sj(a,
K);Wa-=.05*K.zoom},t?(u.qa(R,"GMPD_PAN_Y_POS",u.ob,[ua],null,c),u.qa(R,"GMPD_PAN_Y_NEG",u.ob,[N],null,ca),u.qa(R,"GMPD_PAN_X_POS",u.ob,[sa],function(a){return-.1>a[0]},w),u.qa(R,"GMPD_PAN_X_NEG",u.ob,[sa],function(a){return.1<a[0]},n)):v&&(u.qa(R,"GMPD_PAN_X_POS",u.ob,[Z],function(a){return-.1>a[0]},w),u.qa(R,"GMPD_PAN_X_NEG",u.ob,[Z],function(a){return.1<a[0]},n)));if(h){h=u.Wk("X",window);n=u.Wk("Y",window);ua=u.yo(e);c=u.yo(window);var Xa=!1,N=function(a){a[2]?Xa=!0:a[0]||(Xa=!1);return Xa&&a[0]};
u.qa(R,"MOUSE_X",u.Sg,[c,h,ua],N,p,"X");u.qa(R,"MOUSE_Y",u.Sg,[c,n,ua],N,p,"Y");h=U.ba(U.Wc,window);U.zw(h,!1)}else h=u.Wk("X",e),n=u.Wk("Y",e),ua=u.yo(e),u.qa(R,"MOUSE_X",u.Sg,[ua,h],null,p,"X"),u.qa(R,"MOUSE_Y",u.Sg,[ua,n],null,p,"Y");var Ma=0,ab=0,ub=0,rb=0;h=u.Cu("X",e);e=u.Cu("Y",e);u.qa(R,"TOUCH_X",u.Sg,[h],null,l,"X");u.qa(R,"TOUCH_Y",u.Sg,[e],null,l,"Y");u.qa(R,"ROT_TRANS_INTERPOL",u.Sg,[a],null,function(a,b){if(1E-5<Math.abs(ga)||1E-5<Math.abs(Lb)||1E-5<Math.abs(Ma)||1E-5<Math.abs(ab)||1E-5<
Math.abs(na)||1E-5<Math.abs(T)||1E-5<Math.abs(ub)||1E-5<Math.abs(rb)||1E-5<Math.abs(Ka)||1E-5<Math.abs(Wa)){var z=u.wd(a,b,0),f=d.Tc(ga,0,z,.08*G),c=d.Tc(Lb,0,z,.08*G);ga-=f;Lb-=c;var e=d.Tc(Ma,0,z,.12*G),q=d.Tc(ab,0,z,.12*G);Ma-=e;ab-=q;var g=d.Tc(na,0,z,.08*G),h=d.Tc(T,0,z,.08*G);na-=g;T-=h;var n=d.Tc(ub,0,z,.12*G),J=d.Tc(rb,0,z,.12*G);ub-=n;rb-=J;var l=d.Tc(Ka,0,z,.08*G),z=d.Tc(Wa,0,z,.08*G);Ka-=l;Wa-=z;t?(I.Lc(a,f+e,c+q),c=I.SI(a),I.n5(a,c*(g+n+l),c*(h+J+z))):v?(f+e&&m(a,d.Cf,.2*(f+e)),c+q&&(h=
I.ml(a,ea)[1],m(a,Math.abs(h)>Math.PI/4?d.Eh:d.ic,.2*(c+q))),I.Lc(a,g+n+l,0)):(I.Lc(a,.5*(f+e),.5*(c+q)),M&&(g=I.Hz(a,ma),A.WB(M,g[0]),A.XB(M,g[1])))}});u.Qq(R,"DEC_STEREO_DIST",u.Ai,u.bU,function(a){var b=I.qO(a);I.GR(a,.9*b)});u.Qq(R,"INC_STEREO_DIST",u.Ai,u.eU,function(a){var b=I.qO(a);I.GR(a,1.1*b)})}function P(a){var b=I.Vi(a),d=u.ZE(function(){var d=I.Vi(a),f=d!=b;b=d;return f});u.qa(a,"CHANGE_MOVE_STYLE",u.Sg,[d],null,function(){N();v(q,ja,qa,C,pa,ia)})}function N(){var a=f.ll();u.tm(a,"TOGGLE_CHAR_MOVE_TYPE")&&
f.Kz()&&D.remove(a);for(var b="FORWARD BACKWARD ROT_UP ROT_DOWN ROT_LEFT ROT_RIGHT UP DOWN LEFT RIGHT MOUSE_WHEEL TOUCH_ZOOM ZOOM_INTERPOL MOUSE_X MOUSE_Y TOUCH_X TOUCH_Y ROT_TRANS_INTERPOL CHANGE_MOVE_STYLE TOGGLE_CHAR_MOVE_TYPE".split(" "),d=0;d<b.length;d++)u.Uf(a,b[d])}function M(a,b,d,f){var c=document.createElement("div"),u=document.createElement("div"),e=document.createElement("div");if(f)for(var q=0;q<f.length;q++){var g=document.getElementById(f[q]);g&&g.parentNode.removeChild(g)}c.style.cssText=
"z-index:10;width:100%;height:auto;position:absolute;top:50%;margin-top:150px;text-align:center;";u.style.cssText="color:#fff;font-size:24px;";e.style.cssText="color:#fff;font-size:20px;";u.innerHTML=a;e.innerHTML=b+'   <a style="color:#fff;font-size:20px;width:100%;" href="'+d+'">'+d.replace("https://www.","")+"</a>";c.appendChild(u);c.appendChild(e);document.body.appendChild(c)}function p(a,b,d,f,c){function u(){var q=performance.now()-e;c(b+q*(d-b)/f);(q>=f||!a.parentNode)&&K.k3(u)}var e=performance.now();
K.Pt(u)}var I=w("camera"),y=w("config"),D=w("constraints"),l=w("container"),u=w("controls"),L=w("data"),F=w("debug"),U=w("input"),K=w("main"),A=w("physics"),E=w("print"),n=w("screen"),f=w("scenes"),X=w("transform"),d=w("util"),H=w("vec3"),G=1,R=null,q=!1,ja=!1,qa=!1,C=null,pa=!1,ia=!1,ma=new Float32Array(2),ea=new Float32Array(2),la=new Float32Array(3),ba=new Float32Array(3),da=new Float32Array(4),xa={},ca={};a.Nf=function(a){function d(){var a=b(g,P,m,G),d=l.Wh();if(a){var f=l.re();l.Jl();D&&(k(n,
J),K.b4(h));R&&(t(),c());p&&K.Pt(function(){f.style.height=f.clientWidth/p+"px"});q&&K.Pt(function(){l.Jl()});B&&K.Pt(function(){l.KF()});C&&y.WH();v==y.Gt?F.tS(function(a,b){0==a?(E.log("QUALITY TEST RESULT: UNSUPPORTED, using HIGH"),y.Fq(y.Ak)):1.5>b?(E.log("QUALITY TEST RESULT: LOW ("+b.toFixed(1)+" GB/s)"),y.Fq(y.Bk)):(E.log("QUALITY TEST RESULT: HIGH ("+b.toFixed(1)+" GB/s)"),y.Fq(y.Ak));e(d,!0)}):e(d,!0)}else e(d,!1)}function f(a){a.keyCode==u.cU&&(K.xr()?K.resume():K.pause())}function e(){}
a=a||{};var q=!1,g=null,G=null,n=null,p=0,J=null,H=!0,C=!1,R=!0,m=!0,A=!1,D=!1,M=!1,B=!1,v=y.get("quality"),ua;for(ua in a)switch(ua){case "canvas_container_id":g=a.canvas_container_id;break;case "callback":e=a.callback;break;case "autoresize":q=a.autoresize;break;case "show_hud_debug_info":M=a.show_hud_debug_info;break;case "sfx_mix_mode":A=a.sfx_mix_mode;break;case "show_fps":D=a.show_fps;break;case "track_container_position":B=a.track_container_position;E.va("track_container_position deprecated. Not needed anymore. Use the container.get_coords_target_space method.");
break;case "fps_wrapper_id":J=a.fps_wrapper_id;break;case "fps_elem_id":n=a.fps_elem_id;break;case "error_purge_elements":G=a.error_purge_elements;break;case "report_init_failure":m=a.report_init_failure;break;case "pause_invisible":R=a.pause_invisible;break;case "key_pause_enabled":H=a.key_pause_enabled;break;case "force_container_ratio":p=a.force_container_ratio;break;case "min_capabilities":C=a.min_capabilities;break;case "quality":v=a.quality;break;default:y.set(ua,a[ua])}v!=y.Gt&&y.set("quality",
v);H&&document.addEventListener("keydown",f,!1);y.set("show_hud_debug_info",M);y.set("sfx_mix_mode",A);var P=M||A||null;"complete"==document.readyState?window.setTimeout(d,0):window.addEventListener("load",d,!1);window.addEventListener("unload",function(){L.Ja()},!1)};a.rea=function(a,b){var d=O(a);d.addEventListener("mouseup",function(){b(d.value)},!1)};a.qea=function(a,b){var d=O(a);d.addEventListener("change",function(){var a=d.checked;b(void 0!=a?a:d.value)},!1)};a.sea=function(a,b){var d=O(a);
d.addEventListener("keypress",function(a){b(a.keyCode,d.value)},!1)};a.PZ=v;a.H$=N;a.raa=function(a){function b(a){return a[0]&&(a[1]||a[2])}function d(a,b,d){if(1==d)switch(d=u.wd(a,b,0),b){case "FORWARD":f?A.Ys(a,1):X.Bg(a,0,-1*d,0);break;case "BACKWARD":f?A.Ys(a,-1):X.Bg(a,0,1*d,0);break;case "LEFT":f?A.Xs(a,-1):X.Bg(a,1*d,0,0);break;case "RIGHT":f?A.Xs(a,1):X.Bg(a,-1*d,0,0)}else switch(b){case "FORWARD":case "BACKWARD":f&&A.Ys(a,0);break;case "LEFT":case "RIGHT":f&&A.Xs(a,0)}}var f=A.xg(a)||A.yg(a),
c=u.ym(),e=u.qd(u.YJ),q=u.qd(u.WJ),g=u.qd(u.RJ),G=u.qd(u.SJ),h=u.qd(u.XJ),n=u.qd(u.TJ),l=u.qd(u.UJ),p=u.qd(u.VJ);u.qa(a,"FORWARD",u.ob,[c,e,h],b,d);u.qa(a,"BACKWARD",u.ob,[c,q,n],b,d);u.qa(a,"LEFT",u.ob,[c,g,l],b,d);u.qa(a,"RIGHT",u.ob,[c,G,p],b,d)};a.J$=function(a){for(var b=["FORWARD","BACKWARD","LEFT","RIGHT"],d=0;d<b.length;d++)u.Uf(a,b[d])};a.qaa=function(){u.Qq(null,"CAMERA_SHOT",u.Ai,u.$T,function(){F.X1()});u.Qq(null,"LIGHT_SHOT",u.Ai,u.aU,function(){F.Z1()});u.Qq(null,"TELEMETRY",u.Ai,u.fU,
function(){F.DH()})};a.UH=function(a,b,d){E.hf("request_fullscreen","screen.request_fullscreen");n.UH(a,b,d)};a.DF=function(){E.hf("exit_fullscreen","screen.exit_fullscreen");n.DF()};a.Mq=function(){E.hf("check_fullscreen","screen.check_fullscreen");return n.Mq()};a.Kda=M;a.Zz=function(a){a=!!a;var b=decodeURIComponent(location.href.toString());if(-1==b.indexOf("?"))return null;for(var b=b.split("?")[1].split("&"),d={},f=0;f<b.length;f++){var c=b[f].split("="),u=c[0];1<c.length?(c=c[1],a?u in d?d[u].push(c):
d[u]=[c]:d[u]=c):a?u in d||(d[u]=[]):d[u]=""}return d};a.Nh=function(a,b,d,f,c,u,e,q){if(a&&b&&isFinite(d)&&isFinite(f)&&isFinite(c)){u=u||"";e=e||"";q=q||function(){};var g=a.style,G=b.charAt(0).toUpperCase()+b.slice(1);if(void 0==g[b])if(void 0!=g["webkit"+G])b="webkit"+G;else if(void 0!=g["ms"+G])b="ms"+G;else if(void 0!=g["moz"+G])b="moz"+G;else return;p(a,d,f,c,function(c){a&&(g[b]=u+c+e,d>f&&c<=f||d<f&&c>=f)&&(g[b]=u+f+e,q())})}};a.JW=function(a,b,d,f,c,u){a&&b&&isFinite(d)&&isFinite(f)&&isFinite(c)&&
(u=u||function(){},p(a,d,f,c,function(c){a&&(0<=c&&a.setAttribute(b,c),d>f&&c<=f||d<f&&c>=f)&&(a.setAttribute(b,f),u())}))};a.EQ=function(b){if(b.length){var d=b.shift(),f=d.elem,c=d.prop,u=d.from,e=d.to,q=d.duration,g=d.opt_prefix,G=d.opt_suffix,h=function(){d.cb&&d.cb();a.EQ(b)};"css"==d.type?a.Nh(f,c,u,e,q,g,G,h):"attr"==d.type&&a.JW(f,c,u,e,q,h)}};a.Zda=function(a){G=a};a.cba=function(){return G}};b4w.module.camera=function(a,w){function t(a,b){if(!h.mb(a))return m.error("get_view_vector(): Wrong camera object"),null;b=b||new Float32Array(3);var c=g.la(a.A.D);e.Jc(c,e.qc,b);return b}var c=w("__camera"),b=w("__container"),k=w("__math"),h=w("__obj_util"),O=w("__physics"),m=w("__print"),x=w("__scenes"),r=w("__transform"),g=w("__tsr"),e=w("__util"),B=w("__vec3"),v=w("__vec4"),P=w("__quat"),N=new Float32Array(2),M=new Float32Array(3),p=new Float32Array(3),I=new Float32Array(4),y=P.create(),D={},
l={};a.He=c.He;a.Ob=c.Ob;a.Xc=c.Xc;a.ed=c.ed;a.c5=function(a,b){if(h.mb(a)){c.Yw(a);a.A.zb=c.He;if(b){var u=b.pos||g.X(a.A.D);b.look_at?c.yR(a,u,b.look_at):r.ke(a,u)}r.W(a);O.$(a);c.qr(a)}else m.error("static_setup(): Wrong camera object")};a.Xea=function(a,b,e){c.gp(a)?(b=b||g.X(a.A.D),e?c.yR(a,b,e):r.ke(a,b),r.W(a),O.$(a)):m.error("static_set_look_at(): Wrong camera object or camera move style")};a.Yea=function(a,b){c.gp(a)?(r.Ol(a,b),r.W(a),O.$(a)):m.error("static_set_rotation(): Wrong camera object or camera move style")};
a.Wea=function(a,b){if(!c.gp(a))return m.error("static_get_rotation(): Wrong camera object or camera move style"),null;b=b||new Float32Array(4);return r.Rj(a,b)};a.f_=function(a){h.mb(a)?(c.Yw(a),a.A.zb=c.Xc,r.W(a),O.$(a),c.qr(a)):m.error("eye_setup(): Wrong camera object")};a.IF=function(a,b){c.Ne(a)?(b=b||g.X(a.A.D),r.ke(a,b),c.Fy(a,a.A.We,!0),r.W(a),O.$(a)):m.error("eye_set_look_at(): Wrong camera object or camera move style")};a.Baa=function(b,e,g,h){m.hf("eye_rotate","rotate_camera");c.Ne(b)?
a.Lc(b,e,g,h||!1):m.error("eye_rotate(): Wrong camera object or camera move style")};a.Daa=function(a,b){c.Ne(a)?!b||"number"==typeof b.down&&"number"==typeof b.up?(c.hC(a,b),r.W(a),O.$(a)):m.error("eye_set_vertical_limits(): Incorrect limits object."):m.error("eye_set_vertical_limits(): Wrong camera object or camera move style")};a.Aaa=function(a,b,e){if(!c.Ne(a))return m.error("eye_get_vertical_limits(): Wrong camera object or camera move style"),null;a=a.A;return a.ib?(b=b||{},e?(b.down=a.ib.Zq,
b.up=a.ib.Ns):(b.down=a.ib.down,b.up=a.ib.up),b.camera_space=e||!1,b):null};a.Caa=function(a,b){c.Ne(a)?!b||"number"==typeof b.left&&"number"==typeof b.right?(c.aC(a,b),r.W(a),O.$(a)):m.error("eye_set_horizontal_limits(): Incorrect limits object."):m.error("eye_set_horizontal_limits(): Wrong camera object or camera move style")};a.e_=function(a,b){if(!c.Ne(a))return m.error("eye_get_horizontal_limits(): Wrong camera object or camera move style"),null;var e=a.A;return e.yc?(b=b||{},b.left=e.yc.left,
b.right=e.yc.right,b.camera_space=!1,b):null};a.p5=function(a,b){if(h.mb(a))if(!b.horiz_rot_lim||"number"==typeof b.horiz_rot_lim.left&&"number"==typeof b.horiz_rot_lim.right)if(!b.vert_rot_lim||"number"==typeof b.vert_rot_lim.down&&"number"==typeof b.vert_rot_lim.up){if(b.dist_lim){if("number"!=typeof b.dist_lim.min||"number"!=typeof b.dist_lim.max||b.dist_lim.min>b.dist_lim.max){m.error("target_setup(): Wrong distance limits object");return}b.dist_lim.min=Math.max(b.dist_lim.min,0);b.dist_lim.max=
Math.max(b.dist_lim.max,0)}if(b.Pv&&("number"!=typeof b.Pv.min_y||"number"!=typeof b.Pv.max_y||b.Pv.min_y>b.Pv.max_y))m.error("target_setup(): Wrong pivot limits object");else{c.Yw(a);a.A.zb=c.Ob;var e=b.pos||g.X(a.A.D),u=b.pivot;u||(u=t(a,M),u=B.add(e,u,u));c.NR(a,e,u,b.horiz_rot_lim,b.vert_rot_lim,b.dist_lim,b.Pv,b.use_panning||!1);r.W(a);O.$(a);c.qr(a)}}else m.error("target_setup(): Wrong vertical limits object");else m.error("target_setup(): Wrong horizontal limits object");else m.error("target_setup(): Wrong camera object")};
a.efa=function(b,e,g,h){m.hf("target_rotate","rotate_camera");c.Ic(b)?a.Lc(b,e,g,h||!1):m.error("target_rotate(): Wrong camera object or camera move style")};a.jfa=function(a,b,e){c.Ic(a)?(b=b||g.X(a.A.D),e=e||a.A.pivot,c.vI(a,b,e),r.W(a),O.$(a)):m.error("target_set_trans_pivot(): Wrong camera object or camera move style")};a.ifa=function(a,b){c.Ic(a)?(c.u4(a,b),r.W(a),O.$(a)):m.error("target_set_pivot_translation(): Wrong camera object or camera move style")};a.o5=function(a,b){if(c.Ic(a)){var e=
r.Iv(a,a.A.pivot);r.Bg(a,0,0,Math.max(0,b)-e);r.W(a);O.$(a)}else m.error("target_set_distance(): Wrong camera object or camera move style")};a.SI=function(a){return c.Ic(a)?r.Iv(a,a.A.pivot):(m.error("target_get_distance(): Wrong camera object or camera move style"),0)};a.mfa=function(a,b){if(c.Ic(a)){var e=r.Tz(b,!1,M),u=r.cG(b),l=x.R(),l=h.La(a,l).oa[0],l=c.I_(l)/2,u=u/Math.sin(l),l=r.Iv(a,e);c.vI(a,g.X(a.A.D),e);r.W(a);r.Bg(a,0,0,u-l);r.W(a);O.$(a)}else m.error("target_zoom_object(): Wrong camera object or camera move style")};
a.m5=function(a,b){if(!c.Ic(a))return m.error("target_get_pivot(): Wrong camera object or camera move style"),null;b=b||new Float32Array(3);B.copy(a.A.pivot,b);return b};a.ffa=function(a,b){if(c.Ic(a)){if(b){if("number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max){m.error("target_set_distance_limits(): Wrong limits object");return}b.min=Math.max(b.min,0);b.max=Math.max(b.max,0)}c.jR(a,b);r.W(a);O.$(a)}else m.error("target_set_distance_limits(): Wrong camera object or camera move style")};a.bfa=
function(a,b){if(!c.Ic(a))return m.error("target_get_distance_limits(): Wrong camera object or camera move style"),null;var e=a.A;return e.Vb?(b=b||{},b.min=e.Vb.min,b.max=e.Vb.max,b):null};a.kfa=function(a,b){c.Ic(a)?!b||"number"==typeof b.down&&"number"==typeof b.up?(c.hC(a,b),r.W(a),O.$(a)):m.error("target_set_vertical_limits(): Wrong limits object"):m.error("target_set_vertical_limits(): Wrong camera object or camera move style")};a.dfa=function(a,b,e){if(!c.Ic(a))return m.error("target_get_vertical_limits(): Wrong camera object or camera move style"),
null;a=a.A;return a.ib?(b=b||{},e?(b.down=a.ib.Zq,b.up=a.ib.Ns):(b.down=a.ib.down,b.up=a.ib.up),b.camera_space=e||!1,b):null};a.gfa=function(a,b){c.Ic(a)?!b||"number"==typeof b.left&&"number"==typeof b.right?(c.aC(a,b),r.W(a),O.$(a)):m.error("target_set_horizontal_limits(): Wrong limits object"):m.error("target_set_horizontal_limits(): Wrong camera object or camera move style")};a.l5=function(a,b){if(!c.Ic(a))return m.error("target_get_horizontal_limits(): Wrong camera object or camera move style"),
null;var e=a.A;return e.yc?(b=b||{},b.left=e.yc.left,b.right=e.yc.right,b.camera_space=!1,b):null};a.hfa=function(a,b){c.Ic(a)?b&&("number"!=typeof b.min_z||"number"!=typeof b.max_z||b.min_z>b.max_z)?m.error("target_set_pivot_limits(): Wrong limits object"):(c.BR(a,b),r.W(a),O.$(a)):m.error("target_set_pivot_limits(): Wrong camera object or camera move style")};a.cfa=function(a,b){if(!c.Ic(a))return m.error("target_get_pivot_limits(): Wrong camera object or camera move style"),null;var e=a.A;return e.Re?
(b=b||{},b.min_z=e.Re.min_z,b.max_z=e.Re.max_z,b):null};a.n5=function(a,b,e){if(c.Ic(a)){var h=a.A;h.use_panning&&(M[0]=b,M[1]=-e,M[2]=0,g.Vd(M,h.D,M),B.add(h.pivot,M,h.pivot),b=g.X(h.D),B.add(b,M,b),r.W(a),O.$(a))}else m.error("target_pan_pivot(): wrong object")};a.lfa=function(a,b){if(!c.Ic(a))return m.error("target_switch_panning(): Wrong camera object or camera move style"),null;a.A.use_panning=b};a.Fca=function(b,g){a.RO(b,{pos:g.pos,pivot:g.pivot});var h="undefined"==typeof g.dist_interval?
0:Math.max(g.dist_interval,0),u="undefined"==typeof g.angle_interval?0:Math.max(g.angle_interval,0),p="undefined"==typeof g.t?.5:e.pa(g.t,0,1),y=a.PO(b,D);y.min=Math.max(y.min-p*h,0);y.max+=(1-p)*h;h=a.QO(b,l);h.down=e.pa(h.down+p*u,-Math.PI/2,0);h.up=e.pa(h.up-(1-p)*u,-Math.PI/2,0);c.qA(b,y);c.rA(b,h);r.W(b);O.$(b);c.qr(b)};a.RO=function(a,b){if(h.mb(a)){if(b.dist_lim){if("number"!=typeof b.dist_lim.min||"number"!=typeof b.dist_lim.max||b.dist_lim.min>b.dist_lim.max){m.error("hover_setup(): Wrong distance limits object");
return}b.dist_lim.min=Math.max(b.dist_lim.min,0);b.dist_lim.max=Math.max(b.dist_lim.max,0)}if(b.hover_angle_lim&&("number"!=typeof b.hover_angle_lim.down||"number"!=typeof b.hover_angle_lim.up||b.hover_angle_lim.down<b.hover_angle_lim.up))m.error("hover_setup(): Wrong hover angle limits object");else if(b.horiz_trans_lim&&("number"!=typeof b.horiz_trans_lim.min||"number"!=typeof b.horiz_trans_lim.max||b.horiz_trans_lim.min>b.horiz_trans_lim.max))m.error("hover_setup(): Wrong horizontal translation limits object");
else if(b.vert_trans_lim&&("number"!=typeof b.vert_trans_lim.min||"number"!=typeof b.vert_trans_lim.max||b.vert_trans_lim.min>b.vert_trans_lim.max))m.error("hover_setup(): Wrong vertical translation limits object");else{c.Yw(a);a.A.zb=c.ed;var e=b.pos||g.X(a.A.D);c.MR(a,e,b.pivot,b.dist_lim,b.hover_angle_lim,b.horiz_trans_lim,b.vert_trans_lim,b.enable_horiz_rot||!1);r.W(a);O.$(a);c.qr(a)}}else m.error("hover_setup(): Wrong camera object")};a.Bca=function(b,e,g,h){m.hf("hover_rotate","rotate_camera");
c.md(b)?a.Lc(b,e,g,h||!1):m.error("hover_rotate(): Wrong camera object or camera move style")};a.Dca=function(a,b){c.md(a)?(c.xR(a,b),r.W(a),O.$(a)):m.error("hover_set_pivot_translation(): Wrong camera object or camera move style")};a.zca=function(a,b){if(!c.md(a))return m.error("hover_get_pivot(): Wrong camera object or camera move style"),null;b=b||new Float32Array(3);B.copy(a.A.Hc,b);return b};a.S0=function(a){return c.md(a)?r.Iv(a,a.A.Hc):(m.error("hover_get_distance(): Wrong camera object or camera move style"),
0)};a.rA=function(a,b){c.md(a)?"number"!=typeof b.down||"number"!=typeof b.up||b.down<b.up?m.error("hover_set_vertical_limits(): Wrong limits object"):(c.rA(a,b),r.W(a),O.$(a)):m.error("hover_set_vertical_limits(): Wrong camera object or camera move style")};a.QO=function(a,b){if(!c.md(a))return m.error("hover_get_vertical_limits(): Wrong camera object or camera move style"),null;var e=a.A;b=b||{};b.down=e.ib.down;b.up=e.ib.up;return b};a.qA=function(a,b){c.md(a)?"number"!=typeof b.min||"number"!=
typeof b.max||b.min>b.max?m.error("hover_set_distance_limits(): Wrong limits object"):(b.min=Math.max(b.min,0),b.max=Math.max(b.max,0),c.qA(a,b),r.W(a),O.$(a)):m.error("hover_set_distance_limits(): Wrong camera object or camera move style")};a.PO=function(a,b){if(!c.md(a))return m.error("hover_get_distance_limits(): Wrong camera object or camera move style"),null;var e=a.A;b=b||{};b.min=e.Vb.min;b.max=e.Vb.max;return b};a.Eca=function(a,b){c.md(a)?b&&("number"!=typeof b.min||"number"!=typeof b.max||
b.min>b.max)?m.error("hover_set_vert_trans_limits(): Wrong limits object"):(c.IR(a,b),r.W(a),O.$(a)):m.error("hover_set_vert_trans_limits(): Wrong camera object or camera move style")};a.Aca=function(a,b){if(!c.md(a))return m.error("hover_get_vert_trans_limits(): Wrong camera object or camera move style"),null;var e=a.A;return e.ie?(b=b||{},b.min=e.ie.min,b.max=e.ie.max,b):null};a.Cca=function(a,b){c.md(a)?b&&("number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max)?m.error("hover_set_horiz_trans_limits(): Wrong limits object"):
(c.wR(a,b),r.W(a),O.$(a)):m.error("hover_set_horiz_trans_limits(): Wrong camera object or camera move style")};a.yca=function(a,b){if(!c.md(a))return m.error("hover_get_horiz_trans_limits(): Wrong camera object or camera move style"),null;var e=a.A;return e.he?(b=b||{},b.min=e.he.min,b.max=e.he.max,b):null};a.Gca=function(a,b){if(!c.md(a))return m.error("hover_switch_horiz_rotation(): Wrong camera object or camera move style"),null;a.A.Mj=b};a.gp=c.gp;a.Ic=c.Ic;a.Ne=c.Ne;a.md=c.md;a.Vi=function(a){return h.mb(a)?
c.Vi(a):(m.error("get_move_style(): Wrong camera object"),null)};a.ke=function(a,b){if(h.mb(a)){var e=a.A;if(c.Ic(a)){var l=g.X(e.D),l=B.subtract(b,l,M);B.add(l,e.pivot,e.pivot)}else c.md(a)&&(l=g.X(e.D),l=B.subtract(b,l,M),B.add(l,e.Hc,e.Hc));r.ke(a,b);r.W(a);O.$(a)}else m.error("set_translation(): Wrong camera object")};a.Me=function(a,b){if(!h.mb(a))return m.error("get_translation(): Wrong camera object"),null;b=b||new Float32Array(3);return r.Me(a,b)};a.Lc=function(a,b,e,g){h.mb(a)?(g?c.r4(a,
b,e):c.B3(a,b,e),r.W(a),O.$(a)):m.error("rotate_camera(): Wrong camera object")};a.x4=function(a,b){if(h.mb(a)){var c=a.A;"number"==typeof b.trans&&(c.$s=e.pa(b.trans,0,Infinity));"number"==typeof b.rot&&(c.Zs=e.pa(b.rot,0,Infinity));"number"==typeof b.zoom&&(c.at=e.pa(b.zoom,0,.99))}else m.error("set_velocities(): Wrong camera object")};a.Sj=function(a,b){if(!h.mb(a))return m.error("get_velocities(): Wrong camera object"),null;var c=a.A;b=b||{};b.trans=c.$s;b.rot=c.Zs;b.zoom=c.at;return b};a.Xca=
function(a){if(!h.mb(a))return m.error("is_look_up(): Wrong camera object"),!1;a=g.la(a.A.D);return 0<=e.Jc(a,e.qc,M)[1]};a.ml=function(a,b){if(!h.mb(a))return m.error("get_camera_angles(): Wrong camera object"),null;b=b||new Float32Array(2);c.ml(a,b);return b};a.Hz=function(a,b){if(!h.mb(a))return m.error("get_camera_angles_char(): Wrong camera object"),null;b=b||new Float32Array(2);c.Hz(a,b);return b};a.P_=function(a,b){b=b||new Float32Array(2);var g=B.normalize(a,M),g=e.UQ(e.qc,g,y);e.XE(g,!0);
c.UF(g,b);return b};a.GR=function(a,b){if(h.mb(a))for(var e=x.R(),e=h.La(a,e).oa,g=0;g<e.length;g++){var l=e[g];l.type!=c.Yc&&l.type!=c.gd&&l.type!=c.eg&&l.type!=c.Ef||c.t4(l,b,l.Hg)}else m.error("set_stereo_distance(): Wrong camera object")};a.qO=function(a){if(!h.mb(a))return m.error("get_stereo_distance(): Wrong camera object"),0;var b=x.R();a=h.La(a,b).oa;for(b=0;b<a.length;b++){var e=a[b];if(e.type==c.Yc||e.type==c.gd)return e.vn}return 0};a.ZB=function(a,b){if(h.mb(a)){var e=x.R(),e=h.La(a,
e).oa;c.ZB(e,b)}else m.error("set_eye_distance(): Wrong camera object")};a.nba=function(a){if(!h.mb(a))return m.error("get_eye_distance(): Wrong camera object"),0;var b=x.R();a=h.La(a,b).oa;for(b=0;b<a.length;b++){var e=a[b];if(e.type==c.Yc||e.type==c.gd||e.type==c.eg||e.type==c.Ef)return e.Hg}return 0};a.wI=function(a,b){h.mb(a)?(B.copy(b,a.A.We),r.W(a),O.$(a)):m.error("set_vertical_axis(): Wrong camera object")};a.B0=function(a,b){if(h.mb(a))return b||(b=B.create()),B.copy(a.A.We,b),b;m.error("get_vertical_axis(): Wrong camera object")};
a.sfa=function(a,b,e){if(h.mb(a)){var g=x.R();a=h.La(a,g).oa;for(g=0;g<a.length;g++){var l=a[g];B.set(-b,-e,0,l.Vw.trans);l.Kc?c.FR(l,!1):c.Nl(l,!1)}}else m.error("translate_view(): Wrong camera object")};a.eca=t;a.VN=function(a){if(!h.mb(a))return m.error("get_fov(): Wrong camera object"),0;var b=x.R();a=h.La(a,b).oa;return c.VN(a[0])};a.qR=function(a,b){if(h.mb(a))for(var e=x.R(),e=h.La(a,e).oa,g=0;g<e.length;g++){var l=e[g];c.qR(l,b);l.Kc?c.FR(l,!1):c.Nl(l,!1)}else m.error("set_fov(): Wrong camera object")};
a.mI=function(){m.va("set_hmd_fov() deprecated")};a.Fy=function(a,b,e){h.mb(a)?(b=b||a.A.We,c.Fy(a,b,e||!1),r.W(a),O.$(a)):m.error("correct_up(): Wrong camera object")};a.tea=function(a,b){if(h.mb(a)&&c.CA(a)){var e=a.A;if(c.Ic(a)){var l=g.X(e.D),l=B.dist(l,e.pivot);e.Om=b/2*e.Nm/l}else c.md(a)?(l=g.X(e.D),l=B.distance(l,e.Hc),e.Om=b/2*e.Nm/l):(e=x.R(),h.La(a,e).oa[0].wc=b/2);c.e6(a)}else m.error("set_ortho_scale(): Wrong camera object")};a.Fba=function(a){if(!h.mb(a)||!c.CA(a))return m.error("get_ortho_scale(): Wrong camera object"),
0;var b=x.R();return 2*h.La(a,b).oa[0].wc};a.CA=function(a){return h.mb(a)?c.CA(a):(m.error("is_ortho_camera(): Wrong camera object"),!1)};a.W9=function(a,l,y,D){if(!h.mb(a))return m.error("calc_ray(): Wrong camera object"),null;var u=x.R(),A=h.La(a,u).oa[0];D&&3==D.length?m.va('dest parameter in the function "calc_ray" should be type of parametric line.'):D=D||new Float32Array(6);switch(A.type){case c.fd:case c.fg:case c.Yc:case c.gd:var E=Math.tan(c.C0(A)/2),n=E*A.Cb,u=M;l=b.gu(l,y,N,A);u[0]=(2*
l[0]/A.width-1)*n;u[1]=(1-2*l[1]/A.height)*E;u[2]=-1;g.Vd(u,a.A.D,u);B.normalize(u,u);3==D.length?B.copy(u,D):(a=r.Me(a,p),k.CR(D,a),k.qI(D,u));return D;case c.$e:return u=M,l=b.gu(l,y,N,A),u[0]=(2*l[0]/A.width-1)*A.top*A.Cb,u[1]=(1-2*l[1]/A.height)*A.top,u[2]=0,g.Mc(u,a.A.D,u),B.copy(u,D),a=g.la(a.A.D,I),B.transformQuat(e.qc,a,u),k.qI(D,u),D;default:return m.error("calc_ray(): Non-compatible camera"),D}};a.HH=function(a,b,e){if(!h.mb(a))return m.error("project_point(): Wrong camera object"),null;
e=e||new Float32Array(2);return c.HH(a,b,e)};a.lca=function(a){return(c.Ic(a)||c.md(a))&&null!==a.A.Vb};a.rca=function(a){return(c.Ne(a)||c.Ic(a)||c.md(a))&&null!==a.A.ib};a.M0=function(a){return(c.Ic(a)||c.Ne(a))&&null!==a.A.yc};a.sca=function(a){return c.md(a)&&null!==a.A.ie};a.mca=function(a){return c.md(a)&&null!==a.A.he};a.sba=function(a,b){if(!h.mb(a))return m.error("get_frustum_planes(): Wrong camera object"),null;var c=x.R(),c=h.La(a,c).oa[0].No;v.copy(c.left,b.left);v.copy(c.right,b.right);
v.copy(c.top,b.top);v.copy(c.bottom,b.bottom);v.copy(c.near,b.near);v.copy(c.far,b.far);return b};a.Nl=function(a,b){h.mb(a)?c.m4(a,b):m.error("set_projection(): Wrong camera object")}};b4w.module.__camera=function(a,w){function t(a,b,z,d,f){Ba.ke(a,b);z&&y(a,b,z);F(a,d);U(a,f)}function c(a,b,z,d,c,e,q,g){var ga=a.A;Ba.ke(a,b);ga.pivot.set(z);y(a,b,z);F(a,d);U(a,c);n(a,e);f(a,q);ga.use_panning=g}function b(a,b,z,f,c,e,q,g){var ga=a.A;Ba.ke(a,b);ga.Hc.set(z);y(a,b,z);E(a,f);K(a,c);X(a,e);d(a,q);ga.Mj=g}function k(a,b,d){var f=a.A,c=Aa.X(f.D),e=Aa.la(f.D),f=Ea;f.set(ka.ic);f[3]=0;a=B(a,z)[1];e=ka.Jc(e,ka.qc,sa);J.CR(Ha,c);J.qI(Ha,e);if(!ka.L1(f,-b,Ha,d)||Math.abs(a)<wa)ya.warn("Active hover camera view vector and the supporting plane are parallel to each other. Hover pivot will be set based on the camera position."),
d[0]=c[0],d[1]=c[1],d[2]=0;return d}function h(b){for(var z=b.A,d=0;d<b.T.length;d++){var f=b.T[d].oa[0];if(f.type==a.$e)switch(z.zb){case a.Ob:var c=Aa.X(z.D);z.Nm=Y.dist(c,z.pivot);z.Om=f.wc;break;case a.ed:c=Aa.X(z.D),z.Nm=Y.dist(c,z.Hc),z.Om=f.wc}}}function O(a){a={type:a,name:"",WR:1,width:0,height:0,Mf:null,Wu:null,bc:null,og:null,Cb:0,wc:0,br:"VERTICAL",near:0,far:0,left:0,right:0,top:0,bottom:0,Od:ua.create(),D:new Float32Array(9),pc:new Float32Array(16),et:new Float32Array(16),Vw:{trans:Y.create(),
angle:0},Jb:new Float32Array(16),Mg:new Float32Array(16),xD:new Float32Array(16),FH:new Float32Array(16),ui:new Float32Array(16),direction:new Float32Array(3),Ng:Aa.xo(),yD:Aa.xo(),$v:Aa.xo(),LB:Aa.xo(),pw:Aa.xo(),dof_distance:0,dof_front_start:0,dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_object:null,dof_bokeh:!1,pe:!1,dof_on:!1,QA:new Float32Array(3),No:x(),vn:0,Hg:0,Kc:null,Jj:null,Eu:null,Qy:new Float32Array(4),Zr:new Float32Array(4)};a.Od[0]=a.Od[2]=
0;a.Od[1]=a.Od[3]=0;return a}function m(a,b){var z=O(a.type);z.name=a.name;z.WR=a.WR;z.width=a.width;z.height=a.height;b||(z.Mf=a.Mf,z.Wu=a.Wu,z.bc=a.bc,z.og=a.og);z.Cb=a.Cb;z.br=a.br;z.wc=a.wc;z.near=a.near;z.far=a.far;z.left=a.left;z.right=a.right;z.top=a.top;z.bottom=a.bottom;ua.copy(a.Od,z.Od);Aa.copy(a.D,z.D);ha.copy(a.pc,z.pc);ha.copy(a.et,z.et);z.Vw=ka.Y(a.Vw);ha.copy(a.Jb,z.Jb);ha.copy(a.Mg,z.Mg);ha.copy(a.xD,z.xD);ha.copy(a.FH,z.FH);ha.copy(a.ui,z.ui);z.direction.set(a.direction);Aa.copy(a.Ng,
z.Ng);Aa.copy(a.yD,z.yD);Aa.copy(a.$v,z.$v);Aa.copy(a.LB,z.LB);Aa.copy(a.pw,z.pw);z.dof_distance=a.dof_distance;z.dof_front_start=a.dof_front_start;z.dof_front_end=a.dof_front_end;z.dof_rear_start=a.dof_rear_start;z.dof_rear_end=a.dof_rear_end;z.dof_power=a.dof_power;z.dof_bokeh_intensity=a.dof_bokeh_intensity;z.dof_object=a.dof_object;z.dof_bokeh=a.dof_bokeh;z.pe=a.pe;z.dof_on=a.dof_on;Y.copy(a.QA,z.QA);var d=a.No,f=z.No;ua.copy(d.left,f.left);ua.copy(d.right,f.right);ua.copy(d.top,f.top);ua.copy(d.bottom,
f.bottom);ua.copy(d.near,f.near);ua.copy(d.far,f.far);z.vn=a.vn;z.Hg=a.Hg;a.Kc&&(z.Kc=ua.clone(a.Kc));if(a.Jj){d=a.Jj.length;z.Jj=Array(d);for(f=0;f<d;f++)z.Jj[f]=Y.clone(a.Jj[f]);z.Eu=new Float32Array(a.Eu)}ua.copy(a.Qy,z.Qy);ua.copy(a.Zr,z.Zr);return z}function x(){return{left:new Float32Array([0,0,0,0]),right:new Float32Array([0,0,0,0]),top:new Float32Array([0,0,0,0]),bottom:new Float32Array([0,0,0,0]),near:new Float32Array([0,0,0,0]),far:new Float32Array([0,0,0,0])}}function r(b){switch(b){case "STATIC":return a.He;
case "TARGET":return a.Ob;case "EYE":return a.Xc;case "HOVER":return a.ed;default:ka.K("Unknown move style")}}function g(b){var z=O(b);if(b==a.Ac)return z;switch(b){case a.fd:N(z,Pa,.1,1E3);break;case a.$e:N(z,2.5,.1,1E3);break;case a.fg:break;case a.Ei:break;case a.Dk:break;case a.Yc:case a.gd:case a.eg:case a.Ef:ka.K("Stereo camera may only be created from perspective one");break;default:ka.K("Unknown camera type")}return z}function e(b,z,d){b.type!=a.Yc&&b.type!=a.gd&&b.type!=a.eg&&b.type!=a.Ef&&
ka.K("set_stereo_params(): wrong camera type");if(b.type==a.Yc||b.type==a.gd)b.vn=z;b.Hg=d;la(b,!1);if(va.Ya()&&(z=va.R(),b=z.J.Cd))for(z=ra.La(va.Jm(z),z).oa,d=0;d<z.length;d++)Ja(z[d],b)}function B(a,b){var z=Aa.la(a.A.D);return v(z,b)}function v(a,b){var z=ka.Jc(a,ka.ic,sa),d=ka.Jc(a,ka.Eh,Qa),f=-Math.asin(z[2]/Y.length(z)),z=Math.abs(f)>Math.PI/4?Y.scale(d,-ka.sign(f),cb):Y.scale(z,-ka.sign(d[2]),cb),c=Math.atan(Math.abs(z[0]/z[1]));0<d[2]&&(f=ka.sign(f)*Math.PI-f);d=c;0<z[1]&&(d=Math.PI-d);0>
z[0]&&(d=2*Math.PI-d);b[0]=d;b[1]=f;return b}function P(a){switch(a.br){case "AUTO":return 1<a.Cb?Z(a)?a.wc/a.Cb:2*Math.atan(Math.tan(a.wc/2)/a.Cb):a.wc;case "HORIZONTAL":return Z(a)?a.wc/a.Cb:2*Math.atan(Math.tan(a.wc/2)/a.Cb);case "VERTICAL":return a.wc}}function N(b,z,d,f){switch(b.type){case a.fd:case a.Yc:case a.gd:b.wc=z;b.Cb=1;break;case a.$e:b.wc=z;b.Cb=1;break;case a.eg:case a.Ef:break;default:ka.K("set_frustum(): Unsupported camera type: "+b.type)}b.near=d;b.far=f}function M(b,z){var d=
Aa.Wb(z.A.D,sa),f=Aa.Fb(z.A.D,Ia),c=ha.fromRotationTranslation(f,d,Fa);ha.invert(c,b.pc);if(va.Ya())var c=va.R(),e=va.dc(c,Va.Gh);if(b.type==a.Yc||e&&e.enable_hmd_stereo&&b.type==a.eg)b.pc[12]+=b.Hg/2;else if(b.type==a.gd||e&&e.enable_hmd_stereo&&b.type==a.Ef)b.pc[12]-=b.Hg/2;if(b.Kc){Aa.Vh(b.pc,b.$v);Aa.invert(b.$v,b.LB);var c=b.Kc[0],e=b.Kc[1],q=b.Kc[2],g=b.Kc[3],h=b.et;h[0]=1-2*c*c;h[1]=-2*c*e;h[2]=-2*c*q;h[3]=0;h[4]=-2*c*e;h[5]=1-2*e*e;h[6]=-2*e*q;h[7]=0;h[8]=-2*c*q;h[9]=-2*e*q;h[10]=1-2*q*q;
h[11]=0;h[12]=-2*c*g;h[13]=-2*e*g;h[14]=-2*q*g;h[15]=1;ha.multiply(b.pc,b.et,b.pc);p(b,!0);Y.transformMat4(d,b.et,d)}Aa.Vh(b.pc,b.Ng);Aa.invert(b.Ng,b.yD);Aa.ti(d,1,f,b.D);da(b)}function p(a,b){la(a,!0);var z=Ea,d=Fa;ha.invert(a.pc,d);ha.transpose(d,d);ua.transformMat4(a.Kc,d,z);d=Na;d[0]=(ka.sign(z[0])+a.Jb[8])/a.Jb[0];d[1]=(ka.sign(z[1])+a.Jb[9])/a.Jb[5];d[2]=-1;d[3]=(1+a.Jb[10])/a.Jb[14];ua.scale(z,2/(z[0]*d[0]+z[1]*d[1]+z[2]*d[2]+z[3]*d[3]),z);a.Jb[2]=z[0];a.Jb[6]=z[1];a.Jb[10]=z[2]+1;a.Jb[14]=
z[3];ba(a);b||da(a)}function I(a,b,z){z=Y.subtract(z,b,sa);Y.length(z)&&(Y.normalize(z,z),z=ka.UQ(ka.qc,z,Ia),Ba.Ol(a,z));Ba.ke(a,b)}function y(a,b,z){var d=a.A,f=L(a);I(a,b,z);f?(b=Y.copy(d.We,sa),Y.negate(b,b),l(a,b,!0)):l(a,d.We,!0)}function D(a,b){for(var z=a.A,d=b.oa,f=Aa.Fb(z.D,Ia),f=ka.Jc(f,ka.qc,sa),c=Aa.Wb(z.D,Qa),e=b.RR,q=0;q<e.length;q++){var g=e[q];Y.copy(f,g.direction);Aa.Wb(z.D,g.QA)}for(q=0;q<d.length;q++)g=d[q],M(g,a),Y.copy(f,g.direction),g.dof_object&&g.dof_on&&(z=Ba.Me(g.dof_object,
cb),z=Y.dist(c,z),g.dof_distance=z)}function l(b,z,d){var f=b.A,c=Aa.la(f.D),e=ka.Jc(c,ka.ic,sa);Y.normalize(e,e);if(.999999<Math.abs(Y.dot(z,e)))e=Q.identity(Ia);else{var q=Y.cross(z,e,Qa);Y.normalize(q,q);f.zb==a.Ob?f.An&&Y.negate(q,q):(f=ka.Jc(c,ka.Eh,cb),0<Y.dot(f,z)&&Y.negate(q,q));f=ka.Jc(c,ka.Cf,cb);Y.normalize(f,f);var g=ka.pa(Y.dot(f,q),-1,1),e=-.999999>=g?Q.setAxisAngle(e,Math.acos(g),Ia):Q.rotationTo(f,q,Ia);Q.normalize(e,e)}Q.multiply(e,c,c);d&&(d=ka.Jc(c,ka.Ee,sa),0>Y.dot(z,d)&&Q.rotateZ(c,
Math.PI,c));u(b)}function u(b){var z=b.A;z.zb==a.Ob&&(z.An=L(b))}function L(a){a=Aa.la(a.A.D);return 0>ka.Jc(a,ka.Ee,sa)[2]}function F(b,d){var f=b.A;if(d){f.yc=f.yc||{};f.yc.left=d.left;f.yc.right=d.right;f.yc.KA=d.left;f.yc.NB=d.right;f.yc.camera_space=!!d.camera_space;var c=b.A;!(f=c.yc)||c.zb!=a.Xc&&c.zb!=a.Ob||(c=B(b,z),f.camera_space?(f.left+=c[0],f.right+=c[0]):(f.KA-=c[0],f.NB-=c[0]),f.left=ka.Jh(f.left),f.right=ka.Jh(f.right),f.KA=ka.Jh(f.KA),f.NB=ka.Jh(f.NB))}else f.yc=null}function U(a,
b){var z=a.A;b?(z.ib=z.ib||{},z.ib.down=b.down,z.ib.up=b.up,z.ib.Zq=b.down,z.ib.Ns=b.up,z.ib.camera_space=!!b.camera_space,A(a)):z.ib=null}function K(a,b){var d=a.A;if(!b){var f=B(a,z);b={down:f[1],up:f[1]}}d.ib=d.ib||{};d.ib.down=b.down;d.ib.up=b.up;A(a);d.Vb&&d.ib&&ea(a)}function A(b){var d=b.A,f=d.ib;if(f)switch(d.zb){case a.Xc:case a.Ob:b=B(b,z);f.camera_space?(f.up+=b[1],f.down+=b[1]):(f.Ns-=b[1],f.Zq-=b[1]);f.up=ka.Fi(f.up,-Math.PI,Math.PI);f.down=ka.Fi(f.down,-Math.PI,Math.PI);f.Ns=ka.Fi(f.Ns,
-Math.PI,Math.PI);f.Zq=ka.Fi(f.Zq,-Math.PI,Math.PI);break;case a.ed:f.up=ka.Fi(f.up,-Math.PI,Math.PI),f.down=ka.Fi(f.down,-Math.PI,Math.PI),f.up=ka.pa(f.up,-Math.PI/2,0),f.down=ka.pa(f.down,-Math.PI/2,0)}}function E(a,b){var z=a.A;if(!b){var d=Ba.Iv(a,z.Hc);b={min:d,max:d}}z.Vb=z.Vb||{};z.Vb.min=b.min;z.Vb.max=b.max;z.Vb&&z.ib&&ea(a)}function n(a,b){var z=a.A;b?(z.Vb=z.Vb||{},z.Vb.min=b.min,z.Vb.max=b.max):z.Vb=null}function f(a,b){var z=a.A;b?(z.Re=z.Re||{},z.Re.min_z=b.min_z,z.Re.max_z=b.max_z):
z.Re=null}function X(a,b){var z=a.A;b?(z.he=z.he||{},z.he.min=b.min,z.he.max=b.max):z.he=null}function d(a,b){var z=a.A;b?(z.ie=z.ie||{},z.ie.min=b.min,z.ie.max=b.max):z.ie=null}function H(b){var z=b.A;if(ra.mb(b))for(var d=b.T,f=0;f<d.length;f++){var c=d[f].oa;if(c[0].type===a.$e){switch(z.zb){case a.Ob:var e=Aa.X(z.D),e=Y.dist(e,z.pivot),e=e/z.Nm*z.Om;break;case a.ed:e=Aa.X(z.D);e=Y.distance(e,z.Hc);e=e/z.Nm*z.Om;break;default:e=c[0].wc}for(var q=0;q<c.length;q++){var g=c[q];g.wc=e;la(g,!0)}D(b,
d[f])}}}function G(b){var d=b.A,f=d.zb;if(f===a.Ob||f===a.Xc){if(d.yc){var c=d.yc.left,e=d.yc.right,g=B(b,z);(g=f==a.Ob?ka.oo(g[0],c,e):ka.oo(g[0],e,c))&&(f==a.Ob?q(b,g,0):qa(b,g,0))}d.ib&&(c=d.ib.down,e=d.ib.up,g=B(b,z),(g=f==a.Ob?ka.oo(g[1],e,c):ka.oo(g[1],c,e))&&(f==a.Ob?q(b,0,g):qa(b,0,g)));if(f===a.Ob&&d.Vb){var g=b.A,c=Aa.X(g.D),e=Y.subtract(c,g.pivot,sa),h=Y.length(e);h>g.Vb.max?(Y.scale(e,g.Vb.max/h,e),Y.add(g.pivot,e,c)):h<g.Vb.min&&(h=Aa.la(g.D),h=ka.Jc(h,ka.qc,Qa),Y.scale(h,100*g.Vb.min,
h),Y.add(e,h,e),Y.scale(e,-g.Vb.min/Y.length(e),e),Y.add(g.pivot,e,c))}}f===a.Ob&&d.Re&&(d=b.A,g=d.pivot[2],c=ka.pa(d.pivot[2],d.Re.min_z,d.Re.max_z),c!=g&&(g=Y.set(0,0,c-g,sa),Y.add(d.pivot,g,d.pivot),d=Aa.X(d.D),Y.add(d,g,d)));f===a.ed&&(f=b.A,f.he&&(g=ka.pa(f.Hc[0],f.he.min,f.he.max)-f.Hc[0],f.Hc[0]+=g,d=Aa.X(f.D),d[0]+=g),f.ie&&(g=ka.pa(f.Hc[1],f.ie.min,f.ie.max)-f.Hc[1],f.Hc[1]+=g,d=Aa.X(f.D),d[1]+=g),f=b.A,d=B(b,z)[1],(f=ka.oo(d,f.ib.up,f.ib.down))&&pa(b,0,f))}function R(a,b,z,d){a=B(a,ta);
d[0]=b-a[0];d[1]=z-a[1];return d}function q(a,b,z){var d=a.A;ma(a,a.A.pivot,b,z);a=B(a,Da);a=ka.Fi(a[1],-Math.PI,Math.PI);d.An=Math.abs(a)>Math.PI/2}function ja(a,b,z){b=R(a,b,z,Da);q(a,b[0],b[1])}function qa(a,b,z){var d=a.A;if(b||z)a=Q.identity(Ia),b&&(b=Q.setAxisAngle(d.We,b,Oa),Q.multiply(a,b,a)),b=Aa.la(d.D),z&&(d=ka.Jc(b,ka.Cf,sa),z=Q.setAxisAngle(d,z,Oa),Q.normalize(z,z),Q.multiply(a,z,a)),Q.multiply(a,b,b),Q.normalize(b,b)}function C(a,b,d){var f=Aa.Fb(a.A.D,Ia),f=v(f,z);qa(a,b-f[0],d-f[1])}
function pa(a,b,z){var d=a.A;d.Mj||(b=0);ma(a,d.Hc,b,z);z&&ea(a)}function ia(a,b,z){b=R(a,b,z,Da);pa(a,b[0],b[1])}function ma(a,b,z,d){var f=a.A;if(z||d){a=Q.identity(Ia);z&&(z=Q.setAxisAngle(ka.ic,z,Oa),Q.multiply(a,z,a));z=Aa.la(f.D);if(d){var c=ka.Jc(z,ka.Cf,sa);d=Q.setAxisAngle(c,d,Oa);Q.normalize(d,d);Q.multiply(a,d,a)}d=Aa.X(f.D);ka.C3(d,b,a,d);Q.multiply(a,z,z);Q.normalize(z,z)}}function ea(a){var b=a.A,d=B(a,z)[1],f=a.A;a=f.ib;f=f.Vb;a.down-a.up?(d=(a.down-d)/(a.down-a.up),d=Math.max(d,0)):
d=0;d=d*(f.max-f.min)+f.min;a=Aa.X(b.D);f=Aa.la(b.D);f=ka.Jc(f,ka.qc,sa);Y.normalize(f,f);Y.scale(f,d,f);Y.subtract(b.Hc,f,a)}function la(b,z){switch(b.type){case a.fd:case a.fg:ha.perspective(P(b),b.Cb,b.near,b.far,b.Jb);break;case a.$e:case a.Ei:var d=P(b),f=d*b.Cb;ha.ortho(-f,f,-d,d,b.near,b.far,b.Jb);break;case a.Dk:ha.ortho(b.left,b.right,b.bottom,b.top,b.near,b.far,b.Jb);break;case a.Yc:case a.gd:var f=Math.tan(P(b)/2),d=b.near*f,c=b.Cb*b.vn*f;b.type==a.Yc?(f=c-b.Hg/2,c+=b.Hg/2):(f=c+b.Hg/2,
c-=b.Hg/2);f=-(b.near/b.vn*f);c*=b.near/b.vn;ha.frustum(f,c,-d,d,b.near,b.far,b.Jb);b.left=f;b.right=c;break;case a.eg:case a.Ef:va.Ya()&&(d=va.R(),(d=va.dc(d,Va.Gh))&&d.enable_hmd_stereo?(d=Math.tan(b.Od[1]),f=Math.tan(b.Od[2]),c=Math.tan(b.Od[3]),b.top=b.near*Math.tan(b.Od[0]),b.right=b.near*d,b.bottom=-b.near*f,b.left=-b.near*c,ha.frustum(b.left,b.right,b.bottom,b.top,b.near,b.far,b.Jb)):(b.top=b.near*Math.tan(P(b)/2),b.bottom=-b.top,b.right=b.top*b.Cb,b.left=-b.right,ha.perspective(P(b),b.Cb,
b.near,b.far,b.Jb)));break;case a.Ac:return;default:ka.K("Wrong camera type: "+b.type)}ba(b);z||da(b)}function ba(a){ha.translate(a.Jb,a.Vw.trans,a.Jb);ha.rotateZ(a.Jb,a.Vw.angle,a.Jb)}function da(a){xa(a);ca(a);ka.GF(a.Mg,a.No)}function xa(a){ha.copy(a.pc,a.Mg);ha.multiply(a.Jb,a.Mg,a.Mg);ha.invert(a.Mg,a.xD)}function ca(a){ha.copy(a.pc,a.ui);a.ui[12]=0;a.ui[13]=0;a.ui[14]=0;a.ui[15]=1;ha.multiply(a.Jb,a.ui,a.ui);ha.invert(a.ui,a.ui)}function V(b,z,d,f,c){f||(f=new Float32Array(24));z||(z=b.near);
d||(d=b.far);var e,g,q,h,G,l,n,p;switch(b.type){case a.Ac:ka.K("Extraction from NONE camera is not possible");break;case a.fd:case a.fg:e=z*Math.tan(P(b)/2);h=-e;g=e*b.Cb;q=-g;G=d/z*e;p=-G;l=G*b.Cb;n=-l;break;case a.$e:case a.Ei:h=P(b);q=h*b.Cb;e=G=h;g=l=q;h=p=-h;q=n=-q;break;case a.Dk:e=G=b.top;g=l=b.right;h=p=b.bottom;q=n=b.left;break;case a.Yc:case a.gd:G=z/b.near;e=z*Math.tan(P(b)/2);h=-e;g=b.right*G;q=b.left*G;n=d/z;G=e*n;p=-G;l=g*n;n*=q;break;case a.eg:case a.Ef:G=z/b.near;e=b.top*G;h=b.bottom*
G;g=b.right*G;q=b.left*G;n=d/z;G=e*n;p=h*n;l=g*n;n*=q;break;default:ka.K("Wrong camera type: "+b.type)}f[0]=q;f[1]=h;f[2]=-z;f[3]=g;f[4]=h;f[5]=-z;f[6]=g;f[7]=e;f[8]=-z;f[9]=q;f[10]=e;f[11]=-z;f[12]=n;f[13]=p;f[14]=-d;f[15]=n;f[16]=G;f[17]=-d;f[18]=l;f[19]=G;f[20]=-d;f[21]=l;f[22]=p;f[23]=-d;c&&(z=Fa,ha.invert(b.pc,z),ka.as(f,z,f,0));return f}function Ja(a,b){if(b.enable_csm){var z=b.csm_num;if(!a.Jj){var d=b.csm_num;a.Jj=Array(d);for(var f=0;f<d;f++)a.Jj[f]=new Float32Array(3);a.Eu=new Float32Array(d)}for(d=
0;d<z;d++){var f=d?S(b,a,d-1):a.near,c=S(b,a,d),f=V(a,f,c,Ra),f=aa.g0(f);a.Jj[d].set(f.V);a.Eu[d]=f.pb;a.Qy[d]=Y.length(f.V);a.Zr[d]=oa(b.first_cascade_blur_radius,b.last_cascade_blur_radius,z,d)}}else a.Zr[0]=b.first_cascade_blur_radius}function S(a,b,z){var d=a.csm_num,f=ka.pa(a.csm_first_cascade_border,b.near,b.far);a=ka.pa(a.csm_last_cascade_border,b.near,b.far);return ka.pa(oa(f,a,d,z),b.near,b.far)}function oa(a,b,z,d){switch(d){case 0:break;case z-1:a=b;break;default:a=0==a?0:a*Math.pow(b/
a,d/(z-1))}return a}function Z(b){switch(b.type){case a.$e:case a.Ei:case a.Dk:return!0;default:return!1}}function fa(a,b){b||(b=new Float32Array(3));var z=Aa.X(a.A.D);Y.copy(z,b);return b}var aa=w("__boundings"),za=w("__container"),ha=w("__mat4"),J=w("__math"),ra=w("__obj_util"),ya=w("__print"),Q=w("__quat"),va=w("__scenes"),Va=w("__subscene"),Ba=w("__transform"),Aa=w("__tsr"),ka=w("__util"),Y=w("__vec3"),ua=w("__vec4");a.Ac=10;a.fd=20;a.$e=30;a.fg=40;a.Ei=50;a.Dk=60;a.Yc=70;a.gd=80;a.eg=90;a.Ef=
100;a.He=0;a.Ob=2;a.Xc=3;a.ed=4;var Pa=ka.df(40),wa=ka.df(.5),W=new Float32Array([1,1,1,1]),Ya=new Float32Array([-1,-1,1,1]),Ga=new Float32Array([0,0,-1,1]),z=new Float32Array(2),Da=new Float32Array(2),ta=new Float32Array(2),sa=new Float32Array(3),Qa=new Float32Array(3),cb=new Float32Array(3),Ia=new Float32Array(4),Oa=new Float32Array(4),Ea=new Float32Array(4),Na=new Float32Array(4),Fa=new Float32Array(16),Ra=new Float32Array(24),Ha=new Float32Array(6);a.mX=function(z,d){var f=d.A,e=z.data;switch(e.type){case "PERSP":var q=
g(a.fd);q.br=e.sensor_fit;N(q,e.angle,e.clip_start,e.clip_end);break;case "ORTHO":q=g(a.$e),q.br=e.sensor_fit,N(q,e.ortho_scale/2,e.clip_start,e.clip_end)}q.name=d.name;var n=d.T;n[0].oa.push(q);for(var l=1;l<n.length;l++){var p=m(q,!1);n[l].oa.push(p)}f.zb=r(e.b4w_move_style);f.dof_distance=e.dof_distance;q=e.dof_object;f.dof_object=q?q.Oa:null;f.dof_front_start=e.b4w_dof_front_start;f.dof_front_end=e.b4w_dof_front_end;f.dof_rear_start=e.b4w_dof_rear_start;f.dof_rear_end=e.b4w_dof_rear_end;f.dof_power=
e.b4w_dof_power;f.dof_bokeh=e.b4w_dof_bokeh;f.dof_bokeh_intensity=e.b4w_dof_bokeh_intensity;f.pe=e.b4w_dof_foreground_blur;f.$s=e.b4w_trans_velocity;f.Zs=e.b4w_rot_velocity;f.at=e.b4w_zoom_velocity;q=d.A.zb;n=z.data;l=null;q!=a.Ob&&q!=a.Xc||!n.b4w_use_horizontal_clamping||(l={left:n.b4w_rotation_left_limit,right:n.b4w_rotation_right_limit,camera_space:"LOCAL"==n.b4w_horizontal_clamping_type},q==a.Xc&&(l.left*=-1,l.right*=-1));q=l;n=d.A.zb;l=z.data;p=null;n!=a.Ob&&n!=a.Xc||!l.b4w_use_vertical_clamping?
n==a.ed&&l.b4w_use_zooming&&(l.b4w_hover_angle_min<=l.b4w_hover_angle_max?(p={down:l.b4w_hover_angle_min,up:l.b4w_hover_angle_max},p.down*=-1,p.up*=-1):ya.error("Wrong angle limits for the HOVER camera. Disabling angle limits.")):(p={down:l.b4w_rotation_down_limit,up:l.b4w_rotation_up_limit,camera_space:"LOCAL"==l.b4w_vertical_clamping_type},n==a.Ob&&(p.down*=-1,p.up*=-1));var n=p,l=d.A.zb,p=z.data,J=null;l==a.Ob&&p.b4w_use_target_distance_limits&&p.b4w_distance_min<=p.b4w_distance_max?J={min:p.b4w_distance_min,
max:p.b4w_distance_max}:l===a.ed&&p.b4w_use_zooming&&(p.b4w_distance_min<=p.b4w_distance_max?J={min:p.b4w_distance_min,max:p.b4w_distance_max}:ya.error("Wrong distance limits for the HOVER camera. Disabling distance limits."));l=J;p=z.data;J=null;d.A.zb==a.ed&&p.b4w_use_horizontal_clamping&&p.b4w_horizontal_translation_min<=p.b4w_horizontal_translation_max&&(J={min:p.b4w_horizontal_translation_min,max:p.b4w_horizontal_translation_max});var p=J,J=z.data,E=null;d.A.zb==a.ed&&J.b4w_use_vertical_clamping&&
J.b4w_vertical_translation_min<=J.b4w_vertical_translation_max&&(E={min:J.b4w_vertical_translation_min,max:J.b4w_vertical_translation_max});var J=E,E=z.data,Da=null;d.A.zb==a.Ob&&E.b4w_use_pivot_limits&&(Da={min_z:E.b4w_pivot_z_min,max_z:E.b4w_pivot_z_max});E=Da;switch(f.zb){case a.Xc:f=Aa.X(d.A.D);t(d,f,null,q,n);break;case a.Ob:f=Aa.X(d.A.D);c(d,f,e.b4w_target,q,n,l,E,e.b4w_use_panning);break;case a.ed:f=Aa.X(d.A.D),q=k(d,z.data.b4w_hover_zero_level,Qa),b(d,f,q,l,n,p,J,e.b4w_enable_hover_hor_rotation)}G(d);
h(d)};a.C4=t;a.NR=c;a.MR=b;a.qr=h;a.hd=m;a.qY=x;a.nda=r;a.ad=g;a.Y9=function(a,b){switch(b){case "COLOR":case "CUBEMAP":return!!a.bc;case "DEPTH":return!!a.og;case "SCREEN":return!a.bc&&!a.og;default:ka.K("Wrong attachment type: "+b)}};a.UB=function(a,b,z){switch(b){case "COLOR":case "CUBEMAP":a.bc=z;break;case "DEPTH":a.og=z;break;case "SCREEN":a.bc=null;a.og=null;break;default:ka.K("Wrong attachment type: "+b)}};a.aba=function(a,b){switch(b){case "COLOR":case "CUBEMAP":return a.bc;case "DEPTH":return a.og;
case "SCREEN":return null;default:ka.K("Wrong attachment type: "+b)}};a.WA=function(b,z){(b.type!=a.fd||z!=a.Yc&&z!=a.gd&&z!=a.eg&&z!=a.Ef)&&ka.K("make_stereo(): wrong camera type");b.type=z;e(b,6,.065)};a.t4=e;a.ml=B;a.UF=v;a.Hz=function(a,b){B(a,b);b[0]=ka.Jh(b[0]+Math.PI);b[1]*=-1;return b};a.qR=function(b,z){switch(b.type){case a.fd:case a.fg:case a.Yc:case a.gd:b.wc=z}};a.VN=function(b){switch(b.type){case a.fd:case a.fg:case a.Yc:case a.gd:return b.wc;default:return 0}};a.C0=P;a.rR=N;a.sR=function(b,
z,d,f,c){switch(b.type){case a.fd:case a.Yc:case a.gd:case a.$e:b.wc=d;b.Cb=1;break;case a.fg:case a.Ei:b.wc=d;b.Cb=z/d;break;case a.eg:case a.Ef:break;default:ka.K("set_frustum2(): Unsupported camera type: "+b.type)}b.near=f;b.far=c};a.e4=function(b,z,d,f,c,e,q){switch(b.type){case a.Dk:b.left=z;b.right=d;b.bottom=f;b.top=c;b.near=e;b.far=q;break;default:ka.K("set_frustum_asymmetric(): Unsupported camera type: "+b.type)}};a.Vi=function(a){return a.A.zb};a.z4=M;a.FR=p;a.xI=function(b,z,d){var f=sa;
f[0]=0;f[1]=0;f[2]=-1;Y.transformQuat(f,d,f);f[0]+=z[0];f[1]+=z[1];f[2]+=z[2];var c=Qa;c[0]=0;c[1]=1;c[2]=0;Y.transformQuat(c,d,c);ha.lookAt(z,f,c,b.pc);d=va.R();d=va.dc(d,Va.Gh);if(b.type==a.Yc||d&&d.enable_hmd_stereo&&b.type==a.eg)b.pc[12]+=b.Hg/2;else if(b.type==a.gd||d&&d.enable_hmd_stereo&&b.type==a.Ef)b.pc[12]-=b.Hg/2;Aa.Vh(b.pc,b.Ng);xa(b);ca(b);Aa.Bd(z,b.D)};a.yR=I;a.jea=y;a.P5=D;a.O5=function(b){var z=b.A;G(b);H(b);switch(z.zb){case a.Ob:var d=Aa.X(z.D),f=Aa.la(z.D);ka.IB(d,f,z.pivot,ka.qc);
for(f=0;f<b.T.length;f++)for(var c=b.T[f].oa,q=0;q<c.length;q++){var g=c[q];g.type!=a.Yc&&g.type!=a.gd||e(g,Y.dist(d,z.pivot),g.Hg)}l(b,z.We);break;case a.Xc:b.Cc||l(b,z.We)}u(b)};a.Fy=l;a.KS=u;a.aC=F;a.hC=U;a.rA=K;a.qA=E;a.jR=n;a.BR=f;a.wR=X;a.IR=d;a.e6=H;a.Sda=q;a.Aea=ja;a.Pda=function(a,b,z){qa(a,b,z)};a.xea=function(a,b,z){C(a,b,z)};a.Rda=qa;a.zea=C;a.Qda=pa;a.s4=ia;a.B3=function(b,z,d){var f=b.A.zb;f===a.Ob?q(b,z,d):f===a.Xc?qa(b,z,d):f===a.ed?pa(b,z,d):f===a.He&&qa(b,z,d)};a.r4=function(b,z,
d){var f=b.A.zb;f===a.Ob?ja(b,z,d):f===a.Xc?C(b,z,d):f===a.ed?ia(b,z,d):f===a.He&&C(b,z,d)};a.Uca=function(b){switch(b.type){case a.fd:case a.$e:case a.Yc:case a.gd:return!0;default:return!1}};a.I_=function(b){switch(b.type){case a.fd:case a.fg:case a.Yc:case a.gd:var z;a:{switch(b.br){case "AUTO":z=1<b.Cb?b.wc:Z(b)?b.wc*b.Cb:2*Math.atan(Math.tan(b.wc/2)*b.Cb);break a;case "HORIZONTAL":z=b.wc;break a;case "VERTICAL":z=Z(b)?b.wc*b.Cb:2*Math.atan(Math.tan(b.wc/2)*b.Cb);break a}z=void 0}return Math.min(P(b),
z);default:return ya.error("get_angular_diameter(): Unsupported camera type: "+b.type),0}};a.O3=function(b,z){switch(b.type){case a.fg:case a.Ei:ya.error("set_aspect(): Unsupported camera type: "+b.type);break;default:b.Cb=z}};a.$aa=function(a){return a.Cb};a.Nl=la;a.S3=function(b,z,d,f,c){var e=1/Math.max(c,f);switch(b.type){case a.Ac:case a.fd:case a.fg:c/=2;f/=2;d=-(d-c)/c*Math.tan(P(b)/2);z=(z-f)/f*Math.tan(P(b)/2)*b.Cb;f=b.near*(d+e);c=b.near*(z+e);d=b.near*(d-e);z=b.near*(z-e);ha.frustum(z,
c,d,f,b.near,b.far,b.Jb);break;case a.$e:case a.Ei:d=-d/c;z/=f;f=P(b);c=f*b.Cb;ha.ortho(-c+(z-e)*(c+c),-c+(z+e)*(c+c),f+(d-e)*(f+f),f+(d+e)*(f+f),b.near,b.far,b.Jb);break;case a.Dk:d=-d/c,z/=f,f=b.top+(d+e)*(b.top-b.bottom),c=b.left+(z+e)*(b.right-b.left),d=b.top+(d-e)*(b.top-b.bottom),z=b.left+(z-e)*(b.right-b.left),ha.ortho(z,c,d,f,b.near,b.far,b.Jb)}ba(b);da(b)};a.iX=ca;a.a_=V;a.DW=function(a){a=a.A;var b=aa.If();b.min_x=-1;b.max_x=1;b.min_y=-1;b.max_y=1;b.min_z=-1;b.max_z=1;a.Ca=b;var z=aa.BL(1,
ka.Qh([0,0,0]));a.Bc=z;a.Vt=aa.oL(1,b);a.Xt=aa.qL(1,b);a.Wt=aa.pL(1,b)};a.gp=function(b){return ra.mb(b)&&b.A&&b.A.zb==a.He};a.Ic=function(b){return ra.mb(b)&&b.A&&b.A.zb==a.Ob};a.Ne=function(b){return ra.mb(b)&&b.A&&b.A.zb==a.Xc};a.md=function(b){return ra.mb(b)&&b.A&&b.A.zb==a.ed};a.CA=function(b){return ra.mb(b)&&b.A&&b.T[0].oa[0].type==a.$e};a.jJ=Ja;a.nZ=S;a.HH=function(b,z,d){b=b.T[0].oa[0];switch(b.type){case a.fd:case a.fg:case a.$e:case a.Ei:case a.Yc:case a.gd:case a.eg:case a.Ef:case a.Ac:var f=
Ea;f.set(z);f[3]=1;ua.transformMat4(f,b.Mg,f);z=-f[1]/f[3];d[0]=(f[0]/f[3]+1)/2*b.width;d[1]=(z+1)/2*b.height;za.E6(d[0],d[1],d,b);2<d.length&&(d[2]=(f[2]/Math.abs(f[3])+1)/2);return d;default:return ya.error("Non-compatible camera"),d}};a.a0=function(a){return a.T[0].oa[0]};a.Jz=function(b,z){switch(b.type){case a.fd:case a.fg:case a.Yc:case a.gd:var d=Math.tan(P(b)/2);switch(z){case "LEFT":return-d*b.Cb;case "RIGHT":return d*b.Cb;case "TOP":return d;case "BOTTOM":return-d}break;case a.$e:case a.Ei:switch(z){case "LEFT":return-P(b)*
b.Cb;case "RIGHT":return P(b)*b.Cb;case "TOP":return P(b);case "BOTTOM":return-P(b)}break;case a.Dk:switch(z){case "LEFT":return b.left;case "RIGHT":return b.right;case "TOP":return b.top;case "BOTTOM":return b.bottom}break;case a.eg:case a.Ef:d=va.R();if((d=va.dc(d,Va.Gh))&&d.enable_hmd_stereo)switch(z){case "LEFT":return-Math.tan(Math.min(b.Od[1],b.Od[3]));case "RIGHT":return Math.tan(Math.min(b.Od[1],b.Od[3]));case "TOP":return Math.tan(Math.min(b.Od[0],b.Od[2]));case "BOTTOM":return-Math.tan(Math.min(b.Od[0],
b.Od[2]))}else switch(d=Math.tan(P(b)/2),z){case "LEFT":return-d*b.Cb;case "RIGHT":return d*b.Cb;case "TOP":return d;case "BOTTOM":return-d}break;default:ka.K("Unknown camera type")}};a.q1=Z;a.vI=function(a,b,z){a=a.A;Aa.Bd(b,a.D);Y.copy(z,a.pivot)};a.xR=function(a,b){var z=a.A,d=Y.subtract(b,z.Hc,sa),f=Aa.X(z.D),d=Y.add(d,f,d);Ba.ke(a,d);Y.copy(b,z.Hc)};a.u4=function(a,b){var z=a.A,d=Y.subtract(b,z.pivot,sa),f=Aa.X(z.D),d=Y.add(d,f,d);Ba.ke(a,d);Y.copy(b,z.pivot)};a.mba=fa;a.nea=function(z,d){z.A.zb=
d;z.A.yc=null;z.A.ib=null;z.A.Vb=null;z.A.he=null;z.A.ie=null;h(z);switch(d){case a.ed:var f=Aa.X(z.A.D),c=k(z,0,Qa);b(z,f,c,null,null,null,null,z.A.Mj);break;case a.Ob:f=fa(z,sa),c=Aa.la(z.A.D),c=ka.Jc(c,ka.qc,Qa),c=Y.scaleAndAdd(f,c,10,c),Y.copy(c,z.A.pivot)}};a.Yw=function(a){a=a.A;a.zb=0;Y.set(0,0,0,a.pivot);Y.set(0,0,0,a.Hc);a.An=!1;a.use_panning=!1;a.yc=null;a.ib=null;a.Vb=null;a.he=null;a.ie=null;a.Re=null;a.Mj=!0};a.ZB=function(a,b){for(var z=0;z<a.length;z++){var d=a[z];70!=d.type&&80!=d.type&&
90!=d.type&&100!=d.type||e(d,d.vn,b)}};a.mI=function(a,b,z){var d=va.R();a=ra.La(a,d).oa;for(d=0;d<a.length;d++){var f=a[d];if(90==f.type||100==f.type)90==f.type&&ua.copy(b,f.Od),100==f.type&&ua.copy(z,f.Od),f.Kc?p(f,!1):la(f,!1)}};a.fea=function(a,b,z){var d=va.R();a=ra.La(a,d).oa;for(d=0;d<a.length;d++){var f=a[d];if(90==f.type||100==f.type)90==f.type&&b&&ha.copy(b,f.Jb),100==f.type&&z&&ha.copy(z,f.Jb),ba(f),da(f)}};a.m4=function(b,z){for(var d=va.R(),d=ra.La(b,d).oa,f,c,e,q,g,h,l,n,G=0;G<d.length;G++){var p=
d[G];if(p.type==a.Ac&&p.near||p.type==a.fd||p.type==a.fg){f=p.near;c=ha.invert(z,Fa);q=ua.transformMat4(W,c,Ea);e=q[0]*f;q=q[1]*f;h=ua.transformMat4(Ya,c,Ea);g=h[0]*f;h=h[1]*f;c=ua.transformMat4(Ga,c,Ea);c=-c[2]*c[3];l=ha.frustum(g,e,h,q,f,c,Fa);n=(e-g)/(q-h);break}}for(G=0;G<d.length;G++)if(p=d[G],p.type==a.Ac||p.type==a.fd||p.type==a.fg)p.far=c,p.near=f,p.right=e,p.top=q,p.left=g,p.bottom=h,p.Cb=n,p.wc=Math.atan(q/f)-Math.atan(h/f),ha.copy(l,p.Jb),ba(p),da(p)}};b4w.module.__boundings=function(a,w){function t(){return{max_x:0,min_x:0,max_y:0,min_y:0,max_z:0,min_z:0}}function c(a,b){b.min_x=a.min_x;b.max_x=a.max_x;b.min_y=a.min_y;b.max_y=a.max_y;b.min_z=a.min_z;b.max_z=a.max_z;return b}function b(){return{V:new Float32Array(3),ab:new Float32Array(3),eb:new Float32Array(3),fb:new Float32Array(3)}}function k(a,b){var f=a.max_y,c=a.max_z,d=a.min_x,e=a.min_y,g=a.min_z;a.max_x=Math.max(b.max_x,a.max_x);a.max_y=Math.max(b.max_y,f);a.max_z=Math.max(b.max_z,c);a.min_x=
Math.min(b.min_x,d);a.min_y=Math.min(b.min_y,e);a.min_z=Math.min(b.min_z,g);return a}function h(a,b,f,c){var d=a[b],e=a[b+1],g=a[b+2],h=a[b],q=a[b+1],l=a[b+2];for(b+=3;b<f;b+=3)var p=a[b],n=a[b+1],y=a[b+2],d=Math.max(d,p),e=Math.max(e,n),g=Math.max(g,y),h=Math.min(h,p),q=Math.min(q,n),l=Math.min(l,y);c.max_x=d;c.max_y=e;c.max_z=g;c.min_x=h;c.min_y=q;c.min_z=l;return c}function O(a,b){b||(b=new Float32Array(24));var f=a.max_x,c=a.max_y,d=a.max_z,e=a.min_x,g=a.min_y,h=a.min_z;b[0]=e;b[1]=g;b[2]=h;b[3]=
f;b[4]=g;b[5]=h;b[6]=f;b[7]=c;b[8]=h;b[9]=e;b[10]=c;b[11]=h;b[12]=e;b[13]=g;b[14]=d;b[15]=f;b[16]=g;b[17]=d;b[18]=f;b[19]=c;b[20]=d;b[21]=e;b[22]=c;b[23]=d;return b}function m(){return{V:new Float32Array(3),pb:0}}function x(a,b){b.V[0]=a.V[0];b.V[1]=a.V[1];b.V[2]=a.V[2];b.pb=a.pb;return b}function r(){return{ab:new Float32Array(3),eb:new Float32Array(3),fb:new Float32Array(3),V:new Float32Array(3)}}function g(a,b){p.copy(a.ab,b.ab);p.copy(a.eb,b.eb);p.copy(a.fb,b.fb);p.copy(a.V,b.V);return b}function e(a,
b,f,c){return{ab:new Float32Array(a),eb:new Float32Array(b),fb:new Float32Array(f),V:new Float32Array([c[0],c[1],c[2]])}}function B(a,b){var f=I.jX(a,F),f=b?I.dX(a,f,K):y.identity(K),f=I.j_(f,U);p.copy(a,l);p.transformMat3(l,f,l);for(var c=l[0],d=c,g=l[1],h=g,n=l[2],q=n,E,k,C,u,m=3;m<a.length;m+=3)l[0]=a[m],l[1]=a[m+1],l[2]=a[m+2],p.transformMat3(l,f,l),E=l[0],k=l[1],C=l[2],E>c&&(c=E),E<d&&(d=E),k>g&&(g=k),k<h&&(h=k),C>n&&(n=C),C<q&&(q=C);c=Math.max(c-d,.001);g=Math.max(g-h,.001);n=Math.max(n-q,.001);
q=y.identity(K);q[0]=c?1/c:2E3;q[4]=g?1/g:2E3;q[8]=n?1/n:2E3;y.transpose(f,A);l[0]=a[0];l[1]=a[1];l[2]=a[2];p.transformMat3(l,f,l);p.transformMat3(l,q,l);p.transformMat3(l,A,l);h=l[0];d=l[0];E=l[1];k=l[1];C=l[2];u=l[2];for(m=3;m<a.length;m+=3)l[0]=a[m],l[1]=a[m+1],l[2]=a[m+2],p.transformMat3(l,f,l),p.transformMat3(l,q,l),p.transformMat3(l,A,l),h=Math.max(h,l[0]),d=Math.min(d,l[0]),E=Math.max(E,l[1]),k=Math.min(k,l[1]),C=Math.max(C,l[2]),u=Math.min(u,l[2]);m=Math.sqrt((h-d)*(h-d)+(E-k)*(E-k)+(C-u)*
(C-u))/2;m=Math.min(m,1);L[0]=(h+d)/2;L[1]=(E+k)/2;L[2]=(C+u)/2;h=L;q=y.identity(K);q[0]=c;q[4]=g;q[8]=n;p.transformMat3(h,f,h);p.transformMat3(h,q,h);p.transformMat3(h,A,h);q=[f[0],f[3],f[6]];d=[f[1],f[4],f[7]];f=[f[2],f[5],f[8]];p.scale(q,c*m,q);p.scale(d,g*m,d);p.scale(f,n*m,f);return e(q,d,f,h)}function v(){return{pb:0,height:0,V:new Float32Array(3)}}function P(a,b,f){p.add(b,f,a.V);p.scale(a.V,.5,a.V);a.pb=p.distance(a.V,b);return a}var N=w("__tsr"),M=w("__util"),p=w("__vec3"),I=w("__math"),
y=w("__mat3"),D=new Float32Array(24),l=new Float32Array(3),u=new Float32Array(3),L=new Float32Array(3),F=new Float32Array(3),U=new Float32Array(9),K=new Float32Array(9),A=new Float32Array(9);a.VO=function(){return{Ff:t(),ig:r(),Gf:m()}};a.tM=function(a,b){c(a.Ff,b.Ff);g(a.ig,b.ig);x(a.Gf,b.Gf)};a.If=t;a.Gj=c;a.Ny=b;a.ZX=function(a,b){p.copy(a.V,b.V);p.copy(a.ab,b.ab);p.copy(a.eb,b.eb);p.copy(a.fb,b.fb)};a.S9=function(){return{max_x:1E12,min_x:-1E12,max_y:1E12,min_y:-1E12,max_z:1E12,min_z:-1E12}};
a.Q6=function(a){a.max_x=0;a.min_x=0;a.max_y=0;a.min_y=0;a.max_z=0;a.min_z=0};a.xy=function(a){var b=t();c(a,b);return b};a.eX=function(a){var b=a.max_x-a.min_x,f=a.max_y-a.min_y;f<b&&(b=f);a=a.max_z-a.min_z;a<b&&(b=a);return b};a.pz=k;a.tE=h;a.Lq=function(a,b,f){f||(f=t());a=O(a,D);N.Cn(a,b,a);return h(a,0,a.length,f)};a.jN=O;a.Pea=function(a,b,f){f||(f=t());var c=b.min_x,d=b.max_x,e=b.min_y,g=b.max_y,h=b.min_z;b=b.max_z;if(c>=a.max_x||d<=a.min_x||e>=a.max_y||g<=a.min_y||h>=a.max_z||b<=a.min_z)return f.min_x=
-.1,f.max_x=.1,f.min_y=-.1,f.max_y=.1,f.min_z=-.2,f.max_z=-.1,f;f.min_x=Math.max(a.min_x,c);f.max_x=Math.min(a.max_x,d);f.min_y=Math.max(a.min_y,e);f.max_y=Math.min(a.max_y,g);f.min_z=Math.max(a.min_z,h);f.max_z=Math.min(a.max_z,b);return f};a.afa=function(a,b,f){f||(f=t());var c=a.max_x-a.min_x,d=a.max_y-a.min_y,e=a.max_z-a.min_z;f.min_x=a.min_x-.5*(b-1)*c;f.max_x=a.max_x+.5*(b-1)*c;f.min_y=a.min_y-.5*(b-1)*d;f.max_y=a.max_y+.5*(b-1)*d;f.min_z=a.min_z-.5*(b-1)*e;f.max_z=a.max_z+.5*(b-1)*e;return f};
a.my=function(a,b,f){f||(f=m());N.Mc(a.V,b,f.V);b=N.ge(b);f.pb=a.pb*(0>b?-b:b);return f};a.AE=function(a,b,f){f||(f=r());N.Mc(a.V,b,f.V);p.copy(a.ab,f.ab);p.copy(a.eb,f.eb);p.copy(a.fb,f.fb);N.Vd(f.ab,b,f.ab);N.Vd(f.eb,b,f.eb);N.Vd(f.fb,b,f.fb);return f};a.BE=function(a,c,f){f||(f=b());N.Mc(a.V,c,f.V);p.copy(a.ab,f.ab);p.copy(a.eb,f.eb);p.copy(a.fb,f.fb);N.Vd(f.ab,c,f.ab);N.Vd(f.eb,c,f.eb);N.Vd(f.fb,c,f.fb);return f};a.BL=function(a,b){var f=m();p.copy(b,f.V);f.pb=a;return f};a.A3=function(a,c,f,
e,d){var g=b();p.copy(a,g.V);p.copy(c,g.ab);p.copy(f,g.eb);p.copy(e,g.fb);p.scale(g.ab,d[0],g.ab);p.scale(g.eb,d[1],g.eb);p.scale(g.fb,d[2],g.fb);return g};a.Hy=m;a.xm=x;a.yu=r;a.Oq=g;a.p$=function(a){var b=r();g(a,b);return b};a.q$=function(a){var b=m();x(a,b);return b};a.uE=e;a.OW=function(){var a;a||(a=m());p.set(0,0,0,a.V);a.pb=1E12;return a};a.XZ=function(a,b){var f=p.subtract(b.V,a.V,p.create());0==p.length(f)&&p.set(1,0,0,f);var c=p.normalize(f,p.create()),f=p.scale(c,a.pb,p.create());p.add(f,
a.V,f);var d=p.scale(c,-a.pb,p.create());p.add(d,a.V,d);var e=p.scale(c,b.pb,p.create());p.add(e,b.V,e);var g=p.scale(c,-b.pb,p.create());p.add(g,b.V,g);f=[f,d,e,g];c=p.normalize(c,p.create());d=f[0];e=f[0];for(g=1;g<f.length;g++){var h=p.dot(f[g],c);h<p.dot(d,c)&&(d=f[g]);h>p.dot(e,c)&&(e=f[g])}c=[d,e];f=c[0];c=c[1];a.V=p.scale(p.add(f,c,p.create()),.5,p.create());a.pb=p.length(p.subtract(c,f,p.create()))/2};a.HF=function(a,b){p.add(a.V,a.eb,l);p.add(l,a.ab,l);p.add(l,a.fb,l);b.push(l[0],l[1],l[2]);
p.add(a.V,a.eb,l);p.add(l,a.ab,l);p.subtract(l,a.fb,l);b.push(l[0],l[1],l[2]);p.add(a.V,a.eb,l);p.subtract(l,a.ab,l);p.add(l,a.fb,l);b.push(l[0],l[1],l[2]);p.add(a.V,a.eb,l);p.subtract(l,a.ab,l);p.subtract(l,a.fb,l);b.push(l[0],l[1],l[2]);p.subtract(a.V,a.eb,l);p.add(l,a.ab,l);p.add(l,a.fb,l);b.push(l[0],l[1],l[2]);p.subtract(a.V,a.eb,l);p.add(l,a.ab,l);p.subtract(l,a.fb,l);b.push(l[0],l[1],l[2]);p.subtract(a.V,a.eb,l);p.subtract(l,a.ab,l);p.add(l,a.fb,l);b.push(l[0],l[1],l[2]);p.subtract(a.V,a.eb,
l);p.subtract(l,a.ab,l);p.subtract(l,a.fb,l);b.push(l[0],l[1],l[2])};a.Gy=B;a.eY=function(a){var c=b();p.copy(a.ab,c.ab);p.copy(a.eb,c.eb);p.copy(a.fb,c.fb);p.copy(a.V,c.V);return c};a.Iy=function(a){var b=m(),f;f=p.length(a.ab);var c=p.length(a.eb),d=p.length(a.fb);f=f>c?f:c;b.V=a.V;b.pb=d>f?d:f;return b};a.aP=function(a,b){var f=p.length(a.ab),c=p.length(a.eb),d=p.length(a.fb);return.75*b.pb*b.pb*b.pb>f*c*d};a.Z0=a.a1=a.$0=v;a.oL=function(a,b){var f=b.max_z,c=b.min_z,d=Math.max(0,f-c-2*a),e=v();
e.pb=a;e.height=d;e.V[0]=0;e.V[1]=0;e.V[2]=(f+c)/2;return e};a.qL=function(a,b){var f=b.max_z,c=b.min_z,d=Math.max(0,f-c),e=v();e.pb=a;e.height=d;e.V[0]=0;e.V[1]=0;e.V[2]=(f+c)/2;return e};a.pL=function(a,b){var f=b.max_z,c=b.min_z,d=Math.max(0,f-c),e=v();e.pb=a;e.height=d;e.V[0]=0;e.V[1]=0;e.V[2]=(f+c)/2;return e};a.WX=a.YX=a.XX=function(a,b){b.pb=a.pb;b.height=a.height;b.V.set(a.V);return b};a.a$=function(a,b){return a.min_x>b.max_x||a.max_x<b.min_x?!1:a.min_y>b.max_y||a.max_y<b.min_y?!1:a.min_z>
b.max_z||a.max_z<b.min_z?!1:!0};a.h3=function(a){for(var b=0,f=0,e=t(),d=0;d<a.submeshes.length;d++){for(var g=a.submeshes[d],l=g.position,p=0;p<l.length/3;p++)var q=l[3*p],y=l[3*p+1],u=l[3*p+2],b=Math.max(Math.sqrt(q*q+y*y+u*u),b),f=Math.max(Math.sqrt(q*q+y*y),f);p=g.boundings.bb;l=h(l,0,l.length,t());p.max_x=l.max_x;p.min_x=l.min_x;p.max_y=l.max_y;p.min_y=l.min_y;p.max_z=l.max_z;p.min_z=l.min_z;p=O(l,D);p=B(p,!1);g.boundings.be_cen=p.V;g.boundings.be_ax=[p.ab[0],p.eb[1],p.fb[2]];d?k(e,l):c(l,e)}d=
a.b4w_boundings.bb;d.max_x=e.max_x;d.min_x=e.min_x;d.max_y=e.max_y;d.min_y=e.min_y;d.max_z=e.max_z;d.min_z=e.min_z;d=a.b4w_boundings.bb_src;d.max_x=e.max_x;d.min_x=e.min_x;d.max_y=e.max_y;d.min_y=e.min_y;d.max_z=e.max_z;d.min_z=e.min_z;a.b4w_boundings.bs_rad=b;a.b4w_boundings.bc_rad=f;p=O(e,D);p=B(p,!1);a.b4w_boundings.be_cen=p.V;a.b4w_boundings.be_ax=[p.ab[0],p.eb[1],p.fb[2]]};a.g0=function(a){var b=a.subarray(0,3),f=a.subarray(6,9),c=a.subarray(12,15),d=a.subarray(18,21);a=p.subtract(f,b,l);p.normalize(a,
a);var e=M.s0(b,f,c,u),e=p.cross(e,a,e);p.normalize(e,e);var g=p.create(),h=p.create();p.subtract(f,b,L);h[0]=p.dot(L,a);h[1]=p.dot(L,e);f=p.create();p.subtract(c,b,L);f[0]=p.dot(L,a);f[1]=p.dot(L,e);c=p.create();p.subtract(d,b,L);c[0]=p.dot(L,a);c[1]=p.dot(L,e);d=m();c=[g,h,f,c];g=P(d,c[0],c[1]);for(d=2;d<c.length;d++)if(p.distance(g.V,c[d])>g.pb){for(var q=g,g=c,h=c[d],f=d-1,q=P(q,h,g[0]),y=1;y<=f;y++)if(p.distance(q.V,g[y])>q.pb){for(var k=q,q=g,C=h,D=g[y],A=y-1,k=P(k,C,D),t=0;t<=A;t++)if(p.distance(k.V,
q[t])>k.pb){var F=C,v=D,B=q[t],E=p.subtract(v,B,L),E=p.squaredLength(E),K=p.subtract(F,B,L),x=p.squaredLength(K),K=p.subtract(F,v,L),N=p.squaredLength(K),K=E*(x+N-E),O=x*(N+E-x),E=N*(E+x-N),x=K+O+E;p.copy(F,k.V);p.scale(k.V,K/x,k.V);p.scaleAndAdd(k.V,v,O/x,k.V);p.scaleAndAdd(k.V,B,E/x,k.V);k.pb=p.distance(k.V,F)}q=k}g=q}d=g;a=p.scale(a,d.V[0],L);p.scaleAndAdd(a,e,d.V[1],a);p.add(a,b,d.V);return d}};b4w.module.__tsr=function(a,w){function t(){var a=new Float32Array(8);a[3]=1;a[7]=1;return a}function c(){var a=new Float32Array(9);a[3]=1;a[7]=1;return a}function b(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];return b}function k(a,b,c,e){e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=b;e[4]=c[0];e[5]=c[1];e[6]=c[2];e[7]=c[3];return e}function h(a,b){b[0]=a[4];b[1]=a[5];b[2]=a[6];b[3]=a[7];return b}function O(a,b,c){var e=b[0],g=b[1],h=b[2],p=b[3],k=b[4],m=b[5],t=b[6];
b=b[7];var v=a[0]*p,A=a[1]*p,M=a[2]*p;a=b*v+m*M-t*A;var p=b*A+t*v-k*M,n=b*M+k*A-m*v,v=-k*v-m*A-t*M;c[0]=a*b+v*-k+p*-t-n*-m;c[1]=p*b+v*-m+n*-k-a*-t;c[2]=n*b+v*-t+a*-m-p*-k;c[0]+=e;c[1]+=g;c[2]+=h;return c}var m=w("__mat4"),x=w("__quat"),r=w("__util"),g=w("__vec3"),e=Math.sin(-Math.PI/4),B=-e,v=new Float32Array(3),P=new Float32Array(4),N=new Float32Array(16);a.create=t;a.clone=function(a){var c=t();b(a,c);return c};a.Bz=function(a,b,c,e,g,h,k,m){var l=t();l[0]=a;l[1]=b;l[2]=c;l[3]=e;l[4]=g;l[5]=h;l[6]=
k;l[7]=m;return l};a.xo=c;a.r$=function(a){var e=c();b(a,e);return e};a.Paa=function(a,b,e,g,h,l,k,m){var p=c();p[0]=a;p[1]=b;p[2]=e;p[3]=g;p[4]=h;p[5]=l;p[6]=k;p[7]=m;return p};a.copy=b;a.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;a[6]=0;a[7]=1;return a};a.ti=k;a.Bd=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.Ue=function(a,b){b[3]=a;return b};a.on=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.Gc=function(a,b){b[4]=a[0];b[5]=a[1];b[6]=a[2];b[7]=
a[3];return b};a.X=function(a){return a.subarray(0,3)};a.Wb=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.ge=function(a){return a[3]};a.ir=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.la=function(a){return a.subarray(4,8)};a.Fb=h;a.invert=function(a,b){var c=1/a[3];if(!c)return null;var e=a[0],g=a[1],h=a[2];P[0]=a[4];P[1]=a[5];P[2]=a[6];P[3]=a[7];x.invert(P,P);var p=P[0],k=P[1],m=P[2],t=P[3],e=e*c,g=g*c,v=h*c,h=t*e+k*v-m*g,A=t*g+m*e-p*v,B=t*v+p*g-k*e,e=-p*e-k*g-m*v;
b[0]=-(h*t+e*-p+A*-m-B*-k);b[1]=-(A*t+e*-k+B*-p-h*-m);b[2]=-(B*t+e*-m+h*-k-A*-p);b[3]=c;b[4]=p;b[5]=k;b[6]=m;b[7]=t;return b};a.cD=function(a,b){var c=a[3];m.fromRotationTranslation(a.subarray(4,8),a.subarray(0,3),b);for(var e=0;12>e;e++)b[e]*=c;return b};a.Vh=function(a,b){var c=r.TG(a,v),e=r.PP(a),g=r.SG(a,P);k(c,e,g,b);return b};a.multiply=function(a,b,c){O(b,a,c);c[3]=a[3]*b[3];var e=a[4],g=a[5],h=a[6];a=a[7];var p=b[4],k=b[5],m=b[6];b=b[7];c[4]=e*b+a*p+g*m-h*k;c[5]=g*b+a*k+h*p-e*m;c[6]=h*b+a*
m+e*k-g*p;c[7]=a*b-e*p-g*k-h*m;return c};a.z5=function(a,b,c){var e=b[3];b=m.fromRotationTranslation(b.subarray(4,8),b.subarray(0,3),N);for(var g=0;12>g;g++)b[g]*=e;m.multiply(b,a,c);return c};a.Mc=O;a.BS=function(a,b,c){var e=b[3],g=a[0]-b[0],h=a[1]-b[1],p=a[2]-b[2];a=b[4];var k=b[5],m=b[6];b=b[7];var t=a*a+k*k+m*m+b*b,t=t?1/t:0;a=-a*t;k=-k*t;m=-m*t;b*=t;var t=b*g+k*p-m*h,v=b*h+m*g-a*p,A=b*p+a*h-k*g,g=-a*g-k*h-m*p;c[0]=t*b+g*-a+v*-m-A*-k;c[1]=v*b+g*-k+A*-a-t*-m;c[2]=A*b+g*-m+t*-k-v*-a;c[0]/=e;c[1]/=
e;c[2]/=e;return c};a.Cn=function(a,b,c,e){e||(e=0);var g=a.length,h=b[0],p=b[1],k=b[2],y=b[3],m=b[4],t=b[5],A=b[6];b=b[7];for(var v=0;v<g;v+=3){var n=a[v]*y,f=a[v+1]*y,B=a[v+2]*y,d=b*n+t*B-A*f,H=b*f+A*n-m*B,G=b*B+m*f-t*n,n=-m*n-t*f-A*B;c[e+v]=d*b+n*-m+H*-A-G*-t;c[e+v+1]=H*b+n*-t+G*-m-d*-A;c[e+v+2]=G*b+n*-A+d*-t-H*-m;c[e+v]+=h;c[e+v+1]+=p;c[e+v+2]+=k}return c};a.eJ=function(a,b,c,e){e||(e=0);var g=a.length,h=b[3],p=b[4],k=b[5],y=b[6];b=b[7];for(var m=0;m<g;m+=3){var t=a[m]*h,A=a[m+1]*h,v=a[m+2]*h,
n=b*t+k*v-y*A,f=b*A+y*t-p*v,B=b*v+p*A-k*t,t=-p*t-k*A-y*v;c[e+m]=n*b+t*-p+f*-y-B*-k;c[e+m+1]=f*b+t*-k+B*-p-n*-y;c[e+m+2]=B*b+t*-y+n*-k-f*-p}return c};a.Vd=function(a,b,c){var e=b[3],g=b[4],h=b[5],p=b[6];b=b[7];var k=a[0]*e,m=a[1]*e,t=a[2]*e;a=b*k+h*t-p*m;var e=b*m+p*k-g*t,v=b*t+g*m-h*k,k=-g*k-h*m-p*t;c[0]=a*b+k*-g+e*-p-v*-h;c[1]=e*b+k*-h+v*-g-a*-p;c[2]=v*b+k*-p+a*-h-e*-g;return c};a.fJ=function(a,b,c,e){e||(e=0);var g=a.length,h=b[3],k=b[4],p=b[5],y=b[6];b=b[7];for(var m=0;m<g;m+=4){var t=a[m]*h,A=
a[m+1]*h,v=a[m+2]*h,n=b*t+p*v-y*A,f=b*A+y*t-k*v,B=b*v+k*A-p*t,t=-k*t-p*A-y*v;c[e+m]=n*b+t*-k+f*-y-B*-p;c[e+m+1]=f*b+t*-p+B*-k-n*-y;c[e+m+2]=B*b+t*-y+n*-p-f*-k;c[e+m+3]=a[m+3]}return c};a.AS=function(a,b,c){b=h(b,P);x.multiply(b,a,c)};a.A5=function(a,b,c,e){e=e||0;b=h(b,P);r.f3(a,b,c,e)};a.translate=function(a,b,c){var e=a[3],g=a[4],h=a[5],k=a[6],p=a[7],m=b[0]*e,t=b[1]*e,v=b[2]*e;b=p*m+h*v-k*t;var e=p*t+k*m-g*v,A=p*v+g*t-h*m,m=-g*m-h*t-k*v;c[0]=a[0]+b*p+m*-g+e*-k-A*-h;c[1]=a[1]+e*p+m*-h+A*-g-b*-k;
c[2]=a[2]+A*p+m*-k+b*-h-e*-g;c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];return c};a.rr=function(a,b,c,e){g.lerp(a.subarray(0,3),b.subarray(0,3),c,e.subarray(0,3));var h=a[3];e[3]=h+c*(b[3]-h);x.slerp(a.subarray(4,8),b.subarray(4,8),c,e.subarray(4,8));return e};a.zaa=function(a,b,c,e){var g=a.subarray(0,3),h=b.subarray(0,3),k=e.subarray(0,3);k[0]=h[0]*(c+1)-g[0]*c;k[1]=h[1]*(c+1)-g[1]*c;k[2]=h[2]*(c+1)-g[2]*c;e[3]=b[3]*(c+1)-a[3]*c;a=a.subarray(4,8);b=b.subarray(4,8);g=e.subarray(4,8);g[0]=
b[0]*(c+1)-a[0]*c;g[1]=b[1]*(c+1)-a[1]*c;g[2]=b[2]*(c+1)-a[2]*c;g[3]=b[3]*(c+1)-a[3]*c;x.normalize(g,g);return e};a.g1=function(a,b,c,e,g){g[0]=a[0]+b*c[0];g[1]=a[1]+b*c[1];g[2]=a[2]+b*c[2];g[3]=a[3];c=e[0];var h=e[1];e=e[2];var k=a[4],p=a[5],m=a[6],y=a[7];g[4]=.5*(c*y+h*m-e*p);g[5]=.5*(h*y+e*k-c*m);g[6]=.5*(e*y+c*p-h*k);g[7]=.5*(-c*k-h*p-e*m);g[4]=a[4]+g[4]*b;g[5]=a[5]+g[5]*b;g[6]=a[6]+g[6]*b;g[7]=a[7]+g[7]*b;a=g[4];b=g[5];c=g[6];h=g[7];a=a*a+b*b+c*c+h*h;0<a&&(a=1/Math.sqrt(a),g[4]*=a,g[5]*=a,g[6]*=
a,g[7]*=a)};a.ofa=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];var c=a[4],g=a[5],h=a[6],l=a[7];b[4]=c*B+l*e;b[5]=g*B+h*e;b[6]=h*B-g*e;b[7]=l*B-c*e};a.nfa=function(a,b){b[0]=a[0];b[1]=-a[2];b[2]=a[1];b[3]=a[3];b[4]=a[4];b[5]=-a[6];b[6]=a[5];b[7]=a[7]}};b4w.module.__vec3=function(a){var w="undefined"!==typeof Float32Array?Float32Array:Array,t=Math.random;a.create=function(){var a=new w(3);a[0]=0;a[1]=0;a[2]=0;return a};a.clone=function(a){var b=new w(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.fromValues=function(a,b,k){var c=new w(3);c[0]=a;c[1]=b;c[2]=k;return c};a.copy=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};a.set=function(a,b,k,h){h[0]=a;h[1]=b;h[2]=k;return h};a.add=function(a,b,k){k[0]=a[0]+b[0];k[1]=a[1]+b[1];k[2]=a[2]+b[2];
return k};a.subtract=function(a,b,k){k[0]=a[0]-b[0];k[1]=a[1]-b[1];k[2]=a[2]-b[2];return k};a.sub=a.subtract;a.multiply=function(a,b,k){k[0]=a[0]*b[0];k[1]=a[1]*b[1];k[2]=a[2]*b[2];return k};a.mul=a.multiply;a.divide=function(a,b,k){k[0]=a[0]/b[0];k[1]=a[1]/b[1];k[2]=a[2]/b[2];return k};a.div=a.divide;a.min=function(a,b,k){k[0]=Math.min(a[0],b[0]);k[1]=Math.min(a[1],b[1]);k[2]=Math.min(a[2],b[2]);return k};a.max=function(a,b,k){k[0]=Math.max(a[0],b[0]);k[1]=Math.max(a[1],b[1]);k[2]=Math.max(a[2],
b[2]);return k};a.scale=function(a,b,k){k[0]=a[0]*b;k[1]=a[1]*b;k[2]=a[2]*b;return k};a.scaleAndAdd=function(a,b,k,h){h[0]=a[0]+b[0]*k;h[1]=a[1]+b[1]*k;h[2]=a[2]+b[2]*k;return h};a.distance=function(a,b){var c=b[0]-a[0],h=b[1]-a[1],t=b[2]-a[2];return Math.sqrt(c*c+h*h+t*t)};a.dist=a.distance;a.squaredDistance=function(a,b){var c=b[0]-a[0],h=b[1]-a[1],t=b[2]-a[2];return c*c+h*h+t*t};a.sqrDist=a.squaredDistance;a.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};a.len=a.length;
a.squaredLength=function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a};a.sqrLen=a.squaredLength;a.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};a.inverse=function(a,b){b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];return b};a.normalize=function(a,b){var c=a[0],h=a[1],t=a[2],c=c*c+h*h+t*t;0<c&&(c=1/Math.sqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c);return b};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};a.cross=function(a,b,k){var c=a[0],t=a[1];a=a[2];var m=b[0],x=b[1];b=b[2];
k[0]=t*b-a*x;k[1]=a*m-c*b;k[2]=c*x-t*m;return k};a.lerp=function(a,b,k,h){var c=a[0],m=a[1];a=a[2];h[0]=c+k*(b[0]-c);h[1]=m+k*(b[1]-m);h[2]=a+k*(b[2]-a);return h};a.uca=function(a,b,k,h,t,m){var c=t*t,r=c*(2*t-3)+1,g=c*(t-2)+t,e=c*(t-1);t=c*(3-2*t);m[0]=a[0]*r+b[0]*g+k[0]*e+h[0]*t;m[1]=a[1]*r+b[1]*g+k[1]*e+h[1]*t;m[2]=a[2]*r+b[2]*g+k[2]*e+h[2]*t;return m};a.rL=function(a,b,k,h,t,m){var c=1-t,r=c*c,g=t*t,e=r*c,r=3*t*r,c=3*g*c;t=g*t;m[0]=a[0]*e+b[0]*r+k[0]*c+h[0]*t;m[1]=a[1]*e+b[1]*r+k[1]*c+h[1]*t;
m[2]=a[2]*e+b[2]*r+k[2]*c+h[2]*t;return m};a.random=function(a,b){a=a||1;var c=2*t()*Math.PI,h=2*t()-1,O=Math.sqrt(1-h*h)*a;b[0]=Math.cos(c)*O;b[1]=Math.sin(c)*O;b[2]=h*a;return b};a.transformMat4=function(a,b,k){var c=a[0],t=a[1];a=a[2];var m=b[3]*c+b[7]*t+b[11]*a+b[15],m=m||1;k[0]=(b[0]*c+b[4]*t+b[8]*a+b[12])/m;k[1]=(b[1]*c+b[5]*t+b[9]*a+b[13])/m;k[2]=(b[2]*c+b[6]*t+b[10]*a+b[14])/m;return k};a.transformMat3=function(a,b,k){var c=a[0],t=a[1];a=a[2];k[0]=c*b[0]+t*b[3]+a*b[6];k[1]=c*b[1]+t*b[4]+a*
b[7];k[2]=c*b[2]+t*b[5]+a*b[8];return k};a.transformQuat=function(a,b,k){var c=a[0],t=a[1],m=a[2];a=b[0];var x=b[1],r=b[2];b=b[3];var g=b*c+x*m-r*t,e=b*t+r*c-a*m,B=b*m+a*t-x*c,c=-a*c-x*t-r*m;k[0]=g*b+c*-a+e*-r-B*-x;k[1]=e*b+c*-x+B*-a-g*-r;k[2]=B*b+c*-r+g*-x-e*-a;return k};a.rotateX=function(a,b,k,h){var c=[],m=[];c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];m[0]=c[0];m[1]=c[1]*Math.cos(k)-c[2]*Math.sin(k);m[2]=c[1]*Math.sin(k)+c[2]*Math.cos(k);h[0]=m[0]+b[0];h[1]=m[1]+b[1];h[2]=m[2]+b[2];return h};
a.rotateY=function(a,b,k,h){var c=[],m=[];c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];m[0]=c[2]*Math.sin(k)+c[0]*Math.cos(k);m[1]=c[1];m[2]=c[2]*Math.cos(k)-c[0]*Math.sin(k);h[0]=m[0]+b[0];h[1]=m[1]+b[1];h[2]=m[2]+b[2];return h};a.rotateZ=function(a,b,k,h){var c=[],m=[];c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];m[0]=c[0]*Math.cos(k)-c[1]*Math.sin(k);m[1]=c[0]*Math.sin(k)+c[1]*Math.cos(k);m[2]=c[2];h[0]=m[0]+b[0];h[1]=m[1]+b[1];h[2]=m[2]+b[2];return h};a.forEach=function(){var c=a.create();return function(a,
k,h,t,m,x){var b;k||(k=3);h||(h=0);for(t?b=Math.min(t*k+h,a.length):b=a.length;h<b;h+=k)c[0]=a[h],c[1]=a[h+1],c[2]=a[h+2],m(c,x,c),a[h]=c[0],a[h+1]=c[1],a[h+2]=c[2];return a}}();a.angle=function(c,b){var k=a.fromValues(c[0],c[1],c[2]),h=a.fromValues(b[0],b[1],b[2]);a.normalize(k,k);a.normalize(h,h);k=a.dot(k,h);return 1<k?0:Math.acos(k)};a.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"}};b4w.module.vec3=b4w.module.__vec3;
b4w.module.__vec4=function(a){var w="undefined"!==typeof Float32Array?Float32Array:Array,t=Math.random;a.create=function(){var a=new w(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a};a.clone=function(a){var b=new w(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.fromValues=function(a,b,k,h){var c=new w(4);c[0]=a;c[1]=b;c[2]=k;c[3]=h;return c};a.copy=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};a.set=function(a,b,k,h,t){t[0]=a;t[1]=b;t[2]=k;t[3]=h;return t};a.add=function(a,b,k){k[0]=
a[0]+b[0];k[1]=a[1]+b[1];k[2]=a[2]+b[2];k[3]=a[3]+b[3];return k};a.subtract=function(a,b,k){k[0]=a[0]-b[0];k[1]=a[1]-b[1];k[2]=a[2]-b[2];k[3]=a[3]-b[3];return k};a.sub=a.subtract;a.multiply=function(a,b,k){k[0]=a[0]*b[0];k[1]=a[1]*b[1];k[2]=a[2]*b[2];k[3]=a[3]*b[3];return k};a.mul=a.multiply;a.divide=function(a,b,k){k[0]=a[0]/b[0];k[1]=a[1]/b[1];k[2]=a[2]/b[2];k[3]=a[3]/b[3];return k};a.div=a.divide;a.min=function(a,b,k){k[0]=Math.min(a[0],b[0]);k[1]=Math.min(a[1],b[1]);k[2]=Math.min(a[2],b[2]);k[3]=
Math.min(a[3],b[3]);return k};a.max=function(a,b,k){k[0]=Math.max(a[0],b[0]);k[1]=Math.max(a[1],b[1]);k[2]=Math.max(a[2],b[2]);k[3]=Math.max(a[3],b[3]);return k};a.scale=function(a,b,k){k[0]=a[0]*b;k[1]=a[1]*b;k[2]=a[2]*b;k[3]=a[3]*b;return k};a.scaleAndAdd=function(a,b,k,h){h[0]=a[0]+b[0]*k;h[1]=a[1]+b[1]*k;h[2]=a[2]+b[2]*k;h[3]=a[3]+b[3]*k;return h};a.distance=function(a,b){var c=b[0]-a[0],h=b[1]-a[1],t=b[2]-a[2],m=b[3]-a[3];return Math.sqrt(c*c+h*h+t*t+m*m)};a.dist=a.distance;a.squaredDistance=
function(a,b){var c=b[0]-a[0],h=b[1]-a[1],t=b[2]-a[2],m=b[3]-a[3];return c*c+h*h+t*t+m*m};a.sqrDist=a.squaredDistance;a.length=function(a){var b=a[0],c=a[1],h=a[2];a=a[3];return Math.sqrt(b*b+c*c+h*h+a*a)};a.len=a.length;a.squaredLength=function(a){var b=a[0],c=a[1],h=a[2];a=a[3];return b*b+c*c+h*h+a*a};a.sqrLen=a.squaredLength;a.negate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};a.inverse=function(a,b){b[0]=1/a[0];b[1]=1/a[1];b[2]=1/a[2];b[3]=1/a[3];return b};a.normalize=
function(a,b){var c=a[0],h=a[1],t=a[2],m=a[3],x=c*c+h*h+t*t+m*m;0<x&&(x=1/Math.sqrt(x),b[0]=c*x,b[1]=h*x,b[2]=t*x,b[3]=m*x);return b};a.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};a.lerp=function(a,b,k,h){var c=a[0],t=a[1],x=a[2];a=a[3];h[0]=c+k*(b[0]-c);h[1]=t+k*(b[1]-t);h[2]=x+k*(b[2]-x);h[3]=a+k*(b[3]-a);return h};a.random=function(c,b){c=c||1;b[0]=t();b[1]=t();b[2]=t();b[3]=t();a.normalize(b,b);a.scale(b,c,b);return b};a.transformMat4=function(a,b,k){var c=a[0],t=a[1],m=
a[2];a=a[3];k[0]=b[0]*c+b[4]*t+b[8]*m+b[12]*a;k[1]=b[1]*c+b[5]*t+b[9]*m+b[13]*a;k[2]=b[2]*c+b[6]*t+b[10]*m+b[14]*a;k[3]=b[3]*c+b[7]*t+b[11]*m+b[15]*a;return k};a.transformQuat=function(a,b,k){var c=a[0],t=a[1],m=a[2],x=b[0],r=b[1],g=b[2];b=b[3];var e=b*c+r*m-g*t,B=b*t+g*c-x*m,v=b*m+x*t-r*c,c=-x*c-r*t-g*m;k[0]=e*b+c*-x+B*-g-v*-r;k[1]=B*b+c*-r+v*-x-e*-g;k[2]=v*b+c*-g+e*-r-B*-x;k[3]=a[3];return k};a.forEach=function(){var c=a.create();return function(a,k,h,t,m,x){var b;k||(k=4);h||(h=0);for(t?b=Math.min(t*
k+h,a.length):b=a.length;h<b;h+=k)c[0]=a[h],c[1]=a[h+1],c[2]=a[h+2],c[3]=a[h+3],m(c,x,c),a[h]=c[0],a[h+1]=c[1],a[h+2]=c[2],a[h+3]=c[3];return a}}();a.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}};b4w.module.vec4=b4w.module.__vec4;
b4w.module.__quat=function(a,w){var t=w("__vec3"),c=w("__vec4"),b=w("__mat3"),k="undefined"!==typeof Float32Array?Float32Array:Array;a.create=function(){var a=new k(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};a.rotationTo=function(){var b=t.create(),c=t.fromValues(1,0,0),k=t.fromValues(0,1,0);return function(h,m,g){var e=t.dot(h,m);if(-.9999999>e)return t.cross(c,h,b),1E-6>t.length(b)&&t.cross(k,h,b),t.normalize(b,b),a.setAxisAngle(b,Math.PI,g),g;if(.9999999<e)return g[0]=0,g[1]=0,g[2]=0,g[3]=1,g;t.cross(h,
m,b);g[0]=b[0];g[1]=b[1];g[2]=b[2];g[3]=1+e;return a.normalize(g,g)}}();a.setAxes=function(){var c=b.create();return function(b,h,k,t){c[0]=h[0];c[3]=h[1];c[6]=h[2];c[1]=k[0];c[4]=k[1];c[7]=k[2];c[2]=-b[0];c[5]=-b[1];c[8]=-b[2];return a.normalize(a.fromMat3(c,t),t)}}();a.clone=c.clone;a.fromValues=c.fromValues;a.copy=c.copy;a.set=c.set;a.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};a.setAxisAngle=function(a,b,c){b*=.5;var h=Math.sin(b);c[0]=h*a[0];c[1]=h*a[1];c[2]=h*a[2];c[3]=Math.cos(b);
return c};a.add=c.add;a.multiply=function(a,b,c){var h=a[0],k=a[1],g=a[2];a=a[3];var e=b[0],t=b[1],m=b[2];b=b[3];c[0]=h*b+a*e+k*m-g*t;c[1]=k*b+a*t+g*e-h*m;c[2]=g*b+a*m+h*t-k*e;c[3]=a*b-h*e-k*t-g*m;return c};a.mul=a.multiply;a.scale=c.scale;a.rotateX=function(a,b,c){b*=.5;var h=a[0],k=a[1],g=a[2];a=a[3];var e=Math.sin(b);b=Math.cos(b);c[0]=h*b+a*e;c[1]=k*b+g*e;c[2]=g*b-k*e;c[3]=a*b-h*e;return c};a.rotateY=function(a,b,c){b*=.5;var h=a[0],k=a[1],g=a[2];a=a[3];var e=Math.sin(b);b=Math.cos(b);c[0]=h*
b-g*e;c[1]=k*b+a*e;c[2]=g*b+h*e;c[3]=a*b-k*e;return c};a.rotateZ=function(a,b,c){b*=.5;var h=a[0],k=a[1],g=a[2];a=a[3];var e=Math.sin(b);b=Math.cos(b);c[0]=h*b+k*e;c[1]=k*b-h*e;c[2]=g*b+a*e;c[3]=a*b-g*e;return c};a.calculateW=function(a,b){var c=a[0],h=a[1],k=a[2];b[0]=c;b[1]=h;b[2]=k;b[3]=Math.sqrt(Math.abs(1-c*c-h*h-k*k));return b};a.dot=c.dot;a.lerp=c.lerp;a.slerp=function(a,b,c,k){var h=a[0],g=a[1],e=a[2];a=a[3];var t=b[0],m=b[1],P=b[2];b=b[3];var N,x,p;x=h*t+g*m+e*P+a*b;0>x&&(x=-x,t=-t,m=-m,
P=-P,b=-b);1E-6<1-x?(N=Math.acos(x),p=Math.sin(N),x=Math.sin((1-c)*N)/p,c=Math.sin(c*N)/p):x=1-c;k[0]=x*h+c*t;k[1]=x*g+c*m;k[2]=x*e+c*P;k[3]=x*a+c*b;return k};a.Tea=function(){var b=a.create(),c=a.create();return function(h,k,t,g,e,B){a.slerp(h,g,e,b);a.slerp(k,t,e,c);a.slerp(b,c,2*e*(1-e),B);return B}}();a.invert=function(a,b){var c=a[0],h=a[1],k=a[2],g=a[3],e=c*c+h*h+k*k+g*g,e=e?1/e:0;b[0]=-c*e;b[1]=-h*e;b[2]=-k*e;b[3]=g*e;return b};a.conjugate=function(a,b){b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=
a[3];return b};a.length=c.length;a.len=a.length;a.squaredLength=c.squaredLength;a.sqrLen=a.squaredLength;a.normalize=c.normalize;a.fromMat3=function(a,b){var c=a[0]+a[4]+a[8];if(0<c)c=Math.sqrt(c+1),b[3]=.5*c,c=.5/c,b[0]=(a[5]-a[7])*c,b[1]=(a[6]-a[2])*c,b[2]=(a[1]-a[3])*c;else{var h=0;a[4]>a[0]&&(h=1);a[8]>a[3*h+h]&&(h=2);var k=(h+1)%3,g=(h+2)%3,c=Math.sqrt(a[3*h+h]-a[3*k+k]-a[3*g+g]+1);b[h]=.5*c;c=.5/c;b[3]=(a[3*k+g]-a[3*g+k])*c;b[k]=(a[3*k+h]+a[3*h+k])*c;b[g]=(a[3*g+h]+a[3*h+g])*c}return b};a.str=
function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}};b4w.module.quat=b4w.module.__quat;
b4w.module.__mat3=function(a){var w="undefined"!==typeof Float32Array?Float32Array:Array;a.create=function(){var a=new w(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.fromMat4=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[4];c[4]=a[5];c[5]=a[6];c[6]=a[8];c[7]=a[9];c[8]=a[10];return c};a.clone=function(a){var c=new w(9);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};a.copy=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=
a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};a.transpose=function(a,c){if(c===a){var b=a[1],k=a[2],h=a[5];c[1]=a[3];c[2]=a[6];c[3]=b;c[5]=a[7];c[6]=k;c[7]=h}else c[0]=a[0],c[1]=a[3],c[2]=a[6],c[3]=a[1],c[4]=a[4],c[5]=a[7],c[6]=a[2],c[7]=a[5],c[8]=a[8];return c};a.invert=function(a,c){var b=a[0],k=a[1],h=a[2],t=a[3],m=a[4],x=a[5],r=a[6],g=a[7],e=a[8],B=e*m-x*g,v=-e*t+x*r,P=
g*t-m*r,N=b*B+k*v+h*P;if(!N)return null;N=1/N;c[0]=B*N;c[1]=(-e*k+h*g)*N;c[2]=(x*k-h*m)*N;c[3]=v*N;c[4]=(e*b-h*r)*N;c[5]=(-x*b+h*t)*N;c[6]=P*N;c[7]=(-g*b+k*r)*N;c[8]=(m*b-k*t)*N;return c};a.adjoint=function(a,c){var b=a[0],k=a[1],h=a[2],t=a[3],m=a[4],x=a[5],r=a[6],g=a[7],e=a[8];c[0]=m*e-x*g;c[1]=h*g-k*e;c[2]=k*x-h*m;c[3]=x*r-t*e;c[4]=b*e-h*r;c[5]=h*t-b*x;c[6]=t*g-m*r;c[7]=k*r-b*g;c[8]=b*m-k*t;return c};a.determinant=function(a){var c=a[3],b=a[4],k=a[5],h=a[6],t=a[7],m=a[8];return a[0]*(m*b-k*t)+a[1]*
(-m*c+k*h)+a[2]*(t*c-b*h)};a.multiply=function(a,c,b){var k=a[0],h=a[1],t=a[2],m=a[3],x=a[4],r=a[5],g=a[6],e=a[7];a=a[8];var B=c[0],v=c[1],P=c[2],N=c[3],M=c[4],p=c[5],I=c[6],y=c[7];c=c[8];b[0]=B*k+v*m+P*g;b[1]=B*h+v*x+P*e;b[2]=B*t+v*r+P*a;b[3]=N*k+M*m+p*g;b[4]=N*h+M*x+p*e;b[5]=N*t+M*r+p*a;b[6]=I*k+y*m+c*g;b[7]=I*h+y*x+c*e;b[8]=I*t+y*r+c*a;return b};a.mul=a.multiply;a.translate=function(a,c,b){var k=a[0],h=a[1],t=a[2],m=a[3],x=a[4],r=a[5],g=a[6],e=a[7];a=a[8];var B=c[0];c=c[1];b[0]=k;b[1]=h;b[2]=t;
b[3]=m;b[4]=x;b[5]=r;b[6]=B*k+c*m+g;b[7]=B*h+c*x+e;b[8]=B*t+c*r+a;return b};a.rotate=function(a,c,b){var k=a[0],h=a[1],t=a[2],m=a[3],x=a[4],r=a[5],g=a[6],e=a[7];a=a[8];var B=Math.sin(c);c=Math.cos(c);b[0]=c*k+B*m;b[1]=c*h+B*x;b[2]=c*t+B*r;b[3]=c*m-B*k;b[4]=c*x-B*h;b[5]=c*r-B*t;b[6]=g;b[7]=e;b[8]=a;return b};a.scale=function(a,c,b){var k=c[0];c=c[1];b[0]=k*a[0];b[1]=k*a[1];b[2]=k*a[2];b[3]=c*a[3];b[4]=c*a[4];b[5]=c*a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};a.u_=function(a,c){c[0]=1;c[1]=0;c[2]=
0;c[3]=0;c[4]=1;c[5]=0;c[6]=a[0];c[7]=a[1];c[8]=1;return c};a.s_=function(a,c){var b=Math.sin(a),k=Math.cos(a);c[0]=k;c[1]=b;c[2]=0;c[3]=-b;c[4]=k;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};a.t_=function(a,c){c[0]=a[0];c[1]=0;c[2]=0;c[3]=0;c[4]=a[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};a.fromMat2d=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=0;c[3]=a[2];c[4]=a[3];c[5]=0;c[6]=a[4];c[7]=a[5];c[8]=1;return c};a.fromQuat=function(a,c){var b=a[0],k=a[1],h=a[2],t=a[3],m=b+b,x=k+k,r=h+h,b=b*m,g=k*m,k=k*x,e=h*m,B=
h*x,h=h*r,m=t*m,x=t*x,t=t*r;c[0]=1-k-h;c[3]=g-t;c[6]=e+x;c[1]=g+t;c[4]=1-b-h;c[7]=B-m;c[2]=e-x;c[5]=B+m;c[8]=1-b-k;return c};a.normalFromMat4=function(a,c){var b=a[0],k=a[1],h=a[2],t=a[3],m=a[4],x=a[5],r=a[6],g=a[7],e=a[8],B=a[9],v=a[10],P=a[11],N=a[12],M=a[13],p=a[14],I=a[15],y=b*x-k*m,D=b*r-h*m,l=b*g-t*m,u=k*r-h*x,L=k*g-t*x,F=h*g-t*r,w=e*M-B*N,K=e*p-v*N,e=e*I-P*N,A=B*p-v*M,B=B*I-P*M,v=v*I-P*p,P=y*v-D*B+l*A+u*e-L*K+F*w;if(!P)return null;P=1/P;c[0]=(x*v-r*B+g*A)*P;c[1]=(r*e-m*v-g*K)*P;c[2]=(m*B-x*
e+g*w)*P;c[3]=(h*B-k*v-t*A)*P;c[4]=(b*v-h*e+t*K)*P;c[5]=(k*e-b*B-t*w)*P;c[6]=(M*F-p*L+I*u)*P;c[7]=(p*l-N*F-I*D)*P;c[8]=(N*L-M*l+I*y)*P;return c};a.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};a.r_=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))}};b4w.module.mat3=b4w.module.__mat3;
b4w.module.__mat4=function(a){var w="undefined"!==typeof Float32Array?Float32Array:Array;a.create=function(){var a=new w(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.clone=function(a){var c=new w(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};a.copy=function(a,c){c[0]=a[0];
c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};a.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};a.transpose=function(a,c){if(c===a){var b=a[1],k=a[2],h=a[3],t=a[6],m=a[7],x=a[11];c[1]=a[4];c[2]=a[8];c[3]=a[12];c[4]=b;c[6]=a[9];c[7]=a[13];c[8]=k;c[9]=t;c[11]=a[14];c[12]=h;c[13]=
m;c[14]=x}else c[0]=a[0],c[1]=a[4],c[2]=a[8],c[3]=a[12],c[4]=a[1],c[5]=a[5],c[6]=a[9],c[7]=a[13],c[8]=a[2],c[9]=a[6],c[10]=a[10],c[11]=a[14],c[12]=a[3],c[13]=a[7],c[14]=a[11],c[15]=a[15];return c};a.invert=function(a,c){var b=a[0],k=a[1],h=a[2],t=a[3],m=a[4],x=a[5],r=a[6],g=a[7],e=a[8],B=a[9],v=a[10],P=a[11],N=a[12],M=a[13],p=a[14],I=a[15],y=b*x-k*m,D=b*r-h*m,l=b*g-t*m,u=k*r-h*x,L=k*g-t*x,F=h*g-t*r,w=e*M-B*N,K=e*p-v*N,A=e*I-P*N,E=B*p-v*M,n=B*I-P*M,f=v*I-P*p,X=y*f-D*n+l*E+u*A-L*K+F*w;if(!X)return null;
X=1/X;c[0]=(x*f-r*n+g*E)*X;c[1]=(h*n-k*f-t*E)*X;c[2]=(M*F-p*L+I*u)*X;c[3]=(v*L-B*F-P*u)*X;c[4]=(r*A-m*f-g*K)*X;c[5]=(b*f-h*A+t*K)*X;c[6]=(p*l-N*F-I*D)*X;c[7]=(e*F-v*l+P*D)*X;c[8]=(m*n-x*A+g*w)*X;c[9]=(k*A-b*n-t*w)*X;c[10]=(N*L-M*l+I*y)*X;c[11]=(B*l-e*L-P*y)*X;c[12]=(x*K-m*E-r*w)*X;c[13]=(b*E-k*K+h*w)*X;c[14]=(M*D-N*u-p*y)*X;c[15]=(e*u-B*D+v*y)*X;return c};a.adjoint=function(a,c){var b=a[0],k=a[1],h=a[2],t=a[3],m=a[4],x=a[5],r=a[6],g=a[7],e=a[8],B=a[9],v=a[10],P=a[11],N=a[12],M=a[13],p=a[14],I=a[15];
c[0]=x*(v*I-P*p)-B*(r*I-g*p)+M*(r*P-g*v);c[1]=-(k*(v*I-P*p)-B*(h*I-t*p)+M*(h*P-t*v));c[2]=k*(r*I-g*p)-x*(h*I-t*p)+M*(h*g-t*r);c[3]=-(k*(r*P-g*v)-x*(h*P-t*v)+B*(h*g-t*r));c[4]=-(m*(v*I-P*p)-e*(r*I-g*p)+N*(r*P-g*v));c[5]=b*(v*I-P*p)-e*(h*I-t*p)+N*(h*P-t*v);c[6]=-(b*(r*I-g*p)-m*(h*I-t*p)+N*(h*g-t*r));c[7]=b*(r*P-g*v)-m*(h*P-t*v)+e*(h*g-t*r);c[8]=m*(B*I-P*M)-e*(x*I-g*M)+N*(x*P-g*B);c[9]=-(b*(B*I-P*M)-e*(k*I-t*M)+N*(k*P-t*B));c[10]=b*(x*I-g*M)-m*(k*I-t*M)+N*(k*g-t*x);c[11]=-(b*(x*P-g*B)-m*(k*P-t*B)+e*
(k*g-t*x));c[12]=-(m*(B*p-v*M)-e*(x*p-r*M)+N*(x*v-r*B));c[13]=b*(B*p-v*M)-e*(k*p-h*M)+N*(k*v-h*B);c[14]=-(b*(x*p-r*M)-m*(k*p-h*M)+N*(k*r-h*x));c[15]=b*(x*v-r*B)-m*(k*v-h*B)+e*(k*r-h*x);return c};a.determinant=function(a){var c=a[0],b=a[1],k=a[2],h=a[3],t=a[4],m=a[5],x=a[6],r=a[7],g=a[8],e=a[9],B=a[10],v=a[11],P=a[12],N=a[13],M=a[14];a=a[15];return(c*m-b*t)*(B*a-v*M)-(c*x-k*t)*(e*a-v*N)+(c*r-h*t)*(e*M-B*N)+(b*x-k*m)*(g*a-v*P)-(b*r-h*m)*(g*M-B*P)+(k*r-h*x)*(g*N-e*P)};a.multiply=function(a,c,b){var k=
a[0],h=a[1],t=a[2],m=a[3],x=a[4],r=a[5],g=a[6],e=a[7],B=a[8],v=a[9],P=a[10],N=a[11],M=a[12],p=a[13],I=a[14];a=a[15];var y=c[0],D=c[1],l=c[2],u=c[3];b[0]=y*k+D*x+l*B+u*M;b[1]=y*h+D*r+l*v+u*p;b[2]=y*t+D*g+l*P+u*I;b[3]=y*m+D*e+l*N+u*a;y=c[4];D=c[5];l=c[6];u=c[7];b[4]=y*k+D*x+l*B+u*M;b[5]=y*h+D*r+l*v+u*p;b[6]=y*t+D*g+l*P+u*I;b[7]=y*m+D*e+l*N+u*a;y=c[8];D=c[9];l=c[10];u=c[11];b[8]=y*k+D*x+l*B+u*M;b[9]=y*h+D*r+l*v+u*p;b[10]=y*t+D*g+l*P+u*I;b[11]=y*m+D*e+l*N+u*a;y=c[12];D=c[13];l=c[14];u=c[15];b[12]=y*k+
D*x+l*B+u*M;b[13]=y*h+D*r+l*v+u*p;b[14]=y*t+D*g+l*P+u*I;b[15]=y*m+D*e+l*N+u*a;return b};a.mul=a.multiply;a.translate=function(a,c,b){var k=c[0],h=c[1];c=c[2];var t,m,x,r,g,e,B,v,P,N,M,p;a===b?(b[12]=a[0]*k+a[4]*h+a[8]*c+a[12],b[13]=a[1]*k+a[5]*h+a[9]*c+a[13],b[14]=a[2]*k+a[6]*h+a[10]*c+a[14],b[15]=a[3]*k+a[7]*h+a[11]*c+a[15]):(t=a[0],m=a[1],x=a[2],r=a[3],g=a[4],e=a[5],B=a[6],v=a[7],P=a[8],N=a[9],M=a[10],p=a[11],b[0]=t,b[1]=m,b[2]=x,b[3]=r,b[4]=g,b[5]=e,b[6]=B,b[7]=v,b[8]=P,b[9]=N,b[10]=M,b[11]=p,
b[12]=t*k+g*h+P*c+a[12],b[13]=m*k+e*h+N*c+a[13],b[14]=x*k+B*h+M*c+a[14],b[15]=r*k+v*h+p*c+a[15]);return b};a.scale=function(a,c,b){var k=c[0],h=c[1];c=c[2];b[0]=a[0]*k;b[1]=a[1]*k;b[2]=a[2]*k;b[3]=a[3]*k;b[4]=a[4]*h;b[5]=a[5]*h;b[6]=a[6]*h;b[7]=a[7]*h;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};a.rotate=function(a,c,b,k){var h=b[0],t=b[1];b=b[2];var m=Math.sqrt(h*h+t*t+b*b),x,r,g,e,B,v,P,N,M,p,I,y,D,l,u,L,F,w,K,A;if(1E-7>Math.abs(m))return null;
m=1/m;h*=m;t*=m;b*=m;x=Math.sin(c);r=Math.cos(c);g=1-r;c=a[0];m=a[1];e=a[2];B=a[3];v=a[4];P=a[5];N=a[6];M=a[7];p=a[8];I=a[9];y=a[10];D=a[11];l=h*h*g+r;u=t*h*g+b*x;L=b*h*g-t*x;F=h*t*g-b*x;w=t*t*g+r;K=b*t*g+h*x;A=h*b*g+t*x;h=t*b*g-h*x;t=b*b*g+r;k[0]=c*l+v*u+p*L;k[1]=m*l+P*u+I*L;k[2]=e*l+N*u+y*L;k[3]=B*l+M*u+D*L;k[4]=c*F+v*w+p*K;k[5]=m*F+P*w+I*K;k[6]=e*F+N*w+y*K;k[7]=B*F+M*w+D*K;k[8]=c*A+v*h+p*t;k[9]=m*A+P*h+I*t;k[10]=e*A+N*h+y*t;k[11]=B*A+M*h+D*t;a!==k&&(k[12]=a[12],k[13]=a[13],k[14]=a[14],k[15]=a[15]);
return k};a.rotateX=function(a,c,b){var k=Math.sin(c);c=Math.cos(c);var h=a[4],t=a[5],m=a[6],x=a[7],r=a[8],g=a[9],e=a[10],B=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=h*c+r*k;b[5]=t*c+g*k;b[6]=m*c+e*k;b[7]=x*c+B*k;b[8]=r*c-h*k;b[9]=g*c-t*k;b[10]=e*c-m*k;b[11]=B*c-x*k;return b};a.rotateY=function(a,c,b){var k=Math.sin(c);c=Math.cos(c);var h=a[0],t=a[1],m=a[2],x=a[3],r=a[8],g=a[9],e=a[10],B=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],
b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=h*c-r*k;b[1]=t*c-g*k;b[2]=m*c-e*k;b[3]=x*c-B*k;b[8]=h*k+r*c;b[9]=t*k+g*c;b[10]=m*k+e*c;b[11]=x*k+B*c;return b};a.rotateZ=function(a,c,b){var k=Math.sin(c);c=Math.cos(c);var h=a[0],t=a[1],m=a[2],x=a[3],r=a[4],g=a[5],e=a[6],B=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=h*c+r*k;b[1]=t*c+g*k;b[2]=m*c+e*k;b[3]=x*c+B*k;b[4]=r*c-h*k;b[5]=g*c-t*k;b[6]=e*c-m*k;b[7]=B*c-x*k;return b};
a.u_=function(a,c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=a[0];c[13]=a[1];c[14]=a[2];c[15]=1;return c};a.t_=function(a,c){c[0]=a[0];c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=a[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=a[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.s_=function(a,c,b){var k=c[0],h=c[1];c=c[2];var t=Math.sqrt(k*k+h*h+c*c),m;if(1E-7>Math.abs(t))return null;t=1/t;k*=t;h*=t;c*=t;t=Math.sin(a);a=Math.cos(a);m=1-a;b[0]=k*k*m+a;b[1]=h*k*m+c*
t;b[2]=c*k*m-h*t;b[3]=0;b[4]=k*h*m-c*t;b[5]=h*h*m+a;b[6]=c*h*m+k*t;b[7]=0;b[8]=k*c*m+h*t;b[9]=h*c*m-k*t;b[10]=c*c*m+a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};a.Maa=function(a,c){var b=Math.sin(a),k=Math.cos(a);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=k;c[6]=b;c[7]=0;c[8]=0;c[9]=-b;c[10]=k;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.Naa=function(a,c){var b=Math.sin(a),k=Math.cos(a);c[0]=k;c[1]=0;c[2]=-b;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=b;c[9]=0;c[10]=k;c[11]=0;c[12]=0;c[13]=
0;c[14]=0;c[15]=1;return c};a.Oaa=function(a,c){var b=Math.sin(a),k=Math.cos(a);c[0]=k;c[1]=b;c[2]=0;c[3]=0;c[4]=-b;c[5]=k;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.fromRotationTranslation=function(a,c,b){var k=a[0],h=a[1],t=a[2],m=a[3],x=k+k,r=h+h,g=t+t;a=k*x;var e=k*r,k=k*g,B=h*r,h=h*g,t=t*g,x=m*x,r=m*r,m=m*g;b[0]=1-(B+t);b[1]=e+m;b[2]=k-r;b[3]=0;b[4]=e-m;b[5]=1-(a+t);b[6]=h+x;b[7]=0;b[8]=k+r;b[9]=h-x;b[10]=1-(a+B);b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=
c[2];b[15]=1;return b};a.Kaa=function(a,c,b,k){var h=a[0],t=a[1],m=a[2],x=a[3],r=h+h,g=t+t,e=m+m;a=h*r;var B=h*g,h=h*e,v=t*g,t=t*e,m=m*e,r=x*r,g=x*g,x=x*e,e=b[0],P=b[1];b=b[2];k[0]=(1-(v+m))*e;k[1]=(B+x)*e;k[2]=(h-g)*e;k[3]=0;k[4]=(B-x)*P;k[5]=(1-(a+m))*P;k[6]=(t+r)*P;k[7]=0;k[8]=(h+g)*b;k[9]=(t-r)*b;k[10]=(1-(a+v))*b;k[11]=0;k[12]=c[0];k[13]=c[1];k[14]=c[2];k[15]=1;return k};a.Laa=function(a,c,b,k,h){var t=a[0],m=a[1],x=a[2],r=a[3],g=t+t,e=m+m,B=x+x;a=t*g;var v=t*e,t=t*B,P=m*e,m=m*B,x=x*B,g=r*g,
e=r*e,r=r*B,B=b[0],N=b[1];b=b[2];var M=k[0],p=k[1];k=k[2];h[0]=(1-(P+x))*B;h[1]=(v+r)*B;h[2]=(t-e)*B;h[3]=0;h[4]=(v-r)*N;h[5]=(1-(a+x))*N;h[6]=(m+g)*N;h[7]=0;h[8]=(t+e)*b;h[9]=(m-g)*b;h[10]=(1-(a+P))*b;h[11]=0;h[12]=c[0]+M-(h[0]*M+h[4]*p+h[8]*k);h[13]=c[1]+p-(h[1]*M+h[5]*p+h[9]*k);h[14]=c[2]+k-(h[2]*M+h[6]*p+h[10]*k);h[15]=1;return h};a.fromQuat=function(a,c){var b=a[0],k=a[1],h=a[2],t=a[3],m=b+b,x=k+k,r=h+h,b=b*m,g=k*m,k=k*x,e=h*m,B=h*x,h=h*r,m=t*m,x=t*x,t=t*r;c[0]=1-k-h;c[1]=g+t;c[2]=e-x;c[3]=0;
c[4]=g-t;c[5]=1-b-h;c[6]=B+m;c[7]=0;c[8]=e+x;c[9]=B-m;c[10]=1-b-k;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c};a.frustum=function(a,c,b,k,h,w,m){var x=1/(c-a),r=1/(k-b),g=1/(h-w);m[0]=2*h*x;m[1]=0;m[2]=0;m[3]=0;m[4]=0;m[5]=2*h*r;m[6]=0;m[7]=0;m[8]=(c+a)*x;m[9]=(k+b)*r;m[10]=(w+h)*g;m[11]=-1;m[12]=0;m[13]=0;m[14]=w*h*2*g;m[15]=0;return m};a.perspective=function(a,c,b,k,h){a=1/Math.tan(a/2);var t=1/(b-k);h[0]=a/c;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=a;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=(k+b)*t;h[11]=
-1;h[12]=0;h[13]=0;h[14]=2*k*b*t;h[15]=0;return h};a.zda=function(a,c,b,k){var h=Math.tan(a.upDegrees*Math.PI/180),t=Math.tan(a.downDegrees*Math.PI/180),m=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var x=2/(m+a),r=2/(h+t);k[0]=x;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=r;k[6]=0;k[7]=0;k[8]=-((m-a)*x*.5);k[9]=(h-t)*r*.5;k[10]=b/(c-b);k[11]=-1;k[12]=0;k[13]=0;k[14]=b*c/(c-b);k[15]=0;return k};a.ortho=function(a,c,b,k,h,w,m){var x=1/(a-c),r=1/(b-k),g=1/(h-w);m[0]=-2*x;m[1]=0;
m[2]=0;m[3]=0;m[4]=0;m[5]=-2*r;m[6]=0;m[7]=0;m[8]=0;m[9]=0;m[10]=2*g;m[11]=0;m[12]=(a+c)*x;m[13]=(k+b)*r;m[14]=(w+h)*g;m[15]=1;return m};a.lookAt=function(t,c,b,k){var h,w,m,x,r,g,e,B,v=t[0],P=t[1];t=t[2];m=b[0];x=b[1];w=b[2];e=c[0];b=c[1];h=c[2];if(1E-7>Math.abs(v-e)&&1E-7>Math.abs(P-b)&&1E-7>Math.abs(t-h))return a.identity(k);c=v-e;b=P-b;e=t-h;B=1/Math.sqrt(c*c+b*b+e*e);c*=B;b*=B;e*=B;h=x*e-w*b;w=w*c-m*e;m=m*b-x*c;(B=Math.sqrt(h*h+w*w+m*m))?(B=1/B,h*=B,w*=B,m*=B):m=w=h=0;x=b*m-e*w;r=e*h-c*m;g=c*
w-b*h;(B=Math.sqrt(x*x+r*r+g*g))?(B=1/B,x*=B,r*=B,g*=B):g=r=x=0;k[0]=h;k[1]=x;k[2]=c;k[3]=0;k[4]=w;k[5]=r;k[6]=b;k[7]=0;k[8]=m;k[9]=g;k[10]=e;k[11]=0;k[12]=-(h*v+w*P+m*t);k[13]=-(x*v+r*P+g*t);k[14]=-(c*v+b*P+e*t);k[15]=1;return k};a.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};a.r_=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],
2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))}};b4w.module.mat4=b4w.module.__mat4;b4w.module.__util=function(a,w){function t(a){return 0<a?1:0>a?-1:0}function c(a,b,d){var f=a[0],c=a[1];a=a[2];var e=Math.cos(f/2),z=Math.cos(c/2),g=Math.cos(a/2),q=Math.sin(f/2),c=Math.sin(c/2),h=Math.sin(a/2);if(-1<Ba.indexOf(b))var l=Math.cos((f+a)/2),G=Math.sin((f+a)/2),J=Math.cos((f-a)/2),k=Math.sin((f-a)/2),C=Math.cos((a-f)/2),p=Math.sin((a-f)/2);switch(b){case 0:d[0]=z*G;d[1]=c*J;d[2]=c*k;d[3]=z*l;break;case 1:d[0]=c*k;d[1]=z*G;d[2]=c*J;d[3]=z*l;break;case 2:d[0]=c*J;d[1]=c*k;d[2]=z*G;d[3]=
z*l;break;case 3:d[0]=z*G;d[1]=c*p;d[2]=c*C;d[3]=z*l;break;case 4:d[0]=c*C;d[1]=z*G;d[2]=c*p;d[3]=z*l;break;case 5:d[0]=c*p;d[1]=c*C;d[2]=z*G;d[3]=z*l;break;case 6:d[0]=q*z*g+e*c*h;d[1]=e*c*g-q*z*h;d[2]=e*z*h+q*c*g;d[3]=e*z*g-q*c*h;break;case 7:d[0]=e*z*h+q*c*g;d[1]=q*z*g+e*c*h;d[2]=e*c*g-q*z*h;d[3]=e*z*g-q*c*h;break;case 8:d[0]=e*c*g-q*z*h;d[1]=e*z*h+q*c*g;d[2]=q*z*g+e*c*h;d[3]=e*z*g-q*c*h;break;case 9:d[0]=q*z*g-e*c*h;d[1]=e*z*h-q*c*g;d[2]=e*c*g+q*z*h;d[3]=e*z*g+q*c*h;break;case 10:d[0]=e*c*g+q*
z*h;d[1]=q*z*g-e*c*h;d[2]=e*z*h-q*c*g;d[3]=e*z*g+q*c*h;break;case 11:d[0]=e*z*h-q*c*g,d[1]=e*c*g+q*z*h,d[2]=q*z*g-e*c*h,d[3]=e*z*g+q*c*h}return d}function b(a,b,d){var f=a[0],c=a[1],e=a[2];a=a[3];switch(b){case 0:d[0]=Math.atan2(f*c+e*a,c*a-f*e);d[1]=Math.acos(1-2*(c*c+e*e));d[2]=Math.atan2(f*c-e*a,f*e+c*a);break;case 1:d[0]=Math.atan2(f*a+c*e,e*a-f*c);d[1]=Math.acos(1-2*(f*f+e*e));d[2]=Math.atan2(c*e-f*a,f*c+e*a);break;case 2:d[0]=Math.atan2(f*e+c*a,f*a-c*e);d[1]=Math.acos(1-2*(f*f+c*c));d[2]=Math.atan2(f*
e-c*a,f*a+c*e);break;case 3:d[0]=Math.atan2(f*e-c*a,f*c+e*a);d[1]=Math.acos(1-2*(c*c+e*e));d[2]=Math.atan2(f*e+c*a,e*a-f*c);break;case 4:d[0]=Math.atan2(f*c-e*a,f*a+c*e);d[1]=Math.acos(1-2*(f*f+e*e));d[2]=Math.atan2(f*c+e*a,f*a-c*e);break;case 5:d[0]=Math.atan2(c*e-f*a,f*e+c*a);d[1]=Math.acos(1-2*(f*f+c*c));d[2]=Math.atan2(f*a+c*e,c*a-f*e);break;case 6:d[0]=Math.atan2(2*(f*a-c*e),1-2*(f*f+c*c));d[1]=Math.asin(2*(f*e+c*a));d[2]=Math.atan2(2*(e*a-f*c),1-2*(c*c+e*e));break;case 7:b=f*c+e*a;.499999<b?
(d[0]=0,d[1]=Math.PI/2,d[2]=2*Math.atan2(f,a)):-.499999>b?(d[0]=0,d[1]=-Math.PI/2,d[2]=-2*Math.atan2(f,a)):(d[0]=Math.atan2(2*(c*a-f*e),1-2*(c*c+e*e)),d[1]=Math.asin(2*(f*c+e*a)),d[2]=Math.atan2(2*(f*a-c*e),1-2*(f*f+e*e)));break;case 8:d[0]=Math.atan2(2*(e*a-f*c),1-2*(f*f+e*e));d[1]=Math.asin(2*(f*a+c*e));d[2]=Math.atan2(2*(c*a-f*e),1-2*(f*f+c*c));break;case 9:d[0]=Math.atan2(2*(f*a+c*e),1-2*(f*f+e*e));d[1]=Math.asin(2*(e*a-f*c));d[2]=Math.atan2(2*(f*e+c*a),1-2*(c*c+e*e));break;case 10:d[0]=Math.atan2(2*
(f*e+c*a),1-2*(f*f+c*c));d[1]=Math.asin(2*(f*a-c*e));d[2]=Math.atan2(2*(f*c+e*a),1-2*(f*f+e*e));break;case 11:b=c*a-f*e,.499999<b?(d[0]=0,d[1]=Math.PI/2,d[2]=-2*Math.atan2(e,a)):-.499999>b?(d[0]=0,d[1]=-Math.PI/2,d[2]=2*Math.atan2(e,a)):(d[0]=Math.atan2(2*(f*c+e*a),1-2*(c*c+e*e)),d[1]=Math.asin(2*(c*a-f*e)),d[2]=Math.atan2(2*(f*a+c*e),1-2*(f*f+c*c)))}return d}function k(a,b){var d=Math.cos(a[0]),f=Math.cos(a[1]),c=Math.cos(a[2]),e=Math.sin(a[0]),z=Math.sin(a[1]),g=Math.sin(a[2]),q=d*c,h=d*g,l=e*c,
G=e*g;b[0]=f*c;b[1]=f*g;b[2]=-z;b[3]=z*l-h;b[4]=z*G+q;b[5]=f*e;b[6]=z*q+G;b[7]=z*h-l;b[8]=f*d;return b}function h(a,b,f){f||(f=new Float32Array(3));d.transformQuat(b,a,f);return f}function O(a,b){b||(b=new Float32Array(4));U.fromMat4(a,da);var d=da[0],f=da[3],c=da[6],e=da[1],z=da[4],g=da[7],q=da[2],h=da[5],l=da[8],d=Math.sqrt(d*d+f*f+c*c)||1,e=Math.sqrt(e*e+z*z+g*g)||1,q=Math.sqrt(q*q+h*h+l*l)||1;da[0]/=d;da[3]/=d;da[6]/=d;da[1]/=e;da[4]/=e;da[7]/=e;da[2]/=q;da[5]/=q;da[8]/=q;X.fromMat3(da,b);X.normalize(b,
b);return b}function m(a){var b=a[0],d=a[1],f=a[2],c=a[3],e=Math.sqrt(b*b+d*d+f*f),e=1/e;a[0]=b*e;a[1]=d*e;a[2]=f*e;a[3]=c*e}function x(a,b){var d=b;switch(typeof a){case "object":if(a)switch(a.constructor){case Object:for(var f in a)d=x(a[f],d);break;case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:for(f=0;f<a.length;f++)d=r(a[f],d);break;case Array:for(f=0;f<a.length;f++)d=x(a[f],d);break;
case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:d=r(0,d);break;default:p("Wrong object constructor:",a.constructor)}else d=r(0,d);return d;case "number":return r(a,d);case "boolean":return r(a|0,d);case "string":return g(a,d);case "function":case "undefined":return r(0,d)}}function r(a,b){var d=b;Z[0]=a;d=(d<<5)-d+fa[0];d&=d;d=(d<<5)-d+fa[1];return d&d}function g(a,b){for(var d=b,f=0;f<a.length;f++)d=(d<<
5)-d+a.charCodeAt(f),d&=d;return d}function e(a){return(34*a+1)*a%289}function B(a){return a-Math.floor(a)}function v(a){return P((34*a+5)*a)}function P(a){return a-289*Math.floor(a/289)}function N(a){return a-7*Math.floor(a/7)}function M(a,b,d){a<b&&(a=b);a>d&&(a=d);return a}function p(a){a&&E.error.apply(E,arguments);throw"engine panic:\nThe engine tried to perform an invalid operation and halted.\nPlease copy the console contents above and submit it to the Blend4Web forum at\nhttps://www.blend4web.com/en/forums/forum/17/";
}function I(a,b,d){a-=b;d-=b;return b+(a-Math.floor(a/d)*d)}function y(a){return I(a,0,2*Math.PI)}function D(a,b){if(a&&b){var d=a instanceof Array;if(d!=b instanceof Array)return!1;var f=a.buffer instanceof ArrayBuffer&&"undefined"!==a.byteLength;if(f!=(b.buffer instanceof ArrayBuffer&&"undefined"!==b.byteLength))return!1;if(d){if(a.length!=b.length)return!1;for(d=0;d<a.length;d++)if(!l(a[d],b[d]))return!1}else if(f){if(a.length!=b.length)return!1;for(d=0;d<a.length;d++)if(a[d]!=b[d])return!1}else{switch(a.constructor){case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:return a==
b}for(var c in a)if(!l(a[c],b[c]))return!1;for(c in b)if(!(c in a))return!1}return!0}return!(a||b)}function l(a,b){if(typeof a!=typeof b)return!1;switch(typeof a){case "number":case "string":case "boolean":return a==b;case "object":return D(a,b);default:return!0}}function u(a,b,f){var c=q,e=d.dot(a,b);-.9999999>e?(d.cross(J,a,c),1E-6>d.length(c)&&d.cross(ra,a,c),d.normalize(c,c),X.setAxisAngle(c,Math.PI,f)):(d.cross(a,b,c),f.set(c),f[3]=1+e,X.normalize(f,f));return f}function L(a){if(""==a)return".";
var b=0==a.indexOf("/")|0;b&&0==a.indexOf("//")&&0!=a.indexOf("///")&&(b=2);a=a.split("/");for(var d=[],f=0;f<a.length;f++){var c=a[f];""!=c&&"."!=c&&(".."!=c||!b&&!d.length||d.length&&".."==d[d.length-1]?d.push(c):d.length&&d.pop())}a=d.join("/");for(f=0;f<b;f++)a="/"+a;return a||"."}function F(a,b,f){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]);1E-6<c?(b[0]=Math.atan2(a[5],a[8]),b[1]=Math.atan2(-a[2],c),b[2]=Math.atan2(a[1],a[0]),f[0]=Math.atan2(-a[5],-a[8]),f[1]=Math.atan2(-a[2],-c),f[2]=Math.atan2(-a[1],
-a[0])):(b[0]=Math.atan2(-a[7],a[4]),b[1]=Math.atan2(-a[2],c),b[2]=0,d.copy(b,f))}var U=w("__mat3"),K=w("__mat4"),A=w("__math"),E=w("__print"),n=w("__tbn"),f=w("__tsr"),X=w("__quat"),d=w("__vec3"),H=w("__vec4"),G=0,R={},q=new Float32Array(3),ja=new Float32Array(3),qa=new Float32Array(3),C=new Float32Array(3),pa=new Float32Array(3),ia=new Float32Array(3),ma=new Float32Array(3),ea=new Float32Array(3),la=new Float32Array(4),ba=new Float32Array(4),da=new Float32Array(9),xa=new Float32Array(9),ca=new Float32Array(9),
V=new Float32Array(16),Ja=new Float32Array(16),S=X.create(),oa=X.create(),Z=new Float64Array(1),fa=new Uint32Array(Z.buffer),aa=new Float32Array([0,0,0,1]),za=new Float32Array([0,0,0,1,0,0,0,1]),ha=new Float32Array([1,1,1]),J=new Float32Array([1,0,0]),ra=new Float32Array([0,1,0]),ya=new Float32Array([0,0,1]),Q=new Float32Array([-1,0,0]),va=new Float32Array([0,-1,0]),Va=new Float32Array([0,0,-1]),Ba=[0,1,2,4,5],Aa=Math.floor(44488.07041494893),ka=[new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,0,0,0,0,
1]),new Float32Array([0,0,1,0,0,-1,0,0,1,0,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,-1,0,0,0,0,-1,0,0,0,0,1]),new Float32Array([-1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1])];a.hE=new Float32Array([0,0,0]);a.Gx=aa;a.N8=za;a.Mt=ha;a.Cf=J;a.Ee=ra;a.ic=ya;a.kt=Q;a.Eh=va;a.qc=Va;a.wK=0;a.DK=1;a.EK=2;a.yK=3;a.AK=4;a.GK=5;a.xK=6;a.CK=7;a.iE=8;a.zK=9;a.BK=10;a.FK=11;a.MT=ka;a.MD=1;a.Ht=2;a.xk=4;a.KJ=4;a.Pf=function(a){return"undefined"!=
typeof a};a.uP=function(a,b,d){for(var f=[],c=d.length,e=0;e<c;e++){var z=d[e];z[a]==b&&f.push(z)}return f};a.Qh=function(a){return new Float32Array(a)};a.oN=function(a,b){var d=a.length,f=new Float32Array(d+b.length);f.set(a);f.set(b,d);return f};a.B5=function(a,b){var d=a.length,f=new Uint32Array(d+b.length);f.set(a);f.set(b,d);return f};a.BX=function(){return 255==(new DataView((new Uint16Array([255])).buffer)).getUint16(0,!0)};a.AW=function(a,b){var d=[],f={},c=b.length,e,z;for(e=0;e<c;e++)f[b[e]]=
!0;c=a.length;for(e=0;e<c;e++)z=a[e],z in f&&d.push(z);return d};a.sign=t;a.cda=function(a,b,d){for(var f=d.length,c=0;c<f;c++)if(d[c][a]==b)return!0;return!1};a.Pd=function(a,b,d){for(var f=0;f<d.length;f++){var c=d[f];if(c[a]===b)return c}return null};a.ada=function(a,b,d,f,c){for(var e=0;e<c.length;e++){var z=c[e];if(z[a]==b&&z[d]==f)return z}return null};a.k0=function(a,b){for(var d=0;d<a.length;d++)if(a[d].uuid==b)return d;return-1};a.vW=function(a,b){for(var d=0;d<a.length;d++)if(a[d]==b)return;
a.push(b)};a.l$=function(a){for(var b=0;b<a.length-1;b++)for(var d=a[b],f=b+1;f<a.length;f++)if(d==a[f])return!1;return!0};a.w5=function(a,b,d,f){f||(f=new Float32Array(16));K.identity(f);f[12]=a;f[13]=b;f[14]=d};var Y=1;a.g3=function(){Y=(69069*Y+5)%Math.pow(2,32);return Math.round(Y/65536)%32768/32767};a.a5=function(a){Y=a};a.oi=function(a){var b=a[0]%Aa*48271-3399*Math.floor(a[0]/Aa);a[0]=0<b?b:b+2147483647;return(a[0]-1)/2147483646};a.vA=function(a,b){b||(b=[]);b[0]=5E4+Math.floor(a);return b};
a.fl=function(a,b){var d=q;d[0]=a[2];d[1]=a[1];d[2]=a[0];c(d,11,b);return b};a.qH=c;a.DQ=b;a.UZ=k;a.Wv=function(a,d){var f=b(a,11,q);d[0]=f[2];d[1]=f[1];d[2]=f[0];return d};a.Jc=h;a.wF=function(a,b,f){f||(f=new Float32Array(4));a=d.normalize(a,q);var c=d.dot(b,a);a=d.cross(b,a,ja);c=Math.acos(c);f[0]=a[0]*Math.sin(c/2);f[1]=a[1]*Math.sin(c/2);f[2]=a[2]*Math.sin(c/2);f[3]=Math.cos(c/2);return f};a.x5=function(a,b,f,c){c||(c=new Float32Array(4));d.transformQuat(f,b,c);c[3]=-d.dot(a,c)};a.zZ=function(a){var b=
f.la(a.A.D),c=q;switch(a.type){case "CAMERA":c[0]=0;c[1]=-1;c[2]=0;d.transformQuat(c,b,c);ja[0]=0;ja[1]=0;ja[2]=-1;break;case "MESH":c[0]=0;c[1]=0;c[2]=1;d.transformQuat(c,b,c);ja[0]=0;ja[1]=0;ja[2]=1;break;case "EMPTY":c[0]=0,c[1]=1,c[2]=0,d.transformQuat(c,b,c),ja[0]=0,ja[1]=1,ja[2]=0}c[1]=0;d.normalize(c,c);a=d.dot(c,ja);return Math.acos(a)*(0<-c[0]*ja[2]?-1:1)};a.jy=function(a,b,d,f){if(0!=d){f=f||[];for(var c=0;c<a.length;c++)f[c]=(1-d)*a[c]+d*b[c]}};a.JS=function(){G++;return G.toString(10)};
a.Hw=function(a){R[a]||(R[a]=0);var b=a+R[a];R[a]++;return b};a.Ij=function(){return{a_position:new Float32Array(0),a_tbn:n.create(0)}};a.Y=function(b){if(!(b instanceof Object))return b;var d;d=b.constructor;switch(d){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:d=new d(b);break;case Array:d=new d(b.length);for(var f=0;f<b.length;f++)d[f]=a.Y(b[f]);break;default:for(f in d=new d,b)b.hasOwnProperty(f)&&
(d[f]=a.Y(b[f]))}return d};a.ou=function(a){var b=a instanceof Array?[]:{},d;for(d in a)if(a.hasOwnProperty(d))if(a[d]instanceof Object){var f=a[d].constructor;switch(f){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:b[d]=new f(a[d]);break;case Array:b[d]=a[d].slice(0);break;default:b[d]=a[d]}}else b[d]=a[d];return b};a.SG=O;a.TG=function(a,b){b||(b=new Float32Array(3));b[0]=a[12];b[1]=a[13];
b[2]=a[14];return b};a.PP=function(a){la[0]=.577350269189626;la[1]=.577350269189626;la[2]=.577350269189626;la[3]=0;H.transformMat4(la,a,la);return H.length(la)};a.GF=function(a,b){var d=b.left,f=b.right,c=b.top,e=b.bottom,z=b.near,g=b.far;d[0]=a[3]+a[0];d[1]=a[7]+a[4];d[2]=a[11]+a[8];d[3]=a[15]+a[12];f[0]=a[3]-a[0];f[1]=a[7]-a[4];f[2]=a[11]-a[8];f[3]=a[15]-a[12];c[0]=a[3]-a[1];c[1]=a[7]-a[5];c[2]=a[11]-a[9];c[3]=a[15]-a[13];e[0]=a[3]+a[1];e[1]=a[7]+a[5];e[2]=a[11]+a[9];e[3]=a[15]+a[13];z[0]=a[3]+
a[2];z[1]=a[7]+a[6];z[2]=a[11]+a[10];z[3]=a[15]+a[14];g[0]=a[3]-a[2];g[1]=a[7]-a[6];g[2]=a[11]-a[10];g[3]=a[15]-a[14];m(d);m(f);m(c);m(e);m(z);m(g)};a.V4=function(a,b,d){return d<-A.ni(a,b.near)||d<-A.ni(a,b.left)||d<-A.ni(a,b.right)||d<-A.ni(a,b.top)||d<-A.ni(a,b.bottom)||d<-A.ni(a,b.far)?!0:!1};a.OZ=function(a,b,f,c,e){var g=d.dot(f,b.far),z=d.dot(c,b.far),q=d.dot(e,b.far),g=Math.sqrt(g*g+z*z+q*q);if(g<-A.ni(a,b.near)||g<-A.ni(a,b.far))return!0;g=d.dot(f,b.left);z=d.dot(c,b.left);q=d.dot(e,b.left);
if(Math.sqrt(g*g+z*z+q*q)<-A.ni(a,b.left))return!0;g=d.dot(f,b.right);z=d.dot(c,b.right);q=d.dot(e,b.right);if(Math.sqrt(g*g+z*z+q*q)<-A.ni(a,b.right))return!0;g=d.dot(f,b.top);z=d.dot(c,b.top);q=d.dot(e,b.top);if(Math.sqrt(g*g+z*z+q*q)<-A.ni(a,b.top))return!0;g=d.dot(f,b.bottom);z=d.dot(c,b.bottom);q=d.dot(e,b.bottom);return Math.sqrt(g*g+z*z+q*q)<-A.ni(a,b.bottom)?!0:!1};a.as=function(a,b,d,f){f||(f=0);for(var c=a.length,e=0;e<c;e+=3){var z=a[e],g=a[e+1],q=a[e+2];d[f+e]=b[0]*z+b[4]*g+b[8]*q+b[12];
d[f+e+1]=b[1]*z+b[5]*g+b[9]*q+b[13];d[f+e+2]=b[2]*z+b[6]*g+b[10]*q+b[14]}};a.Efa=function(a,b,d,f){f||(f=0);for(var c=a.length,e=0;e<c;e+=3){var z=a[e],g=a[e+1],q=a[e+2];d[f+e]=b[0]*z+b[4]*g+b[8]*q;d[f+e+1]=b[1]*z+b[5]*g+b[9]*q;d[f+e+2]=b[2]*z+b[6]*g+b[10]*q}return d};a.f3=function(a,b,d,f){f=f||0;for(var c=a.length,e=0;e<c;e+=4){S[0]=a[e];S[1]=a[e+1];S[2]=a[e+2];S[3]=a[e+3];var z=0<S[3];X.multiply(b,S,S);(z&&0>S[3]||!z&&0<S[3])&&H.scale(S,-1,S);d[f+e]=S[0];d[f+e+1]=S[1];d[f+e+2]=S[2];d[f+e+3]=S[3]}};
a.A6=function(a,b,d){d||(d=new Float32Array(3));la[0]=a[0];la[1]=a[1];la[2]=a[2];la[3]=0;H.transformMat4(la,b,la);d[0]=la[0];d[1]=la[1];d[2]=la[2]};a.Iaa=function(a,b){var d=a.length;d||p("flatten(): Wrong or empty array");var f=a[0].length;f||p("flatten(): Wrong or empty subarray");b||(b=new Float32Array(d*f));for(var c=0;c<d;c++)for(var e=0;e<f;e++)b[c*f+e]=a[c][e];return b};a.B6=function(a){for(var b=[],d=0;d<a.length;d+=3)b[d/3]=new Float32Array([a[d],a[d+1],a[d+2]]);return b};a.iy=function(b,
d,f,c){if(c<f)return f;var e=f+Math.floor((c-f)/2);return b[e]>d?a.iy(b,d,f,e-1):b[e]<d?a.iy(b,d,e+1,c):e};a.um=function(a,b){for(var d=0;d<a.length;d++)if(a[d]!=b[d])return!1;return!0};a.s$=function(a,b,d){for(var f=0;f<a.length;f++)if(Math.abs(a[f]-b[f])>d)return!1;return!0};a.Xda=function(a,b,d){d||(d=new Float32Array(16));for(var f=0;12>f;f++)d[f]=a[f]*b;d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15];return d};a.z5=function(a,b,d,f,c){c||(c=new Float32Array(16));b=K.fromRotationTranslation(d,
f,V);K.multiply(b,a,c);return c};a.Mc=function(a,b,f,c,e){e||(e=new Float32Array(3));f=K.fromRotationTranslation(f,c,V);1!==b&&(c=K.identity(Ja),b=d.set(b,b,b,q),K.scale(c,b,c),K.multiply(f,c,f));d.transformMat4(a,f,e);return e};a.rfa=function(a,b,d,f,c){c||(c=new Float32Array(4));b=K.fromRotationTranslation(d,f,V);H.transformMat4(a,b,c);return c};a.Rca=function(a,b,f,c,e){e||(e=new Float32Array(3));b=K.fromRotationTranslation(f,c,V);K.invert(b,b);d.transformMat4(a,b,e);return e};a.qfa=function(a,
b,d){d||(d=new Float32Array(16));K.fromRotationTranslation(b,a,d);a=a[3];for(b=0;12>b;b++)d[b]*=a;return d};a.kda=function(b,d,f){a.TG(b,d);d[3]=a.PP(b);O(b,f)};a.J9=function(a){for(var b=[],d=0;d<a.length;d++)b.push(a[d]);return JSON.stringify(b)};a.C3=function(a,b,f,c){c||(c=new Float32Array(3));var e=q;d.subtract(b,a,e);d.transformQuat(e,f,e);d.subtract(b,e,c)};a.NF=function(){var a=q;a[0]=0;a[1]=0;a[2]=0;var b=new Float32Array(16),d=new Float32Array(16),f=new Float32Array(16),c=new Float32Array(16),
e=new Float32Array(16),z=new Float32Array(16);K.lookAt(a,[-1,0,0],[0,-1,0],b);K.scale(b,[-1,1,1],b);K.scale(b,[-1,1,-1],d);K.lookAt(a,[0,-1,0],[0,0,-1],f);K.scale(f,[1,1,-1],f);K.scale(f,[1,-1,-1],c);K.lookAt(a,[0,0,-1],[0,-1,0],e);K.scale(e,[-1,1,1],e);K.scale(e,[-1,1,-1],z);return[b,d,f,c,e,z]};a.C_=function(){var a=q;a[0]=0;a[1]=0;a[2]=0;var b=new Float32Array(16),d=new Float32Array(16),f=new Float32Array(16),c=new Float32Array(16),e=new Float32Array(16),z=new Float32Array(16);K.lookAt(a,[1,0,
0],[0,-1,0],b);K.scale(b,[-1,1,-1],d);K.lookAt(a,[0,1,0],[0,0,1],f);K.scale(f,[1,-1,-1],c);K.lookAt(a,[0,0,1],[0,-1,0],e);K.scale(e,[-1,1,-1],z);return[b,d,f,c,e,z]};a.DL=function(a){return x(a,0)};a.JO=x;a.tca=g;a.b2=function(a,b){b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b};a.CQ=function(a,b){b||(b=a);var d=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<d?(b[3]=2*Math.acos(a[3]),d=1/Math.sqrt(d),b[0]=
a[0]*d,b[1]=a[1]*d,b[2]=a[2]*d):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};a.trunc=function(a){return isNaN(a)||"undefined"==typeof a?NaN:a|0};a.df=function(a){return a*Math.PI/180};a.JB=function(a){return 180*a/Math.PI};a.EI=function(a){var b=.366025403784439*a[0]+.366025403784439*a[1],d=Math.floor(a[0]+b),f=Math.floor(a[1]+b),c=.211324865405187*d+.211324865405187*f,b=a[0]-d+c;a=a[1]-f+c;var g=b>a?1:0,z=1-g,c=b+.211324865405187-g,q=a+.211324865405187-z,h=b+-.577350269189626,l=a+-.577350269189626,d=
d%289,f=f%289,G=Math.max(.5-(b*b+a*a),0),J=Math.max(.5-(c*c+q*q),0),k=Math.max(.5-(h*h+l*l),0),C=2*B(.024390243902439*e(e(f)+d))-1,g=2*B(.024390243902439*e(e(f+z)+d+g))-1,p=2*B(.024390243902439*e(e(f+1)+d+1))-1,d=Math.abs(C)-.5,f=Math.abs(g)-.5,z=Math.abs(p)-.5,C=C-Math.floor(C+.5),g=g-Math.floor(g+.5),p=p-Math.floor(p+.5);return 130*(G*G*G*G*(1.79284291400159-.85373472095314*(C*C+d*d))*(C*b+d*a)+J*J*J*J*(1.79284291400159-.85373472095314*(g*g+f*f))*(g*c+f*q)+k*k*k*k*(1.79284291400159-.85373472095314*
(p*p+z*z))*(p*h+z*l))};a.IL=function(a){var b=1/7,d=b/2,f=P(Math.floor(a[0])),c=P(Math.floor(a[1])),e=B(a[0]);a=B(a[1]);var z=e-.5,g=e-1.5,e=a-.5;a-=1.5;var q=v(f),h=v(f+1),l=q,f=h,q=v(q+c),h=v(h+c),l=v(l+c+1),f=v(f+c+1),c=z+.7*(N(q)*b+d),G=g+.7*(N(h)*b+d),z=z+.7*(N(l)*b+d),g=g+.7*(N(f)*b+d),q=e+.7*(N(Math.floor(q*b))*b+d),e=e+.7*(N(Math.floor(h*b))*b+d),l=a+.7*(N(Math.floor(l*b))*b+d),b=a+.7*(N(Math.floor(f*b))*b+d);return Math.min(c*c+q*q,G*G+e*e,z*z+l*l,g*g+b*b)};a.HB=function(a,b,f,c,e){e||(e=
new Float32Array(4));a=d.transformQuat(b,a,q);b=f[0];var g=f[1];f=f[2];var z=da;z[0]=g*g+f*f;z[1]=-g*b;z[2]=-f*b;z[3]=-b*g;z[4]=b*b+f*f;z[5]=-f*g;z[6]=-b*f;z[7]=-g*f;z[8]=b*b+g*g;d.transformMat3(a,z,a);d.normalize(a,a);X.rotationTo(c,a,e);return e};a.FE=function(a,b){b||(b=new Float32Array(4));var d,f;d=X.setAxisAngle([0,0,1],Math.PI,X.create());f=X.setAxisAngle([1,0,0],Math.PI/2,X.create());X.multiply(d,f,d);X.multiply(a,d,b);return b};a.Ja=function(){G=0;R={}};a.pa=M;a.Tc=function(a,b,d,f){return f?
(d=Math.exp(-d/f),(1-d)*a+d*b):a};a.BC=function(a,b,f,c,e){e||(e=new Float32Array(a.length));if(c)for(f=Math.exp(-f/c),c=0;c<e.length;c++)e[c]=(1-f)*a[c]+f*b[c];else d.copy(a,e);return e};a.XR=function(a,b,d,f,c){c||(c=new Float32Array(a.length));f?X.slerp(a,b,Math.exp(-d/f),c):X.copy(a,c)};a.AG=function(a){return"object"===typeof a&&a.buffer&&a.buffer instanceof ArrayBuffer?!0:!1};a.Yi=function(a,b){if(a instanceof Array||a.buffer&&a.buffer instanceof ArrayBuffer)if(b&&b==a.length||!b)return!0;return!1};
a.XE=function(a,b){var f=U.fromQuat(a,da),c=q;c[0]=f[6];c[1]=f[7];c[2]=f[8];c=d.cross(ya,c,c);d.normalize(c,c);var e=f[4];!b&&0<e&&(c[0]*=-1,c[1]*=-1,c[2]*=-1);ja[0]=f[0];ja[1]=f[1];ja[2]=f[2];d.normalize(ja,ja);X.rotationTo(ja,c,ba);X.multiply(ba,a,a)};a.EN=function(a,b,d,f){d=d*b-.5;f=f*b-.5;var c=d-Math.floor(d),e=f-Math.floor(f);d=Math.floor(d);f=Math.floor(f);var z=b-1;return(a[f*b+d]*(1-c)+a[f*b+Math.min(d+1,z)]*c)*(1-e)+(a[Math.min(f+1,z)*b+d]*(1-c)+a[Math.min(f+1,z)*b+Math.min(d+1,z)]*c)*
e};a.Cp=function(a){for(var b=0,d=0;3>d;d++)0<(a&1<<d)&&b++;return b};a.RQ=function(a){for(var b=[0,0,0],d=0;3>d;d++)0<(a&1<<d)&&(b[2-d]=1);return b};a.es=function(a,b){var d=0;(1==b||2==b)&&0<(a&4)&&d++;2==b&&0<(a&2)&&d++;return d};a.Fz=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})};a.nl=function(a){var b=0,d;for(d in a)a.hasOwnProperty(d)&&b++;return b};a.FQ=function(a){return a.length?a[Math.floor(Math.random()*
a.length)]:null};a.OO=function(a,b,f){f||(f=new Float32Array(3));f[0]=a[0]-b[0];f[1]=a[1]-b[1];f[2]=0;d.normalize(f,f)};a.y5=function(a,b,d){var f=a[0],c=a[1];a=a[2];var e=b[0],z=b[1],g=b[2];b=b[3];var q=z*a-g*c,h=g*f-e*a,l=e*c-z*f;d[0]=f+2*q*b+2*(z*l-g*h);d[1]=c+2*h*b+2*(g*q-e*l);d[2]=a+2*l*b+2*(e*h-z*q)};a.assert=function(a){a||p("Assertion failed")};a.K=p;a.Fi=I;a.Jh=y;a.XF=function(a){return/(?:\.([^.]+))?$/.exec(a)[1]};a.e5=function(a,b){for(var d in a){var f=!0,c=a[d],e=b[d];switch(typeof c){case "number":case "string":case "boolean":f=
c==e;break;case "object":f=D(c,e)}if(!f)return!1}return!0};a.JH=function(a,b){var d=a[0],f=a[2],c=a[3];b[0]=a[1];b[1]=f;b[2]=c;b[3]=d};a.uN=function(a){a++;132651<a&&E.error("Color ID pool depleted");var b=Math.floor(a/2601);a%=2601;return new Float32Array([b/51,Math.floor(a/51)/51,a%51/51])};a.L1=function(a,b,f,c){la.set(a);la[3]=b;q[0]=f[3];q[1]=f[4];q[2]=f[5];ba.set(q);ba[3]=0;a=H.dot(la,ba);if(0==a)return null;d.copy(f,q);ba.set(q);ba[3]=1;a=-H.dot(la,ba)/a;c[0]=f[0]+a*f[3];c[1]=f[1]+a*f[4];c[2]=
f[2]+a*f[5];return c};a.s0=function(a,b,d,f){var c=b[0]-a[0],e=d[0]-a[0],z=b[1]-a[1],g=d[1]-a[1];b=b[2]-a[2];a=d[2]-a[2];f[0]=z*a-b*g;f[1]=e*b-c*a;f[2]=c*g-z*e;return f};a.v$=function(a,b){for(var d=0;d<a.length;d++)b[d]=a[d];return b};a.UQ=u;a.oo=function(a,b,d){if(b==d)return d-a;a=y(a);b=y(b);d=y(d);b=2*Math.PI-b;d=y(d+b);a=y(a+b);return a>d?(d-=a,a=2*Math.PI-a,-d>a?a:d):0};a.sn=function(a,b,d){isFinite(b)&&isFinite(d)&&(a=M(a,b,d));return a*a*(3-2*a)};a.lerp=function(a,b,d){return b+a*(d-b)};
a.BW=function(a,b){for(var d=0;d<a.length;d++)for(var f=0;f<b.length;f++)if(b[f]==a[d])return!0;return!1};a.A$=function(a){for(var b=Array(a),d=0;d<a;d++)b[d]=0;return b};a.kT=function(a,b){for(var d=Math.max(a.length,b.length),f=0;f<d;f++){var c=t((f>=a.length?0:a[f])-(f>=b.length?0:b[f]));if(c)return c}return 0};a.Ln=function(a){return a.join(".")};a.hS=function(a){return a.split(".").map(function(a){return a|0})};a.cS=function(a,b){b[0]=Math.pow(a[0],2.2);b[1]=Math.pow(a[1],2.2);b[2]=Math.pow(a[2],
2.2)};a.NG=function(a,b){b[0]=Math.pow(a[0],1/2.2);b[1]=Math.pow(a[1],1/2.2);b[2]=Math.pow(a[2],1/2.2);return b};a.El=function(a){var b=a.split("://",2);return 1<b.length?(b[1]=L(b[1]),b.join("://")):L(a)};a.ku=function(a){return!!parseInt(a.toString(2).substr(1),2)};a.NZ=function(a,b,d,f){f[0]=a[0];f[1]=b[0];f[2]=d[0];f[3]=a[1];f[4]=b[1];f[5]=d[1];f[6]=a[2];f[7]=b[2];f[8]=d[2];return f};a.zm=function(){var a=[{}];a.length=0;return a};a.cr=function(a){a=Math.round(32767.5*(a+1)-32768);return M(a?
a:0,-32768,32767)};a.TR=function(a){return M((a+32768)/32767.5-1,-1,1)};a.GS=function(a){return M(Math.round(255*a),0,255)};a.FS=function(a){return M(a/255,0,1)};a.DZ=function(a,b,f,c){var e=d.subtract(f,b,q),g=d.subtract(c,f,ja),z=d.subtract(b,c,qa);b=d.subtract(a,b,C);f=d.subtract(a,f,pa);a=d.subtract(a,c,ia);c=d.cross(e,g,ma);if(0<=d.dot(d.cross(c,e,ea),b)&&0<=d.dot(d.cross(c,g,ea),f)&&0<=d.dot(d.cross(c,z,ea),a))return z=d.length(c),g=d.dot(c,b),Math.abs(g/z);e=d.scale(e,M(d.dot(e,b)/d.length(e),
0,1),ea);b=d.length(d.subtract(b,e,ea));g=d.scale(g,M(d.dot(g,f)/d.length(g),0,1),ea);g=d.length(d.subtract(f,g,ea));z=d.scale(z,M(d.dot(z,a)/d.length(z),0,1),ea);z=d.length(d.subtract(a,z,ea));return Math.min(Math.min(b,g),z)};a.D3=function(a,b,d,f,c){if(d||f){var e=X.identity(S);d&&(b=X.setAxisAngle(b,d,oa),X.multiply(e,b,e));a=X.copy(a,c);f&&(c=h(a,J,q),f=X.setAxisAngle(c,f,oa),X.normalize(f,f),X.multiply(e,f,e));X.multiply(e,a,a);X.normalize(a,a)}};a.IB=function(a,b,f,c){h(b,c,ja);d.normalize(ja,
ja);d.subtract(f,a,qa);d.normalize(qa,qa);a=u(ja,qa,la);X.multiply(a,b,b);X.normalize(b,b)};a.d3=function(a,b,f,c){b=d.transformQuat(b,a,ja);var e=d.dot(c,f);c=d.scale(c,e,qa);f=d.subtract(f,c,qa);c=X.identity(S);d.normalize(f,f);.999999>Math.abs(d.dot(b,f))&&u(b,f,c);X.normalize(c,c);X.multiply(c,a,a)};a.kM=function(a,b){for(var d=2*Math.PI,f=[],c=0;3>c;c++)f[c]=a[c]-b[c],5.1<f[c]?(a[c]-=f[c]/d*d,f[c]=a[c]-b[c]):-5.1>f[c]&&(a[c]+=-f[c]/d*d,f[c]=a[c]-b[c]);3.2<Math.abs(f[0])&&1.6>Math.abs(f[1])&&
1.6>Math.abs(f[2])&&(a[0]=0<f[0]?a[0]-d:a[0]+d);3.2<Math.abs(f[1])&&1.6>Math.abs(f[2])&&1.6>Math.abs(f[0])&&(a[1]=0<f[1]?a[1]-d:a[1]+d);3.2<Math.abs(f[2])&&1.6>Math.abs(f[0])&&1.6>Math.abs(f[1])&&(a[2]=0<f[2]?a[2]-d:a[2]+d)};a.$H=function(a,b,f){b=k(b,da);a=k(a,xa);a=U.multiply(a,b,ca);b=q;F(a,b,ja);d.copy(Math.abs(b[0])+Math.abs(b[1])+Math.abs(b[2])>Math.abs(ja[0])+Math.abs(ja[1])+Math.abs(ja[2])?ja:b,f)};a.e3=function(a,b,f){a=U.fromQuat(a,da);var c=q;F(a,c,ja);d.copy(Math.abs(c[0]-b[0])+Math.abs(c[1]-
b[1])+Math.abs(c[2]-b[2])>Math.abs(ja[0]-b[0])+Math.abs(ja[1]-b[1])+Math.abs(ja[2]-b[2])?ja:c,f);return f}};b4w.module.__math=function(a,w){function t(a,b){for(var c=a[1],e=1,g=2;g<a.length;g++)4!=g&&8!=g&&Math.abs(a[g])>Math.abs(c)&&(c=a[g],e=g);for(var h=Math.floor(e/3),e=e%3,c=.5*Math.atan(2*c/(a[3*h+h]-a[3*e+e])),g=0;g<b.length;g++)b[g]=g&&4!=g&&8!=g?0:1;b[e+3*h]=-Math.sin(c);b[h+3*e]=Math.sin(c);b[h+3*h]=Math.cos(c);b[e+3*e]=Math.cos(c);return b}function c(a){return Math.sqrt(a[1]*a[1]+a[2]*a[2]+a[5]*a[5])}function b(a,b){for(var c=a.content[b];0<b;){var e=(b+1>>1)-1,g=a.content[e];if(a.Dp(c)<a.Dp(g))a.content[e]=
c,a.content[b]=g,b=e;else break}}function k(a,b){for(var c=a.content.length,e=a.content[b],g=a.Dp(e);;){var h=b+1<<1,k=h-1,l=null;if(k<c){var m=a.Dp(a.content[k]);m<g&&(l=k)}h<c&&a.Dp(a.content[h])<(null===l?g:m)&&(l=h);if(null!==l)a.content[b]=a.content[l],a.content[l]=e,b=l;else break}}function h(a,b,c,e){return c-O(e-a,0,c,e)+b}function O(a,b,c,e){return(a/=e)<1/2.75?7.5625*c*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*
a+.984375)+b}var m=w("__mat3"),x=w("__vec3"),r=new Float32Array(3),g=new Float32Array(9),e=new Float32Array(9),B=new Float32Array(9),v=new Float32Array(9);a.Iba=function(a,b){b=b||new Float32Array(3);b[0]=a[3];b[1]=a[4];b[2]=a[5];return b};a.Jba=function(a,b){b=b||new Float32Array(3);return x.copy(a,b)};a.CR=function(a,b){x.copy(b,a)};a.qI=function(a,b){x.normalize(b,r);a[3]=r[0];a[4]=r[1];a[5]=r[2]};a.V9=function(a,b,c){c=c||new Float32Array(3);c[0]=a[0]+a[3]*b;c[1]=a[1]+a[4]*b;c[2]=a[2]+a[5]*b;
return c};a.jX=function(a,b){b[0]=0;b[1]=0;for(var c=b[2]=0;c<a.length;c+=3)b[0]+=a[c],b[1]+=a[c+1],b[2]+=a[c+2];return x.scale(b,3/a.length,b)};a.dX=function(a,b,c){for(var e=0;e<c.length;e++)c[e]=0;for(e=0;e<a.length;e+=3){var g=a[e]-b[0],h=a[e+1]-b[1],k=a[e+2]-b[2];c[0]+=g*g;c[1]+=g*h;c[2]+=g*k;c[4]+=h*h;c[5]+=h*k;c[8]+=k*k}c[3]=c[1];c[6]=c[2];c[7]=c[5];for(e=0;e<c.length;e++)c[e]*=3/a.length;return c};a.j_=function(a,b){var h=m.copy(a,g);if(5E-4>c(h))return m.identity(b);var k=t(h,e),P=m.transpose(k,
B);m.multiply(h,P,v);m.multiply(k,v,h);for(var y=m.copy(k,b),D=1;5E-4<=c(h)&&100>D;)k=t(h,e),P=m.transpose(k,B),m.multiply(h,P,v),m.multiply(k,v,h),m.multiply(k,y,y),D++;return y};a.ni=function(a,b){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]};a.PW=function(a){return{content:[],Dp:a}};a.tL=function(a,c){a.content.push(c);b(a,a.content.length-1)};a.QW=function(a){var b=a.content[0],c=a.content.pop();0<a.content.length&&(a.content[0]=c,k(a,0));return b};a.T9=function(a,c){var e=a.content.indexOf(c),g=
a.content.pop();e!==a.content.length-1&&(a.content[e]=g,a.Dp(g)<a.Dp(c)?b(e):k(e))};a.RW=function(a,c){b(a,a.content.indexOf(c))};a.dda=function(a,b,c,e){return c*a/e+b};a.aaa=function(a,b,c,e){return c*(a/=e)*a+b};a.kaa=function(a,b,c,e){return-c*(a/=e)*(a-2)+b};a.X$=function(a,b,c,e){return 1>(a/=e/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b};a.O$=function(a,b,c,e){return c*(a/=e)*a*a+b};a.haa=function(a,b,c,e){return c*((a=a/e-1)*a*a+1)+b};a.U$=function(a,b,c,e){return 1>(a/=e/2)?c/2*a*a*a+b:c/2*((a-=2)*
a*a+2)+b};a.baa=function(a,b,c,e){return c*(a/=e)*a*a*a+b};a.laa=function(a,b,c,e){return-c*((a=a/e-1)*a*a*a-1)+b};a.Y$=function(a,b,c,e){return 1>(a/=e/2)?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b};a.caa=function(a,b,c,e){return c*(a/=e)*a*a*a*a+b};a.maa=function(a,b,c,e){return c*((a=a/e-1)*a*a*a*a+1)+b};a.Z$=function(a,b,c,e){return 1>(a/=e/2)?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b};a.daa=function(a,b,c,e){return-c*Math.cos(a/e*(Math.PI/2))+c+b};a.naa=function(a,b,c,e){return c*Math.sin(a/e*(Math.PI/
2))+b};a.$$=function(a,b,c,e){return-c/2*(Math.cos(Math.PI*a/e)-1)+b};a.Q$=function(a,b,c,e){return 0==a?b:c*Math.pow(2,10*(a/e-1))+b};a.jaa=function(a,b,c,e){return a==e?b+c:c*(-Math.pow(2,-10*a/e)+1)+b};a.W$=function(a,b,c,e){return 0==a?b:a==e?b+c:1>(a/=e/2)?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b};a.N$=function(a,b,c,e){return-c*(Math.sqrt(1-(a/=e)*a)-1)+b};a.gaa=function(a,b,c,e){return c*Math.sqrt(1-(a=a/e-1)*a)+b};a.T$=function(a,b,c,e){return 1>(a/=e/2)?-c/2*(Math.sqrt(1-
a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b};a.P$=function(a,b,c,e){var g=0,h=c;if(0==a)return b;if(1==(a/=e))return b+c;g||(g=.3*e);h<Math.abs(c)?(h=c,c=g/4):c=g/(2*Math.PI)*Math.asin(c/h);return-(h*Math.pow(2,10*--a)*Math.sin(2*(a*e-c)*Math.PI/g))+b};a.iaa=function(a,b,c,e){var g,h=0,k=c;if(0==a)return b;if(1==(a/=e))return b+c;h||(h=.3*e);k<Math.abs(c)?(k=c,g=h/4):g=h/(2*Math.PI)*Math.asin(c/k);return k*Math.pow(2,-10*a)*Math.sin(2*(a*e-g)*Math.PI/h)+c+b};a.V$=function(a,b,c,e){var g,h=0,k=c;if(0==
a)return b;if(2==(a/=e/2))return b+c;h||(h=.3*e*1.5);k<Math.abs(c)?(k=c,g=h/4):g=h/(2*Math.PI)*Math.asin(c/k);return 1>a?-.5*k*Math.pow(2,10*--a)*Math.sin(2*(a*e-g)*Math.PI/h)+b:k*Math.pow(2,-10*--a)*Math.sin(2*(a*e-g)*Math.PI/h)*.5+c+b};a.L$=function(a,b,c,e,g){void 0==g&&(g=1.70158);return c*(a/=e)*a*((g+1)*a-g)+b};a.eaa=function(a,b,c,e,g){void 0==g&&(g=1.70158);return c*((a=a/e-1)*a*((g+1)*a+g)+1)+b};a.R$=function(a,b,c,e,g){void 0==g&&(g=1.70158);return 1>(a/=e/2)?c/2*a*a*(((g*=1.525)+1)*a-g)+
b:c/2*((a-=2)*a*(((g*=1.525)+1)*a+g)+2)+b};a.M$=h;a.faa=O;a.S$=function(a,b,c,e){return a<e/2?.5*h(2*a,0,c,e)+b:.5*O(2*a-e,0,c,e)+.5*c+b}};b4w.module.__print=function(a){function w(a,b){var c=[];-1<a[0].indexOf("%c")?c.push(a[0].replace("%c","%c"+b+": ")):c.push(b+": "+a[0]);for(var e=1;e<a.length;e++)c.push(a[e]);return c}function t(){h++;var a=w(arguments,"B4W ERROR");console.error.apply(console,a)}function c(a){a in m||(m[a]=a,t([a]))}function b(a,b){c(a+"() is deprecated, use "+b+"() instead.")}var k=!1,h=0,O=0,m={};a.y4=function(a){k=a};a.Qd=function(){console.log.apply(console,arguments)};a.log=function(){if(k){var a=w(arguments,
"B4W LOG");console.log.apply(console,a)}};a.mM=w;a.error=t;a.va=c;a.hf=b;a.xaa=function(a,h){switch(1<h.length){case !0:c(a+"() is deprecated, use "+h.slice(0,-1).join("(), ")+"() or "+h[h.length-1]+"() instead.");break;case !1:b(a,h[0])}};a.oz=function(a,b){void 0===b?c('Config option "'+a+'" is deprecated.'):c('Config option "'+a+'" is deprecated, use "'+b+'" instead.')};a.warn=function(){O++;var a=w(arguments,"B4W WARN");console.warn.apply(console,a)};a.info=function(){var a=w(arguments,"B4W INFO");
console.info.apply(console,a)};a.YZ=function(){h++;var a=w(arguments,"B4W EXPORT ERROR");console.error.apply(console,a)};a.ZZ=function(){O++;var a=w(arguments,"B4W EXPORT WARNING");console.warn.apply(console,a)};a.time=function(){k&&console.time.apply(console,arguments)};a.timeEnd=function(){k&&console.timeEnd.apply(console,arguments)};a.group=function(){console.group.apply(console,arguments)};a.groupCollapsed=function(){console.groupCollapsed.apply(console,arguments)};a.groupEnd=function(){console.groupEnd.apply(console,
arguments)};a.clear=function(){"function"==typeof console.clear&&console.clear.apply(console,arguments)};a.D0=function(){return O};a.Z_=function(){return h};a.fM=function(){h=O=0}};b4w.module.print=b4w.module.__print;b4w.module.__tbn=function(a,w){function t(a,b,c){a=x(a,b||0,c);B.normalize(a,c);return c}function c(a,b,c){c=c||0;var e=x(a,c,u),g=B.length(e),h=M.sign(e[3])*M.sign(b[3])||1;B.scale(b,h*g,e);3.1E-5>Math.abs(e[3])&&(e[3]=0<e[3]?3.1E-5:-3.1E-5);r(a,e,c);return a}function b(a,b){return M.sign(a[4*(b||0)+3])}function k(a,b,c){c=c||0;var e=x(a,c,u);0>M.sign(e[3])*b&&B.scale(e,-1,e);r(a,e,c)}function h(a,b,c){c=c||0;var e=x(a,c,u);B.normalize(e,e);B.scale(e,b,e);3.1E-5>Math.abs(e[3])&&(e[3]=0<e[3]?e[3]+
3.1E-5:e[3]-3.1E-5);r(a,e,c)}function O(a,b){var c=x(a,b||0,u);return B.length(c)}function m(a){a=0!==a?a||1:0;for(var b=new Float32Array(4*a),c=0;c<a;c++)b[4*c+3]=.5;return b}function x(a,b,c){c[0]=a[4*b];c[1]=a[4*b+1];c[2]=a[4*b+2];c[3]=a[4*b+3];return c}function r(a,b,c){a[4*c]=b[0];a[4*c+1]=b[1];a[4*c+2]=b[2];a[4*c+3]=b[3];return a}function g(a){return a.length/4}function e(a,e,l){for(var m=g(a),y=0;y<m;y++){var n=b(a,y),f=O(a,y),p=t(a,y,I),p=B.multiply(e,p,I);c(l,p,y);h(l,f,y);k(l,n,y)}}a.oK=
4;var B=w("__quat"),v=w("__tsr"),P=w("__vec3"),N=w("__vec4"),M=w("__util"),p=B.create(),I=B.create(),y=P.create(),D=P.create(),l=P.create(),u=N.create(),L=N.create();a.fr=function(a,b,e){var g=!(!b||!b.length),v=a.length/3;e=e||m(v);for(var n=0;n<v;++n){var f=y;f[0]=a[3*n];f[1]=a[3*n+1];f[2]=a[3*n+2];P.normalize(f,f);if(g){var u=L;u[0]=b[4*n];u[1]=b[4*n+1];u[2]=b[4*n+2];u[3]=b[4*n+3];P.normalize(u,u);var d=P.cross(u,f,D);P.normalize(d,d);var H=B.rotationTo(M.ic,d,p),G=P.transformQuat(M.Ee,H,l),G=
B.rotationTo(G,f,I),H=B.multiply(G,H,p);B.normalize(H,H);G=.5;d=P.cross(f,d,l);if(3.1E-5<Math.abs(d[0]-u[0])||3.1E-5<Math.abs(d[1]-u[1])||3.1E-5<Math.abs(d[2]-u[2]))G=Math.acos(P.dot(f,u))/Math.PI;c(e,H,n);k(e,M.sign(u[3]),n);h(e,G,n)}else H=B.rotationTo(M.Ee,f,p),c(e,H,n)}return e};a.copy=function(a,b,c,e){if(0!==c){b=4*b||0;c=c||a.length;for(var g=0,h=0;g<4*c;g+=4,h+=4)e[h]=a[b+g],e[h+1]=a[b+g+1],e[h+2]=a[b+g+2],e[h+3]=a[b+g+3]}};a.Fb=t;a.Gc=c;a.q0=function(a,b,c){a=t(a,b,p);return P.transformQuat(M.Ee,
a,c)};a.create=m;a.identity=function(a){for(var b=0;b<a.length;b+=4)a[b]=0,a[b+1]=0,a[b+2]=0,a[b+3]=.5;return a};a.Qo=x;a.lk=r;a.Qz=g;a.hH=e;a.UP=function(a,b,c){b=v.Fb(b,p);e(a,b,c)};a.slerp=function(a,e,g,l){var m=b(e,0),n=t(a,0,p),f=t(e,0,I);a=O(a);e=O(e);n=B.slerp(n,f,g,I);B.normalize(n,n);c(l,n,0);h(l,g*(a-e)+e);k(l,m,0);return l};a.gB=function(a,e,g){var l=b(e,0),m=t(a,0,p),n=t(e,0,I);a=O(a,0);e=O(e,0);m=B.multiply(m,n,p);c(g,m,0);h(g,a+e-.5);k(g,l,0);return g};a.o2=function(a,e,g){var l=b(e,
0),m=t(a,0,p),n=t(e,0,I);a=O(a);e=O(e);n=B.invert(n,I);m=B.multiply(m,n,p);c(g,m,0);h(g,a-e+.5);k(g,l,0)}};b4w.module.__container=function(a,w){var t,c,b;function k(){l.getBoundingClientRect()}function h(a,b,c,e){I.SO?(c=c.getBoundingClientRect(),e[0]=a-c.left,e[1]=b-c.top):(F.clientX=a,F.clientY=b,F.view=window,a=new MouseEvent("b4w_convert",F),c.dispatchEvent(a),e[0]=a.offsetX,e[1]=a.offsetY);return e}function O(a,b,c,e){a.style.width=c+"px";a.style.height=e+"px";b&&(b.style.width=c+"px",b.style.height=e+"px")}function m(a,b,c){var h=l,k=u;c&&O(h,k,a,b);k&&(k.width=a,k.height=b,e.Jp());c=Math.floor(a*
I.canvas_resolution_factor);b=Math.floor(b*I.canvas_resolution_factor);h.width=c;h.height=b;var k=Math.min(D.drawingBufferWidth,y.VG,y.$G[0]),f=Math.min(D.drawingBufferHeight,y.VG,y.$G[1]);if(c>k||b>f)B.warn("Canvas size exceeds platform limits, downscaling"),k=Math.min(k/c,k/b),c*=k,b*=k;h.width=Math.floor(c);h.height=Math.floor(b);v.LR(h.width,h.height,a?c/a:1);v.Ya()&&M.W(v.R().Ek);g.b6(h.width,h.height);g.Xi()&&(x.update(),v.update(N.So(),0),x.VS())}var x=w("__anchors"),r=w("__config"),g=w("__data"),
e=w("__hud"),B=w("__print"),v=w("__scenes"),P=w("__subscene"),N=w("__time"),M=w("__transform"),p=w("__util"),I=r.L,y=r.Ni,D=null,l=null,u=null,L=null,F={clientX:0,clientY:0};c=t=0;b=1;a.wh=function(a){D=a};a.Wh=function(){return l};a.JN=function(){return u};a.re=function(){return L};a.Nf=function(a,b){a&&a.parentNode?(l=a,u=b,L=a.parentNode):p.K("canvas container is not available")};a.kv=function(a,b){b=b||"LAST";switch(b){case "FIRST":L.insertBefore(a,L.firstElementChild);break;case "JUST_BEFORE_CANVAS":L.insertBefore(a,
l);break;case "JUST_AFTER_CANVAS":l.nextElementSibling?L.insertBefore(a,l.nextElementSibling):L.appendChild(a,l);break;case "LAST":L.appendChild(a,l);break;default:B.error(b+" invalid stack order")}};a.wO=function(){return t};a.vO=function(){return c};a.bR=function(){};a.LS=k;a.D4=function(a,e,g){t=a;c=e;b=g;k()};a.KF=function(){};a.wy=function(a,b,c){return h(a,b,l,c)};a.MN=function(a,b,c){a.constructor==MouseEvent?(c[0]=a.offsetX,c[1]=a.offsetY):a.constructor==TouchEvent?(b="touchend"==a.type?a.changedTouches:
b?a.targetTouches:a.touches,h(b[0].clientX,b[0].clientY,a.target,c)):(c[0]=-1,c[1]=-1);return c};a.hM=h;a.gu=function(a,c,e,g){e||(e=new Float32Array(2));e[0]=a*b;e[1]=c*b;g&&(a=g.width/t,e[0]*=a,e[1]*=a);return e};a.E6=function(a,c,e,g){e||(e=new Float32Array(2));e[0]=a/b;e[1]=c/b;g&&(a=g.width/t,e[0]/=a,e[1]/=a)};a.eP=function(b){return b&&b.parentNode?b.parentNode==L?!0:a.eP(b.parentNode):!1};a.jP=function(){return I.allow_hidpi&&2<=window.devicePixelRatio?!0:!1};a.m_=function(a){var b=document.getElementsByTagName("script");
a=p.El(a);for(var c=0;c<b.length;c++)if(b[c].src==a)return b[c];return null};a.resize=m;a.Jl=function(a){var b=L,c=l,e=b.clientWidth,b=b.clientHeight;if(a||e!=c.clientWidth||b!=c.clientHeight){a=c.width;c=c.height;O(l,u,e,b);if(v.Ya()){var g=v.R();if((g=v.dc(g,P.Gh))&&g.enable_hmd_stereo){m(a,c,!1);return}}m(e,b,!1)}};a.reset=function(){L=u=l=D=null}};b4w.module.__anchors=function(a,w){function t(){if(!n&&!K){var a=A;if(a)if("visible"==a.lastElementChild.style.visibility)c(),A=null;else if(1==a.style.opacity){var b=a.lastElementChild,a=a.firstElementChild,d=b.firstElementChild,f=Math.ceil(b.getBoundingClientRect().width),e=Math.ceil(b.getBoundingClientRect().height),g=Math.ceil(a.getBoundingClientRect().width),h=Math.ceil(a.getBoundingClientRect().height);b.style.position="absolute";b.style.visibility="visible";var l=!0,k=!0;a.style.display="none";
n=!0;g!=f?D.Hi(g,f,200,function(a){a==f&&(l=!1,k||(n=!1,d.style.visibility="visible"));b.style.width=a+"px"}):(l=!1,k||(n=!1));h!=e?D.Hi(h,e,200,function(a){a==e&&(k=!1,l||(n=!1,d.style.visibility="visible"));b.style.height=a+"px"}):(k=!1,l||(n=!1))}}}function c(){var a=A.lastElementChild;A.firstElementChild.style.display="";a.style.visibility="hidden";a.style.position="relative";a.firstElementChild.style.visibility="hidden"}function b(a){a.style.cssText+="color:       #fff;font-family: Arial;font-size:   12px;font-weight: bold;line-height: 1.25;"}
function k(a,d,f){var e=document.createElement("div"),g=document.createElement("span");f&&(e.style.maxWidth=f+"px");e.style.cssText+="background-color:   #000;border-radius:      20px 20px 20px 0px;bottom:             0;box-shadow:         0px 0px 10px rgb(180, 180, 200);-webkit-box-shadow: 0px 0px 10px rgb(180, 180, 200);left:               0;box-sizing:         border-box;opacity:            1.0;padding:            6px 12px 6px 12px;position:           relative;z-index:            2;";b(g);g.innerHTML=
a;e.style.visibility="hidden";g.style.visibility="hidden";e.appendChild(g);d.appendChild(e);v.Ih(d,function(){n||d==A||1!=d.style.opacity||K||(A&&"visible"==A.lastElementChild.style.visibility&&c(),A=d)})}function h(){for(var a=0,b=0;b<U.length;b++)U[b].Xq&&a++;f=new Float32Array(3*a)}function O(a,b){return b.depth-a.depth}function m(a,b,d){a=a.element;F.TO&&(b=Math.floor(b),d=Math.floor(d));"transform"in a.style?a.style.transform="translate3d("+b+"px, "+d+"px, 0px)":"webkitTransform"in a.style?a.style.webkitTransform=
"translate3d("+b+"px, "+d+"px, 0px)":(a.style.left=b+"px",a.style.top=d+"px")}function x(a){for(var b=0;b<U.length;b++)if(U[b].aa==a)return!0;return!1}var r=w("__batch"),g=w("__camera"),e=w("__config"),B=w("__container"),v=w("__input"),P=w("__objects"),N=w("__obj_util"),M=w("__print"),p=w("__renderer"),I=w("__scenes"),y=w("__subscene"),D=w("__time"),l=w("__transform"),u=w("__tsr"),L=w("__vec3"),F=e.L,U=[],K=!1,A=null,E=!1,n=!1,f=new Float32Array(0),X=new Uint8Array(16),d=new Float32Array(2),H=new Float32Array(3),
G=new Float32Array(3);a.append=function(a){if(!x(a)){var d=a.anchor.Xq&&!!I.dc(I.Ui(),y.Wp),d={type:a.anchor.type,aa:a,x:0,y:0,depth:0,ho:"out",Xq:d,element:null,Ir:null,cW:a.anchor.g2,Dm:a.anchor.Dm};switch(d.type){case "ANNOTATION":var c=d.aa;a=B.re();var f=P.Ro(c),c=c.name,e="",g=document.createElement("div"),l=g.cloneNode(!1),G=document.createElement("span");g.style.cssText+="position:        absolute;height:          0;top:             0;left:            0;transform-style: preserve-3d;";l.style.cssText+=
"background-color:   #000;border-radius:      20px 20px 20px 0px;box-shadow:         0px 0px 10px rgb(180, 180, 200);-webkit-box-shadow: 0px 0px 10px rgb(180, 180, 200);opacity:            1.0;box-sizing:         border-box;bottom:             0;left:               0;padding:            6px 12px 6px 12px;position:           absolute;";g.style.visibility="hidden";f&&(e=f.description||e,c=f.title||c);G.innerHTML=c;G.style.cssText+="-webkit-touch-callout: none;-webkit-user-select:   none;-khtml-user-select:    none;-moz-user-select:      none;-ms-user-select:       none;user-select:           none;cursor:                default;";
b(G);G.style.whiteSpace="nowrap";l.appendChild(G);g.appendChild(l);e&&k(e,g,d.cW);a.appendChild(g);d.element=g;break;case "ELEMENT":if(d.element=document.getElementById(a.anchor.Dm),d.element)for(f=0;f<U.length;f++)"ELEMENT"==U[f].type&&U[f].Dm==a.anchor.Dm&&(M.warn("Anchor with the id '"+a.anchor.Dm+"' already exists, making the new anchor generic."),d.type="GENERIC");else M.warn("Anchor HTML element with the id '"+a.anchor.Dm+"' was not found, making it generic."),d.type="GENERIC"}U.push(d);h();
E||(E=!0,B.re().addEventListener("mouseup",t))}};a.remove=function(a){for(var b=0;b<U.length;b++){var d=U[b];if(d.aa==a){"ANNOTATION"==d.type&&(a=d,B.re().removeChild(a.element));U.splice(b,1);h();break}}};a.update=function(a){for(var b=0,d=U.length;d--;){var c=U[d];if(c.Xq){var e=u.X(c.aa.A.D);f.set(e,3*b++)}var h;h=c;var e=H,l=I.Jm(I.Ui());h=u.X(h.aa.A.D);g.HH(l,h,e);h=e;e=h[0];l=h[1];h=h[2];if(a||e!=c.x||l!=c.y||h!=c.depth){switch(c.type){case "ANNOTATION":var k=e,G=l;m(c,k,G);break;case "ELEMENT":G=
c.element.getBoundingClientRect(),k=e-G.width/2,G=l-G.height/2,m(c,k,G)}c.x=e;c.y=l;c.depth=h;c.Ir&&c.Ir(e,l,c.ho,c.aa,c.element)}}U.sort(O);for(d=0;d<U.length;d++)c=U[d],"GENERIC"!=c.type&&(c.element.style.zIndex=A==c.element?U.length:d);0<b&&(a=I.dc(I.Ui(),y.Wp),b=a.kb[0].Ua[0],r.D5(b.Fa,f),y.pd(a,b))};a.VS=function(){for(var a=B.re(),b=I.R(),b=I.dc(b,y.Gh),b=!(!b||!b.enable_hmd_stereo),f=U.length;f--;){var e=U[f],g=e.aa,h=g.A,k=e.x,m=e.y,n=e.depth,v=I.Jm(I.Ui()),u=l.Me(g,H),v=l.Me(v,G),u=L.dist(u,
v);(n=0>k||0>m||0>n||1<n||I.DG(g)||k>=a.clientWidth||m>=a.clientHeight)||(h.ql?(n=h.mh,h=u<h.nh?!1:n==N.aE||u<n?!0:!1):h=!0,n=!h);h=n?"out":"visible";e.Xq&&"out"!=h&&(h=e,n=I.dc(I.Ui(),y.Wp).H,u=B.gu(h.x,h.y,d,n),p.KB(n.Mf,u[0],n.height-u[1],2,2,X),h=255<=X[0]+X[4]+X[8]+X[12]?"visible":"out"!=h.ho&&X[0]+X[4]+X[8]+X[12]?h.ho:"covered");b&&(h="out");if(h!=e.ho){switch(e.type){case "ANNOTATION":case "ELEMENT":var D=e.element;D&&("out"==h?(D.style.visibility="hidden",D.children.length&&(D.children[0].style.visibility=
"hidden")):"visible"==h?(D.style.visibility="visible",D.children.length&&(D.children[0].style.visibility="visible"),D.style.opacity=1):(D.style.visibility="visible",D.style.opacity=.1,D.children.length&&(D.children[0].style.visibility="visible"),"ANNOTATION"==e.type&&1<D.children.length&&"visible"==D.lastElementChild.style.visibility&&(c(),D==A&&(A=null))))}e.ho=h;e.Ir&&e.Ir(k,m,e.ho,g,D)}}};a.P9=function(a,b){for(var d=0;d<U.length;d++)U[d].aa==a&&(U[d].Ir=b)};a.F$=function(a){for(var b=0;b<U.length;b++)U[b].aa==
a&&(U[b].Ir=null)};a.Ja=function(){for(var a=0;a<U.length;a++){var b=U[a];"ANNOTATION"==b.type&&B.re().removeChild(b.element)}U.length=0};a.h1=x;a.kba=function(a){for(var b=0;b<U.length;b++)if(U[b].aa==a)return U[b].Dm;return!1};a.pause=function(){K=!0};a.resume=function(){K=!1};a.J2=function(a,b){for(var d=-1,c=0;c<U.length;c++){var f;if(f="visible"==U[c].ho){var e=U[c];if(e.element){f=Math.round(e.element.offsetWidth)||0;var g=Math.round(e.element.offsetHeight)||0}else g=f=0;var h=e.x,e=e.y;f=a>=
h&&a<=h+f&&b<e&&b>=e-g?!0:!1}if(f)if(0>d)var q=U[c].depth,d=c;else U[c].depth<q&&(d=c,q=U[c].depth)}return 0>d?null:U[d].aa}};b4w.module.__batch=function(a,w){function t(a){a={type:a,Ib:"",id:0,Le:0,pu:-1,bn:"",Vy:-1,Tq:-1,Fu:0,ng:0,Bm:[],xa:[],Ig:[],jg:[],Dc:[],Uk:[],uk:null,nd:{},Hb:null,qb:Z.f1(),Pe:"",Ut:[],Pa:null,ag:J.zm(),$f:!1,$k:!1,Xy:!1,Hv:0,qp:0,EA:0,FA:0,kd:!1,cA:0,ol:0,Nd:new Float32Array(3),mg:new Float32Array(16),Gk:!1,gg:!1,xb:!1,Za:!1,rj:!1,Na:!1,Nc:!1,ff:!1,Wf:!1,vf:!1,ze:!1,Se:!1,xe:!1,Ad:!1,Lj:ha.$p,cg:!1,Th:!1,bl:!1,fh:!1,mh:da.aE,nh:0,wl:0,xl:0,Wm:b(),Ke:-1,ue:-1,iA:!1,mA:0,jA:0,nA:0,oA:0,lA:new Float32Array(3),
kA:new Float32Array(3),hv:!1,af:0,gf:0,rg:1,pi:0,us:0,Eg:1,Vr:0,Do:0,Hk:1,Qr:0,mp:0,Sd:0,si:0,de:new Float32Array(2),tn:new Float32Array(3),wi:new Float32Array(3),Fg:new Float32Array(3),jd:new Float32Array(4),Mo:new Float32Array(2),hp:null,Dr:null,vv:null,uv:null,Uj:!1,wireframe_edge_color:ra.create(),nj:!1,water_dynamic:!1,Xw:!1,CD:!1,DD:0,ED:0,BD:0,gt:.1,ls:0,ns:0,Qi:0,xz:new Float32Array(2),wz:new Float32Array(2),Tu:new Float32Array(2),ks:new Float32Array(3),ms:new Float32Array(3),Dl:null,Gl:!1,
rl:!1,gz:!1,Ra:null,Bv:0,co:null,Mv:null,bj:[],li:[],Qe:[],ki:[],Db:C.VO(),In:!1,Be:null,Mh:!0,WO:0,Sr:new Float32Array(3)};a.jd[3]=1;a.Za=!0;a.Bv=1;a.Wm.nr=-1;return a}function c(a){var d=t(a.type);d.Ib=a.Ib;d.id=a.id;d.pu=a.pu;d.bn=a.bn;d.Vy=a.Vy;d.Tq=a.Tq;d.Fu=a.Fu;d.ng=a.ng;d.Bm=[];d.xa=a.xa.slice();d.Ig=a.Ig.slice();d.jg=a.jg.slice();d.Dc=a.Dc.slice();d.Uk=a.Uk.slice();d.uk=J.Y(a.uk);d.nd=J.Y(a.nd);d.Hb=a.Hb;d.qb=Z.SX(a.qb);d.Pe=a.Pe;d.Ut=S.OX(a.Ut);d.Pa=a.Pa;d.$f=a.$f;d.$k=a.$k;d.Xy=a.Xy;d.Hv=
a.Hv;d.qp=a.qp;d.EA=a.EA;d.FA=a.FA;d.cA=a.cA;d.ol=a.ol;d.Nd=a.Nd;d.mg=a.mg;d.Gk=a.Gk;d.gg=a.gg;d.xb=a.xb;d.Za=a.Za;d.rj=a.rj;d.Na=a.Na;d.Nc=a.Nc;d.ff=a.ff;d.Wf=a.Wf;d.vf=a.vf;d.ze=a.ze;d.Se=a.Se;d.xe=a.xe;d.Ad=a.Ad;d.kd=a.kd;d.Lj=a.Lj;d.cg=a.cg;d.Th=a.Th;d.bl=a.bl;d.fh=a.fh;d.mh=a.mh;d.nh=a.nh;d.wl=a.wl;d.xl=a.xl;var c=a.Wm,f=b();f.Ow=c.Ow;f.Hf=c.Hf;f.yy=c.yy;f.Kj=c.Kj;f.nr=c.nr;f.mr=c.mr;f.lr=c.lr;f.CB=c.CB;d.Wm=f;d.Ke=a.Ke;d.ue=a.ue;d.iA=a.iA;d.mA=a.mA;d.jA=a.jA;d.nA=a.nA;d.oA=a.oA;ra.copy(a.lA,
d.lA);ra.copy(a.kA,d.kA);d.hv=a.hv;d.af=a.af;d.gf=a.gf;d.rg=a.rg;d.pi=a.pi;d.us=a.us;d.Eg=a.Eg;d.Vr=a.Vr;d.Do=a.Do;d.Hk=a.Hk;d.Qr=a.Qr;d.mp=a.mp;d.Sd=a.Sd;d.si=a.si;d.de[0]=a.de[0];d.de[1]=a.de[1];ra.copy(a.tn,d.tn);ra.copy(a.wi,d.wi);ra.copy(a.Fg,d.Fg);ya.copy(a.jd,d.jd);d.Mo.set(a.Mo);d.hp=J.Y(a.hp);a.Dr&&(d.Dr=new Float32Array(a.Dr),d.vv=new Float32Array(a.vv),d.uv=new Float32Array(a.uv));d.Uj=a.Uj;ra.copy(a.wireframe_edge_color,d.wireframe_edge_color);d.nj=a.nj;d.water_dynamic=a.water_dynamic;
d.Xw=a.Xw;d.CD=a.CD;d.DD=a.DD;d.ED=a.ED;d.BD=a.BD;d.gt=a.gt;d.ls=a.ls;d.ns=a.ns;d.Qi=a.Qi;d.xz.set(a.xz);d.wz.set(a.wz);d.Tu.set(a.Tu);ra.copy(a.ks,d.ks);ra.copy(a.ms,d.ms);d.Dl=J.Y(a.Dl);d.Gl=a.Gl;d.rl=a.rl;d.gz=a.gz;a.Ra&&(d.Ra=xa.iM(a.Ra));d.Bv=a.Bv;a.co&&(d.co=new Float32Array(a.co));d.Mv=J.Y(a.Mv);d.bj=a.bj.slice();d.li=a.li.slice();d.Qe=a.Qe.slice();d.ki=a.ki.slice();C.tM(a.Db,d.Db);d.In=a.In;d.Mh=a.Mh;d.Sr=a.Sr;return d}function b(){return{Ow:!1,Hf:0,Kj:0,nr:0,mr:0,lr:0,CB:0,yy:1}}function k(a){switch(a.type){case "MAIN":case "PARTICLES":case "LINE":a.Ib=
a.xb?a.rj?"XRAY":"BLEND":"OPAQUE";break;case "SHADOW":a.Ib=a.vf?"CAST":"RECEIVE";break;case "COLOR_ID":a.Ib=a.rj?"COLOR_ID_XRAY":"COLOR_ID"}}function h(a,b,d){var c=[],e=a.Oa,z=m(d,b,!b.ef,!1),g=a.data,h=e.Ec,q=Array(h.length),l=Array(h.length),k=[],G=oa.cc(d,fa.Nb),C=!1;G&&(C=G.jp.length?!0:!1);for(var H=0;H<z.length;H++)for(var y=z[H],p=0;p<h.length;p++){var v=h[p];if(!qa(e,p)&&!ha.IO(g,p))if("PHYSICS"==y&&a.b4w_collision&&"NAVMESH"==a.game.physics_type)k.push(ha.rz(g,p,[],b.zj,{},null));else if(!v.Yj||
C){var R=t(y);"MAIN"==y?q[p]=R:"DEBUG_VIEW"==y&&(l[p]=R);R.pu=a.b4w_cluster_data.cluster_id;if(f(R,v)&&x(R,v,g)){"SHADOW"==y&&q[p]&&(R.Nc=q[p].Nc);R.Lj=b.$f||b.ff?ha.ex:ha.$p;u(R,b);U(R,a.particle_systems);if("DYNAMIC"==b.type||"COLOR_ID"==R.type)R.bn=ja(R,b,a.uuid);R.bl=a.b4w_do_not_cull;"MAIN"==R.type&&(R.fh=a.b4w_caustics);A(R,"DISABLE_FOG",("COLOR_ID"!=y&&"SHADOW"!=y&&a.b4w_disable_fogging)|0);var B=ha.rz(g,p,R.Uk,b.zj,R.nd,R.uk);!v.zf||"a_shade_tangs"in B.sa[0]||(A(R,"CALC_TBN",1),K(R,"a_tbn"));
v.Yj&&(B=xa.Y2(B));X(R);c.push({Fa:R,sh:b,hy:b,Be:B,hi:[v.name],Te:[a]})}}}if(k.length){R=t("PHYSICS");R.Ib="NAVMESH";R.bn=ja(R,b,a.uuid);for(var B=ha.lS(k),Da=[],H=0;H<h.length;H++)Da.push(h[H].name);X(R);c.push({Fa:R,sh:b,hy:b,Be:B,hi:Da,Te:[a]})}for(H=0;H<l.length;H++)l[H]&&(l[H].Tq=q[H].id,X(l[H]));var D=a.particle_systems;if(0<D.length){for(var Aa=!1,E=!1,H=0;H<D.length;H++){var F=D[H],V=F.settings;V.use_render_emitter&&c.length&&(Aa=!0);"HAIR"!=V.type||"OBJECT"!=V.render_type&&"GROUP"!=V.render_type&&
F.transforms.length||(E=!0);if(Aa&&E)break}var r;if(c.length)r=c[0];else{var ta=t("TMP");U(ta,D);var S=ha.rz(g,0,ta.Uk,b.zj,ta.nd,ta.uk);r={Fa:ta,Be:S}}var L=r,N=L.Fa.nd,va;if(E){var ba;if(1<h.length){for(var P={},w=0;w<D.length;w++){var ka=D[w].settings;if("HAIR"==ka.type&&("OBJECT"==ka.render_type||"GROUP"==ka.render_type)){var M=ka.b4w_vcol_from_name,pa=ka.b4w_vcol_to_name;""!==M&&""!==pa&&(P[M]=J.Y(N[M]))}}"a_bending_col_main"in N&&(P.a_bending_col_main=J.Y(N.a_bending_col_main));"a_bending_col_detail"in
N&&(P.a_bending_col_detail=J.Y(N.a_bending_col_detail));ba=ha.kN(g,[],P)}else ba=L.Be;va=ba}else va=null;for(var I=va,ea=a.Oa,Y=[],la=a.particle_systems,ya=a.data,ca=0;ca<la.length;ca++){var O=la[ca],Ba=O.settings;if(Ba.count)if("EMITTER"==Ba.type){if("DYNAMIC"==b.type){var ma=t("PARTICLES");ma.Db.Ff=b.Ca;ma.Db.ig=b.Lb;ma.Db.Gf=b.Bc;var Va,ua=O.settings.material-1;ua>=ea.Ec.length&&(ia.warn('Wrong material used for rendering particle system "'+O.name+'"'),ua=0);Va=ua;var aa=ea.Ec[Va];if(!qa(ea,Va)&&
("HALO"===O.settings.render_type&&"HALO"==aa.type&&(ma.hv=!0),x(ma,aa,ya))){var W=ma,Pa=ea,wb=O.settings;switch(wb.b4w_billboard_align){case "VIEW":A(W,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW");break;case "XY":A(W,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_XY");break;case "YZ":A(W,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_YZ");break;case "ZX":A(W,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_ZX");break;default:J.K("Wrong billboard align value")}A(W,"BILLBOARD",0);var kd=wb.b4w_enable_soft_particles&&da.RL(Pa,wb);A(W,"SOFT_PARTICLES",
0<wb.b4w_particles_softness&&kd&&Q.Zy?1:0);A(W,"SOFT_STRENGTH",Z.fa(wb.b4w_particles_softness));Z.wa(W.qb,"WORLD_SPACE","WORLD"==wb.b4w_coordinate_system?1:0);ma.ff=!0;ma.bl=a.b4w_do_not_cull;ma.bn=ja(ma,b,ea.name+"_"+Ba.uuid);xa.yY(ma,O,aa);var Mc=xa.z_(ma,ya,O,ea.A);xa.g6(Mc,ma,Ba.count);xa.f6(ea);u(ma,ea.A);X(ma);Y.push({Fa:ma,sh:b,hy:b,Be:Mc,hi:[aa.name],Te:[a]})}}}else if("HAIR"==Ba.type){var bb=J.vA(O.seed),Bb=Ja.SL(Q.PG)&&!Ba.b4w_initial_rand_rotation&&!Ba.b4w_hair_billboard,gb=4;Bb&&(gb=8);
if(O.transforms.length)var Tb=O.transforms;else for(var lb=ha.PF(I,Ba.count,!1,bb),Tb=new Float32Array(lb.length*gb),db=0;db<lb.length;db++){var wa=.75+.5*J.oi(bb);Tb[db*gb]=lb[db][0];Tb[db*gb+1]=lb[db][1];Tb[db*gb+2]=lb[db][2];Tb[db*gb+3]=wa;Bb&&(Tb[db*gb+4]=1,Tb[db*gb+5]=0,Tb[db*gb+6]=0,Tb[db*gb+7]=0)}var Ya=oa.cc(d,fa.yk)?!0:!1;if("OBJECT"==Ba.render_type){var Ga=[m(d,Ba.dupli_object.Oa.A,!b.ef,!0)],Nc=n(a,b,N,I,[Ba.dupli_object],Ga,[Tb],Ba,O,Ya,bb,!1);Y.push.apply(Y,Nc)}else if("GROUP"==Ba.render_type){for(var Xc=
Ba.dupli_group.objects,Ga=[],db=0;db<Xc.length;db++){var ld=m(d,Xc[db].Oa.A,!b.ef,!0);Ga.push(ld)}for(var md=!1,ed=[],db=0;db<Xc.length;db++)ed.push(Xc[db].Oa);if(Ba.use_whole_group){for(var Fc,Zb=Tb,fd=ed,Yc=Bb,gd=gb,Cb={},Gb=new Float32Array([0,0,0,1]),xb=0;xb<Zb.length;xb+=gd)for(var ob=0;ob<fd.length;ob++){var Jb=ra.create(),nd=za.ge(fd[ob].A.D),Oc=za.X(fd[ob].A.D);ra.scale(Oc,nd,Jb);var jb=ra.clone([Zb[xb],Zb[xb+1],Zb[xb+2]]);Cb[ob]||(Cb[ob]=new Float32Array(Zb.length));Yc&&(Cb[ob][xb+4]=Gb[0]=
Zb[xb+4],Cb[ob][xb+5]=Gb[1]=Zb[xb+5],Cb[ob][xb+6]=Gb[2]=Zb[xb+6],Cb[ob][xb+7]=Gb[3]=Zb[xb+7],J.JH(Gb,Gb),J.y5(Jb,Gb,Jb));ra.add(jb,Jb,jb);Cb[ob][xb]=jb[0];Cb[ob][xb+1]=jb[1];Cb[ob][xb+2]=jb[2];Cb[ob][xb+3]=Zb[xb+3]}Fc=Cb;md=!0}else{var Pc;if(Ba.use_group_count){for(var cc=Tb,Gc=ed,dc=Ba.dupli_weights,Zc=bb,Ub=Bb,Ob=gb,Db={},vc=[],mb=0;mb<Gc.length;mb++)for(var Hc=Gc[mb],mc=Hc.Sf||Hc.name,Qc=0;Qc<dc.length;Qc++){var Hb=dc[Qc];mc==Hb.name&&vc.push(Hb)}dc.length!=vc.length&&ia.error("dupli weights match failed");
for(mb=0;mb<cc.length;mb+=Ob){for(var Kb,wc=vc,nc=[0],tb=0;tb<wc.length;tb++)nc[tb+1]=nc[tb]+wc[tb].count;for(var Pb=nc[nc.length-1]*J.oi(Zc),yb=0,tb=0;tb<nc.length;tb++)if(Pb>=nc[tb]&&Pb<nc[tb+1]){yb=tb;break}Kb=yb;Db[Kb]=Db[Kb]||[];Db[Kb].push(cc[mb],cc[mb+1],cc[mb+2],cc[mb+3]);Ub&&Db[Kb].push(cc[mb+4],cc[mb+5],cc[mb+6],cc[mb+7])}for(Kb in Db)Db[Kb]=new Float32Array(Db[Kb]);Pc=Db}else{for(var Eb=Tb,Sa=bb,oc=Bb,Qb=gb,ec=ed.length,eb={},Vb=0;Vb<Eb.length;Vb+=Qb){var xc=Math.floor(ec*J.oi(Sa));eb[xc]=
eb[xc]||[];eb[xc].push(Eb[Vb],Eb[Vb+1],Eb[Vb+2],Eb[Vb+3]);oc&&eb[xc].push(Eb[Vb+4],Eb[Vb+5],Eb[Vb+6],Eb[Vb+7])}for(xc in eb)eb[xc]=new Float32Array(eb[xc]);Pc=eb}Fc=Pc}Nc=n(a,b,N,I,Xc,Ga,Fc,Ba,O,Ya,bb,md);Y.push.apply(Y,Nc)}"INSTANCE"==Ba.b4w_wind_bend_inheritance&&ea.A.Bf&&ia.warn('Emitter object "'+ea.name+"\" has a particle system with wind bending inheritance from the particle instance. Wind bending on the emitter isn't disabled. Expect unforeseen behavior.")}else J.K("Unknown particle settings type")}Aa?
c.push.apply(c,Y):c=Y}return c}function O(a){for(var b=[],c=[],f={},e=0;e<a.length;e++){var z=a[e].Fa,g=null;if(z.id in f){var h=f[z.id],q=c[h].Fa;d(z,function(a){d(q,function(b){J.e5(a,b)&&1!=a.WO&&(g=c[h])})});if(!g){do z.id++;while(f[z.id])}}g||(g={Fa:z,iQ:[],mL:[],nS:[],Te:[],JQ:[],hi:[]},f[z.id]=c.length,c.push(g));if(a[e].Be&&a[e].Be.hb){g.iQ.push(a[e].sh);g.mL.push(a[e].hy);g.nS.push(a[e].Be);for(var l=0;l<a[e].Te.length;l++)z=a[e].Te[l],-1==g.JQ.indexOf(z.uuid)&&(g.Te.push(z),g.JQ.push(z.uuid));
for(l=0;l<a[e].hi.length;l++)z=a[e].hi[l],-1==g.hi.indexOf(z)&&g.hi.push(z)}g.hi.sort()}for(e=0;e<c.length;e++){var z=c[e].Fa,k=c[e].iQ,G=c[e].mL,n=c[e].nS;a="DYNAMIC"==G[0].type||"COLOR_ID"==z.type?G[0]:da.RE(G[0]);if("STATIC"==a.type&&"COLOR_ID"!=z.type)for(l=0;l<k.length;l++){var H=k[l],m=G[l],f=n[l],y=za.identity(wa);H.Kh&&!H.Yt?(H=za.ir(H.D,Pa),za.on(H,y)):za.copy(H.D,y);m.Qm?f.Of||(m.Kh?ha.h5(f,y):ha.MI(f,y)):ha.MI(f,y);if(m.Qm)A(z,"AU_QUALIFIER","GLSL_IN");else if(1<c[e].Te.length){H={};if(m.Bf||
m.Kh)H.au_center_pos=[y[0],y[1],y[2]];m.Bf&&(H.au_wind_bending_amp=[m.Og],H.au_wind_bending_freq=[m.Pg],H.au_detail_bending_amp=[m.pg],H.au_detail_bending_freq=[m.qg],H.au_branch_bending_amp=[m.kg]);ha.g5(f,H);A(z,"AU_QUALIFIER","GLSL_IN")}else a.ty.set(y.subarray(0,3)),A(z,"AU_QUALIFIER","uniform")}if(0==n.length)f=ha.ei(J.Hw("%empty"));else if(1==n.length)f=n[0];else{f=[];for(l=0;l<n.length;l++)ha.o1(n[l])||f.push(l);if(f.length<n.length)for(l=0;l<f.length;l++)ha.PC(n[f[l]]);f=ha.lS(n)}if("STATIC"==
a.type){if("COLOR_ID"!=z.type){n=[];for(l=0;l<c[e].Te.length;l++)C.HF(c[e].Te[l].Oa.A.nL,n);C.tE(n,0,n.length,a.Ki);C.Gj(a.Ki,a.Ca);a.qm=C.Gy(J.Qh(n),!0);C.Oq(a.qm,a.Lb);a.bf=C.Iy(a.qm);C.xm(a.bf,a.Bc)}a.ql&&(l=c[e].Te[0].b4w_cluster_data,l.cluster_center?a.Cv.set(l.cluster_center):a.Cv.set(a.bf.V))}"PARTICLES"!=z.type&&(l=f.Dd,a.Kh?(C.Gj(a.Ca,z.Db.Ff),C.Oq(a.Lb,z.Db.ig),C.xm(a.Bc,z.Db.Gf),z.In=!1):(C.Gj(l.Ca,z.Db.Ff),C.Oq(l.Lb,z.Db.ig),a.Bc.pb<l.Bc.pb?"STATIC"==a.type&&"COLOR_ID"!=z.type?C.xm(a.bf,
z.Db.Gf):C.xm(a.Bc,z.Db.Gf):C.xm(l.Bc,z.Db.Gf),z.In=C.aP(z.Db.ig,z.Db.Gf)));b.push({Fa:z,A:a,Be:f,hi:c[e].hi,Te:c[e].Te})}return b}function m(a,b,d,c){var f=[];c||(b.mn&&oa.cc(a,fa.Df)||b.zd&&oa.cc(a,fa.Ci))&&f.push("COLOR_ID");d&&(f.push("MAIN"),f.push("NODES_GLOW"),oa.cc(a,fa.Bi)&&f.push("DEBUG_VIEW"),oa.cc(a,fa.Wg)&&f.push("SHADOW"),oa.cc(a,fa.yk)&&f.push("GRASS_MAP"));f.push("PHYSICS");if(b.vf||b.xe)for(a=null,b.vf&&(a=["MAIN","NODES_GLOW","COLOR_ID","PHYSICS","DEBUG_VIEW"]),b.xe&&(b=["COLOR_ID",
"PHYSICS","SHADOW","DEBUG_VIEW"],a?a=J.AW(a,b):a=b),b=a,a=0;a<b.length;a++)d=f.indexOf(b[a]),-1!==d&&f.splice(d,1);return f}function x(a,b,d){var c;switch(a.type){case "MAIN":if(b.ef)c=!1;else{if(b.Ch&&"HALO"!=b.type)M(a,b,d,"MAIN");else{e(a,b);a.Na=b.Na;a.rj=b.Il&&"OPAQUE"!=b.ub&&"CLIP"!=b.ub&&"ALPHA_ANTIALIASING"!=b.ub;a.Sd=b.Sd;a.wi.set([1,1,1]);var f=b.Ah;a.jd.set(b.jd);a.jd[3]=b.alpha;if(b.Yj){G(a,"lens_flares.glslv","lens_flares.glslf");K(a,"a_position");K(a,"a_texcoord");var z=aa.kf(f[0]),
h=f[0].texture;R(a,z,"u_sampler",h.name)}else{G(a,"main.glslv","main_stack.glslf");b.Nc||(d=ba.dF(b.dd,{Nc:b.Nc,Kf:b.Kf,Yf:b.Yf,zf:b.zf}),a.qb.Rf=ba.tu(d));var q=B("use_map_color_diffuse",f);c=B("use_map_color_spec",f);var k=B("use_map_normal",f),C=B("use_map_mirror",f),n=B("use_stencil",f);d=q[0];c=c[0];k=k[0];C=C[0];q=q[1];f=n[0]&&B("use_rgb_to_intensity",f)[0];if(d){h=d.texture;switch(d.blend_type){case "MIX":A(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":A(a,"TEXTURE_BLEND_TYPE",
"TEXTURE_BLEND_TYPE_MULTIPLY")}z=aa.kf(d);R(a,z,"u_colormap0",h.name);a.Do=d.diffuse_color_factor;d.use_map_alpha?a.Hk=d.alpha_factor:a.Hk=0;a.wi.set(d.scale)}n=d&&d==c;c&&(n||(h=c.texture,z=aa.kf(c),R(a,z,"u_specmap0",h.name)),a.us=c.specular_color_factor);if(k&&(h=k.texture,K(a,"a_tbn"),z=aa.kf(k),R(a,z,"u_normalmap0",h.name),a.Qr=k.normal_factor,h.b4w_use_map_parallax&&Q.vB)){var z=Z.fa(h.b4w_parallax_steps),H=Z.fa(h.b4w_parallax_lod_dist);A(a,"PARALLAX",1);A(a,"PARALLAX_STEPS",z);A(a,"PARALLAX_LOD_DIST",
H);a.Vr=h.b4w_parallax_scale}C&&(h=C.texture,z=aa.kf(C),R(a,z,"u_mirrormap",h.name),a.mp=C.mirror_factor);if(C=d&&q&&f?1:0)z=aa.kf(q),h=q.texture,R(a,z,"u_colormap1",h.name),z=aa.kf(f),h=f.texture,R(a,z,"u_stencil0",h.name);(h=d||c||k)&&a.wi.set(h.scale);A(a,"TEXTURE_SPEC",void 0==c?0:1);A(a,"ALPHA_AS_SPEC",n?1:0);A(a,"TEXTURE_STENCIL_ALPHA_MASK",C);K(a,"a_position");K(a,"a_tbn");(d||c||k)&&K(a,"a_texcoord");if(b.ma.Zj){a.nj=!0;a.water_dynamic=b.ma.ea;b.ma.Xf&&!a.xb?(ia.warn('Material: "'+b.name+
'" is opaque.',"Disabling water shore smoothing."),a.Xw=!1):a.Xw="REFLECT"!=a.Ib?b.ma.Xf:!1;G(a,"water.glslv","water.glslf");C=ba.dF(b.dd,{Nc:!1,Kf:b.Kf,Yf:b.Yf,zf:b.zf});a.qb.Rf=ba.tu(C);K(a,"a_position");Q.uT?(K(a,"a_polyindex"),a.Za=!0,ra.set(0,0,0,a.wireframe_edge_color),ma.hG()?A(a,"DEBUG_WIREFRAME",1):A(a,"DEBUG_WIREFRAME",2)):A(a,"DEBUG_WIREFRAME",0);n=b.Ah;C=B("use_map_normal",n);z=B("use_map_mirror",n)[0];C.length&&(h=C[0].texture,R(a,aa.kf(C[0]),"u_normalmap0",h.name),a.gt=b.ma.kB);A(a,
"NUM_NORMALMAPS",C.length);a.Dl=Array(C.length);for(h=0;h<C.length;h++)a.Dl[h]=new Float32Array(2),a.Dl[h].set([C[h].scale[0],C[h].scale[1]]);z&&(H=aa.kf(z),h=z.texture,R(a,H,"u_mirrormap",h.name),a.mp=z.mirror_factor);z=null;if(Q.Su)for(h=0;h<n.length;h++){var m=n[h];if(!0===m.texture.b4w_water_foam){z=m;break}}z&&(A(a,"FOAM",1),H=aa.kf(z),h=z.texture,R(a,H,"u_foam",h.name),a.Qi=b.ma.Qi,a.xz.set(h.b4w_foam_uv_freq),a.wz.set(h.b4w_foam_uv_magnitude),a.Tu[0]=z.scale[0],a.Tu[1]=z.scale[1]);for(h=0;h<
n.length;h++)if(m=n[h],!0===m.texture.b4w_shore_dist_map){var y=m;break}y&&Q.Vx&&(n=aa.kf(y),h=y.texture,R(a,n,"u_shore_dist_map",h.name),A(a,"SHORE_PARAMS",1),y=m.texture.b4w_shore_boundings,A(a,"MAX_SHORE_DIST",Z.fa(m.texture.b4w_max_shore_dist)),A(a,"SHORE_MAP_SIZE_X",Z.fa(y[0]-y[1])),A(a,"SHORE_MAP_SIZE_Y",Z.fa(y[2]-y[3])),A(a,"SHORE_MAP_CENTER_X",Z.fa((y[0]+y[1])/2)),A(a,"SHORE_MAP_CENTER_Y",Z.fa((y[2]+y[3])/2)));b.ma.zA?(A(a,"GENERATED_MESH",1),a.CD=!0,a.DD=b.ma.lB,a.ED=b.ma.mB,a.BD=b.ma.az):
(K(a,"a_tbn"),(z||C.length)&&K(a,"a_texcoord"),A(a,"GENERATED_MESH",0));if(b.ma.ea){var m=Z.fa(b.ma.dst_noise_scale0),y=Z.fa(b.ma.dst_noise_scale1),C=Z.fa(b.ma.dst_noise_freq0),n=Z.fa(b.ma.dst_noise_freq1),h=Z.fa(b.ma.dir_min_shore_fac),z=Z.fa(b.ma.dir_freq),H=Z.fa(b.ma.dir_noise_scale),p=Z.fa(b.ma.dir_noise_freq),u=Z.fa(b.ma.dir_min_noise_fac),D=Z.fa(b.ma.dst_min_fac),ha=Z.fa(b.ma.waves_hor_fac);A(a,"DST_NOISE_SCALE_0",m);A(a,"DST_NOISE_SCALE_1",y);A(a,"DST_NOISE_FREQ_0",C);A(a,"DST_NOISE_FREQ_1",
n);A(a,"DIR_MIN_SHR_FAC",h);A(a,"DIR_FREQ",z);A(a,"DIR_NOISE_SCALE",H);A(a,"DIR_NOISE_FREQ",p);A(a,"DIR_MIN_NOISE_FAC",u);A(a,"DST_MIN_FAC",D);A(a,"WAVES_HOR_FAC",ha)}P(a,b);N(a,b);a.ks.set(b.ma.iC);a.ms.set(b.ma.lC);a.ls=b.ma.jC;a.ns=b.ma.mC;A(a,"ABSORB",Z.fa(b.ma.Ux));A(a,"SSS_STRENGTH",Z.fa(b.ma.JC));A(a,"SSS_WIDTH",Z.fa(b.ma.KC))}"HALO"===b.type&&(G(a,"halo.glslv","halo.glslf"),r(a,b),a.Uk=["a_position"]);b.zf&&(A(a,"USE_TBN_SHADING",1),K(a,"a_shade_tangs"));A(a,"TEXCOORD",0);A(a,"NORMAL_TEXCOORD",
0);d&&g(a,d,"TEXTURE_COLOR0_CO");q&&g(a,q,"TEXTURE_COLOR1_CO");f&&g(a,f,"TEXTURE_STENCIL_ALPHA_MASK_CO");c&&g(a,c,"TEXTURE_SPEC_CO");k&&g(a,k,"TEXTURE_NORM_CO");A(a,"SHADELESS",b.Nc?1:0);a.Nc=b.Nc}A(a,"ALPHA","OPAQUE"===b.ub?0:1);A(a,"ALPHA_CLIP","CLIP"===b.ub?1:0);A(a,"DOUBLE_SIDED_LIGHTING",b.Qs?1:0);b.Pw?(A(a,"VERTEX_COLOR",1),K(a,"a_color")):A(a,"VERTEX_COLOR",0);a.af=b.af;a.rg=b.rg;a.gf=b.gf;a.Fg.set(b.Fg);a.Eg=b.Eg;P(a,b);N(a,b);b.sv?A(a,"WETTABLE",1):A(a,"WETTABLE",0);v(a,b);b.fp&&!a.xb?(ia.warn('Material "'+
b.name+'" is not blend. Disabling refractions.'),a.Gl=!1):a.Gl=b.fp;a.si=b.si}c=!0}break;case "NODES_GLOW":c=M(a,b,d,"GLOW");break;case "SHADOW":if(b.Yj||b.ma.Zj||b.ef||"HALO"==b.type)c=!1;else if(e(a,b),a.Na=b.Na,a.xb)c=!1;else{!b.Ch||"CLIP"!=b.ub&&"ALPHA_ANTIALIASING"!=b.ub?G(a,"shadow.glslv","shadow.glslf"):M(a,b,d,"SHADOW");a.Za=a.Za&&!(Q.ds&&"ALPHA_ANTIALIASING"==b.ub);ya.set(0,0,0,b.alpha,a.jd);K(a,"a_position");K(a,"a_tbn");A(a,"ALPHA","OPAQUE"===b.ub?0:1);a.wi.set([1,1,1]);d=B("use_map_color_diffuse",
b.Ah)[0];if(!d||"CLIP"!=b.ub&&"ALPHA_ANTIALIASING"!=b.ub)A(a,"TEXTURE_COLOR",0);else{switch(d.blend_type){case "MIX":A(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":A(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.wi.set(d.scale);A(a,"TEXTURE_COLOR",1);K(a,"a_texcoord");b=aa.kf(d);d=d.texture;"IMAGE"!=b.source&&"ENVIRONMENT_MAP"!=b.source&&"CANVAS"!=b.source&&"NONE"!=b.source||R(a,b,"u_colormap0",d.name)}c=!0}break;case "PHYSICS":d=b.Td;b=b.ma;d.Ps?(a.tk=d.tk,a.Ub=
d.Ub,a.Ej=d.Ej,a.Dj=d.Dj,a.Fj=d.Fj,a.Uh=d.Uh,a.Ph=d.Ph,c=!0):b.Zj?(a.nj=!0,a.L6=b.ea,a.dst_noise_scale0=b.dst_noise_scale0,a.dst_noise_scale1=b.dst_noise_scale1,a.dst_noise_freq0=b.dst_noise_freq0,a.dst_noise_freq1=b.dst_noise_freq1,a.dir_min_shore_fac=b.dir_min_shore_fac,a.dir_freq=b.dir_freq,a.dir_noise_scale=b.dir_noise_scale,a.dir_noise_freq=b.dir_noise_freq,a.dir_min_noise_fac=b.dir_min_noise_fac,a.dst_min_fac=b.dst_min_fac,a.waves_hor_fac=b.waves_hor_fac,c=!0):c=!1;break;case "COLOR_ID":if(b.Yj||
"HALO"==b.type)c=!1;else{k=c=b.ub;"ALPHA_ANTIALIASING"==k&&(k="CLIP",b.ub="CLIP");e(a,b);a.Na=b.Na;a.cg=!1;a.Za=!0;a.xb=!1;a.rj=b.Il&&"OPAQUE"!=k&&"CLIP"!=k;b.Ch&&"CLIP"==k?M(a,b,d,"COLOR_ID"):G(a,"color_id.glslv","color_id.glslf");ya.set(0,0,0,b.alpha,a.jd);K(a,"a_position");A(a,"ALPHA","OPAQUE"===k?0:1);a.wi.set([1,1,1]);d=B("use_map_color_diffuse",b.Ah)[0];A(a,"ALPHA_CLIP","CLIP"===k?1:0);if(d&&"CLIP"==k){switch(d.blend_type){case "MIX":A(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;
case "MULTIPLY":A(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.wi.set(d.scale);A(a,"TEXTURE_COLOR",1);K(a,"a_texcoord");k=aa.kf(d);d=d.texture;"IMAGE"!=k.source&&"ENVIRONMENT_MAP"!=k.source&&"CANVAS"!=k.source&&"NONE"!=k.source||R(a,k,"u_colormap0",d.name)}else A(a,"TEXTURE_COLOR",0);b.ub=c;c=!0}break;case "GRASS_MAP":!b.pk.zr||b.ef?c=!1:(e(a,b),a.Na=b.Na,a.xb=!1,a.cg=!1,a.Za=!0,G(a,"grass_map.glslv","grass_map.glslf"),K(a,"a_position"),d=b.pk.Nu?b.pk.Nu:null,b=b.pk.Mu?b.pk.Mu:null,a.nd.a_grass_size=
{Po:!0,src:[]},d?(a.nd.a_grass_size.src.push({name:d,fi:4}),A(a,"DYNAMIC_GRASS_SIZE",1)):A(a,"DYNAMIC_GRASS_SIZE",0),a.nd.a_grass_color={Po:!0,src:[]},b?(a.nd.a_grass_color.src.push({name:b,fi:7}),A(a,"DYNAMIC_GRASS_COLOR",1)):A(a,"DYNAMIC_GRASS_COLOR",0),A(a,"GRASS_TEXTURE_SIZE",Z.fa(Va.gv)),c=!0);break;case "DEBUG_VIEW":c=l(a,b);break;case "PARTICLES":a:if(b.ef)c=!1;else{c=b.Ah;if(a.hv)G(a,"particle_system.glslv","particle_system_stack.glslf"),A(a,"HALO_PARTICLES",1),r(a,b);else{k={Nc:!1,Kf:b.Kf,
Yf:b.Yf,zf:b.zf};if(b.Ch){G(a,"particle_system.glslv","particle_system.glslf");M(a,b,d,"PARTICLES");c=!0;break a}G(a,"particle_system.glslv","particle_system_stack.glslf");d=ba.dF(b.dd,k);a.qb.Rf=ba.tu(d);if(d=B("use_map_color_diffuse",c)[0]){A(a,"TEXTURE_COLOR",1);switch(d.blend_type){case "MIX":A(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":A(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.Do=d.diffuse_color_factor;d.use_map_alpha?a.Hk=d.alpha_factor:a.Hk=0;R(a,
aa.kf(d),"default"+String(a.xa.length),d.texture.name)}}a.jd.set(b.jd);a.jd[3]=b.alpha;a.af=b.af;a.rg=b.rg;a.gf=b.gf;a.Fg.set(b.Fg);a.Eg=b.Eg;K(a,"a_position");K(a,"a_tbn");A(a,"ALPHA","OPAQUE"===b.ub?0:1);A(a,"ALPHA_CLIP","CLIP"===b.ub?1:0);A(a,"PARTICLES_SHADELESS",b.Nc?1:0);P(a,b);N(a,b);e(a,b);a.Na=b.Na;a.rj=b.Il&&"OPAQUE"!=b.ub&&"CLIP"!=b.ub&&"ALPHA_ANTIALIASING"!=b.ub;a.Sd=b.Sd;c=!0}break;default:J.K("Wrong batch type: "+a.type)}return c}function r(a,b){var d=b.kr;A(a,"NUM_RINGS",d.OB);A(a,
"NUM_LINES",d.MA);A(a,"NUM_STARS",d.MC);A(a,"SKY_STARS",d.DA?1:0);a.mA=d.size;a.jA=d.iv/20;a.lA.set(d.PB);a.kA.set(d.OA);a.nA=1/d.NC;a.oA=d.OC;a.iA=!0}function g(a,b,d){switch(b.texture_coords){case "UV":case "ORCO":A(a,d,"TEXTURE_COORDS_UV_ORCO");A(a,"TEXCOORD",1);break;case "NORMAL":A(a,d,"TEXTURE_COORDS_NORMAL");A(a,"NORMAL_TEXCOORD",1);break;default:A(a,d,"TEXTURE_COORDS_NONE")}}function e(a,b){switch(b.ub){case "ALPHA_ANTIALIASING":a.xb=!1;a.cg=!1;a.Za=!0;a.Gk=!1;a.gg=!0;break;case "ALPHA_SORT":a.xb=
!0;a.cg=!0;a.Za=!0;a.Gk=!1;a.gg=!1;break;case "ALPHA":a.xb=!0;a.cg=!1;a.Za=!0;a.Gk=!1;a.gg=!1;break;case "CLIP":a.xb=!1;a.cg=!1;a.Za=!0;a.Gk=!0;a.gg=!1;break;case "ADD":a.xb=!0;a.cg=!1;a.Za=!1;a.Gk=!1;a.gg=!1;break;case "OPAQUE":a.xb=!1;a.cg=!1;a.Za=!0;a.Gk=!1;a.gg=!1;break;default:J.K("Unknown alpha blend mode: "+b.ub)}}function B(a,b){for(var d=[],c=b.length,f=0;f<c;f++){var e=b[f];1==e[a]&&e.texture&&e.texture.J&&d.push(e)}return d}function v(a,b){var d=b.Ap;a.pi=d.pi;a.Mo[0]=d.Xu;a.Mo[1]=1-d.Yu/
5}function P(a,b){var d,c=0;switch(b.Yf){case "PHONG":case "COOKTORR":d=b.Gp;break;case "WARDISO":d=b.EC;break;case "TOON":d=b.FC;c=b.GC;break;case "BLINN":d=b.DC;c=b.Gp;break;default:ia.error("unsupported specular shader: "+b.Yf+' (material "'+b.name+'")'),d=b.Gp}a.tn[0]=b.vw;a.tn[1]=d;a.tn[2]=c}function N(a,b){switch(b.Kf){case "LAMBERT":a.de[0]=0;a.de[1]=0;break;case "OREN_NAYAR":a.de[0]=b.QB;a.de[1]=0;break;case "FRESNEL":a.de[0]=b.bz;a.de[1]=b.cz;break;case "MINNAERT":a.de[0]=b.Uy;a.de[1]=0;
break;case "TOON":a.de[0]=b.dz;a.de[1]=b.ez;break;default:ia.error("unsupported diffuse shader: "+b.Kf+' (material "'+b.name+'")'),a.de[0]=0,a.de[1]=0}}function M(a,b,d,c){if(!b.Ch||b.ef)return!1;var f;switch(c){case "MAIN":G(a,"main.glslv","main.glslf");f=!1;break;case "GLOW":G(a,"main.glslv","main.glslf");f=!0;break;case "SHADOW":G(a,"shadow.glslv","shadow.glslf");f=!1;break;case "COLOR_ID":G(a,"color_id.glslv","color_id.glslf"),f=!1}d=ba.nM(b.te,b.dd,c,{pJ:d.active_vcol_name,oJ:d.active_uv_name});
if(!d.Da)return ia.error('Failed to create node graph for material "'+b.name+'", disable nodes'),D(a,b),!0;a.Pe=d.id;a.Uj=!0;A(a,"NODES",1);A(a,"DOUBLE_SIDED_LIGHTING",b.Qs?1:0);K(a,"a_position");b.qD&&K(a,"a_orco_tex_coord");e(a,b);a.Na=b.Na;a.Sd=b.Sd;f?(A(a,"ALPHA",1),A(a,"ALPHA_CLIP",0)):(A(a,"ALPHA","OPAQUE"===b.ub?0:1),A(a,"ALPHA_CLIP","CLIP"===b.ub?1:0));a.rj=b.Il&&"OPAQUE"!=b.ub&&"CLIP"!=b.ub&&"ALPHA_ANTIALIASING"!=b.ub;a.gf=b.gf;a.af=b.af;v(a,b);b.sv?A(a,"WETTABLE",1):A(a,"WETTABLE",0);var g=
null,z=!1;ea.ka(d.Da,function(d,c){switch(c.type){case "UVMAP":case "TEX_COORD_UV":case "GEOMETRY_UV":case "UV_MERGED":var f=c.data.name,e=c.data.value;a.uk||(a.uk={});a.uk[e]=f;break;case "GEOMETRY_VC":case "GEOMETRY_VC1":case "GEOMETRY_VC2":case "GEOMETRY_VC3":f=c.data.name;a.nd[f]={Po:!0,src:[{name:c.data.value}]};e=0;if("GEOMETRY_VC"==c.type)e=7;else for(var h=0;h<c.outputs.length;h++){var q="RGB".indexOf(c.outputs[h].identifier);-1<q&&(e|=1<<2-q)}a.nd[f].src[0].fi=e;break;case "TEX_COORD_NO":case "TEX_COORD_RE":case "GEOMETRY_NO":case "FRESNEL":case "LAYER_WEIGHT":K(a,
"a_tbn");break;case "TEX_COORD_OB":A(a,"USE_MODEL_TSR_INVERSE",1);break;case "TEX_COORD_WI":A(a,"USE_POSITION_CLIP",1);break;case "MATERIAL_BEGIN":c.data.value.zf&&(A(a,"USE_TBN_SHADING",1),"PARTICLES"!=a.type&&K(a,"a_shade_tangs"));K(a,"a_tbn");z=!0;break;case "BSDF_BEGIN":z=!0;K(a,"a_tbn");break;case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_CUBE":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":f=c.data.name;e=c.data.bu;h=c.data.value;R(a,h,f,e);break;case "TEXTURE_NORMAL":case "B4W_PARALLAX":A(a,
"CALC_TBN_SPACE",1);K(a,"a_tbn");c.data&&(f=c.data.name,e=c.data.bu,h=c.data.value,R(a,h,f,e));break;case "NORMAL_MAP":K(a,"a_tbn");switch(Number(c.jb[0][1])){case ba.FU:A(a,"CALC_TBN_SPACE",1);break;case ba.EU:case ba.DU:A(a,"USE_MODEL_TSR",1)}break;case "LAMP":c.data&&(a.hp=c.data);break;case "B4W_REFRACTION":a.xb?a.Gl=!0:(a.Gl=!1,ia.warn('Material "'+b.name+'" is not blend. Disabling refractions.'));A(a,"USE_POSITION_CLIP",1);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":g||(g=c.data.Xa);
break;case "PARTICLE_INFO":"PARTICLES"==a.type&&c.data&&(a.Mv=c.data);break;case "VECT_TRANSFORM":switch(Number(c.jb[1][1])){case ba.vK:A(a,"USE_MODEL_TSR_INVERSE",1);break;case ba.uK:A(a,"USE_VIEW_TSR",1);break;case ba.tK:A(a,"USE_MODEL_TSR",1);break;case ba.sK:A(a,"USE_MODEL_TSR",1);A(a,"USE_VIEW_TSR",1);break;case ba.rK:A(a,"USE_VIEW_TSR_INVERSE",1);break;case ba.qK:A(a,"USE_MODEL_TSR_INVERSE",1),A(a,"USE_VIEW_TSR_INVERSE",1)}break;case "OBJECT_INFO":A(a,"USE_MODEL_TSR",1);a.Sr[1]=b.fk;a.Sr[2]=
Math.random();break;case "B4W_VECTOR_VIEW":case "GEOMETRY_VW":A(a,"USE_VIEW_TSR",1);break;case "B4W_REFLECT":A(a,"USE_VIEW_TSR_INVERSE",1);break;case "BUMP":case "DISPLACEMENT_BUMP":K(a,"a_tbn");ma.hG()?A(a,"USE_DERIVATIVES_EXT",1):ia.warn('"OES_standard_derivatives" extension is not available. Disabling the BUMP node in the "'+b.name+'" material.');break;case "BSDF_TRANSPARENT":a.xb=!0;a.Gl=!0;break;case "BSDF_GLOSSY":case "BSDF_DIFFUSE":A(a,"USE_BSDF_SKY_DIM",1),ma.rO()&&A(a,"USE_TEXTURE_LOD_EXT",
1)}});g&&R(a,g,"u_nodes_texture");z||(a.Nc=!0);f=a.qb.Rf=ba.tu(d.Da);I(d.Da,a);d=a.li;c=a.ki;for(var h=0;h<f.length;h++){var q=f[h];switch(q.id){case "VALUE":var l=q.Wr[0];if(l)for(var k=0;k<d.length;k+=3)if(d[k]==l){q.jb.push(["VALUE_ROW_IND",d[k+1]]);q.jb.push(["VALUE_COL_IND",d[k+2]]);break}break;case "RGB":if(l=q.Wr[0])for(k=0;k<c.length;k+=2)if(c[k]==l){q.jb.push(["RGB_IND",c[k+1]]);break}}}A(a,"NUM_VALUES",a.bj.length/4);A(a,"NUM_RGBS",a.Qe.length);return!0}function p(a,b){var d=b.J.On;if(""!=
d.Pe){a.Uj=!0;a.Pe=d.Pe;var c=ba.Sz(d.Pe).Da;if(c){var f=null;ea.ka(c,function(b,d){switch(d.type){case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":R(a,d.data.value,d.data.name,d.data.bu);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":f||(f=d.data.Xa);break;case "VECT_TRANSFORM":switch(Number(d.jb[1][1])){case ba.vK:A(a,"USE_MODEL_TSR_INVERSE",1);break;case ba.uK:A(a,"USE_VIEW_TSR",1);break;case ba.tK:A(a,"USE_MODEL_TSR",1);break;case ba.sK:A(a,
"USE_MODEL_TSR",1);A(a,"USE_VIEW_TSR",1);break;case ba.rK:A(a,"USE_VIEW_TSR_INVERSE",1);break;case ba.qK:A(a,"USE_MODEL_TSR_INVERSE",1),A(a,"USE_VIEW_TSR_INVERSE",1)}break;case "B4W_VECTOR_VIEW":A(a,"USE_VIEW_TSR",1);break;case "B4W_REFLECT":A(a,"USE_VIEW_TSR_INVERSE",1)}});f&&R(a,f,"u_nodes_texture");d=a.qb.Rf=ba.tu(c);I(c,a);for(var c=a.li,e=a.ki,g=0;g<d.length;g++){var z=d[g];switch(z.id){case "VALUE":var h=z.Wr[0];if(h)for(var q=0;q<c.length;q+=3)if(c[q]==h){z.jb.push(["VALUE_ROW_IND",c[q+1]]);
z.jb.push(["VALUE_COL_IND",c[q+2]]);break}break;case "RGB":if(h=z.Wr[0])for(q=0;q<e.length;q+=2)if(e[q]==h){z.jb.push(["RGB_IND",e[q+1]]);break}}}A(a,"NUM_VALUES",a.bj.length/4);A(a,"NUM_RGBS",a.Qe.length)}else ia.error('Failed to create node graph for world "'+b.world.name+'", disable nodes'),D(a,b.world.name)}}function I(a,b){var d=[],c=[],f=[],e=[];y(a,d,c,f,e);b.bj=d;b.li=c;b.Qe=f;b.ki=e}function y(a,b,d,c,f){ea.ka(a,function(a,e){if("VALUE"==e.type){var g=""+e.name;b.push(e.outputs[0].Qa);var z=
d.length/3;d.push(g,parseInt(z/4),parseInt(z%4))}else"RGB"==e.type&&(g=""+e.name,z=e.outputs[0].Qa.slice(0,3),c.push(z[0],z[1],z[2]),f.push(g,f.length/2))});a=b.length+4-b.length%4;for(var e=b.length;e<a;e++)b.push(0)}function D(a,b){switch(a.type){case "SHADOW":G(a,"shadow.glslv","shadow.glslf");break;case "COLOR_ID":G(a,"color_id.glslv","color_id.glslf");break;default:G(a,"main.glslv","main_stack.glslf")}A(a,"SHADELESS",1);K(a,"a_position");K(a,"a_tbn");ya.set(1,0,1,1,a.jd);b&&(A(a,"ALPHA","OPAQUE"===
b.ub?0:1),A(a,"ALPHA_CLIP","CLIP"===b.ub?1:0),A(a,"VERTEX_COLOR",0),a.Sd=b.Sd,e(a,b),a.Na=b.Na);return!0}function l(a,b){if(b&&(b.Yj||b.ef))return!1;G(a,"debug_view.glslv","debug_view.glslf");K(a,"a_position");K(a,"a_tbn");K(a,"a_polyindex");a.Za=!0;ra.set(0,0,0,a.wireframe_edge_color);return!0}function u(a,b){a.Le=b.Le;if("PHYSICS"!==a.type){"DYNAMIC"==b.type||"COLOR_ID"==a.type?(b.Qm?A(a,"AU_QUALIFIER","GLSL_IN"):A(a,"AU_QUALIFIER","uniform"),A(a,"STATIC_BATCH",0)):(A(a,"AU_QUALIFIER","GLSL_IN"),
A(a,"STATIC_BATCH",1));"DEBUG_VIEW"==a.type&&(ma.hG()?A(a,"WIREFRAME_QUALITY",1):A(a,"WIREFRAME_QUALITY",0),a.$k?(A(a,"DEBUG_SPHERE",1),a.Xy?A(a,"DEBUG_SPHERE_DYNAMIC",1):A(a,"DEBUG_SPHERE_DYNAMIC",0)):A(a,"DEBUG_SPHERE",0),A(a,"ALPHA",1));b.$f&&"PARTICLES"!=a.type&&!b.Qm&&(a.$f=b.$f);b.Bf?(""!==b.yl?(a.nd.a_bending_col_main={Po:!0,src:[{name:b.yl,fi:4}]},K(a,"a_bending_col_main"),""!==b.Jf.MG&&""!==b.Jf.LG&&""!==b.Jf.uH?(a.nd.a_bending_col_detail={Po:!0,src:[{name:b.Jf.MG,fi:4},{name:b.Jf.LG,fi:2},
{name:b.Jf.uH,fi:1}]},K(a,"a_bending_col_detail"),K(a,"a_tbn"),A(a,"DETAIL_BEND",1)):A(a,"DETAIL_BEND",0),A(a,"MAIN_BEND_COL",1)):A(a,"MAIN_BEND_COL",0),b.ko?A(a,"BEND_CENTER_ONLY",1):A(a,"BEND_CENTER_ONLY",0),A(a,"WIND_BEND",1)):A(a,"WIND_BEND",0);A(a,"BILLBOARD_PRES_GLOB_ORIENTATION",b.Yt|0);b.Kh?A(a,"BILLBOARD",1):A(a,"BILLBOARD",0);b.Kh&&b.Qm?A(a,"HAIR_BILLBOARD",1):A(a,"HAIR_BILLBOARD",0);b.Zt?A(a,"BILLBOARD_SPHERICAL",1):A(a,"BILLBOARD_SPHERICAL",0);switch(b.$t){case "RANDOM":A(a,"BILLBOARD_RANDOM",
1);A(a,"BILLBOARD_JITTERED",0);break;case "JITTERED":A(a,"BILLBOARD_RANDOM",0);A(a,"BILLBOARD_JITTERED",1);break;default:A(a,"BILLBOARD_RANDOM",0),A(a,"BILLBOARD_JITTERED",0)}b.kd&&Q.Vx?A(a,"DYNAMIC_GRASS",1):A(a,"DYNAMIC_GRASS",0);a.kd=b.kd;"PARTICLES"!=a.type&&(a.ff=b.ff);a.Wf=b.Wf;a.vf=b.vf;a.ze=b.ze&&!a.Nc&&!(a.xb&&Q.xF);Q.hw?("MAIN"==a.type&&a.ze||"SHADOW"==a.type)&&A(a,"RGBA_SHADOWS",1):A(a,"RGBA_SHADOWS",0);a.Se=b.Se;a.xe=b.xe;a.Ad=b.Ad;a.Sr[0]=b.fk;a.mh=b.mh;a.nh=b.nh;a.wl=b.wl;a.xl=b.xl;
a.Ke=b.Ke;a.ue=b.ue;b.Tm?(K(a,"a_influence"),A(a,"SKINNED",1),Q.pC?(A(a,"DISABLE_TANGENT_SKINNING",1),A(a,"FRAMES_BLENDING",0)):(A(a,"DISABLE_TANGENT_SKINNING",0),b.Lo?A(a,"FRAMES_BLENDING",1):A(a,"FRAMES_BLENDING",0)),A(a,"MAX_BONES",b.$i)):(A(a,"SKINNED",0),A(a,"FRAMES_BLENDING",0),A(a,"DISABLE_TANGENT_SKINNING",0));b.Gd?(A(a,"VERTEX_ANIM",1),Q.lT?A(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR",.5):A(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR","u_va_frame_factor")):A(a,"VERTEX_ANIM",0);b.Tm&&b.Gd&&J.K("Skinning and vertex animation are mutually exlusive")}}
function L(a,b,d){if(b.length){for(var c=da.Xz(b,Q.ssao&&d.b4w_enable_ssao),f=a.qb,e=a.hp,g=0,h=0;h<a.qb.Rf.length;h++){var z=a.qb.Rf[h];if("LIGHTING_LAMP"==z.id){var q=b[g++%b.length],l=q.xd,k=da.La(q,d);if("SPOT"==l.type||"POINT"==l.type)var G=Math.cos(l.ws/2);if("SPOT"==l.type)var J=l.IC*(1-G);q=c.indexOf(q);z.jb=[["LAMP_TYPE",l.type],["LAMP_IND",k.Av],["LAMP_SPOT_SIZE",Z.fa(G||.01)],["LAMP_SPOT_BLEND",Z.fa(J||.01)],["LAMP_LIGHT_DIST",Z.fa(l.distance)],["LAMP_USE_SPHERE",l.nJ?1:0],["LAMP_SHADOW_MAP_IND",
q]]}else if("LAMP"==z.id&&e)for(var k=z.jb[0][1],C=0;C<b.length;C++)if(q=b[C],e[q.dd]==k){l=q.xd;if("SPOT"==l.type||"POINT"==l.type)G=Math.cos(l.ws/2);"SPOT"==l.type&&(J=l.IC*(1-G));z.jb.push(["LAMP_TYPE",l.type],["LAMP_SPOT_SIZE",Z.fa(G||.01)],["LAMP_SPOT_BLEND",Z.fa(J||.01)],["LAMP_LIGHT_DIST",Z.fa(l.distance)],["LAMP_USE_SPHERE",l.nJ?1:0])}}if(e){d=0;for(var n in e)d++;a.Dr=new Float32Array(3*d);a.vv=new Float32Array(3*d);a.uv=new Float32Array(3*d);Z.wa(f,"NUM_LAMP_LIGHTS",d);for(h=0;h<b.length;h++)F(a,
b[h])}}}function F(a,b){if(b.dd in a.hp){var d=a.hp[b.dd],c=za.X(b.A.D);a.Dr.set(c,3*d);a.vv.set(b.xd.direction,3*d);a.uv.set(b.xd.ru,3*d)}}function U(a,b){for(var d=0;d<b.length;d++){var c=b[d].settings.b4w_vcol_from_name,f=b[d].settings.b4w_vcol_to_name;""!==c&&""!==f&&(a.nd[c]={Po:!1,src:[{name:c,fi:7}]})}}function K(a,b){var d=a.Uk;-1==d.indexOf(b)&&d.push(b);a.Uk=d.sort()}function A(a,b,d){Z.wa(a.qb,b,d)}function E(a,b){if("PHYSICS"==a.type)"NAVMESH"==a.Ib?a.Pa=ha.mS(b,ha.$p,[]):(0<b.Gb.length&&
ha.i5(b,b.sa[0]),a.Be=b);else{var d=a.Lj;a.iA&&"PARTICLES"!=a.type&&(b=ha.b_(b));a.CD&&(b=ca.y_(a.DD,a.ED,a.BD));d=ha.mS(b,d,a.nd);a.Pa=d;a.ff||a.cg||a.$f||(d.mf=null,d.Uc.length=0);d=b.sa.length;a.Hv=b.hb*d;var c;a:switch(a.Lj){case ha.$p:case ha.pt:case ha.ex:c=!0;break a;default:c=!1}c?ha.n1(b)?a.qp=b.Ha.length/3*d:a.qp=b.hb/3*d:a.qp=0}}function n(a,b,d,c,e,g,h,q,l,k,G,C){var z=a.Oa,n=[],H=q.b4w_dynamic_grass;if(!k&&H)return n;for(var m="INSTANCE"==q.b4w_wind_bend_inheritance,y="INSTANCE"==q.b4w_shadow_inheritance,
p="INSTANCE"==q.b4w_reflection_inheritance,R=[],v=[],B=0;B<e.length;B++){var D=e[B].Oa.A,E=da.RE(b);E.Kh=q.b4w_hair_billboard;E.$t=q.b4w_hair_billboard_type;E.Zt="SPHERICAL"==q.b4w_hair_billboard_geometry;E.kd=H;E.Qm=!0;m?(E.Bf=D.Bf,E.Vp=D.Vp,E.Pg=D.Pg,E.qg=D.qg,E.yl=D.yl,E.pg=D.pg,E.kg=D.kg,E.Og=D.Og,E.Jf=D.Jf,E.ko=!1):(E.Bf=z.A.Bf,E.Vp=z.A.Vp,E.Pg=z.A.Pg,E.qg=z.A.qg,E.yl=z.A.yl,E.pg=z.A.pg,E.kg=z.A.kg,E.Og=z.A.Og,E.Jf=z.A.Jf,E.ko=!0);y?(E.Wf=D.Wf,E.vf=D.vf,E.ze=D.ze):(E.Wf=z.A.Wf,E.vf=z.A.vf,E.ze=
z.A.ze);p?(E.Se=D.Se,E.xe=D.xe,E.Ad=D.Ad,E.Ke=D.Ke,E.ue=D.ue,E.ri=D.ri):(E.Se=z.A.Se,E.xe=z.A.xe,E.Ad=z.A.Ad,E.Ke=z.A.Ke,E.ue=z.A.ue,E.ri=z.A.ri);R.push(E);var F=h[B];F||(F=new Float32Array);C&&J.vA(l.seed,G);var r=new Float32Array(3),S=new Float32Array([0,0,0,1]),L=[],K=Ja.SL(Q.PG)&&!q.b4w_initial_rand_rotation&&!q.b4w_hair_billboard,N=4;K&&(N=8);for(var va=0;va<F.length;va+=N){r[0]=F[va];r[1]=F[va+1];r[2]=F[va+2];var ba=F[va+3]*za.ge(D.D);if(q.b4w_initial_rand_rotation){switch(q.b4w_rotation_type){case "XYZ":var P=
new Float32Array([J.oi(G),J.oi(G),J.oi(G)]);ra.normalize(P,P);break;case "Z":P=new Float32Array([0,0,1]);break;default:J.K("Unsupported random rotation type: "+q.b4w_rotation_type)}V.setAxisAngle(P,q.b4w_rand_rotation_strength*(2*Math.PI*J.oi(G)-Math.PI),S)}else if(K&&(S.set(F.subarray(va+4,va+8)),J.JH(S,S),!q.use_whole_group))if(q.use_rotation_dupli){var w=za.la(D.D);V.multiply(S,w,S)}else V.multiply(S,Aa,S);var ka=za.ti(r,ba,S,za.create());L.push(ka)}v.push(L)}for(var M={},pa=0,B=0;B<e.length;B++)for(var Da=
e[B].Oa.Ec,va=0;va<Da.length;va++)Da[va].name in M?M[Da[va].name]++:(M[Da[va].name]=1,pa++);for(var pa=pa?pa:1,ta={},B=0;B<e.length;B++){var I=e[B],ea=g[B],E=R[B],Y={};E.Bf&&(Y.au_wind_bending_amp=[E.Og],Y.au_wind_bending_freq=[E.Pg],Y.au_detail_bending_freq=[E.qg],Y.au_detail_bending_amp=[E.pg],Y.au_branch_bending_amp=[E.kg],E.Og=0,E.Pg=0,E.qg=0,E.pg=0,E.kg=0);L=v[B];if(L.length){for(var la=I.data,Da=I.Oa.Ec,ya=Array(Da.length),ca=Array(Da.length),va=0;va<Da.length;va++)if(!qa(z,va)&&!ha.IO(la,va))for(var Ba=
0;Ba<ea.length;Ba++){var O=ea[Ba],ma=t(O),Z=Da[va];"MAIN"==O?ya[va]=ma:"DEBUG_VIEW"==O&&(ca[va]=ma);ma.pu=a.b4w_cluster_data.cluster_id;if(f(ma,Z)&&x(ma,Z,la)){"SHADOW"==O&&ya[va]&&(ma.Nc=ya[va].Nc);ma.Lj=ha.$p;u(ma,E);ma.bn=ja(ma,E,q.uuid);ma.bl=a.b4w_do_not_cull||q.b4w_dynamic_grass;"MAIN"==ma.type&&(ma.fh=a.b4w_caustics);A(ma,"DISABLE_FOG",("COLOR_ID"!=O&&"SHADOW"!=O&&a.b4w_disable_fogging)|0);"JITTERED"==q.b4w_hair_billboard_type&&(ma.EA=q.b4w_hair_billboard_jitter_amp,ma.FA=q.b4w_hair_billboard_jitter_freq);
H&&(ma.cA=q.b4w_dynamic_grass_scale_threshold);m||(delete ma.nd.a_bending_col_main,delete ma.nd.a_bending_col_detail);var sa=ha.rz(la,va,ma.Uk,b.zj,ma.nd,ma.uk),Va=z.A.D,U=!0;if(1<M[Z.name]){var wb=0,kd;for(kd in sa.sa)wb++;U=sa.Ha.length*L.length*wb*M[Z.name]>2E5*pa}var Mc=Q.SK&&U&&"PHYSICS"!=ma.type;if(Mc){ma.WO=q.use_whole_group?2:1;var bb=ha.TX(sa);ha.CL(sa,bb,L);bb.Of={Fw:L,KI:Va,dS:"STATIC"==b.type,QC:Y,Yr:{},iz:H};if(E.Bf&&E.ko){var ua=ra.fromValues(0,0,0);za.Mc(ua,z.A.D,ua);for(var fa=[],
oa=0;oa<L.length;oa++)fa.push(ua[0],ua[1],ua[2]);bb.Of.Yr.a_emitter_center={Sc:3,data:fa}}ha.CL(sa,sa,L);"STATIC"==b.type&&ha.VW(bb.Dd,Va)}else{var aa=bb=ha.a2(sa,Y,L),Qa=L;aa.Ea.au_center_pos=new Float32Array(3*aa.hb);for(var W=Qa.length,xa=aa.hb/W,cb=0;cb<W;cb++)for(var Ia=Qa[cb],Pa=3*xa*cb,wa=0;wa<xa;wa++)aa.Ea.au_center_pos[Pa+3*wa]=Ia[0],aa.Ea.au_center_pos[Pa+3*wa+1]=Ia[1],aa.Ea.au_center_pos[Pa+3*wa+2]=Ia[2];bb=aa;if(E.Bf&&E.ko){var Oa=bb,Ya=z.A.D;Oa.Ea.a_emitter_center=new Float32Array(3*
Oa.hb);var Ea=ra.fromValues(0,0,0);za.Mc(Ea,Ya,Ea);for(var Ga=0;Ga<Oa.hb;Ga++)Oa.Ea.a_emitter_center[3*Ga]=Ea[0],Oa.Ea.a_emitter_center[3*Ga+1]=Ea[1],Oa.Ea.a_emitter_center[3*Ga+2]=Ea[2];bb=Oa}}var Na=q.b4w_vcol_from_name,Fa=q.b4w_vcol_to_name,Ra=ma,Cb=d,Gb=!m,xb=la,ob=[];if(""!==Na&&""!==Fa){var Jb,nd=void 0,Oc=Fa,jb=Ra.nd,Pc=[];for(nd in jb)for(var cc=jb[nd].src,Gc=0,dc=0;dc<cc.length;dc++){var Zc=cc[dc].fi;Oc==cc[dc].name&&Pc.push(nd,Zc,Gc);Gc+=J.Cp(Zc)}Jb=Pc;if(0<Jb.length)for(var Ub=0;Ub<Jb.length;Ub+=
3)ob.push({Ou:Na,kz:7,wB:Jb[Ub],xB:Jb[Ub+1],hz:Jb[Ub+2]});else ha.I0(Ra.Uk,"a_color")&&Fa==xb.active_vcol_name&&ob.push({Ou:Na,kz:7,wB:"a_color",xB:7,hz:0})}Gb&&("a_bending_col_main"in Cb&&ob.push({Ou:"a_bending_col_main",kz:4,wB:"a_bending_col_main",xB:4,hz:0}),"a_bending_col_detail"in Cb&&ob.push({Ou:"a_bending_col_detail",kz:7,wB:"a_bending_col_detail",xB:7,hz:0}));for(var Ob=bb,Db=L,vc=c,mb=ob,Hc=ma.nd,mc=Mc,Qc=!1,Hb=0;Hb<mb.length;Hb++){var Kb=mb[Hb].Ou,wc=vc.Ea[Kb];if(wc&&0<wc.length){Qc=!0;
break}}if(mc)var nc=Ob.Of.Yr;if(Qc){var tb,Pb=z.A.Ca,yb=vc.sa[0].a_position,Eb=Db,Sa=ta,oc=new Float32Array(3),Qb=new Float32Array(3),ec=new Uint32Array(Eb.length);if(!("verts_indices"in Sa)){Sa.Rk=new Float32Array(3);Sa.Lk=new Float32Array(3);Sa.rJ=new Uint32Array(yb.length/3);Sa.Jv=new Uint32Array(yb.length/3);Sa.Rk[0]=(Pb.max_x-Pb.min_x)/20;Sa.Rk[1]=(Pb.max_y-Pb.min_y)/20;Sa.Rk[2]=(Pb.max_z-Pb.min_z)/20;Sa.Lk[0]=Pb.min_x;Sa.Lk[1]=Pb.min_y;Sa.Lk[2]=Pb.min_z;for(var eb=0;eb<yb.length/3;eb++){var Vb=
yb[3*eb+1],xc=yb[3*eb+2],kb=J.trunc((yb[3*eb]-Sa.Lk[0])/Sa.Rk[0]),rd=J.trunc((Vb-Sa.Lk[1])/Sa.Rk[1]),Ic=J.trunc((xc-Sa.Lk[2])/Sa.Rk[2]),kb=J.pa(kb,0,19),rd=J.pa(rd,0,19),Ic=J.pa(Ic,0,19);Sa.rJ[eb]=eb;Sa.Jv[eb]=Ic*Math.pow(20,2)+20*rd+kb}ha.O4(Sa.Jv,Sa.rJ,ha.fE,!0);Sa.Qp=new Uint32Array(Math.pow(20,3));for(eb=0;eb<Sa.Jv.length;eb++)Sa.Qp[Sa.Jv[eb]]++;delete Sa.Jv;for(eb=1;eb<Sa.Qp.length;eb++)Sa.Qp[eb]+=Sa.Qp[eb-1]}for(var fc=0;fc<Eb.length;fc++){oc[0]=Eb[fc][0];oc[1]=Eb[fc][1];oc[2]=Eb[fc][2];for(var Rb=
1E10,Rc=-1,Sc=J.trunc((oc[0]-Sa.Lk[0])/Sa.Rk[0]),Jc=J.trunc((oc[1]-Sa.Lk[1])/Sa.Rk[1]),Kc=J.trunc((oc[2]-Sa.Lk[2])/Sa.Rk[2]),Sc=J.pa(Sc,0,19),Jc=J.pa(Jc,0,19),Kc=J.pa(Kc,0,19),yc=Kc*Math.pow(20,2)+20*Jc+Sc,Bd=Sa.Qp[yc],pb=0==yc?0:Sa.Qp[yc-1];pb<Bd;pb++){var Tc=Sa.rJ[pb];Qb[0]=yb[3*Tc];Qb[1]=yb[3*Tc+1];Qb[2]=yb[3*Tc+2];ra.sub(Qb,oc,Qb);var $c=ra.sqrLen(Qb);$c<=Rb&&(Rb=$c,Rc=Tc)}if(-1==Rc)for(pb=0;pb<yb.length/3;pb++)Qb[0]=yb[3*pb],Qb[1]=yb[3*pb+1],Qb[2]=yb[3*pb+2],ra.sub(Qb,oc,Qb),$c=ra.sqrLen(Qb),
$c<=Rb&&(Rb=$c,Rc=pb);ec[fc]=Rc}tb=ec;for(var sd=Ob.hb/Db.length,Hb=0;Hb<mb.length;Hb++){var La=mb[Hb].wB,hb=mb[Hb].xB,Kb=mb[Hb].Ou,Wb=mb[Hb].kz,wc=vc.Ea[Kb];switch(La){case "a_bending_col_main":var Uc=1;break;case "a_bending_col_detail":Uc=3;break;case "a_color":Uc=3;break;default:for(var gc=Uc=0;gc<Hc[La].src.length;gc++)Uc+=J.Cp(Hc[La].src[gc].fi)}if(wc&&0<wc.length){var zc=J.Cp(Wb),Vd=J.Cp(hb),Od=Wb&hb,Lc=J.RQ(Od);Od!=hb&&ia.error("Wrong color extraction from "+Kb+" to "+La+".");if(mc)for(nc[La]=
{Sc:Uc,data:[]},gc=0;gc<Db.length;gc++)for(Pd=tb[gc],pc=Pd*zc,$b=0;$b<Lc.length;$b++)Lc[$b]&&(td=J.es(Wb,$b),nc[La].data.push(wc[pc+td]));else{if("a_bending_col_main"==La||"a_bending_col_detail"==La)Ob.Ea[La]=new Float32Array(Ob.hb*Vd);for(gc=0;gc<Db.length;gc++){var Pd=tb[gc],pc=Pd*zc,ce=gc*sd*Uc;if(-1!=Pd)for(var ud=0;ud<sd;ud++)for(var Zd=ud*Uc,$b=0;$b<Lc.length;$b++)if(Lc[$b]){var td=J.es(Wb,$b);Ob.Ea[La][ce+Zd+(mb[Hb].hz+J.es(hb,$b))]=wc[pc+td]}}}}else Ob.Ea[La]=new Float32Array(0)}}bb=Ob;A(ma,
"USE_INSTANCED_PARTCLS",bb.Of?1:0);X(ma);n.push({Fa:ma,sh:b,hy:E,Be:bb,hi:[Z.name],Te:[a]})}}for(va=0;va<ca.length;va++)ca[va]&&(ca[va].Tq=ya[va].id,X(ca[va]))}}return n}function f(a,b){var d=!0;"NODES_GLOW"==a.type&&(d=ba.QL(b));return d}function X(a){d(a,function(a){a.id=0;a.id=J.DL(a)})}function d(a,b){for(var d=null,c=null,f=[],e=0;e<a.xa.length;e++){var g=a.xa[e],h=g.Lh;h&&(d||(d={}),d[e]=h,g.Lh=null);if(h=g.tb)c||(c={}),c[e]=h,g.tb=null;f.push(g.eQ);g.eQ=0}g=a.Db;a.Db=null;h=a.ag;a.ag=null;
var q=a.Pa;a.Pa=null;var z=a.Be;a.Be=null;b(a);a.Pa=q;a.Be=z;a.ag=h;a.Db=g;if(d)for(e in d)a.xa[e].Lh=d[e];if(c)for(e in c)a.xa[e].tb=c[e];for(e=0;e<a.xa.length;e++)a.xa[e].eQ=f[e]}function H(a,b,d,c){var f=t("DEBUG_VIEW");G(f,"debug_view.glslv","debug_view.glslf");f.$k=!0;f.Za=!0;f.bn=ja(f,a,b);f.Xy=d;u(f,a);X(f);if(c.In){a=c.Db.ig;var e=ra.create();b=ca.OF(1,e);d=ra.fromValues(ra.length(a.ab),ra.length(a.eb),ra.length(a.fb));ha.WQ(b,d,e);var e=ra.normalize(a.ab,ka),g=ra.normalize(a.eb,Y),h=ra.normalize(a.fb,
ua);!d[0]&&d[1]&&d[2]?ra.cross(g,h,e):!d[1]&&d[0]&&d[2]?ra.cross(h,e,g):!d[2]&&d[0]&&d[1]&&ra.cross(e,g,h);d=J.NZ(e,g,h,W);la.invert(d,d);d=V.fromMat3(d,Pa);za.Gc(d,wa);za.Ue(1,wa);za.Bd(a.V,wa);ha.MI(b,wa)}else a=c.Db.Gf,b=ca.OF(a.pb,a.V);C.tM(c.Db,f.Db);ha.PC(b,1,!0);b.Ea.a_polyindex=ha.qz(b);E(f,b);return f}function G(a,b,d){a.qb.Lg=b;a.qb.jf=d;Z.W3(a.qb)}function R(a,b,d,c){c=c||"";-1==a.Ig.indexOf(d)&&(a.xa.push(b),a.Ig.push(d),a.jg.push(c));a.Hb&&S.iL(a)}function q(a){a.qb||J.K("No shaders info for batch "+
a.name);a.Hb=Z.S_(a.qb);var b=a.qb;if(b.status===Z.pK){var d=a.Hb.attributes,c=a.Pa.cd,f;for(f in d)c[f]||J.K('missing data for "'+f+'" attribute')}b.status&Z.IT&&ia.error("Texture limit exceeded for shader - "+b.jf+', materials: "'+a.Dc.join(", ")+'". Maximum texture count: '+va.YG+", actual texture count: "+b.WC);b.status&Z.HT&&ia.error("Fragment uniform limit exceeded for shader - "+b.jf+', materials: "'+a.Dc.join(", ")+'". ');b.status&Z.LT&&ia.error("Vertex uniform limit exceeded for shader - "+
b.Lg+', materials: "'+a.Dc.join(", ")+'". ');b.status&Z.KT&&ia.error("Vertex attribute limit exceeded for shader - "+b.Lg+', materials: "'+a.Dc.join(", ")+'". Maximum attribute count: '+va.ZG+", actual attribute count: "+b.cy);b.status&Z.JT&&("MAIN"!=a.type||a.Uj||ia.error("Varying limit exceeded for shader - "+a.qb.jf+', materials: "'+a.Dc.join(", ")+'"'),"MAIN"==a.type&&a.Uj||"NODES_GLOW"==a.type)&&(c=d=0,a.uk&&(d=J.nl(a.uk)),a.nd&&(c=J.nl(a.nd)),ia.error("Varying limit exceeded for node shader - "+
a.qb.jf+", uv: "+d+", vc: "+c+', materials: "'+a.Dc.join(", ")+'"'));b.status&Z.ET&&ia.error("Shader compilation/linking error: "+b.Lg+", "+b.jf+', materials: "'+a.Dc.join(", ")+'"');return a.qb.status===Z.pK?(S.FW(a.Hb),S.fL(a),S.iL(a),!0):!1}function ja(a,b,d){return"NAVMESH"==a.Ib?d:b.ff?"_odd_id_"+J.JS():d}function qa(a,b){return 0<=b&&b<a.oh.Zo.length&&a.oh.Zo[b]}var C=w("__boundings"),pa=w("__config"),ia=w("__print"),ma=w("__extensions"),ea=w("__graph"),la=w("__mat3"),ba=w("__nodemat"),da=w("__obj_util"),
xa=w("__particles"),ca=w("__primitives"),V=w("__quat"),Ja=w("__reformer"),S=w("__renderer"),oa=w("__scenegraph"),Z=w("__shaders"),fa=w("__subscene"),aa=w("__textures"),za=w("__tsr"),ha=w("__geometry"),J=w("__util"),ra=w("__vec3"),ya=w("__vec4"),Q=pa.L,va=pa.Ni,Va=pa.fs,Ba=pa.MO,Aa=new Float32Array([0,0,-Math.sqrt(.5),Math.sqrt(.5)]),ka=new Float32Array(3),Y=new Float32Array(3),ua=new Float32Array(3),Pa=new Float32Array(4),wa=za.create(),W=la.create(),Ya={},Ga=new Float32Array(24);a.KW=function(a){return Ya[a]||
null};a.LW=function(a,b){Ya[a]=b};a.PX=c;a.zN=function(a,b,d,c){var f;f=a.J.Da;for(var e=[],g=0;g<b.length;g++){var q=b[g],l=q.Oa;l.ov||e.push.apply(e,h(q,l.A,f))}f=O(e);for(e=0;e<f.length;e++)if(g=f[e].Fa,g.Dc=f[e].hi,E(g,f[e].Be),L(g,d,a),"STATIC"==f[e].A.type&&"COLOR_ID"!=g.type){var q=J.Hw("%meta%"+g.type+"%"+g.Dc.join("%")+"%"),z=da.Au(q,"MESH");da.k2(z,f[e].A);da.Zx(z,a);da.$g(z,a,g);c.push(z);if("MAIN"==g.type)for(l=0;l<f[e].Te.length;l++)q=f[e].Te[l].Oa,q.Dv.push(z)}else q=f[e].Te[0].Oa,da.$g(q,
a,g);if(Q.debug_view){for(e=0;e<f.length;e++)if(d=f[e].A,"DYNAMIC"==d.type&&(q=f[e].Te[0].Oa,g=f[e].Fa,"MAIN"==g.type)){for(var l=da.La(q,a),z=l.da,G=!1,l=0;l<z.length;l++)z[l].$k&&(G=!0);G||(d=H(d,q.name,!0,g),da.$g(q,a,d))}for(e=0;e<c.length;e++)q=c[e],d=q.A,l=da.La(q,a),g=l.da[0],"MAIN"==g.type&&(d=H(d,q.name,!1,g),da.$g(q,a,d));for(e=0;e<f.length;e++)g=f[e].Fa,"DEBUG_VIEW"==g.type&&(g.Vy=e)}for(e=0;e<b.length;e++)for(l=da.La(b[e].Oa,a),z=l.da,l=0;l<z.length;l++)k(z[l]);for(e=0;e<c.length;e++)for(l=
da.La(c[e],a),z=l.da,l=0;l<z.length;l++)k(z[l])};a.pW=function(a,b,d){var f=a.J.On,e=t("MAIN");G(e,"sky.glslv","sky.glslf");e.rl=!0;e.Za=!1;if(b.procedural_skydome)A(e,"PROCEDURAL_SKYDOME",1),e.gz=!0;else{var g=f.Fp,h=oa.cc(a.J.Da,fa.Ye).H.bc;R(e,h,"u_sky");g&&(A(e,"WO_SKYTEX",1),g.invert&&A(e,"MTEX_NEGATIVE",1),g.dT&&A(e,"MTEX_RGBTOINT",1),A(e,"BLENDTYPE",g.wL),g.ZS&&A(e,"WOMAP_BLEND",1),g.$S&&A(e,"WOMAP_HORIZ",1),g.bT&&A(e,"WOMAP_ZENUP",1),g.aT&&A(e,"WOMAP_ZENDOWN",1));f.Lp&&A(e,"WO_SKYBLEND",1);
f.Mp&&A(e,"WO_SKYPAPER",1);f.Np&&A(e,"WO_SKYREAL",1)}b.Se&&(e.Se=!0,b.xe&&(e.xe=!0));K(e,"a_position");b=ca.B_();E(e,b);k(e);e.bl=!0;X(e);da.$g(d,a,e);oa.cc(a.J.Da,fa.Bi)&&(f=c(e),f.type="DEBUG_VIEW",f.Ib="",l(f),A(f,"DEBUG_VIEW_SPECIAL_SKYDOME",1),b.Ea.a_polyindex=ha.qz(b),E(f,b),f.Tq=e.id,X(f),da.$g(d,a,f))};a.Jy=function(a,b,d){var f=da.La(a,d).da,e=[],g=oa.cc(b,fa.Ge),h=oa.cc(b,fa.$d),q=oa.cc(b,fa.Ci);b=oa.cc(b,fa.Df);for(var l=0;l<f.length;l++){var z=f[l],k=null;"SHADOW"==z.type&&"RECEIVE"==
z.Ib&&z.Wf&&(k=c(z),k.Ib="CAST");"MAIN"!=z.type&&"PARTICLES"!=z.type||!g&&!h||!z.Se||(k=c(z),k.Ib="REFLECT",k.Gl=!1,k.cg&&(k.cg=!1,k.Za=!1),k.Ra=z.Ra);"COLOR_ID"==z.type&&q&&a.A.zd&&(b&&a.A.mn?(k=c(z),k.Ib="OUTLINE"):z.Ib="OUTLINE");k&&(k.Th=!0,X(k),e.push(k))}for(f=0;f<e.length;f++)da.$g(a,d,e[f])};a.vT=function(a,b,d){return(b=d*(b.max_z-b.min_z))?.5*(Math.sqrt(2*Math.sqrt(4*b*Math.tan(a)+1)+2)/2-1)/b:0};a.N6=function(a,b,d){b=d*(b.max_z-b.min_z);if(!b)return 0;a=2*b*a;return Math.atan((Math.pow(a+
1,4)-Math.pow(a+1,2))/b)};a.MW=function(a){var b=C.If();b.max_x=a.max_x;b.min_x=a.min_x;b.max_y=a.max_y;b.min_y=a.min_y;b.max_z=a.max_z;b.min_z=a.min_z;return b};a.H5=D;a.G5=L;a.g4=F;a.hL=function(a,b){A(a,"CSM_SECTION1",0);A(a,"CSM_SECTION2",0);A(a,"CSM_SECTION3",0);A(a,"NUM_CAST_LAMPS",0);if(b){A(a,"NUM_CAST_LAMPS",b.Zi.length);Q.UA&&A(a,"MAC_OS_SHADOW_HACK",1);for(var d=1;d<b.csm_num;d++)A(a,"CSM_SECTION"+String(d),1);A(a,"SHADOW_TEX_RES",Z.fa(b.csm_resolution));A(a,"CSM_FADE_LAST_CASCADE",b.fade_last_cascade?
1:0);A(a,"CSM_BLEND_BETWEEN_CASCADES",b.blend_between_cascades&&!Q.VL?1:0)}else A(a,"SHADOW_TEX_RES",0),A(a,"CSM_FADE_LAST_CASCADE",0),A(a,"CSM_BLEND_BETWEEN_CASCADES",0)};a.Vf=A;a.L_=function(a){return Z.Y_(a.qb,"STEPS_PER_PASS")};a.E5=E;a.F5=X;a.X5=function(a,b){a.Db.Ff=C.tE(b,0,b.length,a.Db.Ff);var d=C.jN(a.Db.Ff,Ga);a.Db.ig=C.Gy(d,!0);a.Db.Gf=C.Iy(a.Db.ig);a.In=C.aP(a.Db.ig,a.Db.Gf)};a.ay=G;a.Ji=R;a.u3=function(a,b,d){d=a.Ig.indexOf(d);-1<d&&(a.xa[d]=b)};a.FY=function(a,b){var d=t("MAIN");d.xb=
!0;ya.set(b[0],b[1],b[2],.5,d.jd);d.Lj=ha.pt;E(d,a);G(d,"main.glslv","main_stack.glslf");A(d,"SHADELESS",1);q(d);return d};a.Ed=q;a.yN=function(a,b){for(var d=0;d<b.length;d++){var c=b[d],f=t("LINE");G(f,"line.glslv","line.glslf");f.xb=!0;f.bl=!0;var e=ca.D_();E(f,e);k(f);da.Zx(c,a);da.$g(c,a,f);q(f)}};a.uX=function(a){return a.Hb.Nv.length?a.Hb.AH.u_cube_fog?!0:!1:!1};a.oY=function(){var a=t("DEPTH_PACK");a.Na=!0;a.Za=!1;var b=ca.Md();E(a,b);G(a,"postprocessing/postprocessing.glslv","postprocessing/depth_pack.glslf");
q(a);return a};a.My=function(a){var b=t("POSTPROCESSING");G(b,"postprocessing/postprocessing.glslv","postprocessing/postprocessing.glslf");switch(a){case "NONE":A(b,"POST_EFFECT","POST_EFFECT_NONE");break;case "GRAYSCALE":A(b,"POST_EFFECT","POST_EFFECT_GRAYSCALE");break;case "X_BLUR":case "Y_BLUR":A(b,"POST_EFFECT","POST_EFFECT_BLUR");break;case "X_GLOW_BLUR":case "Y_GLOW_BLUR":case "X_BLOOM_BLUR":case "Y_BLOOM_BLUR":A(b,"POST_EFFECT","POST_EFFECT_GLOW_BLUR");break;case "X_DOF_BLUR":case "Y_DOF_BLUR":A(b,
"POST_EFFECT","POST_EFFECT_DOF_BLUR");break;case "X_ALPHA_BLUR":case "Y_ALPHA_BLUR":A(b,"POST_EFFECT","POST_EFFECT_ALPHA_BLUR");break;case "X_EXTEND":case "Y_EXTEND":A(b,"POST_EFFECT","POST_EFFECT_EXTEND");break;case "FLIP_CUBEMAP_COORDS":A(b,"POST_EFFECT","FLIP_CUBEMAP_COORDS");break;default:J.K("Wrong postprocessing effect: "+a)}A(b,"SHADOW_USAGE","NO_SHADOWS");b.Na=!0;b.Za=!1;a=ca.Md();E(b,a);q(b);return b};a.IY=function(a){var b=t("SSAO");b.Za=!1;b.Na=!0;var d=ca.Md();E(b,d);G(b,"postprocessing/postprocessing.glslv",
"postprocessing/ssao.glslf");A(b,"SSAO_QUALITY","SSAO_QUALITY_"+a.Hp);A(b,"SSAO_HEMISPHERE",a.As?1:0);A(b,"SHADOW_USAGE","NO_SHADOWS");a={width:4,height:4,data:new Uint8Array([150,123,254,0,127,3,97,0,164,246,99,0,155,177,14,0,54,83,221,0,2,142,143,0,32,57,79,0,49,160,32,0,57,232,115,0,178,216,203,0,70,196,218,0,241,164,82,0,225,58,85,0,233,88,189,0,144,25,203,0,117,73,12,0])};d=aa.Xk(aa.Di,!1);d.source="NODE_TEX";aa.Jw(d,a,0);R(b,d,"u_ssao_special_tex");q(b);return b};a.JY=function(a){var b=t("SSAO_BLUR");
b.Za=!1;b.Na=!0;var d=ca.Md();E(b,d);G(b,"postprocessing/postprocessing.glslv","postprocessing/ssao_blur.glslf");A(b,"SSAO_BLUR_DEPTH",a.xs?1:0);A(b,"SHADOW_USAGE","NO_SHADOWS");q(b);return b};a.hY=function(a){var b=t("COC");b.Za=!1;b.Na=!0;var d=ca.Md();E(b,d);G(b,"postprocessing/postprocessing.glslv","postprocessing/coc.glslf");A(b,"DEPTH_RGBA",1);switch(a){case "COC_ALL":A(b,"COC_TYPE","COC_ALL");break;case "COC_FOREGROUND":A(b,"COC_TYPE","COC_FOREGROUND");break;case "COC_COMBINE":A(b,"COC_TYPE",
"COC_COMBINE")}A(b,"SHADOW_USAGE","NO_SHADOWS");q(b);return b};a.pY=function(a){var b=t("DOF");b.Za=!1;b.Na=!0;var d=ca.Md();E(b,d);G(b,"postprocessing/postprocessing.glslv","postprocessing/dof.glslf");a.dof_bokeh?A(b,"DOF_TYPE","DOF_BOKEH"):(A(b,"DOF_TYPE","DOF_SIMPLE"),A(b,"DEPTH_RGBA",1));A(b,"SHADOW_USAGE","NO_SHADOWS");q(b);return b};a.xY=function(){var a=t("OUTLINE");a.Za=!1;a.Na=!0;var b=ca.Md();E(a,b);G(a,"postprocessing/postprocessing.glslv","postprocessing/outline.glslf");q(a);return a};
a.rY=function(){var a=t("GLOW_COMBINE");a.Za=!1;a.Na=!0;var b=ca.Md();E(a,b);G(a,"postprocessing/postprocessing.glslv","postprocessing/glow.glslf");q(a);return a};a.sY=function(a,b,d){var c=t("GOD_RAYS");c.Za=!1;c.Na=!0;var f=ca.x_();E(c,f);G(c,"postprocessing/god_rays.glslv","postprocessing/god_rays.glslf");A(c,"DEPTH_RGBA",a?1:0);A(c,"WATER_EFFECTS",b?1:0);A(c,"STEPS_PER_PASS",Z.fa(d,1));A(c,"SHADOW_USAGE","NO_SHADOWS");q(c);return c};a.tY=function(){var a=t("GOD_RAYS_COM");a.Za=!1;a.Na=!0;var b=
ca.Md();E(a,b);G(a,"postprocessing/postprocessing.glslv","postprocessing/god_rays_combine.glslf");A(a,"SAFARI_CANVAS_ALPHA_HACK",Q.VQ?1:0);q(a);return a};a.lY=function(a,b){var d=t("SKY");d.Za=!1;d.Na=!1;var c=ca.Gz();E(d,c);""!=b.tC?(G(d,"skybox.glslv","node_skybox.glslf"),A(d,"IS_WORLD",1),p(d,a)):b.procedural_skydome?(G(d,"skybox.glslv","proc_skybox.glslf"),A(d,"WATER_EFFECTS",1)):(G(d,"skybox.glslv","tex_skybox.glslf"),a&&(c=a.J.On,c.vC&&R(d,aa.kf(c.vC),"u_sky_texture",c.vC.texture.name),c.Fp&&
A(d,"WO_SKYTEX",1)),b.sC&&A(d,"MTEX_NEGATIVE",1),b.AC&&A(d,"MTEX_RGBTOINT",1),A(d,"BLENDTYPE",b.rC),b.wC&&A(d,"WOMAP_BLEND",1),b.xC&&A(d,"WOMAP_HORIZ",1),b.zC&&A(d,"WOMAP_ZENUP",1),b.yC&&A(d,"WOMAP_ZENDOWN",1),b.Lp&&A(d,"WO_SKYBLEND",1),b.Mp&&A(d,"WO_SKYPAPER",1),b.Np&&A(d,"WO_SKYREAL",1));q(d);return d};a.hW=function(a,b){var d=oa.cc(a.J.Da,fa.Ye);d&&da.$g(b,a,d.kb[0].Ua[0].Fa)};a.jY=function(){var a=t("IRRADIANCE");a.Za=!1;a.Na=!1;var b=ca.Gz();E(a,b);G(a,"skybox.glslv","irradiance_skybox.glslf");
q(a);return a};a.kY=function(){var a=t("R_CONVOLUTION");a.Za=!1;a.Na=!1;var b=ca.Gz();E(a,b);G(a,"skybox.glslv","r_convolution_skybox.glslf");q(a);return a};a.gY=function(){var a=t("BRDF");a.Za=!1;a.Na=!1;var b=ca.Gz();E(a,b);G(a,"postprocessing/postprocessing.glslv","postprocessing/precompute_brdf.glslf");q(a);return a};a.cY=function(a){var b=t("ANTIALIASING");b.Za=!1;b.Na=!0;var d=ca.Md();E(b,d);G(b,"postprocessing/postprocessing.glslv","postprocessing/antialiasing.glslf");Q.AQ?(A(b,"AA_METHOD",
"AA_METHOD_FXAA_QUALITY"),A(b,"AA_QUALITY",a.Dz)):A(b,"AA_METHOD","AA_METHOD_FXAA_LIGHT");q(b);return b};a.GY=function(a){var b=t("SMAA"),d=ca.Md();E(b,d);G(b,"postprocessing/smaa.glslv","postprocessing/smaa.glslf");A(b,"AA_METHOD","AA_METHOD_SMAA_HIGH");A(b,"SMAA_PASS",a);A(b,"SMAA_PREDICATION",0);A(b,"SMAA_REPROJECTION",0);q(b);b.Za=!1;b.Na=!0;return b};a.iY=function(){var a=t("COMPOSITING");a.Za=!1;a.Na=!0;var b=ca.Md();E(a,b);G(a,"postprocessing/postprocessing.glslv","postprocessing/compositing.glslf");
q(a);return a};a.wY=function(){var a=t("MOTION_BLUR");a.Na=!0;a.Za=!1;var b=ca.Md();E(a,b);G(a,"postprocessing/postprocessing.glslv","postprocessing/motion_blur.glslf");q(a);return a};a.KY=function(a){var b=t("STEREO");b.Na=!0;b.Za=!1;var d=ca.Md();E(b,d);G(b,"postprocessing/postprocessing.glslv","postprocessing/stereo.glslf");A(b,"ANAGLYPH","ANAGLYPH"===a?1:0);A(b,"SIDEBYSIDE","SIDEBYSIDE"===a?1:0);A(b,"DISTOR_SCALE",Ba.nonwebvr.$M);q(b);return b};a.uY=function(){var a=t("LUMINANCE");a.Za=!1;a.Na=
!0;var b=ca.Md();E(a,b);G(a,"postprocessing/postprocessing.glslv","postprocessing/luminance.glslf");q(a);return a};a.dY=function(){var a=t("LUMINANCE");a.Za=!1;a.Na=!0;var b=ca.Md();E(a,b);G(a,"postprocessing/postprocessing.glslv","postprocessing/luminance_av.glslf");q(a);return a};a.vY=function(a){var b=t("LUMINANCE_X_BLUR");b.Za=!1;b.Na=!0;var d=ca.Md();E(b,d);G(b,"postprocessing/postprocessing.glslv","postprocessing/luminance_truncated.glslf");a&&Z.wa(b.qb,"ADAPTIVE_BLOOM",1);q(b);return b};a.fY=
function(a){var b=t("BLOOM");b.Za=!1;b.Na=!0;var d=ca.Md();E(b,d);G(b,"postprocessing/postprocessing.glslv","postprocessing/bloom_combine.glslf");if(1==a)var c="BLUR_PASS_1";else 2==a?c="BLUR_PASS_2":3==a?c="BLUR_PASS_3":4==a?c="BLUR_PASS_4":5==a&&(c="BLUR_PASS_5");Z.wa(b.qb,"BLUR_PASS_NUM",c);q(b);return b};a.kZ=function(){var a=t("VELOCITY");a.Za=!1;a.Na=!0;var b=ca.Md();E(a,b);G(a,"postprocessing/postprocessing.glslv","postprocessing/velocity.glslf");q(a);return a};a.bY=function(){var a=t("ANCHOR_VISIBILITY");
a.Za=!0;a.Na=!0;a.Lj=ha.pt;G(a,"anchors.glslv","anchors.glslf");var b=ca.xN(1);E(a,b);A(a,"ANCHOR_NUM",1);q(a);a.co=new Float32Array(3);return a};a.zY=function(){var a=t("PERFORMANCE");a.Za=!1;a.Na=!0;var b=ca.Md();E(a,b);G(a,"postprocessing/postprocessing.glslv","postprocessing/performance.glslf");q(a);return a};a.D5=function(a,b){var d=b.length/3;if(d!=a.co.length/3){var c=ca.xN(d);E(a,c);A(a,"ANCHOR_NUM",d);q(a)}a.co=b};a.$_=function(a){if(!a.T.length)return null;a=a.T[0];return a.da.length?a.da[0]:
null};a.Gaa=function(a,b,d){a=a.T[0].da;for(var c=0;c<a.length;c++)if(a[c].type==d&&-1!=a[c].Dc.indexOf(b))return a[c];return null};a.Gm=function(a,b){for(var d=a.T[0].da,c=0;c<d.length;c++)if("MAIN"==d[c].type&&!d[c].Th&&-1!=d[c].Dc.indexOf(b))return d[c];return null};a.Haa=function(a,b,d){a=a.T[0].da;for(var c=0;c<a.length;c++)if(a[c].type==d&&a[c].Th&&-1!=a[c].Dc.indexOf(b))return a[c];return null};a.IG=function(a,b,d,c){a=a.T[0].da;for(var f=0;f<a.length;f++){var e=a[f];if(-1!=e.Dc.indexOf(b)&&
(!c||e.type==c)&&d(e))break}};a.Z9=function(a,b){for(var d=a.T[0].da,c=0;c<d.length;c++)if(d[c].type==b)return!0;return!1};a.K_=function(a,b){for(var d=(b?da.La(a,b):a.T[0]).da,c=0;c<d.length;c++)if("SKY"==d[c].type)return d[c];return null};a.dM=function(a){var b=a.xa;a.xa=[];for(var d=0;d<b.length;d++)aa.cM(b[d]);a.xa=b;a.Pa&&a.Pa.Mh&&ha.JX(a.Pa);a.Mh&&a.ag.length&&S.MX(a);a.Hb&&a.Hb.Mh&&Z.LX(a.Hb);a.Pe&&(b=ba.Sz(a.Pe))&&b.bM&&ba.KX(a.Pe)};a.F_=ja;a.Ja=function(){Ya={}}};b4w.module.__config=function(a,w){function t(){return b4w.module_check(a.Tf.qy)}function c(){for(var c=a.Tf,k=null,m=document.getElementsByTagName("script"),x=0;x<m.length;x++){for(var r=m[x].src,g=0;g<c.pP.length;g++)if(0<=r.indexOf(c.pP[g])){k=r;break}if(null!==k)break}k||(b.warn("Couldn't determine path to ancillary resources, fallback to the current page directory"),k=document.location.href);c=k.indexOf("?");0<=c&&(k=k.substring(0,c));return k.substring(0,k.lastIndexOf("/"))}var b=w("__print"),
k=w("__util");a.Bk=1;a.Ak=2;a.Vn=3;a.mK=4;a.Gt=5;a.context={alpha:!0,antialias:!1,premultipliedAlpha:!0};a.sM=k.Y(a.context);a.L={alpha_sort:!0,alpha_sort_threshold:.1,lp:[6,3],max_fps:1E4,console_verbose:!1,do_not_load_resources:!1,use_min50:!1,enable_texture_cache:!0,qN:1,o_:5,background_color:[0,0,0,0],canvas_resolution_factor:1,Vl:3,allow_cors:!1,pN:!1,oE:!0,anisotropic_filtering:!0,XC:!1,uS:!1,r5:!1,q5:!1,s5:!1,HL:!1,qX:!1,show_hud_debug_info:!1,Zy:!0,shadows:!0,stereo:"NONE",reflections:!0,
refractions:!0,ssao:!0,dof:!0,god_rays:!0,bloom:!0,motion_blur:!0,compositing:!0,antialiasing:!0,smaa:!1,debug_view:!1,uT:!1,Su:!0,vB:!0,kd:!0,water_dynamic:!0,Xf:!0,nC:!0,YS:!0,precision:"highp",quality:a.Ak,Vx:!0,lod_leap_smooth_threshold:3,assets_gzip_available:!1,r2:!1,zI:!1,xF:!1,lT:!1,is_mobile_device:!1,wG:!1,QE:!1,Qea:!1,lw:!1,allow_hidpi:!1,SR:!1,bH:!1,YO:!1,enable_selectable:!0,enable_outlining:!0,lod_smooth_transitions:!0,glow_materials:!0,sA:!1,mN:!1,PG:[0,0],AQ:!0,pC:!1,url_params:null,
sb:!0,oc:4,su:!1,VQ:!1,F3:!1,gw:!1,QQ:!1,WL:!1,TO:!1,SO:!1,media_auto_activation:!0,QP:4,UA:!1,gl_debug:!1,PL:!1,SK:!1,mE:!1,uo:"dds",shadow_blur_samples:"",reflection_quality:"",srgb_type:"SRGB_SIMPLE",wA:!1,hw:!1,debug_loading:!1,MP:!1,LP:!1,VL:!1,ds:!0};a.UM=k.Y(a.L);a.fo={Az:-1,rN:!1,Ko:1};a.controls={l2:1/120};a.Je={path:"",I2:"B4W_ASSETS_PATH=__JS__/../../assets\/",c3:"B4W_PROJ_ASSETS_PATH=__JS__/../../..\/",f2:15,prevent_caching:!0,aH:!1,qF:!1,FB:!1};a.eL=k.Y(a.Je);a.Tf=
{shaders_path:"",G4:"../shaders/",QR:"include/",Kea:"postprocessing/",qy:"built_in_data",pP:"b4w.min.js b4w.full.min.js b4w.simple.min.js b4w.whitespace.min.js src/b4w.js webplayer.min.js".split(" "),smaa_search_texture_path:"smaa_search_texture.png",smaa_area_texture_path:"smaa_area_texture.png"};a.MO={webvr:{distortion_coefs:[.22,.28],chromatic_aberration_coefs:[-.015,.02,.025,.02]},nonwebvr:{$M:.8,Wi:.064,wj:.035,iw:.039,distortion_coefs:[.34,.55],chromatic_aberration_coefs:[0,0,0,0],Nn:.11,Vj:.062,
xj:.004}};a.O={enabled:!0,max_fps:60,Kw:"",nD:"",oD:"B4W_URANIUM_PATH=./",dL:"uranium.js",tT:"uranium_wasm.js",SP:"uranium.js.mem",sT:"uranium_wasm.wasm",XS:"../deploy/apps/common/",CE:!1,ping:!1,Pp:!0,Qw:!0};a.nQ=k.Y(a.O);a.fs={gv:1024,Ry:256,MM:32,pZ:128,oZ:256,pQ:.25,S2:.5,Q2:1};a.ZQ=k.Y(a.fs);a.ra={tJ:!0,aB:!1,jL:!1,ZL:!1,YM:!1};a.OR=k.Y(a.ra);a.zd={outlining_overview_mode:!1,dj:[1,.4,.05],cn:.2,dn:3.8,en:1};a.Bo={enabled:!1,yw:39,j5:0,J4:"COLOR"};a.TM=k.Y(a.Bo);a.Ni={e2:8,UG:64,YG:8,XA:8,ZG:15,
RP:0,YA:128,ph:1024,VG:4096,nc:4096,$G:[4096,4096],Wq:24};a.rM=k.Y(a.Ni);a.Fq=function(){var b=a.L,c=a.O,m=a.fs;switch(b.quality){case a.Vn:b.shadows=!0;b.Xf=!0;b.ssao=!0;b.dof=!0;b.god_rays=!0;b.bloom=!0;b.reflections=!0;b.refractions=!0;b.Su=!0;b.vB=!0;b.kd=!0;m.gv=2048;m.Ry=512;b.Vl=3;b.anisotropic_filtering=!0;b.use_min50=!1;b.water_dynamic=!0;b.nC=!0;b.antialiasing=!0;b.smaa=!1;b.compositing=!0;b.motion_blur=!0;b.allow_hidpi=!0;b.enable_outlining=!0;b.glow_materials=!0;b.oc=16;b.srgb_type="SRGB_PROPER";
c.max_fps=120;b.lod_smooth_transitions=!0;break;case a.Ak:b.shadows=!0;b.Xf=!0;b.ssao=!0;b.dof=!0;b.god_rays=!0;b.bloom=!0;b.reflections=!0;b.refractions=!0;b.Su=!0;b.vB=!0;b.kd=!0;m.gv=1024;m.Ry=256;b.Vl=3;b.anisotropic_filtering=!0;b.use_min50=!1;b.water_dynamic=!0;b.nC=!0;b.antialiasing=!0;b.smaa=!1;b.compositing=!0;b.motion_blur=!0;b.allow_hidpi=!1;b.enable_outlining=!0;b.glow_materials=!0;b.srgb_type="SRGB_SIMPLE";b.oc=4;c.max_fps=60;b.lod_smooth_transitions=!0;break;case a.Bk:b.shadows=!1;b.Xf=
!1;b.ssao=!1;b.dof=!1;b.god_rays=!1;b.bloom=!1;b.reflections=!1;b.refractions=!1;b.Su=!1;b.vB=!1;b.kd=!1;m.gv=512;m.Ry=256;b.Vl=2;b.anisotropic_filtering=!1;b.use_min50=!0;b.water_dynamic=!1;b.nC=!1;b.antialiasing=!1;b.smaa=!1;b.compositing=!1;b.motion_blur=!1;b.allow_hidpi=!1;b.enable_outlining=!1;b.glow_materials=!1;b.srgb_type="SRGB_SIMPLE";b.oc=1;c.max_fps=60;b.lod_smooth_transitions=!1;break;case a.Gt:k.K("Direct AUTO quality profile setting is forbidden")}};a.set=function(c,k){switch(c){case "allow_cors":a.L.allow_cors=
k;break;case "allow_hidpi":a.L.allow_hidpi=k;break;case "alpha":a.context.alpha=k;break;case "alpha_sort":a.L.alpha_sort=k;break;case "alpha_sort_threshold":a.L.alpha_sort_threshold=k;break;case "anaglyph_use":b.oz("anaglyph_use","stereo");a.L.stereo=k?"ANAGLYPH":a.L.stereo;break;case "animation_framerate":a.fo.Az=k;break;case "anisotropic_filtering":a.L.anisotropic_filtering=k;break;case "antialiasing":a.L.antialiasing=k;break;case "assets_dir":case "assets_path":a.Je.path=k;break;case "assets_dds_available":a.Je.qF=
k;break;case "assets_pvr_available":a.Je.FB=k;break;case "assets_min50_available":a.Je.aH=k;break;case "audio":a.ra.tJ=k;break;case "background_color":a.L.background_color=k;break;case "bloom":a.L.bloom=k;break;case "built_in_module_name":a.Tf.qy=k;break;case "canvas_resolution_factor":a.L.canvas_resolution_factor=k;break;case "console_verbose":a.L.console_verbose=k;break;case "compositing":a.L.compositing=k;break;case "dof":a.L.dof=k;break;case "do_not_load_resources":a.L.do_not_load_resources=k;
break;case "god_rays":a.L.god_rays=k;break;case "stereo":a.L.stereo=k;break;case "lod_leap_smooth_threshold":a.L.lod_leap_smooth_threshold=k;break;case "lod_smooth_transitions":a.L.lod_smooth_transitions=k;break;case "max_fps":a.L.max_fps=k;break;case "max_fps_physics":a.O.max_fps=k;break;case "media_auto_activation":a.L.media_auto_activation=k;break;case "motion_blur":a.L.motion_blur=k;break;case "physics_enabled":a.O.enabled=k;break;case "physics_uranium_path":a.O.Qw&&window.WebAssembly?(a.O.Kw=
k+a.O.tT,a.O.nD=k+a.O.sT):(a.O.Kw=k+a.O.dL,a.O.nD=k+a.O.SP);a.O.XS=k;break;case "physics_use_wasm":a.O.Qw=k;break;case "physics_calc_fps":a.O.CE=k;break;case "physics_use_workers":a.O.Pp=k;break;case "precision":a.L.precision=k;break;case "prevent_caching":a.Je.prevent_caching=k;break;case "quality":a.L.quality=k;break;case "reflections":a.L.reflections=k;break;case "refractions":a.L.refractions=k;break;case "sfx_mix_mode":a.ra.aB=k;break;case "shaders_dir":case "shaders_path":a.Tf.shaders_path=k;
break;case "shadows":a.L.shadows=k;break;case "show_hud_debug_info":a.L.show_hud_debug_info=k;break;case "smaa":b.oz("smaa");a.L.smaa=k;break;case "smaa_search_texture_path":b.oz("smaa_search_texture_path");a.Tf.smaa_search_texture_path=k;break;case "smaa_area_texture_path":b.oz("smaa_area_texture_path");a.Tf.smaa_area_texture_path=k;break;case "ssao":a.L.ssao=k;break;case "debug_view":a.L.debug_view=k;break;case "enable_selectable":a.L.enable_selectable=k;break;case "enable_outlining":a.L.enable_outlining=
k;break;case "outlining_overview_mode":a.zd.outlining_overview_mode=k;break;case "glow_materials":a.L.glow_materials=k;break;case "url_params":a.L.url_params=k;break;case "use_min50":a.L.use_min50=k;break;case "enable_texture_cache":a.L.enable_texture_cache=k;break;case "gl_debug":a.L.gl_debug=k;break;case "srgb_type":a.L.srgb_type=k;break;case "shadow_blur_samples":a.L.shadow_blur_samples=k;break;case "reflection_quality":a.L.reflection_quality=k;break;case "assets_gzip_available":a.L.assets_gzip_available=
k;break;case "debug_loading":a.L.debug_loading=k;break;case "msaa_samples":a.L.oc=k;break;default:b.error("Unknown config property: "+c)}};a.get=function(c){switch(c){case "allow_cors":return a.L.allow_cors;case "allow_hidpi":return a.L.allow_hidpi;case "alpha":return a.context.alpha;case "alpha_sort":return a.L.alpha_sort;case "alpha_sort_threshold":return a.L.alpha_sort_threshold;case "anaglyph_use":return"ANAGLYPH"==a.L.stereo;case "animation_framerate":return a.fo.Az;case "anisotropic_filtering":return a.L.anisotropic_filtering;
case "antialiasing":return a.L.antialiasing;case "assets_dir":case "assets_path":return a.Je.path;case "assets_dds_available":return a.Je.qF;case "assets_pvr_available":return a.Je.FB;case "assets_min50_available":return a.Je.aH;case "audio":return a.ra.tJ;case "background_color":return a.L.background_color;case "bloom":return a.L.bloom;case "built_in_module_name":return a.Tf.qy;case "canvas_resolution_factor":return a.L.canvas_resolution_factor;case "console_verbose":return a.L.console_verbose;case "compositing":return a.L.compositing;
case "dof":return a.L.dof;case "do_not_load_resources":return a.L.do_not_load_resources;case "is_mobile_device":return a.L.is_mobile_device;case "god_rays":return a.L.god_rays;case "stereo":return a.L.stereo;case "lod_leap_smooth_threshold":return a.L.lod_leap_smooth_threshold;case "lod_smooth_transitions":return a.L.lod_smooth_transitions;case "max_fps":return a.L.max_fps;case "max_fps_physics":return a.O.max_fps;case "media_auto_activation":return a.L.media_auto_activation;case "motion_blur":return a.L.motion_blur;
case "physics_enabled":return a.O.enabled;case "physics_uranium_path":return a.O.XS;case "physics_uranium_bin":return a.O.nD;case "physics_use_wasm":return a.O.Qw;case "physics_calc_fps":return a.O.CE;case "physics_use_workers":return a.O.Pp;case "precision":return a.L.precision;case "prevent_caching":return a.Je.prevent_caching;case "quality":return a.L.quality;case "reflections":return a.L.reflections;case "refractions":return a.L.refractions;case "sfx_mix_mode":return a.ra.aB;case "shaders_dir":case "shaders_path":return a.Tf.shaders_path;
case "shadows":return a.L.shadows;case "show_hud_debug_info":return a.L.show_hud_debug_info;case "smaa":return a.L.smaa;case "smaa_search_texture_path":return a.Tf.smaa_search_texture_path;case "smaa_area_texture_path":return a.Tf.smaa_area_texture_path;case "ssao":return a.L.ssao;case "debug_view":return a.L.debug_view;case "enable_selectable":return a.L.enable_selectable;case "enable_outlining":return a.L.enable_outlining;case "outlining_overview_mode":return a.zd.outlining_overview_mode;case "glow_materials":return a.L.glow_materials;
case "url_params":return a.L.url_params;case "use_min50":return a.L.use_min50;case "enable_texture_cache":return a.L.enable_texture_cache;case "gl_debug":return a.L.gl_debug;case "srgb_type":return a.L.srgb_type;case "shadow_blur_samples":return a.L.shadow_blur_samples;case "reflection_quality":return a.L.reflection_quality;case "assets_gzip_available":return a.L.assets_gzip_available;case "debug_loading":return a.L.debug_loading;case "msaa_samples":return a.L.oc;default:b.error("Unknown config property: "+
c)}};a.reset=function(){for(var b in a.sM)a.context[b]=a.sM[b];for(b in a.UM)a.L[b]=a.UM[b];for(b in a.eL)a.Je[b]=a.eL[b];for(b in a.nQ)a.O[b]=a.nQ[b];for(b in a.ZQ)a.fs[b]=a.ZQ[b];for(b in a.OR)a.ra[b]=a.OR[b];for(b in a.TM)a.Bo[b]=a.TM[b]};a.WH=function(){var b=a.Ni.Wq,c;for(c in a.rM)a.Ni[c]=a.rM[c];a.Ni.Wq=b};a.dP=t;a.k4=function(){var b=a.Tf,k=a.O;t()||""!=b.shaders_path||(b.shaders_path=c()+"/"+b.G4);if(a.O.Qw&&window.WebAssembly)var b=k.oD+k.tT,m=k.oD+k.sT;else b=k.oD+k.dL,m=k.oD+k.SP;k.enabled&&
""==k.Kw&&(k.Kw=c()+"/"+b.replace("B4W_URANIUM_PATH=",""),k.nD=c()+"/"+m.replace("B4W_URANIUM_PATH=",""))};a.SF=function(b){var h=a.Je;if(h.path)return h.path;var k=h.I2,x="B4W_ASSETS_PATH=";b&&(k=h.c3,x="B4W_PROJ_ASSETS_PATH=",k=k.replace("__NAME__",b));k=k.replace(x,"");return k=k.replace("__JS__",c())}};b4w.module.__extensions=function(a,w){function t(){return m.sb?k("OES_texture_float_linear"):b("OES_texture_float_linear")}function c(){return m.sb?k("EXT_color_buffer_float"):b("WEBGL_color_buffer_float")}function b(a){if(a in r)return r[a];var b=x.getExtension(a)||null;r[a]=b;O.log("%cGET EXTENSION","color: #"+(b?"0a0":"a00"),a);return b}function k(a){if(a in r)return r[a];switch(a){case "WEBGL_depth_texture":case "OES_element_index_uint":case "OES_standard_derivatives":case "EXT_shader_texture_lod":case "OES_texture_float":case "OES_texture_half_float":var b=
{};break;case "ANGLE_instanced_arrays":case "OES_vertex_array_object":b=x;break;default:b=x.getExtension(a)||null}r[a]=b;O.log("%cGET EXTENSION (WebGL 2)","color: #"+(b?"0a0":"a00"),a);return b}var h=w("__config"),O=w("__print"),m=h.L,x=null,r={};a.wh=function(a){x=a};a.kO=function(){return b("WEBGL_compressed_texture_s3tc")||b("WEBKIT_WEBGL_compressed_texture_s3tc")};a.hO=function(){return b("WEBKIT_WEBGL_compressed_texture_pvrtc")||b("WEBGL_compressed_texture_pvrtc")};a.X_=function(){return m.sb?
k("WEBGL_depth_texture"):b("WEBGL_depth_texture")||b("WEBKIT_WEBGL_depth_texture")};a.w0=function(){return m.sb?k("OES_texture_float"):b("OES_texture_float")};a.y0=function(){return m.sb?k("OES_texture_half_float"):b("OES_texture_half_float")};a.x0=t;a.z0=function(){return m.sb?t():b("OES_texture_half_float_linear")};a.Q_=c;a.R_=function(){return m.sb?c():b("EXT_color_buffer_half_float")};a.RF=function(){return b("EXT_texture_filter_anisotropic")||b("WEBKIT_EXT_texture_filter_anisotropic")};a.rO=
function(){return m.sb?k("EXT_shader_texture_lod"):b("EXT_shader_texture_lod")};a.V_=function(){return b("WEBGL_debug_shaders")};a.Vz=function(){return b("WEBGL_debug_renderer_info")};a.QN=function(){return m.sb?k("OES_element_index_uint"):b("OES_element_index_uint")};a.hG=function(){return m.sb?k("OES_standard_derivatives"):b("OES_standard_derivatives")};a.WF=function(){var a=m.sb?k("EXT_disjoint_timer_query_webgl2"):b("EXT_disjoint_timer_query");return null==a?a:a.createQueryEXT?{createQuery:function(){return a.createQueryEXT()},
beginQuery:function(b){a.beginQueryEXT(a.TIME_ELAPSED_EXT,b)},endQuery:function(){a.endQueryEXT(a.TIME_ELAPSED_EXT)},CN:function(b){return a.getQueryObjectEXT(b,a.QUERY_RESULT_AVAILABLE_EXT)},DN:function(b){return a.getQueryObjectEXT(b,a.QUERY_RESULT_EXT)},BN:function(){return a.GPU_DISJOINT_EXT}}:{createQuery:function(){return x.createQuery()},beginQuery:function(b){x.beginQuery(a.TIME_ELAPSED_EXT,b)},endQuery:function(){x.endQuery(a.TIME_ELAPSED_EXT)},CN:function(a){return x.getQueryParameter(a,
x.QUERY_RESULT_AVAILABLE)},DN:function(a){return x.getQueryParameter(a,x.QUERY_RESULT)},BN:function(){return a.GPU_DISJOINT_EXT}}};a.m0=function(){if(m.sb)return k("ANGLE_instanced_arrays");var a=b("ANGLE_instanced_arrays");return null==a?a:{drawElementsInstanced:function(b,c,g,h,k){a.drawElementsInstancedANGLE(b,c,g,h,k)},vertexAttribDivisor:function(b,c){a.vertexAttribDivisorANGLE(b,c)},drawArraysInstanced:function(b,c,g,h){a.drawArraysInstancedANGLE(b,c,g,h)}}};a.jG=function(){if(m.sb)return k("OES_vertex_array_object");
var a=b("OES_vertex_array_object");return null==a?a:{bindVertexArray:function(b){a.bindVertexArrayOES(b)},createVertexArray:function(){return a.createVertexArrayOES()},deleteVertexArray:function(b){a.deleteVertexArrayOES(b)},isVertexArray:function(b){return a.isVertexArrayOES(b)}}};a.Ja=function(){r={}};a.reset=function(){x=null}};b4w.module.__graph=function(a,w){function t(a,b,d){d||(d=null);c(a,b)?E.K("Graph already has node with given ID"):a.ia.push(b,d)}function c(a,b){for(var d=a.ia,c=0;c<d.length;c+=2)if(d[c]==b)return!0;return!1}function b(a,b,d,e){e||(e=null);c(a,b)&&c(a,d)?a.Ka.push(b,d,e):E.K("Wrong node IDs")}function k(a,b){c(a,b)||E.K("Node not found");for(var d=a.ia,f=0;f<d.length;f+=2)d[f]==b&&(d.splice(f,2),f-=2)}function h(a,b,d,c){F(a,b,d)||E.K("Edge not found");a=a.Ka;for(var f=0,e=0;e<a.length;e+=3)if(a[e]==
b&&a[e+1]==d){if(-1==c)a.splice(e,3);else{if(c==f){a.splice(e,3);break}f++}e-=3}}function O(a){a=a.ia;for(var b=-1,d=0;d<a.length;d+=2)b=Math.max(b,a[d]);return++b}function m(a,b){for(var d=a.ia,c=0;c<d.length;c+=2)if(d[c+1]==b)return d[c];return-1}function x(a){var b=[],d={};r(a,d);for(var c=a.ia,f=0;f<c.length;f+=2)0==l(a,c[f])&&g(a,c[f],d,b);return{ia:b,Ka:a.Ka.slice(0)}}function r(a,b){for(var d=a.ia,c=0;c<d.length;c+=2)b[d[c]]=!1}function g(a,b,d,c){if(!d[b]){d[b]=!0;for(var f=0;f<D(a,b);f++)g(a,
u(a,b,f),d,c);c.unshift(b,y(a,b))}}function e(a,b,d,c){if(!d[b]){d[b]=!0;if(10==c||30==c)for(var f=0;f<D(a,b);f++){var g=u(a,b,f);e(a,g,d,c)}if(20==c||30==c)for(f=0;f<l(a,b);f++)g=L(a,b,f),e(a,g,d,c)}}function B(a){for(var b=a.Ka,d=0;d<b.length;d+=3){var f=b[d+1];c(a,b[d])&&c(a,f)||(b.splice(d,3),d-=3)}}function v(a){for(var b=[],d=a.ia,c=0;c<d.length;c+=2){var f=d[c];D(a,f)||b.push(f)}return b}function P(a){var b=a.ia;a=a.Ka;for(var d=[],c=[],f=[],e=0;e<b.length;e++)f[b[2*e]]=e,d.push(e,b[2*e+1]);
for(e=0;e<a.length;e+=3)c.push(f[a[e]],f[a[e+1]],a[e+2]);return{ia:d,Ka:c}}function N(a,b,d){if(d.Hj==d.$m){for(var c=0,f=0;c<d.$m;c++)-1!=d.Vk[c]&&(a[f]=c,b[f]=d.Vk[c],f++);return!0}if(d.$m>d.Jr||d.yn>d.zn||d.Hs>d.Js||d.Gs>d.Is)return!1;for(var f=c=-1,e=!1;!e&&M(d,n,c,f);)if(c=n[0],f=n[1],p(d,c,f)){var g;g=d;e={};e.av=g.av;e.bv=g.bv;e.lH=g.lH;e.jz=g.jz;e.$m=g.$m;e.Jr=g.Jr;e.order=g.order;e.Hj=e.oB=g.Hj;e.Gs=g.Gs;e.Hs=g.Hs;e.yn=g.yn;e.Is=g.Is;e.Js=g.Js;e.zn=g.zn;e.Nt=-1;e.Vk=g.Vk;e.wo=g.wo;e.Wo=g.Wo;
e.Xo=g.Xo;e.rp=g.rp;e.sp=g.sp;e.kC=g.kC;g.kC[0]+=1;var e=g=e,h=c,k=f,C=e.av,m=e.bv,y=e.$m,v=e.Jr,B=e.Vk,A=e.wo,E=e.Wo,F=e.Xo,x=e.rp,r=e.sp;I(h<y);I(k<v);I(e.Hj<y);I(e.Hj<v);y=++e.Hj;e.Nt=h;E[h]||(E[h]=y,e.Gs++,x[h]&&e.yn++);x[h]||(x[h]=y,e.Hs++,E[h]&&e.yn++);F[k]||(F[k]=y,e.Is++,r[k]&&e.zn++);r[k]||(r[k]=y,e.Js++,F[k]&&e.zn++);B[h]=k;A[k]=h;for(B=0;B<l(C,h);B++)A=L(C,h,B),E[A]||(E[A]=y,e.Gs++,x[A]&&e.yn++);for(B=0;B<D(C,h);B++)A=u(C,h,B),x[A]||(x[A]=y,e.Hs++,E[A]&&e.yn++);for(B=0;B<l(m,k);B++)A=L(m,
k,B),F[A]||(F[A]=y,e.Is++,r[A]&&e.zn++);for(B=0;B<D(m,k);B++)A=u(m,k,B),r[A]||(r[A]=y,e.Js++,F[A]&&e.zn++);e=N(a,b,g);I(1>=g.Hj-g.oB);I(-1!=g.Nt);A=g.av;h=g.bv;k=g.Hj;C=g.Nt;m=g.Vk;E=g.wo;y=g.Wo;F=g.Xo;v=g.rp;x=g.sp;if(g.oB<k){y[C]==k&&(y[C]=0);for(r=0;r<l(A,C);r++)B=L(A,C,r),y[B]==k&&(y[B]=0);v[C]==k&&(v[C]=0);for(r=0;r<D(A,C);r++)B=u(A,C,r),v[B]==k&&(v[B]=0);A=m[C];F[A]==k&&(F[A]=0);for(r=0;r<l(h,A);r++)B=L(h,A,r),F[B]==k&&(F[B]=0);x[A]==k&&(x[A]=0);for(r=0;r<D(h,A);r++)B=u(h,A,r),x[B]==k&&(x[B]=
0);m[C]=-1;E[A]=-1;g.Hj=g.oB;g.Nt=-1}}return e}function M(a,b,d,c){-1==d&&(d=0);-1==c?c=0:c++;var e=a.yn,f=a.zn,g=a.Hs,h=a.Js,k=a.Gs,l=a.Is,n=a.Hj,y=a.$m,m=a.Jr,p=a.Vk,H=a.wo,v=a.Wo,u=a.Xo,B=a.rp,D=a.sp;if(e>n&&f>n)for(;d<y&&(-1!=p[d]||0==B[d]||0==v[d]);)d++,c=0;else if(g>n&&h>n)for(;d<y&&(-1!=p[d]||0==B[d]);)d++,c=0;else if(k>n&&l>n)for(;d<y&&(-1!=p[d]||0==v[d]);)d++,c=0;else if(0==d&&0!=a.order){for(v=0;v<y&&-1!=p[d=a.order[v]];)v++;v==y&&(d=y)}else for(;d<y&&-1!=p[d];)d++,c=0;if(e>n&&f>n)for(;c<
m&&(-1!=H[c]||0==D[c]||0==u[c]);)c++;else if(g>n&&h>n)for(;c<m&&(-1!=H[c]||0==D[c]);)c++;else if(k>n&&l>n)for(;c<m&&(-1!=H[c]||0==u[c]);)c++;else for(;c<m&&-1!=H[c];)c++;return d<y&&c<m?(b[0]=d,b[1]=c,!0):!1}function p(a,b,d){var c=a.av,e=a.bv,f=a.Jr,g=a.Vk,h=a.wo,k=a.Wo,C=a.Xo,n=a.rp,m=a.sp;I(b<a.$m);I(d<f);I(-1==g[b]);I(-1==h[d]);if(!(0,a.lH)(y(c,b),y(e,d)))return!1;for(var p=f=0,v=0,B=0,A=0,E=0,x=0;x<D(c,b);x++){var r=u(c,b,x);if(-1!=g[r]){var V=g[r];if(!F(e,d,V)||!U(a.jz,c,b,r,e,d,V))return!1}else k[r]&&
v++,n[r]&&f++,k[r]||n[r]||A++}for(x=0;x<l(c,b);x++)if(r=L(c,b,x),-1!=g[r]){if(V=g[r],!F(e,V,d)||!U(a.jz,c,r,b,e,V,d))return!1}else k[r]&&v++,n[r]&&f++,k[r]||n[r]||A++;for(x=0;x<D(e,d);x++)if(V=u(e,d,x),-1!=h[V]){if(r=h[V],!F(c,b,r))return!1}else C[V]&&B++,m[V]&&p++,C[V]||m[V]||E++;for(x=0;x<l(e,d);x++)if(V=L(e,d,x),-1!=h[V]){if(r=h[V],!F(c,r,b))return!1}else C[V]&&B++,m[V]&&p++,C[V]||m[V]||E++;return v<=B&&f<=p&&A<=E}function I(a){a||E.K("Assertion failed")}function y(a,b){for(var d=a.ia,c=0;c<d.length;c+=
2)if(d[c]==b)return d[c+1];return null}function D(a,b){for(var d=a.Ka,c=0,e=0;e<d.length;e+=3)d[e]==b&&c++;return c}function l(a,b){for(var d=a.Ka,c=0,e=0;e<d.length;e+=3)d[e+1]==b&&c++;return c}function u(a,b,d){a=a.Ka;for(var c=0,e=0;e<a.length;e+=3)if(a[e]==b){if(c==d)return a[e+1];c++}return-1}function L(a,b,d){a=a.Ka;for(var c=0,e=0;e<a.length;e+=3)if(a[e+1]==b){if(c==d)return a[e];c++}return-1}function F(a,b,d){a=a.Ka;for(var c=0;c<a.length;c+=3)if(a[c]==b&&a[c+1]==d)return!0;return!1}function U(a,
b,d,c,e,g,h){for(var f=K(b,d,c),k=K(e,g,h),q=0;q<f;q++){for(var l=!1,G=0;G<k;G++)if(a(A(b,d,c,q),A(e,g,h,G))){l=!0;break}if(!l)return!1}return!0}function K(a,b,d){var c=0;a=a.Ka;for(var e=0;e<a.length;e+=3)a[e]==b&&a[e+1]==d&&c++;return c}function A(a,b,d,c){a=a.Ka;for(var e=0,f=0;f<a.length;f+=3)if(a[f]==b&&a[f+1]==d){if(e==c)return a[f+2];e++}return null}var E=w("__util"),n=[-1,-1];a.cE=-1;a.j7=10;a.gm=20;a.O8=30;a.create=function(){for(var a=arguments,b=[],d=[],c=0;c<a.length;c++){var e=a[c];switch(e.length){case 2:b.push(e[0],
e[1]);break;case 3:d.push(e[0],e[1],e[2]);break;default:E.K("Wrong graph constructor params")}}return{ia:b,Ka:d}};a.clone=function(a,b,d){if(b)for(var c=Array(a.ia.length),e=0;e<a.ia.length;e+=2)c[e]=a.ia[e],c[e+1]=b(a.ia[e+1]);else c=E.Y(a.ia);if(d)for(b=Array(a.Ka.length),e=0;e<a.Ka.length;e+=3)b[e]=a.Ka[e],b[e+1]=a.Ka[e+1],b[e+2]=d(a.Ka[e+2]);else b=E.Y(a.Ka);return a={ia:c,Ka:b}};a.x$=function(a,b){for(var d=[],c=[],e=0;e<a.length;e++)d.push(a[e][0],a[e][1]);for(e=0;e<b.length;e++)c.push(b[e][0],
b[e][1],b[e][2]);return{ia:d,Ka:c}};a.Ii=t;a.oca=c;a.Zc=b;a.Dg=k;a.ln=h;a.hj=function(a,b,d,c){F(a,b,d)||E.K("Edge not found");a=a.Ka;for(var e=0;e<a.length;e+=3)if(a[e]==b&&a[e+1]==d&&a[e+2][0]==c[0]&&a[e+2][1]==c[1]){a.splice(e,3);break}};a.Z=function(a,b){if(-1==m(a,b)){var d=O(a);t(a,d,b);return d}E.K("Non-unique attribute")};a.t3=function(a,b,d,c,e){a=a.Ka;for(var f=0;f<a.length;f+=3)a[f]==b&&a[f+1]==d&&a[f+2]==c&&(a[f+2]=e)};a.WK=function(a,c,d,e){d=d||[];e=e||[];for(var f={},g=0;g<a.ia.length;g+=
2){var h=a.ia[g],k=O(c);t(c,k,a.ia[g+1]);f[h]=k}for(g=0;g<a.Ka.length;g+=3){var k=f[a.Ka[g]],l=f[a.Ka[g+1]],h=a.Ka[g+2];b(c,k,l,h)}for(g=0;g<d.length;g+=3)k=f[d[g]],a=d[g+1],h=d[g+2],b(c,k,a,h);for(g=0;g<e.length;g+=3)d=e[g],l=f[e[g+1]],h=e[g+2],b(c,d,l,h)};a.kl=O;a.Cl=m;a.I=function(a,c,d,e){c=m(a,c);d=m(a,d);-1!=c&&-1!=d?b(a,c,d,e):E.K("Attributes not found")};a.ka=function(a,b){for(var d=a.ia,c=0;c<d.length&&!b(d[c],d[c+1]);c+=2);};a.yi=function(a,b){for(var d=a.Ka,c=0;c<d.length&&!b(d[c],d[c+
1],d[c+2]);c+=3);};a.$l=function(a,b,d){for(var c=a.Ka,e=0;e<c.length;e+=3)if(c[e+1]==b){var f=c[e];if(d(f,y(a,f),c[e+2]))break}};a.Dn=function(a,b,d){for(var c=a.Ka,e=0;e<c.length;e+=3)if(c[e]==b){var f=c[e+1];if(d(f,y(a,f),c[e+2]))break}};a.VI=x;a.v5=function(a){a=x(a).ia;for(var b=[],d=0;d<a.length;d+=2)b.push(a[d+1]);return b};a.Sca=function(){};a.wn=function(a,b,d){c(a,b)||E.K("No such node");var f={};r(a,f);e(a,b,f,d);b=[];for(var g in f)f[g]&&(g=Number(g),b.push(g,y(a,g)));a={ia:b,Ka:a.Ka.slice(0)};
B(a);return a};a.OE=B;a.t0=function(a){for(var b=[],d=a.ia,c=0;c<d.length;c+=2){var e=d[c];l(a,e)||b.push(e)}return b};a.ev=v;a.match=function(a,b,d,c){var e={};e.av=P(a);e.bv=P(b);e.lH=d||function(a,b){return a==b};e.jz=c||function(a,b){return a==b};c=a.ia.length/2;var f=b.ia.length/2;e.$m=c;e.Jr=f;e.order=0;e.Hj=e.oB=0;e.yn=e.Gs=e.Hs=0;e.zn=e.Is=e.Js=0;e.Nt=-1;e.Vk=Array(c);e.wo=Array(f);e.Wo=Array(c);e.Xo=Array(f);e.rp=Array(c);e.sp=Array(f);e.kC=[1];for(d=0;d<c;d++)e.Vk[d]=-1,e.Wo[d]=0,e.rp[d]=
0;for(d=0;d<f;d++)e.wo[d]=-1,e.Xo[d]=0,e.sp[d]=0;f=Array(c);c=Array(c);if(N(f,c,e)){for(d=0;d<f.length;d++)f[d]=a.ia[2*f[d]],c[d]=b.ia[2*c[d]];return[f,c]}return null};a.p0=function(a,b){for(var d=a.ia,c=1;c<d.length;c+=2)if(d[c]==b)return d[c-1];return null};a.lb=y;a.th=D;a.Wj=l;a.Yh=u;a.kh=L;a.jba=K;a.ld=A;a.replace=function(a,b,d){for(var c=a.Ka,e=O(a),f=0;f<b.length;f++){var g=b[f];k(a,g);for(var h=0;h<c.length;h+=3)c[h]==g&&(c[h]=e),c[h+1]==g&&(c[h+1]=e),c[h]==c[h+1]&&(c.splice(h,3),h-=3)}t(a,
e,d)};a.i3=function(a,b,d,c,e){F(a,b,d)||E.K("Edge not found");a=a.Ka;for(var f=0;f<a.length;f+=3)a[f]==b&&a[f+1]==d&&(a[f]=c,a[f+1]=e)};a.TZ=function(a,b){function d(a,b){if(-1!=k.indexOf(a)){var c=k.slice(k.indexOf(a));if(-1!=e[c[c.length-1]].indexOf(c[0])){l.push([a,c[c.length-1]]);return}}k.push(a);for(c=0;c<b.length;c++)b[c]in e&&d(b[c],e[b[c]])}b||(b=v(a)[0]);var c=a.Ka;if(c.length&&-1!=c.indexOf(b)){for(var e={},f=0,g=0;g<c.length;g+=3)c[g+1]in e?e[c[g+1]].push(c[g]):e[c[g+1]]=[c[g]],f++;var k=
[],l=[];d(b,e[b]);for(g=0;g<l.length;g++)for(var n=f=0;n<c.length;n+=3)l[g][1]==c[n+1]&&l[g][0]==c[n]&&h(a,c[n],c[n+1],f),f++}};a.SM=function(a,b,d){var c=a.ia;a=a.Ka;var e;e="digraph debug {\n    node [shape=box];\n";for(var f=0;f<c.length;f+=2){var g=c[f],h=c[f+1],h=b?b(g,h):String(g);e+="    ";e+=String(g)+' [label="'+h.replace(/\"/g,'\\"')+'"];\n'}for(f=0;f<a.length;f+=3)b=a[f],c=a[f+1],h=a[f+2],e+="    ",e+=String(b)+" -> "+String(c),d&&(e+=' [label="'+d(b,c,h)+'"]'),e+=";\n";return e+"}"}};b4w.module.__nodemat=function(a,w){function t(a,b,d,f,g){var k="";sa.Ya()&&(k=sa.R().uuid);k=N(b,f,k,g);if(k in Ea)return Ea[k];var n={Da:null,id:k,bM:!0};d||(Fa={},Ra=0);if("SHADOW"!=f&&"COLOR_ID"!=f){b=W.create();for(var z=a.nodes,m=0;m<z.length;m++)if(null==C(b,z[m],0,f,g))return Ea[k]=null,n;if(d&&-1==q(a,b,"GROUP_OUTPUT","group"))return n;m=ya(b);g=d?a.links:a.links.slice();if(!Q(b,g,m))return n;if(d)return n.Da=b,n;for(m=0;m<g.length;m++){d=g[m];for(var z=u(d.from_node,b),y=u(d.to_node,b),G=
0;G<z.length;G++)for(var A=0;A<y.length;A++){var E=z[G],ha=y[A],Aa=W.lb(b,E),R=W.lb(b,ha);if(!J(b,E,ha,Aa,R,d))return Ea[k]=null,n}}l(b);m=!1;g=-1;"GLOW"==f?g=q(a,b,"B4W_GLOW_OUTPUT","material",!0):(g=q(a,b,"OUTPUT","material",!1,!0),-1==g&&(g=q(a,b,"OUTPUT_MATERIAL","material",!1,!0)),-1==g&&(g=q(a,b,"OUTPUT_WORLD","material",!1,!0),m=!0));-1==g&&(b=p(),g=0);L(b);a=W.wn(b,g,W.gm);m?(e(a),B(a,f),v(a),P(a)):(c(a),h(a));I(a);U(a);H(a);D(a,f);Y(a)}else f=t(a,b,d,"MAIN",g),f=W.clone(f.Da,function(a){var b=
Qa.ou(a);b.inputs=Qa.Y(a.inputs);b.outputs=Qa.Y(a.outputs);return b}),g=q(a,f,"OUTPUT","material",!1,!0),-1==g&&(g=q(a,f,"OUTPUT_MATERIAL","material",!1,!0)),M(f,g),a=W.wn(f,g,W.gm),I(a);n.Da=a;return Ea[k]=n}function c(a){var d=[];W.ka(a,function(a,b){"MATERIAL"!=b.type&&"MATERIAL_EXT"!=b.type||d.push({tf:a,node:b})});for(var c=0;c<d.length;++c){var e=d[c].tf,f=d[c].node,g=W.kl(a);W.Ii(a,g,f.data.c2);var h=W.kl(a);W.Ii(a,h,f.data.d2);W.Zc(a,g,h,[4,2]);for(var k={5:["LIGHTING_APPLY",10],6:["LIGHTING_APPLY",
6],7:["MATERIAL_END",3],8:["MATERIAL_END",4],9:["MATERIAL_END",5]},l=W.Wj(a,e),q=[],J=[],n=[],z={},C=0;C<l;C++){var m=W.kh(a,e,C);m in z||(z[m]=0);var y=W.ld(a,m,e,z[m]++);q.push([m,e,y]);var G=k[y[1]];if(G)switch(G[0]){case "MATERIAL_END":J.push([m,h,[y[0],G[1]]]);break;case "LIGHTING_APPLY":n.push([m,[y[0],G[1]]])}else J.push([m,g,y])}b(a,f.data.value,g,h,n);for(C=0;C<q.length;C++)W.hj(a,q[C][0],q[C][1],q[C][2]);for(C=0;C<J.length;C++)W.Zc(a,J[C][0],J[C][1],J[C][2]);f=W.th(a,e);g=[];k=[];l={};for(C=
0;C<f;C++)q=W.Yh(a,e,C),q in l||(l[q]=0),y=W.ld(a,e,q,l[q]++),g.push([e,q,y]),k.push([h,q,y]);for(C=0;C<g.length;C++)W.hj(a,g[C][0],g[C][1],g[C][2]);for(C=0;C<k.length;C++)W.Zc(a,k[C][0],k[C][1],k[C][2]);W.Dg(a,e)}}function b(a,b,d,c,e){var f={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},g=C(a,f,0,null,null),h=g;k(a,d,g,"E");k(a,d,g,"A");k(a,d,g,"D");g=sa.R();g=z.xc(g,"LAMP",z.Vc);if(!b.Nc)for(var l,q,J,n=0;n<g.length;n++){J=g[n].xd;f={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};l=C(a,f,0,null,
null);f={name:"LIGHTING_APPLY",type:"LIGHTING_APPLY"};q=C(a,f,0,null,null);k(a,h,q,"color");k(a,h,q,"specular");k(a,l,q,"ldir");k(a,d,q,"normal");k(a,d,q,"D");k(a,d,q,"S");k(a,l,q,"lcolorint");k(a,d,l,"shadow_factor");h="SPECULAR_"+b.Yf;f={name:h,type:h,use_tangent_shading:b.zf};h=C(a,f,0,null,null);k(a,l,h,"ldir");k(a,l,h,"lfac");k(a,d,h,"normal");k(a,h,q,"sfactor");k(a,l,h,"norm_fac");k(a,d,h,"sp_params");h="HEMI"==J.type?"DIFFUSE_LAMBERT":"DIFFUSE_"+b.Kf;f={name:h,type:h,use_tangent_shading:b.zf};
J=C(a,f,0,null,null);k(a,l,J,"ldir");k(a,l,J,"lfac");k(a,d,J,"normal");k(a,l,J,"norm_fac");k(a,J,q,"lfactor");"DIFFUSE_LAMBERT"!=h&&k(a,d,J,"dif_params");for(l=0;l<e.length;l++)W.Zc(a,e[l][0],q,e[l][1]);h=q}k(a,h,c,"color");k(a,h,c,"specular")}function k(a,b,d,c){for(var e=W.lb(a,b),f=-1,g=W.lb(a,d).inputs,h=0;h<g.length;h++)if(c==g[h].identifier){f=h;break}if(-1!=f){for(var k=-1,e=e.outputs,h=0;h<e.length;h++)if(c==e[h].identifier){k=h;break}-1!=k&&(W.Zc(a,b,d,[k,f]),e[k].Va=!0,g[f].Va=!0)}}function h(a){var b=
[];W.ka(a,function(a,d){"OUTPUT_MATERIAL"==d.type&&b.push({tf:a,node:d})});for(var d=0;d<b.length;++d){var c=b[d].tf,e=b[d].node,f=!1,g=!1,h=W.kl(a);W.Ii(a,h,e.data.C2);for(var k=W.Wj(a,c),l=[],q=[],J={},n=0;n<k;n++){var C=W.kh(a,c,n);C in J||(J[C]=0);var z=W.ld(a,C,c,J[C]++);l.push([C,c,z]);switch(z[1]){case 0:f=!0;q.push([C,h,z]);break;case 2:var g=!0,m=W.kl(a);W.Ii(a,m,e.data.BZ);q.push([C,m,[z[0],0]])}}for(n=0;n<l.length;n++)W.hj(a,l[n][0],l[n][1],l[n][2]);for(n=0;n<q.length;n++)W.Zc(a,q[n][0],
q[n][1],q[n][2]);W.Dg(a,c);f?(g&&O(a,h,m),r(a)):(c=W.lb(a,h),a.ia=[0,c],a.Ka=[])}}function O(a,b,d){b=W.wn(a,b,W.gm);var c=x(b);if(c.length){d=W.wn(a,d,W.gm);d=W.clone(d,qa,ha);W.ka(d,function(a,b){b.name="displacement%join%"+b.name});W.WK(d,b,[],[]);var e=-1;W.ka(b,function(a,b){if("DISPLACEMENT_BUMP"==b.type)return e=a,1});for(d=0;d<c.length;d++){var f=c[d],g=W.lb(b,f);k(b,e,f,"Normal");m(g)}}a.ia=b.ia;a.Ka=b.Ka}function m(a){a=a.jb;for(var b=0;b<a.length;b++){var d=a[b];"USE_NORMAL_IN"==d[0]&&
(d[1]=1)}}function x(a){var b=[];W.ka(a,function(a,d){for(var c=!1,e=d.inputs,f=0;f<e.length;f++)if("Normal"==e[f].identifier){c=!e[f].Va;break}c&&b.push(a)});return b}function r(a){var b=[];W.ka(a,function(a,d){"OUTPUT_SURFACE"==d.type&&b.push({tf:a,node:d})});var d=[];b.length&&W.ka(a,function(a,b){"MIX_SHADER"==b.type&&d.push({tf:a,node:b})});for(var c=0;c<b.length;++c){var e=b[c].tf,f=b[c].node,h=W.kl(a);W.Ii(a,h,f.data.YW);var k=W.kl(a);W.Ii(a,k,f.data.ZW);W.Zc(a,h,k,[4,2]);for(var l=W.Wj(a,
e),q=[],J=[],n={},C=0;C<l;C++){var z=W.kh(a,e,C),m=W.lb(a,z);z in n||(n[z]=0);var y=W.ld(a,z,e,n[z]++);q.push([z,e,y]);J.push([z,h,y]);if("BSDF_GLOSSY"==m.type||"BSDF_DIFFUSE"==m.type||"MIX_SHADER"==m.type||"EMISSION"==m.type||"BSDF_TRANSPARENT"==m.type)for(J.push([z,h,[1,1]]),J.push([z,h,[2,2]]),J.push([z,h,[3,3]]),J.push([z,h,[4,4]]),J.push([z,h,[5,5]]),J.push([z,h,[6,6]]),J.push([z,h,[7,7]]),J.push([z,h,[8,8]]),J.push([z,h,[9,9]]),J.push([z,h,[10,10]]),z=0;z<d.length;++z)for(var m=d[z].tf,y=W.Wj(a,
m),G=0;G<y;G++){var p=W.kh(a,m,G),v=W.lb(a,p),B=W.ld(a,p,m,0);0==B[1]||"BSDF_GLOSSY"!=v.type&&"BSDF_DIFFUSE"!=v.type&&"MIX_SHADER"!=v.type&&"EMISSION"!=v.type&&"BSDF_TRANSPARENT"!=v.type||(v=1==B[1]?3:13,J.push([p,m,[1,v]]),J.push([p,m,[2,v+1]]),J.push([p,m,[3,v+2]]),J.push([p,m,[4,v+3]]),J.push([p,m,[5,v+4]]),J.push([p,m,[6,v+5]]),J.push([p,m,[7,v+6]]),J.push([p,m,[8,v+7]]),J.push([p,m,[9,v+8]]),J.push([p,m,[10,v+9]]))}}g(a,f.data.value,h,k);J.push([k,e,[0,0]]);for(C=0;C<q.length;C++)W.hj(a,q[C][0],
q[C][1],q[C][2]);for(C=0;C<J.length;C++)W.Zc(a,J[C][0],J[C][1],J[C][2])}}function g(a,b,d,c){var e=[],f={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},g=C(a,f,0,null,null),h=g;k(a,d,g,"E");k(a,d,g,"A");k(a,d,g,"D");for(var g=sa.R(),g=z.xc(g,"LAMP",z.Vc),l,q,J=0;J<g.length;J++){f={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};l=C(a,f,0,null,null);f={name:"LIGHTING_APPLY",type:"LIGHTING_APPLY"};q=C(a,f,0,null,null);k(a,h,q,"color");k(a,h,q,"specular");k(a,l,q,"ldir");k(a,d,q,"normal");k(a,d,q,"D");
k(a,d,q,"S");k(a,l,q,"lcolorint");k(a,d,l,"shadow_factor");h=b.$W;f={name:h,type:h};h=C(a,f,0,null,null);k(a,l,h,"ldir");k(a,l,h,"lfac");k(a,d,h,"normal");k(a,l,h,"norm_fac");k(a,d,h,"bsdf_params");k(a,h,q,"lfactor");k(a,h,q,"sfactor");for(h=0;h<e.length;h++)W.Zc(a,e[h][0],q,e[h][1]);h=q}k(a,d,c,"bsdf_params");k(a,d,c,"d_color");k(a,d,c,"s_color");k(a,d,c,"e_color");k(a,d,c,"emission");k(a,d,c,"a_color");k(a,d,c,"alpha");k(a,h,c,"color");k(a,h,c,"specular")}function e(a){var b=[];W.ka(a,function(a,
d){"OUTPUT_WORLD"==d.type&&b.push({tf:a,node:d})});for(var d=0;d<b.length;++d){var c=b[d].tf,e=b[d].node,f=W.kl(a);W.Ii(a,f,e.data.D2);for(var e=W.Wj(a,c),g=[],h=[],k={},l=0;l<e;l++){var q=W.kh(a,c,l);q in k||(k[q]=0);var J=W.ld(a,q,c,k[q]++);g.push([q,c,J]);switch(J[1]){case 0:h.push([q,f,J])}}for(l=0;l<g.length;l++)W.hj(a,g[l][0],g[l][1],g[l][2]);for(l=0;l<h.length;l++)W.Zc(a,h[l][0],h[l][1],h[l][2]);W.Dg(a,c)}}function B(a,b){var d=[];W.ka(a,function(a,b){"MIX_SHADER"!=b.type&&"ADD_SHADER"!=b.type||
d.push({tf:a,node:b})});if(d.length)for(var c={name:"RGB_WORLD_NODE",type:"RGB_WORLD_NODE",factor:.5},e=0;e<d.length;e++){var f=d[e].tf,g=d[e].node;c.name=g.name;c.fac=g.inputs[0].Qa;c.fac_is_linked=g.inputs[0].Va;c.color1_is_linked=g.inputs[1].Va;c.color2_is_linked=g.inputs[2].Va;switch(g.type){case "ADD_SHADER":c.type="ADD_WORLD_RGB";break;case "MIX_SHADER":c.type="MIX_WORLD_RGB"}for(var g=C(a,c,0,b,null),h=W.Wj(a,f),k=[],l=[],q={},J=0;J<h;J++){var n=W.kh(a,f,J);n in q||(q[n]=0);var z=W.ld(a,n,
f,q[n]++);k.push([n,f,z]);l.push([n,g,z])}for(J=0;J<k.length;J++)W.hj(a,k[J][0],k[J][1],k[J][2]);for(J=0;J<l.length;J++)W.Zc(a,l[J][0],l[J][1],l[J][2]);h=W.th(a,f);k=[];l=[];q={};for(J=0;J<h;J++)n=W.Yh(a,f,J),n in q||(q[n]=0),z=W.ld(a,f,n,q[n]++),k.push([f,n,z]),l.push([g,n,z]);for(J=0;J<k.length;J++)W.hj(a,k[J][0],k[J][1],k[J][2]);for(J=0;J<l.length;J++)W.Zc(a,l[J][0],l[J][1],l[J][2]);W.Dg(a,f)}}function v(a){var b=-1,d=[],c=[],e="OUTPUT_WORLD_SURFACE BACKGROUND RGB VALUE ADD_WORLD_RGB MIX_WORLD_RGB TEXTURE_ENVIRONMENT_EQUIRECTANGULAR TEXTURE_ENVIRONMENT_MIRROR_BALL GEOMETRY_NO GEOMETRY_TRN GEOMETRY_GL GEOMETRY_IN TEXTURE_COLOR TEX_COORD_GE TEX_COORD_OB TEX_COORD_NO COMBRGB COMBHSV CURVE_RGB CURVE_VEC B4W_LINEAR_TO_SRGB B4W_NORMAL_VIEW B4W_VECTOR_VIEW B4W_SRGB_TO_LINEAR B4W_REFLECT B4W_CLAMP B4W_TIME B4W_SMOOTHSTEP NORMAL MAPPING MATH_ADD MATH_SUBTRACT MATH_MULTIPLY MATH_DIVIDE MATH_SINE MATH_COSINE MATH_TANGENT MATH_ARCSINE MATH_ARCCOSINE MATH_ARCTANGENT MATH_POWER MATH_LOGARITHM MATH_MINIMUM MATH_MAXIMUM MATH_ROUND MATH_LESS_THAN MATH_GREATER_THAN MATH_MODULO MATH_ABSOLUTE MIX_RGB_MIX MIX_RGB_ADD MIX_RGB_MULTIPLY MIX_RGB_SUBTRACT MIX_RGB_SCREEN MIX_RGB_DIVIDE MIX_RGB_DIFFERENCE MIX_RGB_DARKEN MIX_RGB_LIGHTEN MIX_RGB_OVERLAY MIX_RGB_DODGE MIX_RGB_BURN MIX_RGB_HUE MIX_RGB_SATURATION MIX_RGB_VALUE MIX_RGB_COLOR MIX_RGB_SOFT_LIGHT MIX_RGB_LINEAR_LIGHT SEPRGB SEPHSV VALTORGB VECT_TRANSFORM VECT_MATH_ADD VECT_MATH_SUBTRACT VECT_MATH_AVERAGE VECT_MATH_DOT_PRODUCT VECT_MATH_CROSS_PRODUCT VECT_MATH_NORMALIZE".split(" ");
W.ka(a,function(a,c){switch(e.indexOf(c.type)){case -1:d.push({tf:a,node:c});break;case 0:b=a}});for(var f=0;f<d.length;f++)for(var g=d[f].tf,h=W.th(a,g),k={},l=0;l<h;l++){var q=W.Yh(a,g,l);q in k||(k[q]=0);var J=W.ld(a,g,q,k[q]++);c.push([g,q,J])}for(f=0;f<c.length;f++)W.hj(a,c[f][0],c[f][1],c[f][2]);c.length&&(c=W.wn(a,b,W.gm),a.ia=c.ia,a.Ka=c.Ka)}function P(a){var b=-1,d=[],c=[];W.ka(a,function(a,c){switch(c.type){case "ADD_WORLD_RGB":case "MIX_WORLD_RGB":var e={tf:a,node:c};d.push(e);break;case "OUTPUT_WORLD_SURFACE":b=
a,e={tf:a,node:c},d.push(e)}});for(var e=0;e<d.length;e++)for(var f=d[e].tf,g=d[e].node,h=W.Wj(a,f),k={},l=0;l<h;l++){var q=W.kh(a,f,l),J=W.lb(a,q);q in k||(k[q]=0);var n=W.ld(a,q,f,k[q]++);"OUTPUT_WORLD_SURFACE"!=g.type&&0==n[1]||"ADD_WORLD_RGB"==J.type||"MIX_WORLD_RGB"==J.type||"BACKGROUND"==J.type||c.push([q,f,n])}for(e=0;e<c.length;e++)W.hj(a,c[e][0],c[e][1],c[e][2]);c.length&&(c=W.wn(a,b,W.gm),a.ia=c.ia,a.Ka=c.Ka)}function N(a,b,d,c){a+=d;switch(b){case "GLOW":a+="11";case "COLOR_ID":case "SHADOW":a+=
"00";default:a+="10"}c&&c.pJ&&(a+=c.pJ);c&&c.oJ&&(a+=c.oJ);return a}function M(a,b){W.yi(a,function(d,c,e){var f=W.lb(a,c);c==b&&"Color"==f.inputs[e[1]].identifier&&W.hj(a,d,c,e)})}function p(){var a=W.create();W.Ii(a,0,{data:null,jb:[],nb:[],inputs:[{Qa:new Float32Array([0,0,0]),identifier:"Color",Va:!1,name:"Color"},{Qa:1,identifier:"Alpha",Va:!1,name:"Alpha"}],outputs:[],type:"OUTPUT",Af:[]});return a}function I(a){W.ka(a,function(b,d){for(var c=d.inputs,e=d.outputs,f=0;f<c.length;f++)y(a,c[f],
b,f,1);for(f=0;f<e.length;f++)y(a,e[f],b,f,0)})}function y(a,b,d,c,e){if(b.Va){var f=!0;W.yi(a,function(a,b,g){if(!e&&a==d&&g[0]==c||e&&b==d&&g[1]==c)f=!1});f&&(b.Va=!1)}}function D(a,b){var d=[];W.yi(a,function(c,e,f){var g=W.lb(a,c),h=W.lb(a,e),g=Qa.Yi(g.outputs[f[0]].Qa),h=Qa.Yi(h.inputs[f[1]].Qa);if(g!=h){var k,l={default_value:[0,0,0],identifier:"Vector",is_linked:!0,name:"Vector"},q={default_value:0,identifier:"Value",is_linked:!0,name:"Value"};g&&!h?k=ja("vector_to_scalar","B4W_VECTOSCAL",
[l],[q]):!g&&h&&(k=ja("scalar_to_vector","B4W_SCALTOVEC",[q],[l]));C(a,k,0,b,null);d.push([c,e,a.ia[a.ia.length-2],f])}});for(var c=0;c<d.length;++c)W.hj(a,d[c][0],d[c][1],d[c][3]),W.Zc(a,d[c][0],d[c][2],[d[c][3][0],0]),W.Zc(a,d[c][2],d[c][1],[0,d[c][3][1]])}function l(a){var b=[];W.ka(a,function(d,c){switch(c.type){case "B4W_TRANSLUCENCY":W.yi(a,function(e,f,g){var h=W.lb(a,f);e==d&&"MATERIAL_EXT"==h.type&&"Translucency"==c.outputs[g[0]].name&&b.push(e,f,[g[0]+1,g[1]+1])})}});for(var d=0;d<b.length;d+=
3)W.Zc(a,b[d],b[d+1],b[d+2])}function u(a,b){var d=[];W.ka(b,function(b,c){c.name==a.name&&d.push(b)});if(d.length)return d;Qa.K("Node not found")}function L(a){var b=[];W.ka(a,function(a,d){"B4W_PARALLAX"!=d.type&&"REROUTE"!=d.type||b.push(a,d)});for(var d=0;d<b.length;d+=2){var c=b[d],e=b[d+1];if("B4W_PARALLAX"==e.type)F(a,c,e);else if("REROUTE"==e.type){for(var f=W.kh(a,c,0),g=W.th(a,c),h=[],k=[],l=[],q=0;q<g;q++){var J=W.Yh(a,c,q),n=k.indexOf(J),C=W.ld(a,c,J,0<=n?l[n]:0);if(C){var C=C[1],z=e.inputs[0].Qa,
C=W.lb(a,J).inputs[C];switch(typeof z){case "number":if("object"==typeof C.Qa)for(var m=C.Qa,C=0;C<m.length;C++)m[C]=z;else"number"==typeof C.Qa&&(C.Qa=z);break;case "object":if("object"==typeof C.Qa)for(m=C.Qa,C=0;C<m.length;C++)m[C]=z[C];else"number"==typeof C.Qa&&(C.Qa=.35*z[0]+.45*z[1]+.2*z[2])}}z=e.outputs;for(C=0;C<z.length;C++)z[C].Qa=e.inputs[0].Qa;-1!=n?l[n]+=1:(k.push(J),l.push(1),h.push(c,J))}if(-1!=f)for(e=W.ld(a,f,c,0)[0],q=0;q<k.length;q++)for(C=0;C<l[q];C++)g=W.ld(a,c,k[q],C)[1],W.Zc(a,
f,k[q],[e,g]);for(q=0;q<h.length;q+=2)W.ln(a,h[q],h[q+1],-1)}}}function F(a,b,d){var c;a:{c=a.Ka;for(var e=0;e<c.length;e+=3)if(c[e+1]==b&&1==c[e+2][1]){c=c[e];break a}c=-1}-1!=c&&(e=W.lb(a,c),d.data=e.data,W.ln(a,c,b,-1),0==W.th(a,c)&&(b=W.kh(a,c,0),-1!=b&&W.ln(a,b,c,-1),W.Dg(a,c)));d.inputs.splice(1,1)}function U(a){E(a);X(a);K(a)}function K(a){var b={};W.ka(a,function(a,d){if("GEOMETRY_UV"==d.type||"UVMAP"==d.type||"TEX_COORD_UV"==d.type){var c=d.data.value;c in b||(b[c]=[]);b[c].push(a,d)}});
for(var d in b){var c=b[d];if(2<c.length)for(var e=A(d),e=C(a,e,0,void 0,null),f=W.lb(a,e),g=0;g<c.length;g+=2){for(var h=c[g],k=c[g+1],l=[],q={},J=W.th(a,h),n=0;n<J;n++){var z=W.Yh(a,h,n);z in q||(q[z]=0);var m=W.ld(a,h,z,q[z]);q[z]++;l.push(h,z,m);m=m.splice(0,m.length);switch(k.type){case "GEOMETRY_UV":m[0]=0;f.outputs[0].Va=!0;break;case "UVMAP":case "TEX_COORD_UV":m[0]=1,f.outputs[1].Va=!0}W.Zc(a,e,z,m)}for(n=0;n<l.length;n+=3)W.ln(a,l[n],l[n+1],0);W.Dg(a,h)}}}function A(a){var b=ja("merged_uv",
"UV_MERGED",[],[{default_value:[0,0,0],identifier:"UV_geom",is_linked:!1,name:"UV_geom"},{default_value:[0,0,0],identifier:"UV_cycles",is_linked:!1,name:"UV_cycles"}]);b.uv_layer=a;return b}function E(a){var b=[];W.ka(a,function(a,d){"GEOMETRY_VC"!=d.type&&"GEOMETRY_NO"!=d.type&&"GEOMETRY_FB"!=d.type&&"GEOMETRY_VW"!=d.type&&"GEOMETRY_GL"!=d.type&&"GEOMETRY_LO"!=d.type&&"GEOMETRY_OR"!=d.type&&"GEOMETRY_BF"!=d.type&&"GEOMETRY_IN"!=d.type||b.push(a,d)});for(var c=[],e=0;e<b.length;e+=2){for(var f=b[e],
g=b[e+1],h=!0,k=0;k<c.length;k++){var l=c[k];if(d(g,l.ah)){for(var h=[],k=W.th(a,f),q=0;q<k;q++){var J=W.Yh(a,f,q),C=W.ld(a,f,J,0);h.push(f,J,C);W.Zc(a,l.id,J,C)}for(q=0;q<h.length;q+=3)W.ln(a,h[q],h[q+1],0);W.Dg(a,f);h=!1;break}}h&&(l={id:f,ah:g},c.push(l))}}function n(a){for(var b={},d=0;d<a.ia.length;d+=2){var c=a.ia[d];b[c]={St:{},fP:!1}}for(d=0;d<a.Ka.length;d+=3)b[a.Ka[d+1]].St[a.Ka[d]]=!0;for(c in b)f(c,b);for(c in b)b[c]=Object.keys(b[c].St).map(function(a){return parseInt(a,10)});return b}
function f(a,b){var d=b[a];if(!d.fP){var c=Qa.Y(d),e;for(e in d.St){f(e,b);var d=b[e],g;for(g in d.St)c.St[g]=!0}c.fP=!0;b[a]=c}}function X(a){var b=[];W.ka(a,function(a,d){"TEXTURE_COLOR"!=d.type&&"TEXTURE_NORMAL"!=d.type||b.push(a,d)});if(b.length){for(var c=n(a),e=[],f=0;f<b.length;f+=2){for(var g=b[f],h=b[f+1],k=!0,q=0;q<e.length;q++){var l=e[q];if(!(3<=l.Hr.length||!d(h,l.ah)||-1<c[g].indexOf(l.id)||-1<c[l.id].indexOf(g))){for(var J=!1,C=0;C<l.Hr.length;C++){var z=l.Hr[C].id;if(-1<c[g].indexOf(z)||
-1<c[z].indexOf(g)){J=!0;break}}if(!J){for(var q=[],z=W.Wj(a,g),m={},C=0;C<z;C++)J=W.kh(a,g,C),J in m||(m[J]=0),k=W.ld(a,J,g,m[J]++),q.push(J,g,k);for(var z=[],m=W.th(a,g),y={},C=0;C<m;C++)J=W.Yh(a,g,C),J in y||(y[J]=0),k=W.ld(a,g,J,y[J]++),z.push(g,J,k);k=q.concat(z);for(C=0;C<k.length;C+=3)W.ln(a,k[C],k[C+1],0);W.Dg(a,g);C={id:g,ah:h,LZ:q,MZ:z};l.Hr.push(C);k=!1;break}}}k&&(l={id:g,ah:h,Hr:[]},e.push(l))}for(f=0;f<e.length;f++){l=e[f];c=l.Hr.length;for(q=0;q<c;q++){h=l.Hr[q];C=h.ah;g=h.LZ;h=h.MZ;
l.ah.inputs[q+1].Va=C.inputs[0].Va;l.ah.inputs[q+1].Qa=C.inputs[0].Qa;l.ah.outputs[2*(q+1)].Va=C.outputs[0].Va;l.ah.outputs[2*(q+1)].Qa=C.outputs[0].Qa;l.ah.outputs[2*(q+1)+1].Va=C.outputs[1].Va;l.ah.outputs[2*(q+1)+1].Qa=C.outputs[1].Qa;for(C=0;C<g.length;C+=3)J=g[C],k=g[C+2],k[1]+=q+1,W.Zc(a,J,l.id,k);for(C=0;C<h.length;C+=3)J=h[C+1],k=h[C+2],k[0]+=2*(q+1),W.Zc(a,l.id,J,k);l.ah.jb.push(["USE_uv"+(q+2),1])}W.Dg(a,l.id);W.Ii(a,l.id,l.ah)}}}function d(a,b){if(a.type!==b.type)return!1;switch(a.type){case "GEOMETRY_VC":return a.data.value==
b.data.value;case "GEOMETRY_NO":for(var d=a.jb,c=-1,e=0;e<d.length;e++){var f=d[e];if("USE_NORMAL_IN"==f[0]){c=f[1];break}}d=b.jb;f=-1;for(e=0;e<d.length;e++){var g=d[e];if("USE_NORMAL_IN"==g[0]){f=g[1];break}}return c===f;case "GEOMETRY_FB":case "GEOMETRY_VW":case "GEOMETRY_GL":case "GEOMETRY_LO":case "GEOMETRY_OR":case "GEOMETRY_BF":case "GEOMETRY_IN":return!0;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":return a.data.ny==b.data.ny&&a.data.value.Vo==b.data.value.Vo;case "VALUE":case "RGB":return a.Sf==
b.Sf;default:return!1}}function H(a){var b=[],d=[];W.ka(a,function(a,c){"GEOMETRY_VC"==c.type&&b.push(a,c);"GEOMETRY_VW"==c.type&&d.push(a,c)});G(a,b);R(a,d)}function G(a,b){for(var d=0;d<b.length;d+=2){for(var c=b[d],e=b[d+1],f=!1,g=[],h=[],k=[[],[],[]],l=W.th(a,c),q=0;q<l;q++){var J=W.Yh(a,c,q);if("SEPRGB"!=W.lb(a,J).type){f=!1;break}g.push(c,J);for(var C={},n=W.th(a,J),f=0;f<n;f++){var z=W.Yh(a,J,f);z in C||(C[z]=0);var m=W.ld(a,J,z,C[z]++);g.push(J,z);k[m[0]].push(c,z,m)}h.push(J);f=!0}if(f){for(q=
c=l=0;q<k.length;q++)k[q].length&&(l++,c|=1<<2-q);if(l){e.type+=l;e.outputs=[];for(q=0;q<k.length;q++)if(k[q].length)for(e.outputs.push({Qa:0,identifier:"RGB"[q],Va:!0,name:"RGB"[q]}),f=0;f<k[q].length;f+=3)k[q][f+2][0]=Qa.es(c,q);for(q=0;q<g.length;q+=2)W.ln(a,g[q],g[q+1],0);for(q=0;q<h.length;q++)W.Dg(a,h[q]);for(q=0;q<k.length;q++)for(f=0;f<k[q].length;f+=3)W.Zc(a,k[q][f],k[q][f+1],k[q][f+2])}}}}function R(a,b){for(var d=0;d<b.length;d+=2){for(var c=b[d],e=!0,f=[],g=W.th(a,c),h=0;h<g;h++){var q=
W.Yh(a,c,h);if("B4W_REFLECT"==W.lb(a,q).type){var k=W.ld(a,c,q,0),l=W.ld(a,c,q,1);k&&1==k[1]||l&&1==l[1]?e=!1:f.push(c,q)}else e=!1}for(h=0;h<f.length;h+=2)g=a,k=f[h],q=f[h+1],l=W.lb(g,q),l.type+="_WORLD",W.ln(g,k,q,0),l.inputs.splice(0,1),k=W.kh(g,q,0),k!=W.cE&&(W.ld(g,k,q,0)[1]=0);e&&W.Dg(a,c)}}function q(a,b,d,c,e,f){a=a.nodes;for(var g=null,h=0;h<a.length;h++){var q=a[h];e?"GROUP"==q.type&&q.node_tree_name==d&&(g=q):q.type==d&&(g=q)}return g?u(g,b)[0]:(f||Da.error('No "'+d+'" node in node '+c),
-1)}function ja(a,b,d,c){return{name:a,type:b,inputs:d,outputs:c}}function qa(a){var b={name:"",Sf:"",type:"",Af:[],inputs:[],outputs:[],nb:[],data:null,jb:[]};b.name=a.name;b.Sf=a.Sf;b.type=a.type;for(var d=b.Af,c=a.Af,e=0;e<c.length;e++)d.push(za(c[e]));d=b.nb;c=a.nb;for(e=0;e<c.length;e++)d.push(za(c[e]));d=b.inputs;c=a.inputs;for(e=0;e<c.length;e++)d.push(oa(c[e]));d=b.outputs;c=a.outputs;for(e=0;e<c.length;e++)d.push(oa(c[e]));d=b.jb;c=a.jb;for(e=0;e<c.length;e++)d.push(c[e].slice());b.data=
a.data;return b}function C(a,b,d,c,e){var f=b.name,g=b.name,h=b.type,q=[],k=[],l=[],J=[],n=null,z="uv_layer"in b?b.uv_layer||e&&e.oJ||"":"",m="color_layer"in b?b.color_layer||e&&e.pJ||"":"",y=[];switch(h){case "BSDF_ANISOTROPIC":case "BSDF_GLASS":case "BSDF_HAIR":case "BSDF_TRANSLUCENT":case "BSDF_REFRACTION":case "BSDF_TOON":case "BSDF_VELVET":case "SUBSURFACE_SCATTERING":case "AMBIENT_OCCLUSION":case "VOLUME_ABSORPTION":case "VOLUME_SCATTER":case "BLACKBODY":case "WAVELENGTH":case "SEPXYZ":case "COMBXYZ":case "LIGHT_FALLOFF":case "TEX_SKY":case "TEX_NOISE":case "TEX_WAVE":case "TEX_MUSGRAVE":case "TEX_GRADIENT":case "TEX_MAGIC":case "TEX_CHECKER":case "TEX_BRICK":case "WIREFRAME":case "TANGENT":case "LIGHT_PATH":case "ATTRIBUTE":case "HOLDOUT":case "HAIR_INFO":case "SCRIPT":k=
Z(b);l=fa(b);Da.warn(h+" node is not fully supported.");break;case "BRIGHTCONTRAST":case "ADD_SHADER":k=Z(b);l=fa(b);break;case "MIX_SHADER":k.push(ca(b,"Fac"));var G=ca(b,"Shader"),l=G.Va;k.push(G);(G=ca(b,"Shader_001"))||(G=ca(b,"Shader.001"));var p=G.Va;k.push(G);k.push(S("d_color1","d_color1",[0,0,0],l));k.push(S("d_roughness1","d_roughness1",0,l));k.push(S("s_color1","s_color1",[0,0,0],l));k.push(S("s_roughness1","s_roughness1",0,l));k.push(S("metalness1","metalness1",0,l));k.push(S("normal1",
"normal1",[0,0,0],l));k.push(S("e_color1","e_color1",[0,0,0],l));k.push(S("emission1","emission1",0,l));k.push(S("a_color1","a_color1",[0,0,0],l));k.push(S("alpha1","alpha1",1,l));k.push(S("d_color2","d_color2",[0,0,0],p));k.push(S("d_roughness2","d_roughness2",0,p));k.push(S("s_color2","s_color2",[0,0,0],p));k.push(S("s_roughness2","s_roughness2",0,p));k.push(S("metalness2","metalness2",0,p));k.push(S("normal2","normal2",[0,0,0],p));k.push(S("e_color2","e_color2",[0,0,0],p));k.push(S("emission2",
"emission2",0,p));k.push(S("a_color2","a_color2",[0,0,0],p));k.push(S("alpha2","alpha2",1,p));l=V(b,"Shader");G=l.Va;l=[l,S("d_color","d_color",[0,0,0],G),S("d_roughness","d_roughness",0,G),S("s_color","s_color",[0,0,0],G),S("s_roughness","s_roughness",0,G),S("metalness","metalness",0,G),S("normal","normal",[0,0,0],G),S("e_color","e_color",[0,0,0],G),S("emission","emission",0,G),S("a_color","a_color",[0,0,0],G),S("alpha","alpha",1,G)];break;case "OBJECT_INFO":k=Z(b);l=[];G=V(b,"Location");p=V(b,"Object Index");
z=V(b,"Material Index");m=V(b,"Random");l.push(G);l.push(p);l.push(z);l.push(m);y.push(["USE_LOCATION_OUT",G.Va|0]);y.push(["USE_OBJ_IND_OUT",p.Va|0]);y.push(["USE_MAT_IND_OUT",z.Va|0]);y.push(["USE_RANDOM_OUT",m.Va|0]);break;case "UVMAP":z||(h="EMPTY_UV");"EMPTY_UV"!=h&&(n=ea("param_"+h+"_a"),G=ea("param_"+h+"_v"),q.push(aa(n)),q.push(aa(G)),J.push(aa(G)),n={name:n,value:z});l=fa(b);break;case "UV_MERGED":n=ea("param_UV_MERGED_a");G=ea("param_UV_MERGED_v");q.push(aa(n));q.push(aa(G));l.push(V(b,
"UV_geom"));l.push(V(b,"UV_cycles"));J.push(aa(G));n={name:n,value:z};break;case "CAMERA":k=[];l=fa(b);break;case "COMBRGB":case "COMBHSV":k=Z(b);l=fa(b);break;case "CURVE_RGB":case "CURVE_VEC":"CURVE_RGB"==h?(ua(b,0,0)&&y.push(["READ_R",1]),ua(b,1,0)&&y.push(["READ_G",1]),ua(b,2,0)&&y.push(["READ_B",1]),ua(b,3,0)&&y.push(["READ_A",1])):(ua(b,0,-1)&&y.push(["READ_R",1]),ua(b,1,-1)&&y.push(["READ_G",1]),ua(b,2,-1)&&y.push(["READ_B",1]));k=Z(b);l=fa(b);n={value:b};break;case "PARTICLE_INFO":k=Z(b);
l=fa(b);for(p=0;p<b.outputs.length;p++){var z=b.outputs[p],m=z.identifier,v=aa("v_param_PART_INFO_"+m.replace(" ",""));if(z.is_linked)switch(m){case "Size":y.push(["PART_INFO_SIZE",ta.fa(1)]);break;case "Age":y.push(["PART_INFO_AGE",ta.fa(1)]);break;case "Lifetime":y.push(["PART_INFO_LT",ta.fa(1)]);break;case "Location":y.push(["PART_INFO_LOC",ta.fa(1)]);break;case "Index":n=G=aa("a_param_PART_INFO_"+z.identifier.replace(" ",""));y.push(["PART_INFO_IND",ta.fa(1)]);break;case "Velocity":y.push(["PART_INFO_VEL",
ta.fa(1)]);break;case "Angular Velocity":y.push(["PART_INFO_A_VEL",ta.fa(1)])}"Age"!=m&&"Lifetime"!=m&&"Size"!=m&&(q.push(v),J.push(v))}G&&q.push(G);break;case "NEW_GEOMETRY":case "GEOMETRY":if(!la(b))return!0;h=ba(b,d);if(!h)return Da.error("Geometry output is not supported"),null;switch(h){case "GEOMETRY_UV":z||(h="EMPTY_UV");"EMPTY_UV"!=h&&(n=ea("param_GEOMETRY_UV_a"),G=ea("param_GEOMETRY_UV_v"),q.push(aa(n)),q.push(aa(G)),J.push(aa(G)),n={name:n,value:z});l.push(V(b,"UV"));break;case "GEOMETRY_VC":m||
(h="EMPTY_VC");"EMPTY_VC"!=h&&(n=ea("param_GEOMETRY_VC_a"),G=ea("param_GEOMETRY_VC_v"),q.push(aa(n)),q.push(aa(G)),J.push(aa(G)),n={name:n,value:m});l.push(V(b,"Vertex Color"));break;case "GEOMETRY_NO":k.push(S("Normal","Normal",[0,0,0],!1));y.push(["USE_NORMAL_IN",0]);l.push(V(b,"Normal"));break;case "GEOMETRY_TRN":h="GEOMETRY_NO";k.push(S("Normal","Normal",[0,0,0],!1));l.push(V(b,"True Normal"));y.push(["USE_NORMAL_IN",0]);Da.warn("Geometry True Normal output is not fully supported.");break;case "GEOMETRY_FB":l.push(V(b,
"Front/Back"));break;case "GEOMETRY_VW":l.push(V(b,"View"));break;case "GEOMETRY_GL":l.push(V(b,"Global")||V(b,"Position"));break;case "GEOMETRY_LO":l.push(V(b,"Local"));break;case "GEOMETRY_OR":G=ea("param_GEOMETRY_OR_v");q.push(aa(G));l.push(V(b,"Orco"));J.push(aa(G));break;case "GEOMETRY_IN":l.push(V(b,"Incoming"));break;case "GEOMETRY_BF":l.push(V(b,"Backfacing"))}break;case "TEX_COORD":if(!la(b))return!0;h=da(b,d);switch(h){case "TEX_COORD_UV":z||(h="EMPTY_UV");"EMPTY_UV"!=h&&(n=ea("param_TEX_COORD_UV_a"),
G=ea("param_TEX_COORD_UV_v"),q.push(aa(n)),q.push(aa(G)),J.push(aa(G)),n={name:n,value:z});l.push(V(b,"UV"));break;case "TEX_COORD_NO":l.push(V(b,"Normal"));break;case "TEX_COORD_GE":G=ea("param_TEX_COORD_GE_v");q.push(aa(G));l.push(V(b,"Generated"));J.push(aa(G));break;case "TEX_COORD_OB":l.push(V(b,"Object"));break;case "TEX_COORD_CA":l.push(V(b,"Camera"));break;case "TEX_COORD_WI":l.push(V(b,"Window"));break;case "TEX_COORD_RE":l.push(V(b,"Reflection"))}break;case "GROUP":G=b.node_tree_name;switch(G){case "B4W_LINEAR_TO_SRGB":if(!pa(b,
[1],[1])){n=ia(b,c,e);break}h="B4W_LINEAR_TO_SRGB";break;case "B4W_NORMAL_VIEW":case "B4W_VECTOR_VIEW":if(!pa(b,[1],[1])){n=ia(b,c,e);break}h="B4W_VECTOR_VIEW";break;case "B4W_SRGB_TO_LINEAR":if(!pa(b,[1],[1])){n=ia(b,c,e);break}h="B4W_SRGB_TO_LINEAR";break;case "B4W_REFLECT":if(!pa(b,[1,1],[1])){n=ia(b,c,e);break}h="B4W_REFLECT";break;case "B4W_REFRACTION":if(!pa(b,[1,0],[1])){n=ia(b,c,e);break}h="B4W_REFRACTION";break;case "B4W_PARALLAX":if(!pa(b,[1,1,0,0,0],[1])){n=ia(b,c,e);break}p=ea("param_B4W_PARALLAX_texture");
J.push(aa(p));h="B4W_PARALLAX";break;case "B4W_CLAMP":if(!pa(b,[1],[1])){n=ia(b,c,e);break}h="B4W_CLAMP";break;case "B4W_TRANSLUCENCY":if(!pa(b,[0,0,0,0,0],[0])){n=ia(b,c,e);break}h="B4W_TRANSLUCENCY";break;case "B4W_TIME":if(!pa(b,[],[0])){n=ia(b,c,e);break}h="B4W_TIME";break;case "B4W_SMOOTHSTEP":if(!pa(b,[0,0,0],[0])){n=ia(b,c,e);break}h="B4W_SMOOTHSTEP";break;case "B4W_GLOW_OUTPUT":h="B4W_GLOW_OUTPUT";break;default:n=ia(b,c,e)}k=Z(b);l=fa(b);"B4W_TRANSLUCENCY"==G&&(G=S("TranslucencyParams","TranslucencyParams",
[0,0,0,0]),G.Va=l[0].Va,l.push(G));break;case "LAMP":(G=b.lamp)?(G.uuid in Fa?y.push(["LAMP_INDEX",String(Fa[G.uuid])]):(Fa[G.uuid]=Ra,y.push(["LAMP_INDEX",String(Ra++)])),n=Fa):(Da.error("There is no lamp in node: "+b.name),y.push(["LAMP_INDEX",-1]));l.push(V(b,"Color"));l.push(V(b,"Light Vector"));l.push(V(b,"Distance"));l.push(V(b,"Visibility Factor"));break;case "LIGHTING_AMBIENT":k=[S("E","E",[0,0,0],!0),S("A","A",[0,0,0],!0),S("D","D",[0,0,0],!0)];l=[S("color","color",[0,0,0],!0),S("specular",
"specular",[0,0,0],!0)];break;case "LIGHTING_BEGIN":l=[S("E","E",[0,0,0],!0),S("A","A",[0,0,0],!0),S("D","D",[0,0,0],!0),S("S","S",[0,0,0],!0),S("normal","normal",[0,0,0],!0),S("dif_params","dif_params",[0,0],!0),S("sp_params","sp_params",[0,0],!0),S("shadow_factor","shadow_factor",0,!0),S("translucency_color","translucency_color",0,!0),S("translucency_params","translucency_params",[0,0,0,0],!0)];break;case "LIGHTING_END":k=[S("color","color",[0,0,0],!0),S("specular","specular",[0,0,0],!0)];break;
case "LIGHTING_LAMP":k=[S("shadow_factor","shadow_factor",0,!0)];l=[S("ldir","ldir",[0,0,0],!0),S("lfac","lfac",[0,0],!0),S("lcolorint","lcolorint",[0,0,0],!0),S("norm_fac","norm_fac",0,!0)];break;case "DIFFUSE_LAMBERT":k=[S("ldir","ldir",[0,0,0],!0),S("lfac","lfac",[0,0],!0),S("normal","normal",[0,0,0],!0),S("norm_fac","norm_fac",0,!0)];l=[S("lfactor","lfactor",0,!0)];y.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "DIFFUSE_FRESNEL":case "DIFFUSE_MINNAERT":case "DIFFUSE_OREN_NAYAR":case "DIFFUSE_TOON":k=
[S("ldir","ldir",[0,0,0],!0),S("lfac","lfac",[0,0],!0),S("normal","normal",[0,0,0],!0),S("norm_fac","norm_fac",0,!0),S("dif_params","dif_params",[0,0],!0)];l=[S("lfactor","lfactor",0,!0)];y.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "SPECULAR_BLINN":case "SPECULAR_PHONG":case "SPECULAR_COOKTORR":k=[S("ldir","ldir",[0,0,0],!0),S("lfac","lfac",[0,0],!0),S("normal","normal",[0,0,0],!0),S("norm_fac","norm_fac",0,!0),S("sp_params","sp_params",[0,0],!0)];l=[S("sfactor","sfactor",0,
!0)];y.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "SPECULAR_TOON":case "SPECULAR_WARDISO":k=[S("ldir","ldir",[0,0,0],!0),S("lfac","lfac",[0,0],!0),S("normal","normal",[0,0,0],!0),S("norm_fac","norm_fac",0,!0),S("sp_params","sp_params",[0,0],!0)];l=[S("sfactor","sfactor",0,!0)];y.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "BSDF_COMPUTE":k=[S("ldir","ldir",[0,0,0],!0),S("lfac","lfac",[0,0],!0),S("normal","normal",[0,0,0],!0),S("norm_fac","norm_fac",0,!0),
S("bsdf_params","bsdf_params",[0,0,0,0],!0)];l=[S("lfactor","lfactor",0,!0),S("sfactor","sfactor",0,!0)];break;case "LIGHTING_APPLY":k=[S("color","color",[0,0,0,0],!0),S("specular","specular",[0,0,0],!0),S("lfactor","lfactor",0,!0),S("sfactor","sfactor",0,!0),S("ldir","ldir",[0,0,0],!0),S("normal","normal",[0,0,0],!0),S("translucency_params","translucency_params",[0,0,0,0],!0),S("D","D",[0,0,0],!0),S("S","S",[0,0,0],!0),S("lcolorint","lcolorint",[0,0,0],!0),S("translucency_color","translucency_color",
0,!0)];l=[S("color","color",[0,0,0,0],!0),S("specular","specular",[0,0,0],!0)];break;case "NORMAL":k=Z(b);l=fa(b);G=V(b,"Normal");J.push(aa(ea("param_NORMAL_Normal"),G.Qa,3));break;case "MAPPING":G=b.vector_type;h="MAPPING";k.push(ca(b,"Vector"));l.push(V(b,"Vector"));var p=Qa.Qh(b.rotation),z=Qa.Qh(b.scale),m=Qa.Qh(b.translation),v=Ya.create(),B=Qa.UZ(p,Ya.create());if("TEXTURE"==G||"NORMAL"==G)z[0]=z[0]||1,z[1]=z[1]||1,z[2]=z[2]||1;Ya.multiply(B,new Float32Array([z[0],0,0,0,z[1],0,0,0,z[2]]),v);
v=Qa.b2(v,Ga.create());switch(G){case "POINT":v[12]=m[0];v[13]=m[1];v[14]=m[2];break;case "TEXTURE":v[12]=m[0];v[13]=m[1];v[14]=m[2];v=Ga.invert(v,v);break;case "NORMAL":Ga.invert(v,v),Ga.transpose(v,v)}switch(G){case "NORMAL":y.push(["MAPPING_IS_NORMAL",1]);case "TEXTURE":y.push(["MAPPING_TRS_MATRIX_DEF",1]);y.push(["MAPPING_TRS_MATRIX",ta.fa(v,16)]);break;case "POINT":0!==cb.length(p)?(y.push(["MAPPING_TRS_MATRIX_DEF",1]),y.push(["MAPPING_TRS_MATRIX",ta.fa(v,16)])):(0!==cb.sqrDist(z,Qa.Mt)&&(y.push(["MAPPING_SCALE_DEF",
1]),y.push(["MAPPING_SCALE",ta.fa(z,3)])),0!==cb.length(m)&&(y.push(["MAPPING_TRANS_DEF",1]),y.push(["MAPPING_TRANS",ta.fa(m,3)])));break;case "VECTOR":0!==cb.length(p)?(y.push(["MAPPING_TRS_MATRIX_DEF",1]),y.push(["MAPPING_TRS_MATRIX",ta.fa(v,16)])):0!==cb.sqrDist(z,Qa.Mt)&&(y.push(["MAPPING_SCALE_DEF",1]),y.push(["MAPPING_SCALE",ta.fa(z,3)]))}b.use_min&&(y.push(["MAPPING_MIN_CLIP_DEF",1]),y.push(["MAPPING_MIN_CLIP",ta.fa(b.min,3)]));b.use_max&&(y.push(["MAPPING_MAX_CLIP_DEF",1]),y.push(["MAPPING_MAX_CLIP",
ta.fa(b.max,3)]));break;case "MATERIAL":case "MATERIAL_EXT":var n=[],G=[],p=[],z=[S("E","E",[0,0,0],!0),S("A","A",[0,0,0],!0),S("D","D",[0,0,0],!0),S("S","S",[0,0,0],!0),S("normal","normal",[0,0,0],!0),S("dif_params","dif_params",[0,0],!0),S("sp_params","sp_params",[0,0],!0),S("shadow_factor","shadow_factor",0,!0)],m=[S("color","color",[0,0,0],!0),S("specular","specular",[0,0,0],!0),S("normal","normal",[0,0,0],!0)],v=[V(b,"Color"),V(b,"Alpha"),V(b,"Normal")],B=[],u=ca(b,"Color");u.Qa.splice(3);p.push(u);
k.push(u);u=ca(b,"Spec");u.Qa.splice(3);p.push(u);k.push(u);(u=ca(b,"DiffuseIntensity"))||(u=ca(b,"Refl"));u.Qa=b.diffuse_intensity;p.push(u);k.push(u);var A=ca(b,"Normal");A.Qa.splice(3);p.push(A);k.push(A);"MATERIAL_EXT"==h?((u=ca(b,"Emit"))||(u=S("Emit","Emit",0)),p.push(u),k.push(u),(u=ca(b,"Translucency"))?(u.Qa=0,u.name="Translucency",u.identifier="Translucency"):u=S("Translucency","Translucency",0),k.push(u),(u=ca(b,"Translucency"))?(u.Qa=[0,0,0,0],u.name="TranslucencyParams",u.identifier=
"TranslucencyParams"):u=S("TranslucencyParams","TranslucencyParams",[0,0,0,0]),k.push(u),l=ca(b,"Reflectivity"),u=ca(b,"Ray Mirror"),l?(u=l,l="Reflectivity"):u?l="Ray Mirror":(u=l,l="Reflectivity"),u||(u=S(l,l,0)),k.push(u),m.push(u),(u=ca(b,"SpecTra"))||(u=S("SpecTra","SpecTra",0)),k.push(u),m.push(u),(u=ca(b,"Alpha"))||(u=S("Alpha","Alpha",b.alpha)),k.push(u),m.push(u),v.push(V(b,"Diffuse")),v.push(V(b,"Spec")),n.push(["MATERIAL_EXT",1]),G.push(["MATERIAL_EXT",1])):(p.push(S("emit_intensity","emit_intensity",
0)),m.push(S("reflect_factor","reflect_factor",0)),m.push(S("specular_alpha","specular_alpha",0)),m.push(S("alpha_in","alpha_in",0)),v.push(S("diffuse_out","diffuse_out",0)),v.push(S("spec_out","spec_out",0)),n.push(["MATERIAL_EXT",0]),G.push(["MATERIAL_EXT",0]));B.push(aa(ea("param_MATERIAL_alpha"),b.alpha));B.push(aa(ea("param_MATERIAL_spec_alpha"),b.specular_alpha));l=v;n.push(["USE_MATERIAL_NORMAL",A.Va|0]);b.use_diffuse&&(n.push(["USE_MATERIAL_DIFFUSE",1]),G.push(["USE_MATERIAL_DIFFUSE",1]));
b.use_specular&&G.push(["USE_MATERIAL_SPECULAR",1]);var u=[],D=0;switch(b.specular_shader){case "COOKTORR":case "PHONG":A=b.specular_hardness;break;case "WARDISO":A=b.specular_slope;break;case "TOON":A=b.specular_toon_size;D=b.specular_toon_smooth;break;case "BLINN":A=b.specular_ior;D=b.specular_hardness;break;default:Da.error("unsupported specular shader: "+b.specular_shader+' (material "'+b.material_name+'")'),A=b.specular_hardness}var E,ha;switch(b.diffuse_shader){case "LAMBERT":ha=E=0;break;case "OREN_NAYAR":E=
b.roughness;ha=0;break;case "FRESNEL":E=b.diffuse_fresnel;ha=b.diffuse_fresnel_factor;break;case "MINNAERT":E=b.darkness;ha=0;break;case "TOON":E=b.diffuse_toon_size;ha=b.diffuse_toon_smooth;break;default:Da.error("unsupported diffuse shader: "+b.diffuse_shader+' (material "'+b.material_name+'")'),ha=E=0}u.push(aa(ea("param_MATERIAL_diffuse"),[E,ha],2));u.push(aa(ea("param_MATERIAL_spec"),[b.specular_intensity,A,D],3));n.push(["SHADELESS_MAT",b.use_shadeless?1:0]);A={name:b.name,value:{Yf:b.specular_shader,
Kf:b.diffuse_shader,Nc:b.use_shadeless,zf:b.use_tangent_shading}};n={name:b.name,value:{Yf:b.specular_shader,Kf:b.diffuse_shader,Nc:b.use_shadeless,zf:b.use_tangent_shading},c2:{name:"material_begin",type:"MATERIAL_BEGIN",inputs:p,outputs:z,nb:u,data:A,jb:n,Af:[]},d2:{name:"material_end",type:"MATERIAL_END",inputs:m,outputs:v,nb:B,data:A,jb:G,Af:[]}};break;case "BSDF_DIFFUSE":k=Z(b);y.push(["USE_NORMAL_IN",k[2].Va|0]);l=V(b,"BSDF");p=l.Va;l=[l,S("d_color","d_color",[0,0,0],p),S("d_roughness","d_roughness",
0,p),S("s_color","s_color",[0,0,0],p),S("s_roughness","s_roughness",0,p),S("metalness","metalness",0,p),S("normal","normal",[0,0,0],p),S("e_color","e_color",[0,0,0],p),S("emisson","emisson",0,p),S("a_color","a_color",[0,0,0],p),S("alpha","alpha",1,p)];break;case "BSDF_GLOSSY":k=Z(b);y.push(["USE_NORMAL_IN",k[2].Va|0]);l=V(b,"BSDF");p=l.Va;l=[l,S("d_color","d_color",[0,0,0],p),S("d_roughness","d_roughness",0,p),S("s_color","s_color",[0,0,0],p),S("s_roughness","s_roughness",0,p),S("metalness","metalness",
1,p),S("normal","normal",[0,0,0],p),S("e_color","e_color",[0,0,0],p),S("emisson","emisson",0,p),S("a_color","a_color",[0,0,0],p),S("alpha","alpha",1,p)];break;case "BSDF_TRANSPARENT":k=Z(b);l=V(b,"BSDF");p=l.Va;l=[l,S("d_color","d_color",[0,0,0],p),S("d_roughness","d_roughness",0,p),S("s_color","s_color",[0,0,0],p),S("s_roughness","s_roughness",0,p),S("metalness","metalness",0,p),S("normal","normal",[0,0,0],p),S("e_color","e_color",[0,0,0],p),S("emisson","emisson",0,p),S("a_color","a_color",[0,0,
0],p),S("alpha","alpha",1,p)];break;case "EMISSION":k=Z(b);l=V(b,"Emission");G=l.Va;l=[l,S("d_color","d_color",[0,0,0],G),S("d_roughness","d_roughness",0,G),S("s_color","s_color",[0,0,0],G),S("s_roughness","s_roughness",0,G),S("metalness","metalness",1,G),S("normal","normal",[0,0,0],G),S("e_color","e_color",[0,0,0],G),S("emisson","emisson",1,G),S("a_color","a_color",[0,0,0],p),S("alpha","alpha",1,p)];break;case "MATH":switch(b.operation){case "ADD":h="MATH_ADD";break;case "SUBTRACT":h="MATH_SUBTRACT";
break;case "MULTIPLY":h="MATH_MULTIPLY";break;case "DIVIDE":h="MATH_DIVIDE";break;case "SINE":h="MATH_SINE";break;case "COSINE":h="MATH_COSINE";break;case "TANGENT":h="MATH_TANGENT";break;case "ARCSINE":h="MATH_ARCSINE";break;case "ARCCOSINE":h="MATH_ARCCOSINE";break;case "ARCTANGENT":h="MATH_ARCTANGENT";break;case "POWER":h="MATH_POWER";break;case "LOGARITHM":h="MATH_LOGARITHM";break;case "MINIMUM":h="MATH_MINIMUM";break;case "MAXIMUM":h="MATH_MAXIMUM";break;case "ROUND":h="MATH_ROUND";break;case "LESS_THAN":h=
"MATH_LESS_THAN";break;case "GREATER_THAN":h="MATH_GREATER_THAN";break;case "MODULO":h="MATH_MODULO";break;case "ABSOLUTE":h="MATH_ABSOLUTE";break;default:return Da.error("Unsupported MATH operation: "+b.operation),null}y.push(["MATH_USE_CLAMP",Number(b.use_clamp)]);k=Z(b);l=fa(b);break;case "MIX_RGB":switch(b.blend_type){case "MIX":h="MIX_RGB_MIX";break;case "ADD":h="MIX_RGB_ADD";break;case "MULTIPLY":h="MIX_RGB_MULTIPLY";break;case "SUBTRACT":h="MIX_RGB_SUBTRACT";break;case "SCREEN":h="MIX_RGB_SCREEN";
break;case "DIVIDE":h="MIX_RGB_DIVIDE";break;case "DIFFERENCE":h="MIX_RGB_DIFFERENCE";break;case "DARKEN":h="MIX_RGB_DARKEN";break;case "LIGHTEN":h="MIX_RGB_LIGHTEN";break;case "OVERLAY":h="MIX_RGB_OVERLAY";break;case "DODGE":h="MIX_RGB_DODGE";break;case "BURN":h="MIX_RGB_BURN";break;case "HUE":h="MIX_RGB_HUE";break;case "SATURATION":h="MIX_RGB_SATURATION";break;case "VALUE":h="MIX_RGB_VALUE";break;case "COLOR":h="MIX_RGB_COLOR";break;case "SOFT_LIGHT":h="MIX_RGB_SOFT_LIGHT";break;case "LINEAR_LIGHT":h=
"MIX_RGB_LINEAR_LIGHT";break;default:return Da.error("Unsupported MIX_RGB blend type: "+b.blend_type),null}y.push(["MIX_RGB_USE_CLAMP",Number(b.use_clamp)]);k=Z(b);l=fa(b);break;case "MIX_WORLD_RGB":case "ADD_WORLD_RGB":k=[S("Factor","Factor",b.fac,b.fac_is_linked),S("Color1","Color1",[0,0,0],b.color1_is_linked),S("Color2","Color1",[0,0,0],b.color2_is_linked)];l=[S("Color","Color",[0,0,0],!0)];break;case "OUTPUT":k=Z(b);l=[];break;case "OUTPUT_MATERIAL":k=Z(b);l=[];n=ca(b,"Surface");G=n.Va;n={name:"output_surface",
type:"OUTPUT_SURFACE",inputs:[n],outputs:[],nb:[],data:{value:{$W:"BSDF_COMPUTE"},YW:{name:"bsdf_begin",type:"BSDF_BEGIN",inputs:[n,S("d_color","d_color",[0,0,0],G),S("d_roughness","d_roughness",0,G),S("s_color","s_color",[0,0,0],G),S("s_roughness","s_roughness",0,G),S("metalness","metalness",0,G),S("normal","normal",[0,0,0],G),S("e_color","e_color",[0,0,0],G),S("emission","emission",0,G),S("a_color","a_color",[0,0,0],G),S("alpha","alpha",0,G)],outputs:[S("E","E",[0,0,0],!0),S("A","A",[0,0,0],!0),
S("D","D",[0,0,0],!0),S("S","S",[0,0,0],!0),S("normal","normal",[0,0,0],!0),S("bsdf_params","bsdf_params",[0,0,0,0],!0),S("shadow_factor","shadow_factor",0,!0),S("d_color","d_color",[0,0,0],!0),S("s_color","s_color",[0,0,0],!0),S("e_color","e_color",[0,0,0],!0),S("emission","emission",0,!0),S("a_color","a_color",[0,0,0],!0),S("alpha","alpha",0,!0)],nb:[],data:null,jb:[],Af:[]},ZW:{name:"bsdf_end",type:"BSDF_END",inputs:[S("color","color",[0,0,0],!0),S("specular","specular",[0,0,0],!0),S("normal",
"normal",[0,0,0],!0),S("bsdf_params","bsdf_params",[0,0,0,0],!0),S("d_color","d_color",[0,0,0],!0),S("s_color","s_color",[0,0,0],!0),S("e_color","e_color",[0,0,0],!0),S("emission","emission",0,!0),S("a_color","a_color",[0,0,0],!0),S("alpha","alpha",0,!0)],outputs:[S("color","color",[0,0,0],G)],nb:[],data:null,jb:[],Af:[]}},jb:[],Af:[]};n={name:b.name,C2:n,BZ:{name:"displacement_bump",type:"DISPLACEMENT_BUMP",inputs:[S("Height","Height",0,!0)],outputs:[S("Normal","Normal",[0,0,0],!1)],nb:[],data:null,
jb:[],Af:[]}};break;case "OUTPUT_WORLD":k=Z(b);l=fa(b);n=ca(b,"Surface");n={name:"output_world_surface",type:"OUTPUT_WORLD_SURFACE",inputs:[n],outputs:[],nb:[],data:null,jb:[],Af:[]};n={name:b.name,D2:n};break;case "RGB":G=b.name;G={name:"-1",value:G};J.push(G);l.push(V(b,"Color"));break;case "SEPRGB":case "SEPHSV":k=Z(b);l=fa(b);break;case "TEX_ENVIRONMENT":(G=b.image)?(h="TEXTURE_ENVIRONMENT_"+b.projection,"NONE"==b.color_space?y.push(["NON_COLOR",1]):y.push(["NON_COLOR",0]),k.push(ca(b,"Vector")),
y.push(["USE_VECTOR_IN",k[0].Va|0]),l.push(V(b,"Color")),p=ea("param_TEXTURE_texture"),J.push(aa(p)),n=Ia.Xk(Ia.Di,!1),n.repeat=!0,n.source="IMAGE",Ha.oE&&(n.anisotropic_filtering=16),Ia.TK(n,G),n={bu:b.name,ny:"",name:p,value:n}):h="TEXTURE_EMPTY";break;case "TEX_IMAGE":if(G=b.image){h="TEXTURE_COLOR";"NONE"==b.color_space?y.push(["NON_COLOR",1]):y.push(["NON_COLOR",0]);y.push(["CONVERT_UV",0]);for(p=0;4>p;++p)p?(u=S("Vector"+p,"Vector"+p,[0,0,0],!1),z=S("Color"+p,"Color"+p,[0,0,0],!1),m=S("Alpha"+
p,"Alpha"+p,0,!1)):(u=ca(b,"Vector"),z=V(b,"Color"),m=V(b,"Alpha")),k.push(u),l.push(z),l.push(m);p=ea("param_TEXTURE_texture");J.push(aa(p));n=Ia.Xk(Ia.Di,!1);n.repeat="REPEAT"==b.extension;n.source="IMAGE";Ia.TK(n,G);n={bu:b.name,ny:"",name:p,value:n}}else h="TEXTURE_EMPTY";break;case "TEXTURE":h=xa(b);if("TEXTURE_EMPTY"==h)l.push(V(b,"Color")),l.push(V(b,"Normal")),l.push(V(b,"Value"));else if("TEXTURE_ENVIRONMENT_CUBE"==h)k.push(ca(b,"Vector")),l.push(V(b,"Color")),l.push(V(b,"Value"));else{if("TEXTURE_NORMAL"==
h&&"ENVIRONMENT_MAP"==b.texture.type)return Da.error("Wrong output for ENVIRONMENT_MAP texture: "+b.name),null;"TEXTURE_COLOR"==h&&(G=!1,p=b.texture.image,!p||"Non-Color"!=p.colorspace_settings_name&&"Non-Colour Data"!=p.colorspace_settings_name||(G=!0),y.push(["NON_COLOR",Number(G)]),y.push(["CONVERT_UV",1]));for(p=0;4>p;++p)G="TEXTURE_COLOR"==h?"Color":"Normal",p?(u=S("Vector"+p,"Vector"+p,[0,0,0],!1),z=S(G+p,G+p,[0,0,0],!1),m=S("Value"+p,"Value"+p,0,!1)):(u=ca(b,"Vector"),z=V(b,G),m=V(b,"Value")),
k.push(u),l.push(z),l.push(m)}"TEXTURE_EMPTY"!=h&&(p=ea("param_TEXTURE_texture"),J.push(aa(p)),n=b.texture.J,n={bu:b.texture.name,ny:b.texture.uuid,name:p,value:n});break;case "VALTORGB":k=Z(b);l=fa(b);n={value:b};G=b.color_ramp.interpolation;"CONSTANT"!=G&&"LINEAR"!=G&&Da.warn("Color Ramp node is not fully supported.");break;case "VALUE":h="VALUE";G=b.name;G={name:"-1",value:G};J.push(G);l.push(V(b,"Value"));break;case "VECT_MATH":switch(b.operation){case "ADD":h="VECT_MATH_ADD";break;case "SUBTRACT":h=
"VECT_MATH_SUBTRACT";break;case "AVERAGE":h="VECT_MATH_AVERAGE";break;case "DOT_PRODUCT":h="VECT_MATH_DOT_PRODUCT";break;case "CROSS_PRODUCT":h="VECT_MATH_CROSS_PRODUCT";break;case "NORMALIZE":h="VECT_MATH_NORMALIZE";break;default:return Da.error("Unsupported VECT_MATH operation: "+b.operation),null}k=Z(b);l=fa(b);break;case "VECT_TRANSFORM":switch(b.vector_type){case "POINT":y.push(["VECTOR_TYPE",ta.fa(0)]);break;case "VECTOR":y.push(["VECTOR_TYPE",ta.fa(1)]);break;case "NORMAL":y.push(["VECTOR_TYPE",
ta.fa(2)]);break;default:return Da.error("Unsupported VECT_TRANSFORM vector_type: "+b.vector_type),null}k=b.convert_from;l=b.convert_to;if("WORLD"==k)if("WORLD"==l)k=0;else if("OBJECT"==l)k=1;else if("CAMERA"==l)k=2;else return Da.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else if("OBJECT"==k)if("WORLD"==l)k=3;else if("OBJECT"==l)k=4;else if("CAMERA"==l)k=5;else return Da.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else if("CAMERA"==k)if("WORLD"==l)k=
6;else if("OBJECT"==l)k=7;else if("CAMERA"==l)k=8;else return Da.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else return Da.error("Unsupported VECT_TRANSFORM convert_from: "+b.convert_from),null;y.push(["CONVERT_TYPE",ta.fa(k)]);k=Z(b);l=fa(b);break;case "NORMAL_MAP":switch(b.space){case "TANGENT":G=0;break;case "OBJECT":G=1;break;case "WORLD":G=2;break;case "BLENDER_OBJECT":G=3;break;case "BLENDER_WORLD":G=4;break;default:return Da.error("Unsupported NORMAL_MAP space: "+b.space),
null}y.push(["SPACE",ta.fa(G)]);k.push(ca(b,"Strength"));k.push(ca(b,"Color"));k.push(S("Normal","Normal",[0,0,0],!1));y.push(["USE_NORMAL_IN",0]);l.push(V(b,"Normal"));break;case "FRESNEL":A=ca(b,"Normal");k.push(ca(b,"IOR"));k.push(A);l.push(V(b,"Fac"));y.push(["USE_FRESNEL_NORMAL",A.Va|0]);break;case "LAYER_WEIGHT":A=ca(b,"Normal");k.push(ca(b,"Blend"));k.push(A);l=fa(b);y.push(["USE_NORMAL_IN",A.Va|0]);break;case "BUMP":A=ca(b,"Normal");y.push(["INVERT",b.invert?1:0]);y.push(["USE_NORMAL_IN",
A.Va|0]);k=Z(b);l=fa(b);break;case "BACKGROUND":k=Z(b);l=fa(b);break;default:k=Z(b),l=fa(b)}g={name:f,Sf:g,type:h,Af:q,inputs:k,outputs:l,nb:J,data:n,jb:y};f=W.kl(a);W.Ii(a,f,g);if(!(g="GEOMETRY"!=b.type&&"TEX_COORD"!=b.type&&"NEW_GEOMETRY"!=b.type)){a:{g=b.outputs;for(q=h=0;q<g.length;q++)if(g[q].is_linked&&h++>d){g=!0;break a}g=!1}g=!g}return g||null!=C(a,b,++d,c,e)?f:null}function pa(a,b,d){for(var c=a.inputs,e=a.outputs,f=a.node_tree_name,g=0;g<b.length;g++){var h=c[g],l=b[g];if(!h||h.default_value instanceof
Array!=l)return Da.warn('Wrong inputs for custom node group "'+a.name+'" of type: "',f,'".Processing as general node group.'),!1}for(g=0;g<d.length;g++)if(b=e[g],c=d[g],!b||b.default_value instanceof Array!=c)return Da.warn('Wrong outputs for custom node group "'+a.name+'" of type: "',f,'".Processing as general node group.'),!1;return!0}function ia(a,b,d){var c=a.node_group.node_tree,e={},f;for(f in c)if("links"==f||"nodes"==f){e[f]=[];for(var g=0;g<c[f].length;g++){e[f][g]={};for(var h in c[f][g])if("links"==
f){e[f][g][h]={};for(var l in c[f][g][h])e[f][g][h][l]=ma(c[f][g][h][l])}else e[f][g][h]=ma(c[f][g][h])}}else e[f]=ma(c[f]);g=a.node_tree_name;if("B4W_REPLACE"==g||"B4W_LEVELS_OF_QUALITY"==g)c=ja("Group input","GROUP_INPUT",[],a.inputs),f=ja("Group output","GROUP_OUTPUT",a.outputs,[]),g="B4W_REPLACE"==g||"B4W_LEVELS_OF_QUALITY"==g&&(Ha.quality==Pa.Bk||Ha.pN)?{from_node:c,from_socket:c.outputs[1],to_node:f,to_socket:f.inputs[0]}:{from_node:c,from_socket:c.outputs[0],to_node:f,to_socket:f.inputs[0]},
e.nodes=[c,f],e.links=[g];c=a.name;f=e.nodes;g=e.links;for(h=0;h<f.length;h++)f[h].name=ra(f[h].type,c,f[h].name);for(h=0;h<g.length;h++)g[h].from_node.name=ra(g[h].from_node.type,c,g[h].from_node.name),g[h].to_node.name=ra(g[h].to_node.type,c,g[h].to_node.name);return{s2:t(e,a.node_group.uuid,!0,b,d).Da,t2:e.links}}function ma(a){var b=typeof a;return"string"!=b&&"number"!=b&&"boolean"!=b&&a?Qa.ou(a):a}function ea(a){Oa[a]||(Oa[a]=0);var b=a+"_"+Oa[a],b=b.replace(/ /g,"_").replace(/\//g,"_");Oa[a]++;
return b}function la(a){a=a.outputs;for(var b=0;b<a.length;b++)if(a[b].is_linked)return!0;return!1}function ba(a,b){for(var d=a.outputs,c=0,e=0;e<d.length;e++){var f=d[e];if(f.is_linked&&!(c++<b))switch(f.identifier){case "UV":return"GEOMETRY_UV";case "Vertex Color":return"GEOMETRY_VC";case "Normal":return"GEOMETRY_NO";case "True Normal":return"GEOMETRY_TRN";case "Front/Back":return"GEOMETRY_FB";case "View":return"GEOMETRY_VW";case "Global":case "Position":return"GEOMETRY_GL";case "Local":return"GEOMETRY_LO";
case "Orco":return"GEOMETRY_OR";case "Incoming":return"GEOMETRY_IN";case "Backfacing":return"GEOMETRY_BF";default:return null}}}function da(a,b){for(var d=a.outputs,c=0,e=0;e<d.length;e++){var f=d[e];if(f.is_linked&&!(c++<b))switch(f.identifier){case "Camera":return"TEX_COORD_CA";case "Generated":return"TEX_COORD_GE";case "Normal":return"TEX_COORD_NO";case "Object":return"TEX_COORD_OB";case "Reflection":return"TEX_COORD_RE";case "UV":return"TEX_COORD_UV";case "Window":return"TEX_COORD_WI";default:return null}}}
function xa(a){if(!a.texture||!a.texture.J)return"TEXTURE_EMPTY";for(var b=a.outputs,d=!1,c=!1,e=!1,f=0;f<b.length;f++){var g=b[f];if(g.is_linked)switch(g.identifier){case "Color":d=!0;break;case "Normal":c=!0;break;case "Value":e=!0;break;default:Qa.K("Unknown texture output")}}if(d)return c&&Da.warn('Node "'+a.name+'" has both Color and Normal outputs. Normal will be omitted.'),"ENVIRONMENT_MAP"==a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR";if(c)return"TEXTURE_NORMAL";if(e)return"ENVIRONMENT_MAP"==
a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR"}function ca(a,b){for(var d=a.inputs,c=0;c<d.length;c++){var e=d[c];if(e.identifier==b)return Ja(e)}return null}function V(a,b){for(var d=a.outputs,c=0;c<d.length;c++){var e=d[c];if(e.identifier==b)return Ja(e)}return null}function Ja(a){var b=a.name,d=a.identifier,c=a.is_linked;a=a.default_value;a=Qa.Yi(a)?a.slice(0):a;return{name:b,identifier:d,Va:c,Qa:a}}function S(a,b,d,c){return{name:a,identifier:b,Va:c,Qa:d}}function oa(a){return S(a.name,
a.identifier,a.Qa,a.Va)}function Z(a){for(var b=[],d=0;d<a.inputs.length;d++){var c=Ja(a.inputs[d]);c.Qa.length&&c.Qa.splice(3);b.push(c)}return b}function fa(a){for(var b=[],d=0;d<a.outputs.length;d++){var c=Ja(a.outputs[d]);b.push(c)}return b}function aa(a,b,d){b=null===b||void 0===b?null:ta.fa(b,d);return{name:a,value:b}}function za(a){return{name:a.name,value:a.value}}function ha(a){return a.slice()}function J(a,b,d,c,e,f){var g=[],h=f.from_socket.identifier;f=f.to_socket.identifier;var l=c.outputs;
for(c=0;c<l.length;c++)if(l[c].identifier==h){g.push(c);break}e=e.inputs;for(c=0;c<e.length;c++)if(e[c].identifier==f){g.push(c);break}2==g.length&&W.Zc(a,b,d,g);return!0}function ra(a,b,d){return"GROUP_INPUT"==a?b+"*GI*"+d:"GROUP_OUTPUT"==a?b+"*GO*"+d:b+"%join%"+d}function ya(a){var b=[];W.ka(a,function(a,d){"GROUP"==d.type&&b.push(d)});return b}function Q(a,b,d){for(var c=0;c<d.length;c++){var e=d[c].data.s2,f=d[c].data.t2;if(!e)return!1;W.ka(e,function(b,d){W.Ii(a,W.kl(a),d)});for(e=0;e<f.length;e++)b.push(f[e]);
ka(d[c],b,a)}return!0}function va(a,b,d,c,e,f){switch(a.type){case "GROUP":a.name==b&&c.push(d);break;case "GROUP_INPUT":a.name.indexOf(b+"*GI*")||e.push(d);break;case "GROUP_OUTPUT":a.name.indexOf(b+"*GO*")||f.push(d)}}function Va(a,b,d){for(var c=[],e=0;e<d.length;e++){for(var f=d[e],g=null,h=0;h<b.length;h++)if(f.from_socket.identifier==b[h].to_socket.identifier){g=b[h];break}g?(f.from_node=g.from_node,f.from_socket=g.from_socket):c.push(f)}for(e=0;e<b.length;e++)a.splice(a.indexOf(b[e]),1);return c}
function Ba(a,b){if(b.length)for(var d=b[0].from_node.name,c=0;c<a.length;c++)a[c].from_node.name==d&&b.push(a[c])}function Aa(a,b,d,c){for(var e=0;e<c.length;e++){for(var f=c[e],g,h=0;h<d.inputs.length;h++)if(f.from_socket.identifier==d.inputs[h].identifier){g=d.inputs[h].Qa;break}for(var h=f,l=b,k=g,q=u(h.to_node,l),J=0;J<q.length;J++)for(var n=W.lb(l,q[J]),C=0;C<n.inputs.length;C++){var z=n.inputs[C];if(z.identifier==h.to_socket.identifier){n=z.Qa instanceof Object?0:1;if((k instanceof Object?
0:1)==n)z.Qa=k;else switch(n){case 0:z=z.Qa;z[0]=z[1]=z[2]=k;break;case 1:z.Qa=(k[0]+k[1]+k[2])/3}break}}f=a.indexOf(f);-1!=f&&a.splice(f,1)}}function ka(a,b,d){for(var c=a.name,e=[],f=[],g=[],h=[],l=0;l<b.length;l++){var k=b[l];va(k.from_node,c,k,e,g,h);va(k.to_node,c,k,f,g,h)}f=Va(b,f,g);e=Va(b,h,e);Ba(b,f);Aa(b,d,a,f);if(e.length){var q;W.ka(d,function(a,b){"GROUP_OUTPUT"!=b.type||b.name.indexOf(c+"*GO*")||(q=b)});Aa(b,d,q,e)}}function Y(a){var b=[],d=[];W.ka(a,function(a,c){switch(c.type){case "VALTORGB":b.push(c);
break;case "CURVE_VEC":case "CURVE_RGB":d.push(c)}});var c=0,e=a=null,f=b.length+d.length;if(b.length){a=Ia.$Z(b,Ia.DT);for(var g=0;g<b.length;g++)b[g].jb.push(["NODE_TEX_ROW",ta.fa((c+.5)/f)]),c++}if(d.length)for(e=Ia.d_(d,Ia.CJ),g=0;g<d.length;g++)d[g].jb.push(["NODE_TEX_ROW",ta.fa((c+.5)/f)]),c++;g=null;a&&e?(g=new Uint8Array(a.length+e.length),g.set(a),g.set(e,a.length)):a?g=a:g=e;a=g?Ia.vM(g,Ia.CJ):null;for(g=0;g<b.length;g++)b[g].data.Xa=a;for(g=0;g<d.length;g++)d[g].data.Xa=a}function ua(a,
b,d){a=a.curve_mapping.curves_data[b];return 2==a.length&&a[0][0]<d+.01&&a[0][1]<d+.01&&.99<a[1][0]&&.99<a[1][1]?!1:!0}var Pa=w("__config"),wa=w("__debug"),W=w("__graph"),Ya=w("__mat3"),Ga=w("__mat4"),z=w("__objects"),Da=w("__print"),ta=w("__shaders"),sa=w("__scenes"),Qa=w("__util"),cb=w("__vec3"),Ia=w("__textures"),Oa={},Ea={},Na={},Fa={},Ra=0,Ha=Pa.L;a.U8=0;a.vK=1;a.uK=2;a.tK=3;a.T8=4;a.sK=5;a.rK=6;a.qK=7;a.S8=8;a.FU=0;a.EU=1;a.z8=2;a.DU=3;a.y8=4;a.Sz=function(a){return Ea[a]};a.KX=function(a){delete Ea[a]};
a.nM=function(a,b,d,c){return t(a,b,!1,d,c)};a.dF=function(a,d){var c=sa.R(),c=N(a,"MAIN",c.uuid);if(c in Na)return Na[c];var e=W.create(),f={name:"LIGHTING_BEGIN",type:"LIGHTING_BEGIN"},g=C(e,f,0,null,null),f={name:"LIGHTING_END",type:"LIGHTING_END"},f=C(e,f,0,null,null);b(e,d,g,f,[[g,[8,10]],[g,[9,6]]]);I(e);return Na[c]=e};a.tu=function(a){var b=[],d={};Oa={};var c=W.VI(a);W.ka(c,function(a,c){var e;e=[];for(var f=[],g=[],h=[],l=[],k=[],q=0;q<c.inputs.length;q++){var J=c.inputs[q];if(J.Va)e.push(null),
f.push(null);else{e.push(ea("in_"+c.type+"_"+J.identifier.replace(/\./g,"")));var n=ta.fa(J.Qa,0);Ha.zI&&(0<=c.type.indexOf("MIX_RGB_")&&("Color1"==J.identifier||"Color2"==J.identifier||"Fac"==J.identifier)||0<=c.type.indexOf("MATH_")&&("Value"==J.identifier||"Value_001"==J.identifier||"Value.001"==J.identifier)||0<=c.type.indexOf("VECT_MATH_")&&("Vector_001"==J.identifier||"Vector.001"==J.identifier)||0<=c.type.indexOf("LIGHTING_APPLY")||0<=c.type.indexOf("MATERIAL_END")||0<=c.type.indexOf("MATERIAL_BEGIN"))&&
(J=n,J=J.replace(/(,)/g,"$1 "),J=J.replace(/(^|[^0-9]|\s)(0\.0)($|[^0-9]|\s)/g,"$1_0_0$3"),J=J.replace(/(^|[^0-9]|\s)(1\.0)($|[^0-9]|\s)/g,"$1_1_0$3"),n=J=J.replace(/\s+/g,""));f.push(n)}}for(q=0;q<c.outputs.length;q++)J=c.outputs[q],J.Va?g.push(null):g.push(ea("out_"+c.type+"_"+J.identifier.replace(/\./g,"")));for(q=0;q<c.nb.length;q++)J=c.nb[q],h.push(J.name),l.push(J.value);for(q=0;q<c.Af.length;q++)k.push(c.Af[q].name);e={id:c.type,inputs:e,xG:f,outputs:g,nb:h,Wr:l,Af:k,jb:JSON.parse(JSON.stringify(c.jb))};
b.push(e);d[a]=e});W.yi(c,function(a,b,e){var f=W.lb(c,a),g=f.outputs[e[0]];a=d[a].outputs;b=d[b].inputs;f=a[e[0]]||ea("out_"+f.type+"_"+g.identifier.replace(/\./g,""));a[e[0]]=f;b[e[1]]=f});return b};a.QL=function(a){if(a.te)for(var b=0;b<a.te.nodes.length;b++){var c=a.te.nodes[b];if("GROUP"==c.type&&"B4W_GLOW_OUTPUT"==c.node_tree_name)return!0}return!1};a.Dda=function(a,b,c){Da.log("\n====== USER: "+b+", MATERIAL: "+c+" ======\n"+wa.u2(a)+"\n=============================================================")};
a.Ja=function(){for(var a in Ea)delete Ea[a];for(a in Na)delete Na[a];for(var b in Fa)delete Fa[b];Ra=0};a.o0=function(a){var b=-1;W.ka(a,function(a,c){if("TEXTURE_ENVIRONMENT_EQUIRECTANGULAR"==c.type||"TEXTURE_ENVIRONMENT_MIRROR_BALL"==c.type)b=Math.max(b,c.data.value.height)});return b}};b4w.module.__debug=function(a,w){function t(a,b,d){var e=[],f;for(f in a)1<l.nl(a[f])&&e.push([f,a[f]]);e.sort(function(a,b){var c=l.nl(a[1]),d=l.nl(b[1]);return d!=c?d-c:a<b?-1:b<a?1:0});if(e.length){M.groupCollapsed(b+" "+d);M.Qd("Property different variants (>1) | Property name");for(a=0;a<e.length;a++)M.groupCollapsed(l.nl(e[a][1]),e[a][0]),c(e[a][1]);M.groupEnd()}}function c(a){M.Qd("Batches count for this property value | Property value");var b=[],c;for(c in a)b.push([c,a[c]]);b.sort(function(a,
b){return b[1]!=a[1]?b[1]-a[1]:a[0]<b[0]?-1:b[0]<a[0]?1:0});for(a=0;a<b.length;a++)M.Qd(b[a][1],b[a][0]);M.groupEnd()}function b(a){a=a.split("\n");for(var b=0;b<a.length;b++)a[b]=b+1+" "+a[b];return a=a.join("\n")}function k(){var a=v.WF();if(a){var b=a.createQuery();a.beginQuery(b)}else b=performance.now();return b}function h(){var b=n;return b&&b.debug_view_mode==a.rt}function O(a,b,c){var d=v.WF(),e=0;if(d)for(c&&d.endQuery(),c=0;c<a.length;c++){var f=a[c],g=d.CN(f),h=F.getParameter(d.BN());g&&
!h&&(e=d.DN(f)/1E6,b&&(e=l.Tc(e,b,1,10)),a.splice(c,1),c--)}else e=performance.now()-a.pop(),b&&(e=l.Tc(e,b,1,10));return e}function m(a,b){x(a)||l.K("Structure assertion failed: invalid first object value");x(b)||l.K("Structure assertion failed: invalid second object value");r(a,b)||l.K("Structure assertion failed: incompatible types");if(!(null==a||null==b||"object"!=typeof a||l.AG(a)||a instanceof Array)){for(var c in a)x(a[c])||l.K("Structure assertion failed: invalid value for key in the first object: "+
c),c in b||l.K("Structure assertion failed: missing key in the first object: "+c);for(c in b)x(b[c])||l.K("Structure assertion failed: invalid value for key in the second object: "+c),c in a||l.K("Structure assertion failed: missing key in the second object: "+c),r(a[c],b[c])||l.K("Structure assertion failed: incompatible types for key "+c)}}function x(a){return"undefined"==typeof a?!1:"number"==typeof a&&isNaN(a)?!1:!0}function r(a,b){if(typeof a!=typeof b)return!1;if(null!=a&&null!=b&&"object"==
typeof a){var c=a instanceof Array,d=b instanceof Array;if(c&&!d||!c&&d)return!1;c=l.AG(a);d=l.AG(b);if(c&&!d||!c&&d)return!1}return!0}var g=w("__batch"),e=w("__compat"),B=w("__config"),v=w("__extensions"),P=w("__graph"),N=w("__objects"),M=w("__print"),p=w("__scenes"),I=w("__subscene"),y=w("__textures"),D=w("__time"),l=w("__util"),u=B.L,L={},F=null,U={},K=[],A=-1,E=-1,n=null,f=null,X=!1,d={};a.gx=0;a.XD=1;a.hx=2;a.WD=3;a.fx=4;a.VD=5;a.UD=6;a.rt=7;a.wh=function(a){for(var b="INVALID_ENUM INVALID_VALUE INVALID_OPERATION OUT_OF_MEMORY INVALID_FRAMEBUFFER_OPERATION CONTEXT_LOST_WEBGL".split(" "),
c=0;c<b.length;c++){var d=b[c];d in a&&(L[a[d]]=d)}F=a};a.V3=function(a){n=a};a.iba=function(){return n};a.i_=function(a,b,c,e,f){d[a]||(d[a]={F4:b,hg:{}});c in d[a].hg||(d[a].hg[c]=e);f&&(d[a].hg[c]=0)};a.EL=function(){var a=0,b;for(b in d)for(var c in d[b].hg)a+=d[b].hg[c];return a};a.UR=function(){var a={},b;for(b in d)for(var c in d[b].hg){var e=d[b].hg[c];if(e){var f=d[b].F4;f in a||(a[f]={XI:0,hg:{}});c in a[f].hg||(a[f].hg[c]=0);a[f].hg[c]+=e;a[f].XI+=e}}for(f in a){M.groupCollapsed(f,a[f].XI);
for(c in a[f].hg)M.Qd(c,a[f].hg[c]);M.groupEnd()}};a.wQ=function(){for(var a={},b="bounds_local bufs_data id attribute_setters num_vertices num_triangles material_names shader bpy_tex_names".split(" "),c=0,d=0,e=N.xc(p.Ui(),"MESH",N.Vc),f=0;f<e.length;f++)for(var h=0;h<e[f].T.length;h++)for(var l=0;l<e[f].T[h].da.length;l++){var k=g.PX(e[f].T[h].da[l]),n=k.qb.Lg+"/"+k.qb.jf;k["shaders_info.directives"]=k.qb.Oi;k["shaders_info.node_elements"]=k.qb.Rf;delete k.qb;for(var m=0;m<b.length;m++)delete k[b[m]];
if(e[f].ea)d++;else{c++;k.type in a||(a[k.type]={});n in a[k.type]||(a[k.type][n]={});for(var y in k)y in a[k.type][n]||(a[k.type][n][y]={}),m=JSON.stringify(k[y]),m in a[k.type][n][y]||(a[k.type][n][y][m]=0),a[k.type][n][y][m]++}}M.group("Batches statistics:");M.Qd("STATIC/DYNAMIC count:",c+"/"+d);M.group("STATIC batches diversity:");for(var v in a)for(n in a[v])t(a[v][n],v,n);M.groupEnd();M.groupEnd()};a.JE=function(a){if(u.gl_debug){var b=F.getError();b!=F.NO_ERROR&&(b in L?l.K("GL Error: "+b+
", gl."+L[b]+" ("+a+")"):l.K("Unknown GL error: "+b+" ("+a+")"))}};a.vX=function(){if(u.gl_debug||u.PL)switch(F.checkFramebufferStatus(F.FRAMEBUFFER)){case F.FRAMEBUFFER_COMPLETE:break;case F.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:M.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");break;case F.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:M.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case F.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:M.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");
break;case F.FRAMEBUFFER_UNSUPPORTED:M.error("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");break;case F.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:M.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MULTISAMPLE");break;default:M.error("FRAMEBUFFER CHECK FAILED")}};a.zX=function(){if(-1!=A)return A;var a=F.createFramebuffer();F.bindFramebuffer(F.FRAMEBUFFER,a);var b=y.Xk(y.Xn,!1);y.resize(b,1,1);F.framebufferTexture2D(F.FRAMEBUFFER,F.DEPTH_ATTACHMENT,b.Bb,b.Kb,0);F.checkFramebufferStatus(F.FRAMEBUFFER)!=
F.FRAMEBUFFER_COMPLETE?(A=!0,M.warn("depth-only issue was found")):A=!1;F.bindFramebuffer(F.FRAMEBUFFER,null);F.deleteFramebuffer(a);return A};a.FX=function(){if(1==u.oc)return!1;if(-1!=E)return E;F.bindRenderbuffer(F.RENDERBUFFER,F.createRenderbuffer());F.renderbufferStorageMultisample(F.RENDERBUFFER,u.oc,F.RGBA8,1,1);var a=F.getRenderbufferParameter(F.RENDERBUFFER,F.RENDERBUFFER_SAMPLES);a!=u.oc?(E=!0,M.warn("multisample issue was found: requested "+u.oc+", got "+a),F.getError()==F.INVALID_OPERATION&&
M.warn("the error from multisample issue detected, ignoring")):E=!1;F.bindRenderbuffer(F.RENDERBUFFER,null);return E};a.CX=function(){return e.LE("Firefox")&&F.getError()==F.OUT_OF_MEMORY?(M.warn("Firefox/old GPUs cubemap issue was found."),!0):!1};a.LQ=function(a,c,d){u.gl_debug&&(d=b(d),M.error("shader compilation failed:\n"+d+"\n"+F.getShaderInfoLog(a)+" ("+c+")"))};a.v3=function(a,c,d,e){u.gl_debug&&(d=b(d),e=b(e),M.error("shader linking failed:\n"+d+"\n\n\n"+e+"\n"+F.getProgramInfoLog(a)+" ("+
c+")"))};a.RH=function(a){if(u.show_hud_debug_info||a.type==I.Ft)a.Ju||a.Bm.push(k())};a.q3=function(a){"MAIN"==a.type&&h()&&a.Bm.push(k())};a.SH=function(a){if((u.show_hud_debug_info||a.type==I.Ft)&&!a.Ju){var b=O(a.Bm,a.ng,!0);b&&(a.ng=b)}};a.r3=function(a){if("MAIN"==a.type&&h()){var b=O(a.Bm,a.ng,!0);b&&(a.ng=b)}};a.hP=h;a.b3=function(a){var b=O(a.Bm,a.ng,!1);b&&(a.ng=b)};a.yaa=function(a){U[a]=a in U?U[a]+1:1};a.update=function(){for(var a in U)M.log(a,U[a]),U[a]=0};a.sz=function(){for(var a=
[performance.now()],b=0;b<arguments.length;b++){var c=arguments[b];if(l.Yi(c))for(var d=0;d<c.length;d++)a.push(c[d]);else a.push(arguments[b])}K.push(a)};a.Pb=function(){for(var a=1,b=0;b<K.length;b++){var c=K[b];c[1]==arguments[0]&&a++}c=[a];for(b=0;b<arguments.length;b++)if(a=arguments[b],l.Yi(a))for(var d=0;d<a.length;d++)c.push(a[d]);else c.push(arguments[b]);K.push(c)};var H=["color: #3366FF","color: #CC33FF","color: #FF3366","color: #33FF66","color: #FFCC33"];a.xQ=function(a){a||(a=1);for(var b=
0,c={},d=Math.max(0,performance.now()-1E3*a),e=0;e<K.length;e++){var f=K[e];a=f[0];if(!(a<d)){var g=String(f[1]);c[g]||(c[g]=H[b++%H.length]);a=["%c"+(a/1E3).toFixed(6),c[g],g];for(g=2;g<f.length;g++)a.push(f[g]);M.log.apply(this,a)}}K.splice(0)};a.DH=function(a){a||(a=1);for(var b={},c=Math.max(0,performance.now()-1E3*a),d=0;d<K.length;d++){var e=K[d];a=e[0];if(!(a<c))for(var f=2;f<e.length;f++){var g=String(e[1]);3<e.length&&(g+="_"+String(f-2));b[g]||(b[g]=g+"\n");b[g]+=String(a)+" "+e[f]+"\n"}}a=
"";for(g in b)a+=b[g]+"\n\n";M.log(a);K.splice(0)};a.c$=function(a){function b(a){return-1<c.indexOf(a)?!0:!1}var c=navigator.userAgent.toLowerCase();switch(a.toLowerCase()){case "chrome":return b("mozilla")&&b("applewebkit")&&b("chrome");case "firefox":return b("mozilla")&&b("gecko")&&b("firefox");case "msie":return b("mozilla")&&b("trident")&&b("msie");case "opera":return b("opera")&&b("presto");case "safari":return b("mozilla")&&b("applewebkit")&&b("safari")&&!b("chrome");default:return!1}};a.OL=
function(a){if(l.Yi(a)){for(var b=0;b<a.length;b++)if(!isFinite(a[b]))return!1;return!!a.length}return isFinite(a)?!0:!1};a.L9=function(a,b){a.constructor!=b&&l.K("Type assertion failed: value <"+a+"> has type <"+a.constructor+">, required <"+b+">")};a.N9=m;a.O9=function(a){X?m(a,f):X=!0;f=null!=a&&"object"==typeof a?l.ou(a):a};a.lN=function(a,b,c,d,e){(a=a||null)||l.K("Stage load callback is undefined");b=b||5E3;c=c||0;d=d||100;100<d&&l.K("Max percentage must be less than 100");0>c&&l.K("Min percentage must be greater than 0");
c>d&&l.K("Max percentage must be greater than min percentage");var f=D.Hi(c,d,b,function(b){b=b.toFixed();a(b);100==b&&(D.Tk(f),e&&e())})};a.u2=function(a){return P.SM(a,function(a,b){var c=b.type+"("+b.name+")",d=b.inputs,c=c+"\n\nINPUTS:";if(d.length)for(var e=0;e<d.length;e++)c+="\n"+d[e].identifier+": ",c=d[e].Va?c+"linked":c+d[e].Qa;else c+="\n---";d=b.outputs;c+="\n\nOUTPUTS:";if(d.length)for(e=0;e<d.length;e++)c+="\n"+d[e].identifier+": ",c=d[e].Va?c+("linked(default "+d[e].Qa+")"):c+"not used";
else c+="\n---";e="";switch(b.type){case "GEOMETRY_UV":e="\nuv_layer: "+b.data.value;break;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":e="\ntexture: "+b.data.value.name+"\n("+b.data.value.or+")"}""==e&&(e="\n---");return c+"\n\nDATA:"+e},function(b,c,d){b=P.lb(a,b);c=P.lb(a,c);return b.outputs[d[0]].identifier+"\n==>\n"+c.inputs[d[1]].identifier})};a.Nz=function(){return F};a.Ja=function(){n=null;d={}};a.reset=function(){F=null}};b4w.module.__compat=function(a,w){function t(a){return-1<navigator.userAgent.indexOf(a)?!0:!1}function c(){return navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)}function b(){return!window.ActiveXObject&&"ActiveXObject"in window}var k=w("__config"),h=w("__debug"),O=w("__extensions"),
m=w("__print"),x=w("__renderer"),r="R600;RV610;RV630;RV620;RV635;RV670;RS780;RS880;RV770;RV730;RV710;RV740;CEDAR;REDWOOD;JUNIPER;CYPRESS;PALM (Wrestler/Ontario);SUMO (Llano);SUMO2 (Llano);ARUBA (Trinity/Richland);BARTS;TURKS;CAICOS;CAYMAN".split(";");a.hK=256;var g=k.fo,e=k.L,B=k.Bo,v=k.context,P=k.Ni,N=k.ra,M=k.O,p=k.Je;a.yZ=function(a){a.getError()==a.INVALID_ENUM&&m.warn("Possible Tegra invalid enum issue detected, ignoring")};a.vR=function(w,y){function D(a){y&&m.warn(a)}P.e2=w.getParameter(w.MAX_COMBINED_TEXTURE_IMAGE_UNITS);
P.UG=w.getParameter(w.MAX_FRAGMENT_UNIFORM_VECTORS);P.YG=w.getParameter(w.MAX_TEXTURE_IMAGE_UNITS);P.XA=w.getParameter(w.MAX_VARYING_VECTORS);P.ZG=w.getParameter(w.MAX_VERTEX_ATTRIBS);P.RP=w.getParameter(w.MAX_VERTEX_TEXTURE_IMAGE_UNITS);P.YA=w.getParameter(w.MAX_VERTEX_UNIFORM_VECTORS);P.ph=w.getParameter(w.MAX_CUBE_MAP_TEXTURE_SIZE);P.VG=w.getParameter(w.MAX_RENDERBUFFER_SIZE);P.nc=w.getParameter(w.MAX_TEXTURE_SIZE);P.$G=w.getParameter(w.MAX_VIEWPORT_DIMS);var l=O.Vz();if(l){var u=w.getParameter(l.UNMASKED_VENDOR_WEBGL),
L=w.getParameter(l.UNMASKED_RENDERER_WEBGL);-1<u.indexOf("Qualcomm")&&-1<L.indexOf("330")&&(t("Chrome")||t("Firefox"))&&(D("Chrome/Firefox and Qualcomm 330 detected, force enable WebGL 1, disable blending cascaded shadow maps."),e.sb=!1,e.VL=!0)}P.Wq=e.sb?24:16;e.sb&&!B.enabled&&(e.su=!0);e.sb?(e.oc=Math.min(e.oc,w.getParameter(w.MAX_SAMPLES)),t("Firefox")&&(D("Firefox and WebGL 2 detected, applying framebuffer hack."),e.PL=!0),t("Windows")&&t("Chrome")&&(D("Windows, Chrome and WebGL 2 detected, applying multisample hack, disabling MSAA."),
e.oc=1)):e.oc=1;t("Firefox")&&"NONE"!==e.stereo&&(D("Firefox and Stereo rendering detected, disable texture reusage"),e.mN=!0);if(e.sb&&h.FX()||t("Firefox"))D("Firefox detected, disabling multisample"),e.oc=1;t("Mac OS X")&&t("Chrome/60")&&(D("macOS and Chrome 60 detected, disabling multisample"),e.oc=1);x.Y3();var F=!!O.X_();t("Firefox/28.0")&&(t("Linux")||t("Macintosh"))&&(D("Firefox 28 detected, applying depth hack"),F=!1);t("Windows Phone")||(t("iPad")||t("iPhone")?(D("iOS detected, applying alpha hack, applying vertex animation mix normals hack, disable smaa. Disable ssao for performance. Initialize WebAudio context with empty sound. Applying glow hack."),
v.alpha||(e.background_color[3]=1),e.wA=!0,e.lT=!0,e.smaa=!1,e.ssao=!1,e.wG=!0,O.hO()&&p.FB&&(e.uo="pvr")):t("Mac OS X")&&t("Safari")&&!t("Chrome")&&(D("OS X / Safari detected, force to wait complete loading. Applying playback rate hack for video textures. Applying canvas alpha hack."),e.VQ=!0,N.jL=!0,N.ZL=!0));t("Windows")&&(t("Chrome/40")||t("Firefox/33")||t("Firefox/34")||t("Firefox/35")||t("Firefox/36"))&&(D("Windows/Chrome40 or Firefox33-36 detected. Applying clear procedural skydome hack."),
e.QE=!0);t("Chrome")&&!c()&&k.dP()&&(D('Chrome (non-mobile) was detected for a single HTML-exported file. "Background Music" speakers were changed to "Background Sound".'),e.WL=!0);t("Mac OS X")&&(e.UA=!0,D("OS X detected, applying shadows hack"));c()&&(D("Mobile detected, applying various hacks for video textures."),e.is_mobile_device=!0,t("iPad")||t("iPhone")||t("Windows Phone")||(D("Mobile (not iOS) detected, disable playback rate for video textures."),N.YM=!0));t("iPad")&&(D('iPad detected, use "autoplay" hack for video textures.'),
e.YO=!0);(t("Firefox/35.0")||t("Firefox/36.0"))&&t("Windows")&&(D("Windows/Firefox 35/36 detected, applying shadows slink hack"),e.SR=!0);if(t("iPhone")||b())D("iPhone or IE11 detected. Enable sequential video fallback for video textures."),e.lw=!0;10>P.XA&&(D("Not enough varyings, disable shadows on blend objects"),e.xF=!0);t("Windows Phone")&&(D("Windows Phone detected. Disable debug view mode, glow materials, ssao, smaa, shadows, reflections, refractions."),e.debug_view=!1,e.glow_materials=!1,
e.ssao=!1,e.smaa=!1,e.shadows=!1,e.reflections=!1,e.refractions=!1,e.AQ=!1);if(t("UCBrowser")||t("Chrome")&&t("Nexus")&&e.is_mobile_device)D("Mobile Nexus Chrome or UCBrowser detected, disable workers."),M.Pp=!1;t("Firefox")&&(D("Firefox detected, disabling workers"),M.Pp=!1);if(b()||t("Edge"))D("IE11 or Edge detected, disabling workers"),M.Pp=!1;t("Chrome")&&t("Linux")&&(D("Chrome and Linux detected, disabling wasm physics."),M.Qw=!1);if(l){u=w.getParameter(l.UNMASKED_VENDOR_WEBGL);L=w.getParameter(l.UNMASKED_RENDERER_WEBGL);
l=/\b4\d{2}\b/;u.indexOf("Intel")&&(-1<L.indexOf("3000")||-1<L.indexOf("2000"))&&(e.ds=!1,D("Intel HD Graphics 2000/3000 detected, disable depth reuse."));t("Chrome")&&-1<L.indexOf("Mali-T720")&&(D('Chrome and ARM Mali-T720 detected, changing "Alpha Anti-Aliasing" materials to "Alpha Clip".'),e.MP=!0);-1<L.indexOf("AMD")&&t("Windows")&&t("Firefox")&&(D("AMD, Windows and Firefox detected, disabling depth textures."),F=!1);-1<u.indexOf("ARM")&&l.test(L)&&(D("ARM Mali-400 series detected, applying lamps, depth and frames blending hacks"),
F=!1,g.rN=!0,e.LP=!0);-1<u.indexOf("ARM")&&-1<L.indexOf("Mali-T604")&&(D("ARM Mali-T604 detected, disabling shadows."),e.shadows=!1);-1<u.indexOf("ARM")&&-1<L.indexOf("Mali-T760")&&(D("ARM Mali-T760 detected, disabling SSAO."),e.ssao=!1,e.pC=!0,e.sb&&(e.oc=1,D("ARM Mali-T760 and WebGL 2 detected, switching MSAA samples to 1.")));-1<u.indexOf("ARM")&&-1<L.indexOf("Mali-T720")&&(D("ARM Mali-T720 detected, disabling depth textures."),F=!1,e.sb&&(e.oc=1,D("ARM Mali-T720 and WebGL 2 detected, switching MSAA samples to 1.")));
-1<u.indexOf("Qualcomm")&&-1<L.indexOf("Adreno")&&(D("Qualcomm Adreno detected, applying shader constants hack."),e.zI=!0,-1<L.indexOf("420")&&(D("Qualcomm Adreno420 detected, setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),P.nc=Math.min(P.nc,4096),P.ph=Math.min(P.ph,4096)),t("Chrome")&&(L.match(/4../)||L.match(/5../))&&(D("Qualcomm Adreno 4xx or 5xx detected, switch MSAA samples to 1."),e.oc=1));-1<u.indexOf("NVIDIA")&&-1<L.indexOf("Tegra 3")&&(D("NVIDIA Tegra 3 detected, force low quality for B4W_LEVELS_OF_QUALITY nodes."),
e.pN=!0);t("Windows")&&t("Chrome")&&!t("Edge")&&(L.match(/NVIDIA GeForce 8..0/)||L.match(/NVIDIA GeForce 9..0/)||L.match(/NVIDIA GeForce( (G|GT|GTS|GTX))? 2../))&&(D("Chrome / Windows / NVIDIA GeForce 8/9/200 series detected, setting max cubemap size to 768x512, use canvas for resizing."),P.ph=a.hK,e.gw=!0);-1<L.indexOf("PowerVR")&&-1<L.indexOf("SGX")&&(D("PowerVR SGX series detected, use canvas for resizing. Disable shadows. Apply skinning hack, disable skin blending between frames."),e.gw=!0,e.pC=
!0,e.shadows=!1);t("Windows")&&-1<L.indexOf("Direct3D9")&&(D("DirectX 9.0 detected, using canvas for resizing textures/cubemap textures."),e.PM=!0,e.gw=!0,e.QQ=!0);u="";for(l=0;l<r.length;l++)if(-1<L.indexOf(r[l])){u=r[l];break}u&&(D("Architecture "+u+" detected. Blending between frames and shadows on blend objects will be disabled."),e.pC=!0,e.xF=!0)}0==P.RP&&(D("Vertex textures are not allowed. Disabling vertex textures"),e.Vx=!1);F||(e.Su=!1,e.kd=!1,e.water_dynamic=!1,e.Xf=!1,e.nC=!1,e.smaa=!1,
e.ssao=!1,e.hw=!0);e.YS=!!O.kO()||"pvr"==e.uo;e.Zy=F;if(w.getShaderPrecisionFormat)var I=w.getShaderPrecisionFormat(w.FRAGMENT_SHADER,w.HIGH_FLOAT);w.getShaderPrecisionFormat&&0!==I.precision||(e.precision="mediump");if(b()&&t("Touch")||t("Edge"))D("IE11 and touchscreen or Edge detected. Behaviour of the mouse move sensor will be changed."),e.sA=!0;if(b()||t("Edge"))e.TO=!0,e.SO=!0,e.gw=!0;c()&&t("Firefox")&&(m.log("Mobile firefox detected. Applying autoplay media hack.Setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),
e.bH=!0,P.nc=Math.min(P.nc,4096),P.ph=Math.min(P.ph,4096));L=!!O.RF();e.oE=L;L=!!O.rO();e.XC=L;L=!!O.w0();e.uS=L;L=!!O.y0();e.r5=L;L=!!O.x0();e.q5=L;L=!!O.z0();e.s5=L;L=!!O.Q_();e.HL=L;L=!!O.R_();e.qX=L};a.LE=t;a.Cm=c;a.xW=function(){t("Firefox/35.0")&&t("Windows")&&(m.warn("Windows/Firefox 35 detected, forcing context's alpha"),k.context.alpha=!0)};a.ep=b};b4w.module.__renderer=function(a,w){function t(a){for(var c=a.H,g=a.kb,k=null,l=N.Wb(c.D,f),m=0;m<g.length;m++){var y=g[m];if(y.lc){var p=y.Hb,u=y.Ua;if(p.ik!=k){F.useProgram(p.ik);for(var k=a,B=c,G=p,A=G.CS,D=A.length;D--;){var E=A[D];E.gr(F,E.rf,k,B)}if(G.Lr&&!G.jB)for(G.zH.length||h(G),G=G.zH,A=G.length;A--;)E=G[A],E.gr(F,E.rf,k,B);k=p.ik}y.gg?(F.enable(F.SAMPLE_ALPHA_TO_COVERAGE),a.xb||F.enable(F.BLEND)):(F.disable(F.SAMPLE_ALPHA_TO_COVERAGE),a.xb||F.disable(F.BLEND));for(y=0;y<u.length;y++)if(A=
u[y],A.lc){G=A.sh;B=A.Fa;r.q3(B);r.hP()&&"DEBUG_VIEW"==B.type&&(B.Fu=M.Tc(O.KW(B.Tq),B.Fu,1,15));if(H.alpha_sort&&B.cg){var E=G,A=A.uA,D=l,x=B.Pa;if(I.dist(D,A.AT)>H.alpha_sort_threshold*Math.min(A.NW,1)||E.Vu)e.L5(x,A,E.D,D),I.copy(D,A.AT),E.Vu=!1}for(var E=a,A=B,D=p,V=D.DS,K=V.length;K--;)x=V[K],x.gr(F,x.rf,G,A);if(D.Lr&&!D.jB){D.Nv.length||h(D);V=D.Nv;for(K=V.length;K--;)x=V[K],x.gr(F,x.rf,G,A);D.Lr=!1}F.depthMask(A.Za);A.Na?F.enable(F.CULL_FACE):F.disable(F.CULL_FACE);x=A.xa;V=F;for(K=0;K<x.length;K++){var S=
x[K];V.activeTexture(V.TEXTURE0+K);V.bindTexture(S.Bb,S.Kb);S.Ve&&V.generateMipmap(S.Bb)}if(E.type==v.Ye||E.type==v.km){G=E;D=D.Fn;V=G.H.bc;x=V.Kb;V=V.Bb;K=G.Oh;for(S=0;6>S;S++){var t=b(S);H.QE?(F.bindTexture(F.TEXTURE_CUBE_MAP,x),F.texImage2D(t,0,F.RGBA,1,1,0,F.RGBA,F.UNSIGNED_BYTE,L)):(F.uniformMatrix4fv(D.u_cube_view_matrix,!1,K[S]),F.uniform4fv(D.u_sky_tex_fac,G.ts),F.uniform3fv(D.u_sky_tex_color,G.rs),F.uniform1f(D.u_sky_tex_dvar,G.ss),F.uniform3fv(D.u_horizon_color,G.se),F.uniform3fv(D.u_zenith_color,
G.De),F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,t,x,0),n(A,0));if(G.Kr&&5!=S){var t=G,w=S,X=d;H.QE?X.set(L):(F.readPixels(191,191,1,1,F.RGBA,F.UNSIGNED_BYTE,X),255!=X[0]&&255!=X[1]&&255!=X[2]||F.readPixels(191,220,1,1,F.RGBA,F.UNSIGNED_BYTE,X));var U=X[0],za=X[1],X=X[2],U=U/255,za=za/255,X=X/255;4===w?(t.mg[3]=U,t.mg[7]=za,t.mg[11]=X):(t.mg[4*w]=U,t.mg[4*w+1]=za,t.mg[4*w+2]=X)}}H.XC&&(F.bindTexture(V,x),F.generateMipmap(V),F.texParameteri(V,F.TEXTURE_MIN_FILTER,P.Ck));E.Am+=6}else if(E.type==
v.wq){G=A;A=D.Fn;x=E.H.bc;D=x.Kb;V=x.Bb;x=E.Oh;H.XC&&(F.activeTexture(F.TEXTURE7),F.bindTexture(V,D),F.generateMipmap(V),F.texParameteri(V,F.TEXTURE_MIN_FILTER,P.Ck));for(V=0;5>V;++V)for(F.viewport(0,0,128*Math.pow(.5,V),128*Math.pow(.5,V)),K=V/4,S=0;6>S;S++)t=b(S),F.uniformMatrix4fv(A.u_cube_view_matrix,!1,x[S]),F.uniform1f(A.u_roughness,K),F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,t,D,V),n(G,0);E.Am+=30}else n(A,G.sD),E.Am++;r.r3(B);r.hP()&&"MAIN"==B.type&&O.LW(B.id,B.ng)}}}}function c(a){if(a){var b=
(a.yb?F.COLOR_BUFFER_BIT:0)|(a.Eb?F.DEPTH_BUFFER_BIT:0);if(!b)return;switch(a.type){case v.Fe:a=u;break;case v.ae:a=y;break;case v.Wg:a=D;break;case v.Df:case v.zi:case v.Wp:a=l;break;case v.Ci:case v.Jt:case v.Ix:a=u;break;default:a=H.background_color}}else b=F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT,a=H.background_color;F.colorMask(!0,!0,!0,!0);F.depthMask(!0);F.clearColor(a[0],a[1],a[2],a[3]);F.clear(b)}function b(a){switch(a){case 0:return F.TEXTURE_CUBE_MAP_POSITIVE_X;case 1:return F.TEXTURE_CUBE_MAP_NEGATIVE_X;
case 2:return F.TEXTURE_CUBE_MAP_POSITIVE_Y;case 3:return F.TEXTURE_CUBE_MAP_NEGATIVE_Y;case 4:return F.TEXTURE_CUBE_MAP_POSITIVE_Z;case 5:return F.TEXTURE_CUBE_MAP_NEGATIVE_Z}}function k(a){var b=g.jG(),c=a.Ut,d=a.Pa,e=d.cd;a.ag.length=0;var f=1,h;for(h in e)f=Math.max(f,e[h].frames);for(e=0;e<f;e++){h=b.createVertexArray();E(h);d.ci&&F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,d.ci);for(var k=0;k<d.Xd.length;k++){F.bindBuffer(F.ARRAY_BUFFER,d.Xd[k].bm);for(var l=0;l<c.length;l++){var n=c[l];n.vD==d.Xd[k].type&&
(F.enableVertexAttribArray(n.rf),F.vertexAttribPointer(n.rf,n.Sc,n.jr,n.jr==F.FLOAT?!1:!0,0,n.gy+n.zz*e),K(n.rf,n.Fo))}}E(null);a.ag.push(h)}}function h(a){var b=a.Fn,c=a.DS,d=a.Nv,e=a.CS,g=a.zH;c.length=0;d.length=0;e.length=0;g.length=0;for(var h in b){var k=!1,l=null,n=null;switch(h){case "u_proj_matrix":l=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.Jb)};k=!0;break;case "u_view_refl_matrix":l=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.et)};k=!0;break;case "u_view_tsr":case "u_view_tsr_frag":l=
function(a,b,c,d){d.Kc?a.uniformMatrix3fv(b,!1,d.$v):a.uniformMatrix3fv(b,!1,d.Ng)};k=!0;break;case "u_view_tsr_inverse":l=function(a,b,c,d){d.Kc?a.uniformMatrix3fv(b,!1,d.LB):a.uniformMatrix3fv(b,!1,d.yD)};k=!0;break;case "u_shadow_cast_billboard_view_tsr":l=function(a,b,c,d){a.uniformMatrix3fv(b,!1,d.pw)};k=!0;break;case "u_view_proj_prev":l=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.FH)};k=!0;break;case "u_view_proj_matrix":l=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.Mg)};k=!0;break;case "u_view_proj_inverse":l=
function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.xD)};k=!0;break;case "u_sky_vp_inverse":l=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.ui)};k=!0;break;case "u_camera_eye":case "u_camera_eye_frag":l=function(a,b,c,d){a.uniform3fv(b,N.Wb(d.D,f))};k=!0;break;case "u_camera_quat":l=function(a,b,c,d){a.uniform4fv(b,N.Fb(d.D,X))};k=!0;break;case "u_view_max_depth":l=function(a,b,c,d){a.uniform1f(b,d.far)};k=!0;break;case "u_camera_range":l=function(a,b,c,d){a.uniform2f(b,d.near,d.far)};k=!0;break;case "u_csm_center_dists":l=
function(a,b,c,d){a.uniform4fv(b,d.Qy)};break;case "u_height":l=function(a,b,c,d){a.uniform1f(b,d.height)};k=!0;break;case "u_pcf_blur_radii":l=function(a,b,c,d){a.uniform4fv(b,d.Zr)};break;case "u_dof_dist":l=function(a,b,c,d){d.dof_on?a.uniform1f(b,d.dof_distance):a.uniform1f(b,0)};k=!0;break;case "u_dof_front_start":l=function(a,b,c,d){a.uniform1f(b,d.dof_front_start)};k=!0;break;case "u_dof_front_end":l=function(a,b,c,d){a.uniform1f(b,d.dof_front_end)};k=!0;break;case "u_dof_rear_start":l=function(a,
b,c,d){a.uniform1f(b,d.dof_rear_start)};k=!0;break;case "u_dof_rear_end":l=function(a,b,c,d){a.uniform1f(b,d.dof_rear_end)};k=!0;break;case "u_dof_bokeh_intensity":l=function(a,b,c,d){a.uniform1f(b,d.dof_bokeh_intensity)};k=!0;break;case "u_camera_direction":l=function(a,b,c,d){a.uniform3fv(b,d.direction)};k=!0;break;case "u_cam_water_depth":l=function(a,b,c){a.uniform1f(b,c.fu)};k=!0;break;case "u_fog_color_density":l=function(a,b,c){a.uniform4fv(b,c.qe)};break;case "u_fog_params":l=function(a,b,
c){a.uniform4fv(b,c.tg)};break;case "u_underwater_fog_color_density":l=function(a,b,c){a.uniform4fv(b,c.oj)};break;case "u_bloom_key":l=function(a,b,c){a.uniform1f(b,c.Jq)};break;case "u_average_lum_val":l=function(a,b,c){a.uniform1f(b,c.average_luminance)};break;case "u_mipmap_1x1":l=function(a,b,c){a.uniform1f(b,c.IA)};break;case "u_bloom_edge_lum":l=function(a,b,c){a.uniform1f(b,c.Iq)};break;case "u_time":l=function(a,b,c){a.uniform1f(b,c.time)};k=!0;break;case "u_wind":l=function(a,b,c){a.uniform3fv(b,
c.pj)};k=!0;break;case "u_sky_tex_dvar":l=function(a,b,c){a.uniform1f(b,c.ss)};break;case "u_sky_tex_fac":l=function(a,b,c){a.uniform4fv(b,c.ts)};break;case "u_sky_tex_color":l=function(a,b,c){a.uniform3fv(b,c.rs)};break;case "u_horizon_color":l=function(a,b,c){a.uniform3fv(b,c.se)};break;case "u_zenith_color":l=function(a,b,c){a.uniform3fv(b,c.De)};break;case "u_environment_energy":l=function(a,b,c){a.uniform1f(b,c.ih)};break;case "u_bsdf_cube_sky_dim":l=function(a,b,c){a.uniform1f(b,c.oy)};k=!0;
break;case "u_sky_color":l=function(a,b,c){a.uniform3fv(b,c.rn)};break;case "u_rayleigh_brightness":l=function(a,b,c){a.uniform1f(b,c.rayleigh_brightness)};break;case "u_mie_brightness":l=function(a,b,c){a.uniform1f(b,c.mie_brightness)};break;case "u_spot_brightness":l=function(a,b,c){a.uniform1f(b,c.spot_brightness)};break;case "u_scatter_strength":l=function(a,b,c){a.uniform1f(b,c.scatter_strength)};break;case "u_rayleigh_strength":l=function(a,b,c){a.uniform1f(b,c.rayleigh_strength)};break;case "u_mie_strength":l=
function(a,b,c){a.uniform1f(b,c.mie_strength)};break;case "u_rayleigh_collection_power":l=function(a,b,c){a.uniform1f(b,c.rayleigh_collection_power)};break;case "u_mie_collection_power":l=function(a,b,c){a.uniform1f(b,c.mie_collection_power)};break;case "u_mie_distribution":l=function(a,b,c){a.uniform1f(b,c.mie_distribution)};break;case "u_light_positions":l=function(a,b,c){a.uniform4fv(b,c.jp)};break;case "u_light_directions":l=function(a,b,c){a.uniform3fv(b,c.zv)};break;case "u_light_color_intensities":l=
function(a,b,c){a.uniform4fv(b,c.ip)};break;case "u_sun_quaternion":l=function(a,b,c){a.uniform4fv(b,c.UC)};break;case "u_sun_intensity":l=function(a,b,c){a.uniform3fv(b,c.TC)};break;case "u_sun_direction":l=function(a,b,c){a.uniform3fv(b,c.SC)};break;case "u_debug_view_mode":l=function(a,b,c){a.uniform1i(b,c.debug_view_mode)};break;case "u_debug_colors_seed":l=function(a,b,c){a.uniform1f(b,c.debug_colors_seed)};break;case "u_debug_render_time_threshold":l=function(a,b,c){a.uniform1f(b,c.Wy)};break;
case "u_subpixel_jitter":l=function(a,b,c){a.uniform2fv(b,c.JG)};k=!0;break;case "u_subsample_indices":l=function(a,b,c){a.uniform4fv(b,c.s1)};k=!0;break;case "u_radial_blur_step":l=function(a,b,c){a.uniform1f(b,c.bs)};break;case "u_god_rays_intensity":l=function(a,b,c){a.uniform1f(b,c.god_rays_intensity)};break;case "u_ssao_radius_increase":l=function(a,b,c){a.uniform1f(b,c.Cs)};break;case "u_ssao_blur_discard_value":l=function(a,b,c){a.uniform1f(b,c.ys)};k=!0;break;case "u_ssao_influence":l=function(a,
b,c){a.uniform1f(b,c.Bs)};break;case "u_ssao_dist_factor":l=function(a,b,c){a.uniform1f(b,c.zs)};break;case "u_texel_size":l=function(a,b,c){a.uniform2fv(b,c.Bw)};k=!0;break;case "u_normal_offset":l=function(a,b,c){a.uniform1f(b,c.self_shadow_normal_offset)};break;case "u_v_light_ts":l=function(a,b,c){a.uniform4fv(b,c.Ws)};k=!0;break;case "u_v_light_r":l=function(a,b,c){a.uniform4fv(b,c.Vs)};k=!0;break;case "u_v_light_tsr":l=function(a,b,c){a.uniformMatrix3fv(b,!1,c.Rw)};k=!0;break;case "u_p_light_matrix0":l=
function(a,b,c){a.uniformMatrix4fv(b,!1,c.Fl[0])};k=!0;break;case "u_p_light_matrix1":l=function(a,b,c){a.uniformMatrix4fv(b,!1,c.Fl[1])};k=!0;break;case "u_p_light_matrix2":l=function(a,b,c){a.uniformMatrix4fv(b,!1,c.Fl[2])};k=!0;break;case "u_p_light_matrix3":l=function(a,b,c){a.uniformMatrix4fv(b,!1,c.Fl[3])};k=!0;break;case "u_outline_color":l=function(a,b,c){a.uniform3fv(b,c.dj)};break;case "u_draw_outline":l=function(a,b,c){a.uniform1f(b,c.Ku)};k=!0;break;case "u_glow_mask_small_coeff":l=function(a,
b,c){a.uniform1f(b,c.small_glow_mask_coeff)};k=!0;break;case "u_glow_mask_large_coeff":l=function(a,b,c){a.uniform1f(b,c.large_glow_mask_coeff)};k=!0;break;case "u_brightness":l=function(a,b,c){a.uniform1f(b,c.brightness)};break;case "u_contrast":l=function(a,b,c){a.uniform1f(b,c.contrast)};break;case "u_exposure":l=function(a,b,c){a.uniform1f(b,c.exposure)};break;case "u_saturation":l=function(a,b,c){a.uniform1f(b,c.saturation)};break;case "u_enable_hmd_stereo":l=function(a,b,c){a.uniform1i(b,c.enable_hmd_stereo)};
break;case "u_distortion_params":l=function(a,b,c){a.uniform4fv(b,c.al)};break;case "u_chromatic_aberration_coefs":l=function(a,b,c){a.uniform4fv(b,c.chromatic_aberration_coefs)};break;case "u_motion_blur_exp":l=function(a,b,c){a.uniform1f(b,c.bB)};k=!0;break;case "u_motion_blur_decay_threshold":l=function(a,b,c){a.uniform1f(b,c.mb_decay_threshold)};k=!0;break;case "u_model_tsr":n=function(a,b,c){a.uniformMatrix3fv(b,!1,c.D)};k=!0;break;case "u_model_tsr_inverse":n=function(a,b,c){a.uniformMatrix3fv(b,
!1,c.HD)};k=!0;break;case "u_transb":n=function(a,b,c){a.uniform4fv(b,c.Ce)};k=!0;break;case "u_transa":n=function(a,b,c){a.uniform4fv(b,c.yf)};k=!0;break;case "u_arm_rel_trans":n=function(a,b,c){a.uniform4fv(b,c.Rt)};k=!0;break;case "u_arm_rel_quat":n=function(a,b,c){a.uniform4fv(b,c.Qt)};k=!0;break;case "u_quat":n=function(a,b,c){a.uniform4fv(b,N.Fb(c.D,X))};k=!0;break;case "u_quatsb":n=function(a,b,c){a.uniform4fv(b,c.we)};k=!0;break;case "u_quatsa":n=function(a,b,c){a.uniform4fv(b,c.uf)};k=!0;
break;case "u_frame_factor":n=function(a,b,c){a.uniform1f(b,c.ug)};k=!0;break;case "au_center_pos":n=function(a,b,c){a.uniform3fv(b,c.ty)};k=!0;break;case "au_wind_bending_amp":n=function(a,b,c){a.uniform1f(b,c.Og)};k=!0;break;case "au_wind_bending_freq":n=function(a,b,c){a.uniform1f(b,c.Pg)};k=!0;break;case "au_detail_bending_freq":n=function(a,b,c){a.uniform1f(b,c.qg)};k=!0;break;case "au_detail_bending_amp":n=function(a,b,c){a.uniform1f(b,c.pg)};k=!0;break;case "au_branch_bending_amp":n=function(a,
b,c){a.uniform1f(b,c.kg)};k=!0;break;case "u_node_values":n=function(a,b,c,d){a.uniform4fv(b,d.bj)};k=!0;break;case "u_node_rgbs":n=function(a,b,c,d){a.uniform3fv(b,d.Qe)};k=!0;break;case "u_lod_coverage":n=function(a,b,c,d){a.uniform1f(b,d.Wm.Hf)};k=!0;break;case "u_lod_cmp_logic":n=function(a,b,c,d){a.uniform1f(b,d.Wm.yy)};k=!0;break;case "u_diffuse_color":n=function(a,b,c,d){a.uniform4fv(b,d.jd)};k=!0;break;case "u_diffuse_intensity":n=function(a,b,c,d){a.uniform1f(b,d.rg)};k=!0;break;case "u_diffuse_params":n=
function(a,b,c,d){a.uniform2fv(b,d.de)};k=!0;break;case "u_emit":n=function(a,b,c,d){a.uniform1f(b,d.gf)};k=!0;break;case "u_ambient":n=function(a,b,c,d){a.uniform1f(b,d.af)};k=!0;break;case "u_specular_color":n=function(a,b,c,d){a.uniform3fv(b,d.Fg)};k=!0;break;case "u_specular_alpha":n=function(a,b,c,d){a.uniform1f(b,d.Eg)};k=!0;break;case "u_specular_params":n=function(a,b,c,d){a.uniform3fv(b,d.tn)};k=!0;break;case "u_reflect_factor":n=function(a,b,c,d){a.uniform1f(b,d.pi)};k=!0;break;case "u_mirror_factor":n=
function(a,b,c,d){a.uniform1f(b,d.mp)};k=!0;break;case "u_grass_map_dim":n=function(a,b,c,d){a.uniform3fv(b,d.Nd)};k=!0;break;case "u_grass_size":n=function(a,b,c,d){a.uniform1f(b,d.ol)};k=!0;break;case "u_scale_threshold":n=function(a,b,c,d){a.uniform1f(b,d.cA)};k=!0;break;case "u_cube_fog":n=function(a,b,c,d){a.uniformMatrix4fv(b,!1,d.mg)};break;case "u_jitter_amp":n=function(a,b,c,d){a.uniform1f(b,d.EA)};k=!0;break;case "u_jitter_freq":n=function(a,b,c,d){a.uniform1f(b,d.FA)};k=!0;break;case "u_wireframe_edge_color":n=
function(a,b,c,d){a.uniform3fv(b,d.wireframe_edge_color)};break;case "u_cluster_id":n=function(a,b,c,d){a.uniform1f(b,d.pu)};k=!0;break;case "u_batch_debug_id_color":n=function(a,b,c,d){a.uniform1f(b,d.Vy)};k=!0;break;case "u_batch_debug_main_render_time":n=function(a,b,c,d){a.uniform1f(b,d.Fu)};k=!0;break;case "u_refr_bump":n=function(a,b,c,d){a.uniform1f(b,d.si)};k=!0;break;case "u_line_width":n=function(a,b,c,d){a.uniform1f(b,d.Bv)};k=!0;break;case "u_lamp_light_positions":n=function(a,b,c,d){a.uniform3fv(b,
d.Dr)};break;case "u_lamp_light_directions":n=function(a,b,c,d){a.uniform3fv(b,d.vv)};break;case "u_lamp_light_color_intensities":n=function(a,b,c,d){a.uniform3fv(b,d.uv)};break;case "u_halo_size":n=function(a,b,c,d){a.uniform1f(b,d.mA)};k=!0;break;case "u_halo_hardness":n=function(a,b,c,d){a.uniform1f(b,d.jA)};k=!0;break;case "u_halo_rings_color":n=function(a,b,c,d){a.uniform3fv(b,d.lA)};k=!0;break;case "u_halo_lines_color":n=function(a,b,c,d){a.uniform3fv(b,d.kA)};k=!0;break;case "u_halo_stars_blend":n=
function(a,b,c,d){a.uniform1f(b,d.nA)};k=!0;break;case "u_halo_stars_height":n=function(a,b,c,d){a.uniform1f(b,d.oA)};k=!0;break;case "u_fresnel_params":n=function(a,b,c,d){a.uniform2fv(b,d.Mo)};k=!0;break;case "u_texture_scale":n=function(a,b,c,d){a.uniform3fv(b,d.wi)};k=!0;break;case "u_parallax_scale":n=function(a,b,c,d){a.uniform1f(b,d.Vr)};k=!0;break;case "u_color_id":n=function(a,b,c){a.uniform3fv(b,c.vm)};k=!0;break;case "u_diffuse_color_factor":n=function(a,b,c,d){a.uniform1f(b,d.Do)};k=!0;
break;case "u_alpha_factor":n=function(a,b,c,d){a.uniform1f(b,d.Hk)};k=!0;break;case "u_specular_color_factor":n=function(a,b,c,d){a.uniform1f(b,d.us)};k=!0;break;case "u_normal_factor":n=function(a,b,c,d){a.uniform1f(b,d.Qr)};k=!0;break;case "u_normalmap0_scale":n=function(a,b,c,d){a.uniform2fv(b,d.Dl[0])};k=!0;break;case "u_normalmap1_scale":n=function(a,b,c,d){a.uniform2fv(b,d.Dl[1])};k=!0;break;case "u_normalmap2_scale":n=function(a,b,c,d){a.uniform2fv(b,d.Dl[2])};k=!0;break;case "u_normalmap3_scale":n=
function(a,b,c,d){a.uniform2fv(b,d.Dl[3])};k=!0;break;case "u_foam_factor":n=function(a,b,c,d){a.uniform1f(b,d.Qi)};k=!0;break;case "u_foam_uv_freq":n=function(a,b,c,d){a.uniform2fv(b,d.xz)};k=!0;break;case "u_foam_mag":n=function(a,b,c,d){a.uniform2fv(b,d.wz)};k=!0;break;case "u_foam_scale":n=function(a,b,c,d){a.uniform2fv(b,d.Tu)};k=!0;break;case "u_water_norm_uv_velocity":n=function(a,b,c,d){a.uniform1f(b,d.gt)};k=!0;break;case "u_shallow_water_col":n=function(a,b,c,d){a.uniform3fv(b,d.ks)};k=
!0;break;case "u_shore_water_col":n=function(a,b,c,d){a.uniform3fv(b,d.ms)};k=!0;break;case "u_water_shallow_col_fac":n=function(a,b,c,d){a.uniform1f(b,d.ls)};k=!0;break;case "u_water_shore_col_fac":n=function(a,b,c,d){a.uniform1f(b,d.ns)};k=!0;break;case "u_p_length":n=function(a,b,c,d){a.uniform1f(b,d.Ra.$C)};k=!0;break;case "u_p_cyclic":n=function(a,b,c,d){a.uniform1i(b,d.Ra.ce)};k=!0;break;case "u_p_max_lifetime":n=function(a,b,c,d){a.uniform1f(b,d.Ra.LA)};k=!0;break;case "u_p_fade_in":n=function(a,
b,c,d){a.uniform1f(b,d.Ra.hl)};k=!0;break;case "u_p_fade_out":n=function(a,b,c,d){a.uniform1f(b,d.Ra.Lf)};k=!0;break;case "u_p_size":n=function(a,b,c,d){a.uniform1f(b,d.Ra.size)};k=!0;break;case "u_p_alpha_start":n=function(a,b,c,d){a.uniform1f(b,d.Ra.Xx)};k=!0;break;case "u_p_alpha_end":n=function(a,b,c,d){a.uniform1f(b,d.Ra.Wx)};k=!0;break;case "u_p_nfactor":n=function(a,b,c,d){a.uniform1f(b,d.Ra.Mr)};k=!0;break;case "u_p_gravity":n=function(a,b,c,d){a.uniform1f(b,d.Ra.dA)};k=!0;break;case "u_p_mass":n=
function(a,b,c,d){a.uniform1f(b,d.Ra.gi)};k=!0;break;case "u_p_color_ramp":n=function(a,b,c,d){a.uniform4fv(b,d.Ra.By)};k=!0;break;case "u_p_wind_fac":n=function(a,b,c,d){a.uniform1f(b,d.Ra.GD)};k=!0;break;case "u_p_time":n=function(a,b,c,d){a.uniform1f(b,d.Ra.time)};k=!0;break;case "u_p_tilt":n=function(a,b,c,d){a.uniform1f(b,d.Ra.YC)};k=!0;break;case "u_p_tilt_rand":n=function(a,b,c,d){a.uniform1f(b,d.Ra.ZC)};k=!0;break;case "u_position":n=function(a,b,c,d){a.uniform3fv(b,d.co)};k=!0;break;case "u_va_frame_factor":n=
function(a,b,c){a.uniform1f(b,c.tD)};k=!0;break;case "u_refl_plane":n=function(a,b,c){a.uniform4fv(b,c.Kc)};k=!0;break;case "u_outline_intensity":n=function(a,b,c){a.uniform1f(b,c.ek)};k=!0;break;case "u_obj_info":n=function(a,b,c,d){a.uniform3fv(b,d.Sr)},k=!0}n&&(n={name:h,gr:n,rf:b[h]},k?c.push(n):d.push(n));l&&(n={name:h,gr:l,rf:b[h]},k?e.push(n):g.push(n))}if(d.length||g.length){a=a.AH;for(var m in a)delete a[m];for(m=0;m<d.length;m++)n=d[m],a[n.name]=n;for(m=0;m<g.length;m++)n=g[m],a[n.name]=
n}else a.jB=!0}var O=w("__batch"),m=w("__camera"),x=w("__config"),r=w("__debug"),g=w("__extensions"),e=w("__geometry"),B=w("__quat"),v=w("__subscene"),P=w("__textures"),N=w("__tsr"),M=w("__util"),p=w("__version"),I=w("__vec3"),y=[1,0,0,1],D=[1,1,1,1],l=[0,0,0,1],u=[0,0,0,0],L=new Uint8Array([91.8,142.8,.96*255,255]),F=null,U=null,K=null,A=null,E=null,n=null,f=new Float32Array(3),X=B.create(),d=new Uint8Array(4),H=x.L;a.wh=function(a){var b=H.background_color;a.clearColor(b[0],b[1],b[2],b[3]);a.clearDepth(1);
a.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);a.enable(a.CULL_FACE);a.frontFace(a.CCW);a.cullFace(a.BACK);a.enable(a.BLEND);a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);F=a};a.cl=function(a){if(a.lc&&!a.Jo)if(a.type==v.Hx){r.RH(a);var d=a.H;F.bindFramebuffer(F.READ_FRAMEBUFFER,d.Wu);F.bindFramebuffer(F.DRAW_FRAMEBUFFER,d.Mf);var e=0;d.bc&&(e|=F.COLOR_BUFFER_BIT);d.og&&(e|=F.DEPTH_BUFFER_BIT);F.blitFramebuffer(0,0,d.width,d.height,0,0,d.width,d.height,e,F.NEAREST);r.SH(a);r.JE("draw resolve")}else if(a.type==
v.PD)r.RH(a),d=a.H,F.bindFramebuffer(F.FRAMEBUFFER,d.Wu),F.bindTexture(F.TEXTURE_2D,d.bc.Kb),F.copyTexSubImage2D(F.TEXTURE_2D,0,0,0,0,0,d.width,d.height,0),r.SH(a),r.JE("draw copy");else{r.RH(a);d=a.H;F.bindFramebuffer(F.FRAMEBUFFER,d.Mf);a.Tt&&(e=d.bc,F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,e.Bb,e.Kb,0));F.viewport(0,0,d.width,d.height);a.type!=v.$d&&a.type!=v.dg&&c(a);a.xb?F.enable(F.BLEND):F.disable(F.BLEND);a.rd?F.enable(F.DEPTH_TEST):F.disable(F.DEPTH_TEST);switch(a.type){case v.ae:F.enable(F.POLYGON_OFFSET_FILL);
F.polygonOffset(a.self_shadow_polygon_offset,a.self_shadow_polygon_offset);F.cullFace(F.BACK);break;case v.Ge:case v.Vg:F.disable(F.POLYGON_OFFSET_FILL);F.cullFace(F.FRONT);break;case v.Bi:F.enable(F.POLYGON_OFFSET_FILL);F.polygonOffset(-4,-4);F.cullFace(F.BACK);break;case v.Fe:if(1<H.oc||H.F3){F.enable(F.POLYGON_OFFSET_FILL);F.polygonOffset(-2,-2);break}default:F.disable(F.POLYGON_OFFSET_FILL),F.cullFace(F.BACK)}if(a.type==v.$d||a.type==v.dg)for(var d=a.H,e=d.bc.Kb,f=0;6>f;f++){var g=b(f);d.pc=a.Oh[f];
N.Vh(d.pc,d.Ng);m.iX(d);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,g,e,0);c(a);for(var g=a.kb,k=0;k<g.length;k++)for(var l=0;l<g[k].Ua.length;l++){var h=g[k].Ua[l];h.lc=h.AF[f]}t(a)}else t(a);r.SH(a);r.JE("draw subscene: "+v.RC(a))}};a.clear=function(a){F.bindFramebuffer(F.FRAMEBUFFER,a.H.Mf);c(a)};a.fL=function(a){var b=a.Ut;b.length=0;var c=a.Pa,d=c.cd,f=a.Hb.attributes,g;for(g in f){var l=d[g],h=e.$z(g),n=e.j0(g),m=e.tO(g);b.push({vD:h,jr:n,rf:f[g],gy:l.offset*m,zz:1<l.frames?l.length*
m:0,Sc:l.Sc,Fo:l.Fo})}if("DEBUG"==p.type())for(g in d)h=e.$z(g),b=e.I3(c.Xd,h),b=c.Xd[b],l=a.qb.Lg+" | "+a.qb.jf,h=d[g].length*d[g].frames*e.tO(g),r.i_(b.sZ,l,g,h,g in f);H.mE&&k(a)};a.GW=k;a.MX=function(a){for(var b=g.jG(),c=0;c<a.ag.length;c++)b.deleteVertexArray(a.ag[c]);a.ag.length=0};a.OX=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push({vD:d.vD,jr:d.jr,rf:d.rf,gy:d.gy,zz:d.zz,Sc:d.Sc,Fo:d.Fo})}return b};a.FW=h;a.iL=function(a){var b=a.Hb,c=a.xa;a=a.Ig;F.useProgram(b.ik);for(var d=
0;d<c.length;d++)F.uniform1i(b.Fn[a[d]],d)};a.KB=function(a,b,c,d,e,f){F.bindFramebuffer(F.FRAMEBUFFER,a);F.readPixels(b,c,d,e,F.RGBA,F.UNSIGNED_BYTE,f);F.bindFramebuffer(F.FRAMEBUFFER,null);return f};a.I5=function(a){var b=a.Hb;b.jB||(F.useProgram(b.ik),b.Nv.length||h(b),b=b.AH.u_cube_fog,b.gr(F,b.rf,null,a))};a.p3=function(a,b){var c=F.createFramebuffer();F.bindFramebuffer(F.FRAMEBUFFER,c);if(P.yr(a)){var d=a.bg;F.framebufferRenderbuffer(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.RENDERBUFFER,d)}else if(P.Ar(a)){var e=
a,d=e.Kb,e=e.Bb==F.TEXTURE_CUBE_MAP?F.TEXTURE_CUBE_MAP_NEGATIVE_Z:e.Bb;F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,e,d,0)}P.yr(b)?(d=b.bg,F.framebufferRenderbuffer(F.FRAMEBUFFER,F.DEPTH_ATTACHMENT,F.RENDERBUFFER,d)):P.Ar(b)&&(e=b,d=e.Kb,e=e.Bb,F.framebufferTexture2D(F.FRAMEBUFFER,F.DEPTH_ATTACHMENT,e,d,0));r.vX();F.bindFramebuffer(F.FRAMEBUFFER,null);return c};a.o3=function(a,b,c,d,e){null==a?(F.bindFramebuffer(F.FRAMEBUFFER,a),F.viewport(0,0,d,e),F.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT)):
(P.yr(b)?F.deleteRenderbuffer(b.bg):P.Ar(b)&&F.deleteTexture(b.Kb),P.yr(c)?F.deleteRenderbuffer(c.bg):P.Ar(c)&&F.deleteTexture(c.Kb),F.deleteFramebuffer(a))};a.Hca=function(){};a.GZ=function(a,b,c,d,e,f){a=a.Kb;F.viewport(0,0,c,c);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,b,a,0);b=O.My("FLIP_CUBEMAP_COORDS");a=b.Hb;F.activeTexture(F.TEXTURE0);F.bindTexture(F.TEXTURE_2D,e);var g=e=0;c!=d&&(e=1/(6*d),g=1/(4*d));F.uniform1i(a.Fn.u_tex_number,f);F.uniform2fv(a.Fn.u_delta,[e,g]);F.useProgram(a.ik);
n(b,0);F.bindTexture(F.TEXTURE_2D,null)};a.HZ=function(a,b,c,d,e){F.bindFramebuffer(F.FRAMEBUFFER,d);d=a.Kb;a=a.Bb;F.bindTexture(a,d);F.viewport(0,0,b,c);F.texImage2D(a,0,F.RGBA,b,c,0,F.RGBA,F.UNSIGNED_BYTE,null);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,a,d,0);b=O.My("NONE");c=b.Hb;F.activeTexture(F.TEXTURE0);F.bindTexture(a,e);F.useProgram(c.ik);n(b,0);F.bindFramebuffer(F.FRAMEBUFFER,null);F.bindTexture(a,null)};a.Ja=function(){};a.Y3=function(){var a=g.m0(),b=g.jG();H.SK=a?!0:!1;
H.mE=b?!0:!1;a?(U=function(b,c,d,e){a.drawElementsInstanced(F.TRIANGLES,b,c,d,e)},K=function(b,c){a.vertexAttribDivisor(b,c)},A=function(b,c,d){a.drawArraysInstanced(F.TRIANGLES,b,c,d)}):(U=function(a,b,c){F.drawElements(F.TRIANGLES,a,b,c)},K=function(){},A=function(a,b){F.drawArrays(F.TRIANGLES,a,b)});b?(E=function(a){b.bindVertexArray(a)},n=function(a,b){var c=a.Pa;E(a.ag[b]);c.ci?U(c.count,c.To,0,c.Yo):A(0,c.count,c.Yo);E(null)}):n=function(a,b){for(var c=a.Pa,d=a.Ut,e=0;e<c.Xd.length;e++){F.bindBuffer(F.ARRAY_BUFFER,
c.Xd[e].bm);for(var f=0;f<d.length;f++){var g=d[f];g.vD==c.Xd[e].type&&(F.enableVertexAttribArray(g.rf),F.vertexAttribPointer(g.rf,g.Sc,g.jr,g.jr==F.FLOAT?!1:!0,0,g.gy+g.zz*b),K(g.rf,g.Fo))}}c.ci?(F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,c.ci),U(c.count,c.To,0,c.Yo)):A(0,c.count,c.Yo);for(e=0;e<d.length;e++)g=d[e],F.disableVertexAttribArray(g.rf)}};a.reset=function(){E=A=K=U=F=null}};b4w.module.__geometry=function(a,w){function t(){return{length:0,frames:1,Sc:0,offset:0,Fo:0}}function c(a,b){for(var c=b.a_tbn,d=b.a_position,e=d.length,f=1;f<a.Gb.length;f++)for(var g=a.Gb[f].jv,k=a.Gb[f].jh.a_position,l=0;l<e;l++)d[l]+=g*k[l];d=ea.Qz(c);for(f=0;f<d;f++){e=ea.identity(xa);for(l=1;l<a.Gb.length;l++)if(k=a.Gb[l].jh.a_tbn,g=a.Gb[l].jv)k=ea.Qo(k,f,ca),g=ea.slerp(ea.identity(V),k,g,ca),ea.gB(g,e,e);l=ea.Qo(c,f,ca);l=ea.gB(e,l,ca);ea.lk(c,l,f)}}function b(a){return 65536<a.hb?pa.QN()?
!1:!0:!1}function k(a){return 0<a.Ha.length?!0:!1}function h(a,b,c){if(!k(a))return a;c||ia.log('%cDEBUG max vertices exceeded for indexed submesh "'+a.name+'": '+a.hb*(b||1)+", will use drawArrays","color: #aa0");b=a.Ha;c=a.hb;var d=a.Ea,e=a.sa,f;for(f in d){var g=d[f],h=l(g,c);d[f]=O(b,g,h)}for(d=0;d<e.length;d++){var q=e[d];for(f in q)g=q[f],h=l(g,c),q[f]=O(b,g,h)}for(d=0;d<a.Gb.length;d++){f=a.Gb[d].jh;for(var n in f)g=f[n],h=l(g,c),f[n]=O(b,g,h)}a.hb=b.length;a.Ha=new Uint16Array(0);return a}
function O(a,b,c){if(0==b.length)return new Float32Array(0);for(var d=new Float32Array(a.length*c),e=0;e<a.length;e++)for(var f=a[e],g=0;g<c;g++)d[c*e+g]=b[c*f+g];return d}function m(){return{mf:null,Uc:n(),To:0,count:0,cd:{},usage:0,Sq:0,Uq:0,Xd:[],ci:null,Gb:null,Yo:1,Mh:!0}}function x(a,b,c,d){if("a_normal"==b)return d=ea.fr(d),x(a,"a_tbn",c,d);var e=a.cd,g=e[b],k=R(b);if(g)c&&g.Sc!=c&&ba.K('invalid num_comp for "'+b+'"'),q(a.Uc,b,d,g.offset);else{g=X(a.Uc,k);-1==g&&(a.Uc.push(f(k,0)),g=a.Uc.length-
1);var k=a.Uc[g].Kn,l=new k.constructor(k.length+d.length);l.set(k);a.Uc[g].Kn=l;q(a.Uc,b,d,k.length);b=e[b]=t();b.Sc=c;b.offset=k.length;b.length=d.length}B(a);return a}function r(a,b){if("a_normal"==b){for(var c=r(a,"a_tbn"),d=ea.Qz(c),e=new Float32Array(3*d),f=0;f<d;f++){var g=ea.q0(c,f,Ja);e.set(g,3*f)}return e}if(c=a.cd[b])return d=R(b),ja(b,H(a.Uc,d).subarray(c.offset,c.offset+c.length),new Float32Array(c.length));ba.K("extract_array_float() failed; invalid name: "+b)}function g(b,c){var d;
switch(c){case a.$p:case a.pt:d=aa.STATIC_DRAW;break;case a.ex:d=aa.DYNAMIC_DRAW;break;default:ba.K("Wrong draw_mode")}b.usage=d}function e(a,b,c){function d(a,b){e[a]||(e[a]=0);e[a]+=b}var e={},f;for(f in a[0]){var g=a[0][f],k=R(f);d(k,g.length*a.length)}for(f in b)g=b[f],k=R(f),d(k,g.length);if(c){a=c.Fw.length;k=R("a_part_ts");d(k,4*a);k=R("a_part_r");d(k,4*a);b=c.Yr;for(f in b)k=R(f),d(k,b[f].Sc*a);c=c.QC;for(f in c)k=R(f),d(k,a)}return e}function B(a){a.mf?(a.ci||(a.ci=aa.createBuffer()),aa.bindBuffer(aa.ELEMENT_ARRAY_BUFFER,
a.ci),aa.bufferData(aa.ELEMENT_ARRAY_BUFFER,a.mf,a.usage),a.Sq=a.mf.byteLength):a.Sq=0;for(var b=a.Uq=0;b<a.Uc.length;b++){var c=a.Uc[b].type,d=X(a.Xd,c);-1==d&&(a.Xd.push({bm:null,type:c,sZ:ba.JS()}),d=a.Xd.length-1);c=a.Xd[d];c.bm||(c.bm=aa.createBuffer());aa.bindBuffer(aa.ARRAY_BUFFER,c.bm);aa.bufferData(aa.ARRAY_BUFFER,a.Uc[b].Kn,a.usage);a.Uq+=a.Uc[b].Kn.byteLength}}function v(a,b){a.Ca=C.Lq(a.Ca,b);a.Lb=C.AE(a.Lb,b);a.Bc=C.my(a.Bc,b);a.Jd=C.BE(a.Jd,b)}function P(a){for(var b=a[0],c=a[0],d=E("JOIN_"+
a.length+"_SUBMESHES"),e=0,f=0;f<a.length;f++)e+=a[f].Ha.length;d.Ha=new Uint32Array(e);var g=e=0;if(0<a[0].Gb.length)for(var k=0;k<a[0].Gb.length;k++){for(f=0;f<a.length;f++)e+=a[f].Gb[k].jh.a_position.length,g+=ea.Qz(a[f].Gb[k].jh.a_tbn);f={a_position:new Float32Array(e),a_tbn:ea.create(g)};d.Gb.push({jv:a[0].Gb[k].jv,jh:f})}for(f=e=0;f<a.length;f++)e+=a[f].hb;d.hb=e;for(var h in c.Ea){for(f=e=0;f<a.length;f++)e+=a[f].Ea[h].length;d.Ea[h]=new Float32Array(e)}for(h in c.sa[0]){for(f=e=0;f<a.length;f++)e+=
a[f].sa[0][h].length;for(f=0;f<c.sa.length;f++)d.sa[f]=d.sa[f]||{},d.sa[f][h]=new Float32Array(e)}f=d.Dd;f.Ca=C.xy(b.Dd.Ca);g=e=0;k=[];for(c=0;c<a.length;c++){var q=a[c],n=q.Ha,m=q.hb,y=q.Ea;h=q.Dd.Bc;C.pz(f.Ca,q.Dd.Ca);C.XZ(f.Bc,h);C.HF(q.Dd.Jd,k);for(h=0;h<n.length;h++)d.Ha[e+h]=n[h]+g;var e=e+n.length,p;for(p in y){var n=y[p],v=g*l(n,m);d.Ea[p].set(n,v)}for(h=0;h<q.sa.length;h++){var y=q.sa[h],u=d.sa[h];for(p in y)n=y[p],v=g*l(n,m),u[p].set(n,v)}g+=m}f.Lb=C.Gy(ba.Qh(k),!0);if(0<d.Gb.length)for(c=
0;c<d.Gb.length;c++)for(p=d.Gb[c].jh,h=e=f=0;h<a.length;h++)g=a[h].Gb[c].jh,p.a_position.set(g.a_position,f),p.a_tbn.set(g.a_tbn,e),f+=g.a_position.length,e+=g.a_tbn.length;a[0].Of&&(d.Of={Fw:b.Of.Fw,KI:b.Of.KI,dS:!0,QC:b.Of.QC,Yr:b.Of.Yr,iz:b.Of.iz});return d}function N(a,b,c){b=b.Dd;for(var d=C.If(),e=C.Ny(),f=[],g=0;g<c.length;g++)C.Lq(a.Dd.Ca,c[g],d),C.pz(b.Ca,d),C.BE(a.Dd.Jd,c[g],e),C.HF(e,f);b.Lb=C.Gy(ba.Qh(f),!0);b.Jd=C.eY(b.Lb);b.Bc=C.Iy(b.Lb)}function M(a,b,c,d,e,f){var g=a.submeshes[b],
k=g.base_length,l=E("SUBMESH_"+a.name+"_"+a.materials[b].name);l.hb=k;var q=!1;if(y(c,"a_texcoord")){var n=null,J=a.materials[b];b=a.submeshes[b];if(J.Ah.length)switch(J=J.Ah[0],J.texture_coords){case "UV":n=I(b,J.uv_layer||a.active_uv_name,a.name);break;case "ORCO":for(var m=a.b4w_boundings.bb_src,n=new Float32Array(2*b.base_length),J=(m.max_x+m.min_x)/2,v=(m.max_y+m.min_y)/2,u=m.max_x-m.min_x,m=m.max_y-m.min_y,B=0,A=0;A<b.position.length;A+=3)n[B++]=(b.position[A]-J)/u+.5,n[B++]=(b.position[A+1]-
v)/m+.5}null===n&&(n=new Float32Array(2*b.base_length));b=n}else b=new Float32Array(0);if(y(c,"a_orco_tex_coord")){for(var n=a.b4w_boundings.bb_src,J=new Float32Array(3*g.base_length),v=g.position,u=n.max_x-n.min_x,m=n.max_y-n.min_y,B=n.max_z-n.min_z,H=A=0;H<v.length;H+=3)u?J[A++]=ba.pa(parseFloat(((v[H]-n.min_x)/u).toFixed(5)),0,1):J[A++]=.5,m?J[A++]=ba.pa(parseFloat(((v[H+1]-n.min_y)/m).toFixed(5)),0,1):J[A++]=.5,B?J[A++]=ba.pa(parseFloat(((v[H+2]-n.min_z)/B).toFixed(5)),0,1):J[A++]=.5;n=J}else n=
new Float32Array(0);J=g.group;if(y(c,"a_influence")&&d){v=new Float32Array(4*k);u=J.length/k;m=new Float32Array(u);for(B=0;B<u;B++){m[B]=-1;for(var z in d)if(A=d[z],A.mT===B){m[B]=A.sF;break}}H=3<u?u:4;d=new Float32Array(H);z=new Uint32Array(H);for(var B=new Float32Array(4),A=new Float32Array(H),H=new Uint32Array(H),G=new Float32Array(4),x=0;x<k;x++)d.set(A),z.set(H),B.set(G),v.set(D(J,u,x,k,m,d,z,B),4*x)}else v=new Float32Array(0);d=v;e=e?ba.Y(e):{};e.a_color={Po:!0};e.a_color.src=y(c,"a_color")&&
a.active_vcol_name?[{name:a.active_vcol_name,fi:7}]:[];l.Ea.a_texcoord=b;l.Ea.a_influence=d;l.Ea.a_orco_tex_coord=n;d=l.Ea;z=g.vertex_colors;b=g.color;n=a.name;J=[];for(v=0;v<z.length;v++)J.push(z[v].name);for(var F in e)if(v=e[F].src,v.length){for(m=u=0;m<v.length;m++)u+=ba.Cp(v[m].fi);d[F]=new Float32Array(u*k);for(m=B=0;m<v.length;m++){var ha=v[m].name,A=v[m].fi,H=ba.RQ(A),G=J.indexOf(ha);if(-1==G)ia.warn('vertex color "'+ha+'" for mesh "'+n+'" not found'),x=7;else{for(var x=z[G].mask,r,V=r=0;V<
G;V++)r+=ba.Cp(z[V].mask);r*=k}V=ba.Cp(x);(A&x)!==A&&ia.error("Wrong color extraction from "+ha+" to "+F+' for the mesh "'+n+'".');for(ha=0;ha<k;ha++)for(var K=0;3>K;K++)if(H[K]){var L=ba.es(x,K);d[F][ha*u+(B+ba.es(A,K))]=-1==G?0:b[r+ha*V+L]}B+=V}}else d[F]=new Float32Array(0);F=a.name;r=l.Ea;if(f)for(var S in f)r[f[S]]=I(g,S,F);l.Ha=new Uint32Array(g.indices);S=g.position.length/k/3;F=y(c,"a_tbn")&&g.tbn.length?!0:!1;r=y(c,"a_shade_tangs")&&g.shade_tangs.length?!0:!1;0<a.b4w_shape_keys.length&&(q=
!0);for(e=0;e<S;e++){f=p(g,k,F,r,e);if(q)if(d={},d.name=a.b4w_shape_keys[e].name,l.Gb.push(d),e){d.jh=f;d.jv=a.b4w_shape_keys[e].value;continue}else d.jh=p(g,k,F,r,e),d.jv=1;l.sa.push(f)}if(1<S&&!q){a=l.sa[0];f={};for(var t in a)f[t]=new Float32Array(a[t]);l.sa.push(f)}y(c,"a_polyindex")&&(h(l,1,!0),l.Ea.a_polyindex=U(l));g=g.boundings;c=l.Dd;c.Ca=C.If();c.Ca.max_x=g.bb.max_x;c.Ca.max_y=g.bb.max_y;c.Ca.max_z=g.bb.max_z;c.Ca.min_x=g.bb.min_x;c.Ca.min_y=g.bb.min_y;c.Ca.min_z=g.bb.min_z;t=g.rbb;a=g.caxis_x;
k=g.caxis_y;q=g.caxis_z;f=g.be_ax;c.Lb=C.uE(a,k,q,g.be_cen);da.scale(c.Lb.ab,f[0],c.Lb.ab);da.scale(c.Lb.eb,f[1],c.Lb.eb);da.scale(c.Lb.fb,f[2],c.Lb.fb);c.Bc=C.Iy(c.Lb);da.copy(t.rbb_c,c.Jd.V);da.copy(a,c.Jd.ab);da.copy(k,c.Jd.eb);da.copy(q,c.Jd.fb);g=t.rbb_s;da.scale(c.Jd.ab,g[0],c.Jd.ab);da.scale(c.Jd.eb,g[1],c.Jd.eb);da.scale(c.Jd.fb,g[2],c.Jd.fb);return l}function p(a,b,c,d,e){var f={},g=new Float32Array(3*b),k=ea.create(c?b:0),l=e*b*3;g.set(a.position.subarray(l,l+3*b),0);c&&ea.copy(a.tbn,e*
b,b,k);d&&(c=new Float32Array(3*b),c.set(a.shade_tangs.subarray(0,3*b),0),f.a_shade_tangs=c);f.a_position=g;f.a_tbn=k;return f}function I(a,b,c){var d=2*a.base_length,e=a.uv_layers.indexOf(b);if(-1==e)return ia.warn('uv layer "'+b+'" for mesh "'+c+'" not found'),new Float32Array(d);b=e*d;return a.texcoord.subarray(b,b+d)}function y(a,b){return-1<a.indexOf(b)?!0:!1}function D(b,c,d,e,f,g,k,l){for(var h=!0,q=0;q<c;q++){var n=b[q*e+d];if(-1!==n){var J=f[q];-1!==J&&(g[q]=n,k[q]=J,h=!1)}}if(h)return l;
u(g,k,a.fE,!1);for(q=b=0;4>q;q++)b+=g[q];if(.01>b)return l;for(q=0;4>q;q++)g[q]/=b;if(.01>Math.abs(g[0]-1))l[0]=k[0]+1;else for(q=0;4>q;q++)l[q]=k[q]+g[q];return l}function l(a,b){if(0==b)return 0;var c=a.length,d=c/b;d!=Math.floor(d)&&ba.K("Array size mismatch during geometry calculation: array length="+c+", base length="+b);return d}function u(b,c,d,e){for(var f=b.length,g=f,k=!1,l=e?-1:1;1<g||k;){1<g&&(g=Math.floor(g/1.247330950103979));for(var k=!1,h=0;g+h<f;h++)if(d==a.fE?0>l*(b[h]-b[h+g]):b[h]<
b[h+g]&&e)k=b[h],b[h]=b[h+g],b[h+g]=k,k=c[h],c[h]=c[h+g],c[h+g]=k,k=!0}}function L(a,b,c){var d=[],e=[];da.subtract(b,a,d);da.subtract(c,a,e);da.normalize(d,d);da.normalize(e,e);a=ba.pa(da.dot(d,e),-1,1);return Math.acos(a)}function F(a,b){var c=[];if(k(b))for(var d=b.Ha,e=d.length/3,f=0;f<e;f++){var g=new Float32Array(9),l=d[3*f];g[0]=a[3*l];g[1]=a[3*l+1];g[2]=a[3*l+2];l=d[3*f+1];g[3]=a[3*l];g[4]=a[3*l+1];g[5]=a[3*l+2];l=d[3*f+2];g[6]=a[3*l];g[7]=a[3*l+1];g[8]=a[3*l+2];c[f]=g}else for(f=0;f<a.length;f++)g=
new Float32Array(9),g[0]=a[9*f],g[1]=a[9*f+1],g[2]=a[9*f+2],g[3]=a[9*f+3],g[4]=a[9*f+4],g[5]=a[9*f+5],g[6]=a[9*f+6],g[7]=a[9*f+7],g[8]=a[9*f+8],c[f]=g;return c}function U(a){for(var b=new Float32Array(a.hb),c=0;c<a.hb;c++)b[c]=c%3/2;return b}function K(a,b,c){var d=da.dist(a,b);a=da.dist(a,c);b=da.dist(b,c);c=(d+a+b)/2;return c*(c-d)*(c-a)*(c-b)}function A(a){for(var b=new Float32Array([0,0,0,1,1,1,1,0]),c=new Float32Array(8*a),d=0;d<a;d++)c.set(b,8*d);return c}function E(a){return{name:a,hb:0,Ha:null,
sa:[],Ea:{a_influence:new Float32Array(0),a_color:new Float32Array(0),a_texcoord:new Float32Array(0)},Gb:[],Dd:{Ca:C.If(),Lb:C.yu(),Bc:C.Hy(),Jd:C.Ny()},Of:null}}function n(a){var b=[],c;for(c in a)b.push(f(c,a[c]));return b}function f(a,b){return{Kn:new (G(a))(b),type:a}}function X(a,b){for(var c=0;c<a.length;c++)if(a[c].type==b)return c;return-1}function d(a,b){var c=X(a,b);return-1==c?null:a[c].bm}function H(a,b){var c=X(a,b);return-1==c?null:a[c].Kn}function G(a){switch(a){case "float":return Float32Array;
case "short":return Int16Array;case "unsigned_byte":return Uint8Array;default:return Float32Array}}function R(a){a=a.replace(/_next$/,"");a=a.replace(/param_GEOMETRY_VC_a_\w+/,"param_GEOMETRY_VC_a");switch(a){case "a_tbn":case "a_shade_tangs":return"short";case "a_color":case "a_bending_col_main":case "a_bending_col_detail":case "a_grass_size":case "a_grass_color":case "param_GEOMETRY_VC_a":case "a_polyindex":case "a_p_bb_vertex":case "a_halo_bb_vertex":case "a_bb_vertex":return"unsigned_byte";default:return"float"}}
function q(a,b,c,d){var e=R(b);qa(b,c,a[X(a,e)].Kn.subarray(d))}function ja(a,b,c){switch(R(a)){case "float":c.set(b);break;case "short":for(a=0;a<b.length;a++)c[a]=ba.TR(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)c[a]=ba.FS(b[a])}return c}function qa(a,b,c){switch(R(a)){case "float":c.set(b);break;case "short":for(a=0;a<b.length;a++)c[a]=ba.cr(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)c[a]=ba.GS(b[a])}return c}var C=w("__boundings"),pa=w("__extensions"),ia=w("__print"),
ma=w("__quat"),ea=w("__tbn"),la=w("__tsr"),ba=w("__util"),da=w("__vec3"),xa=ea.create(),ca=ea.create(),V=ea.create(),Ja=new Float32Array(3),S=new Float32Array(3),oa=new Float32Array(3),Z=ma.create(),fa=new Float32Array(8);a.pt=10;a.ex=20;a.fE=0;a.M8=1;a.$p=a.pt;var aa=null;a.xq="float";a.P8="short";a.Q8="unsigned_byte";a.wh=function(a){aa=a};a.mS=function(a,d,f){b(a)&&h(a);var k=a.Ha,J=a.hb,y=a.sa,C={},p;for(p in a.Ea)p in f&&!f[p].Po||(C[p]=a.Ea[p]);f=m();0<a.Gb.length&&c(a,y[0]);p=a.Of;if(k.length){var v=
k.length;if(65536>=J)var k=new Uint16Array(k),u=aa.UNSIGNED_SHORT;else k=new Uint32Array(k),u=aa.UNSIGNED_INT}else v=J,k=null;for(var A=e(y,C,p),A=n(A),D={},E=0;E<A.length;E++)D[A[E].type]=0;var H={},G;for(G in C){var x=C[G],F=x.length;if(F){var r=R(G),E=H[G]=t();E.length=F;E.Sc=l(x,J);E.offset=D[r];q(A,G,x,D[r]);D[r]+=F}}C=y.length;for(G in y[0])if(x=y[0][G],r=R(G),F=x.length,x=l(x,J),F)for(E=H[G]=t(),E.length=F,E.frames=C,E.Sc=x,E.offset=D[r],1<C&&(E=H[G+"_next"]=t(),E.length=F,E.frames=C,E.Sc=
x,E.offset=D[r]+F),E=0;E<C;E++)x=y[E][G],r=R(G),q(A,G,x,D[r]),D[r]+=F;if(p){y=p.Fw;G=p.KI;var C=p.Yr,F=p.QC,r=p.dS,J={a_part_ts:{data:[],Sc:4},a_part_r:{data:[],Sc:4}},z;for(z in C)J[z]={data:[],Sc:C[z].Sc};for(z in F)J[z]={data:[],Sc:1};for(x=0;x<y.length;x++){E=y[x];r&&G&&!p.iz&&(E=la.multiply(G,y[x],fa));!r&&p.iz&&da.subtract(y[x],G,y[x]);J.a_part_ts.data.push(E[0],E[1],E[2],E[3]);J.a_part_r.data.push(E[4],E[5],E[6],E[7]);for(z in C)for(var E=C[z].Sc,V=0;V<E;V++)J[z].data.push(C[z].data[x*E+V]);
for(z in F)J[z].data.push(F[z][0])}for(z in J)y=R(z),q(A,z,J[z].data,D[y]),G=t(),G.Sc=J[z].Sc,G.offset=D[y],G.Fo=1,G.length=J[z].data.length,H[z]=G,D[y]+=G.length;f.Yo=p.Fw.length}f.count=v;f.mf=k;f.Uc=A;f.To=u;f.cd=H;g(f,d);B(f);f.Gb=a.Gb;return f};a.i5=c;a.o1=b;a.n1=k;a.PC=h;a.N5=function(a,b,c){g(a,b);a.count=c.length;a.mf=c;a.To=c instanceof Uint16Array?aa.UNSIGNED_SHORT:aa.UNSIGNED_INT};a.M5=x;a.iN=r;a.jda=function(a){a.usage=aa.STATIC_DRAW};a.Y1=function(a){a.usage=aa.DYNAMIC_DRAW};a.OS=B;a.Iw=
function(a,b,c,d){aa.bindBuffer(aa.ARRAY_BUFFER,a.Xd[X(a.Xd,b)].bm);aa.bufferSubData(aa.ARRAY_BUFFER,ba.xk*d,c)};a.JX=function(a){a.ci&&aa.deleteBuffer(a.ci);for(var b=0;b<a.Xd.length;b++)a.Xd[b].bm&&aa.deleteBuffer(a.Xd[b].bm);a.Xd.length=0};a.IO=function(a,b){return a.submeshes[b].base_length?!1:!0};a.MI=function(a,b){for(var c=0;c<a.sa.length;c++){var d=a.sa[c].a_position;la.Cn(d,b,d,0);d=a.sa[c].a_tbn;ea.UP(d,b,d);(d=a.sa[c].a_shade_tangs)&&0<d.length&&la.eJ(d,b,d,0)}(c=a.Ea.au_center_pos)&&c.length&&
la.Cn(c,b,c,0);v(a.Dd,b)};a.h5=function(a,b){var c=a.Ea.au_center_pos;if(c&&c.length){var d=new Float32Array(c);la.Cn(d,b,d,0);for(var e=0;e<a.sa.length;e++)for(var f=0;f<d.length;f++)a.sa[e].a_position[f]+=d[f]-c[f];c.set(d)}else ba.K('Attribute "au_center_pos" is missing in particle submesh');v(a.Dd,b)};a.VW=v;a.g5=function(a,b){var c=a.hb,d;for(d in b){var e=b[d].length;a.Ea[d]=new Float32Array(e*c);for(var f=0;f<c;f++)for(var g=0;g<e;g++)a.Ea[d][f*e+g]=b[d][g]}};a.lS=P;a.a2=function(a,b,c){if(!a.hb)return E("EMPTY");
var d=c.length;65536<a.hb*d&&!pa.QN()&&h(a,d);var e=a.Ha,f=a.hb,g=a.Ea,k=a.sa,q;for(q in b){var n=b[q].length,m=n*f;g[q]=new Float32Array(m);for(var y=0;y<f;y++)for(m=0;m<n;m++)g[q][y*n+m]=b[q][m]}b=E("CLONE_"+d+"_SUBMESHES");b.hb=f*d;b.Ha=new Uint32Array(e.length*d);for(y=0;y<d;y++)for(n=e.length*y,q=f*y,m=0;m<e.length;m++)b.Ha[n+m]=e[m]+q;for(var J in g)for(e=g[J],m=e.length*d,n=l(e,f),b.Ea[J]=new Float32Array(m),y=0;y<d;y++)q=f*n*y,b.Ea[J].set(e,q);for(J in k[0])for(y=0;y<k.length;y++)for(e=k[y][J],
m=e.length*d,n=l(e,f),b.sa[y]=b.sa[y]||{},b.sa[y][J]=new Float32Array(m),m=0;m<d;m++)switch(g=c[m],q=f*n*m,J){case "a_position":la.Cn(e,g,b.sa[y][J],q);break;case "a_tbn":la.A5(e,g,b.sa[y][J],q);break;case "a_shade_tangs":la.fJ(e,g,b.sa[y][J],q);break;default:ba.K("Wrong attribute name: "+J)}N(a,b,c);return b};a.CL=N;a.rz=M;a.b_=function(a){var b=a.hb,c=a.sa[0].a_position,d=new Float32Array(12*b);a=new Uint32Array(4*a.Ha.length);for(var e=new Float32Array(4*b),f=0;f<b;f++){d[12*f]=c[3*f];d[12*f+1]=
c[3*f+1];d[12*f+2]=c[3*f+2];d[12*f+3]=c[3*f];d[12*f+4]=c[3*f+1];d[12*f+5]=c[3*f+2];d[12*f+6]=c[3*f];d[12*f+7]=c[3*f+1];d[12*f+8]=c[3*f+2];d[12*f+9]=c[3*f];d[12*f+10]=c[3*f+1];d[12*f+11]=c[3*f+2];a[6*f]=4*f+2;a[6*f+1]=4*f+1;a[6*f+2]=4*f;a[6*f+3]=4*f+2;a[6*f+4]=4*f;a[6*f+5]=4*f+3;var g=Math.random();e[4*f]=g;e[4*f+1]=g;e[4*f+2]=g;e[4*f+3]=g}c=E("HALO");c.sa[0]={};c.hb=4*b;c.sa[0].a_position=d;c.Ea.a_halo_bb_vertex=A(b);c.Ea.a_random_vals=e;c.Ha=a;return c};a.I0=y;a.kN=function(a,b,c){for(var d=[],e=
0;e<a.submeshes.length;e++){var f=M(a,e,b,null,c,null);f.hb&&d.push(f)}return d.length?1==d.length?d[0]:P(d):E("EMPTY")};a.L5=function(a,b,c,d){var e=a.mf,f=r(a,"a_position"),g=b.i2,k=b.j2;b=b.CZ;for(var l=e,h=l.length/3,q=0;q<h;q++){var n=l[3*q],m=l[3*q+1],y=l[3*q+2],J=f[3*n+1],C=f[3*n+2],p=f[3*m+1],v=f[3*m+2],z=f[3*y+1],u=f[3*y+2];g[3*q]=(f[3*n]+f[3*m]+f[3*y])/3;g[3*q+1]=(J+p+z)/3;g[3*q+2]=(C+v+u)/3}la.Cn(g,c,k);c=k.length/3;for(f=0;f<c;f++)g=k[3*f]-d[0],l=k[3*f+1]-d[1],h=k[3*f+2]-d[2],b[f]=g*g+
l*l+h*h;d=e;e=b.length;if(!(2>e))for(k=e,f=!1;1<k||f;)for(1<k&&(k=Math.floor(k/1.247330950103979)),f=!1,c=0;k+c<e;c++)0>b[c]-b[c+k]&&(f=b[c],b[c]=b[c+k],b[c+k]=f,f=d,g=c,l=c+k,h=f[3*g],q=f[3*g+1],n=f[3*g+2],f[3*g]=f[3*l],f[3*g+1]=f[3*l+1],f[3*g+2]=f[3*l+2],f[3*l]=h,f[3*l+1]=q,f[3*l+2]=n,f=!0);e=d;aa.bindBuffer(aa.ELEMENT_ARRAY_BUFFER,a.ci);aa.bufferData(aa.ELEMENT_ARRAY_BUFFER,e,aa.DYNAMIC_DRAW)};a.O4=u;a.fX=function(a,b,c){for(var d=b.length/3,e=a.length/3,f=[],g=Array(3),k=Array(3),l=Array(3),h=
0;h<e;h++){for(var q=a[3*h],n=a[3*h+1],m=a[3*h+2],y=0;3>y;y++)g[y]=b[3*q+y],k[y]=b[3*n+y],l[y]=b[3*m+y];if(c)var y=L(g,k,l),J=L(k,l,g),C=Math.PI-y-J;else C=J=y=1;var p=f,v;v=g;var z=l,u=[],B=[],A=[];da.subtract(k,v,u);da.subtract(z,v,B);da.cross(u,B,A);da.normalize(A,A);v=A;for(z=0;3>z;z++)u=3*n+z,B=3*m+z,p[3*q+z]=y*v[z],p[u]=J*v[z],p[B]=C*v[z]}if(c)for(var D in c)for(h=c[D],a=0;3>a;a++){b=3*h[0]+a;for(e=1;e<h.length;e++)g=3*h[e]+a,f[b]+=f[g];for(e=1;e<h.length;e++)g=3*h[e]+a,f[g]=f[b]}for(h=0;h<
d;h++){c=h;D=f;a=new Float32Array(3);for(b=0;3>b;b++)e=3*c+b,a[b]=D[e];da.normalize(a,a);for(b=0;3>b;b++)e=3*c+b,D[e]=a[b]}return f};a.hX=function(a,b,c){for(var d={},e=b.length/3,f=0;f<e;f++){var g=String(b[3*f])+String(b[3*f+1])+String(b[3*f+2]);d[g]=[]}b=a.length;for(f=0;f<b;f++)e=a[f],g=String(c[3*e])+String(c[3*e+1])+String(c[3*e+2]),g in d&&d[g].push(e);return d};a.PF=function(a,b,c,d){var e;e=F(a.sa[0].a_position,a);if(c){var f;f=a.sa[0].a_tbn;for(var g=ea.Qz(f),k=new Float32Array(3*g),l=0;l<
g;l++){var h=ea.Fb(f,l,Z),h=da.transformQuat(ba.Ee,h,Ja);k[3*l]=h[0];k[3*l+1]=h[1];k[3*l+2]=h[2]}f=F(k,a)}k=e.length;l=new Float32Array(k);g=Ja;for(a=0;a<k;a++){var q=e[a];g.set(q.subarray(0,3));S.set(q.subarray(3,6));oa.set(q.subarray(6));l[a]=Math.sqrt(K(g,S,oa))}g=new Float32Array(k);g[0]=l[0];for(a=1;a<k;a++)g[a]=g[a-1]+l[a];k=g[l.length-1];l=[];for(a=0;a<b;a++){var h=k*ba.oi(d),h=ba.iy(g,h,0,g.length-1),q=c?f[h]:e[h],n=d;(h=Ja)||(h=new Float32Array(3));var m=q[0],y=q[1],J=q[2],C=q[3],p=q[4],
v=q[5],z=q[6],u=q[7],q=q[8],B=ba.oi(n),n=ba.oi(n);1<B+n&&(B=1-B,n=1-n);var A=1-B-n;h[0]=A*m+B*C+n*z;h[1]=A*y+B*p+n*u;h[2]=A*J+B*v+n*q;c?(l[a]=new Float32Array(4),da.normalize(h,h),h=ma.rotationTo(ba.Ee,h,Z),l[a][0]=h[0],l[a][1]=h[1],l[a][2]=h[2],l[a][3]=h[3]):(l[a]=new Float32Array(3),l[a][0]=h[0],l[a][1]=h[1],l[a][2]=h[2])}return l};a.qz=U;a.tfa=K;a.tN=A;a.WQ=function(a,b,c){a=a.sa[0].a_position;for(var d=0;d<a.length;d+=3)a[d]=(a[d]-c[0])*b[0]+c[0],a[d+1]=(a[d+1]-c[1])*b[1]+c[1],a[d+2]=(a[d+2]-
c[2])*b[2]+c[2]};a.$K=function(a,b,c){var e=a.T[0].da;a=a.A.yh;for(var f=1;f<a.length;f++)a[f].name==b&&(a[f].value=c);for(f=0;f<e.length;f++)if(!e[f].Th&&e[f].$f&&!e[f].$k){b=e[f].Pa;c=R("a_position");var g=H(b.Uc,c);aa.bindBuffer(aa.ARRAY_BUFFER,d(b.Xd,c));var k=b.cd.a_position;c=e[f];var l=a;if(k){for(var h=k.offset,k=k.length+h,q=c.Pa.Gb[0].jh.a_position,n=h;n<k;n++)g[n]=q[n-h];for(n=1;n<c.Pa.Gb.length;n++){var q=c.Pa.Gb[n].jh.a_position,m=l[n].value;if(m)for(var y=h;y<k;y++)g[y]+=m*q[y-h]}aa.bufferSubData(aa.ARRAY_BUFFER,
ba.xk*h,g.subarray(h))}g=R("a_tbn");c=H(b.Uc,g);aa.bindBuffer(aa.ARRAY_BUFFER,d(b.Xd,g));l=b.cd.a_tbn;b=c;c=a;if(l){g=l.offset;l=l.length+g;h=e[f].Pa.Gb;k=h[0].jh.a_tbn;n=ea.identity(xa);for(q=g;q<l;q+=ea.oK){for(var m=ea.identity(V),y=(q-g)/ea.oK,C=1;C<h.length;C++){var p=c[C].value;if(p){var J=ea.Qo(h[C].jh.a_tbn,y,ca),p=ea.slerp(n,J,p,ca);ea.gB(p,n,m)}}y=ea.Qo(k,y,ca);m=ea.gB(m,y,ca);b[q]=ba.cr(m[0]);b[q+1]=ba.cr(m[1]);b[q+2]=ba.cr(m[2]);b[q+3]=ba.cr(m[3])}aa.bufferSubData(aa.ARRAY_BUFFER,ba.xk*
g,b.subarray(g))}}};a.KE=function(a){return a.A.$f};a.Rba=function(a){var b=[];if(a.A)for(var c=1;c<a.A.yh.length;c++)b.push(a.A.yh[c].name);return b};a.Qba=function(a,b){if(a.A)for(var c=1;c<a.A.yh.length;c++)if(b==a.A.yh[c].name)return a.A.yh[c].value;return 0};a.O0=function(a,b){var c=a.A.yh;if(c)for(var d=1;d<c.length;d++)if(c[d].name==b)return!0;return!1};a.oG=function(a){return a&&a.A&&a.A.ff?!0:!1};a.FZ=function(b,c){var d=b.Pa;if(d){for(var e=c.length/3/2,f=new Float32Array(12*e),g=new Float32Array(12*
e),k=new Uint16Array(6*e),l=0;l<e;l++){var h=6*l,m=6*l+3,y=c[h],C=c[h+1],h=c[h+2],p=c[m],v=c[m+1],m=c[m+2],u=p-y,A=v-C,D=m-h;f[12*l]=y;f[12*l+1]=C;f[12*l+2]=h;g[12*l]=u;g[12*l+1]=A;g[12*l+2]=D;f[12*l+3]=p;f[12*l+4]=v;f[12*l+5]=m;g[12*l+3]=-u;g[12*l+4]=-A;g[12*l+5]=-D;f[12*l+6]=y;f[12*l+7]=C;f[12*l+8]=h;g[12*l+6]=-u;g[12*l+7]=-A;g[12*l+8]=-D;f[12*l+9]=p;f[12*l+10]=v;f[12*l+11]=m;g[12*l+9]=u;g[12*l+10]=A;g[12*l+11]=D;k[6*l]=4*l;k[6*l+1]=4*l+1;k[6*l+2]=4*l+2;k[6*l+3]=4*l;k[6*l+4]=4*l+3;k[6*l+5]=4*l+
1}var l=0,E;for(E in d.cd)e=d.cd[E],l+=f.length/3*e.Sc;e={};e["float"]=l;l=d.Uc=n(e);a.N5(d,b.Lj,k);k=0;for(E in d.cd)switch(e=d.cd[E],E){case "a_position":q(l,E,f,k);e.offset=k;e.length=f.length;k+=e.length;break;case "a_direction":q(l,E,g,k);e.offset=k;e.length=g.length;k+=e.length;break;default:e.offset=k,e.length=f.length/3*e.Sc,y=new Float32Array(e.length),q(l,E,y,k),k+=e.length}B(d)}};a.QX=function(a){if(a){var b=m();if(a.mf)switch(a.To){case aa.UNSIGNED_SHORT:b.mf=new Uint16Array(a.mf);break;
case aa.UNSIGNED_INT:b.mf=new Uint32Array(a.mf)}else b.mf=null;for(var c=b,d=a.Uc,e=[],f=0;f<d.length;f++){var g=d[f].Kn,k=d[f].type;e.push({Kn:new g.constructor(g),type:k})}c.Uc=e;b.To=a.To;b.count=a.count;b.cd=ba.Y(a.cd);b.usage=a.usage;b.Sq=a.Sq;b.Uq=a.Uq;b.ci=null;b.uA=ba.Y(a.uA);b.Gb=ba.Y(a.Gb);b.Yo=a.Yo;b.Mh=a.Mh}else b=null;return b};a.ei=E;a.TX=function(a){var b=E(a.name);b.hb=a.hb;b.Ha=ba.Y(a.Ha);b.sa=ba.Y(a.sa);b.Ea=ba.Y(a.Ea);b.Gb=ba.Y(a.Gb);C.Gj(a.Dd.Ca,b.Dd.Ca);C.Oq(a.Dd.Lb,b.Dd.Lb);
C.xm(a.Dd.Bc,b.Dd.Bc);C.ZX(a.Dd.Jd,b.Dd.Jd);b.Of=ba.Y(a.Of);return b};a.reset=function(){aa=null};a.Pca=n;a.I3=X;a.Zba=d;a.iG=H;a.gba=G;a.$z=R;a.tO=function(a){switch(R(a)){case "float":return ba.xk;case "short":return ba.Ht;case "unsigned_byte":return ba.MD;default:return ba.xk}};a.j0=function(a){switch(R(a)){case "float":return aa.FLOAT;case "short":return aa.SHORT;case "unsigned_byte":return aa.UNSIGNED_BYTE;default:return aa.FLOAT}};a.hT=q;a.Dfa=function(a,b){switch(R(a)){case "short":return ba.TR(b);
case "unsigned_byte":return ba.FS(b)}return b};a.Cfa=function(a,b){switch(R(a)){case "short":return ba.cr(b);case "unsigned_byte":return ba.GS(b)}return b};a.K9=ja;a.I9=qa};b4w.module.__subscene=function(a,w){function t(a,b){a.Rr=b;a.zv=new Float32Array(3*b);a.jp=new Float32Array(4*b);a.ip=new Float32Array(4*b)}function c(a){a={type:a,Ib:"",Jo:!1,xb:!1,uB:!1,Tt:!1,Kr:!1,Am:0,ng:0,Bm:[],debug_view_mode:0,debug_colors_seed:0,Wy:1,Ju:!1,time:0,H:null,Oh:null,Ao:[],kb:[],rb:[],xi:[],pj:new Float32Array(3),Nd:new Float32Array(3),qe:new Float32Array(4),tg:new Float32Array(4),mg:new Float32Array(16),ss:0,ih:0,Rr:0,zv:null,jp:null,ip:null,yP:null,se:new Float32Array(3),De:new Float32Array(3),
ts:new Float32Array(4),TC:new Float32Array(3),SC:new Float32Array([0,0,1]),UC:new Float32Array(4),rs:new Float32Array(3),tC:"",oy:0,tp:0,Ku:0,cp:!1,dj:new Float32Array(3),nj:!1,fu:0,oj:new Float32Array(4),vk:0,fh:!1,Qk:0,sy:new Float32Array(2),Pk:0,procedural_skydome:!1,use_as_environment_lighting:!1,mie_brightness:0,rayleigh_brightness:0,spot_brightness:0,mie_strength:0,rayleigh_strength:0,scatter_strength:0,mie_collection_power:0,rayleigh_collection_power:0,mie_distribution:0,rn:new Float32Array(3),
As:!1,xs:!1,ys:0,Cs:0,Bs:0,zs:0,Hp:0,ssao_only:!1,ssao_white:!1,brightness:0,contrast:0,exposure:0,saturation:0,god_rays_intensity:0,Ym:0,bs:0,un:0,Du:0,self_shadow_polygon_offset:0,self_shadow_normal_offset:0,Ws:null,Vs:null,Rw:null,Fl:null,mc:!1,Dz:"",Jq:0,Gq:0,Iq:0,ao:!0,average_luminance:0,au:0,Qu:0,mb_decay_threshold:0,mb_factor:0,bB:0,Uv:"",dof_bokeh:!1,zy:"",JG:new Float32Array(2),IA:0,ky:2,Hq:.5,small_glow_mask_width:0,large_glow_mask_width:0,small_glow_mask_coeff:0,large_glow_mask_coeff:0,
Bw:new Float32Array(2),Mb:new Float32Array(2),al:new Float32Array(4),chromatic_aberration_coefs:new Float32Array(4),enable_hmd_stereo:!1,xh:0,Gv:!0,sC:!1,AC:!1,wC:!1,xC:!1,zC:!1,yC:!1,rC:"",Lp:!1,Mp:!1,Np:!1,lc:!0,enqueue:!0,yb:!0,Eb:!0,rd:!0,Wa:!0,wf:1};a.Mb[0]=1;a.Mb[1]=1;a.al[2]=.5;a.al[3]=.5;a.Hp=8;return a}function b(a,b){return a==b?0:a>b?1:-1}function k(a,c){return b(a.gg,c.gg)||b(a.rl,c.rl)||b(a.Sd,c.Sd)||b(a.Hb.GO,c.Hb.GO)||b(a.em,c.em)}var h=w("__camera"),O=w("__config"),m=w("__util"),x=
w("__boundings"),r=O.zd;a.Nb=0;a.Hd=1;a.Fh=2;a.Ge=3;a.$d=4;a.Vg=5;a.dg=6;a.Fe=7;a.ae=8;a.Wg=9;a.yk=10;a.rc=11;a.st=13;a.Hx=14;a.Df=15;a.zi=16;a.Bi=17;a.Wp=18;a.DJ=19;a.Kx=20;a.gE=21;a.wJ=22;a.Jt=23;a.Ix=24;a.eE=25;a.Jx=26;a.OD=27;a.tj=28;a.ND=29;a.qt=30;a.Ci=31;a.vq=32;a.sq=33;a.rx=34;a.Ye=35;a.PD=36;a.Gh=37;a.LUMINANCE=38;a.zJ=39;a.Cx=40;a.lt=41;a.RV=42;a.mm=43;a.Ft=44;a.nK=45;a.km=46;a.wq=47;a.AJ=48;a.dZ=function(a,b,k,m){var e=c(8);e.Du=a;e.self_shadow_polygon_offset=k.self_shadow_polygon_offset;
e.xh=b;switch(k.Zi[b]){case "SPOT":case "POINT":e.H=h.ad(h.fd);h.rR(e.H,k.bS[b],k.nu[b],k.mu[b]);break;default:e.H=h.ad(h.Dk)}t(e,m);return e};a.UX=function(a){var b=c(a.type);b.Ib=a.Ib;b.Jo=a.Jo;b.lc=a.lc;b.enqueue=a.enqueue;b.yb=a.yb;b.Eb=a.Eb;b.rd=a.rd;b.xb=a.xb;b.uB=a.uB;b.Tt=a.Tt;b.Kr=a.Kr;b.Wa=a.Wa;b.Am=0;b.ng=0;b.Bm=[];b.debug_view_mode=a.debug_view_mode;b.debug_colors_seed=a.debug_colors_seed;b.Wy=a.Wy;b.Ju=a.Ju;b.time=a.time;b.H=h.hd(a.H,!0);b.Oh=m.Y(a.Oh);b.Ao=m.Y(a.Ao);b.kb=m.Y(a.kb);b.rb=
m.Y(a.rb);b.xi=m.Y(a.xi);b.pj.set(a.pj);b.Nd.set(a.Nd);b.qe.set(a.qe);b.tg.set(a.tg);b.mg.set(a.mg);b.ss=a.ss;b.ih=a.ih;b.Rr=a.Rr;b.zv=m.Y(a.zv);b.jp=m.Y(a.jp);b.ip=m.Y(a.ip);b.yP=m.Y(a.yP);b.se.set(a.se);b.De.set(a.De);b.ts.set(a.ts);b.TC.set(a.TC);b.SC.set(a.SC);b.UC.set(a.UC);b.rs.set(a.rs);b.tC=a.tC;b.oy=a.oy;b.tp=a.tp;b.Ku=a.Ku;b.cp=a.cp;b.dj.set(a.dj);b.nj=a.nj;b.fu=a.fu;b.oj.set(a.oj);b.vk=a.vk;b.fh=a.fh;b.Qk=a.Qk;b.sy.set(a.sy);b.Pk=a.Pk;b.procedural_skydome=a.procedural_skydome;b.use_as_environment_lighting=
a.use_as_environment_lighting;b.mie_brightness=a.mie_brightness;b.rayleigh_brightness=a.rayleigh_brightness;b.spot_brightness=a.spot_brightness;b.mie_strength=a.mie_strength;b.rayleigh_strength=a.rayleigh_strength;b.scatter_strength=a.scatter_strength;b.mie_collection_power=a.mie_collection_power;b.rayleigh_collection_power=a.rayleigh_collection_power;b.mie_distribution=a.mie_distribution;b.rn.set(a.rn);b.As=a.As;b.xs=a.xs;b.ys=a.ys;b.Cs=a.Cs;b.Bs=a.Bs;b.zs=a.zs;b.Hp=a.Hp;b.ssao_only=a.ssao_only;
b.ssao_white=a.ssao_white;b.brightness=a.brightness;b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;b.god_rays_intensity=a.god_rays_intensity;b.Ym=a.Ym;b.bs=a.bs;b.un=a.un;b.Du=a.Du;b.self_shadow_polygon_offset=a.self_shadow_polygon_offset;b.self_shadow_normal_offset=a.self_shadow_normal_offset;b.Ws=m.Y(a.Ws);b.Vs=m.Y(a.Vs);b.Rw=m.Y(a.Rw);b.Fl=m.Y(a.Fl);b.mc=a.mc;b.Dz=a.Dz;b.Jq=a.Jq;b.Gq=a.Gq;b.Iq=a.Iq;b.ao=a.ao;b.average_luminance=a.average_luminance;b.au=a.au;b.Qu=a.Qu;b.mb_decay_threshold=
a.mb_decay_threshold;b.mb_factor=a.mb_factor;b.bB=a.bB;b.Uv=a.Uv;b.zy=a.zy;b.dof_bokeh=a.dof_bokeh;b.JG.set(a.JG);b.IA=a.IA;b.ky=a.ky;b.Hq=a.Hq;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.wf=a.wf;b.Bw.set(a.Bw);b.Mb.set(a.Mb);b.al.set(a.al);b.chromatic_aberration_coefs.set(a.chromatic_aberration_coefs);b.enable_hmd_stereo=a.enable_hmd_stereo;b.xh=a.xh;
b.Gv=a.Gv;b.sC=a.sC;b.AC=a.AC;b.wC=a.wC;b.xC=a.xC;b.zC=a.zC;b.yC=a.yC;b.rC=a.rC;b.Lp=a.Lp;b.Mp=a.Mp;b.Np=a.Np;return b};a.VY=function(){var a=c(10);a.H=h.ad(h.Ei);return a};a.bd=function(a){var b=c(11);b.yb=!1;b.Eb=!1;b.rd=!1;b.mc=!0;b.H=h.ad(h.Ac);b.Uv=a;switch(a){case "NONE":b.Mb[0]=1;b.Mb[1]=1;break;case "GRAYSCALE":b.Mb[0]=1;b.Mb[1]=1;break;case "X_BLUR":b.Mb[0]=1;b.Mb[1]=0;break;case "Y_BLUR":b.Mb[0]=0;b.Mb[1]=1;break;case "X_GLOW_BLUR":b.Mb[0]=1;b.Mb[1]=0;break;case "Y_GLOW_BLUR":b.Mb[0]=0;
b.Mb[1]=1;break;case "X_BLOOM_BLUR":b.Mb[0]=1;b.Mb[1]=0;break;case "Y_BLOOM_BLUR":b.Mb[0]=0;b.Mb[1]=1;break;case "X_DOF_BLUR":b.Mb[0]=1;b.Mb[1]=1;break;case "Y_DOF_BLUR":b.Mb[0]=1;b.Mb[1]=1;break;case "X_ALPHA_BLUR":b.Mb[0]=1;b.Mb[1]=0;b.wf=3;break;case "Y_ALPHA_BLUR":b.Mb[0]=0;b.Mb[1]=1;b.wf=3;break;case "X_EXTEND":b.Mb[0]=1;b.Mb[1]=0;break;case "Y_EXTEND":b.Mb[0]=0;b.Mb[1]=1;break;default:m.K("Wrong postprocessing effect: "+a)}return b};a.TY=function(a,b){var e=c(13);e.yb=!1;e.Eb=!1;e.rd=!1;e.small_glow_mask_coeff=
b.Tj.small_glow_mask_coeff;e.large_glow_mask_coeff=b.Tj.large_glow_mask_coeff;e.small_glow_mask_width=b.Tj.small_glow_mask_width;e.large_glow_mask_width=b.Tj.large_glow_mask_width;e.H=a;e.mc=!0;return e};a.zo=function(a,b,k,h,x,r,w,p,I){var e=c(a);0==a?(e.yb=!0,e.Eb=k,e.xb=!1):1==a?(e.yb=!1,e.Eb=!1,e.xb=!0):2==a?(e.yb=!1,e.Eb=!0,e.xb=!0):3==a||4==a?(e.yb=!0,e.Eb=!0,e.xb=!1):5==a||6==a?(e.yb=!1,e.Eb=!1,e.xb=!0):7==a?(e.yb=!0,e.Eb=!1,e.xb=!0):m.K("wrong main subscene type");e.xb&&p&&(e.self_shadow_normal_offset=
p.self_shadow_normal_offset);e.H=b;if(a=w.Fp)e.ts.set([a.vL,a.NO,a.zT,a.yT]),e.rs.set(a.color),e.ss=a.Qa;e.se.set(w.se);e.De.set(w.De);e.ih=w.ih;e.qe=r.qe;e.tg=r.tg;h&&(h.qe&&e.oj.set(h.qe),e.vk=h.vk,h.fh&&I&&(e.fh=!0,e.Qk=h.oX,e.Pk=h.nX,e.sy.set(h.pX)));t(e,x);return e};a.Bu=function(){var a=c(14);a.mc=!0;a.H=h.ad(h.Ac);return a};a.EM=function(a,b,k){var e=c(15);b&&(e.type=16,e.yb=!1,e.Eb=!0);e.enqueue=!1;e.H=a;t(e,k);return e};a.RY=function(a){var b=c(17);b.lc=!1;b.yb=!1;b.Eb=!1;b.H=a;return b};
a.MY=function(a){var b=c(18);b.yb=!0;b.Eb=!1;b.H=a;return b};a.eZ=function(a,b){var e=c(9);e.H=a;t(e,b);return e};a.SY=function(a){var b=c(19);b.yb=!1;b.Eb=!1;b.H=a;b.mc=!0;return b};a.gZ=function(a,b,k){var e=c(20);e.yb=!1;e.Eb=!1;e.rd=!1;e.H=a;e.qe=b.qe;e.oj.set(b.qe);e.Cs=k.radius_increase;e.As=k.R0;e.Bs=k.influence;e.zs=k.dist_factor;e.Hp=k.G3;e.mc=!0;return e};a.hZ=function(a,b){var e=c(21);e.yb=!1;e.Eb=!1;e.rd=!1;e.H=a;e.xs=b.UW;e.ys=b.blur_discard_value;e.mc=!0;return e};a.LY=function(a){var b=
c(22);b.yb=!1;b.Eb=!1;b.rd=!1;b.wf=1/a.cs;b.Dz=a.LK;b.H=h.ad(h.Ac);b.mc=!0;return b};a.kF=function(a,b){var e=c(a);e.yb=23==a||24==a?!0:!1;e.Eb=!1;e.rd=!1;e.wf=1/b.cs;e.H=h.ad(h.Ac);23==a&&(e.s1=new Float32Array(4));e.mc=!0;return e};a.QY=function(a,b,k,m){var e=c(27);e.yb=!1;e.Eb=!1;e.rd=!1;e.H=h.ad(h.Ac);e.brightness=a;e.contrast=b;e.exposure=k;e.saturation=m;e.mc=!0;return e};a.ZY=function(a,b){var e=c(28);e.yb=!1;e.Eb=!1;e.rd=!1;e.H=h.ad(h.Ac);e.Tt=!0;e.mb_decay_threshold=a;e.mb_factor=b;e.mc=
!0;return e};a.hF=function(a,b){var e=c(29);e.yb=!1;e.Eb=!1;e.rd=!1;e.H=a;e.wf=e.H.dof_power;e.zy=b;e.mc=!0;return e};a.FM=function(a,b){var e=c(30);e.yb=!1;e.Eb=!1;e.rd=!1;e.H=a;e.wf=a.dof_power;e.dof_bokeh=b;e.mc=!0;return e};a.aZ=function(a,b){var e=c(31);e.rd=!1;e.H=a;t(e,b);return e};a.$Y=function(a){var b=c(32);r.outlining_overview_mode?b.dj.set(r.dj):b.dj.set(a.dj);b.tp=a.tp;b.Qu=5;b.au=3;b.rd=!1;b.H=h.ad(h.Ac);b.mc=!0;return b};a.jF=function(a,b,k,h,m,x,r){var e=c(33);e.yb=!1;e.Eb=!1;e.rd=
!1;e.se=new Float32Array([1,1,1]);e.De=new Float32Array([1,1,1]);e.ih=1;e.uB=h;e.nj=b;e.bs=m;e.Ym=k;e.un=r;e.H=a;t(e,x);return e};a.UY=function(a,b){var e=c(34);e.yb=!1;e.Eb=!1;e.rd=!1;e.H=h.ad(h.Ac);e.god_rays_intensity=a;t(e,b);e.mc=!0;return e};a.fZ=function(a,b,k,v){var e=c(35);e.enqueue=!1;e.yb=!1;e.Eb=!1;e.rd=!1;var g=h.ad(h.Ac);g.width=v;g.height=v;e.H=g;e.Oh=m.NF();t(e,b);e.se=new Float32Array([1,1,1]);e.De=new Float32Array([1,1,1]);e.ih=1;e.rn.set(k.rn);e.procedural_skydome=k.procedural_skydome;
e.use_as_environment_lighting=k.use_as_environment_lighting;e.rayleigh_brightness=k.rayleigh_brightness;e.mie_brightness=k.mie_brightness;e.spot_brightness=k.spot_brightness;e.scatter_strength=k.scatter_strength;e.rayleigh_strength=k.rayleigh_strength;e.mie_strength=k.mie_strength;e.rayleigh_collection_power=k.rayleigh_collection_power;e.mie_collection_power=k.mie_collection_power;e.mie_distribution=k.mie_distribution;if(a){e.se.set(a.se);e.De.set(a.De);e.ih=a.ih;if(b=a.Fp)e.ts.set([b.vL,b.NO,b.zT,
b.yT]),e.rs.set(b.color),e.ss=b.Qa,e.sC=b.invert,e.AC=b.dT,e.wC=b.ZS,e.xC=b.$S,e.zC=b.bT,e.yC=b.aT,e.rC=b.wL;e.Lp=a.Lp;e.Mp=a.Mp;e.Np=a.Np;e.tC=a.Pe}return e};a.WY=function(a,b){var e=c(46);e.enqueue=!1;e.yb=!1;e.Eb=!1;e.rd=!1;var g=h.ad(h.Ac);g.width=b;g.height=b;e.H=g;e.Oh=m.NF();t(e,a);return e};a.cZ=function(a){var b=c(47);b.enqueue=!1;b.yb=!1;b.Eb=!1;b.rd=!1;var g=h.ad(h.Ac);g.width=128;g.height=128;b.H=g;b.Oh=m.NF();t(b,a);return b};a.PY=function(){var a=c(48);a.enqueue=!1;a.yb=!1;a.Eb=!1;a.rd=
!1;var b=h.ad(h.Ac);b.width=512;b.height=512;a.H=b;return a};a.iF=function(){var a=c(36);a.yb=!1;a.Eb=!1;a.H=h.ad(h.Ac);a.mc=!0;return a};a.iZ=function(a,b){var e=c(37);e.yb=!1;e.Eb=!1;e.Ib=a?"HMD":b?"ANAGLYPH":"SIDEBYSIDE";e.H=h.ad(h.Ac);e.mc=!0;return e};a.XY=function(){var a=c(38);a.yb=!1;a.Eb=!1;a.H=h.ad(h.Ac);a.mc=!0;return a};a.NY=function(){var a=c(39);a.yb=!1;a.Eb=!1;a.H=h.ad(h.Ac);a.mc=!0;return a};a.DY=function(){var a=c(45);a.yb=!1;a.Eb=!1;a.H=h.ad(h.Ac);a.mc=!0;return a};a.YY=function(a,
b,k,h){var e=c(40);e.yb=!1;e.Eb=!1;e.Jq=a;e.Iq=b;e.H=h;t(e,k);e.mc=!0;return e};a.OY=function(a){var b=c(41);b.yb=!1;b.Eb=!1;b.H=h.ad(h.Ac);b.Gq=a;b.ky=5;b.mc=!0;return b};a.z$=function(a){var b=c(42);b.yb=!1;b.Eb=!1;b.H=a;b.mc=!0;return b};a.GM=function(){var a=c(43);a.enqueue=!1;return a};a.bZ=function(){var a=c(44);a.mc=!0;return a};a.RC=function(a){switch(a.type){case 0:return"MAIN OPAQUE";case 1:return"MAIN BLEND";case 2:return"MAIN XRAY";case 3:return"MAIN PLANE REFLECT";case 4:return"MAIN CUBE REFLECT";
case 5:return"MAIN PLANE REFLECT BLEND";case 6:return"MAIN CUBE REFLECT BLEND";case 7:return"MAIN GLOW";case 8:return"SHADOW CAST";case 9:return"SHADOW RECEIVE";case 10:return"GRASS MAP";case 11:return"POSTPROCESSING ("+a.Uv.replace(/_/g," ")+")";case 13:return"GLOW COMBINE";case 14:return"RESOLVE";case 15:return"COLOR PICKING";case 16:return"COLOR PICKING XRAY";case 17:return"DEBUG VIEW";case 18:return"ANCHOR VISIBILITY";case 19:return"DEPTH PACK";case 20:return"SSAO";case 21:return"SSAO BLUR";case 22:return"ANTIALIASING";
case 23:return"SMAA BLENDING WEIGHT CALCULATION";case 24:return"SMAA EDGE DETECTION";case 25:return"SMAA RESOLVE";case 26:return"SMAA NEIGHBORHOOD BLENDING";case 27:return"COMPOSITING";case 28:return"MOTION BLUR";case 29:return"COC";case 30:return"DOF";case 31:return"OUTLINE MASK";case 32:return"OUTLINE";case 33:return"GOD RAYS";case 34:return"GOD RAYS COMBINE";case 35:return"SKY";case 46:return"IRRADIANCE";case 47:return"ROUGHNESS_CONVOLUTION";case 48:return"PRE-COMPUTE_BRDF";case 36:return"COPY";
case 37:return"STEREO";case 38:return"LUMINANCE";case 39:return"AVERAGE LUMINANCE";case 40:return"LUMINANCE TRUNCED";case 41:return"BLOOM";case 42:return"VELOCITY";case 44:return"PERFORMANCE";case 43:return"SINK";case 45:return"RESIZE";default:return"UNKNOWN"}};a.pd=function(a,b){for(var c=b.Fa,e=c.Hb,g=c.gg,k=0;k<a.kb.length;k++){var h=a.kb[k].Ua,m=h.indexOf(b);if(-1!=m&&(h.splice(m,1),!h.length)){a.kb.splice(k,1);break}}k=a.xb?c.Sd:0;a:{h=a.kb;for(m=0;m<h.length;m++){var x=h[m];if(x.Hb==e&&x.gg==
g&&x.Sd==k&&x.rl==c.rl){h=x;break a}}h=null}h?h.Ua.push(b):(a.kb.push({Hb:e,Ua:[b],gg:g,Sd:k,rl:c.rl,lc:!0,em:Infinity}),a.Gv=!0)};a.Xj=function(a,b,c){b={lc:!0,AF:[!0,!0,!0,!0,!0,!0],sh:b,Fa:a,$w:c||null,uA:null,em:Infinity};a.cg&&a.Pa.mf&&(c=a.Pa.mf,b.uA={i2:new Float32Array(c.length),j2:new Float32Array(c.length),CZ:new Float32Array(c.length/3),AT:new Float32Array(3),NW:x.eX(a.Db.Ff)});return b};a.N4=function(a){a.kb.sort(k);a.Gv=!1}};b4w.module.__textures=function(a,w){function t(){ha||(ha=Q.createFramebuffer());return ha}function c(){za||(za=Q.createTexture());return za}function b(){return{type:0,source:"",uw:"",width:0,height:0,uu:1,anisotropic_filtering:0,Rl:1024,Em:!1,Lh:null,Bb:0,Kb:null,bg:null,Sm:!1,ft:-1,tb:null,Tw:"",Zm:0,Ri:0,Ia:0,tc:0,Hm:0,ii:!1,ij:1,Ve:!1,TP:0,je:null,kw:0,jw:0,Ml:-1,mw:!1,nn:-1,Uw:!1,lJ:!1,am:!1,Jn:!1,repeat:!0,Uo:"",or:"",Vo:"",uG:"",tG:"",Mm:""}}function k(a,b,c){a.Vo=b.uuid;a.or=b.filepath;a.uG=
b.source;a.tG=b.name;a.Uo=ba.El(c+b.filepath);a.Mm=b.Hh;-1==J.xa.indexOf(a)&&(J.xa.push(a),J.Fr.push(!1))}function h(a,b,c){var d=-1<b.indexOf(".pvr");a.Mm=-1<b.indexOf(".dds")?"dds":d?"pvr":"";a.or=b;a.Uo=c;a.Vo=ba.Fz();J.xa.push(a);J.Fr.push(!0)}function O(c,d,e){var f=b();f.type=c;f.source="NONE";f.Ve=e;if(c==a.Nx||c==a.Lx||c==a.Ox||c==a.Mx)f.bg=Q.createRenderbuffer();else{var g=Q.TEXTURE_2D,k=Q.createTexture();Q.bindTexture(g,k);Q.texParameteri(g,Q.TEXTURE_MAG_FILTER,Q.LINEAR);e?Q.texParameteri(g,
Q.TEXTURE_MIN_FILTER,va[oa.Vl]):Q.texParameteri(g,Q.TEXTURE_MIN_FILTER,Q.LINEAR);Q.texParameteri(g,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE);Q.texParameteri(g,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE);e=p(f);var l=I(f),h=D(f);if(c==a.Xn)var q=null;else c==a.Yn?q=new Float32Array([204,204,204,255]):q=new Uint8Array([204,204,204,255]);Q.texImage2D(g,0,l,1,1,0,e,h,q);oa.su&&d&&Q.texParameterf(g,Q.TEXTURE_COMPARE_MODE,Q.COMPARE_REF_TO_TEXTURE);Q.bindTexture(g,null);f.Bb=g;f.Kb=k}return f}function m(a){var b=a.Bb;Q.bindTexture(b,
a.Kb);var c=p(a),d=I(a),e=D(a),f=a.Lh.canvas;Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,!0);Q.texImage2D(b,0,d,c,e,f);Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,!1);a.Em&&Q.generateMipmap(b);Q.bindTexture(b,null);a.width=f.width;a.height=f.height}function x(a){var b=a.Bb;Q.bindTexture(b,a.Kb);Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,!0);4!=a.tb.length?a.ii?e(a,a.tb,a.width*a.ij,a.height*a.ij,!1):Q.texImage2D(b,0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,a.tb):Q.texImage2D(b,0,Q.RGBA,1,1,0,Q.RGBA,Q.UNSIGNED_BYTE,a.tb);Q.bindTexture(b,
null)}function r(a){var b=a.Bb;Q.bindTexture(b,a.Kb);Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,!0);a.ii?e(a,a.je[a.Ml],a.width*a.ij,a.height*a.ij,!1):Q.texImage2D(b,0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,a.je[a.Ml]);Q.bindTexture(b,null)}function g(){aa||(aa=document.createElement("canvas"));return aa}function e(a,b,d,e,f){f||(v(Q.TEXTURE_2D),Q.texImage2D(Q.TEXTURE_2D,0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,b));Q.bindTexture(Q.TEXTURE_2D,null);b=t();f=c();da.HZ(a,d,e,b,f)}function B(a,b,c){for(var d=0;6>d;d++){var e=
Va[d],f=Ba[d],k=g();k.width=c;k.height=c;var l=k.getContext("2d");l.translate(c/2,c/2);"TEXTURE_CUBE_MAP_POSITIVE_X"==e?(l.rotate(Math.PI/2),l.scale(1,-1)):"TEXTURE_CUBE_MAP_NEGATIVE_X"==e?(l.rotate(Math.PI/2),l.scale(-1,1)):"TEXTURE_CUBE_MAP_POSITIVE_Y"==e||"TEXTURE_CUBE_MAP_POSITIVE_Z"==e?l.scale(1,-1):"TEXTURE_CUBE_MAP_NEGATIVE_Y"!=e&&"TEXTURE_CUBE_MAP_NEGATIVE_Z"!=e||l.scale(-1,1);l.drawImage(a,f[0]*b,f[1]*b,b,b,-c/2,-c/2,c,c);oa.PM?Q.texImage2D(Q[e],0,Q.RGBA,c,c,0,Q.RGBA,Q.UNSIGNED_BYTE,new Uint8Array(l.getImageData(0,
0,c,c).data.buffer)):Q.texImage2D(Q[e],0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,k)}}function v(a){Q.bindTexture(a,null);var b=c();Q.bindTexture(a,b);Q.texParameteri(a,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE);Q.texParameteri(a,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE);Q.texParameteri(a,Q.TEXTURE_MAG_FILTER,Q.LINEAR);Q.texParameteri(a,Q.TEXTURE_MIN_FILTER,Q.LINEAR)}function P(a,b,d){var f=a.source,k=a.Kb,l=a.Bb,h=a.Mm,q=a.or,n;Q.bindTexture(l,k);a.repeat?(Q.texParameteri(l,Q.TEXTURE_WRAP_S,Q.REPEAT),Q.texParameteri(l,Q.TEXTURE_WRAP_T,
Q.REPEAT)):(Q.texParameteri(l,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE),Q.texParameteri(l,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE));a.Sm||"NODE_TEX"==f?Q.texParameteri(l,Q.TEXTURE_MIN_FILTER,Q.LINEAR):Q.texParameteri(l,Q.TEXTURE_MIN_FILTER,va[oa.Vl]);a.anisotropic_filtering&&Q.texParameterf(l,ma.RF().TEXTURE_MAX_ANISOTROPY_EXT,a.anisotropic_filtering);4==b.length&&(n=!0,b=new Uint8Array([255*b[0],255*b[1],255*b[2],255*b[3]]));if("IMAGE"==f)if(n)Q.texImage2D(l,0,Q.RGBA,1,1,0,Q.RGBA,Q.UNSIGNED_BYTE,b),a.width=1,a.height=
1;else if(h){n=pa.BO(b,h);d=ba.ku(n.width)||ba.ku(n.height);if(n.width>Z.nc||n.height>Z.nc){ea.error('Image "'+q+'" has unsupported size: '+n.width+"x"+n.height+". Max available: "+Z.nc+"x"+Z.nc+".");return}f=n.width;n=n.height;if(d||"pvr"==h)a.ii=!0,v(l),f=M(f*a.ij),n=M(n*a.ij);"dds"==h?pa.q6(Q,ma.kO(),b,!0):"pvr"==h&&pa.r6(Q,ma.hO(),b);a.ii&&(e(a,null,f,n,!0),Q.bindTexture(l,k),Q.generateMipmap(l));a.width=f;a.height=n;a.uu=pa.T_(b,h)}else{Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,!0);a.Sm?oa.lw?(f=b[0].width,
n=b[0].height):(f=b.videoWidth,n=b.videoHeight):(f=b.width,n=b.height);a.width=f;a.height=n;if(f>Z.nc||n>Z.nc)ea.warn('Image "'+q+'" has unsupported size: '+f+"x"+n+". Max available: "+Z.nc+"x"+Z.nc+". Reduced image size will be used."),a.ij=Math.min(Z.nc/f,Z.nc/n),a.ii=!0;a.Sm&&(d in ya||(ya[d]={}),ya[d][a.Tw]=a,oa.lw?(a.je=b,a.kw=b.length,a.Ri=a.jw*a.Zm/b.length,b=b[0]):(a.tb=b,a.tb.loop=a.am,a.Ri=b.duration?a.Zm/b.duration:la.fe(),fa.YM||(b.playbackRate=la.fe()/a.Ri,fa.ZL&&2<b.playbackRate&&(b.playbackRate=
2)),N(a)));f=M(a.width*a.ij);n=M(a.height*a.ij);a.ii||oa.QQ?(q=g(),h=q.getContext("2d"),q.width=f,q.height=n,h.drawImage(b,0,0,a.width,a.height,0,0,f,n),oa.PM?Q.texImage2D(l,0,Q.RGBA,f,n,0,Q.RGBA,Q.UNSIGNED_BYTE,new Uint8Array(h.getImageData(0,0,f,n).data.buffer)):Q.texImage2D(l,0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,q)):oa.sb||!ba.ku(a.width)&&!ba.ku(a.height)?Q.texImage2D(l,0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,b):(e(a,b,f,n,!1),a.ii=!0);a.width=f;a.height=n;a.Sm||(Q.bindTexture(l,k),Q.generateMipmap(l))}else if("ENVIRONMENT_MAP"==
f)if(n){for(k=0;6>k;k++)Q.texImage2D(Q["TEXTURE_CUBE_MAP_"+Va[k]],0,Q.RGBA,1,1,0,Q.RGBA,Q.UNSIGNED_BYTE,b);a.width=3;a.height=2}else{Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,!1);if(b.width%3||b.height%2){ea.error('Cubemap Image "'+q+'" has unsupported size: '+b.width+"x"+b.height+". The width must be multiple of three and the height - multiple of two.");return}k=b.width/3;k>Z.ph?(ea.warn('Cubemap Image "'+q+'" has unsupported size: '+b.width+"x"+b.height+". Max available: "+3*Z.ph+"x"+2*Z.ph+". Reduced image size will be used."),
q=M(Z.ph/k*k),a.ii=!0):(q=M(k),!oa.sb&&(3*q>Z.nc||2*q>Z.nc)&&(a.ii=!0));if(a.ii||oa.gw)B(b,k,q);else{h=b;f=q;v(Q.TEXTURE_2D);Q.texImage2D(Q.TEXTURE_2D,0,Q.RGBA,Q.RGBA,Q.UNSIGNED_BYTE,h);Q.bindTexture(Q.TEXTURE_2D,null);for(h=0;6>h;h++)Q.texImage2D(Q.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,Q.RGBA,f,f,0,Q.RGBA,Q.UNSIGNED_BYTE,null);Q.bindTexture(a.Bb,null);h=t();Q.bindFramebuffer(Q.FRAMEBUFFER,h);n=c();for(h=0;6>h;h++)da.GZ(a,Q[Va[h]],f,k,n,h);Q.bindFramebuffer(Q.FRAMEBUFFER,null);Q.bindTexture(a.Bb,a.Kb);
Q.texParameteri(a.Bb,Q.TEXTURE_MIN_FILTER,va[oa.Vl]);Q.texParameteri(a.Bb,Q.TEXTURE_MAG_FILTER,Q.LINEAR)}ia.CX()&&(ea.warn("Firefox detected, setting max cubemap size to 256, use canvas for resizing."),B(b,k,qa.hK));a.width=3*q;a.height=2*q;Q.generateMipmap(l)}else"NODE_TEX"==f&&(Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,!1),Q.texImage2D(l,0,Q.RGBA,b.width,b.height,0,Q.RGBA,Q.UNSIGNED_BYTE,b.data),a.width=b.width,a.height=b.height);Q.bindTexture(l,null)}function N(a){a.tb.oncanplay=function(){U(a)&&x(a)}}
function M(a){return ba.ku(a)?ba.pa(Math.pow(2,(a|0).toString(2).length),2,Z.nc):a}function p(b){var c;switch(b.type){case a.Di:c=Q.RGBA;break;case a.Px:c=Q.RGB;break;case a.Yn:c=Q.RGBA;break;case a.Lt:c=Q.RGB;break;case a.Xn:c=Q.DEPTH_COMPONENT;break;default:ba.K("Wrong texture type")}return c}function I(b){var c;switch(b.type){case a.Di:c=oa.sb?Q.RGBA8:Q.RGBA;break;case a.Px:c=oa.sb?Q.RGB8:Q.RGB;break;case a.Yn:c=oa.sb?Q.RGBA32F:Q.RGBA;break;case a.Lt:c=oa.sb?Q.RGB8:Q.RGB;break;case a.Xn:c=oa.sb?
y(Z.Wq):Q.DEPTH_COMPONENT;break;default:ba.K("Wrong texture type")}return c}function y(a){switch(a){case 16:a=Q.DEPTH_COMPONENT16;break;case 24:a=Q.DEPTH_COMPONENT24;break;case 32:a=Q.DEPTH_COMPONENT32F;break;default:a=Q.DEPTH_COMPONENT24}return a}function D(b){var c;switch(b.type){case a.Di:c=Q.UNSIGNED_BYTE;break;case a.Px:c=Q.UNSIGNED_BYTE;break;case a.Yn:c=Q.FLOAT;break;case a.Lt:c=Q.FLOAT;break;case a.Xn:c=Q.UNSIGNED_INT;break;default:ba.K("Wrong texture type")}return c}function l(a){a.tb?a.tb.play():
a.je&&(a.mw=!0);a.Uw=!1}function u(a){a.tb?a.tb.pause():a.je&&(a.mw=!1);a.Uw=!0}function L(a){a.tb?a.tb.currentTime=a.tc/a.Ri:a.je&&(a.Ml=K(a,a.tc),r(a))}function F(a){return a.tb?!a.tb.paused:a.je?a.mw:!1}function U(a){return a.tb||a.je?a.tb?2<=a.tb.readyState:!0:0}function K(a,b){return Math.round(b*a.kw/a.Zm)}function A(a,b){if(ca.ea(a))return n(a,b);for(var c=a.Dv,d=0;d<c.length;d++){var e=n(c[d],b);if(e)return e}return null}function E(a,b,c){if(ca.ea(a))f(a,b,c);else{a=a.Dv;for(var d=0;d<a.length;d++)f(a[d],
b,c)}}function n(a,b){var c=a.T;if(c.length)for(var c=c[0].da,d=0;d<c.length;d++){var e=c[d];if("MAIN"==e.type||"SKY"==e.type)for(var f=0;f<e.xa.length;f++)if(e.jg[f]==b)return e.xa[f]}return null}function f(a,b,c){a=a.T;if(a.length){a=a[0].da;for(var d=0;d<a.length;d++){var e=a[d];if("MAIN"==e.type)for(var f=0;f<e.xa.length;f++)if(e.jg[f]==b){var g=e.xa[f];e.xa[f]=c;R(g)}}}}function X(a,b){var c=a.T;if(c.length)for(var c=c[0].da,d=0;d<c.length;d++){var e=c[d];if("MAIN"==e.type)for(var f=0;f<e.xa.length;f++){var g=
e.xa[f],k=e.jg[f];-1==b.indexOf(k)&&"NODE_TEX"!=g.source&&b.push(k)}}}function d(a,b,c){var d=a.elements;a=a.interpolation;for(var e=0;e<b;e++){var f=e/(b-1),g=H(d,f,!0),k=G(d,f,!0);if(g&&k)if("CONSTANT"==a)c.push.apply(c,g.color);else{var l=c,h=g,q=k;h==q?l.push.apply(l,h.color):(l.push(V.NA(q.color[0],q.position,h.color[0],h.position,f)),l.push(V.NA(q.color[1],q.position,h.color[1],h.position,f)),l.push(V.NA(q.color[2],q.position,h.color[2],h.position,f)),l.push(V.NA(q.color[3],q.position,h.color[3],
h.position,f)))}k&&!g&&c.push.apply(c,k.color);g&&!k&&c.push.apply(c,g.color)}}function H(a,b,c){for(var d=null,e=0;e<a.length;e++){var f=c?b-a[e].position:b-a[e][1][0];0<=f&&(d?f<=(c?b-d.position:b-a[e][1][0])&&(d=a[e]):d=a[e])}return d}function G(a,b,c){for(var d=null,e=0;e<a.length;e++){var f=c?a[e].position-b:a[e][1][0]-b;0<=f&&(d?f<=(c?d.position-b:d[1][0]-b)&&(d=a[e]):d=a[e])}return d}function R(a){var b;if(!(b=oa.enable_texture_cache))a:{b=xa.Pj("ALL",xa.Vc);for(var c=0;c<b.length;c++){var d=
b[c];if(q(d,a)){b=!0;break a}for(var d=d.Dv,e=0;e<d.length;e++)if(q(d[e],a)){b=!0;break a}}b=!1}b||(a.Kb&&Q.deleteTexture(a.Kb),a=J.xa.indexOf(a),-1!=a&&(J.xa.splice(a,1),J.Fr.splice(a,1)))}function q(a,b){for(var c=0;c<a.T.length;c++)for(var d=a.T[c].da,e=0;e<d.length;e++)for(var f=d[e].xa,g=0;g<f.length;g++)if(f[g]==b)return!0}function ja(a,b){for(var c=0;c<J.xa.length;c++){var d=J.xa[c];if(d.Uo==a&&d.type==b.type&&d.source==b.source&&d.repeat==b.repeat&&d.anisotropic_filtering==b.anisotropic_filtering&&
d.Jn==b.Jn)return d}return null}var qa=w("__compat"),C=w("__config"),pa=w("__texcomp"),ia=w("__debug"),ma=w("__extensions"),ea=w("__print"),la=w("__time"),ba=w("__util"),da=w("__renderer"),xa=w("__objects"),ca=w("__obj_util"),V=w("__curve"),Ja=w("__vec3"),S=w("__scenes"),oa=C.L,Z=C.Ni,fa=C.ra,aa=null,za=null,ha=null;a.Ze=0;a.U=0;a.QV=0;a.OV=0;a.PV=0;a.Ck=0;a.Di=10;a.Px=20;a.Yn=30;a.Lt=40;a.Xn=50;a.Nx=60;a.Lx=70;a.Ox=80;a.Mx=90;a.CJ=128;a.DT=128;a.lK=128;var J={xa:[],Fr:[]},ra={},ya={},Q=null,va,Va=
"TEXTURE_CUBE_MAP_POSITIVE_X TEXTURE_CUBE_MAP_NEGATIVE_X TEXTURE_CUBE_MAP_POSITIVE_Y TEXTURE_CUBE_MAP_NEGATIVE_Y TEXTURE_CUBE_MAP_POSITIVE_Z TEXTURE_CUBE_MAP_NEGATIVE_Z".split(" "),Ba=[[2,0],[0,0],[2,1],[1,0],[1,1],[0,1]];a.wh=function(b){va=[b.NEAREST_MIPMAP_NEAREST,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_LINEAR];a.Ze=b.NEAREST;a.U=b.LINEAR;a.QV=b.NEAREST_MIPMAP_NEAREST;a.OV=b.LINEAR_MIPMAP_NEAREST;a.PV=b.NEAREST_MIPMAP_LINEAR;a.Ck=b.LINEAR_MIPMAP_LINEAR;Q=b};a.dba=function(a,
b){return b in ra&&a in ra[b]?ra[b][a].Lh:null};a.wfa=function(a,b){return b in ra&&a in ra[b]?(m(ra[b][a]),!0):!1};a.TK=k;a.Xk=O;a.mY=function(c,d){var e=Q.createTexture(),f=Q.TEXTURE_CUBE_MAP;Q.bindTexture(f,e);Q.texParameteri(f,Q.TEXTURE_MAG_FILTER,Q.LINEAR);d?Q.texParameteri(f,Q.TEXTURE_MIN_FILTER,va[oa.Vl]):Q.texParameteri(f,Q.TEXTURE_MIN_FILTER,Q.LINEAR);Q.texParameteri(f,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE);Q.texParameteri(f,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE);for(var g=0;6>g;g++)Q.texImage2D(Q[Va[g]],
0,Q.RGBA,c,c,0,Q.RGBA,Q.UNSIGNED_BYTE,null);Q.bindTexture(f,null);f=b();f.type=a.Di;f.source="NONE";f.width=3*c;f.height=2*c;f.uu=1;f.Ve=d;f.Kb=e;f.Bb=Q.TEXTURE_CUBE_MAP;return f};a.YB=function(a,b){var c=a.Bb;Q.bindTexture(c,a.Kb);for(var d=0;6>d;d++)Q.texImage2D(Q[Va[d]],0,Q.RGBA,b,b,0,Q.RGBA,Q.UNSIGNED_BYTE,null);Q.bindTexture(c,null);a.width=3*b;a.height=2*b};a.jI=function(a,b,c){var d=a.Bb;Q.bindTexture(d,a.Kb);b&&Q.texParameteri(d,Q.TEXTURE_MIN_FILTER,b);c&&Q.texParameteri(d,Q.TEXTURE_MAG_FILTER,
c);Q.bindTexture(d,null)};a.resize=function(b,c,d){c=Math.max(c,1);d=Math.max(d,1);if(b.width!=c||b.height!=d){switch(b.type){case a.Nx:Q.bindRenderbuffer(Q.RENDERBUFFER,b.bg);Q.renderbufferStorage(Q.RENDERBUFFER,Q.RGB565,c,d);Q.bindRenderbuffer(Q.RENDERBUFFER,null);break;case a.Lx:Q.bindRenderbuffer(Q.RENDERBUFFER,b.bg);Q.renderbufferStorage(Q.RENDERBUFFER,y(Z.Wq),c,d);Q.bindRenderbuffer(Q.RENDERBUFFER,null);break;case a.Ox:Q.bindRenderbuffer(Q.RENDERBUFFER,b.bg);Q.renderbufferStorageMultisample(Q.RENDERBUFFER,
oa.oc,Q.RGBA8,c,d);Q.bindRenderbuffer(Q.RENDERBUFFER,null);break;case a.Mx:Q.bindRenderbuffer(Q.RENDERBUFFER,b.bg);Q.renderbufferStorageMultisample(Q.RENDERBUFFER,oa.oc,y(Z.Wq),c,d);Q.bindRenderbuffer(Q.RENDERBUFFER,null);break;default:var e=b.Bb;Q.bindTexture(e,b.Kb);var f=p(b),g=I(b),k=D(b);b.Ve&&(oa.sb||(d=Math.max(c,d),c=M(d),d=M(d)),b.TP=Math.round(Math.log(Math.max(c,d))/Math.log(2)+.5));Q.texImage2D(e,0,g,c,d,0,f,k,null);Q.bindTexture(e,null)}c>Z.nc||d>Z.nc?ba.K('Slink texture "'+b.type+'" has unsupported size: '+
c+"x"+d+". Max available: "+Z.nc+"x"+Z.nc+"."):(b.width=c,b.height=d)}};a.jZ=function(c,d,e,f,g){var l=c.type;if("BLEND"==l)return null;var h=c.image,q=b();q.type=a.Di;q.width=1;q.height=1;if(oa.oE){var n=c.b4w_anisotropic_filtering;"DEFAULT"===n&&(n=d);"OFF"!==n&&oa.anisotropic_filtering&&(q.anisotropic_filtering=parseFloat(n.split("x")[0]))}if("REPEAT"!=c.extension||c.b4w_shore_dist_map)q.repeat=!1;if(h){"IMAGE"==l&&"MOVIE"==h.source&&(q.Sm=!0,q.Tw=c.name,q.Ia=c.frame_start,q.tc=c.frame_offset,
q.Hm=c.frame_duration,q.lJ=c.use_auto_refresh,q.am=c.use_cyclic,q.Zm=c.movie_length,q.Jn=c.b4w_nla_video,0!=q.tc&&ea.warn('Frame offset for texture "'+c.name+'" has a nonzero value. Can lead to undefined behaviour for mobile devices.'));q.source=l;d=ba.El(g+h.filepath);if(d=ja(d,q))return d;k(q,h,g)}d=new Uint8Array([204,204,204,255]);switch(l){case "IMAGE":g=Q.createTexture();h=Q.TEXTURE_2D;Q.bindTexture(h,g);Q.texImage2D(h,0,Q.RGBA,1,1,0,Q.RGBA,Q.UNSIGNED_BYTE,d);break;case "NONE":if("NONE"==c.b4w_source_type)return null;
g=Q.createTexture();h=Q.TEXTURE_2D;q.source=c.b4w_source_type;if("SCENE"==q.source){if(!c.b4w_source_id)return null;f=ba.Pd("name",c.b4w_source_id,e);if(!f)return null;q.uw=c.b4w_source_id;q.Rl=c.b4w_source_size;f.Yg=f.Yg||[];f.Yg.push(q);Q.bindTexture(h,g);Q.texImage2D(h,0,Q.RGBA,1,1,0,Q.RGBA,Q.UNSIGNED_BYTE,d)}else"CANVAS"==q.source&&(e=c.b4w_source_id,d=c.b4w_source_size,q.uw=e,q.Em=c.b4w_enable_canvas_mipmapping,c=document.createElement("canvas"),c.width=d,c.height=d,q.Lh=c.getContext("2d"),f in
ra||(ra[f]={}),ra[f][e]=q,Q.bindTexture(h,g));break;case "ENVIRONMENT_MAP":g=Q.createTexture();h=Q.TEXTURE_CUBE_MAP;Q.bindTexture(h,g);c="POSITIVE_X NEGATIVE_X POSITIVE_Y NEGATIVE_Y POSITIVE_Z NEGATIVE_Z".split(" ");for(f=0;6>f;f++)Q.texImage2D(Q["TEXTURE_CUBE_MAP_"+c[f]],0,Q.RGBA,1,1,0,Q.RGBA,Q.UNSIGNED_BYTE,d);break;default:return ea.error('texture "'+c.name+'" has unsupported type "'+l+'"'),null}q.Kb=g;q.Bb=h;"NONE"==l?(q.Em?Q.texParameteri(h,Q.TEXTURE_MIN_FILTER,va[oa.Vl]):Q.texParameteri(h,Q.TEXTURE_MIN_FILTER,
Q.LINEAR),q.anisotropic_filtering&&Q.texParameterf(h,ma.RF().TEXTURE_MAX_ANISOTROPY_EXT,q.anisotropic_filtering),"CANVAS"==q.source&&m(q)):(Q.generateMipmap(h),Q.bindTexture(h,null));return q};a.Afa=m;a.US=x;a.TS=r;a.Jw=P;a.DE=M;a.Ar=function(a){return a&&(a.Kb||a.bg)?!0:!1};a.yr=function(a){return a&&a.bg?!0:!1};a.Tca=function(b){return b.type==a.Yn||b.type==a.Lt?!0:!1};a.A0=function(b){var c=0;switch(b.type){case a.Di:case a.Px:c=4;break;case a.Yn:case a.Lt:c=32;break;case a.Xn:c=3;break;case a.Nx:case a.Lx:c=
2;break;case a.Ox:c=4*oa.oc;break;case a.Mx:c=3*oa.oc}return c};a.Ja=function(){if(!oa.lw)for(var a in ya)for(var b in ya[a])ya[a][b].tb.pause(),ya[a][b].tb.src="",ya[a][b].tb.load();J.xa.length=0;J.Fr.length=0;ra={};ya={}};a.pause=function(){for(var a in ya)for(var b in ya[a]){var c=ya[a][b];F(c)&&u(c)}};a.reset=function(){for(var a in ya)for(var b in ya[a])L(ya[a][b])};a.play=function(a){for(var b in ya)for(var c in ya[b]){var d=ya[b][c];a&&!d.Uw||l(d)}};a.dca=function(a,b){return b in ya&&a in
ya[b]?ya[b][a]:null};a.Ifa=function(a){return a.Jn};a.rQ=l;a.yH=u;a.PQ=L;a.c4=function(a,b,c){c in ya&&a in ya[c]&&(a=ya[c][a],a.tb?a.tb.currentTime=b/a.Ri:a.je&&(a.Ml=b,r(a)))};a.qT=F;a.rT=U;a.nT=function(a){return a.tb||a.je?a.tb?Math.round(a.tb.currentTime*a.Ri):a.Ml:0};a.pT=function(a){return a.tb||a.je?a.tb?a.tc:K(a,a.tc):0};a.D6=function(a){if(!a.tb&&!a.je)return 0;var b=Math.min(a.Hm,a.Zm-a.tc);return a.tb?a.tc+b:K(a,a.tc+b)};a.TB=function(a,b){return Math.round(b*a.jw*(la.fe()/a.Ri))};a.oT=
function(a){return Math.min(a.Hm,a.Zm-a.tc)};a.C6=K;a.eba=function(a,b){var c=A(a,b);return c&&"CANVAS"==c.source?c.Lh:null};a.v0=A;a.v4=E;a.Wba=function(a){var b=[];if(ca.ea(a))X(a,b);else{a=a.Dv;for(var c=0;c<a.length;c++)X(a[c],b)}return b};a.H4=function(a){for(var c={},d=0;d<a.length;d++){for(var e=a[d].xa,f=a[d].Ig,g=[],k=[],l=0;l<e.length;l++){var h=e[l],q=f[l];if("CANVAS"==h.source)if(q in c)h=c[q];else{var n=e[l],h=b();h.source="CANVAS";h.width=n.width;h.height=n.height;h.Em=n.Em;h.type=n.type;
n=document.createElement("canvas");n.width=h.width;n.height=h.height;h.Lh=n.getContext("2d");h.Bb=Q.TEXTURE_2D;h.Kb=Q.createTexture();Q.bindTexture(Q.TEXTURE_2D,h.Kb);h.Em?Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,va[oa.Vl]):Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR);Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR);Q.bindTexture(Q.TEXTURE_2D,null);n=h;n.Lh.drawImage(e[l].Lh.canvas,0,0);m(n);c[q]=h}g.push(h);k.push(q)}a[d].xa=g}};a.$Z=function(a,b){for(var c=[],
e=0;e<a.length;e++)d(a[e].data.value.color_ramp,b,c);return new Uint8Array(c.map(function(a){return ba.pa(255*a,0,255)}))};a.cX=d;a.d_=function(a,b){for(var c=new Float32Array(3),d=new Float32Array(3),e=[],f=0;f<a.length;f++){for(var g=a[f].data.value,k=[],l=g.curve_mapping.curves_data,h=g.curve_mapping.curve_extend,q=g.curve_mapping.curves_handle_types,g=0;g<l.length;g++){for(var n=h[g],m=l[g],y=[],C=q[g],p=0;p<m.length;p++)y.push([new Float32Array(3),new Float32Array(m[p].concat(0)),new Float32Array(3)]);
V.EE(y[0],null,y[1],C[0],C[0]);for(p=1;p<y.length-1;p++)V.EE(y[p],y[p-1],y[p+1],C[p],C[p]);V.EE(y[y.length-1],y[y.length-2],null,C[y.length-1],C[y.length-1]);if(2<y.length){if("AUTO"==C[0]){Ja.subtract(y[0][2],y[0][1],c);p=Ja.length(c);Ja.copy(y[1][0],d);d[0]<y[0][1][0]&&(d[0]=y[0][1][0]);Ja.subtract(d,y[0][1],d);var J=Ja.length(d);1E-8<J&&(Ja.scale(d,p/J,d),Ja.add(y[0][1],d,y[0][2]),Ja.subtract(y[0][1],d,y[0][0]))}m=y.length-1;"AUTO"==C[0]&&(Ja.subtract(y[m][0],y[m][1],c),p=Ja.length(c),Ja.copy(y[m-
1][2],d),d[0]>y[m][1][0]&&(d[0]=y[m][1][0]),Ja.subtract(d,y[m][1],d),J=Ja.length(d),1E-8<J&&(Ja.scale(d,p/J,d),Ja.add(y[m][1],d,y[m][0]),Ja.subtract(y[m][1],d,y[m][2])))}for(m=0;m<y.length-1;m++)V.$X(y[m][1],y[m][2],y[m+1][0],y[m+1][1]);m=[];3>=l.length?(p=Math.round(-b/2),C=Math.round(b/2)):(p=0,C=b);for(;p<C;p++){var J=p/(C-1),u=H(y,J,!1),v=G(y,J,!1);u&&v?m.push(V.rL(J,u[1],u[2],v[0],v[1],.001)):v&&!u?"EXTRAPOLATED"==n?(J=v[1][0]==v[2][0]?v[1][1]:V.zP(J,v[1],v[2]),m.push(J)):m.push(v[1][1]):u&&
!v&&("EXTRAPOLATED"==n?(J=u[0][0]==u[1][0]?u[1][1]:V.zP(J,u[0],u[1]),m.push(J)):m.push(u[1][1]))}k.push(m)}e.push(k)}c=[];for(p=0;p<e.length;p++)for(k=e[p],g=0;g<k[0].length;g++)3>=k.length?(d=ba.pa(127.5*(k[0][g]+1),0,255),f=ba.pa(127.5*(k[1][g]+1),0,255),l=ba.pa(127.5*(k[2][g]+1),0,255),m=255):(d=ba.pa(255*k[0][g],0,255),f=ba.pa(255*k[1][g],0,255),l=ba.pa(255*k[2][g],0,255),m=ba.pa(255*k[3][g],0,255)),c.push(d,f,l,m);return new Uint8Array(c)};a.vM=function(b,c){var d=O(a.Di,!1);d.source="NODE_TEX";
d.repeat=!1;P(d,{width:c,height:b.length/(4*c),data:b});return d};a.X9=function(a,c,d,e,f){var g=ba.El(f);if("WORLD"!=a.type){var k=ja(g,c);if(!k){k=b();k.type=c.type;k.anisotropic_filtering=c.anisotropic_filtering;k.source=c.source;k.uw=c.uw;k.width=c.width;k.height=c.height;k.uu=c.uu;k.Rl=c.Rl;k.Em=c.Em;k.Lh=c.Lh;k.Bb=c.Bb;k.Kb=c.Kb;k.bg=c.bg;k.Sm=c.Sm;k.ft=c.ft;k.tb=c.tb;k.Tw=c.Tw;k.Zm=c.Zm;k.Ri=c.Ri;k.Ia=c.Ia;k.tc=c.tc;k.Hm=c.Hm;k.ii=c.ii;k.ij=c.ij;k.je=c.je;k.kw=c.kw;k.jw=c.jw;k.Ml=c.Ml;k.mw=
c.mw;k.nn=c.nn;k.Uw=c.Uw;k.lJ=c.lJ;k.am=c.am;k.Jn=c.Jn;k.repeat=c.repeat;k.or=c.or;k.Uo=c.Uo;k.Vo=c.Vo;k.uG=c.uG;k.tG=c.tG;k.Mm=c.Mm;var l=k;Q.bindTexture(c.Bb,c.Kb);var q=Q.getTexParameter(c.Bb,Q.TEXTURE_MAG_FILTER),n=Q.getTexParameter(c.Bb,Q.TEXTURE_MIN_FILTER),m=Q.getTexParameter(c.Bb,Q.TEXTURE_WRAP_S);c=Q.getTexParameter(c.Bb,Q.TEXTURE_WRAP_T);l.Kb=Q.createTexture();Q.bindTexture(l.Bb,l.Kb);Q.texParameteri(l.Bb,Q.TEXTURE_MAG_FILTER,q);Q.texParameteri(l.Bb,Q.TEXTURE_MIN_FILTER,n);Q.texParameteri(l.Bb,
Q.TEXTURE_WRAP_S,m);Q.texParameteri(l.Bb,Q.TEXTURE_WRAP_T,c);Q.bindTexture(l.Bb,null);h(k,f,g);P(k,e,0)}E(a,d,k)}else k=c,h(k,f,g),P(k,e,0),S.S5(a,k),S.lD(a)};a.cM=R;a.kf=function(a){return a.texture.J};a.z3=function(){Q=null};a.ZN=function(){return J.xa};a.O_=function(a){a=J.xa.indexOf(a);return-1==a?!1:J.Fr[a]};a.Q3=function(a){a=J.xa.indexOf(a);-1!=a&&(J.Fr[a]=!0)}};b4w.module.__texcomp=function(a,w){function t(a,b,c,v){var e=new Int32Array(c,0,31),g,B,p,t,y,D;if(542327876!=e[0])return h.error("Invalid magic number in DDS header"),0;if(!e[20]&4)return h.error("Unsupported format, must contain a FourCC code"),0;g=e[21];switch(g){case m:B=8;p=b?b.COMPRESSED_RGB_S3TC_DXT1_EXT:null;break;case x:B=16;p=b?b.COMPRESSED_RGBA_S3TC_DXT3_EXT:null;break;case r:B=16;p=b?b.COMPRESSED_RGBA_S3TC_DXT5_EXT:null;break;default:return h.error("Unsupported FourCC code:",k(g)),null}D=
1;e[2]&131072&&!1!==v&&(D=Math.max(1,e[7]));t=e[4];y=e[3];e=e[1]+4;if(b)for(g=0;g<D;++g)v=Math.max(4,t)/4*Math.max(4,y)/4*B,b=new Uint8Array(c,e,v),a.compressedTexImage2D(a.TEXTURE_2D,g,p,t,y,0,b),e+=v,t=Math.max(.5*t,1),y=Math.max(.5*y,1);else if(g==m){c=b=new Uint16Array(c);B=e/2;p=t;e=new Uint16Array(4);b=new Uint16Array(p*y);for(var l,u,L,F,w,K,A=p/4,E=y/4,n=0;n<E;n++)for(var f=0;f<A;f++)g=B+4*(n*A+f),e[0]=c[g],e[1]=c[g+1],l=e[0]&31,u=e[0]&2016,L=e[0]&63488,F=e[1]&31,w=e[1]&2016,K=e[1]&63488,
e[2]=5*l+3*F>>3|5*u+3*w>>3&2016|5*L+3*K>>3&63488,e[3]=5*F+3*l>>3|5*w+3*u>>3&2016|5*K+3*L>>3&63488,l=c[g+2],u=4*n*p+4*f,b[u]=e[l&3],b[u+1]=e[l>>2&3],b[u+2]=e[l>>4&3],b[u+3]=e[l>>6&3],u+=p,b[u]=e[l>>8&3],b[u+1]=e[l>>10&3],b[u+2]=e[l>>12&3],b[u+3]=e[l>>14],l=c[g+3],u+=p,b[u]=e[l&3],b[u+1]=e[l>>2&3],b[u+2]=e[l>>4&3],b[u+3]=e[l>>6&3],u+=p,b[u]=e[l>>8&3],b[u+1]=e[l>>10&3],b[u+2]=e[l>>12&3],b[u+3]=e[l>>14];a.texImage2D(a.TEXTURE_2D,0,a.RGB,t,y,0,a.RGB,a.UNSIGNED_SHORT_5_6_5,b);v&&a.generateMipmap(a.TEXTURE_2D)}else return h.error("No manual decoder for",
k(g),"and no native support"),0;return D}function c(a,b,c,k,h){var e=new XMLHttpRequest;e.open("GET",c,!0);e.responseType="arraybuffer";e.onload=function(){if(200==e.status){a.bindTexture(a.TEXTURE_2D,k);var c=t(a,b,e.response,!0);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,1<c?a.LINEAR_MIPMAP_LINEAR:a.LINEAR)}h&&h(k)};e.send(null)}function b(a){return a.charCodeAt(0)+(a.charCodeAt(1)<<8)+(a.charCodeAt(2)<<16)+(a.charCodeAt(3)<<24)}
function k(a){return String.fromCharCode(a&255,a>>8&255,a>>16&255,a>>24&255)}var h=w("__print"),O=w("__util"),m=b("DXT1"),x=b("DXT3"),r=b("DXT5");a.q6=t;a.r6=function(a,b,c){var e=new Uint32Array(c,0,13);if(55727696==e[0]){var g=e[7],k=e[6],h=e[11],m=52+e[12];switch(e[2]){case 0:var B=2,y=1;break;case 1:B=2;y=3;break;case 2:B=4;y=0;break;case 3:B=4;y=2;break;default:O.K("Unsupported PVR V3 format.")}}else if(559044176==e[11]){g=e[2];k=e[1];h=e[3];m=e[0];h++;var D=e[4]&255,e=0<e[10];25==D?(B=4,y=e?
2:0):24==D?(B=2,y=e?3:1):O.K("Unsupported PVR V2 format.")}else O.K("Unsupported PVR version.");D=2==B?8:4;e=4;switch(y){case 0:var l=b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;break;case 1:l=b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;break;case 2:l=b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;break;case 3:l=b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}b=D*e*B/8;for(B=0;B<h;B++){var y=Math.max(g>>B,1),u=Math.max(k>>B,1),x=y/D,F=u/e;2>x&&(x=2);2>F&&(F=2);x=x*F*b;F=new Uint8Array(c,m,x);a.compressedTexImage2D(a.TEXTURE_2D,B,l,y,u,0,F);
m+=x}};a.BO=function(a,b){switch(b){case "dds":var c=new Int32Array(a,0,31);return{width:c[4],height:c[3]};case "pvr":c=new Uint32Array(a,0,13);if(55727696==c[0])var e=c[7],c=c[6];else e=c[2],c=c[1];return{width:e,height:c}}};a.T_=function(a,b){var c=1;if("dds"==b){var e=new Int32Array(a,0,31),g=e[21];switch(g){case m:c=6;break;case x:case r:c=4;break;default:h.error("Unsupported FourCC code:",k(g))}}else if("pvr"==b)if(e=new Uint32Array(a,0,13),55727696==e[0])switch(e[2]){case 0:c=12;break;case 1:c=
16;break;case 2:c=6;break;case 3:c=8}else g=e[4]&255,e=0<e[10],25==g?c=e?8:6:24==g&&(c=e?16:12);return c};a.gda=function(a,b,k,h){var e=a.createTexture();c(a,b,k,e,h);return e}};b4w.module.__time=function(a,w){function t(){return-1!==c.fo.Az?c.fo.Az:r}var c=w("__config"),b=0,k=0,h=[],O=0,m=0,x=[],r=-1,g=0;a.HR=function(a){b=a;k=performance.now();for(a=0;a<h.length;a++){var c=h[a];b>c.EF&&(h.splice(a,1),a--,c.callback())}for(a=0;a<x.length;a++){var c=x[a],e=1-(c.EF-b)/c.duration,e=Math.min(e,1);c.callback(c.from+e*(c.to-c.from));1==e&&(x.splice(a,1),a--)}};a.So=function(){return b};a.X3=function(a){g=a};a.W_=function(){return g};a.cC=function(a,c){var e;O++;e=O;h.push({id:e,
callback:a,EF:b+(performance.now()-k+c)/1E3});return e};a.Nq=function(a){for(var b=0;b<h.length;b++)if(h[b].id==a){h.splice(b,1);break}};a.Tk=function(a){for(var b=x.length;b--;)if(x[b].id==a){x.splice(b,1);break}};a.Hi=function(a,c,g,k){g/=1E3;var e;m++;e=m;x.push({id:e,callback:k,from:a,to:c,EF:b+g,duration:g});k(a);return e};a.reset=function(){k=b=0;h.length=0;m=O=x.length=0};a.fe=t;a.d4=function(a){r=a};a.Mz=function(a){return a*t()}};b4w.module.__objects=function(a,w){function t(a){var b=a.T;a=a.A;for(var c=0;c<b.length;c++){var d=b[c].wb;d.J.outline&&a.ek&&ia.w3(d)}}function c(a){a.A.ek=0;a=ra.indexOf(a);-1!=a&&ra.splice(a,1)}function b(a){if(a.ar)for(var b=a.T,c=0;c<b.length;c++)ia.NS(b[c].wb,a)}function k(a,b){for(var c=a.T,d=b.T,e=0;e<c.length;e++){for(var f=!1,g=0;g<d.length;g++)if(c[e].wb==d[g].wb){f=!0;break}f||h(b,c[e].wb)&&R.Zx(b,c[e].wb)}}function h(a,b){return!b.KK&&"SPEAKER"==a.type||!b.WV&&"LAMP"==a.type?!1:!0}function O(a){var b=
a.b4w_do_not_batch,c=a.b4w_collision,d=a.b4w_vehicle,e=a.b4w_floating,f=a.b4w_character,g=q.K0(a),k=H.zL(a),l=0<a.data.b4w_shape_keys.length,h=a.b4w_dynamic_geometry,n=m(a);if(!(b=L.yL(a)||b||c||d||l||e||g||f||k||h))a:{a=a.data;for(b=0;b<a.materials.length;b++)if(c=a.materials[b],c.ma.Zj||c.Yj||r(c.te)){b=!0;break a}b=!1}return b||n}function m(a){var b=!1,c=a.constraints.length;if(c){for(var d=null,c=c-1;0<=c;c--){var e=a.constraints[c];if("LOCKED_TRACK"!=e.type||"REFLECTION PLANE"!=e.name){d=e;break}}if(!d||
!d.target)return!1;a=d.target;d=a.type;if(a.parent)return d=a.parent.type,"MESH"==d?b=b||O(a.parent):"EMPTY"==d?b=b||x(a.parent):b=!0,b;"MESH"==d?b=b||O(a):"EMPTY"==d?b=b||x(a):b=!0}return b}function x(a){var b=H.zL(a),c=a.b4w_do_not_batch,d=!!a.b4w_anchor,e=m(a);return L.yL(a)||b||c||d||e}function r(a){if(!a)return!1;a=a.nodes;for(var b=0;b<a.length;b++){var c=a[b];if("VECT_TRANSFORM"==c.type){var d=c.convert_from,e=c.convert_to,f=c.outputs[0];if(!(!f.is_linked||"WORLD"==d&&"CAMERA"==e||"CAMERA"==
d&&"WORLD"==e||"OBJECT"==d&&"OBJECT"==e))return!0}if("NORMAL_MAP"==c.type&&(d=c.space,f=c.outputs[0],f.is_linked&&("OBJECT"==d||"BLENDER_OBJECT"==d))||"TEX_COORD"==c.type&&c.outputs[3].is_linked||"OBJECT_INFO"==c.type&&(f=c.outputs[1],d=c.outputs[3],c.outputs[0].is_linked||f.is_linked||d.is_linked))return!0}return!1}function g(a){if(P(a,aa.ALL,!1,-1)){for(var b=1,c;;){c="."+(3>String(b).length?("000"+String(b)).slice(-3):String(b));if(!P(a+c,aa.ALL,!1,-1))break;b++}qa.error('Object "'+a+'" already exists. Name was replaced by "'+
a+c+'".');return c}return""}function e(a,b,c){b=aa[b]||[];for(var d=[],e=0;e<b.length;e++){var f=b[e];if(f.A.Le==c||-1==c)for(var g=f.T,k=0;k<g.length;k++)g[k].wb==a&&d.push(f)}return d}function B(a,b){var c=aa[a]||[];if(-1==b)return c;for(var d=[],e=0;e<c.length;e++){var f=c[e];f.A.Le==b&&d.push(f)}return d}function v(a,b,c,d){for(var e=0;e<a.T.length;e++)for(var f=a.T[e].da,g=0;g<f.length;g++){var k=f[g];k.Pa&&(k.Pa.Mh=b);k.Mh=b;k.Hb&&(k.Hb.Mh=c);""!==k.Pe&&(k=G.Sz(k.Pe))&&(k.bM=d)}}function P(a,
b,c,d,e){for(var f=null,g=0;g<b.length;g++){var k=b[g];if(!((c?k.Sf:k.name)!=a||k.A.Le!=d&&-1!=d||e&&k.Rm||(f=k,R.Qj(f))))break}return f}function N(a){aa.ALL.push(a);aa[a.type]||(aa[a.type]=[]);aa[a.type].push(a);var b=a.A.ue;if(null!=b)for(var c=0;c<J.length;c++){var d=J[c];d.A.ue==b&&d.cw.push(a)}}function M(a,b,c){if(!b.ql)return!0;a=a.Wm;if(a.Kj!=a.Hf)if(a.Ow){var d=ca.sign(a.Kj-a.Hf);a.Hf+=d*ba.W_()/.4;a.Hf=ca.pa(a.Hf,0,1)}else a.Hf=a.Kj;d="STATIC"==b.type?b.Cv:V.add(b.bf.V,b.VA,ya);c=V.dist(d,
c);0==a.nr?(d=Math.max(b.nh-a.mr/2,0),b=b.mh+a.lr/2):-1==a.nr?(d=b.nh+a.mr/2,b=b.mh+a.lr/2):(d=Math.max(b.nh-a.mr/2,0),b=Math.max(b.mh-a.lr/2,0));a.nr=c<d?-1:c<b?0:1;a.Kj=c<d||c>b?0:1;a.yy=a.Kj?1:-1;Math.abs(c-a.CB)>Z.lod_leap_smooth_threshold&&(0==a.Hf||1==a.Hf)&&(a.Hf=a.Kj);a.CB=c;return!!a.Kj||0!=a.Hf}function p(a,b){v(a,!0,!1,!0);for(var c=B("ALL",-1),d=0;d<c.length;d++){var e=c[d];e!=a&&v(e,!1,!1,!1)}ia.KQ(a,b);for(d=0;d<a.T.length;d++)for(e=a.T[d].da.length-1;0<=e;e--){var f=a.T[d].da[e];0!=
f.Dc.length&&-1==f.Dc.indexOf(b)||R.XQ(a.T[d],e)}ja.Aa(a)&&ja.Bp(a);for(d=0;d<c.length;d++)c[d]!=a&&v(c[d],!0,!0,!0);L.wZ(a,b);c=a.Zn.Oa;a.Zn.Oa=a;return c}function I(a,b){a.Zn.Oa=b;v(a,!0,!0,!0)}function y(a,b,c,d){var e=c.oh.Ur.indexOf(d);b=a.Ec[a.oh.Ur.indexOf(b)];c.Ec[e]=b;a=b.name;b.name=d;for(d=0;d<c.Ec.length;d++)c.oh.Zo[d]=d!=e;return a}function D(a,b,c,d){for(var e=0;e<c.Ec.length;e++)c.oh.Zo[e]=!1;a.Ec[a.oh.Ur.indexOf(b)].name=d}function l(a,b,c,d,e){for(var g=1;g<a.A.yh.length;g++)f.$K(a,
a.A.yh[g].name,a.A.yh[g].value);if(L.ZO(a))for(g=0;g<a.Ba.length;g++){var k=a.Ba[g];if(k)switch(k.type){case L.TU:L.$B(a,L.NN(a,g),g);break;case L.RU:if(k.Pr)for(var l=k.Pr.length-1;0<=l;l--)-1!=k.Pr[l].Dc.indexOf(b)&&k.Pr.splice(l,1)}}d&&F.IG(a,b,function(b){if(b.Ra){var c=b.Ra.name;if(d[c]){var e=b.Ra.Pq!=d[c].Pq;b.Ra=q.iM(d[c]);e&&q.Z3(a,c,b.Ra.Pq)}}},"PARTICLES");e&&(g=F.Gm(a,b))&&(g.jd.set(e.jd),g.rg=e.rg,g.Do=e.Do,g.de.set(e.de),g.Fg.set(e.Fg),g.us=e.us,g.tn.set(e.tn),g.Eg=e.Eg,g.gf=e.gf,g.af=
e.af,g.Hk=e.Hk,g.mp=e.mp,g.Qr=e.Qr,g.pi=e.pi,g.si=e.si,g.Mo.set(e.Mo),g.Vr=e.Vr,g.wi.set(e.wi),g.ks.set(e.ks),g.ls=e.ls,g.ms.set(e.ms),g.ns=e.ns,g.Qi=e.Qi,g.gt=e.gt,g.bj=e.bj.slice(),g.Qe=e.Qe.slice());F.IG(a,b,function(b){for(var d=0;d<b.jg.length;d++){var e=b.jg[d],f=b.xa[d];if("IMAGE"==f.source||"ENVIRONMENT"==f.source){var g=la.v0(c,e);g&&f.Uo!=g.Uo&&la.v4(a,e,g)}}})}function u(a,b){for(var c=a[b],d=b+1;d<a.length;d++)c+="%join%"+a[d];return c}var L=w("__animation"),F=w("__batch"),U=w("__boundings"),
K=w("__camera"),A=w("__config"),E=w("__constraints"),n=w("__container"),f=w("__geometry"),X=w("__lights"),d=w("__material"),H=w("__nla"),G=w("__nodemat"),R=w("__obj_util"),q=w("__particles"),ja=w("__physics"),qa=w("__print"),C=w("__primitives"),pa=w("__quat"),ia=w("__scenes"),ma=w("__subscene"),ea=w("__sfx"),la=w("__textures"),ba=w("__time"),da=w("__transform"),xa=w("__tsr"),ca=w("__util"),V=w("__vec3"),Ja=w("__armature"),S=w("__anchors"),oa=w("__renderer"),Z=A.L,fa=A.zd,aa={ALL:[]},za=0,ha=0,J=[],
ra=[],ya=new Float32Array(3),Q=new Float32Array(4);a.ZD=0;a.YD=1;a.le=2;a.Vc=-1;a.update=function(a){for(var b=0;b<ra.length;b++){var d=ra[b],e=d,f=a,g=0,k=e.kQ;0==k.aD&&(k.aD=f);f-=k.aD;if(k.NH&&f/k.uh>=k.NH)c(e);else{f%=k.uh;if(f<k.tH)switch(k=f/(k.tH/5),f=Math.floor(k),f){case 0:g=(k-f)/2;break;case 1:g=(k-f)/2+.5;break;case 2:g=1;break;case 3:g=1-(k-f)/2;break;case 4:g=.5-(k-f)/2}e.A.ek=g}d.A.ek&&t(d)}if(a=aa.ARMATURE)for(b=0;b<a.length;b++)d=a[b],d.kH&&(da.W(d),d.kH=!1)};a.pI=function(a,b){a.A.ek=
b;t(a)};a.Eq=function(a,b,c,d){var e=a.kQ;e.aD=0;e.tH=b;e.uh=c;e.NH=d;-1==ra.indexOf(a)&&ra.push(a)};a.lu=c;a.zM=function(a,b){var c=R.Au(b?"%meta_world%"+a.name:a.name,b?"WORLD":a.type,b?"%meta_world%"+a.name:a.origin_name);if("MESH"==c.type)for(var d=0;d<a.data.materials.length;d++)c.Ec.push(a.data.materials[d]);for(d=0;d<a.me.length;d++)R.Zx(c,a.me[d]);a.Oa=c;if(b)c.dd=a.uuid,c.Rm=!1,c.Co=a.Aq,c.ea=a.Fk,c.A=R.Rq(c.type),c.Mw=a.b4w_use_default_animation,c.eo=L.nE(a.b4w_anim_behavior);else{c.dd=
a.uuid;c.Rm=!1;c.Co=a.Aq;c.ea=a.Fk;c.ov=a.JK||!1;c.wg=a.b4w_vehicle;c.pl=a.b4w_character;c.bp=a.b4w_floating;c.Rs=a.b4w_collision;c.Ub=a.b4w_collision_id;c.Ey=a.b4w_correct_bounding_offset;d=a.game;c.Td={Ov:d.physics_type,tk:d.use_ghost,eT:d.use_sleep,gi:d.mass,jT:d.velocity_min,iT:d.velocity_max,QM:d.damping,SQ:d.rotation_damping,O1:d.lock_location_x,P1:d.lock_location_y,Q1:d.lock_location_z,S1:d.lock_rotation_x,T1:d.lock_rotation_y,U1:d.lock_rotation_z,Ej:d.collision_margin,Dj:d.collision_group,
Fj:d.collision_mask,mJ:d.use_collision_bounds,Ay:d.collision_bounds_type,Lw:d.use_collision_compound};if(d=a.b4w_vehicle_settings)c.Kg={name:d.name,Cg:d.part,k5:d.suspension_rest_length,NI:d.suspension_compression,QI:d.suspension_stiffness,OI:d.suspension_damping,vJ:d.wheel_friction,ZH:d.roll_influence,XG:d.max_suspension_travel_cm,Uu:d.force_max,du:d.brake_max,Es:d.steering_max,Gr:d.max_speed_angle,Hu:d.delta_tach_angle,ww:d.speed_ratio,xw:d.steering_ratio,nv:d.inverse_control,Ho:d.floating_factor,
Sp:d.water_lin_damp,Tp:d.water_rot_damp,oS:d.synchronize_position};if(d=a.b4w_floating_settings)c.dr={name:d.name,Cg:d.part,Ho:d.floating_factor,Sp:d.water_lin_damp,Tp:d.water_rot_damp,oS:d.synchronize_position};if(d=a.b4w_character_settings)c.ML={J6:d.walk_speed,E3:d.run_speed,d5:d.step_height,u1:d.jump_strength,M6:d.waterline};for(d=0;d<a.constraints.length;d++){var e=a.constraints[d];"RIGID_BODY_JOINT"==e.type&&c.BH.push({target:e.target.Oa,M2:e.pivot_type,N2:e.pivot_x,O2:e.pivot_y,P2:e.pivot_z,
ab:e.axis_x,eb:e.axis_y,fb:e.axis_z,w6:e.use_limit_x,x6:e.use_limit_y,y6:e.use_limit_z,s6:e.use_angular_limit_x,t6:e.use_angular_limit_y,u6:e.use_angular_limit_z,F1:e.limit_max_x,G1:e.limit_max_y,H1:e.limit_max_z,I1:e.limit_min_x,J1:e.limit_min_y,K1:e.limit_min_z,z1:e.limit_angle_max_x,A1:e.limit_angle_max_y,B1:e.limit_angle_max_z,C1:e.limit_angle_min_x,D1:e.limit_angle_min_y,E1:e.limit_angle_min_z})}d=c.A=R.Rq("MESH"===c.type?c.ea?"DYNAMIC":"STATIC":c.type);a.parent?(c.parent=a.parent.Oa,"BONE"==
a.parent_type&&"ARMATURE"==a.parent.type&&(c.Lv=a.parent_bone),a.pinverse_tsr&&(c.yB=xa.create(),xa.copy(a.pinverse_tsr,c.yB))):a.dg_parent&&(c.parent=a.dg_parent.Oa,c.hn=!0);var e=a.location,f=a.scale[0];ca.JH(a.rotation_quaternion,Q);da.ke(c,e);da.Ol(c,Q);da.Ue(c,f);c.Mw=a.b4w_use_default_animation;c.eo=L.nE(a.b4w_anim_behavior);a.b4w_object_tags&&(c.$A={title:a.b4w_object_tags.title,description:a.b4w_object_tags.description,category:a.b4w_object_tags.category});c.Ty=a.b4w_custom_prop;a.b4w_viewport_alignment&&
(c.zD={$V:a.b4w_viewport_alignment.alignment,distance:a.b4w_viewport_alignment.distance});d.bi=a.b4w_hidden_on_load;d.LO=a.b4w_hide_chldr_on_load;switch(a.type){case "ARMATURE":Ja.Os(a,c);e=d.eh;f=L.gX(e);a.b4w_animation_mixing?(d.we=new Float32Array(f.Zb),d.uf=new Float32Array(f.Zb),d.Ce=new Float32Array(f.trans),d.yf=new Float32Array(f.trans)):(d.we=f.Zb,d.uf=f.Zb,d.Ce=f.trans,d.yf=f.trans);for(var g in e){var k=e[g];1==k.uy.length&&Ja.K5(k,!0,f.trans,f.Zb)}d.Sv=f;d.ug=0;d.Jk=a.b4w_animation_mixing;
break;case "MESH":d.Mk=F.MW(a.data.b4w_boundings.bb);c.cP=a.data.is_boundings_overridden;d.ef=a.b4w_do_not_render;d.mn=fa.outlining_overview_mode||a.b4w_selectable;d.qB=a.b4w_selectable;d.zd=fa.outlining_overview_mode||a.b4w_outlining;d.pB=a.b4w_outlining;d.rB=fa.outlining_overview_mode||a.b4w_outline_on_select;d.Kh=a.b4w_billboard;d.Yt=a.b4w_pres_glob_orientation;d.$t="BASIC";d.Zt="SPHERICAL"==a.b4w_billboard_geometry;g=d.dk;g.cn=a.b4w_outline_settings.outline_duration;g.dn=a.b4w_outline_settings.outline_period;
g.en=a.b4w_outline_settings.outline_relapses;d.mn&&(d.vm=ca.uN(za),za++);for(g=0;g<a.data.b4w_vertex_anim.length;g++)e=a.data.b4w_vertex_anim[g],c.Gd.push({name:e.name,Ia:e.frame_start,vb:e.frame_end,Q9:e.averaging,R9:e.averaging_interval,aW:e.allow_nla});c.A.Gd=c.Gd.length?!0:!1;"MESH"!=a.type&&ca.K("Wrong object type: "+a.name);g=c.A;if(a.data.b4w_shape_keys.length)for(g.$f=!0,e=0;e<a.data.b4w_shape_keys.length;e++)f={},f.value=a.data.b4w_shape_keys[e].value,f.name=a.data.b4w_shape_keys[e].name,
g.yh.push(f);else g.$f=!1;d.Wf=a.b4w_shadow_cast;d.ze=a.b4w_shadow_receive;d.vf=a.b4w_shadow_cast_only&&d.Wf;d.Se=a.b4w_reflexible;d.xe=a.b4w_reflexible_only&&d.Se;d.Ad=a.b4w_reflective;d.ri=a.b4w_reflection_type;if(!d.Ad)for(g=c.Ec,e=0;e<g.length;e++)f=g[e],!f.Ch||-1==f.te.Sx.indexOf("BSDF_GLOSSY")&&-1==f.te.Sx.indexOf("BSDF_DIFFUSE")||(c.A.Ad=!0,c.A.ri="PBR");d.fh=a.b4w_caustics;if(d.Bf=a.b4w_wind_bending)d.Vp=a.b4w_wind_bending_angle,g=F.vT(ca.df(a.b4w_wind_bending_angle),d.Mk,a.scale[0]),d.Og=
g,d.Pg=a.b4w_wind_bending_freq,d.qg=a.b4w_detail_bending_freq,d.pg=a.b4w_detail_bending_amp,d.kg=a.b4w_branch_bending_amp,d.yl=a.b4w_main_bend_stiffness_col,g=a.b4w_detail_bend_colors,d.Jf.MG=g.leaves_stiffness_col,d.Jf.LG=g.leaves_phase_col,d.Jf.uH=g.overall_stiffness_col;d.ff=a.b4w_dynamic_geometry;if(d.ff)for(c.Zn=a,g=0;g<c.Ec.length;g++)c.oh.Ur.push(c.Ec[g].name),c.oh.Zo.push(!1);g=c.Ec[0];d.Uh=g.Td.Uh;d.Ph=g.Td.Ph;d.nh=0;d.mh=R.aE;d.fk=a.pass_index;break;case "LINE":d.Ca=U.If();d.Lb=U.yu();d.Ki=
U.If();d.qm=U.yu();break;case "CAMERA":K.mX(a,c);K.DW(c);break;case "LAMP":X.w1(a,c);break;case "SPEAKER":c.ra=ea.EY();d=!1;for(g=0;g<c.T.length;g++)if(c.T[g].wb.od){d=!0;break}d&&ea.Os(a,c);break;case "EMPTY":g=U.If(),d.Ca=g,g=U.Hy(),d.Bc=g,a.field&&(c.ar={type:a.field.type,iS:a.field.strength}),a.b4w_anchor&&(c.anchor={type:a.b4w_anchor.type,Xq:a.b4w_anchor.detect_visibility,Dm:a.b4w_anchor.element_id,g2:a.b4w_anchor.max_width})}}N(c);return c};a.c6=function(a,b){var c=b.A;if("MESH"==b.type){var d=
L.GN(a);if(d){var e=d.Oa,f=e.A.Sv,g=b.A,l=a.data;b.by=e;l=l.vertex_groups;if(l.length){var e=e.A.eh,h=0,q={},n;for(n in e){var m=ca.Pd("name",n,l);m&&(q[n]={mT:m.index,yj:e[n].yj,sF:h++})}g.zj=q;n=h;l=L.$N();g.$i=n;n>2*l?(g.Tm=!1,qa.error('too many bones for "'+a.name+'" / '+g.$i+" bones (max "+l+" with blending, "+2*l+" without blending). Skinning will be disabled.")):g.Tm=!0}f=L.c_(f.trans,f.Zb,c.zj);d.b4w_animation_mixing?(c.we=new Float32Array(f.Zb),c.uf=new Float32Array(f.Zb),c.Ce=new Float32Array(f.trans),
c.yf=new Float32Array(f.trans)):(c.we=f.Zb,c.uf=f.Zb,c.Ce=f.trans,c.yf=f.trans);c.Rt=new Float32Array(4);c.Qt=pa.create();c.Sv=f;c.ug=0}if(c.Ad)if(c=b.A,"CUBE"==c.ri)c.Ke=ha++;else if("PLANE"==c.ri){a:{d=a.constraints;for(f=0;f<d.length;f++)if(g=d[f],"LOCKED_TRACK"==g.type&&"REFLECTION PLANE"==g.name){if(g.target&&g.target.Oa){d=g.target.Oa;break a}qa.warn('Reflection plane target for object: "'+b.name+"\" is not present on the scene. Using object's Z-axis.")}d=null}d||(d=ca.Hw("%reflection%"),d=
R.Au(d,"EMPTY"),f=R.Rq("EMPTY"),d.A=f,k(b,d),E.UK(d,b,[0,0,0],null,1),N(d));f=null;for(g=0;g<J.length;g++)if(J[g]==d){f=g;break}null==f&&(f=J.length,J.push(d));d.A.ue=f;c.ue=f;d.cw.push(b)}}};a.T5=b;a.w$=k;a.xX=h;a.d6=function(a){for(var b=0;b<a.length;b++){var c=a[b];!c.A||"DYNAMIC"!=c.A.type&&"CAMERA"!=c.A.type||da.W(c);c.Mw&&L.w2(c)&&(L.YK(c),c.Ba.length&&L.play(c,null,L.It))}};a.AL=function(a){if(a.b4w_hidden_on_load||a.dg_parent&&a.dg_parent.Fk||a.parent&&a.parent.Fk)return!0;switch(a.type){case "MESH":return O(a);
case "EMPTY":return x(a);default:return!0}};a.Ro=function(a){return ca.Y(a.$A)};a.dv=function(a){return a.Ty};a.Ja=function(){ha=za=0;J.length=0;ra.length=0;aa={ALL:[]}};a.copy=function(a,b,c){var e=R.Qj(a),e=e?R.vN(e.name,b):b,l=g(e);b=R.Au(e+l,a.type,b+l);b.Rm=a.Rm;b.Zn=a.Zn;b.oh.Ur=R.wu(a.oh.Ur);b.oh.Zo=R.wu(a.oh.Zo);b.ea=a.ea;b.ov=a.ov;b.Mw=a.Mw;b.Co=a.Co;b.A=R.RE(a.A);b.A.ql=!1;b.$A=R.xu(a.$A);b.Ty=R.xu(a.Ty);k(a,b);b.Bq=R.wu(a.Bq);b.parent=R.wu(a.parent);b.hn=a.hn;b.Lv=a.Lv;b.Gd=R.wu(a.Gd);
b.eo=a.eo;!a.O||a.wg||a.pl||a.bp||(b.Rs=a.Rs,b.O=null);b.Ub=a.Ub;b.Ey=a.Ey;b.Td=R.xu(a.Td);e=[];for(l=0;l<a.T.length;l++){var h=b.T[l],q=a.T[l].da;if(c){for(var n=h.da,m=0;m<q.length;m++)if(!q[m].Th){var y=R.xu(q[m]);y.Pa=f.QX(q[m].Pa);R.$g(b,h.wb,y);e.push(q[m].Pa)}for(m=0;m<q.length;m++)if(q[m].Th){y=R.xu(q[m]);R.$g(b,h.wb,y);for(var C=0;C<e.length;C++)e[C]==q[m].Pa&&(y.Pa=n[C].Pa)}for(m=0;m<n.length;m++)n[m].Pa&&f.OS(n[m].Pa),Z.mE&&n[m].Pa&&oa.GW(n[m]),n[m].bn=F.F_(n[m],b.A,b.dd),F.F5(n[m]);la.H4(n)}else for(m=
0;m<q.length;m++)R.$g(b,h.wb,q[m])}for(e=0;e<a.Ec.length;e++)b.Ec.push(d.RX(a.Ec[e]));R.dI(b,!1);N(b);b.A.BG=!0;b.A.yA=c;b.A.vm=ca.uN(za);za++;return b};a.HN=function(a,b){var c=[],d=a.animation_data,e=a.data?a.data.animation_data:null;d&&d.action&&(d=d.action,(d.J.type==L.SU||d.J.type==L.OU&&"ARMATURE"==a.type||d.J.type==L.QU&&"LAMP"==a.type||d.J.type==L.PU&&b)&&c.push(L.UO(null,d)));e&&e.action&&("SPEAKER"==a.type||"LAMP"==a.type)&&c.push(L.UO(null,e.action));"MESH"==a.type&&c.push.apply(c,L.M_(a));
b&&c.push.apply(c,L.N_(a));return c};a.iJ=function(a){for(var b=a.A,c=null,d=a.T[0].da,e=0;e<d.length;e++){var g=d[e],k=a.T[0].dh[e];if(g.Pa&&k.ig&&k.Ff){var l=f.$z("a_position");if(l=f.iG(g.Pa.Uc,l)){var h=g.Pa.cd.a_position.offset,q=g.Pa.cd.a_position.length+h;F.X5(g,l.subarray(h,q));R.WS(g,b.D,k);"MAIN"==g.type&&(c?U.pz(c,g.Db.Ff):c=U.xy(g.Db.Ff))}}}c=c||U.If();if(b.Kh)R.RS(a,c);else{k=[];for(e=0;e<d.length;e++)if(g=d[e],"MAIN"==g.type&&(l=f.$z("a_position"),l=f.iG(g.Pa.Uc,l)))g=d[e].Pa.cd,h=g.a_position.offset,
q=g.a_position.length+h,k.push(l.subarray(h,q));R.i6(a,c,k)}if(Z.debug_view)for(e=0;e<d.length;e++)if("DEBUG_VIEW"===d[e].type&&d[e].$k){a=b.Lb;b=C.OF(1,a.V);f.WQ(b,[a.ab[0],a.eb[1],a.fb[2]],a.V);f.PC(b,1,!0);b.Ea.a_polyindex=f.qz(b);F.E5(d[e],b);break}};a.xc=e;a.mO=function(a,b,c){b=aa[b]||[];for(var d=[],e=0;e<b.length;e++){var f=b[e];if(!(f.A.Le!=c&&-1!=c||f.Rm))for(var g=f.T,k=0;k<g.length;k++)g[k].wb==a&&d.push(f)}return d};a.Pj=B;a.Kz=function(a){var b=aa.MESH;if(b)for(var c=0;c<b.length;c++){var d=
b[c];if(ja.FO(d))for(var e=d.T,f=0;f<e.length;f++)if(e[f].wb==a)return d}return null};a.Tr=v;a.Wz=function(){var a=[],b=aa.MESH;if(b)for(var c=0;c<b.length;c++){var d=b[c];d.A.mn&&!d.Rm&&a.push(d)}return a};a.dO=function(){var a=[],b=aa.MESH;if(b)for(var c=0;c<b.length;c++){var d=b[c];d.A.zd&&!d.Rm&&a.push(d)}return a};a.ud=function(b,c,d,e){var f=null,g=aa.ALL;switch(b){case a.ZD:f=P(c,g,!0,d,e);break;case a.YD:a:{for(b=0;b<g.length;b++)if(f=g[b],f.Sf==d&&(f.A.Le==e||-1==e)){var k=R.Qj(f);if(k&&
k.Sf==c)break a}f=null}break;case a.le:a:{for(e=0;e<g.length;e++){b=g[e];for(var f=c.length-1,k=b,l=!0;0<=f&&l;)l=k&&k.Sf==c[f]&&(k.A.Le==d||-1==d),k&&(k=R.Qj(k)),f--;if(l&&!k){f=b;break a}}f=null}}return f};a.aA=function(a,b){return P("%meta_world%"+a,aa.WORLD,!0,b)};a.jca=function(a){return a.Sf.replace("%meta_world%","")};a.wp=function(b,c){var d=ia.Ui();if(!d)return qa.error("No active scene"),null;var f=ia.dc(d,ma.Gh);f&&f.enable_hmd_stereo&&(f=n.Wh(),b=f.clientHeight/2,c=f.clientWidth/2);if(f=
S.J2(b,c))return f;f=ia.L2(d,b,c);if(!f)return null;for(var d=e(d,"MESH",-1),g=0;g<d.length;g++){var k=d[g].A,l=k.vm;if(l&&3>Math.abs(255*l[0]-f[0])&&3>Math.abs(255*l[1]-f[1])&&3>Math.abs(255*l[2]-f[2]))return k.zd&&k.rB&&(fa.outlining_overview_mode?a.Eq(d[g],fa.cn,fa.dn,fa.en):(f=k.dk,a.Eq(d[g],f.cn,f.dn,f.en))),d[g]}return null};a.KR=function(a,c){for(var d=e(a,"EMPTY",-1),f=0;f<d.length;f++){var g=d[f];if(g.ar&&"WIND"===g.ar.type){var k=g;break}}if(!k)return qa.error("There is no wind on the scene"),
0;"number"==typeof c.wind_dir&&(d=ca.df(c.wind_dir),V.set(Math.sin(d),-Math.cos(d),0,ya),ca.wF(ya,ca.ic,Q),da.Ol(k,Q));"number"==typeof c.wind_strength&&(k.ar.iS=c.wind_strength);b(k)};a.Bp=function(a){E.yX(a)&&E.remove(a);var b=aa.ALL,c=aa[a.type],d=b.indexOf(a);a=c.indexOf(a);-1!=d&&b.splice(d,1);-1!=a&&c.splice(a,1)};a.x2=N;a.xda=function(a){return aa[a.type]&&-1<aa[a.type].indexOf(a)};a.Y5=function(a,b){if(a.A.ql){var c=a.A,d=b.J;if(c.ql)for(var e=da.Me(b.Ek,ya),f=0;f<a.T.length;f++)if(a.T[f].wb==
b)for(var g=0;g<a.T[f].da.length;g++){var k=a.T[f].da[g],l=k.Wm,h="SHADOW"==k.type&&"RECEIVE"==k.Ib&&!Z.ds;Z.lod_smooth_transitions&&!h&&(h=d.V1,"ALL"==h||"NON-OPAQUE"==h&&(k.xb||k.Gk))&&(l.Ow=!0);M(k,c,e);l.Hf=l.Kj;l.mr=Math.min(d.EP,.6*c.wl);l.lr=Math.min(d.EP,.6*c.xl)}}};a.Z5=M;a.f4=function(a){var b=a.A,c=b.Og,d=b.Pg,e=b.qg,g=b.pg,k=b.kg;a=a.T;for(b=0;b<a.length;b++)for(var l=a[b].da,h=0;h<l.length;h++){var q=l[h].Pa,n=q.cd,m=n.au_wind_bending_amp,y=n.au_wind_bending_freq,C=n.au_detail_bending_amp,
p=n.au_detail_bending_freq,n=n.au_branch_bending_amp;if(y){var J=Array.apply(null,Array(y.length)).map(function(){return d});f.Iw(q,f.xq,new Float32Array(J),y.offset)}m&&(J=Array.apply(null,Array(m.length)).map(function(){return c}),f.Iw(q,f.xq,new Float32Array(J),m.offset));C&&(J=Array.apply(null,Array(C.length)).map(function(){return g}),f.Iw(q,f.xq,new Float32Array(J),C.offset));p&&(J=Array.apply(null,Array(p.length)).map(function(){return e}),f.Iw(q,f.xq,new Float32Array(J),p.offset));n&&(J=Array.apply(null,
Array(n.length)).map(function(){return k}),f.Iw(q,f.xq,new Float32Array(J),n.offset))}};a.X0=function(a,b,c,d){if(a.A.ff&&c.A.ff){var f=F.Gm(a,b),g=null;F.IG(c,d,function(a){g||(g={});a.Ra&&(g[a.Ra.name]=a.Ra)},"PARTICLES");for(var k=p(c,d),h=y(a,b,c,d),q=ia.R(),n=0;n<c.T.length;n++){var m=c.T[n].wb;ia.gs(m);var C=e(m,"LAMP",0),z=c.T[n].da;c.T[n].da=[];c.T[n].dh=[];F.zN(m,[c.Zn],C,[]);F.Jy(c,ia.Oz(m),m);ia.gL(m,[c]);ia.pm(m,c,!1,!0);for(C=0;C<z.length;C++)R.$g(c,m,z[C])}D(a,b,c,h);I(c,k);l(c,d,a,
g,f);ia.gs(q)}};a.eF=function(a){a=a||"";a+=g(a);a=R.Au(a,"LINE");a.A=R.Rq("EMPTY");a.ea=!0;F.yN(ia.Ui(),[a]);ia.pm(ia.Ui(),a);N(a);return a};a.E_=function(a,b){var c=b.A,d=U.xy(c.Mk);c.Kh?R.RS(b,d):R.h6(b,d,a.data.b4w_boundings)};a.oI=function(a,b,c,d){for(var e=R.sl(a),f=0;f<a.T.length;f++)for(var g=a.T[f].da,k=0;k<g.length;k++){var l=g[k];if(e||-1!=l.Dc.indexOf(b))l.bj[c]=d}e&&ia.lD(a)};a.nI=function(a,b,c,d,e,f){for(var g=R.sl(a),k=0;k<a.T.length;k++)for(var l=a.T[k].da,h=0;h<l.length;h++){var q=
l[h];if(g||-1!=q.Dc.indexOf(b))q.Qe[3*c]=d,q.Qe[3*c+1]=e,q.Qe[3*c+2]=f}g&&ia.lD(a)};a.cO=function(a,b){return a.bj[b]};a.bO=function(a,b,c){c[0]=a.Qe[3*b];c[1]=a.Qe[3*b+1];c[2]=a.Qe[3*b+2];return c};a.aG=function(a,b){for(var c=u(b,1),d=0;d<a.length;d+=3)if(a[d]==c)return 4*a[d+1]+a[d+2];return null};a.$F=function(a,b,c){b=u(b,c);for(c=0;c<a.length;c+=2)if(a[c]==b)return a[c+1];return null}};b4w.module.__animation=function(a,w){function t(a,b){var c=a.Ba[b];c&&c.vz&&c.Pu&&(c.Pu=!1,c.vz(a,b))}function c(a,b,c){c=a.Ba[c];c.type=30;var d=b.Ia,e=b.vb-d+1;c.start=d;c.length=e;c.gh=d;c.Kk=b.name;for(e=d=0;e<a.Gd.length;e++){var f=a.Gd[e];if(f==b)break;else d+=f.vb-f.Ia+1}c.gT=d}function b(a,b){a.type=50;a.Kk=b.name;a.start=b.Ia;a.length=b.vb-a.start;b.ce||(a.length+=b.yv)}function k(a,b){var c={type:null,Kk:null,jE:null,PK:0,NK:null,Sk:new Int8Array(8),Zb:null,trans:null,Nk:null,Ok:null,DI:[],
play:!1,behavior:20,gh:0,start:0,length:0,dJ:0,KH:0,Pu:!1,gT:null,speed:1,volume:null,pitch:null,color:null,el:null,De:null,se:null,fog_intensity:null,fog_depth:null,fog_start:null,fog_height:null,Io:null,bQ:[],li:[],aQ:[],ki:[],Pr:null};if(!a.Ba.length)for(var d=0;8>d;d++)a.Ba.push(null);a.Ba[b]=c}function h(a){return a.replace(/_B4W_BAKED$/,"")}function O(a,b){return{pp:a,action:b}}function m(a,b,c){if(a.animation_data){var d=a.animation_data.action;d&&60==d.J.type&&b.push(O(c,d))}a=a.nodes;for(d=
0;d<a.length;d++){var e=a[d];if(e.node_group){var f=e.node_group.node_tree;if(f){var g=c.slice();g.push(e.name);m(f,b,g)}}}}function x(a){return ea.pf(a)&&a.A.Gd?!0:!1}function r(a,b,c){var d=a.Ba;if(-1==c)for(c=0;8>c;c++){var f=d[c];f&&(f.gh=b,e(a,0,c,!0))}else if(f=d[c])f.gh=b,e(a,0,c,!0)}function g(a,b,c){if(-1==b)for(b=0;8>b;b++){var d=a[b];d&&c(d)}else(d=a[b])&&c(d)}function e(a,b,c,d){y(a,b,c,d);t(a,c);a.A.Jk&&(F(a,b),l(a,b))}function B(a,b,c,d){var e=c.frame_range;if(e[0]>e[1])return da.warn('Incompatible action "'+
c.name+'" has been applied to object "'+a.name+'"'),!1;var f=c.J,g=a.Ba[d];g.Kk=c.name;g.jE=e;g.PK=f.oQ;g.NK=f.sL;g.Sk.set(f.Sk);g.start=e[0];g.length=e[1]-e[0];g.gh=e[0];switch(f.type){case 10:if(ea.sr(a)){g.type=10;var k=v(a,b,c);k||(k=U(c,a.A.eh),P(a,b,c,k));g.trans=k.trans;g.Zb=k.Zb;g.Nk=k.Nk;g.Ok=k.Ok;N(a,d,c,k)}break;case 40:ea.Um(a)&&(g.volume=f.nb.volume||null,g.pitch=f.nb.pitch||null,g.type=40);break;case 70:ea.vr(a)&&(g.color=f.nb.color||null,g.el=f.nb.energy||null,g.type=70);break;case 60:if("MESH"==
a.type||"WORLD"==a.type){g.type=60;var e=ea.sl(a),l=[],h=[],q=[],n=[],m=[];c=c.J;var y=b?b[0]:null;for(k in c.nb){var C;C=b;var J=k.match(/"(.*?)"/)[1];if(C&&1<C.length){for(var z=C[1],u=2;u<C.length;u++)z=z+"%join%"+C[u];z+="%join%"+J}else z=J;C=z;for(J=0;J<a.T.length;J++)for(z=a.T[J].da,u=0;u<z.length;u++){var A=z[u];if(e||!y||-1!=A.Dc.indexOf(y)){var D=A.ki,E;E=k;var G=C,H=c,B=h,x=l,F=A.li;if(F){for(var r=!1,V=0;V<F.length;V+=3)G==F[V]&&(x.push(4*F[V+1]+F[V+2]),B.push(new Float32Array(H.nb[E])),
r=!0);E=r}else E=!1;G=k;H=C;B=c;x=n;F=q;if(D){r=!1;for(V=0;V<D.length;V+=2)H==D[V]&&(F.push(D[V+1]),x.push(new Float32Array(B.nb[G])),r=!0);D=r}else D=!1;(E||D)&&m.push(A)}}}g.li=l;g.bQ=h;g.ki=q;g.aQ=n;g.Pr=m}break;case 20:if(k=f.nb.tsr)g.type=20,e=v(a,b,c),e||(e=I(c,k),P(a,b,c,e)),g.trans=e.trans,g.Zb=e.Zb,la.nH(a)&&la.p6(a,g.trans[0],g.Zb[0]);else return da.warn('Incompatible action "'+c.name+'" has been applied to object "'+a.name+'"'),!1;break;case 80:ea.sl(a)&&(g.el=f.nb["light_settings.environment_energy"]||
null,g.se=f.nb.horizon_color||null,g.De=f.nb.zenith_color||null,g.fog_intensity=f.nb["mist_settings.intensity"]||null,g.fog_depth=f.nb["mist_settings.depth"]||null,g.fog_start=f.nb["mist_settings.start"]||null,g.fog_height=f.nb["mist_settings.height"]||null,g.Io=f.nb.b4w_fog_color||null,g.type=80)}ea.sr(a)&&10!=f.type&&p(a,d);return!0}function v(a,b,c){a=a.Bq;b=b?b.join("%join%"):null;for(var d=0;d<a.length;d+=3)if(c==a[d]&&b==a[d+1])return a[d+2];return null}function P(a,b,c,d){a.Bq.push(c,b?b.join("%join%"):
null,d)}function N(a,b,c,d){var e=a.A,f=e.qs,g=a.Ba[b],k=g.DI,l;a:{l=e.oC;for(var h=0;h<l.length;h+=2)if(c==l[h]){l=l[h+1];break a}l=null}if(l)g.DI=l;else{for(g=0;g<f.length;g++){l=f[g].zj;for(var h=[],q=[],n=d.trans,m=d.Zb,y=0;y<n.length;y++){var C=A(n[y],m[y],l);h.push(C.trans);q.push(C.Zb)}k.push({trans:h,Zb:q})}e.oC.push(c,k)}e.Jk&&(c=e.lo,b>c[1]?(d=c[1],c[1]=b,c[0]=d):b>c[0]&&b<c[1]&&(c[0]=b),M(a))}function M(a){var b=a.A.lo;if(-1!=b[0]&&-1!=b[1]){var c=a.Ba;a=c[b[1]].gh;var d=Math.floor(a),
e=a-d,b=c[b[0]];a=b.gh;d=Math.floor(a);b.gh=d+e}}function p(a,b){var c=a.A.lo,d=c[1];c[0]=-1;c[1]=-1;if(-1!=b)for(var e=a.Ba;0<=d;d--){var f=e[d];if(f&&10==f.type)if(d>c[1])c[1]=d;else{d>c[0]&&(c[1]=d);break}}}function I(a,b){for(var c=a.J.mH,d=[],e=[],f=0;f<c;f++)d.push(b.subarray(8*f,8*f+4)),e.push(b.subarray(8*f+4,8*f+8));return{trans:d,Zb:e}}function y(a,b,c,d){if((c=a.Ba[c])&&null!=c.type&&(c.play||d)){var e=a.A,f=c.gh,g=c.start,k=c.length,f=f+c.speed*b*oa.fe(),l=c.type,h=c.speed;if(0<=h&&f>=
g+k||0>h&&f<g)switch(d||(c.Pu=!0),c.behavior){case 10:0<=h?f=(f-g)%k+g:f=g+k-1E-6;break;case 20:0<=h?f=g:f=g+k-1E-6;c.play=!1;break;case 30:0<=h?f=g+k-1E-6:f=g,c.play=!1}c.gh=f;switch(l){case 10:if(!e.Jk){d=D(c);b=d[0];var q=d[1];d=d[2];e.we=c.Zb[b];e.uf=c.Zb[q];e.Ce=c.trans[b];e.yf=c.trans[q];e.ug=d;d=e.qs;c=c.DI;for(var n=0;n<d.length;n++){var m=d[n],y=c[n];m.we=y.Zb[b];m.uf=y.Zb[q];m.Ce=y.trans[b];m.yf=y.trans[q];m.ug=e.ug}Z.W(a)}break;case 20:d=D(c);var e=ya,q=d[0],n=d[1],m=d[2],y=c.trans,C=y[q][1],
f=y[q][2],g=y[n][1],k=y[n][2];e[0]=(1-m)*y[q][0]+m*y[n][0];e[1]=(1-m)*C+m*g;e[2]=(1-m)*f+m*k;q=ka;f=d[0];n=d[1];m=d[2];y=c.Zb;C=Y;C[0]=y[f][0];C[1]=y[f][1];C[2]=y[f][2];C[3]=y[f][3];f=ua;f[0]=y[n][0];f[1]=y[n][1];f[2]=y[n][2];f[3]=y[n][3];xa.slerp(C,f,m,q);n=d[2];m=c.trans;d=(1-n)*m[d[0]][3]+n*m[d[1]][3];a.parent&&a.yB&&(n=wa,fa.ti(e,d,q,n),fa.multiply(a.yB,n,n),fa.Wb(n,e),fa.Fb(n,q),d=fa.ge(n));c.dJ&&(n=Q,Z.Me(a,n),aa.BC(e,n,b,c.dJ,e));c.KH&&(n=Y,Z.Rj(a,n),aa.XR(q,n,b,c.KH,q));f=c.Sk;f[0]&&Z.eC(a,
e);f[1]&&Z.bC(a,q);f[2]&&Z.uI(a,d);Z.W(a);ba.$(a);break;case 30:d=c.gh-c.start;0>d&&(d=0);d>=c.length&&(d=c.length);a=Math.floor(d);b=a+1;d-=a;10!=c.behavior&&b==c.length&&(b=--a,d=1);c=c.gT;ra[0]=a+c;ra[1]=b+c;ra[2]=d;d=ra;e.sD=d[0];e.tD=d[2];break;case 40:d=D(c);b=d[0];e=d[1];d=d[2];c.volume&&Ja.yI(a,(1-d)*c.volume[b]+d*c.volume[e]);c.pitch&&Ja.CH(a,(1-d)*c.pitch[b]+d*c.pitch[e]);break;case 50:b=10==c.behavior?(f-g)/oa.fe():f/oa.fe();la.w4(a,c.Kk,b);break;case 60:d=D(c);b=d[0];e=d[1];d=d[2];C=c.bQ;
f=c.li;q=c.aQ;n=c.ki;m=c.Pr;for(c=0;c<f.length;c++)for(g=C[c],y=f[c],k=(1-d)*g[b]+d*g[e],g=0;g<m.length;g++)m[g].bj[y]=k;for(c=0;c<n.length;c++)for(C=q[c],y=n[c],C=za.lerp(C.subarray(3*b,3*b+3),C.subarray(3*e,3*e+3),d,ya),g=0;g<m.length;g++)m[g].Qe[3*y]=C[0],m[g].Qe[3*y+1]=C[1],m[g].Qe[3*y+2]=C[2];ea.sl(a)&&V.lD(a);break;case 70:d=D(c);b=d[0];e=d[1];d=d[2];f=c.Sk;(k=c.el)&&f[0]&&ma.i4(a.xd,(1-d)*k[b]+d*k[e]);(c=c.color)&&f[1]&&(ya[0]=(1-d)*c[3*b]+d*c[3*e],ya[1]=(1-d)*c[3*b+1]+d*c[3*e+1],ya[2]=(1-
d)*c[3*b+2]+d*c[3*e+2],ma.h4(a.xd,ya));g=a.T;for(c=0;c<g.length;c++)V.V5(a,g[c].wb);break;case 80:d=D(c);b=d[0];e=d[1];d=d[2];f=c.Sk;g=a.T;h=V.dc(g[0].wb,S.Nb);k=c.el;k=f[0]?(1-d)*k[b]+d*k[e]:h.el;l=c.se;f[1]?(ya[0]=(1-d)*l[3*b]+d*l[3*e],ya[1]=(1-d)*l[3*b+1]+d*l[3*e+1],ya[2]=(1-d)*l[3*b+2]+d*l[3*e+2],l=ya):l=h.se;var p=c.De;f[2]?(Q[0]=(1-d)*p[3*b]+d*p[3*e],Q[1]=(1-d)*p[3*b+1]+d*p[3*e+1],Q[2]=(1-d)*p[3*b+2]+d*p[3*e+2],h=Q):h=h.De;p=c.fog_intensity;f[3]&&(q=(1-d)*p[b]+d*p[e]);p=c.fog_depth;f[4]&&(n=
(1-d)*p[b]+d*p[e]);p=c.fog_start;f[5]&&(m=(1-d)*p[b]+d*p[e]);p=c.fog_height;f[6]&&(y=(1-d)*p[b]+d*p[e]);c=c.Io;f[7]&&(ka[0]=(1-d)*c[3*b]+d*c[3*e],ka[1]=(1-d)*c[3*b+1]+d*c[3*e+1],ka[2]=(1-d)*c[3*b+2]+d*c[3*e+2],C=ka);for(c=0;c<g.length;c++)b=a.T[c].wb,(f[0]||f[1]||f[2])&&V.iI(b,k,l,h),f[3]&&V.oR(b,q),f[4]&&V.mR(b,n),f[5]&&V.pR(b,m),f[6]&&V.nR(b,y),f[7]&&V.kI(b,C);break;default:aa.K("Unknown animation type:"+l)}}}function D(a){var b=a.jE[0],c=a.jE[1]-b,b=a.gh-b;0>b&&(b=0);b>=c&&(b=c);b/=a.PK;c=Math.floor(b);
a=a.NK[c]?b-c:0;b=Math.ceil(c+a);ra[0]=c;ra[1]=b;ra[2]=a;return ra}function l(a,b){var c=a.A,d=c.Gi,e=c.lo,f=e[0],e=e[1];if(-1!=e){if(-1!=f){var g=a.Ba[f];if(g.play||0==b||c.aj){var k=D(g),l=k[0],h=k[1];c.ug=k[2];var k=g.Zb[l],q=g.Zb[h],n=g.trans[l],m=g.trans[h]}else d=1}else d=1;e=a.Ba[e];if(e.play||0==b||c.aj){var f=D(e),y=f[0],C=f[1];c.ug=f[2]}else if(-1!=f&&g.play)d=0;else return;var f=e.Zb[y],p=e.Zb[C],J=e.trans[y],z=e.trans[C];if(1!=d||c.aj)if(0!=d||c.aj){d=c.eh;if(c.aj&&!c.Bn&&!c.jn){c.Bn=
new Float32Array(c.Ce.length);c.jn=new Float32Array(c.we.length);for(var A in d)k=d[A],k.Xr||L(c,k)}for(A in d)k=d[A],k.Xr||u(c,k,g,e,l,h,y,C)}else c.we.set(k),c.uf.set(q),c.Ce.set(n),c.yf.set(m);else c.we.set(f),c.uf.set(p),c.Ce.set(J),c.yf.set(z);Z.W(a);pa.m6(a)}}function u(a,b,c,d,e,f,g,k){var l=b.Xr,h=a.Gi,q=ka,n=Y,m=va,y=Va,C=ua,p=Pa,J=Ba,z=Aa,A=4*b.yj,v=d.Nk[g],D=d.Ok[g],E=d.Nk[k],G=d.Ok[k];if(!a.aj)var H=c.Nk[e],B=c.Ok[e],x=c.Nk[f],F=c.Ok[f];for(var r=0;4>r;r++)n[r]=v[A+r],y[r]=D[A+r],p[r]=
E[A+r],z[r]=G[A+r],a.aj?(q[r]=a.jn[A+r],m[r]=a.Bn[A+r],C[r]=a.jn[A+r],J[r]=a.Bn[A+r]):(q[r]=H[A+r],m[r]=B[A+r],C[r]=x[A+r],J[r]=F[A+r]);xa.slerp(q,n,h,q);aa.jy(m,y,h,m);fa.on(m,wa);fa.Gc(q,wa);l&&fa.multiply(l.jD,wa,wa);fa.copy(wa,b.jD);fa.multiply(wa,b.hJ,wa);fa.ir(wa,m);fa.Fb(wa,q);xa.slerp(C,p,h,C);aa.jy(J,z,h,J);fa.on(J,wa);fa.Gc(C,wa);l&&fa.multiply(l.iD,wa,wa);fa.copy(wa,b.iD);fa.multiply(wa,b.hJ,wa);fa.ir(wa,J);fa.Fb(wa,C);for(r=0;4>r;r++)a.we[A+r]=q[r],a.Ce[A+r]=m[r],a.uf[A+r]=C[r],a.yf[A+
r]=J[r];b=b.$y;for(r=0;r<b.length;r++)u(a,b[r],c,d,e,f,g,k)}function L(a,b){for(var c=4*b.yj,d=b.Xr,e=a.Gi,f=va,g=ka,k=Va,l=Y,h=0;4>h;h++)f[h]=a.Ce[c+h],g[h]=a.we[c+h],k[h]=a.yf[c+h],l[h]=a.uf[c+h];fa.on(f,wa);fa.Gc(g,wa);fa.multiply(wa,b.mj,wa);fa.copy(wa,b.jD);d&&(fa.invert(d.jD,W),fa.multiply(W,wa,wa));fa.ir(wa,f);fa.Fb(wa,g);fa.on(k,wa);fa.Gc(l,wa);fa.multiply(wa,b.mj,wa);fa.copy(wa,b.iD);d&&(fa.invert(d.iD,W),fa.multiply(W,wa,wa));fa.ir(wa,k);fa.Fb(wa,l);xa.slerp(g,l,e,g);aa.jy(f,k,e,f);for(h=
0;4>h;h++)a.jn[c+h]=g[h],a.Bn[c+h]=f[h];c=b.$y;for(h=0;h<c.length;h++)L(a,c[h])}function F(a,b){var c=a.A,d=c.Gi,e=c.Dq;if(0!=e){!c.aj||c.Bn||c.jn||(d=c.Gi=0);var d=c.Cq-d,f=e*b;aa.sign(d)==aa.sign(e)&&Math.abs(f)<Math.abs(d)?c.Gi+=f:(c.Gi=c.Cq,c.Dq=0,c.Ik&&(c.Ik(),c.Ik=null),c.aj&&(c.Bn=null,c.jn=null,c.aj=!1))}}function U(a,b){for(var c=[],d=[],e=[],f=[],g=a.J.mH,k=0;k<g;k++){for(var l in b){var h=b[l],q=h.Gw,n=a.J.zE[l];n?fa.copy(n.subarray(8*k,8*k+8),q):fa.identity(q);h.gD=!1}h=K(b);c.push(h.trans);
d.push(h.Zb);e.push(h.Ok);f.push(h.Nk)}return{trans:c,Zb:d,Ok:e,Nk:f}}function K(a){var b=[],c=[],d=[],e=[],f=new Float32Array(4),g=new Float32Array(4),k;for(k in a){var l=a[k],h=f,q=g,n=l.uy,m=n[n.length-1],y=m.gJ;m.gD||fa.identity(y);for(m=n.length-1;0<=m;m--){var C=n[m],p=C.gJ;if(C.gD)y=p;else{var J=C.mj,u=C.Gw;fa.invert(J,wa);fa.multiply(u,wa,wa);fa.multiply(J,wa,wa);fa.multiply(y,wa,p);y=p;C.gD=!0}}n=C.gJ;h[0]=n[0];h[1]=n[1];h[2]=n[2];h[3]=n[3];q[0]=n[4];q[1]=n[5];q[2]=n[6];q[3]=n[7];xa.normalize(q,
q);h=l.yj;fa.multiply(l.fD,l.Gw,wa);for(l=0;4>l;l++)q=4*h+l,b[q]=f[l],c[q]=g[l],d[q]=wa[l],e[q]=wa[l+4]}return{trans:b,Zb:c,Ok:d,Nk:e}}function A(a,b,c){var d=[],e=[],f;for(f in c)for(var g=c[f],k=g.yj,g=g.sF,l=0;4>l;l++){var h=4*g+l,q=4*k+l;d[h]=a[q];e[h]=b[q]}d=new Float32Array(d);e=new Float32Array(e);return{trans:d,Zb:e}}function E(a){var b=a.J,c;if(b.zE)c=10;else if(b.nb)if("volume"in b.nb||"pitch"in b.nb)c=40;else{var d;a:{if(d=a.J.nb)for(var e in d)if(-1!=e.indexOf("nodes")){d=!0;break a}d=
!1}if(d)c=60;else{var f;a:{if(a.J.nb){d=a.fcurves;for(f in d)if("color"==f&&!d[f][3]){f=!0;break a}if("energy"==f){f=!0;break a}}f=!1}if(f)c=70;else if(f=a.J.nb,"light_settings.environment_energy"in f||"horizon_color"in f||"zenith_color"in f||"mist_settings.intensity"in f||"mist_settings.depth"in f||"mist_settings.start"in f||"mist_settings.height"in f||"b4w_fog_color"in f)c=80;else{a:{if(a.J.nb)for(c in a=a.fcurves,a)if("location"==c||"rotation_quaternion"==c||"scale"==c){c=!0;break a}c=!1}c=c?20:
0}}}else c=0;b.type=c}function n(a,b){b[0]=b[1]=b[2]=0;for(var c in a)"location"==c?b[0]=1:"rotation_quaternion"==c?b[1]=1:"scale"==c&&(b[2]=1)}function f(a,b){b[0]=b[1]=0;for(var c in a)"energy"==c?b[0]=1:"color"==c&&(b[1]=1)}function X(a,b){b[0]=b[1]=b[2]=0;b[3]=b[4]=b[5]=0;b[6]=b[7]=0;for(var c in a)"light_settings.environment_energy"==c?b[0]=1:"horizon_color"==c?b[1]=1:"zenith_color"==c?b[2]=1:"mist_settings.intensity"==c?b[3]=1:"mist_settings.depth"==c?b[4]=1:"mist_settings.start"==c?b[5]=1:
"mist_settings.height"==c?b[6]=1:"b4w_fog_color"==c&&(b[7]=1)}function d(a,b,c,e,f,g,k){var l=a+(b-a)/2,h=H(l,e,f,g,k)-c;return.02>Math.abs(h)?l:0<h?d(a,l,c,e,f,g,k):d(l,b,c,e,f,g,k)}function H(a,b,c,d,e){var f=1-a;return b*f*f*f+3*c*f*f*a+3*d*f*a*a+e*a*a*a}function G(a,b){k(a,b);-1==Ya.indexOf(a)&&Ya.push(a)}function R(a,b){Z.W(a);ba.$(a);e(a,0,b,!0)}function q(a,d,e,f){f=f||0;if(ea.pf(a)){var g=ja(a,e);if(g)return G(a,f),c(a,g,f),R(a,f),!0;if((g=qa(a,e))&&"EMITTER"==g.tB){G(a,f);d=g.name;e=f;for(var g=
a.T,k=0;k<g.length;k++)for(var l=g[k].da,h=0;h<l.length;h++){var q=l[h].Ra;q&&q.name==d&&b(a.Ba[e],q)}R(a,f);return!0}}if(g=aa.Pd("name",e,Ga)||aa.Pd("name",e+"_B4W_BAKED",Ga)){G(a,f);if(B(a,d,g,f))return R(a,f),!0;a.Ba[f]=null}da.error('Unsupported object: "'+a.name+'" or animation name: "'+e+'"');return!1}function ja(a,b){for(var c=0;c<a.Gd.length;c++){var d=a.Gd[c];if(d.name===b)return d}return null}function qa(a,b){for(var c=a.T,d=0;d<c.length;d++)for(var e=c[d].da,f=0;f<e.length;f++){var g=e[f].Ra;
if(g&&g.name===b)return g}return null}function C(a){a=a.modifiers;for(var b=0;b<a.length;b++){var c=a[b];if("ARMATURE"==c.type)return c.object}return null}var pa=w("__armature"),ia=w("__config"),ma=w("__lights"),ea=w("__obj_util"),la=w("__particles"),ba=w("__physics"),da=w("__print"),xa=w("__quat"),ca=w("__reformer"),V=w("__scenes"),Ja=w("__sfx"),S=w("__subscene"),oa=w("__time"),Z=w("__transform"),fa=w("__tsr"),aa=w("__util"),za=w("__vec3"),ha=ia.fo,J=ia.Ni;a.x8=1E-6;a.B8=0;a.OU=10;a.SU=20;a.D8=30;
a.C8=40;a.TU=50;a.RU=60;a.QU=70;a.PU=80;a.E8=0;a.F8=1;a.G8=2;a.H8=3;a.I8=4;a.J8=5;a.K8=6;a.L8=7;a.It=-1;a.S6=10;a.T6=20;a.BT=30;var ra=Array(3),ya=new Float32Array(3),Q=new Float32Array(3),va=new Float32Array(4),Va=new Float32Array(4),Ba=new Float32Array(4),Aa=new Float32Array(4),ka=new Float32Array(4),Y=new Float32Array(4),ua=new Float32Array(4),Pa=new Float32Array(4),wa=fa.create(),W=fa.create(),Ya=[],Ga=[];a.$N=function(){return aa.trunc((J.YA-50)/4)};a.Jaa=function(a){return a/oa.fe()};a.update=
function(a){for(var b=0;b<Ya.length;b++){for(var c=Ya[b],d=0;8>d;d++)y(c,a,d);c.A.Jk&&(F(c,a),l(c,a))}for(b=0;b<Ya.length;b++)for(c=Ya[b],d=0;8>d&&c.Ba.length;d++)t(c,d)};a.H_=function(){return Ga};a.Xaa=function(a){var b=[];if(x(a))for(var c=0;c<a.Gd.length;c++)b.push(a.Gd[c].name);for(var d=[],c=0;c<Ga.length;c++){var e=Ga[c],f=e.J;20==f.type?d.push(e):60!=e.J.type||"MESH"!=a.type&&"WORLD"!=a.type?10==f.type&&"ARMATURE"==a.type?d.push(e):40==f.type&&"SPEAKER"==a.type?d.push(e):80==f.type&&"WORLD"==
a.type&&d.push(e):d.push(e)}for(c=0;c<d.length;c++)b.push(h(d[c].name));if(la.nH(a)&&la.gQ(a))for(a=a.T,c=0;c<a.length;c++)for(d=a[c].da,e=0;e<d.length;e++)(f=d[e].Ra)&&b.push(f.name);return b};a.kS=h;a.Zaa=function(a,b){var c=a.Ba[b];return c?c.type:0};a.YK=function(a){for(var d=0,e=a.T,f=0;f<e.length;f++)for(var g=e[f].da,k=0;k<g.length;k++){var l=g[k].Ra;l&&"EMITTER"==l.tB&&!g[k].Th&&(G(a,d),b(a.Ba[d],l),R(a,d),l.ce?a.Ba[d].behavior=10:a.Ba[d].behavior=a.eo,d++)}e=a.Co.slice();for(f=0;f<e.length;f++)k=
e[f],g=k.pp,k=k.action,G(a,d),B(a,g,k,d)?(R(a,d),a.Ba[d].behavior=a.eo,d++):a.Ba[d]=null;x(a)&&(G(a,d),c(a,a.Gd[0],d),R(a,d),a.Ba[d].behavior=a.eo)};a.nE=function(a){switch(a){case "CYCLIC":return 10;case "FINISH_RESET":return 20;case "FINISH_STOP":return 30;default:aa.K("Wrong animation behavior")}};a.M_=function(a){var b=[];a=a.data.materials;for(var c=0;c<a.length;c++){var d=a[c],e=d.te;e&&m(e,b,[d.name])}return b};a.N_=function(a){var b=[],c=a.node_tree;c&&m(c,b,[a.name]);return b};a.UO=O;a.play=
function(a,b,c){g(a.Ba,c,function(a){a.play=!0;b?a.vz=b:a.vz=null;a.Pu=!1});a.A.Jk&&M(a)};a.stop=function(a,b){g(a.Ba,b,function(a){a.play=!1;a.vz=null;a.Pu=!1})};a.qv=function(a,b){var c=a.Ba;if(-1==b)for(var d=0;8>d;d++){if(c[d]&&c[d].play)return!0}else if(c=c[b])return c.play;return!1};a.$B=r;a.a4=function(a,b){b=b||0;g(a.Ba,b,function(c){r(a,c.start,b)})};a.NN=function(a,b){var c=a.Ba[b];return c&&c.gh?c.gh:0};a.CG=function(a,b){var c=a.Ba[b];return c&&10==c.behavior};a.gI=function(a,b,c){g(a.Ba,
c,function(a){a.behavior=b})};a.bba=function(a,b){var c=a.Ba[b];return c&&c.behavior};a.G9=function(a,b,c,d){g(a.Ba,d,function(a){a.dJ=b||0;a.KH=c||0})};a.Jda=function(a,b){if(-1==b)for(var c=0;8>c;c++)a.Ba[c]=null;else a.Ba[b]=null;a.A.Jk&&p(a,b)};a.xfa=e;a.w2=function(a){if("ARMATURE"==a.type||a.by||"WORLD"==a.type)return!0;for(var b=0;b<a.Co.length;b++){var c=a.Co[b].action.J.type;if(20==c||10==c||40==c&&"SPEAKER"==a.type||70==c&&"LAMP"==a.type||60==c&&"MESH"==a.type)return!0}return la.nH(a)&&
la.gQ(a)||"MESH"==a.type&&a.Gd.length?!0:!1};a.yL=function(a){if(C(a))return!0;if(a.Aq)for(var b=0;b<a.Aq.length;b++){var c=a.Aq[b].action.J.type;if(20==c||60==c&&"MESH"==a.type)return!0}return la.XW(a)&&la.WW(a)||"MESH"==a.type&&a.data.b4w_vertex_anim.length?!0:!1};a.ZO=function(a){return!!a.Ba.length};a.Y0=function(a,b,c,d,e){if(c=c?aa.Pd("uuid",c,Ga):aa.Pd("name",d,Ga)||aa.Pd("name",d+"_B4W_BAKED",Ga))if(k(a,e),-1==Ya.indexOf(a)&&Ya.push(a),d=c.frame_range,d[0]>d[1])da.warn('Incompatible action "'+
c.name+'" has been applied to object "'+a.name+'"');else switch(d=c.J,d.type){case 10:ea.sr(a)&&(d=v(a,b,c),d||(d=U(c,a.A.eh),P(a,b,c,d)),N(a,e,c,d));break;case 20:(e=d.nb.tsr)?(d=v(a,b,c),d||(d=I(c,e),P(a,b,c,d))):da.warn('Incompatible action "'+c.name+'" has been applied to object "'+a.name+'"')}};a.wZ=function(a,b){for(var c=a.Bq,d=[],e=0;e<c.length;e+=3)(60!=c[e].J.type||null!==c[e+1]&&c[e+1].split("%join%")[0]!=b)&&d.push(c[e],c[e+1],c[e+2]);a.Bq=d};a.gX=K;a.c_=A;a.dW=function(a){function b(a,
b){for(var c=0;c<b;c++){var d=a.subarray(8*c+4,8*c+8);xa.normalize(d,d)}}function c(a,b){if(-1<a.indexOf("location"))var c=0,d=b;else-1<a.indexOf("rotation_quaternion")?(c=4,d=0==b?3:b-1):-1<a.indexOf("scale")?(c=3,d=0):(c=0,d=b);return c+d}function d(a,b,c,d,f){if(-1<c.search(e)){a=b;c=c.split('"')[1];var k=g}else 8==f?(c="tsr",k=g):1<f?k=new Float32Array(f):k=0;if(!a[c]){f=a;b=c;if("object"==typeof k&&k.length)for(var l=k.length,h=new Float32Array(d*l),q=0;q<d;q++)for(var n=0;n<l;n++)h[q*l+n]=k[n];
else if("number"==typeof k)for(h=new Float32Array(d),q=0;q<d;q++)h[q]=k;else aa.K("Wrong storage default value");f[b]=h}return a[c]}var e=new RegExp(/pose.bones\[\".+\"\]/g),g=fa.create(),k=a.J={type:0,mH:0,oQ:0,nb:null,zE:null,sL:null,Sk:new Int8Array(8)};k.oQ=1/ha.Ko;var l=a.fcurves,h={},q={},m=0,y;for(y in l){var C=l[y],p;for(p in C){var J=C[p],u=J.Xg;ca.sX(J,a);J=J.num_channels;m||(m=u.length);for(var J=d(h,q,y,m,J),A=J.length/m,v=c(y,p|0),D=0;D<m;D++)J[D*A+v]=u[D]}}if(aa.nl(h)){for(var G in h)"tsr"==
G&&b(h[G],m);k.nb=h}if(aa.nl(q)){for(var H in q)b(q[H],m);k.zE=q}k.mH=m;k.sL=a.UV;"tsr"in h&&n(l,k.Sk);("color"in h||"energy"in h)&&f(l,k.Sk);("light_settings.environment_energy"in h||"horizon_color"in h||"zenith_color"in h||"mist_settings.intensity"in h||"mist_settings.depth"in h||"mist_settings.start"in h||"mist_settings.height"in h||"b4w_fog_color"in h)&&X(l,k.Sk);E(a);Ga.push(a)};a.J_=function(a,b){return(b-a)*ha.Ko+1};a.zW=function(a,b,c,e,f,g){var k=new Float32Array(2),l=new Float32Array(2),
h=new Float32Array(2),q=new Float32Array(2),n=b[1],m=b[2],y=b[a.last_frame_offset+1];a=b[a.last_frame_offset+2];for(var C=0,p=0,J=null;f<=g;f++)if(f<n)for(var u=0;u<ha.Ko;u++)c[C++]=m;else if(f>y)for(u=0;u<ha.Ko;u++)c[C++]=a;else{var A=b[p],v=3;0===A&&(v+=2);0===J&&(v+=2);var D=2===A?0:1;if(b[p+1]==b[p+v+1])J=A,p+=v;else{u=0;f==b[p+1]&&(D&&(e[C]=1),c[C]=b[p+2],C++,u++);if(f==y)for(;u<ha.Ko;u++)c[C++]=a;else for(k[0]=b[p+1],k[1]=b[p+2],0!==A?(l[0]=0,l[1]=0):0===J?(l[0]=b[p+5],l[1]=b[p+6]):(l[0]=b[p+
3],l[1]=b[p+4]),0!==A?(h[0]=0,h[1]=0):(h[0]=b[p+v+3],h[1]=b[p+v+4]),q[0]=b[p+v+1],q[1]=b[p+v+2];u<ha.Ko;u++){var E=f+u/ha.Ko;switch(A){case 0:var G,B,x,r=k,z=l,F=h,V=q,K=[],S=[];K[0]=r[0]-z[0];K[1]=r[1]-z[1];S[0]=V[0]-F[0];S[1]=V[1]-F[1];G=V[0]-r[0];x=Math.abs(K[0]);B=Math.abs(S[0]);x+B&&x+B>G&&(G/=x+B,z[0]=r[0]-G*K[0],z[1]=r[1]-G*K[1],F[0]=V[0]-G*S[0],F[1]=V[1]-G*S[1]);D&&(e[C]=1);c[C]=H(d(0,1,E,k[0],l[0],h[0],q[0]),k[1],l[1],h[1],q[1]);C++;break;case 1:D&&(e[C]=1);r=k[0];z=k[1];F=(q[1]-z)/(q[0]-
r);c[C]=F*E+(z-F*r);C++;break;case 2:D&&(e[C]=1);c[C]=b[p+2];C++;break;default:aa.K("Unknown keyframe interpolation mode: "+A)}}f+1==b[p+v+1]&&(J=A,p+=v)}}};a.apply=q;a.wW=function(a,b,c,d){d=d||0;var e=aa.Pd("uuid",c,Ga);if(e){G(a,d);if(B(a,b,e,d)){R(a,d);return}a.Ba[d]=null}da.error('Unsupported object: "'+a.name+'" or animation uuid: "'+c+'"')};a.Bfa=function(a,b){var c=aa.Pd("name",b,Ga)||aa.Pd("name",b+"_B4W_BAKED",Ga);if(c){if(0==c.J.type)return!1}else if(!(qa(a,b)||ea.pf(a)&&ja(a,b)))return!1;
return!0};a.Sba=function(a,b){for(var c=a.Ba,d=0;d<c.length;d++){var e=c[d];if(e&&h(e.Kk)==h(b))return d}return-1};a.Vaa=function(a,b){var c=a.Ba[b];return c&&c.Kk?h(c.Kk):null};a.remove=function(a){a.Ba.length=0;a=Ya.indexOf(a);-1!=a&&Ya.splice(a,1)};a.j3=function(a){for(var b=Ga.length-1;0<=b;b--)Ga[b].VV==a&&Ga.splice(b,1)};a.H9=function(a,b){if(!a.Ba.length)return q(a,null,b,0)?0:-1;for(var c=0;c<a.Ba.length;c++)if(!a.Ba[c])return q(a,null,b,c)?c:-1};a.Dea=function(a,b,c,d){a=a.A;a.Dq=(b-a.Gi)/
c;a.Cq=b;a.Ik&&a.Ik();a.Ik=d};a.lda=function(a,b,c,d){a=a.A;a.lo[1]=b;a.Dq=1/c;a.Cq=1;a.Ik&&a.Ik();a.Ik=d;a.Bn=null;a.jn=null;a.aj=!0};a.Fea=function(a,b,c){g(a.Ba,c,function(a){a.speed=b})};a.Tba=function(a,b){return a.Ba[b].speed};a.Yaa=function(a,b){return a.Ba[b].start};a.Waa=function(a,b){return a.Ba[b].length};a.Ja=function(){Ya.length=0;Ga.length=0};a.h_=function(a){var b=(a[0]||a[1]||a[2]).Xg.length,c=ka,d=ya,e=!!a[0];e||(a[0]={Xg:new Float32Array(b),num_channels:8});var f=!!a[1];f||(a[1]=
{Xg:new Float32Array(b),num_channels:8});var g=!!a[2];g||(a[2]={Xg:new Float32Array(b),num_channels:8});a[3]={Xg:new Float32Array(b),num_channels:8};for(var k=0;k<b;k++)d[0]=e?a[0].Xg[k]:0,d[1]=f?a[1].Xg[k]:0,d[2]=g?a[2].Xg[k]:0,aa.fl(d,c),a[0].Xg[k]=c[3],a[1].Xg[k]=c[0],a[2].Xg[k]=c[1],a[3].Xg[k]=c[2]};a.GN=C;a.K4=function(a,b){for(var c=7,d=0,e=0;e<Ga.length;e++){var f=Ga[e];if(f.name==b){d=f.J.type;break}}0==d&&(ja(a,b)?d=30:(e=qa(a,b))&&"EMITTER"==e.tB&&(d=50));for(e=0;8>e;e++)if(f=a.Ba[e]){if(f.type==
d)return e}else e<c&&(c=e);return c}};b4w.module.__armature=function(a,w){function t(a){a=a.A;for(var b=a.qs,c=a.ZA,e=0;e<b.length;e++){for(var g=b[e],k=c[e],h=0;h<k.length;h+=2)for(var m=k[h],l=k[h+1],u=0;4>u;u++)g.we[m+u]=a.we[l+u],g.uf[m+u]=a.uf[l+u],g.Ce[m+u]=a.Ce[l+u],g.yf[m+u]=a.yf[l+u];g.ug=a.ug}}function c(a,b,e,g){var h=a.ES,m=a.mj,y=a.hD,v=a.Xr;v?(v=v.hD,b?k.multiply(v,h,y):(b=r,k.invert(v,b),k.multiply(b,y,h))):b?k.copy(h,y):k.copy(y,h);h=x;k.invert(m,h);k.multiply(y,h,h);m=a.yj;e[4*m]=h[0];e[4*m+1]=h[1];e[4*m+2]=h[2];e[4*
m+3]=h[3];g[4*m]=h[4];g[4*m+1]=h[5];g[4*m+2]=h[6];g[4*m+3]=h[7];a=a.$y;for(m=0;m<a.length;m++)y=a[m],y.Cc||c(y,!0,e,g)}var b=w("__util"),k=w("__tsr"),h=w("__quat"),O=w("__mat4"),m=w("__vec3"),x=k.create(),r=k.create(),g=new Float32Array(4),e=new Float32Array(4),B=new Float32Array(4);a.Os=function(a,c){for(var e=a.data.bones,g=a.pose.bones,h={},v=0;v<g.length;v++){var y=g[v],D=y.bone,l=D.name,u=h[l]={yj:0,mT:-1,Xr:null,$y:[],uy:[],Cc:null,fD:k.create(),ES:k.create(),mj:k.create(),hJ:k.create(),hD:k.create(),
jD:k.create(),iD:k.create(),Gw:k.create(),gJ:k.create(),gD:!1,rS:new Float32Array(3)},l=new Float32Array(D.matrix_local),B=new Float32Array(16);O.invert(l,B);var y=new Float32Array(y.matrix_basis),r=u.rS;m.subtract(b.Qh(D.tail_local),b.Qh(D.head_local),r);b.A6(r,B,r);k.Vh(l,u.mj);k.Vh(y,u.Gw);k.copy(u.mj,u.hD);k.invert(u.mj,u.hJ)}for(v=0;v<e.length;v++){l=e[v].name;y=b.Pd("name",l,g);u=h[l];D=y.parent_recursive;u.uy.push(u);for(B=0;B<D.length;B++)y=D[B],y=y.name,y=h[y],u.uy.push(y);D.length?(y=D[0],
y=y.name,y=h[y],u.Xr=y,k.invert(y.mj,x),k.multiply(x,u.mj,u.fD),y.$y.push(u)):k.copy(u.mj,u.fD);u.yj=v;u.name=l;k.multiply(u.fD,u.Gw,u.ES)}c.A.eh=h};a.TF=function(a,b,c){var m=a.A,p=m.ug;b=m.eh[b];var v=b.yj;a=b.mj;var y=m.Ce,D=m.yf,l=m.we,m=m.uf,u=y[4*v+1],t=y[4*v+2],F=y[4*v+3],w=D[4*v+1],K=D[4*v+2],A=D[4*v+3];g[0]=(1-p)*y[4*v]+p*D[4*v];g[1]=(1-p)*u+p*w;g[2]=(1-p)*t+p*K;g[3]=(1-p)*F+p*A;e[0]=l[4*v];e[1]=l[4*v+1];e[2]=l[4*v+2];e[3]=l[4*v+3];B[0]=m[4*v];B[1]=m[4*v+1];B[2]=m[4*v+2];B[3]=m[4*v+3];h.slerp(e,
B,p,e);p=x;k.on(g,p);k.Gc(e,p);v=r;k.translate(a,b.rS,v);k.multiply(p,v,p);k.copy(p,c)};a.P3=function(a,b,e){var g=a.A;b=g.eh[b];var h=g.Ce,m=g.we;k.copy(e,b.hD);c(b,!1,h,m);g.ug=0;t(a)};a.m6=t;a.K5=c;a.b$=function(a,b){return b in a.A.eh}};b4w.module.__lights=function(a,w){function t(a){k.scale(a.color,a.el,a.ru)}var c=w("__tsr"),b=w("__util"),k=w("__vec3"),h=new Float32Array(3);a.w1=function(a,m){var x=a.data,r=m.xd={name:"",type:x.type,vQ:new Float32Array(3),direction:new Float32Array(3),color:new Float32Array(3),ru:new Float32Array(3),vZ:0,nJ:!1,ws:0,IC:0,nu:.1,mu:30,AN:!1,ZP:!1,KZ:!1,Kp:!0,Op:!0,el:1,distance:25,Eaa:"INVERSE_SQUARE"};r.name=m.name;r.Kp=x.use_diffuse;r.Op=x.use_specular;var g=c.la(m.A.D),g=b.Jc(g,b.ic,h);k.normalize(g,
g);r.direction.set(g);r.color[0]=x.color[0];r.color[1]=x.color[1];r.color[2]=x.color[2];r.el=r.vZ=x.energy;t(r);r.distance=x.distance;r.nJ=x.use_sphere;r.nu=x.clip_start;r.mu=x.clip_end;if("POINT"===r.type||"SPOT"===r.type)r.distance=x.distance;"SPOT"===r.type?(r.IC=x.spot_blend,r.ws=x.spot_size):"POINT"===r.type&&(r.ws=Math.PI/2);r.AN=x.b4w_generate_shadows;r.KZ=x.b4w_dynamic_intensity};a.h4=function(a,b){a.color[0]=b[0];a.color[1]=b[1];a.color[2]=b[2];t(a)};a.hea=function(a,b){a.IC=b};a.gea=function(a,
b){a.distance=b};a.iea=function(a,b){a.ws=b};a.i4=function(a,b){a.el=b;t(a)};a.W5=function(a){var h=a.xd;if(h){a=c.la(a.A.D);b.Jc(a,b.ic,h.direction);k.normalize(h.direction,h.direction);if("SUN"==h.type){a=Math.acos(k.dot(h.vQ,b.Mt));var x=Math.acos(k.dot(h.direction,b.Mt));h.ZP=Math.floor(a/.025)!=Math.floor(x/.025)?!0:!1}k.copy(h.direction,h.vQ)}}};b4w.module.__obj_util=function(a,w){function t(a){a={type:a,Le:0,D:P.xo(),HD:P.xo(),pivot:new Float32Array(3),Hc:new Float32Array(3),Nm:0,Om:0,BG:!1,yA:!1,vm:null,ek:0,An:!1,We:M.create(),use_panning:!1,zb:0,$s:1,Zs:1,at:1,dof_distance:0,dof_front_start:0,dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_bokeh:!1,pe:!1,dof_object:null,yc:null,ib:null,Vb:null,ie:null,he:null,Re:null,Mj:!0,dk:{cn:1,dn:1,en:0},Ke:-1,ue:-1,Kc:new Float32Array(4),Uh:0,Ph:0,ql:!1,Cv:new Float32Array(3),
VA:new Float32Array(3),nh:0,mh:Infinity,wl:0,xl:0,ef:!1,Wf:!1,ze:!1,vf:!1,Se:!1,xe:!1,Ad:!1,ri:"",Bf:!1,ff:!1,kd:!1,bi:!1,LO:!1,mn:!1,qB:!1,zd:!1,pB:!1,rB:!1,Qm:!1,Cr:!1,Vu:!1,Vp:0,Og:0,Pg:0,qg:0,pg:0,kg:0,yl:"",Jf:{MG:"",LG:"",uH:""},ko:!1,ty:new Float32Array(3),Kh:!1,Yt:!1,$t:"",Zt:!1,ug:0,sD:0,tD:0,$i:0,Lo:!1,Gd:!1,$f:!1,yh:[],Tm:!1,Jk:!1,Gi:1,Dq:0,Cq:1,Ik:null,aj:!1,lo:new Int8Array([-1,-1]),qs:[],ZA:[],oC:[],we:null,uf:null,Ce:null,yf:null,Bn:null,jn:null,eh:null,zj:null,Sv:null,Rt:null,Qt:null,
Mk:B.If(),Ca:B.If(),Ki:B.If(),Bc:B.Hy(),bf:B.Hy(),Lb:B.yu(),qm:B.yu(),Jd:B.Ny(),nL:B.Ny(),Xt:B.a1(),Vt:B.Z0(),Wt:B.$0(),fk:0};M.copy(N.ic,a.We);return a}function c(a){return{wb:a,xA:!1,da:[],dh:[],gk:[],Yk:null,AI:[],Av:0,hQ:!1,oa:[],RR:[]}}function b(a){if(!(a instanceof Object))return a;var c=null,e=null,g=null,k=null,h=null,m=null;a.xa&&(c=a.xa,a.xa=null);a.Ig&&(e=a.Ig,a.Ig=null);a.jg&&(g=a.jg,a.jg=null);a.Gb&&(k=a.Gb,a.Gb=null);a.Hb&&(h=a.Hb,a.Hb=null);a.ag&&(m=a.ag,a.ag=null);var y;y=a.constructor;
switch(y){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:y=new y(a);break;case Array:y=new y(a.length);for(var p=0;p<a.length;p++)y[p]=b(a[p]);break;case WebGLUniformLocation:case WebGLProgram:case WebGLShader:y=a;break;case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:y=null;break;case Function:y=a;break;default:for(p in y=new y,a)y[p]=b(a[p])}c&&(y.xa=c,a.xa=
c);e&&(y.Ig=e,a.Ig=e);g&&(y.jg=g,a.jg=g);k&&(y.Gb=k,a.Gb=k);h&&(y.Hb=h,a.Hb=h);m&&(y.ag=N.zm(),a.ag=m);return y}function k(a,b){B.Gj(b,a.Ca);B.Lq(a.Ca,a.D,a.Ki)}function h(a,b,c){a.Bc=B.BL(b,c);B.my(a.Bc,a.D,a.bf)}function O(a,b,c,e,g,k){a.Lb=B.uE(b,c,e,k);M.scale(a.Lb.ab,g[0],a.Lb.ab);M.scale(a.Lb.eb,g[1],a.Lb.eb);M.scale(a.Lb.fb,g[2],a.Lb.fb);B.AE(a.Lb,a.D,a.qm)}function m(a,b,c,e){a.Xt=B.qL(b,e);a.Vt=B.oL(c,e);a.Wt=B.pL(b,e)}function x(a,b,c,e,g,k){a.Jd=B.A3(k,b,c,e,g);B.BE(a.Jd,a.D,a.nL)}function r(a,
b,c){B.Lq(a.Db.Ff,b,c.Ff);a.In&&B.AE(a.Db.ig,b,c.ig);B.my(a.Db.Gf,b,c.Gf)}function g(a,b){for(var c=a.T,e=0;e<c.length;e++){var g=c[e];if(g.wb==b)return g}return null}function e(a){return a.hn?a.parent:a.parent?e(a.parent):null}var B=w("__boundings"),v=w("__config"),P=w("__tsr"),N=w("__util"),M=w("__vec3"),p=w("__vec4"),I=v.L;a.aE=Infinity;a.Rq=t;a.RE=function(a){var b=t(a.type);b.Le=a.Le;P.copy(a.D,b.D);P.copy(a.HD,b.HD);M.copy(a.pivot,b.pivot);M.copy(a.Hc,b.Hc);b.Nm=a.Nm;b.Om=a.Om;b.BG=a.BG;b.yA=
a.yA;a.vm&&(b.vm=M.clone(a.vm));b.ek=a.ek;b.An=a.An;M.copy(a.We,b.We);b.use_panning=a.use_panning;b.zb=a.zb;b.$s=a.$s;b.Zs=a.Zs;b.at=a.at;b.dof_distance=a.dof_distance;b.dof_front_start=a.dof_front_start;b.dof_front_end=a.dof_front_end;b.dof_rear_start=a.dof_rear_start;b.dof_rear_end=a.dof_rear_end;b.dof_power=a.dof_power;b.dof_bokeh_intensity=a.dof_bokeh_intensity;b.dof_bokeh=a.dof_bokeh;b.pe=a.pe;b.dof_object=a.dof_object;b.yc=N.Y(a.yc);b.ib=N.Y(a.ib);b.Vb=N.Y(a.Vb);b.ie=N.Y(a.ie);b.he=N.Y(a.he);
b.Re=a.Re;b.Mj=a.Mj;b.dk.cn=a.dk.cn;b.dk.dn=a.dk.dn;b.dk.en=a.dk.en;b.Ke=a.Ke;b.ue=a.ue;b.Kc=a.Kc;b.Uh=a.Uh;b.Ph=a.Ph;b.ql=a.ql;M.copy(a.Cv,b.Cv);M.copy(a.VA,b.VA);b.nh=a.nh;b.mh=a.mh;b.wl=a.wl;b.xl=a.xl;b.ef=a.ef;b.Wf=a.Wf;b.ze=a.ze;b.vf=a.vf;b.Se=a.Se;b.xe=a.xe;b.Ad=a.Ad;b.ri=a.ri;b.Bf=a.Bf;b.ff=a.ff;b.kd=a.kd;b.bi=a.bi;b.mn=a.mn;b.qB=a.qB;b.zd=a.zd;b.pB=a.pB;b.rB=a.rB;b.Qm=a.Qm;b.Cr=a.Cr;b.Vu=a.Vu;b.Vp=a.Vp;b.Og=a.Og;b.Pg=a.Pg;b.qg=a.qg;b.pg=a.pg;b.kg=a.kg;b.yl=a.yl;b.Jf=a.Jf;b.ko=a.ko;M.copy(a.ty,
b.ty);b.Kh=a.Kh;b.Yt=a.Yt;b.$t=a.$t;b.Zt=a.Zt;b.ug=a.ug;b.sD=a.sD;b.tD=a.tD;b.$i=a.$i;b.Lo=a.Lo;b.Gd=a.Gd;b.$f=a.$f;b.yh=N.Y(a.yh);b.Tm=a.Tm;b.Jk=a.Jk;b.Gi=a.Gi;b.Dq=a.Dq;b.Cq=a.Cq;b.lo.set(a.lo);b.qs=N.Y(a.qs);b.ZA=N.Y(a.ZA);b.oC=N.Y(a.oC);b.we=N.Y(a.we);b.uf=N.Y(a.uf);b.Ce=N.Y(a.Ce);b.yf=N.Y(a.yf);b.eh=N.Y(a.eh);b.zj=N.Y(a.zj);b.Sv=N.Y(a.Sv);b.Rt=N.Y(a.Rt);b.Qt=N.Y(a.Qt);B.Gj(a.Mk,b.Mk);B.Gj(a.Ca,b.Ca);B.Gj(a.Ki,b.Ki);B.xm(a.Bc,b.Bc);B.xm(a.bf,b.bf);B.Oq(a.Lb,b.Lb);B.Oq(a.qm,b.qm);B.WX(a.Vt,b.Vt);
B.YX(a.Xt,b.Xt);B.XX(a.Wt,b.Wt);b.fk=a.fk;return b};a.Au=function(a,b,c){c||(c=a);return{name:a,dd:N.Fz(),Sf:c,type:b,Ec:[],Rm:!0,Zn:null,oh:{Ur:[],Zo:[]},ea:!1,ov:!1,Mw:!1,cP:!1,A:null,Cc:null,ra:null,xd:null,by:null,anchor:null,ar:null,$A:null,Ty:null,T:[],Gd:[],cf:N.zm(),WE:N.zm(),Ba:[],cw:[],Qf:[],Bq:[],jj:null,Ep:[],parent:null,hn:!1,Lv:"",zD:null,yB:null,Rs:!1,Ub:"",Ey:"AUTO",wg:!1,pl:!1,bp:!1,xE:!1,O:null,S:null,Sh:null,Kg:null,dr:null,ML:null,BH:[],Td:{Ov:"NO_COLLISION",tk:!1,eT:!1,gi:0,jT:0,
iT:0,QM:0,SQ:0,O1:!1,P1:!1,Q1:!1,S1:!1,T1:!1,U1:!1,Ej:0,Dj:0,Fj:0,mJ:!1,Ay:"BOX",Lw:!1},kQ:{aD:0,tH:0,uh:0,NH:0},eo:0,Co:[],kH:!1,YP:!1,Dv:[]}};a.Oca=c;a.wu=function(a){return a instanceof Array?a.slice():a};a.xu=b;a.ea=function(a){return a.ea};a.$o=function(a){return"MESH"==a.type&&a.ea};a.Zx=function(a,b){a.T.push(c(b))};a.$g=function(a,b,c){var e=a.A;a=g(a,b);a.da.push(c);b=B.VO();r(c,e.D,b);a.dh.push(b)};a.RS=function(a,b){var c=a.A,e=Math.max(Math.abs(b.max_x),Math.abs(b.min_x)),g=Math.max(Math.abs(b.max_y),
Math.abs(b.min_y)),p=Math.max(Math.abs(b.max_z),Math.abs(b.min_z)),p=Math.sqrt(e*e+g*g+p*p),e=Math.sqrt(e*e+g*g),g=B.If();g.max_x=g.max_y=g.max_z=p;g.min_x=g.min_y=g.min_z=-p;k(c,g);h(c,p,[0,0,0]);O(c,[1,0,0],[0,1,0],[0,0,1],[p,p,p],[0,0,0]);a.ea?m(c,e,e,g):x(c,[1,0,0],[0,1,0],[0,0,1],[p,p,p],[0,0,0])};a.h6=function(a,b,c){var e=a.A,g=c.bs_rad,l=c.bc_rad,p=c.bs_cen,y=c.be_cen,A=c.caxis_x,v=c.caxis_y,n=c.caxis_z,f=c.be_ax,B=c.rbb.rbb_c;c=c.rbb.rbb_s;k(e,b);h(e,g,p);b=a.ea;O(e,b?A:[1,0,0],b?v:[0,1,
0],b?n:[0,0,1],f,y);a.ea?m(e,l,l,e.Ca):x(e,A,v,n,c,B)};a.i6=function(a,b,c){for(var e=a.A,g=b.max_x-b.min_x,l=b.max_y-b.min_y,p=b.max_z-b.min_z,y=(b.max_x+b.min_x)/2,A=(b.max_y+b.min_y)/2,v=(b.max_z+b.min_z)/2,n=y,f=v,B=Math.max(g,Math.max(l,p))/2,d=Math.max(g,p)/2,H=[y/(g?g:1),A/(l?l:1),v/(p?p:1)],G=.5,r=0;r<c.length;r++)for(var q=c[r],D=0;D<q.length;D+=3){var t=q[D],C=q[D+1],w=q[D+2],N=Math.sqrt((y-t)*(y-t)+(A-C)*(A-C)+(v-w)*(v-w));if(N>B)var M=y-B*(t-y)/N,P=A-B*(C-A)/N,N=v-B*(w-v)/N,y=(M+t)/2,
A=(P+C)/2,v=(N+w)/2,B=Math.sqrt((y-t)*(y-t)+(A-C)*(A-C)+(v-w)*(v-w));P=Math.sqrt((n-t)*(n-t)+(f-w)*(f-w));P>d&&(M=n-d*(t-n)/P,N=f-d*(w-f)/P,n=(M+t)/2,f=(N+w)/2,d=Math.sqrt((n-t)*(n-t)+(f-w)*(f-w)));t/=g?g:1;C/=l?l:1;w/=p?p:1;N=Math.sqrt((H[0]-t)*(H[0]-t)+(H[1]-C)*(H[1]-C)+(H[2]-w)*(H[2]-w));N>G&&(M=H[0]-G*(t-H[0])/N,P=H[1]-G*(C-H[1])/N,N=H[2]-G*(w-H[2])/N,H[0]=(M+t)/2,H[1]=(P+C)/2,H[2]=(N+w)/2,G=Math.sqrt((H[0]-t)*(H[0]-t)+(H[1]-C)*(H[1]-C)+(H[2]-w)*(H[2]-w)))}c=g?g*H[0]:b.max_x;n=l?l*H[1]:b.max_y;
H=p?p*H[2]:b.max_z;g*=G;l*=G;p*=G;k(e,b);h(e,B,[y,A,v]);O(e,[1,0,0],[0,1,0],[0,0,1],[g,l,p],[c,n,H]);a.ea?m(e,d,d,e.Ca):x(e,[(e.Ca.max_x-e.Ca.min_x)/2,0,0],[0,(e.Ca.max_y-e.Ca.min_y)/2,0],[0,0,(e.Ca.max_z-e.Ca.min_z)/2],[1,1,1],[(e.Ca.max_x+e.Ca.min_x)/2,(e.Ca.max_y+e.Ca.min_y)/2,(e.Ca.max_z+e.Ca.min_z)/2])};a.WS=r;a.Ida=function(a,b){for(var c=a.T,e=0;e<c.length;e++)if(c[e].wb==b){c.splice(e,1);break}};a.La=g;a.QS=function(a,b){for(var c=0;c<a.length;c++)p.copy(b,a[c].A.Kc)};a.dI=function(a,b,c){for(var e=
0;e<a.T.length;e++){var g=a.T[e];c&&g.wb!=c||(g.xA=b)}};a.XQ=function(a,b){a.da.splice(b,1);a.dh.splice(b,1)};a.Xz=function(a,b){for(var c=[],e=b?I.QP-1:I.QP,g=0;g<a.length;g++){var k=a[g];k.xd.AN&&c.length<e&&c.push(k)}return c.length?c:a[0]?[a[0]]:[]};a.k2=function(a,b){P.identity(b.D);b.vm=null;a.A=b};a.RL=function(a,b){if(b.b4w_enable_soft_particles&&0<b.b4w_particles_softness){var c=b.material-1,e=a.Ec;if(0<=c&&c<e.length&&("ADD"==e[c].ub||"ALPHA"==e[c].ub||"ALPHA_SORT"==e[c].ub))return!0}return!1};
a.EX=function(a){a=a.T;for(var b=0;b<a.length;b++)for(var c=a[b].da,e=0;e<c.length;e++)for(var g=c[e].qb.Oi,k=0;k<g.length;k++){var h=g[k];if("USE_MODEL_TSR_INVERSE"==h[0]&&"1"==h[1])return!0}return!1};a.vN=function(a,b){return a+"*"+b};a.eO=function(a){return a.hn?null:a.parent};a.Qj=e;a.VF=function(a,b){for(var c=[],g=0;g<b.length;g++){var k=b[g];e(k)==a&&c.push(k)}return c};a.bG=function(a){return a.A.Le};a.pf=function(a){return"MESH"===a.type};a.sr=function(a){return"ARMATURE"===a.type};a.Um=
function(a){return"SPEAKER"===a.type};a.mb=function(a){return"CAMERA"===a.type};a.vr=function(a){return"LAMP"===a.type};a.ur=function(a){return"EMPTY"===a.type};a.pv=function(a){return"LINE"===a.type};a.sl=function(a){return"WORLD"===a.type}};b4w.module.__particles=function(a,w){function t(){B.K("_rand() undefined")}function c(a,b){return{name:a,tB:b,time:0,DB:-1,Ts:!1,Pq:1,Ia:0,vb:0,$C:0,yv:0,LA:0,ce:0,gi:0,Mr:0,dA:0,hl:0,Lf:0,GD:0,size:0,Xx:0,Wx:0,Cy:0,By:new Float32Array(16),hB:!1,positions:null,Tv:null,VC:null,Aw:null,Vq:null,Gu:null,hh:null,sB:null,YC:0,ZC:0}}function b(a,b,c,g,k,h){var l=a.Vq,m=a.hh,y=a.time;a=a.DB;for(var v=0;v<l.length;v+=4){var n=l[v];if(y>a&&y>=n&&n>a||y<a&&(n>a||y>=n))for(n=0;8>n;n++)m[8*v+n]=g[n],M[n]=g[n];
else for(n=0;8>n;n++)M[n]=m[8*v+n];n=p;n[0]=b[3*v];n[1]=b[3*v+1];n[2]=b[3*v+2];e.Mc(n,M,n);k[3*v]=n[0];k[3*v+1]=n[1];k[3*v+2]=n[2];var f=x.Qo(c,v,N);x.UP(f,M,f);x.lk(h,f,v);for(n=1;4>n;n++)k[3*(v+n)]=k[3*v],k[3*(v+n)+1]=k[3*v+1],k[3*(v+n)+2]=k[3*v+2],x.lk(h,f,v+n)}}function k(a){a?(B.a5(a),t=function(){return B.g3()}):t=function(){return Math.random()}}var h=w("__config"),O=w("__batch"),m=w("__geometry"),x=w("__tbn"),r=w("__textures"),g=w("__time"),e=w("__tsr"),B=w("__util"),v=w("__vec3"),P=h.L,N=
x.create(),M=new Float32Array(8),p=new Float32Array(3),I=[];a.iM=function(a){var b=c(a.name,a.type);b.time=a.time;b.DB=a.DB;b.Ts=a.Ts;b.Pq=a.Pq;b.Ia=a.Ia;b.vb=a.vb;b.$C=a.$C;b.yv=a.yv;b.LA=a.LA;b.ce=a.ce;b.gi=a.gi;b.Mr=a.Mr;b.dA=a.dA;b.hl=a.hl;b.Lf=a.Lf;b.GD=a.GD;b.size=a.size;b.Xx=a.Xx;b.Wx=a.Wx;b.Cy=a.Cy;b.By.set(a.By);b.hB=a.hB;b.positions=B.Y(a.positions);b.Tv=B.Y(a.Tv);b.VC=B.Y(a.VC);b.Aw=B.Y(a.Aw);b.Vq=B.Y(a.Vq);b.Gu=B.Y(a.Gu);b.hh=B.Y(a.hh);b.sB=B.Y(a.sB);b.YC=a.YC;b.ZC=a.ZC;return b};a.update=
function(){for(var a=0;a<I.length;a++)for(var c=I[a],e=c.T,g=0;g<e.length;g++)for(var k=c,h=e[g].da,m=0;m<h.length;m++){var p=h[m],v=p.Ra;v&&v.Ts&&!p.Th&&(b(v,v.positions,v.VC,k.A.D,v.Tv,v.Aw),v.hB=!0)}};a.nH=function(a){a=a.T;for(var b=0;b<a.length;b++)for(var c=a[b].da,e=0;e<c.length;e++)if(c[e].Ra)return!0;return!1};a.tda=function(a,b){for(var c=a.T,e=0;e<c.length;e++)for(var g=c[e].da,k=0;k<g.length;k++){var h=g[k].Ra;if(h&&h.name==b)return!0}return!1};a.gQ=function(a){a=a.T;for(var b=0;b<a.length;b++)for(var c=
a[b].da,e=0;e<c.length;e++){var g=c[e].Ra;if(g&&"EMITTER"==g.tB)return!0}return!1};a.XW=function(a){return 0<a.particle_systems.length};a.WW=function(a){for(var b=0;b<a.particle_systems.length;b++)if("EMITTER"==a.particle_systems[b].settings.type)return!0;return!1};a.K0=function(a){for(var b=0;b<a.particle_systems.length;b++){var c=a.particle_systems[b].settings;if("HAIR"==c.type&&c.b4w_dynamic_grass)return!0}return!1};a.yY=function(a,b,e){var k=a.Ra=c(b.name,b.settings.type);k.Ia=b.settings.frame_start;
k.vb=b.settings.frame_end;k.$C=(k.vb-k.Ia)/g.fe();k.yv=b.settings.lifetime;k.LA=k.yv/g.fe();k.ce=b.settings.b4w_cyclic?1:0;k.gi=b.settings.mass;k.Mr=b.settings.normal_factor;k.dA=9.81*b.settings.effector_weights.gravity;k.hl=b.settings.b4w_fade_in/g.fe();k.Lf=b.settings.b4w_fade_out/g.fe();k.GD=b.settings.effector_weights.wind;k.Ts="WORLD"==b.settings.b4w_coordinate_system?!0:!1;var h,l,m;a.hv?(h=e.kr.size,l=e.kr.iv,30>l?(l=.5,m=.9):40>l?(l=.1,m=1):50>l?(l=0,m=.8):(l=0,m=.5)):(h=b.settings.particle_size,
m=l=1);k.size=h;k.Xx=l;k.Wx=m;e.Ch&&"BILLBOARD"==b.settings.render_type&&(O.Vf(a,"NODES",1),O.Vf(a,"PARTICLE_BATCH",1),a.Uj=!0);b=b.settings.texture_slots;b[0]&&b[0].use_map_size&&b[0].texture&&"BLEND"==b[0].texture.type&&b[0].texture.use_color_ramp&&P.Vx&&(b=b[0].texture,h=[],r.cX(b.color_ramp,r.lK,h),h=new Uint8Array(h.map(function(a){return B.pa(255*a,0,255)})),h=r.vM(h,r.lK),O.Ji(a,h,"u_color_ramp_tex",b.name),O.Vf(a,"USE_COLOR_RAMP",1));e=e.Ah;a=[-1,0,0,0,-1,0,0,0,-1,0,0,0,-1,0,0,0];if(e[0]&&
"STRAND"==e[0].texture_coords&&e[0].texture&&"BLEND"==e[0].texture.type&&e[0].texture.use_color_ramp){e=e[0].texture.color_ramp.elements;b=Math.min(4*e.length,a.length);for(h=0;h<b;h+=4)l=e[h/4],a[h]=l.position,a[h+1]=l.color[0],a[h+2]=l.color[1],a[h+3]=l.color[2];k.Cy=e.length}k.By.set(a)};a.z_=function(a,c,e,h){var l=a.Ra,p=h.D;h=e.settings.count;var u=e.settings.frame_start/g.fe(),y=e.settings.frame_end/g.fe(),A=e.settings.lifetime/g.fe(),E=e.settings.lifetime_random,n=e.settings.emit_from,f=e.settings.factor_random;
if(e.settings.use_rotations)var r=e.settings.angular_velocity_mode,d=e.settings.angular_velocity_factor;else r="NONE",d=0;var H=e.settings.b4w_randomize_emission,G=e.settings.b4w_cyclic;l.YC=e.settings.billboard_tilt;l.ZC=e.settings.billboard_tilt_random;k(e.seed);var w;c=m.kN(c,["a_position","a_tbn"],null);switch(n){case "VERT":var q=c.sa[0].a_position;w=c.sa[0].a_tbn;e=q.length/3;c=[];for(n=0;n<h;n++){var D=Math.round((e-1)*t());c.push(D);c.push(D);c.push(D);c.push(D)}e=[];for(n=0;n<c.length;n++)e.push(q[3*
c[n]]),e.push(q[3*c[n]+1]),e.push(q[3*c[n]+2]);q=new Float32Array(e);e=x.create(c.length);for(n=0;n<c.length;n++)D=x.Qo(w,c[n],N),x.lk(e,D,n);w=e;break;case "FACE":q=[];w=[];B.vA(0,w);e=m.PF(c,h,!1,w);B.vA(0,w);c=m.PF(c,h,!0,w);w=x.create(4*e.length);for(n=0;n<e.length;n++)q.push(e[n][0],e[n][1],e[n][2]),q.push(e[n][0],e[n][1],e[n][2]),q.push(e[n][0],e[n][1],e[n][2]),q.push(e[n][0],e[n][1],e[n][2]),x.lk(w,c[n],4*n),x.lk(w,c[n],4*n+1),x.lk(w,c[n],4*n+2),x.lk(w,c[n],4*n+3);q=new Float32Array(q);break;
case "VOLUME":B.K("Particle emission from volume is not supported");break;default:B.K("Wrong emit from option")}w=[q,w];q=w[0];w=w[1];l.positions=new Float32Array(q);l.VC=new Float32Array(w);l.Tv=new Float32Array(q.length);l.Aw=new Float32Array(w.length);c=[];y=(y-u)/h;for(e=0;e<h;e++)n=H?y*e+10*y*(.5-t()):y*e,G||(n+=u),c.push(n),c.push(n),c.push(n),c.push(n);u=new Float32Array(c);l.Vq=new Float32Array(u);l.Gu=new Float32Array(u);if(l.Ts){l.hh=new Float32Array(8*u.length);for(H=0;H<8*u.length;H++)for(G=
0;8>G;G++)l.hh[8*H+G]=p[G];b(l,q,w,p,q,w)}p=m.ei("EMITTER_PARTICLES");H=B.Ij();H.a_position=q;H.a_tbn=w;p.sa[0]=H;a.Lj=m.ex;a=[];for(H=0;H<h;H++)a.push(4*H,4*H+2,4*H+1,4*H,4*H+3,4*H+2);a=new Uint16Array(a);p.Ha=a;p.Ea.a_p_bb_vertex=m.tN(h);p.hb=q.length/3;a=[];E=A*E;for(H=0;H<h;H++)G=E*t(),a.push(A-G),a.push(A-G),a.push(A-G),a.push(A-G);A=p.Ea;E=[];for(H=0;H<h;H++)G=Math.random(),E.push(a[4*H],u[4*H],G),E.push(a[4*H+1],u[4*H+1],G),E.push(a[4*H+2],u[4*H+2],G),E.push(a[4*H+3],u[4*H+3],G);E=new Float32Array(E);
A.a_p_data=E;A=p.Ea;E=[];for(a=0;a<h;a++){u=[t()-.5,t()-.5,t()-.5];v.normalize(u,u);E.push(f*u[0]);E.push(f*u[1]);E.push(f*u[2]);switch(r){case "NONE":E.push(0);break;case "SPIN":case "VELOCITY":E.push(d);break;case "RAND":E.push(2*d*(t()-.5));break;default:B.K("Undefined velocity factor")}u=E.slice(-4);for(H=0;12>H;H++)E.push(u[H%4])}h=new Float32Array(E);A.a_p_vels=h;l.sB=new Float32Array(p.Ea.a_p_data);return p};a.w4=function(a,b,c){a=a.T;for(var e=0;e<a.length;e++)for(var g=a[e].da,k=0;k<g.length;k++){var h=
g[k].Ra;h&&h.name==b&&!g[k].Th&&(h.DB=h.time,h.time=c)}};a.Y2=function(a){for(var b=a.hb,c=a.sa[0].a_position,e=[],g=[],k=0;k<b;k++)g.push(c[3*k]),e.push(c[3*k+1]),g.push(c[3*k+2]);e=new Float32Array(e);g=new Float32Array(g);a.Ea.a_lf_dist=e;a.Ea.a_lf_bb_vertex=g;return a};a.Cea=function(a,b,c){a=a.T;for(var e=0;e<a.length;e++)for(var g=a[e].da,k=0;k<g.length;k++){var h=g[k].Ra;h&&h.name==b&&(h.size=c)}};a.oea=function(a,b,c){a=a.T;for(var e=0;e<a.length;e++)for(var g=a[e].da,k=0;k<g.length;k++){var h=
g[k].Ra;h&&h.name==b&&(h.Mr=c)}};a.wba=function(a,b){for(var c=a.T,e=0;e<c.length;e++)for(var g=c[e].da,k=0;k<g.length;k++){var h=g[k].Ra;if(h&&h.name==b)return h.Mr}return 0};a.Z3=function(a,b,c){a=a.T;for(var e=0;e<a.length;e++)for(var g=a[e].da,k=0;k<g.length;k++){var h=g[k],l=h.Ra;if(l&&l.name==b){l.Pq=c;var p=l.Vq;if(1==c)var v=p;else if(0==c)for(var v=l.Gu,n=0;n<v.length;n+=4)v[n]=1E4,v[n+1]=v[n],v[n+2]=v[n],v[n+3]=v[n];else for(var f=4/c,v=l.Gu,y=0,n=0;n<v.length;n+=4)n>=y?(v[n]=p[n],y+=f):
v[n]=1E4,v[n+1]=v[n],v[n+2]=v[n],v[n+3]=v[n];h=h.Pa;if(h.cd.a_p_data){l=l.sB;for(n=0;n<l.length;n+=3)l[n+1]=v[Math.round(n/3)];m.M5(h,"a_p_data",3,l)}}}};a.p6=function(a,b,c){a=a.T;for(var e=0;e<a.length;e++)for(var g=a[e].da,k=0;k<g.length;k++){var h=g[k].Ra;if(h&&h.Ts)for(var l=0;l<8*h.Vq.length;l++)h.hh[8*l]=b[0],h.hh[8*l+1]=b[1],h.hh[8*l+2]=b[2],h.hh[8*l+3]=b[3],h.hh[8*l+4]=c[0],h.hh[8*l+5]=c[1],h.hh[8*l+6]=c[2],h.hh[8*l+7]=c[3]}};a.g6=function(a,b,c){a.Ea.a_tbn=x.create(4*c);x.identity(a.Ea.a_tbn);
if(b.Mv){for(var e=[],g=0;g<c;g++)e.push(g,g,g,g);a.Ea[b.Mv.name]=new Float32Array(e)}};a.f6=function(a){-1==I.indexOf(a)&&I.push(a)};a.l3=function(a){a=I.indexOf(a);-1!=a&&I.splice(a,1)};a.Ja=function(){I.length=0}};b4w.module.__physics=function(a,w){function t(a,b){for(var c=a.cf,d=0;d<c.length;d++)c[d].Td.Lw&&b.push(c[d]),t(c[d],b)}function c(a,b,c){for(var d=a.Pc.Ua,e=0;e<d.length;e++)for(var f=d[e].O,g=0;g<f.lg.length;g++){var k=f.lg[g];"ANY"!=k.Ub&&c!=k.Ub||y(k,a,b)}}function b(a,b,c){if(d.xA(a))switch(b){case d.TT:var e=k(a);e.Pc.wT=!0;d.ya(a,d.sV,Date.now()-performance.now(),la.max_fps,la.CE?ba.qN:0);break;case d.UT:G.Qd("URANIUM:",c.slice(1));break;case d.PT:G.error(c);break;case d.QT:X.sz.apply(this,
c.slice(1));break;case d.PJ:if(a=h(c.na)){var f=a;a=c.trans;e=c.quat;b=c.ak;var g=c.vj,l=f.O;l.Sy=c.time;c=C.ge(f.A.D);C.ti(a,c,e,l.nF);ia.copy(b,l.ak);ia.copy(g,l.vj)}break;case d.NJ:(a=h(c.HE))&&C.ti(c.trans,1,c.quat,a.S.Vv[c.IH]);break;case d.RT:if(e=h(c[1]))a=c[4],e=e.Sh.ly[c[2]],qa.ke(e,c[3]),qa.Ol(e,a),qa.W(e);break;case d.XT:if(a=h(c[1]))a.S.speed=c[2];break;case d.LJ:e=k(a);O(e,c.mo,c.no,c.result,null,null,0);break;case d.MJ:e=k(a);O(e,c.mo,c.no,c.result,c.so,c.coll_norm,c.coll_dist);break;
case d.NT:if(a=h(c[1]))a=a.O,a.ro&&a.ro(c[2]);break;case d.$D:case d.OJ:e=k(a);if(a=e.Pc.kn[c.id])e=h(c.Kq),b==d.$D?(b=a.callback,b(a.id,c.hit_fract,e,c.hit_time)):(b=c.hit_fract,g=c.hit_time,l=c.hit_pos,f=a.callback,l?f(a.id,b,e,g,l,c.hit_norm):f(a.id,b,e,g));break;case d.WT:u(c.id);break;case d.VT:a=ca.indexOf(a);G.log("Physics #"+a+" Ping: OUT "+(c[2]-c[1]).toFixed(3)+" ms, IN "+(performance.now()-c[2]).toFixed(3)+" ms, ALL "+(performance.now()-c[1]).toFixed(3)+" ms");break;case d.ST:xa=c[1];break;
case d.OT:a=ca.indexOf(a);G.log("Worker: #"+String(a));G.log(c[1]);break;default:G.error("Wrong message: "+b)}}function k(a){for(var b=0;b<ca.length;b++)if(ca[b]==a)return V[b]}function h(a){return Ja[a]||null}function O(a,b,c,d,e,f,g){a=a.Pc.Ua;for(var k=0;k<a.length;k++)for(var l=a[k].O,q=0;q<l.lg.length;q++){for(var n=l.lg[q],C=n.gn,p=!1,J=0;J<C.length;J++){var v=C[J];if(v[0]===b&&v[1]===c){n.Kv[J]=d;p=!0;break}}p&&(C=m(n),e&&n.yE!=b&&(p=e,J=f,v=g,p[0]+=J[0]*v,p[1]+=J[1]*v,p[2]+=J[2]*v,J[0]*=-1,
J[1]*=-1,J[2]*=-1),n.callback(C,C?n.yE==b?h(c):h(b):null,e,f,g))}}function m(a){a=a.Kv;for(var b=!1,c=0;c<a.length;c++)b=b||a[c];return b}function x(){Z.body++;return Z.body}function r(a){var b=oa.indexOf(a);return-1==b?(oa.push(a),oa.length-1):b}function g(a,b){return{na:a,type:b,gi:0,AA:!1,qn:!0,wg:!1,pl:!1,l1:!1,Dy:null,Ub:"",qu:0,t$:{},lg:[],ro:null,Sy:0,nF:new Float32Array([0,0,0,1,0,0,0,1]),ak:new Float32Array(3),vj:new Float32Array(3),ry:new Float32Array(3),eu:new Float32Array(4),Ev:null}}
function e(a,b){switch(a){case "BOX":var c=b.Ca;break;case "CYLINDER":c=b.Xt;break;case "CONE":c=b.Wt;break;case "SPHERE":c=b.Bc;break;case "CAPSULE":c=b.Vt}return c}function B(a){if(!a)return null;var b={};"number"===typeof a.min_x&&(b.min_x=a.min_x);"number"===typeof a.min_y&&(b.min_y=a.min_y);"number"===typeof a.min_z&&(b.min_z=a.min_z);"number"===typeof a.max_x&&(b.max_x=a.max_x);"number"===typeof a.max_y&&(b.max_y=a.max_y);"number"===typeof a.max_z&&(b.max_z=a.max_z);"object"===typeof a.V&&(b.center=
a.V);"number"===typeof a.pb&&(b.radius=a.pb);"number"===typeof a.height&&(b.height=a.height);return b}function v(a,b,c,e,f){var g=C.X(a.A.D),k=C.invert(b.A.D,za),h=new Float32Array(3);C.Mc(g,k,h);switch(b.S.type){case 10:b=b.Kg;a=a.A.Ca;d.ya(f,d.WU,c,h,b.k5,b.ZH,(a.max_z-a.min_z)/2,e);break;case 20:d.ya(f,d.VU,c,h,a.xE)}}function P(a){return a.O&&a.O.Dy}function N(a,b,c,e,f,g,k,h,l,q){var n;Z.Cc++;n=Z.Cc.toString(16);var m=b.O.na;d.ya(M(m),d.cV,n,a,h,m,c,e,f.O.na,g,k,l,q);b.O.Dy=n}function M(a){for(var b=
0;b<V.length;b++)for(var c=V[b].Pc.Ua,d=0;d<c.length;d++)if(c[d].O.na==a)return ca[b];return null}function p(a){var b=a.O;if(b=b?0===b.gi?!0:!0===b.AA?!0:!1===b.qn?!0:"RIGID_BODY"!==b.type&&"DYNAMIC"!==b.type?!0:!1:!1)var b=C.Wb(a.A.D,fa),c=C.Fb(a.A.D,aa),b=b[0]!=a.O.ry[0]||b[1]!=a.O.ry[1]||b[2]!=a.O.ry[2]||c[0]!=a.O.eu[0]||c[1]!=a.O.eu[1]||c[2]!=a.O.eu[2]||c[3]!=a.O.eu[3];if(b){var b=a.O,e=a.A,c=d.aO(d.Et);c.na=b.na;var f=C.Wb(e.D,c.trans),e=C.Fb(e.D,c.quat);ia.copy(f,b.ry);R.copy(e,b.eu);"DYNAMIC"==
b.type&&R.identity(c.quat);d.ya(M(b.na),d.Et)}a=a.cf;for(b=0;b<a.length;b++)p(a[b])}function I(a,b,c,d,e){e=e||new Float32Array(3);a=C.la(a.A.D);e[0]=b;e[1]=c;e[2]=d;ia.transformQuat(e,a,e)}function y(a,b,c){var e=a.gn,f=a.Kv,g=a.yE,k=[],h=a.Ub;k||pa.K("At least one destination required");for(var l=0;l<b.Pc.Ua.length;l++){var q=b.Pc.Ua[l];if("ANY"==h||q.O.Ub==h&&"NAVMESH"!=q.O.type)q=q.O.na,k&&-1==k.indexOf(q)&&k.push(q)}for(b=0;b<k.length;b++)h=k[b],g<h&&!D(e,g,h)?(e.push([g,h]),f.push(!1)):g>h&&
!D(e,h,g)&&(e.push([h,g]),f.push(!1));d.ya(c,d.UU,g);d.ya(c,d.bV,e,a.Bj)}function D(a,b,c){for(var d=0;d<a.length;d++)if(a[d][0]==b&&a[d][1]==c)return!0;return!1}function l(a){a.O&&a.O.ro&&(a=a.O,d.ya(M(a.na),d.oV,a.na),a.ro=null)}function u(a){var b=F(a),c=L(a).Pc;c.kn[a]&&(delete c.kn[a],c.MH.splice(c.MH.indexOf,1),d.ya(b,d.xV,a))}function L(a){for(var b=0;b<V.length;b++){var c=V[b];if(c.Pc.kn[a])return c}return null}function F(a){for(var b=0;b<V.length;b++)if(V[b].Pc.kn[a])return ca[b];return null}
function U(a,b,c){if(b.Fs){a=a.O.na;var e=b.$q*b.Uu,f=b.cu*b.du,g=-b.Ds*b.Es*2*Math.PI/b.xw;b.nv&&(g*=-1);switch(b.type){case 10:d.ya(c,d.MV,a,e,f,g);break;case 20:d.ya(c,d.LV,a,e,f,g)}}}function K(a){return a.wg&&"CHASSIS"==a.Kg.Cg}function A(a){return a.wg&&"HULL"==a.Kg.Cg}function E(a){return"NAVMESH"==a.Td.Ov}function n(a){return a.bp&&"MAIN_BODY"==a.dr.Cg}var f=w("__config"),X=w("__debug"),d=w("__ipc"),H=w("__obj_util"),G=w("__print"),R=w("__quat"),q=w("__scenes"),ja=w("__subscene"),qa=w("__transform"),
C=w("__tsr"),pa=w("__util"),ia=w("__vec3"),ma=w("__version"),ea=w("__navmesh"),la=f.O,ba=f.L,da=f.Je,xa=0,ca=[],V=[],Ja={},S=[],oa=["ANY"],Z={body:0,Cc:0,GQ:0},fa=new Float32Array(3),aa=new Float32Array(4),za=C.create(),ha=C.create();a.e1=function(a){a.Pc={wT:!1,Ua:[],kn:{},MH:[]};var c=la.Kw;da.prevent_caching&&(c+="?v="+ma.get_build_version());G.log("%cLOAD PHYSICS","color: #0a0",la.Pp?"Using Separate Worker Thread,":"Using Same Thread,","Max FPS: "+la.max_fps);G.log("%cPHYSICS PATH","color: #0a0",
c);var e=d.lZ(c,!la.Pp);d.HW(e,b);ca.push(e);V.push(a);la.ping&&setInterval(function(){d.ya(e,d.uV,performance.now())},1E3)};a.HX=function(a){return a.Pc?a.Pc.wT:!0};a.Ja=function(){for(var a=0;a<ca.length;a++)d.terminate(ca[a]);ca.length=0;V.length=0;Ja={};S.length=0;oa=["ANY"];for(var b in Z)Z[b]=0};a.pm=function(a,b){if(b.Pc){var f;a:{for(var k=0;k<V.length;k++)if(V[k]==b){f=ca[k];break a}f=void 0}var h=[];a.Td.Lw&&t(a,h);var l=b.Pc.Ua;if(K(a)||A(a)||a.pl||n(a)||a.Rs){var q=E(a),m;if(q){var p=
x(),J=g(p,"NAVMESH"),u=H.La(a,b).da;J.Ev=null;for(var y=0;y<u.length;y++){var F=u[y];if("PHYSICS"==F.type){J.Ev=ea.q2(F.Pa);break}}m=J}else{var w=f,D=a.A,L=a.Td,z=L.Ov,ja=x();if("CAMERA"==a.type)var M=L.mJ?L.Ay:"BOX",X=e(M,D),qa=.5,ia=0;else if("EMPTY"==a.type)M="EMPTY",X=null,ia=qa=0;else{var M=L.mJ?L.Ay:"BOX",X=e(M,D),Z=C.ge(D.D);if(1!=Z){var I=X;switch(M){case "BOX":I.min_x*=Z;I.max_x*=Z;I.min_y*=Z;I.max_y*=Z;I.min_z*=Z;I.max_z*=Z;break;case "CYLINDER":case "CONE":case "CAPSULE":I.height*=Z;I.pb*=
Z;break;case "SPHERE":I.pb*=Z}}qa=D.Uh;ia=D.Ph}var la=C.X(D.D),ra=C.la(D.D),fa=L.tk,O=L.eT,oa=L.gi,ma=L.jT,ba=L.iT,da=L.QM,T=L.SQ,xa=a.Ub,Wa=r(xa),Xa=L.Ej,Ma=L.Dj,ab=L.Fj,ub=D.Bc.pb,rb=B(X),Ca=a.Ey,Ua;var Xb=M;if(h.length){var $a=[],Fb={};Fb.quat=new Float32Array([0,0,0,1]);Fb.trans=new Float32Array(3);Fb.worker_bounding=rb;Fb.bounding_type=Xb;$a.push(Fb);var nb=C.invert(D.D,za),sb=aa,ic=C.la(D.D);R.invert(ic,sb);for(var jc=0;jc<h.length;jc++){var ib={},fb=h[jc],Ta=fb.Td.Ay,Ib=new Float32Array(4),
Yb=new Float32Array(3),Cc=C.X(fb.A.D),kc=C.la(fb.A.D);C.Mc(Cc,nb,Yb);R.multiply(sb,kc,Ib);ib.trans=Yb;ib.quat=Ib;ib.bounding_type=Ta;ib.worker_bounding=B(e(Ta,fb.A));$a.push(ib)}Ua=$a}else Ua=[];d.ya(w,d.ZU,ja,la,ra,z,fa,O,oa,ma,ba,da,T,Wa,Xa,Ma,ab,M,rb,ub,qa,ia,Ua,Ca);Ja[ja]=a;S.push(a);var Mb=g(ja,"BOUNDING");Mb.type=z;Mb.gi=oa;Mb.AA=fa;Mb.Ub=xa;Mb.qu=Wa;m=Mb}var vb=m;a.O=vb;var Za={Fa:null,O:vb};q||(l.push(Za),c(b,f,vb.Ub))}else for(var Ab=H.La(a,b).da,Sb=0;Sb<Ab.length;Sb++){var Nb=Ab[Sb],Dc;
if(Dc="PHYSICS"==Nb.type){var sc;a:{for(var tc=b.Pc.Ua,uc=0;uc<tc.length;uc++){var lc=tc[uc].Fa;if(lc&&lc.id==Nb.id){sc=!0;break a}}sc=!1}Dc=!sc}if(Dc)if(Nb.Be.hb)if(Nb.nj&&b.J.Yd){var wb=Nb,kd=b,Mc=f,bb=kd.J.Yd;d.ya(Mc,d.hV,bb.vk);if(wb.L6){var Bb={};Bb.dst_noise_scale0=wb.dst_noise_scale0;Bb.dst_noise_scale1=wb.dst_noise_scale1;Bb.dst_noise_freq0=wb.dst_noise_freq0;Bb.dst_noise_freq1=wb.dst_noise_freq1;Bb.dir_min_shore_fac=wb.dir_min_shore_fac;Bb.dir_freq=wb.dir_freq;Bb.dir_noise_scale=wb.dir_noise_scale;
Bb.dir_noise_freq=wb.dir_noise_freq;Bb.dir_min_noise_fac=wb.dir_min_noise_fac;Bb.dst_min_fac=wb.dst_min_fac;Bb.waves_hor_fac=wb.waves_hor_fac;var gb=bb.waves_height,Tb=bb.waves_length;bb.pn?d.ya(Mc,d.iK,Bb,bb.ps[0],bb.ps[1],bb.os[0],bb.os[1],bb.WG,gb,Tb,bb.CI,kd.J.BI):d.ya(Mc,d.iK,Bb,0,0,0,0,0,gb,Tb,0,null)}}else{var lb;if(Nb.tk){var db=a,Ec=Nb,bc=f,dd=x(),Nc=Ec.Be,Xc=Nc.sa[0].a_position,ld=Nc.Ha||null,md=Ec.Ub,ed=r(md),Fc=Ec.Ej,Zb=Ec.Dj,fd=Ec.Fj,Yc=C.X(db.A.D);d.ya(bc,d.eV,dd,Xc,ld,Yc,ed,Fc,Zb,fd);
var gd=g(dd,"STATIC_MESH");gd.AA=!0;gd.Ub=md;gd.qu=ed;lb=gd}else{var Cb=a,Gb=Nb,xb=f,ob=x(),Jb=Gb.Be,nd=Jb.sa[0].a_position,Oc=Jb.Ha||null,jb=C.X(Cb.A.D),Pc=Gb.Uh,cc=Gb.Ph,Gc=Gb.Ub,dc=r(Gc);d.ya(xb,d.gV,ob,nd,Oc,jb,Pc,cc,dc,Gb.Ej,Gb.Dj,Gb.Fj);var Zc=g(ob,"STATIC_MESH");Zc.Ub=Gc;Zc.qu=dc;lb=Zc}vb=lb;a.O=vb;Za={Fa:Nb,O:vb};l.push(Za);c(b,f,vb.Ub)}else G.error("Object "+a.name+" has collision material with no assigned vertices")}if(K(a)||A(a)){var Ub=f,Ob=a.O.na;K(a)?(a.S.type=10,d.ya(Ub,d.$U,Ob,a.S.NI,
a.S.QI,a.S.OI,a.S.vJ,a.S.XG)):A(a)&&(a.S.type=20,d.ya(Ub,d.YU,Ob,a.S.Ho,a.S.Sp,a.S.Tp));if(a.S.yp){var Db=a.S.yp;switch(a.S.type){case 10:v(Db[0],a,Ob,!0,Ub);v(Db[1],a,Ob,!0,Ub);v(Db[2],a,Ob,!1,Ub);v(Db[3],a,Ob,!1,Ub);break;case 20:for(var vc=0;vc<Db.length;vc++)v(Db[vc],a,Ob,!1,Ub)}}U(a,a.S,f)}else if(a.pl){var mb=f,Hc=a.A,mc=a.O,Qc=Hc.Ca.max_z-Hc.Ca.min_z,Hb=mc.na,Kb=a.ML,wc=Kb.J6,nc=Kb.E3,tb=Kb.d5,Pb=Kb.u1,yb=Kb.M6,Eb=pa.zZ(a);d.ya(mb,d.aV,Hb,Eb,Qc,wc,nc,tb,Pb,yb);mc.pl=!0}else if(n(a)){var Sa=
f,oc=a.O.na;d.ya(Sa,d.dV,oc,a.Sh.Ho,a.Sh.Sp,a.Sh.Tp);if(a.Sh.ly)for(var Qb=a.Sh.ly,ec=0;ec<Qb.length;ec++){var eb=Qb[ec],Vb=C.X(eb.A.D),xc=C.invert(a.A.D,za),kb=new Float32Array(3);C.Mc(Vb,xc,kb);d.ya(Sa,d.XU,oc,kb,eb.xE)}a.O.l1=!0}for(Sb=0;Sb<S.length;Sb++){var rd=S[Sb];if(rd.O){var Ic=rd;if(!P(Ic))for(var fc=0;fc<Ic.BH.length;fc++){var Rb=Ic.BH[fc],Rc=Rb.target,Sc=Rb.M2;if(Rc.O){var Jc=new Float32Array([Rb.N2,Rb.O2,Rb.P2]),Kc=pa.fl(new Float32Array([Rb.ab,Rb.eb,Rb.fb]),new Float32Array(4));"HINGE"==
Sc&&R.rotateY(Kc,Math.PI/2,Kc);var yc=C.identity(za),yc=C.Bd(Jc,yc),yc=C.Gc(Kc,yc),Bd=C.multiply(Ic.A.D,yc,za),pb=C.invert(Rc.A.D,ha),Tc=C.multiply(pb,Bd,pb),$c=C.X(Tc),sd=C.la(Tc),La=Rb,hb={};hb.use_limit_x=La.w6;hb.use_limit_y=La.x6;hb.use_limit_z=La.y6;hb.use_angular_limit_x=La.s6;hb.use_angular_limit_y=La.t6;hb.use_angular_limit_z=La.u6;hb.limit_max_x=La.F1;hb.limit_min_x=La.I1;hb.limit_max_y=La.G1;hb.limit_min_y=La.J1;hb.limit_max_z=La.H1;hb.limit_min_z=La.K1;hb.limit_angle_max_x=La.z1;hb.limit_angle_min_x=
La.C1;hb.limit_angle_max_y=La.A1;hb.limit_angle_min_y=La.D1;hb.limit_angle_max_z=La.B1;hb.limit_angle_min_z=La.E1;N(Sc,Ic,Jc,Kc,Rc,$c,sd,hb,null,null)}}}}}};a.k_=h;a.update=function(a,b){for(var c=0;c<ca.length;c++){var e=ca[c],f=a;e&&d.iP(e)&&d.ya(e,d.NV,f,b);for(var g=0;g<S.length;g++){var k=S[g],h=k.O;if(h.qn&&h.Sy){var l=d.iP(e)?f-h.Sy:performance.now()/1E3-h.Sy,l=Math.min(l,10/la.max_fps),l=l-1/la.max_fps;ba.r2&&(l=0);var n=za;C.g1(h.nF,l,h.ak,h.vj,za);qa.mk(k,n);qa.W(k);p(k);if(k.S)for(var h=
k,l=h.S.yp,n=h.A.D,m=za,v=0;v<l.length;v++){var A=l[v];C.multiply(n,h.S.Vv[v],m);qa.mk(A,m);qa.W(A)}k.S&&k.S.Fs&&(m=k,l=m.S,h=l.Fs)&&(v=m.S.eS,C.multiply(m.A.D,m.S.fS,h.A.D),n=fa,C.Vd(v,m.A.D,n),m=aa,R.setAxisAngle(n,-l.Ds*l.Es*2*Math.PI,m),l=C.la(h.A.D),R.multiply(m,l,l),qa.W(h));k.S&&k.S.GI&&(m=k,l=m.S,h=l.GI)&&(v=m.S.$R,C.multiply(m.A.D,m.S.aS,h.A.D),n=fa,C.Vd(v,m.A.D,n),m=aa,v=Math.abs(l.speed)*l.ww,v>l.Gr&&(v=l.Gr),R.setAxisAngle(n,-v,m),l=C.la(h.A.D),R.multiply(m,l,l),R.normalize(l,l),qa.W(h));
k.S&&k.S.RI&&(n=k,h=n.S,k=h.RI)&&(m=n.S.pS,C.multiply(n.A.D,n.S.qS,k.A.D),l=fa,C.Vd(m,n.A.D,l),n=aa,R.setAxisAngle(l,-Math.abs(h.$q)*h.Hu,n),h=C.la(k.A.D),R.multiply(n,h,h),R.normalize(h,h),qa.W(k))}}d.W2(e);e=V[c];(f=e.J.Yd)&&0<f.waves_height&&(e=q.dc(e,ja.Nb),f=ia.length(e.pj)||1,d.ya(ca[c],d.KV,e.time*f))}};a.G_=function(){return V[0]};a.pause=function(){for(var a=0;a<ca.length;a++)d.ya(ca[a],d.tV)};a.resume=function(){for(var a=0;a<ca.length;a++)d.ya(ca[a],d.yV)};a.eN=function(a){(a=a.O)||pa.K("No object physics");
if(!a.qn){var b=a.na,c=M(b);a.qn=!0;d.ya(c,d.rV,b)}};a.yF=function(a){(a=a.O)||pa.K("No object physics");if(a.qn){var b=a.na,c=M(b);a.qn=!1;d.ya(c,d.qV,b)}};a.RB=function(a){return!!a.Pc};a.Aa=function(a){return!!a.O};a.HO=function(a){return(a=a.O)&&a.qn&&("RIGID_BODY"==a.type||"DYNAMIC"==a.type)&&0<a.gi&&0==a.AA?!0:!1};a.qG=function(a){return(a=a.O)&&a.qn?!0:!1};a.lI=function(a,b,c,e){a=a.O.na;d.ya(M(a),d.JV,a,b,c,e)};a.J0=P;a.XK=N;a.eM=function(a){a=a.O;d.ya(M(a.na),d.wV,a.Dy);a.Dy=null};a.zQ=function(b,
c,d,e,f,g){c=C.ti(c,1,d,za);f=C.ti(f,1,g,ha);C.invert(c,c);C.multiply(f,c,c);qa.Km(e,f);C.multiply(f,c,c);qa.mk(b,c);qa.W(b);e=C.X(b.A.D);f=C.la(b.A.D);a.dC(b,e,f)};a.dC=function(a,b,c){var e=a.O,f=d.aO(d.Et),g=C.Wb(a.A.D,f.trans);a=C.Fb(a.A.D,f.quat);C.ti(g,1,a,e.nF);f.na=e.na;ia.copy(b,f.trans);R.copy(c,f.quat);d.ya(M(e.na),d.Et)};a.$=p;a.bL=function(a,b,c,e){var f=fa;I(a,b,c,e,f);a=a.O.na;b=Math.abs(0);c=Math.abs(0);e=Math.abs(0);var g=Math.abs(f[0]),k=Math.abs(f[1]),h=Math.abs(f[2]);f[0]=g?f[0]/
g*Math.max(g,b):0;f[1]=k?f[1]/k*Math.max(k,c):0;f[2]=h?f[2]/h*Math.max(h,e):0;d.ya(M(a),d.kK,a,f[0],f[1],f[2])};a.cL=function(a,b,c,e){a=a.O.na;d.ya(M(a),d.kK,a,b,c,e)};a.rE=function(a,b,c,e,f){var g=fa;f?(g[0]=b,g[1]=c,g[2]=e):I(a,b,c,e,g);a=a.O.na;d.ya(M(a),d.iV,a,g[0],g[1],g[2])};a.aL=function(a,b,c,e){var f=fa;I(a,b,c,e,f);a=a.O.na;d.ya(M(a),d.kV,a,f[0],f[1],f[2])};a.$Q=function(a,b,c,e){a=a.O.na;d.ya(M(a),d.zV,a,b,c,e)};a.hI=function(a,b,c){a=a.O.na;d.ya(M(a),d.CV,a,b,c)};a.VB=function(a,b){var c=
a.O.na;d.ya(M(c),d.DV,c,b)};a.gR=function(a,b){var c=a.O.na;d.ya(M(c),d.IV,c,b)};a.fR=function(a,b){var c=a.O.na;d.ya(M(c),d.FV,c,b)};a.cR=function(a,b){var c=a.O.na;d.ya(M(c),d.AV,c,b)};a.KL=function(a){a=a.O.na;d.ya(M(a),d.mV,a)};a.LL=function(a,b,c){a=a.O.na;d.ya(M(a),d.nV,a,b,c)};a.dR=function(a,b,c){a=a.O.na;d.ya(M(a),d.EV,a,b,c)};a.WB=function(a,b){var c=a.O.na;d.ya(M(c),d.BV,c,b)};a.eR=function(a,b){var c=a.O.na;d.ya(M(c),d.HV,c,b)};a.XB=function(a,b){var c=a.O.na;d.ya(M(c),d.GV,c,b)};a.pE=
function(a,b,c,d){var e=a.O;if(!e.Ev){for(var f=e.na,g=0;g<e.lg.length;g++)if(a=e.lg[g],a.Ub==b&&a.callback==c)return;a={yE:f,Bj:d||!1,Ub:b,callback:c,gn:[],Kv:[]};e.lg.push(a);b=M(f);y(a,k(b),b)}};a.OH=function(a,b,c){a=a.O;for(var e=M(a.na),f=k(e),g=0;g<a.lg.length;g++){var h=a.lg[g];if(h.Ub==b&&h.callback==c){if(m(h)){var l=ia.set(0,0,0,fa);h.callback(!1,null,l,l,0)}a.lg.splice(g,1);g--;for(var l=e,h=h.gn,q=f.Pc.Ua,n=0;n<q.length;n++)for(var C=q[n].O,p=0;p<C.lg.length;p++)for(var v=C.lg[p],A=0;A<
v.gn.length;A++)for(var u=v.gn[A],y=0;y<h.length;y++){var E=h[y];u[0]==E[0]&&u[1]==E[1]&&(h.splice(y,1),y--)}h.length&&d.ya(l,d.jK,h)}}};a.qE=function(a,b){a.O&&a.O.ro&&l(a);var c=a.O;d.ya(M(c.na),d.jV,c.na);c.ro=b};a.PE=l;a.Yx=function(a,b,c,e,f,g,h,l,q){var n;Z.GQ++;n=Z.GQ;a={id:n,na:a?a.O.na:0,from:new Float32Array(b),to:new Float32Array(c),Ub:e,qu:r(e),lL:g,bX:h,Bj:l,tA:q,callback:f};b=M(a.na)||ca[0];c=k(b).Pc;c.kn[n]=a;c.MH.push(a);d.ya(b,d.fV,a.id,a.na,a.from,a.to,a.qu,a.lL,a.bX,a.Bj,a.tA);
return n};a.PH=u;a.JL=function(a,b,c){var e=F(a),f=L(a).Pc.kn[a];f&&!f.lL&&(f.from.set(b),f.to.set(c),d.ya(e,d.lV,a,b,c))};a.lP=function(a){return L(a).Pc.kn[a]?!0:!1};a.Ys=function(a,b){var c=a.S;c.$q=b;U(a,c,M(a.O.na))};a.Xs=function(a,b){var c=a.S;c.Ds=b;U(a,c,M(a.O.na))};a.qJ=function(a,b){var c=a.S;c.cu=b;U(a,c,M(a.O.na))};a.xg=K;a.yg=A;a.Zca=E;a.k1=function(a){if(!a.wg)return!1;a=a.Kg.Cg;return"WHEEL_FRONT_LEFT"==a||"WHEEL_FRONT_RIGHT"==a||"WHEEL_BACK_LEFT"==a||"WHEEL_BACK_RIGHT"==a?!0:!1};
a.j1=function(a){return a.wg?"BOB"==a.Kg.Cg?!0:!1:!1};a.m1=function(a){return a.bp?"BOB"==a.dr.Cg?!0:!1:!1};a.nP=function(a){return a.wg&&"STEERING_WHEEL"==a.Kg.Cg?!0:!1};a.mP=function(a){return a.wg&&"SPEEDOMETER"==a.Kg.Cg?!0:!1};a.oP=function(a){return a.wg&&"TACHOMETER"==a.Kg.Cg?!0:!1};a.uO=function(a){return a.S.speed};a.O6=function(a){switch(a){case "WHEEL_FRONT_RIGHT":return 0;case "WHEEL_FRONT_LEFT":return 1;case "WHEEL_BACK_LEFT":return 2;case "WHEEL_BACK_RIGHT":return 3}};a.FO=function(a){return a.O&&
a.O.pl};a.Vca=n;a.f0=function(){return xa};a.tZ=function(){for(var a=0;a<ca.length;a++)d.ya(ca[a],d.pV)};a.Bp=function(a){var b=a.O.na;if("BOUNDING"==a.O.type){var c=S.indexOf(a);-1==c&&G.error("Object "+a.name+" doesn't have bounding physics");delete Ja[b];S.splice(c,1)}for(var c=M(b),e=k(c),f=e.Pc.Ua,g=[],h=0;h<f.length;h++)for(var q=f[h].O,n=0;n<q.lg.length;n++)for(var C=q.lg[n],p=0;p<C.gn.length;p++){var v=C.gn[p],A=C.Kv[p];if(v[0]==b||v[1]==b)C.gn.splice(p,1),C.Kv.splice(p,1),p--,A&&!m(C)&&(A=
ia.set(0,0,0,fa),C.callback(!1,null,A,A,0)),g.push(v)}g.length&&d.ya(c,d.jK,g);a.O&&a.O.ro&&l(a);a=e.Pc.Ua;for(e=0;e<a.length;e++)a[e].O.na==b&&(a.splice(e,1),e--);d.ya(c,d.vV,b)};a.L0=function(a){var b=a.Td;return a.wg||a.bp||a.pl||a.Rs&&!b.tk&&0<b.gi&&("DYNAMIC"==b.Ov||"RIGID_BODY"==b.Ov)}};b4w.module.__ipc=function(a,w){function t(a,b,c){for(var g=0;g<B.length;g+=2)B[g+1]==a&&(e[g+Number(!b)]=c)}function c(a){for(var b=0;b<a.length;b++){var c=a[b],e=0,g;for(g in c){var k=c[g];switch(k.constructor){case Float32Array:e+=k.length;break;case Number:e+=1}}--e;c.len=e}}var b=!0;a.TT=0;a.LJ=1;a.MJ=2;a.NT=3;a.PT=4;a.QT=5;a.RT=6;a.UT=7;a.NJ=8;a.$D=9;a.OJ=10;a.WT=11;a.PJ=12;a.XT=13;a.VT=14;a.ST=15;a.OT=16;var k=a.LJ,h=a.MJ,O=a.NJ,m=a.$D,x=a.OJ,r=a.PJ;a.sV=100;a.UU=101;a.VU=102;a.WU=103;a.XU=
104;a.ZU=105;a.YU=106;a.$U=107;a.aV=108;a.bV=109;a.cV=110;a.dV=111;a.eV=112;a.gV=113;a.hV=114;a.vV=115;a.iV=116;a.jV=117;a.kV=118;a.mV=119;a.nV=120;a.oV=121;a.qV=122;a.rV=123;a.tV=124;a.fV=125;a.xV=126;a.lV=127;a.jK=128;a.wV=129;a.yV=130;a.AV=131;a.BV=132;a.CV=133;a.DV=134;a.EV=135;a.FV=136;a.HV=137;a.IV=138;a.JV=139;a.kK=140;a.Et=141;a.KV=142;a.iK=143;a.LV=144;a.MV=145;a.uV=146;a.pV=147;a.NV=148;a.zV=149;a.GV=150;var g=a.Et,e=b4w.worker_listeners,B=b4w.worker_namespaces,v={qh:r,na:0,time:0,trans:new Float32Array(3),
quat:new Float32Array(4),ak:new Float32Array(3),vj:new Float32Array(3),len:0},P={qh:O,HE:0,IH:0,trans:new Float32Array(3),quat:new Float32Array(4),len:0},N={qh:m,id:0,Kq:0,hit_fract:0,hit_time:0,len:0},M={qh:x,id:0,Kq:0,hit_fract:0,hit_time:0,hit_pos:new Float32Array(3),hit_norm:new Float32Array(3),len:0},p={qh:k,mo:0,no:0,result:0,len:0},I={qh:h,mo:0,no:0,result:0,so:new Float32Array(3),coll_norm:new Float32Array(3),coll_dist:0,len:0},y={qh:g,na:0,trans:new Float32Array(3),quat:new Float32Array(4),
len:0},D=[v,P,N,M,p,I,y];a.lZ=function(a,c){var g={BA:a?!0:!1,cm:null,Aj:[],Rh:""};if(c){var k=w("__util"),h=w("__container");g.cm={addEventListener:function(a,b){"message"!=a&&k.K("Wrong web worker event");t(g.Rh,g.BA,b)},removeEventListener:function(a){"message"!=a&&k.K("Wrong web worker event");t(g.Rh,g.BA,null)},postMessage:function(a){var b;a:{for(b=0;b<B.length;b+=2)if(B[b+1]==g.Rh){b=e[b+Number(!!g.BA)];break a}b=null}b({data:a})},terminate:function(){for(var a=0;a<B.length;a+=2)if(B[a+1]==
g.Rh){e.splice(a,2);B.splice(a,2);break}}};if(g.BA){var l=b4w.get_namespace(w),m=k.Hw(l+"_worker");B.push(l);B.push(m);e.push(null);e.push(null);g.Rh=m;(h=h.m_(a))?b?h.addEventListener("load",function(){b4w.require("__bindings",g.Rh)},!1):(b4w.Ja("__bindings",g.Rh),b4w.Ja("__ipc",g.Rh),b4w.require("__bindings",g.Rh)):(h=document.createElement("script"),h.src=a,h.defer="defer",h.async="async",h.addEventListener("load",function(){b=!1;b4w.require("__bindings",g.Rh)},!1),document.head.appendChild(h))}else g.Rh=
b4w.get_namespace(w)}else a?g.cm=new Worker(a):g.cm=self;return g};a.HW=function(a,b){function e(c){if(c.constructor==ArrayBuffer)c=new Float32Array(c);else if(c[0].constructor==ArrayBuffer){for(var l=0;l<c.length;l++)e(c[l]);return}l=c[0]|0;switch(l){case r:var u=v;u.na=c[1]|0;u.time=c[2];u.trans[0]=c[3];u.trans[1]=c[4];u.trans[2]=c[5];u.quat[0]=c[6];u.quat[1]=c[7];u.quat[2]=c[8];u.quat[3]=c[9];u.ak[0]=c[10];u.ak[1]=c[11];u.ak[2]=c[12];u.vj[0]=c[13];u.vj[1]=c[14];u.vj[2]=c[15];break;case O:u=P;u.HE=
c[1]|0;u.IH=c[2]|0;u.trans[0]=c[3];u.trans[1]=c[4];u.trans[2]=c[5];u.quat[0]=c[6];u.quat[1]=c[7];u.quat[2]=c[8];u.quat[3]=c[9];break;case m:u=N;u.id=c[1]|0;u.Kq=c[2]|0;u.hit_fract=c[3];u.hit_time=c[4];break;case x:u=M;u.id=c[1]|0;u.Kq=c[2]|0;u.hit_fract=c[3];u.hit_time=c[4];u.hit_pos[0]=c[5];u.hit_pos[1]=c[6];u.hit_pos[2]=c[7];u.hit_norm[0]=c[8];u.hit_norm[1]=c[9];u.hit_norm[2]=c[10];break;case k:u=p;u.mo=c[1]|0;u.no=c[2]|0;u.result=!!c[3];break;case h:u=I;u.mo=c[1]|0;u.no=c[2]|0;u.result=!!c[3];
u.so[0]=c[4];u.so[1]=c[5];u.so[2]=c[6];u.coll_norm[0]=c[7];u.coll_norm[1]=c[8];u.coll_norm[2]=c[9];u.coll_dist=c[10];break;case g:u=y;u.na=c[1]|0;u.trans[0]=c[2];u.trans[1]=c[3];u.trans[2]=c[4];u.quat[0]=c[5];u.quat[1]=c[6];u.quat[2]=c[7];u.quat[3]=c[8];break;default:u=c}b(a,l,u)}c(D);a.cm.addEventListener("message",function(a){e(a.data)},!1)};a.Ja=function(){};a.ya=function(a,b){if(a)switch(b){case r:var c=v,e=new Float32Array(c.len);e[0]=c.qh;e[1]=c.na;e[2]=c.time;e[3]=c.trans[0];e[4]=c.trans[1];
e[5]=c.trans[2];e[6]=c.quat[0];e[7]=c.quat[1];e[8]=c.quat[2];e[9]=c.quat[3];e[10]=c.ak[0];e[11]=c.ak[1];e[12]=c.ak[2];e[13]=c.vj[0];e[14]=c.vj[1];e[15]=c.vj[2];a.Aj.push(e.buffer);break;case O:c=P;e=new Float32Array(c.len);e[0]=c.qh;e[1]=c.HE;e[2]=c.IH;e[3]=c.trans[0];e[4]=c.trans[1];e[5]=c.trans[2];e[6]=c.quat[0];e[7]=c.quat[1];e[8]=c.quat[2];e[9]=c.quat[3];a.Aj.push(e.buffer);break;case m:c=N;e=new Float32Array(c.len);e[0]=c.qh;e[1]=c.id;e[2]=c.Kq;e[3]=c.hit_fract;e[4]=c.hit_time;a.Aj.push(e.buffer);
break;case x:c=M;e=new Float32Array(c.len);e[0]=c.qh;e[1]=c.id;e[2]=c.Kq;e[3]=c.hit_fract;e[4]=c.hit_time;e[5]=c.hit_pos[0];e[6]=c.hit_pos[1];e[7]=c.hit_pos[2];e[8]=c.hit_norm[0];e[9]=c.hit_norm[1];e[10]=c.hit_norm[2];a.Aj.push(e.buffer);break;case k:c=p;e=new Float32Array(c.len);e[0]=c.qh;e[1]=c.mo;e[2]=c.no;e[3]=c.result;a.Aj.push(e.buffer);break;case h:c=I;e=new Float32Array(c.len);e[0]=c.qh;e[1]=c.mo;e[2]=c.no;e[3]=c.result;e[4]=c.so[0];e[5]=c.so[1];e[6]=c.so[2];e[7]=c.coll_norm[0];e[8]=c.coll_norm[1];
e[9]=c.coll_norm[2];e[10]=c.coll_dist;a.Aj.push(e.buffer);break;case g:c=y;e=new Float32Array(c.len);e[0]=c.qh;e[1]=c.na;e[2]=c.trans[0];e[3]=c.trans[1];e[4]=c.trans[2];e[5]=c.quat[0];e[6]=c.quat[1];e[7]=c.quat[2];e[8]=c.quat[3];a.Aj.push(e.buffer);break;default:e=[];for(c=1;c<arguments.length;c++)e.push(arguments[c]);a.cm.postMessage(e)}};a.W2=function(a){a&&a.Aj.length&&(a.cm.postMessage(a.Aj),a.Aj.length=0)};a.aO=function(a){switch(a){case r:return v;case O:return P;case m:return N;case x:return M;
case k:return p;case h:return I;case g:return y;default:return null}};a.terminate=function(a){a.cm.terminate();a.cm=null};a.xA=function(a){return!!a.cm};a.iP=function(a){return!!a.Rh}};b4w.module.__scenes=function(a,w){function t(){ib||(ib=c(Ta));return ib}function c(a){for(var b=0;b<a.length;b++){var c=a[b];if(!c.Yg||!c.Yg.length)return c}return null}function b(){fb||Xa.K("No active scene available");return fb}function k(a,b,c){if(!h(a,b,c))return null;c=a.b4w_shadow_settings;var d={};c.csm_resolution>Ua.nc?(d.csm_resolution=Ua.nc,Fa.error("Shadow map texture has unsupported size. Changed to "+Ua.nc+".")):d.csm_resolution=c.csm_resolution;Ca.shadow_blur_samples=Ca.shadow_blur_samples?
Ca.shadow_blur_samples:c.blur_samples;d.M4=c.soft_shadows;a=Ia.Xz(b,Ca.ssao&&a.b4w_enable_ssao);d.self_shadow_polygon_offset=c.self_shadow_polygon_offset;d.self_shadow_normal_offset=c.self_shadow_normal_offset;d.enable_csm=c.b4w_enable_csm&&1==a.length;c.b4w_enable_csm&&1<c.csm_num&&1<a.length&&Fa.warn("Disabling Cascaded Shadow Maps because of multiple shadow casting lamps.");d.Zi=[];d.bS=[];d.nu=[];d.mu=[];for(b=0;b<a.length;b++)d.Zi.push(a[b].xd.type),d.bS.push(a[b].xd.ws),d.nu.push(a[b].xd.nu),
d.mu.push(a[b].xd.mu),"SPOT"!=d.Zi[b]&&"POINT"!=d.Zi[b]||!d.enable_csm||(Fa.warn("Generating shadows for SPOT or POINT light. Disabling Cascaded Shadow Maps"),d.enable_csm=!1);d.enable_csm?(d.csm_num=c.csm_num,d.csm_first_cascade_border=c.csm_first_cascade_border,d.first_cascade_blur_radius=c.first_cascade_blur_radius,d.csm_last_cascade_border=c.csm_last_cascade_border,d.last_cascade_blur_radius=c.last_cascade_blur_radius,d.fade_last_cascade=c.fade_last_cascade,d.blend_between_cascades=c.blend_between_cascades):
(d.csm_num=1,d.csm_first_cascade_border=c.csm_first_cascade_border,d.first_cascade_blur_radius=c.first_cascade_blur_radius,d.csm_last_cascade_border=c.csm_last_cascade_border,d.last_cascade_blur_radius=c.last_cascade_blur_radius,d.fade_last_cascade=!1,d.blend_between_cascades=!1);return d}function h(a,b,c){if(0!=b.length&&Ca.shadows)switch(a.b4w_render_shadows){case "OFF":return!1;case "ON":return!0}else return!1;var d=!1,e=!1;a=Ca.ssao&&a.b4w_enable_ssao;if(0==b.length&&!a)return!1;for(b=0;b<c.length;b++){var f=
c[b];f.b4w_shadow_cast&&(d=!0);f.b4w_shadow_receive&&(e=!0);if((a||d)&&e)return!0}return!1}function O(a){for(var b=0;b<a.length;b++)if("SUN"==a[b].xd.type)return!0;return!1}function m(a){if(!Ca.Xf)return!1;a=ca(a);for(var b=0;b<a.length;b++){var c=a[b];if(c.ma.Zj&&c.ma.Xf)return!0}return!1}function x(a){for(var b=0;b<a.length;b++)for(var c=a[b].particle_systems,d=0;d<c.length;d++)if(Ia.RL(a[b].Oa,c[d].settings))return!0;return!1}function r(a){for(var b=ca(a),c=[],d=0;d<b.length;d++){var e=b[d];if(e.ma.Zj){for(var f=
{},g=0;g<a.length;g++)for(var k=a[g],h=k.Oa.Ec,l=0;l<h.length;l++)h[l]==e&&(f.vk=k.location[2]);f.qe=new Float32Array(4);f.qe.set(e.ma.Io);f.qe[3]=e.ma.yz;e.ma.ea?(f.Lu=!0,f.waves_height=e.ma.waves_height,f.waves_length=e.ma.waves_length,f.dst_noise_scale0=e.ma.dst_noise_scale0,f.dst_noise_scale1=e.ma.dst_noise_scale1,f.dst_noise_freq0=e.ma.dst_noise_freq0,f.dst_noise_freq1=e.ma.dst_noise_freq1,f.dir_min_shore_fac=e.ma.dir_min_shore_fac,f.dir_freq=e.ma.dir_freq,f.dir_noise_scale=e.ma.dir_noise_scale,
f.dir_noise_freq=e.ma.dir_noise_freq,f.dir_min_noise_fac=e.ma.dir_min_noise_fac,f.dst_min_fac=e.ma.dst_min_fac,f.waves_hor_fac=e.ma.waves_hor_fac):(f.Lu=!1,f.waves_height=0,f.waves_length=0);f.fh=e.ma.lz;f.oX=e.ma.Qk;f.nX=e.ma.Pk;f.pX=new Float32Array([.3,.7]);f.pn=null;e=e.Ah;for(g=0;g<e.length;g++)k=e[g].texture,!0===k.b4w_shore_dist_map&&"FILE"==k.image.source&&(f.pn=k.image,f.CI=k.image.size[0],f.WG=k.b4w_max_shore_dist,k=k.b4w_shore_boundings,f.os=[(k[0]+k[1])/2,(k[2]+k[3])/2],f.ps=[k[0]-k[1],
k[2]-k[3]]);c.push(f)}}if(0<c.length){f=c[0];if(!f.Lu)for(d=0;d<c.length;d++)c[d].Lu&&(f=c[d]);return f}return null}function g(a){function b(a){if(a){a=a.nodes;for(var d=0;d<a.length;d++){var e=a[d];"GROUP"==e.type&&e.node_group&&b(e.node_group.node_tree);"GROUP"==e.type&&"B4W_REFRACTION"==e.node_tree_name&&(c.refractions=!0);"BSDF_TRANSPARENT"==e.type&&(c.refractions=!0)}}}var c={refractions:!1};a=ca(a);for(var d=0;d<a.length;d++){var e=a[d];e.fp&&(c.refractions=!0);e.te&&b(e.te)}return c}function e(a,
b,c){if(Ca.reflections)switch(a.b4w_render_reflections){case "OFF":return!1}else return!1;a=[];for(var d=0,e=!1,f=!1,g=!1,k=0;k<b.length;k++){var h=b[k];h.A.Ad&&"CUBE"==h.A.ri&&d++;h.A.Ad&&"PBR"==h.A.ri&&(f=!0);if(h.cw.length){for(var l=null,q=0;q<a.length;q++)if(a[q]==h){l=q;break}null==l&&a.push(h)}}for(k=0;k<c.length;k++){b=c[k];b.b4w_reflexible&&(e=!0);a:if(b.b4w_reflexible){b=b.Oa.Ec;for(h=0;h<b.length;h++)if(l=b[h].ub,"OPAQUE"!=l&&"CLIP"!=l&&"ALPHA_ANTIALIASING"!=l){b=!0;break a}b=!1}else b=
void 0;b&&(g=!0)}return{IQ:a,dQ:d,Yk:[],lF:[],gk:[],zB:[],pG:e,N0:f,EO:g}}function B(a,b){var c=a.b4w_sky_settings,d={};d.QH=c.render_sky||c.procedural_skydome;d.procedural_skydome=c.procedural_skydome;d.use_as_environment_lighting=c.use_as_environment_lighting;d.rn=c.color;d.rayleigh_brightness=c.rayleigh_brightness;d.mie_brightness=c.mie_brightness;d.spot_brightness=c.spot_brightness;d.scatter_strength=c.scatter_strength;d.rayleigh_strength=c.rayleigh_strength;d.mie_strength=c.mie_strength;d.rayleigh_collection_power=
c.rayleigh_collection_power;d.mie_collection_power=c.mie_collection_power;d.mie_distribution=c.mie_distribution;d.Se=c.reflexible;d.xe=c.reflexible_only;!b&&c.procedural_skydome&&Fa.warn("There is no sun on the scene. Procedural sky will use a default sun position.");return d}function v(a){var b={};a=a.b4w_ssao_settings;b.radius_increase=a.radius_increase;b.R0=a.hemisphere;b.UW=a.blur_depth;b.blur_discard_value=a.blur_discard_value;b.influence=a.influence;b.dist_factor=a.dist_factor;b.G3=a.samples;
return b}function P(a){if(!Ca.bloom||!a.b4w_enable_bloom)return null;var b={};a=a.b4w_bloom_settings;b.blur=a.blur;b.edge_lum=a.edge_lum;b.key=a.key;b.adaptive=a.adaptive;b.average_luminance=a.average_luminance;return b}function N(a){var b={};a=a.b4w_motion_blur_settings;b.mb_decay_threshold=a.motion_blur_decay_threshold;b.mb_factor=a.motion_blur_factor;return b}function M(a){var b={};a=a.b4w_color_correction_settings;b.brightness=a.brightness;b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=
a.saturation;return b}function p(a){var b={};a=a.b4w_god_rays_settings;b.intensity=a.intensity;b.Ym=a.max_ray_length;b.un=a.steps_per_pass;return b}function I(a){var b={};b.dj=a.b4w_outline_color;b.tp=a.b4w_outline_factor;return b}function y(a){var b={};a=a.b4w_glow_settings;b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.small_glow_mask_width=a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;return b}function D(a,b){var c=a.light_settings,
d={};d.ih=c.environment_energy;d.Nw=c.use_environment_light;d.BF=c.environment_color;d.se=a.horizon_color.slice(0);d.De=a.zenith_color.slice(0);d.Mp=a.use_sky_paper;d.Lp=a.use_sky_blend;d.Np=a.use_sky_real;d.vC=null;d.Fp=null;d.nz=null;d.Pe="";b.QH&&a.use_nodes&&a.node_tree&&(c=sa.nM(a.node_tree,a.uuid,"MAIN",null),d.Pe=c.id);c=!0;if(d.Nw&&"SKY_TEXTURE"==d.BF&&(!b.procedural_skydome||!b.use_as_environment_lighting)){for(var e=null,f=0;f<a.texture_slots.length;f++)if(a.texture_slots[f].texture.b4w_use_as_environment_lighting&&
!a.texture_slots[f].texture.b4w_use_as_skydome){e=a.texture_slots[f];break}e?d.nz=e:c=!1}for(f=0;f<a.texture_slots.length;f++)if(a.texture_slots[f].texture.b4w_use_as_skydome){e=a.texture_slots[f];e.texture.image&&(c=!0,d.vC=e,f=Math.min(Ua.ph,Ka.DE(e.texture.image.size[0]/3)),d.Fp={vS:f,vL:e.blend_factor,NO:e.horizon_factor,zT:e.zenith_up_factor,yT:e.zenith_down_factor,color:e.color,Qa:e.default_value,invert:e.invert,dT:e.use_rgb_to_intensity,wL:e.blend_type,ZS:e.use_map_blend,$S:e.use_map_horizon,
bT:e.use_map_zenith_up,aT:e.use_map_zenith_down});break}d.Nw=d.Nw?c:!1;return d}function l(a){var b=a.fog_settings,c={};c.v6=b.use_fog;c.intensity=b.intensity;c.depth=b.depth;c.start=b.start;c.height=b.height;c.g_=b.falloff;c.color=b.use_custom_color?b.color.slice(0):a.horizon_color.slice(0);a=c.color;c.qe=new Float32Array([a[0],a[1],a[2],1/c.depth]);c.tg=new Float32Array([c.intensity,c.depth,c.start,c.height]);return c}function u(a,b){if(!Ca.kd)return!1;switch(a.b4w_render_dynamic_grass){case "OFF":return!1;
case "ON":return!0}for(var c=!1,d=!1,e=0;e<b.length;e++){for(var f=b[e],g=f.Oa.Ec,k=0;k<g.length;k++)g[k].pk.zr&&(c=!0);f=f.particle_systems;for(k=0;k<f.length;k++)g=f[k].settings,"HAIR"==g.type&&g.b4w_dynamic_grass&&(d=!0);if(c&&d)return!0}return!1}function L(a,b){if(Xb.outlining_overview_mode)return!0;if(Ca.enable_selectable)switch(a.b4w_enable_object_selection){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++)if(b[c].Oa.A.mn)return!0;return!1}else return!1}function F(a,
b){if(Xb.outlining_overview_mode)return!0;if(Ca.enable_outlining)switch(a.b4w_enable_outlining){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++)if(b[c].Oa.A.zd)return!0;return!1}else return!1}function U(a,b){if(Ca.glow_materials)switch(a.b4w_enable_glow_materials){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++)for(var d=b[c].Oa.Ec,e=0;e<d.length;e++)if(sa.QL(d[e]))return!0;return!1}else return!1}function K(a,b){if(Ca.refractions)switch(a.b4w_render_refractions){case "OFF":return!1;
case "ON":return!0;case "AUTO":return b.refractions}else return!1}function A(a){for(var b=0;b<a.length;b++)for(var c=a[b].Oa.Ec,d=0;d<c.length;d++){var e=c[d];if(e.Il&&"OPAQUE"!=e.ub&&"CLIP"!=e.ub&&"ALPHA_ANTIALIASING"!=e.ub)return!0}return!1}function E(a,b){switch(a.b4w_enable_anchors_visibility){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var c=0;c<b.length;c++){var d=b[c].Oa;if(d.anchor&&d.anchor.Xq)return!0}return!1}}function n(a,b){for(var c=Z(a,[T.Nb,T.Hd,T.Fe]),d=0;d<c.length;d++)c[d].oy=
b}function f(a,b,c,e,f,g){for(var k=b.A,h=Ia.La(b,f),l=h.da,q=0;q<l.length;q++){var n=l[q];if(!(n.vf||n.xe||"MAIN"!=n.type&&"NODES_GLOW"!=n.type&&"PARTICLES"!=n.type&&"LINE"!=n.type)&&("OPAQUE"==n.Ib&&"OPAQUE"==e||"BLEND"==n.Ib&&"BLEND"==e||"XRAY"==n.Ib&&"XRAY"==e||"NODES_GLOW"==n.type&&"GLOW"==e)){if(!g&&(d(n,a,b,c,e,f),!Y.Ed(n)))if("DEBUG"===ub.type())Y.ay(n,"error.glslv","error.glslf"),Y.Ed(n);else continue;var m=T.Xj(n,k,h.dh[q]);T.pd(a,m);ga.vo(c,a,n);G(n)}}}function X(a){a.Wm.Ow&&Y.Vf(a,"USE_LOD_SMOOTHING",
1)}function d(a,b,c,d,e,f){var g=c.A,k=f.J,h=Ia.La(c,f),l="NO_SHADOWS";c=Z(f,[T.ae]);if(c.length&&a.ze){switch(e){case "OPAQUE":l="SHADOW_MAPPING_OPAQUE";break;case "BLEND":case "XRAY":l="SHADOW_MAPPING_BLEND";break;case "COLOR_ID":case "REFLECT":case "GLOW":l="NO_SHADOWS";break;case "SHADOW":l="SHADOW_MASK_GENERATION";break;default:Xa.K("Wrong subscene type")}for(var q=0;q<c.length;q++)Y.hL(a,f.J.Cd)}q="NO_SOFT_SHADOWS";if(k.Cd&&k.Cd.M4)switch(Ca.shadow_blur_samples){case "16x":q="POISSON_X_16";
break;case "8x":q="POISSON_X_8";break;case "4x":q="POISSON_X_4"}c=a.qb;na.wa(c,"SHADOW_USAGE",l);na.wa(c,"POISSON_DISK_NUM",q);X(a);a.kd&&(q=ga.cc(d,T.yk))&&R(a,q,g);H(c,b.H);if("SHADOW"!=a.type&&"COLOR_ID"!=e||a.Uj){e=b.Rr;na.wa(c,"NUM_LIGHTS",e);na.wa(c,"NUM_LFACTORS",e%2?Math.floor(e/2)+1:e/2);na.wa(c,"REFLECTION_PASS","REFL_PASS_NONE");na.wa(c,"SSAO_ONLY",0);if(e=k.Yd)na.wa(c,"WATER_EFFECTS",1),na.wa(c,"WAVES_HEIGHT",na.fa(e.waves_height)),na.wa(c,"WAVES_LENGTH",na.fa(e.waves_length)),na.wa(c,
"WATER_LEVEL",na.fa(e.vk));if(b.fh&&a.fh){na.wa(c,"CAUSTICS",1);if(q=k.Cd){g=q.Zi;for(q=l=0;q<g.length;q++)"SUN"==g[q]&&(l=q);na.wa(c,"SUN_NUM",l)}na.wa(c,"CAUST_SCALE",na.fa(b.Qk));na.wa(c,"CAUST_SPEED",na.fa(b.sy,2));na.wa(c,"CAUST_BRIGHT",na.fa(b.Pk))}q=h.Yk;g=h.gk;h=ga.cc(d,T.Ye);b=ga.cc(d,T.km);l=ga.cc(d,T.wq);if(-1!==a.Ig.indexOf("u_mirrormap"))na.wa(c,"REFLECTION_TYPE","REFL_MIRRORMAP");else if(a.Ad&&b&&l&&!q&&!g.length)Y.Ji(a,b.H.bc,"u_cube_irradiance"),Y.Ji(a,l.H.bc,"u_cube_r_convolution"),
na.wa(c,"REFLECTION_TYPE","REFL_PBR_STANDARD");else if(!a.Ad||q||g.length||Ca.quality==wa.Bk)if(a.Ad&&q)b=q.H.bc,k.gj.pG||(q.Jo=!0,h&&(b=h.H.bc)),Y.Ji(a,b,"u_cube_reflection"),na.wa(c,"REFLECTION_TYPE","REFL_CUBE");else if(a.Ad&&g)for(q=0;q<g.length;q++)b=g[q].H.bc,Y.Ji(a,b,"u_plane_reflection"),na.wa(c,"REFLECTION_TYPE","REFL_PLANE");else na.wa(c,"REFLECTION_TYPE","REFL_NONE");else h?(Y.Ji(a,h.H.bc,"u_sky_reflection"),na.wa(c,"REFLECTION_TYPE","REFL_PBR_SIMPLE")):na.wa(c,"REFLECTION_TYPE","REFL_NONE");
h?a.gz?(b=h.H.bc,Y.Ji(a,b,"u_sky")):h.procedural_skydome&&(a.mg=h.mg,na.wa(c,"PROCEDURAL_FOG",1)):na.wa(c,"PROCEDURAL_FOG",0);b=k.On;b.Nw&&(na.wa(c,"USE_ENVIRONMENT_LIGHT",1),"SKY_TEXTURE"==b.BF?(b.nz?(h=b.nz.texture,b=Ka.kf(b.nz),Y.Ji(a,b,"u_sky_texture",h.name)):h&&(b=h.H.bc,Y.Ji(a,b,"u_sky_texture")),na.wa(c,"SKY_TEXTURE",1)):"SKY_COLOR"==b.BF&&na.wa(c,"SKY_COLOR",1));b=k.xT;b.v6&&(na.wa(c,"USE_FOG",1),na.wa(c,"FOG_TYPE",b.g_));a.Gl&&a.xb?(Ca.Zy&&na.wa(c,"USE_REFRACTION_CORRECTION",1),"MAIN"==
a.type&&a.Uj||"NODES_GLOW"==a.type?(na.wa(c,"REFRACTIVE",1),k.refractions?na.wa(c,"USE_REFRACTION",1):na.wa(c,"USE_REFRACTION",0)):k.refractions?na.wa(c,"REFRACTIVE",1):na.wa(c,"REFRACTIVE",0),(k.OP.refractions||k.refractions)&&na.wa(c,"HAS_REFRACT_TEXTURE",1)):(na.wa(c,"REFRACTIVE",0),na.wa(c,"USE_REFRACTION",0),na.wa(c,"USE_REFRACTION_CORRECTION",0));a.nj&&(Ca.Xf&&a.Xw&&ga.cc(d,T.DJ)?na.wa(c,"SHORE_SMOOTHING",1):na.wa(c,"SHORE_SMOOTHING",0),a.water_dynamic&&e&&e.waves_height?na.wa(c,"DYNAMIC",1):
na.wa(c,"DYNAMIC",0));"PARTICLES"==a.type&&na.wa(c,"COLOR_RAMP_LENGTH",a.Ra.Cy);if(!a.Th)for(a=a.xa,d=0;d<a.length;d++)if(b=a[d],"SCENE"==b.source)for(k=0;k<Ta.length;k++)for(c=Ta[k],e=Ta[k].Yg,h=0;h<e.length;h++)e[h]==b&&Ga.I(Ib,c,f,null)}}function H(a,b){b.type==Pa.$e||b.type==Pa.Ei||b.type==Pa.Dk?na.wa(a,"CAMERA_TYPE","CAM_TYPE_ORTHO"):na.wa(a,"CAMERA_TYPE","CAM_TYPE_PERSP")}function G(a){8<a.xa.length&&Fa.warn(a.type,"too many textures used - "+a.xa.length+' (max 8), materials "'+a.Dc.join(", ")+
'"')}function R(a,b,c){a.Nd=b.Nd;var d=b.Nd[0],e=b.Nd[1],f=b.Nd[2];c=c.Ca;c=Math.max(c.max_x-c.min_x,c.max_y-c.min_y);f=0==f?c:Math.max(f,c);b.Nd[2]=f;b=b.H;Pa.sR(b,f/2,f/2,-e,-d);Pa.Nl(b,!1);d=a.ol||0;d=0==d?c:Math.max(d,c);a.ol=d}function q(a,b,c,e,f,g){for(var k=b.A,h=Ia.La(b,f),l=h.da,q=0;q<l.length;q++){var n=l[q];if(("MAIN"==n.type||"PARTICLES"==n.type||"LINE"==n.type)&&"REFLECT"==n.Ib&&n.xb==e){if(a.type==T.Ge||a.type==T.Vg){var m;a:{var C=f.J.gj.gk;for(m=0;m<C.length;m++)for(var p=0;p<C[m].length;p++)if(C[m][p]==
a)break a;C=f.J.gj.zB;for(m=0;m<C.length;m++)for(p=0;p<C[m].length;p++)if(C[m][p]==a)break a;m=null}if(m==k.ue)continue}else if(m=ka(f,a),m==k.Ke)continue;if(!g&&(d(n,a,b,c,"REFLECT",f),m=n.qb,na.wa(m,"WATER_EFFECTS",0),a.type==T.Ge||a.type==T.Vg?na.wa(m,"REFLECTION_PASS","REFL_PASS_PLANE"):na.wa(m,"REFLECTION_PASS","REFL_PASS_CUBE"),na.wa(m,"TEXTURE_NORM",0),!Y.Ed(n)))if("DEBUG"===ub.type())Y.ay(n,"error.glslv","error.glslf"),Y.Ed(n);else continue;m=T.Xj(n,k,h.dh[q]);T.pd(a,m);ga.vo(c,a,n);G(n)}}}
function ja(a){ba(a);var b=fa(a,T.Nb),c=!0,d=a.J.Cd;Ga.ka(a.J.Da,function(e,f){f.type===T.ae&&(C(f,a,b.H,d,c),c=!1)})}function qa(a){Ga.ka(a.J.Da,function(a,b){b.type===T.vq&&(b.Ku=1)})}function C(a,b,c,d,e){if(0!=a.kb.length){var f=a.H;Wa.copy(c.D,f.D);Wa.copy(c.Ng,f.pw);if("SUN"===d.Zi[a.xh]||"HEMI"===d.Zi[a.xh]){var g=c.D,k=Dc;ua.Q6(k);for(var h=0;h<a.kb.length;h++)for(var l=a.kb[h].Ua,q=0;q<l.length;q++){var n=l[q].Fa,m=l[q].sh;if(n.kd){var C=Wa.Fb(g,vb),p=Ma.transformQuat(Xa.qc,C,Mb),C=-p[0],
p=p[1],v=Wa.Wb(g,Mb),C=v[0]-n.ol*(1+C)/2,p=v[1]-n.ol*(1-p)/2,m=ua.Lq(n.Db.Ff,m.D,sc),m=m.max_z-m.min_z,v=sc;v.min_x=C;v.min_y=p;v.min_z=n.Nd[0]-m;v.max_x=C+n.ol;v.max_y=p+n.ol;v.max_z=n.Nd[1]+m}else v=m.Ki;h||q?ua.pz(k,v):ua.Gj(v,k)}g=ua.jN(k,Sb);Xa.as(g,f.pc,g);if(d.enable_csm){b=Ma.copy(c.Jj[a.Du],kc);d=ta.invert(c.pc,Ab);Xa.as(b,d,b);Xa.as(b,f.pc,b);a=c.Eu[a.Du];if(e)for(tc=0,uc=-Infinity,e=2;e<g.length;e+=3)tc=Math.min(tc,g[e]),uc=Math.max(uc,g[e]);e=Dc;e.max_x=b[0]+a;e.max_y=b[1]+a;e.max_z=uc;
e.min_x=b[0]-a;e.min_y=b[1]-a;e.min_z=tc}else{c=e=Dc;d=Nb;d.set(g);g=Yb/9;k=ta.identity(Ab);ta.rotate(k,g,Xa.qc,k);l=h=-1;for(q=0;10>q;q++){n=ua.tE(d,0,d.length,sc);m=(n.max_x-n.min_x)*(n.max_y-n.min_y);if(-1==h||.1<h-m)h=m,l=q,ua.Gj(n,c);Xa.as(d,k,d)}c=l*g;0<c&&(d=ta.identity(Ab),ta.rotate(d,c,Xa.qc,d),ta.multiply(d,f.pc,f.pc),Wa.Vh(f.pc,f.Ng));c=e.max_x-e.min_x;d=e.max_y-e.min_y;c&&d&&(g=Math.abs(c-d)/2,2<c/d?(e.max_y+=g,e.min_y-=g):2<d/c&&(e.max_x+=g,e.min_x-=g));e.max_x+=.005;e.max_y+=.005;e.max_z+=
.005;e.min_x-=.005;e.min_y-=.005;e.min_z-=.005;pa(a,b.J.Da)}Pa.e4(f,e.min_x,e.max_x,e.min_y,e.max_y,-e.max_z,-e.min_z);Pa.Nl(f,!1)}else"SPOT"!==d.Zi[a.xh]&&"POINT"!==d.Zi[a.xh]||Pa.Nl(f,!1)}}function pa(a,b){for(var c=a.H,d=ga.r0(b,a),e=0;e<d.length;e++){var f=d[e];if(f.type==T.Nb||f.type==T.Wg||f.type==T.Hd||f.type==T.Fh)if(Ca.UA)f.Rw.set(c.Ng,9*a.xh);else{var g=Wa.X(c.Ng),k=Wa.ge(c.Ng),h=Wa.la(c.Ng);ab.set(g[0],g[1],g[2],k,Za);f.Ws.set(Za,4*a.xh);f.Vs.set(h,4*a.xh)}}}function ia(a,b,c,e,f){for(var g=
b.A,k=Ia.La(b,e),h=k.da,l=0;l<h.length;l++){var q=h[l];if("COLOR_ID"==q.type&&(a.type==T.Df&&"COLOR_ID"==q.Ib||a.type==T.zi&&"COLOR_ID_XRAY"==q.Ib)){if(!f&&(d(q,a,b,c,"COLOR_ID",e),Y.Vf(q,"USE_OUTLINE",0),!Y.Ed(q)))continue;q=T.Xj(q,g,k.dh[l]);T.pd(a,q)}}}function ma(a,b){ea(a,b);for(var c=0;c<a.cf.length;c++)a.cf[c].parent==a&&ma(a.cf[c],b)}function ea(a,b){a.A.bi=b;if(Ia.vr(a))for(var c=0;c<a.T.length;c++)for(var d=a.T[c],e=Z(d.wb,nb),f=0;f<e.length;f++){var g=e[f],k=a.A,h=a.xd,l=d.Av,q=h.Kp&&!k.bi?
1:0;g.jp[4*l+3]=q;q=h.Op&&!k.bi?1:0;g.ip[4*l+3]=q;g.Wa=!0}}function la(a,b){for(var c=Z(b,nb),d=a.xd,e=a.A,f=Ia.La(a,b),g=Wa.X(e.D),e=Wa.la(e.D),k=0;k<c.length;k++){var h=c[k],l=h,q=a.A,n=a.xd,m=f.Av,p=Wa.X(a.A.D),v=n.ru;l.zv.set(n.direction,3*m);Za[0]=p[0];Za[1]=p[1];Za[2]=p[2];Za[3]=n.Kp&&!q.bi?1:0;l.jp.set(Za,4*m);Za[0]=v[0];Za[1]=v[1];Za[2]=v[2];Za[3]=n.Op&&!q.bi?1:0;l.ip.set(Za,4*m);l.Wa=!0;switch(d.type){case "SUN":h.UC.set(e);h.TC=d.ru;Ma.copy(d.direction,h.SC);h.type==T.Ye&&h.procedural_skydome&&
(h.Kr=d.ZP,xa(b,h));break;case "HEMI":case "POINT":case "SPOT":break;default:Fa.error("Unknown light type: "+d.type+'".')}h=h.kb;for(l=0;l<h.length;l++)for(q=h[l].Ua,n=0;n<q.length;n++)m=q[n].Fa,m.hp&&Y.g4(m,a)}c=fa(b,T.Nb).H;f=f.AI;d=b.J.Cd;for(k=0;k<f.length;k++)h=f[k],Pa.xI(h.H,g,e),C(h,b,c,d,!0),pa(h,b.J.Da)}function ba(a){var b=Qa.xc(a,"LAMP",Qa.Vc),b=Ia.Xz(b,Ca.ssao&&a.b4w_enable_ssao);if(b.length)for(var c=0;c<b.length;c++)for(var d=b[c],e=d.A,f=Wa.Wb(e.D,kc),e=Wa.Fb(e.D,vb),g=0;g<d.T.length;g++){var k=
d.T[g],h=k.AI;if(k.wb==a)for(k=0;k<h.length;k++)Pa.xI(h[k].H,f,e)}}function da(a){var b=fa(a,T.Ye);b&&xa(a,b)}function xa(a,b){Ea.xp(b);Ha.cl(b);if(b.Kr)for(var c=Z(a,sb),d=0;d<c.length;d++)for(var e=c[d].kb,f=0;f<e.length;f++)for(var g=e[f].Ua,k=0;k<g.length;k++){var h=g[k];h.lc&&(h=h.Fa,Y.uX(h)&&Ha.I5(h))}if(c=fa(a,T.km))Ea.xp(c),Ha.cl(c);if(c=fa(a,T.wq))Ea.xp(c),Ha.cl(c);if(c=fa(a,T.AJ))Ea.xp(c),Ha.cl(c)}function ca(a){for(var b=[],c=0;c<a.length;c++)for(var d=a[c].Oa.Ec,e=0;e<d.length;e++){var f=
d[e];-1==b.indexOf(f)&&b.push(f)}return b}function V(a,b,c,d){W.jP()&&(b*=window.devicePixelRatio,c*=window.devicePixelRatio);var e=t();e&&(e=e.J,b*=e.cs,c*=e.cs);b*=a.Pl;c*=a.Ql;d[0]=Math.floor(b);d[1]=Math.floor(c);return d}function Ja(a,b,c){a=V(a,b,c,Cc);return a[0]>Ua.nc||a[1]>Ua.nc?(Fa.warn("Texture size exceeds platform limits, downscaling"),Math.min(Ua.nc/a[0],Ua.nc/a[0])):1}function S(a,b,c){for(var d=a.J,e=Ia.La(a.Ek,a).oa,f=0!=c?b/c:1,g=0;g<e.length;g++){var k=e[g];Pa.O3(k,f);Pa.Nl(k,!1);
d.Cd&&Pa.jJ(k,d.Cd)}if(d.Cd){d.iB=!0;d=Z(a,[T.Wg]);for(g=0;g<d.length;g++)d[g].Wa=!0;d=Z(a,[T.Hd]);for(g=0;g<d.length;g++)d[g].Wa=!0}oa(a,b,c)}function oa(a,b,c){var d=a.J.Da,e=Infinity;ga.Ms(d,function(a){a.Jp&&(e=Math.min(e,Ja(a,b,c)))});ga.Ms(d,function(f,g,k,h){if(f.Jp){var l,q;h&&h.type==T.mm||k.mc&&!f.$x?(l=b*f.Pl,q=c*f.Ql):(q=V(f,b,c,Cc),l=q[0]*e,q=q[1]*e);if(g)for(g=0;g<k.rb.length;g++)k.rb[g]==f&&Ka.resize(f.Xa,l,q);else switch(Ka.Ar(f.Xa)&&(Ka.resize(f.Xa,l,q),f.Xa.Ve&&(h.IA=f.Xa.TP)),f=
k.H,f.width=l,f.height=q,k.type){case T.qt:za(a,{dof_power:k.H.dof_power});break;case T.st:J(a,{small_glow_mask_width:k.small_glow_mask_width,large_glow_mask_width:k.large_glow_mask_width});break;case T.lt:ha(a,{blur:k.Gq});break;case T.nK:f.width=f.bc.width;f.height=f.bc.height;break;case T.vq:k=ga.sd(d,k,T.rc);f=ga.sd(d,k,T.rc);q=ga.sd(d,f,T.rc);g=ga.sd(d,q,T.rc);ga.ye(k,1/l,1/l);ga.ye(f,1/l,1/l);ga.ye(q,1/l,1/l);ga.ye(g,1/l,1/l);break;default:ga.ye(k,1/l,1/q)}}})}function Z(a,b){for(var c=[],d=
0;d<b.length;d++){var e=b[d];a.J.Da&&Ga.ka(a.J.Da,function(a,b){b.type==e&&c.push(b)})}return c}function fa(a,b){return ga.cc(a.J.Da,b)}function aa(a){var b=t();b&&Ga.ka(b.J.Da,function(b,c){var d=c.H;d&&d.type==Pa.Ef&&(c.Jo=a)})}function za(a,b){var c=Z(a,[T.qt]);if(!c.length)return Fa.error("DOF is not enabled on the scene. Check camera settings"),0;for(var d=0;d<c.length;d++){var e=c[d],f=b,g=a,k=e.dof_bokeh,h=k?Z(g,[T.ND]):[],g=g.J.Da;if("boolean"==typeof f.dof_on&&(e.H.dof_on=f.dof_on,k))for(var l=
0;l<h.length;l++)h[l].H.dof_on=f.dof_on;if("number"==typeof f.dof_distance&&(e.H.dof_distance=f.dof_distance,k))for(l=0;l<h.length;l++)h[l].H.dof_distance=f.dof_distance;if("number"==typeof f.dof_front_start&&(e.H.dof_front_start=f.dof_front_start,k))for(l=0;l<h.length;l++)h[l].H.dof_front_start=f.dof_front_start;if("number"==typeof f.dof_front_end&&(e.H.dof_front_end=f.dof_front_end,k))for(l=0;l<h.length;l++)h[l].H.dof_front_end=f.dof_front_end;if("number"==typeof f.dof_rear_start&&(e.H.dof_rear_start=
f.dof_rear_start,k))for(l=0;l<h.length;l++)h[l].H.dof_rear_start=f.dof_rear_start;if("number"==typeof f.dof_rear_end&&(e.H.dof_rear_end=f.dof_rear_end,k))for(l=0;l<h.length;l++)h[l].H.dof_rear_end=f.dof_rear_end;"number"==typeof f.dof_bokeh_intensity&&(e.H.dof_bokeh_intensity=f.dof_bokeh_intensity,k&&(h=ga.Pz(g,e,T.rc),h[0].H.dof_bokeh_intensity=f.dof_bokeh_intensity,h[1].H.dof_bokeh_intensity=f.dof_bokeh_intensity,h[0]=ga.sd(g,h[0],T.rc),h[0].H.dof_bokeh_intensity=f.dof_bokeh_intensity));if("number"==
typeof f.dof_power)if(k){f=f.dof_power;e.H.dof_power=f;var f=f/2,k=e.H.width,l=e.H.height,q=[1/k,0],n=[1/k*.5,1/l*.866],m=[-1/k*.5,1/l*.866],h=ga.Pz(g,e,T.rc);ga.Ud(h[0],f);ga.ye(h[0],m[0],m[1]);ga.Ud(h[1],f);ga.ye(h[1],n[0],n[1]);h[0]=ga.sd(g,h[0],T.rc);ga.Ud(h[0],f);ga.ye(h[0],q[0],q[1]);e.H.pe&&(h[0]=ga.sd(g,h[0],T.ND),h[0]=ga.sd(g,h[0],T.rc),ga.ye(h[0],1/k,1/l),h[0]=ga.sd(g,h[0],T.rc),ga.ye(h[0],1/k,1/l))}else e.H.dof_power=f.dof_power,h=ga.sd(g,e,T.rc),g=ga.sd(g,h,T.rc),ga.Ud(h,e.H.dof_power),
ga.ye(h,1/e.H.width,1/e.H.height),ga.Ud(g,e.H.dof_power),ga.ye(g,1/e.H.width,1/e.H.height)}}function ha(a,b){var c=Z(a,[T.Cx]),d=Z(a,[T.lt]);if(!c.length||!d.length)return Fa.error("Bloom is not enabled on the scene"),0;if("number"==typeof b.key)for(var e=0;e<c.length;e++)c[e].Jq=b.key,c[e].Wa=!0;if("number"==typeof b.edge_lum)for(e=0;e<c.length;e++)c[e].Iq=b.edge_lum,c[e].Wa=!0;if("number"==typeof b.blur)for(e=0;e<d.length;e++){d[e].Gq=b.blur;for(var f=a.J.Da,g=d[e].H.width/.5,k=d[e].H.height/.5,
h=ga.Pz(f,d[e],T.rc),l=0;l<h.length;++l){var q=h[l],n=ga.sd(f,q,T.rc),m=g*q.Hq,C=k*q.Hq;ga.Ud(q,b.blur);ga.ye(q,1/m,1/C);ga.Ud(n,b.blur);ga.ye(n,1/m,1/C)}}if("number"==typeof b.average_luminance)for(e=0;e<c.length;e++)c[e].ao||(c[e].average_luminance=b.average_luminance,c[e].Wa=!0)}function J(a,b){var c=Z(a,[T.st]);if(!c.length)return Fa.error("Glow is not enabled on the scene"),null;for(var d=0;d<c.length;d++){for(var e=c[d],f=b,g=a.J.Da,k=ga.l0(g,e),h=0;h<k.length;++h){var l=k[h];if(l.type==T.rc&&
"GLOW_MASK_LARGE"==l.Ib)var q=l;if(l.type==T.rc&&"GLOW_MASK_SMALL"==l.Ib)var n=l}k=ga.sd(g,q,T.rc);g=ga.sd(g,n,T.rc);"number"==typeof f.small_glow_mask_coeff&&(e.small_glow_mask_coeff=f.small_glow_mask_coeff,e.Wa=!0);"number"==typeof f.large_glow_mask_coeff&&(e.large_glow_mask_coeff=f.large_glow_mask_coeff,e.Wa=!0);"number"==typeof f.small_glow_mask_width&&(e.small_glow_mask_width=f.small_glow_mask_width,ga.Ud(n,f.small_glow_mask_width),ga.ye(n,1/e.H.width,1/e.H.height),n.Wa=!0,ga.Ud(g,f.small_glow_mask_width),
ga.ye(g,1/e.H.width,1/e.H.height),g.Wa=!0);"number"==typeof f.large_glow_mask_width&&(e.large_glow_mask_width=f.large_glow_mask_width,ga.Ud(q,f.large_glow_mask_width),ga.ye(q,1/e.H.width,1/e.H.height),q.Wa=!0,ga.Ud(k,f.large_glow_mask_width),ga.ye(k,1/e.H.width,1/e.H.height),k.Wa=!0)}}function ra(a,b,c){var d=a.J,e=d.Yd;if(!e.Lu)return e.vk;var f=e.waves_height,g=e.waves_length,k=e.vk,h=Ma.length(d.pj)||1;a=fa(a,T.Nb).time;a*=h;h=Cc;h[0]=20/g*(b-.25*a);h[1]=20/g*(c-.25*a);var l=Xa.IL(h);h[0]=17/g*
(c+.1*a);h[1]=17/g*(b+.1*a);var h=l+Xa.IL(h)-1,q=e.dst_noise_scale0,l=e.dst_noise_scale1,n=e.dst_noise_freq0,m=e.dst_noise_freq1,C=Cc;C[0]=q*(b+n*a);C[1]=q*(c+n*a);q=Xa.EI(C);C[0]=l*(c-m*a);C[1]=l*(b-m*a);l=f*q*Xa.EI(C);e.pn?(m=(b-e.os[0])/e.ps[0],C=(e.os[1]+c)/e.ps[1],m+=.5,C+=.5,1<m||0>m||1<C||0>C?b=l:(d=Xa.EN(d.BI,e.CI,m,C),m=e.dir_noise_scale,C=e.dir_noise_freq,q=Math.sqrt(d),n=Math.max(q,e.dst_min_fac),b=f*Math.max(d,e.dir_min_shore_fac)*Math.sin(q/(g/e.WG/Math.PI)+e.dir_freq*a)*Math.max(Xa.EI([m/
g*(b+C*a),m/g*(c+C*a)]),e.dir_min_noise_fac)*(1-n)+l*n,h*=d)):b=l;return k+(b+.05*h)}function ya(a,b){a.cp&&a.type==T.rc&&b.lc!=a.lc&&(a.lc=b.lc);b.lc||a.type!=T.vq||(a.Ku=0)}function Q(a,b,c,d){var e=Ga.lb(a,b);Pa.UB(e.H,c,d);e.Tt=!0;Ga.Dn(a,b,function(b,e,f){f.active&&f.from==c&&ga.GX(f)&&va(a,b,f.to,d)});Ga.$l(a,b,function(b,e,f){f.active&&f.from==c&&f.from==f.to&&Q(a,b,c,d)})}function va(a,b,c,d){a=Ga.lb(a,b).kb;for(b=0;b<a.length;b++)for(var e=a[b].Ua,f=0;f<e.length;f++)Y.u3(e[f].Fa,d,c)}function Va(a){for(var b=
Z(a,[T.yk]),c=0;c<b.length;c++){var d=b[c],e=d.H,f=a.Ek.A,g=Wa.Wb(f.D,kc),k=Mb;k[0]=0;k[1]=0;k[2]=-d.Nd[2]/2;d=Wa.Fb(f.D,vb);Ma.transformQuat(k,d,k);k[0]+=g[0];k[1]+=g[1];k[2]=0;Ra.identity(d);Pa.xI(e,k,d)}}function Ba(a,b){Ga.ka(a,function(c,d){if(d.type==T.tj){d.rb[0]&&d.xi[0]||Xa.K("Wrong MOTION_BLUR subscene");var e=d.rb[0],f=d.xi[0];d.xi[0]=d.H.bc;Ga.Dn(a,c,function(b,c,d){d.active&&va(a,b,d.to,f)});Q(a,c,e.from,f);va(a,c,e.to,d.xi[0]);d.bB=Math.exp(-b/d.mb_factor)}})}function Aa(a){return a.J.pj}
function ka(a,b){if(!a.J.gj)return null;for(var c=a.J.gj.Yk,d=0;d<c.length;d++)if(c[d]==b)return d;c=a.J.gj.lF;for(d=0;d<c.length;d++)if(c[d]==b)return d;return null}var Y=w("__batch"),ua=w("__boundings"),Pa=w("__camera"),wa=w("__config"),W=w("__container"),Ya=w("__debug"),Ga=w("__graph"),z=w("__hud"),Da=w("__input"),ta=w("__mat4"),sa=w("__nodemat"),Qa=w("__objects"),cb=w("__textures"),Ia=w("__obj_util"),Oa=w("__physics"),Ea=w("__prerender"),Na=w("__primitives"),Fa=w("__print"),Ra=w("__quat"),Ha=
w("__renderer"),ga=w("__scenegraph"),Lb=w("__sfx"),na=w("__shaders"),T=w("__subscene"),Ka=w("__textures"),Wa=w("__tsr"),Xa=w("__util"),Ma=w("__vec3"),ab=w("__vec4"),ub=w("__version"),rb=wa.Bo,Ca=wa.L,Ua=wa.Ni,Xb=wa.zd,$a=wa.fs,Fb=[T.yk,T.ae,T.Nb,T.Hd,T.Fh,T.Fe,T.Ge,T.$d,T.Vg,T.dg,T.Df,T.zi,T.Wg,T.Ci,T.Bi];a.A8=Fb;var nb=[T.Nb,T.Hd,T.Fh,T.Fe,T.Ge,T.$d,T.sq,T.rx,T.Ye,T.Vg,T.dg,T.Cx,T.Wg,T.ae,T.Df,T.zi,T.Ci],sb=[T.Nb,T.Kx,T.Hd,T.Fh,T.Fe,T.Ge,T.$d,T.Vg,T.dg],ic=[T.ae,T.Nb,T.Hd,T.Fh,T.Fe,T.Ge,T.$d,T.Vg,
T.dg,T.Df,T.zi,T.Wg,T.sq,T.Ci,T.Bi],jc=[T.Nb,T.Hd,T.Fh,T.Fe,T.Ge,T.$d,T.Vg,T.dg],ib=null,fb=null,Ta=[],Ib=null,Yb=Math.PI/2,Cc=new Float32Array(2),kc=new Float32Array(3),Mb=new Float32Array(3),vb=new Float32Array(4),Za=new Float32Array(4),Ab=new Float32Array(16),Sb=new Float32Array(24),Nb=new Float32Array(24),Dc=ua.If(),sc=ua.If(),tc=0,uc=-Infinity,lc=new Uint8Array(4);a.y$=function(){return{}};a.gs=function(a){fb=a;Lb.N3(a)};a.a3=function(a,b){var c=a.J,d=ga.CY(c.Da);if(a==b){S(a,W.wO(),W.vO());
for(var e=0;e<d.length;e++)a.J.zp.push(d[e])}else for(e=a.Yg[0],S(a,e.Rl,e.Rl),e=0;e<d.length;e++)b.J.zp.push(d[e]);d=Z(a,ic);for(e=0;e<d.length;e++)d[e].pj.set(c.pj);for(e=0;e<c.zp.length;e++)c.zp[e].type==T.ae&&Ha.cl(c.zp[e])};a.Ui=t;a.uz=c;a.R=b;a.Ya=function(){return fb?!0:!1};a.Jm=function(a){return a.Ek};a.cv=function(){return Ta};a.Uz=function(){if(1==Ta.length)return Ta;for(var a=0;a<Ta.length;a++){var b=Ta[a].J.Da;Ga.ka(b,function(b,c){for(var d=c.kb,e=0;e<d.length;e++)for(var f=d[e].Ua,
g=0;g<f.length;g++){for(var k=f[g],h=k.Fa.xa,l=k.Fa.jg,q=null,n=0;n<h.length;n++)if("SCENE"==h[n].source&&h[n].uw==Ta[a].name&&c.type!=T.PD){Fa.error('Texture-scene loop detected. A scene is rendered to texture "'+l[n]+'" yet this texture belongs to the same scene.');q=k.Fa;break}if(q)for(h=q.xa,q.xa=[],q.Ig=[],Y.H5(q,null),Y.Ed(q),T.pd(c,k),n=0;n<h.length;n++)cb.cM(h[n])}})}for(var c=[],a=0;a<Ta.length;a++)if(b=Ta[a],!b.Yg.length){b=Ga.Cl(Ib,b);Ga.TZ(Ib,b);b=Ga.wn(Ib,b,Ga.gm);b=Ga.VI(b);Ga.ka(b,
function(a,b){c.push(b)});break}return c};a.jW=function(a,b,c,d,f){a.Yg=a.Yg||[];a.Ta=null;var h=a.J,q=Ia.La(a.Ek,a),n=a.Ek.A;h.dt=[];var C=a.world;h.x1=c.length;h.xn=O(c);h.uC=B(C,h.xn);h.On=D(C,h.uC);h.xT=l(C);if(C=!a.Yg.length)a:{if("HMD"==Ca.stereo){if(q.oa[0].type!=Pa.fd){Fa.warn("Head-mounted display stereo is disabled for the non-perspective camera");Ca.stereo="NONE";C=!1;break a}if(!Da.Cj(Da.Tb)){Fa.warn("Head-mounted display stereo is disabled for the non-WebVR and non-mobile devices");Ca.stereo=
"NONE";C=!1;break a}}C="HMD"==Ca.stereo}h.pA=C;if(C=!a.Yg.length)q.oa[0].type!=Pa.fd&&"ANAGLYPH"==Ca.stereo?(Fa.warn("Anaglyph stereo is disabled for the non-perspective camera"),Ca.stereo="NONE",C=!1):C="ANAGLYPH"==Ca.stereo;h.anaglyph_use=C;if(C=!a.Yg.length)q.oa[0].type!=Pa.fd&&"SIDEBYSIDE"==Ca.stereo?(Fa.warn("Side-by-side stereo is disabled for the non-perspective camera"),Ca.stereo="NONE",C=!1):C="SIDEBYSIDE"==Ca.stereo;h.qw=C;h.bW=!h.anaglyph_use&&!h.qw&&E(a,f);h.gj=e(a,b,d);h.TW=P(a);h.h2=
N(a);h.rX=M(a);h.F0=p(a);h.A2=I(a);h.Tj=y(a);h.dof=Ca.dof&&(0<n.dof_distance||n.dof_object);h.motion_blur=Ca.motion_blur&&a.b4w_enable_motion_blur;h.compositing=Ca.compositing&&a.b4w_enable_color_correction;h.antialiasing=Ca.antialiasing&&1==Ca.oc&&"NONE"!=a.b4w_antialiasing_quality;h.ssao=Ca.ssao&&a.b4w_enable_ssao;h.god_rays=Ca.god_rays&&a.b4w_enable_god_rays&&h.xn;h.xZ=Ca.Zy;h.bA=a.b4w_glow_settings.render_glow_over_blend;h.b5=v(a);f=g(d);h.OP=f;h.refractions=K(a,f);h.Cd=k(a,c,d);h.Yd=r(d);h.rj=
A(d);h.L4=x(d);h.Xf=m(d);h.kd=u(a,d);h.VX=L(a,d);h.outline=F(a,d);h.glow_materials=U(a,d);h.V1=a.b4w_lod_smooth_type;h.EP=a.b4w_lod_hyst_interval;switch(Ca.reflection_quality?Ca.reflection_quality:a.b4w_reflection_quality){case "LOW":h.Zk=$a.MM;h.fj=$a.pQ;break;case "MEDIUM":h.Zk=$a.pZ;h.fj=$a.S2;break;case "HIGH":h.Zk=$a.oZ;h.fj=$a.Q2;break;default:h.Zk=$a.MM,h.fj=$a.pQ}W.jP()?(Fa.log("%cENABLE HIDPI MODE","color: #00a"),h.LK="AA_QUALITY_LOW",h.cs=1,Ca.oc=1):1<Ca.oc?(Fa.log("%cENABLE MSAA RENDERING: "+
Ca.oc+"x","color: #00a"),h.cs=1):(h.LK="AA_QUALITY_"+a.b4w_antialiasing_quality,h.cs=Ca.quality===wa.Vn?1.33:1);c=a.Yg.sort(function(a,b){return b.Rl-a.Rl});h.Da=ga.BY(h,q,n,c);h.zp=[];h.iB=!1;h.iH=!1;h.jH=!1;h.pj=new Float32Array(3);Ta.push(a);Ib||(Ib=Ga.create());Ga.Z(Ib,a);for(h=0;h<b.length;h++)Ia.dI(b[h],!0,a);a=W.re();W.resize(a.clientWidth,a.clientHeight,!0)};a.kW=function(a,b,c){for(var d=0;d<b.length;d++){var e=b[d].J;e&&e.Sm&&(e.ft=c,a.J.dt.push(b[d]))}};a.Oz=function(a){return a.J.Da};
a.wN=function(a,b){Ga.ka(b,function(c,d){var e=null;switch(d.type){case T.rc:e=Y.My(d.Uv);break;case T.Kx:e=Y.IY(d);break;case T.gE:e=Y.JY(d);break;case T.DJ:e=Y.oY();break;case T.sq:e=Y.sY(d.uB,d.nj,d.un);break;case T.rx:e=Y.tY();break;case T.tj:e=Y.wY();break;case T.ND:e=Y.hY(d.zy);break;case T.qt:var e=Y.pY(d),f=d.H.dof_power;if(d.dof_bokeh){var f=f/2,g=ga.Pz(b,d,T.rc);ga.Ud(g[0],f);ga.Ud(g[1],f);g[0]=ga.sd(b,g[0],T.rc);ga.Ud(g[0],f)}else{var g=ga.sd(b,d,T.rc),k=ga.sd(b,g,T.rc);ga.Ud(g,f);ga.Ud(k,
f)}break;case T.vq:var e=Y.xY(),f=ga.sd(b,d,T.rc),g=ga.sd(b,f,T.rc),k=ga.sd(b,g,T.rc),h=ga.sd(b,k,T.rc);ga.Ud(g,d.au);ga.Ud(f,d.au);ga.Ud(h,d.Qu*d.tp);ga.Ud(k,d.Qu*d.tp);break;case T.st:e=Y.rY();break;case T.OD:e=Y.iY();break;case T.wJ:e=Y.cY(d);break;case T.eE:case T.Ix:case T.Jt:case T.Jx:e=Y.GY(d.type);break;case T.Gh:e=Y.KY(d.Ib);break;case T.Ye:e=Y.lY(a,d);break;case T.km:e=Y.jY();break;case T.wq:e=Y.kY();break;case T.AJ:e=Y.gY();break;case T.LUMINANCE:e=Y.uY();break;case T.zJ:e=Y.dY();break;
case T.Cx:e=Y.vY(d.ao);break;case T.lt:e=Y.fY(d.ky);break;case T.nK:e=Y.My("NONE");break;case T.RV:e=Y.kZ();break;case T.Wp:e=Y.bY();break;case T.Ft:e=Y.zY()}e&&(f=T.Xj(e,Ia.Rq("NONE")),T.pd(d,f),ga.vo(b,d,e),G(e))})};a.pm=function(a,b,c,e){switch(b.type){case "MESH":case "LINE":case "WORLD":var g=a.J.Da,k=b.A;!ga.cc(g,T.ae)&&k.ze&&(k.ze=!1);k=Z(a,Fb);(c||e)&&Oa.pm(b,a);for(e=0;e<k.length;e++){var h=k[e],l=b,n=g,m=a,p=c;switch(h.type){case T.Nb:f(h,l,n,"OPAQUE",m,p);break;case T.Hd:f(h,l,n,"BLEND",
m,p);break;case T.Fh:f(h,l,n,"XRAY",m,p);break;case T.Fe:f(h,l,n,"GLOW",m,p);break;case T.Ge:case T.$d:q(h,l,n,!1,m,p);break;case T.Vg:case T.dg:q(h,l,n,!0,m,p);break;case T.Wg:for(var v=Ia.La(l,m),A=v.da,u=0;u<A.length;u++){var y=A[u];if("SHADOW"==y.type&&"RECEIVE"==y.Ib&&y.ze){if(!p&&(d(y,h,l,n,"SHADOW",m),!Y.Ed(y)))continue;var E=T.Xj(y,l.A,v.dh[u]);T.pd(h,E);ga.vo(n,h,y);G(y)}}break;case T.ae:v=!1;A=l.A;l=Ia.La(l,m);u=l.da;y=ga.cc(n,T.yk);for(E=0;E<u.length;E++){var B=u[E];if("SHADOW"==B.type&&
"CAST"==B.Ib){v=!0;if(!p){X(B);var r=h.Rr;Y.Vf(B,"NUM_LIGHTS",r);Y.Vf(B,"NUM_LFACTORS",r%2?Math.floor(r/2)+1:r/2);H(B.qb,h.H);na.wa(B.qb,"SHADOW_USAGE","SHADOW_CASTING");B.kd&&y&&R(B,y,A);Y.Vf(B,"SHADOW_TEX_RES",na.fa(m.J.Cd.csm_resolution));if(!Y.Ed(B))continue}B.kd&&(m.J.Cd.JZ=!0);r=T.Xj(B,A,l.dh[E]);T.pd(h,r);ga.vo(n,h,B);G(B)}}v&&(l=m.J.Cd,p=ga.cc(n,T.Nb),C(h,m,p.H,l,!0));break;case T.Df:ia(h,l,n,m,p);break;case T.zi:ia(h,l,n,m,p);break;case T.Ci:v=l.A;A=Ia.La(l,m);u=A.da;for(y=0;y<u.length;y++)if(E=
u[y],"COLOR_ID"==E.type&&"OUTLINE"==E.Ib){if(!p&&(d(E,h,l,n,"COLOR_ID",m),Y.Vf(E,"USE_OUTLINE",1),!Y.Ed(E)))continue;E=T.Xj(E,v,A.dh[y]);T.pd(h,E)}break;case T.yk:n=l.A;l=Ia.La(l,m);m=l.da;for(v=0;v<m.length;v++)if(A=m[v],"GRASS_MAP"==A.type){if(!p&&!Y.Ed(A))if("DEBUG"===ub.type())Y.ay(A,"error.glslv","error.glslf"),Y.Ed(A);else continue;A=T.Xj(A,n,l.dh[v]);T.pd(h,A);A=h.H;B=n.Ki;u=h.Nd[0];y=h.Nd[1];E=h.Nd[2];0==u&&0==y?(u=B.min_z,y=B.max_z):(u=Math.min(u,B.min_z),y=Math.max(y,B.max_z));B=1E-4*(y-
u);u-=B;y+=B;h.Nd[0]=u;h.Nd[1]=y;Pa.sR(A,E/2,E/2,-y,-u);Pa.Nl(A,!1)}break;case T.Bi:for(v=l.A,l=Ia.La(l,m),m=l.da,A=0;A<m.length;A++)if(u=m[A],"DEBUG_VIEW"==u.type){if(!p&&(u.kd&&(y=ga.cc(n,T.yk))&&R(u,y,v),!Y.Ed(u)))if("DEBUG"===ub.type())Y.ay(u,"error.glslv","error.glslf"),Y.Ed(u);else break;y=T.Xj(u,v,l.dh[A]);T.pd(h,y);ga.vo(n,h,u);G(u)}}}break;case "LAMP":la(b,a)}c=Ia.La(b,a);g=c.da;for(k=0;k<g.length;k++)null==g[k].Hb&&"PHYSICS"!=g[k].type&&(Ia.XQ(c,k),k--);Ia.dI(b,!0,a)};a.b1=function(a,b){if(a&&
a.J&&a.J.Da){var c=a.J.Da,d=ga.cc(a.J.Da,T.Ye);if(d){var e=null;ga.Ms(c,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==T.Ye&&d.type==T.mm)return e=a.Xa,!0});if(e){var f=$a.Ry,g=Y.K_(b,a);if(g&&g.Uj)g=sa.o0(sa.Sz(g.Pe).Da),-1!=g&&(f=cb.DE(g/2));else if(g=a.J.On.Fp)f=g.vS;f=Math.min(f,Ua.ph);d.H.width=f;d.H.height=f;Ka.YB(e,f);n(a,f);if(d=ga.cc(a.J.Da,T.km)){d.H.width=32;d.H.height=32;var k=null;ga.Ms(c,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==T.km&&d.type==T.Nb)return k=a.Xa,!0});k&&Ka.YB(k,
32)}if(d=ga.cc(a.J.Da,T.wq)){d.H.width=128;d.H.height=128;var h=null;ga.Ms(c,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==T.wq&&d.type==T.Nb)return h=a.Xa,!0});h&&Ka.YB(h,128)}}}}};a.S5=function(a,b){for(var c=a.T,d=0;d<c.length;d++){var e=c[d].wb,f=e.J.Da,g=ga.cc(e.J.Da,T.Ye);if(g){var k=null;ga.Ms(f,function(a,b,c,d){if("CUBEMAP"==a.from&&c.type==T.Ye&&d.type==T.km)return k=a.Xa,!0});k&&(f=cb.DE(b.height/2),f=Math.min(f,Ua.ph),g.H.width=f,g.H.height=f,Ka.YB(k,f),n(e,f))}}};a.eI=function(a){a.J.iB=
!0};a.l6=function(a,b){Ga.ka(b,function(b,c){c.type===T.ae&&(Wa.copy(a.D,c.H.D),Wa.copy(a.Ng,c.H.pw))})};a.zfa=pa;a.U_=function(a,b){for(var c=a.J.Cd,d=new Float32Array(c.csm_num),e=0;e<c.csm_num;e++)d[e]=Pa.nZ(c,b,e);return d};a.ju=ma;a.qo=ea;a.DG=function(a){return a.A.bi};a.KQ=function(a,b){for(var c=0;c<a.T.length;c++)for(var d=Z(a.T[c].wb,Fb),e=0;e<d.length;e++)for(var f=d[e].kb,g=0;g<f.length;g++)for(var k=f[g].Ua,h=k.length-1;0<=h;h--){var l=k[h];if(l.sh==a.A)if(l.Fa){if("undefined"==typeof b||
-1!=l.Fa.Dc.indexOf(b)||0==l.Fa.Dc.length)Y.dM(l.Fa),k.splice(h,1)}else k.splice(h,1)}};a.V5=function(a,b){for(var c=a.xd,d=Ia.La(a,b).Av,e=Z(b,nb),f=0;f<e.length;f++){var g=e[f];g.ip.set(c.ru,4*d);g.Wa=!0}};a.U5=la;a.lD=function(a){a=a.T;for(var b=0;b<a.length;b++)da(a[b].wb)};a.mD=da;a.n6=xa;a.Ja=function(){for(var a=0;a<Ta.length;a++){var b=Ta[a];Ga.ka(b.J.Da,function(a,b){if(b.type!=T.mm){var c=b.H;Ha.o3(c.Mf,c.bc,c.og,c.width,c.height);for(var c=b.kb,d=0;d<c.length;d++)for(var e=c[d].Ua,f=0;f<
e.length;f++){var g=e[f].Fa;g&&Y.dM(g)}}});b.J.Da=null;b.J.zp=[]}fb=ib=null;Ta.length=0;Ib=null};a.KP=function(a,b,c){a=Pa.a_(a,a.near,a.far,null,!0);var d=Na.A_(a);a=Ia.Rq("DYNAMIC");a.Ki=a.Ca={max_x:1E12,min_x:-1E12,max_y:1E12,min_y:-1E12,max_z:1E12,min_z:-1E12};a.bf=a.Bc=ua.OW();var e=a.bf.pb;a.qm=a.Lb=ua.uE([e,0,0],[0,e,0],[0,0,e],a.bf.V);c=Y.FY(d,c);c.bl=!0;c=T.Xj(c,a);T.pd(b,c)};a.Nba=function(a){return[a.frame_start,a.frame_end]};a.LR=function(a,b,c){W.D4(a,b,c);fb&&S(fb,a,b)};a.zh=Z;a.dc=
fa;a.m3=function(){aa(!1)};a.n3=function(){aa(!0)};a.RN=function(a){a=fa(a,T.Nb);var b=a.se,c=a.De,d=[],e=[];d[0]=b[0];d[1]=b[1];d[2]=b[2];e[0]=c[0];e[1]=c[1];e[2]=c[2];return[a.ih,d,e]};a.iI=function(a,b,c,d){for(var e=Z(a,nb),f=0;f<e.length;f++){var g=e[f];g.se.set(c);g.De.set(d);g.ih=b;g.Wa=!0}(b=ga.cc(a.J.Da,T.Ye))&&xa(a,b)};a.oO=function(a){if((a=fa(a,T.Ye))&&a.procedural_skydome){var b={};b.color=Array(3);Ma.copy(a.rn,b.color);b.procedural_skydome=a.procedural_skydome;b.use_as_environment_lighting=
a.use_as_environment_lighting;b.rayleigh_brightness=a.rayleigh_brightness;b.mie_brightness=a.mie_brightness;b.spot_brightness=a.spot_brightness;b.scatter_strength=a.scatter_strength;b.rayleigh_strength=a.rayleigh_strength;b.mie_strength=a.mie_strength;b.rayleigh_collection_power=a.rayleigh_collection_power;b.mie_collection_power=a.mie_collection_power;b.mie_distribution=a.mie_distribution;return b}return null};a.d0=function(a){return Z(a,sb)[0].tg[0]};a.b0=function(a){return Z(a,sb)[0].tg[1]};a.e0=
function(a){return Z(a,sb)[0].tg[2]};a.c0=function(a){return Z(a,sb)[0].tg[3]};a.oR=function(a,b){for(var c=Z(a,sb),d=0;d<c.length;d++){var e=c[d];e.tg[0]=b;e.Wa=!0}};a.mR=function(a,b){for(var c=Z(a,sb),d=0;d<c.length;d++){var e=c[d];e.tg[1]=b;e.Wa=!0}};a.pR=function(a,b){for(var c=Z(a,sb),d=0;d<c.length;d++){var e=c[d];e.tg[2]=b;e.Wa=!0}};a.nR=function(a,b){for(var c=Z(a,sb),d=0;d<c.length;d++){var e=c[d];e.tg[3]=b;e.Wa=!0}};a.UN=function(a,b){var c=b||[],d=Z(a,sb)[0].qe;c[0]=d[0];c[1]=d[1];c[2]=
d[2];c[3]=d[3];return c};a.kI=function(a,b){for(var c=Z(a,sb),d=0;d<c.length;d++){var e=c[d];e.qe.set(b);e.Wa=!0}};a.pO=function(a){var b=fa(a,T.Kx),c=fa(a,T.gE);a=fa(a,T.Nb);if(!b)return null;var d={};d.quality=b.Hp;d.use_hemisphere=b.As;d.use_blur_depth=c.xs;d.blur_discard_value=c.ys;d.radius_increase=b.Cs;d.influence=b.Bs;d.dist_factor=b.zs;d.ssao_only=a.ssao_only;d.ssao_white=b.ssao_white;return d};a.ON=function(a){a=fa(a,T.qt);if(!a)return null;var b={};b.dof_on=a.H.dof_on;b.dof_bokeh=a.dof_bokeh;
b.dof_distance=a.H.dof_distance;b.dof_front_start=a.H.dof_front_start;b.dof_front_end=a.H.dof_front_end;b.dof_rear_start=a.H.dof_rear_start;b.dof_rear_end=a.H.dof_rear_end;b.dof_power=a.H.dof_power;b.dof_bokeh_intensity=a.H.dof_bokeh_intensity;b.dof_object=a.H.dof_object;return b};a.kR=za;a.YN=function(a){var b=Z(a,[T.sq]);a=fa(a,T.rx);if(!b||!a)return null;var c={};c.god_rays_max_ray_length=b[0].Ym;c.god_rays_intensity=a.god_rays_intensity;c.god_rays_steps=Y.L_(b[0].kb[0].Ua[0].Fa)[1];return c};
a.uR=function(a,b){var c=Z(a,[T.sq]),d=Z(a,[T.rx]);if(!c.length||!d.length)return Fa.error("God Rays are not enabled on the scene"),0;if("number"==typeof b.god_rays_intensity)for(var e=0;e<d.length;e++)d[e].god_rays_intensity=b.god_rays_intensity;if("number"==typeof b.god_rays_max_ray_length)for(var f=b.god_rays_max_ray_length,e=0;e<c.length;e++)c[e].Ym=f,c[e].bs=f/c[e].un/(e+1),c[e].Wa=!0;if("number"==typeof b.god_rays_steps)for(var g=na.fa(b.god_rays_steps,1),f=c[0].Ym,e=0;e<c.length;e++){c[e].un=
g;c[e].bs=f/g/(e+1);c[e].Wa=!0;var k=c[e].kb[0].Ua[0],h=k.Fa;Y.Vf(h,"STEPS_PER_PASS",g);Y.Ed(h);T.pd(c[e],k)}for(e=0;e<d.length;e++)d.Wa=!0};a.FN=function(a){var b=fa(a,T.Cx);a=fa(a,T.lt);if(!b||!a)return null;var c={};c.key=b.Jq;c.edge_lum=b.Iq;c.blur=a.Gq;c.adaptive=b.ao;c.average_luminance=b.average_luminance;return c};a.aR=ha;a.XN=function(a){a=fa(a,T.st);if(!a)return null;var b={};b.small_glow_mask_coeff=a.small_glow_mask_coeff;b.large_glow_mask_coeff=a.large_glow_mask_coeff;b.small_glow_mask_width=
a.small_glow_mask_width;b.large_glow_mask_width=a.large_glow_mask_width;return b};a.tR=J;a.CO=function(a){var b=Aa(a);a=Ma.length(b);if(0==a)return null;var b=Xa.JB(Math.atan2(b[0],-b[1])),c={};c.wind_dir=b;c.wind_strength=a;return c};a.H3=function(a){a.J.iH=!0};a.AO=ra;a.zO=function(a,b){var c=a.J.Yd,d=fa(a,T.Nb);d&&c&&(b.waves_height=c.waves_height,b.waves_length=c.waves_length,b.water_fog_density=d.oj[3],c=b.water_fog_color=[],c[0]=d.oj[0],c[1]=d.oj[1],c[2]=d.oj[2])};a.JR=function(a,b){var c=a.J.Yd;
if(!c)return Fa.error("set_water_params() - no water parameters on the scene"),null;"number"==typeof b.dst_noise_scale0&&(c.dst_noise_scale0=b.dst_noise_scale0);"number"==typeof b.dst_noise_scale1&&(c.dst_noise_scale1=b.dst_noise_scale1);"number"==typeof b.dst_noise_freq0&&(c.dst_noise_freq0=b.dst_noise_freq0);"number"==typeof b.dst_noise_freq1&&(c.dst_noise_freq1=b.dst_noise_freq1);"number"==typeof b.dir_min_shore_fac&&(c.dir_min_shore_fac=b.dir_min_shore_fac);"number"==typeof b.dir_freq&&(c.dir_freq=
b.dir_freq);"number"==typeof b.dir_noise_scale&&(c.dir_noise_scale=b.dir_noise_scale);"number"==typeof b.dir_noise_freq&&(c.dir_noise_freq=b.dir_noise_freq);"number"==typeof b.dir_min_noise_fac&&(c.dir_min_noise_fac=b.dir_min_noise_fac);"number"==typeof b.dst_min_fac&&(c.dst_min_fac=b.dst_min_fac);"number"==typeof b.waves_hor_fac&&(c.waves_hor_fac=b.waves_hor_fac);"number"==typeof b.water_dynamic&&(c.Lu=b.water_dynamic);for(var d=Z(a,jc),e=0;e<d.length;e++){var f=d[e];"number"==typeof b.water_fog_density&&
c.qe&&(f.oj[3]=b.water_fog_density);"object"==typeof b.water_fog_color&&c.qe&&f.oj.set(b.water_fog_color);f.Wa=!0}};a.nO=function(a,b,c){var d=a.J.Yd;if(!d.pn)return 100;var e=d.WG;a=d.vk;var f=(b[0]-d.os[0])/d.ps[0],g=(d.os[1]+b[1])/d.ps[1],f=f+.5,g=g+.5;if(!(1<f||0>f||1<g||0>g))return d=e*Xa.EN(fb.J.BI,d.CI,f,g),b=(a-b[2])*c,b=Math.sqrt(d*d+b*b)};a.update=function(a,c){for(var d=b().Ek.A,e=0;e<Ta.length;e++){var f=Ta[e],g=f.J.Da,k=f.J;if(k.Yd)var h=Wa.X(d.D),l=h[2]-ra(f,h[0],h[1]);for(h=0;h<k.dt.length;h++){var q=
k.dt[h].J,n=q.tb,m=q.je;if(!(f.b4w_use_nla&&q.Jn||!n&&!m)&&Ka.qT(q)){var C=Ka.nT(q),p=Ka.pT(q);n&&Ca.is_mobile_device&&(p-=5);var v=Ka.D6(q);C>=v&&q.am||C<p?(Ka.PQ(q),m&&(q.nn=Ka.TB(q,a))):C>=v&&!q.am?Ka.yH(q):Ka.rT(q)&&(n?Ka.US(q):(n=Ka.TB(q,a),n!=q.nn&&(Ka.TS(q),q.Ml++),q.nn=n))}}Ga.ka(g,function(b,c){-1<ic.indexOf(c.type)&&(c.time=a);k.Yd&&(c.fu=l)})}for(e=0;e<Ta.length;e++)if(f=Ta[e],k=f.J,g=k.Da,d=k.zp,d.length)for(k.iB&&(ja(f),k.iB=!1),k.iH&&(Va(f),k.iH=!1),k.jH&&(qa(f),k.jH=!1),k.motion_blur&&
Ba(g,c),f=ga.cc(g,T.Ci),h=0;h<d.length;h++)g=d[h],Ea.xp(g),f&&ya(g,f),Ha.cl(g);Ca.show_hud_debug_info&&z.I4(Ta,c)};a.w3=function(a){a.J.jH=!0};a.QF=function(a){var b=[];Ga.ka(a.J.Da,function(a,c){b.push(c)});return b};a.IN=function(){var a=fa(fb,T.Hd),b=fb;return a||b.J.Yd?a.fu:null};a.SS=function(a){Ga.ka(a.J.Da,function(a,b){b.Wa=!0})};a.U3=function(a,c){a.debug_view_mode=c;a.lc=c!=Ya.gx;a.xb=c==Ya.hx;a.Wa=!0;for(var d=b(),e=0;e<jc.length;e++)for(var f=Z(d,[jc[e]]),g=0;g<f.length;g++)f[g].Ju=c==
Ya.rt};a.T3=function(a,b){a.debug_colors_seed=b;a.Wa=!0};a.p4=function(a,b){a.Wy=b;a.Wa=!0};a.A4=function(a,b){for(var c=a.kb,d=0;d<c.length;d++)for(var e=c[d].Ua,f=0;f<e.length;f++){var g=e[f].Fa;Ma.copy(b,g.wireframe_edge_color);g.Hb.Lr=!0}};a.NS=function(a,b){var c=b.ar,d=a.J.pj;if(c&&"WIND"==c.type&&d){var e=Wa.la(b.A.D);Ma.transformQuat(Xa.ic,e,d);Ma.normalize(d,d);Ma.scale(d,c.iS,d);c=Z(a,ic);for(e=0;e<c.length;e++)c[e].pj.set(d);return!0}return!1};a.L2=function(a,b,c){var d=fa(a,T.Df);if(d){var e=
rb.enabled&&(rb.yw===T.Df||rb.yw===T.zi);if(e)var f=W.gu(b,c,Cc,d.H);else{var g=W.Wh();Pa.S3(d.H,b,c,g.clientWidth,g.clientHeight)}Ea.xp(d);d.lc&&Ha.cl(d);(a=fa(a,T.zi))?(ta.copy(d.H.Jb,a.H.Jb),ta.copy(d.H.Mg,a.H.Mg),Xa.GF(a.H.Mg,a.H.No),Ea.xp(a),a.lc&&Ha.cl(a),b=a.H):b=d.H;if(d.lc||a&&a.lc)return e?(f[1]=b.height-f[1],Ha.KB(b.Mf,f[0],f[1],1,1,lc)):Ha.KB(a?a.H.Mf:d.H.Mf,0,0,1,1,lc)}else Fa.error("Object Selection is not available on the scene");return null};a.AR=function(a){for(var c=b(),c=Z(c,[T.vq]),
d=0;d<c.length;d++){var e=c[d];e.dj.set(a);e.Wa=!0}};a.hca=Aa;a.Ro=function(a){var b={title:"",description:""};a.b4w_tags&&(b.title=a.b4w_tags.title,b.description=a.b4w_tags.description);return b};a.dv=function(a){return a.b4w_custom_prop};a.MS=function(a,b){var c=kc;Ma.negate(b,c);for(var d=0;6>d;d++){var e=a.Oh[d],f=a.Ao[d],g=a.H;ta.translate(Xa.MT[d],c,e);ta.multiply(g.Jb,e,g.Mg);Xa.GF(g.Mg,f)}};a.PS=function(a,b,c){Xa.x5(b,c,Xa.ic,a.H.Kc)};a.gL=function(a,b,c){var d=a.J.gj;if(d&&b)for(var e=0;e<
b.length;e++){var f=b[e],g=Ia.La(f,a);if(-1!=f.A.ue){var k=d.gk,h=d.zB,f=f.A.ue;h.length&&f<h.length?g.gk=h[f]:k.length&&f<k.length&&(g.gk=k[f])}else-1!=f.A.Ke&&(k=d.Yk,h=d.lF,f=f.A.Ke,h.length?g.Yk=h[f]:k.length&&(g.Yk=k[f]))}if(c)for(b=Ia.Xz(c,Ca.ssao&&a.b4w_enable_ssao),c=a.J.Cd,e=0;e<b.length;e++)if(g=Ia.La(b[e],a),c)for(d=Z(a,[T.ae]),f=0;f<d.length;f++)e==d[f].xh&&g.AI.push(d[f])};a.NP=function(a,b){return a.timeline_markers[b]};a.hs=function(a){var c=b();if(c=fa(c,T.Gh))a.distortion_coefs&&
(c.al[0]=a.distortion_coefs[0],c.al[1]=a.distortion_coefs[1],c.Wa=!0),a.chromatic_aberration_coefs&&(c.chromatic_aberration_coefs[0]=a.chromatic_aberration_coefs[0],c.chromatic_aberration_coefs[1]=a.chromatic_aberration_coefs[1],c.chromatic_aberration_coefs[2]=a.chromatic_aberration_coefs[2],c.chromatic_aberration_coefs[3]=a.chromatic_aberration_coefs[3],c.Wa=!0),a.base_line_factor&&(c.al[2]=a.base_line_factor,c.Wa=!0),a.inter_lens_factor&&(c.al[3]=a.inter_lens_factor,c.Wa=!0),null!=a.enable_hmd_stereo&&
(c.enable_hmd_stereo=a.enable_hmd_stereo,c.Wa=!0)};a.fB=function(b,c){for(var d=Ta,e=0;e<d.length;e++)ga.n2(a.Oz(d[e]),b,c)};a.vfa=function(a){for(var b=Qa.xc(a,"LAMP",Qa.Vc),c=Z(a,Fb),d=0;d<c.length;d++)for(var e=c[d],f=e.kb,g=0;g<f.length;g++)for(var k=f[g].Ua,h=0;h<k.length;h++){var l=k[h],q=l.Fa;"MAIN"==q.type&&(Y.G5(q,b,a),Y.Ed(q),T.pd(e,l))}};a.Eda=function(a){for(var b=0;b<Ta.length;b++)Ga.ka(Ta[b].J.Da,function(b,c){for(var d=c.kb,e=0;e<d.length;e++)for(var f=d[e].Ua,g=0;g<f.length;g++){var k=
f[g];k.Fa==a&&T.pd(c,k)}})}};b4w.module.__hud=function(a,w){function t(a){a.font="bold 15px Courier New";a.textBaseline="middle";a.shadowBlur=0;a.shadowColor=null}function c(a){b(' SCENE "'+a.name+'"');b(" Active                 Subscene   Lamps   Size   RenderCalls   Time");if(a.J){var c=0,e=0,g=0;m.ka(a.J.Da,function(a,k){if(k.type!=x.mm){for(var h=Math.round(k.H.width)+"x"+Math.round(k.H.height),m=0,p=0;p<k.kb.length;p++)m+=k.kb[p].Ua.length;p=k.Am;if(k.type==x.$d||k.type==x.dg)m*=6;var l=k.lc&&!k.Jo,v=l?k.ng:0;k.enqueue||
(k.ng=0);var B=l?" (\u2713)":" (\u2715)",r=x.RC(k);b(B,r,k.Rr,h,p,"of",m,"  ",v.toFixed(3));k.Am=0;c+=m;l&&(e+=p,g+=v)}});return[c,e,g]}b("No INFO")}function b(){for(var a=80+20*e[0],b=arguments[0],c=1;c<arguments.length;c++){for(var k="",h=0;h<r[c]-String(arguments[c]).length;h++)k+=" ";b+=k+arguments[c]}e[0]++;g.fillText(b,30,a)}function k(a,b,c){b=a.Oc*b;c.x=a.x+b;c.y=a.y;c.Oc=a.Oc-2*b;c.ec=a.ec}function h(a){return a.x+a.Oc/2}function O(a){var b=g,c={x:0,y:0,Oc:0,ec:0},e=b.canvas.width,b=b.canvas.height;
c.x=0;c.y=0;c.Oc=e;c.ec=b;k(c,.01,c);e=.02*c.ec;c.x=c.x;c.y+=e;c.Oc=c.Oc;c.ec=c.ec-2*e;e=c.Oc/8;c.x+=e*a;c.y=c.y;c.Oc=e;c.ec=c.ec;k(c,.02,c);return c}var m=w("__graph"),x=w("__subscene"),r=[5,30,4,10,5,3,5],g=null,e=[0,0];a.Nf=function(a){a=a.getContext("2d");t(a);return g=a};a.Jp=function(){g&&t(g)};a.reset=function(){var a=g;a&&(a.clearRect(0,0,a.canvas.width,a.canvas.height),a.fillStyle="rgba(0,0,0,0.5)",a.fillRect(0,0,a.canvas.width,a.canvas.height),e[0]=0,e[1]=0)};a.I4=function(a,k){var h=g;
if(h){h.textAlign="left";h.fillStyle="rgba(0,255,0,255)";b(" FPS",(1/k).toFixed(2));e[0]++;for(var m=h=0,v=0,p=0;p<a.length;p++){var B=c(a[p]),h=h+B[0],m=m+B[1],v=v+B[2];e[0]++}b(" ----------------------------------------------------------------");b("    ","TOTAL ACTIVE","","",m,"of",h,"  ",v.toFixed(3))}};a.print=function(){var a=g;a&&(a.textAlign="left",a.fillStyle="rgba(0,255,0,255)",b.apply(Math,arguments))};a.sQ=function(a,b,c,e,k,m,r){var p=g;if(p){b=O(b);var v=b.ec/5;b.x=b.x;b.y+=4*v;b.Oc=
b.Oc;b.ec=v;p.textAlign="center";p.fillStyle="#00FF00";g.fillText(a,h(b),b.y-10);p.strokeStyle="#00FF00";p.lineWidth=.5;p.beginPath();p.moveTo(b.x,b.y);p.lineTo(b.x+b.Oc,b.y);p.lineTo(b.x+b.Oc,b.y+b.ec);p.lineTo(b.x,b.y+b.ec);p.closePath();p.stroke();if(!m&&!r)for(m=1E6,r=-1E6,a=0;a<c.length;a++)m=Math.min(m,c[a]),r=Math.max(r,c[a]);p.textAlign="right";g.fillText(String(m),b.x-10,b.y+b.ec);g.fillText(String(r),b.x-10,b.y);p.textAlign="center";g.fillText(String(e),b.x,b.y+b.ec+15);g.fillText(String(k),
b.x+b.Oc,b.y+b.ec+15);p.strokeStyle="#FF0000";p.lineWidth=1.5;p.beginPath();e=b.Oc/(c.length-1);r=b.ec/(r-m);for(a=0;a<c.length;a++)k=b.x+e*a,v=b.y+b.ec-(c[a]-m)*r,a?p.lineTo(k,v):p.moveTo(k,v);p.stroke()}};a.aN=function(a,b,c,e,k,m,r){var p=g;if(p)for(p.textAlign="center",p.fillStyle="#00FF00",p.font="bold 12px Courier",c=O(c),g.fillText(b?"["+a+"]":a,h(c),c.y),0<=m&&g.fillText(m?"[M]":"[ ]",h(c)-15,c.y+30),0<=r&&g.fillText(r?"[S]":"[ ]",h(c)+15,c.y+30),a={x:0,y:0,Oc:0,ec:0},b=0;b<e.length;b++){m=
e[b];var v="VOLUME"==m[0];if(v){r=c.y+350;var l=c.Oc,u=a;u.x=c.x;u.y=r;u.Oc=l;u.ec=250}else{r=c.y+50+50*b;var l=c.Oc,u=c.ec,B=a;B.x=c.x;B.y=r;B.Oc=l;B.ec=u}r=p;var l=a,B=b==k,x=m[0],u=m[1],t=m[2],w=m[3],A=(w-t)/m[4],A=1>A?Math.floor(1/A-1E-5).toFixed(0).length:0;m=m[5]?Math.log(u/t)/Math.log(w/t):(u-t)/(w-t);r.textAlign="center";B?r.fillText("["+x+"]",h(l),l.y):r.fillText(x,h(l),l.y);r.strokeStyle="#00FF00";r.lineWidth=v?3:1;v?(r.textAlign="right",r.fillText(w.toFixed(A),h(l)-10,l.y+15),r.textAlign=
"right",r.fillText(t.toFixed(A),h(l)-10,l.y+l.ec-15)):(r.textAlign="right",r.fillText(t.toFixed(A),l.x+28,l.y+15),r.textAlign="left",r.fillText(w.toFixed(A),l.x+l.Oc-28,l.y+15));r.beginPath();if(v){var E=l.y+15+(l.ec-30)*(1-m);r.moveTo(h(l),l.y+15);r.lineTo(h(l),l.y+l.ec-15);r.moveTo(h(l)-5,l.y+15);r.lineTo(h(l)+5,l.y+15);r.moveTo(h(l)-5,l.y+l.ec-15);r.lineTo(h(l)+5,l.y+l.ec-15);r.moveTo(h(l)-5,E);r.lineTo(h(l)+5,E)}else{var n=l.x+30+(l.Oc-60)*m;r.moveTo(l.x+30,l.y+15);r.lineTo(l.x+l.Oc-30,l.y+15);
r.moveTo(l.x+30,l.y+15-5);r.lineTo(l.x+30,l.y+15+5);r.moveTo(l.x+l.Oc-30,l.y+15-5);r.lineTo(l.x+l.Oc-30,l.y+15+5);r.moveTo(n,l.y+15-5);r.lineTo(n,l.y+15+5)}r.stroke();"EQ_Q"==x?(m=Math.log(1+1/(2*u*u)+Math.sqrt((2+1/(u*u))*(2+1/(u*u))/4-1))/Math.log(2),v?(r.textAlign="left",r.fillText(u.toFixed(A),h(l)+10,E),r.textAlign="left",r.fillText("("+m.toFixed(A+1)+")",h(l)+10,E+10)):(r.textAlign="right",r.fillText(u.toFixed(A),n,l.y+30),r.textAlign="left",r.fillText("("+m.toFixed(A+1)+")",n,l.y+30))):v?(r.textAlign=
"left",r.fillText(u.toFixed(A),h(l)+10,E)):(r.textAlign="center",r.fillText(u.toFixed(A),n,l.y+30))}}};b4w.module.__input=function(a,w){function t(a){var b=G.Cm();return(20!=a||navigator.getVRDevices||navigator.getVRDisplays||b&&H())&&(10!=a||b&&window.DeviceOrientationEvent)?!0:!1}function c(a,b){if(!t(a))return null;var c={type:a,vh:!1,mi:[],cj:[],zl:[],Oe:[],Al:[],Bl:[],tv:[],rP:[],tl:[],Zl:[],Xl:[],Wl:[],element:b,hk:!0,vc:[],eB:new Float32Array(2),m2:0,distortion_coefs:new Float32Array(2),chromatic_aberration_coefs:new Float32Array(4),dw:null,Up:null,wk:null,Zd:null,orientation:pa.create(),position:ma.create(),
Si:window.VRFrameData?new VRFrameData:null,II:C.create(),il:new Float32Array(4),jl:new Float32Array(4),Wi:0,wj:0,iw:0,Nn:0,Vj:0,xj:0,Oo:[],Im:[0,0,0,0,0,0,0,0,0,0,0,0],sN:[0,0,0,0,0,0,0,0,0,0,0,0],Ez:[]};c.il[0]=c.il[1]=c.il[2]=c.il[3]=Math.PI/4;c.jl[0]=c.jl[1]=c.jl[2]=c.jl[3]=Math.PI/4;30==a||40==a||50==a?(c.vh=!!b,50==a?document.addEventListener("touchstart",function(){}):40==a&&(c.hk=!1)):10==a?c.vh=!0:20==a&&k(c);return c}function b(b,d){10==b||20==b?d=window:d||(40==b?d=document:d=R.re());for(var e=
0;e<za.length;e++)if(za[e].type==b&&za[e].element==d)return za[e];e=c(b,d);60!=b&&70!=b&&80!=b&&90!=b||e.Ez.push(a.cq,a.eq,a.mq,a.nq,a.oq,a.pq,a.Sn,a.Tn,a.qq,a.rq,a.fq,a.gq,a.hq,a.iq,a.jq,a.kq,a.lq,a.ix,a.jx,a.kx,a.lx,a.mx,a.nx,a.ox,a.px,a.qx,a.hm,a.Qn,a.im,a.Rn,a.aq,a.bq,a.vt,a.wt,a.xt,a.yt,a.tt,a.ut);e&&za.push(e);return e}function k(a){20==a.type&&(navigator.getVRDisplays?navigator.getVRDisplays().then(function(b){0<b.length&&(a.Zd=b[0],a.vh=!0,a.Zd.getFrameData(a.Si),a.dw&&a.dw())},function(){qa.va("WebVR displays are not found.");
a.vh=!1}):navigator.getVRDevices?(navigator.getVRDevices().then(function(b){x(a,b);b.length&&(a.vh=!0);a.dw&&a.dw()},function(){qa.va("WebVR devices are not found.");a.vh=!1}),O(a,ba.webvr)):(h(a),a.vh=!0))}function h(a){var b=ba.nonwebvr;a.Nn=b.Nn;a.Vj=b.Vj;a.xj=b.xj;O(a,b);a.Wi=b.Wi;a.wj=b.wj;a.iw=b.iw;m(a)}function O(a,b){a.distortion_coefs[0]=b.distortion_coefs[0];a.distortion_coefs[1]=b.distortion_coefs[1];a.chromatic_aberration_coefs[0]=b.chromatic_aberration_coefs[0];a.chromatic_aberration_coefs[1]=
b.chromatic_aberration_coefs[1];a.chromatic_aberration_coefs[2]=b.chromatic_aberration_coefs[2];a.chromatic_aberration_coefs[3]=b.chromatic_aberration_coefs[3]}function m(a){var b=Math.atan(a.Wi/2/a.iw*ba.nonwebvr.$M);b&&(a.il[0]=a.jl[0]=Math.min(b,Math.PI/3));b&&(a.il[1]=a.jl[3]=Math.min(b,Math.PI/3));b&&(a.il[2]=a.jl[2]=Math.min(b,Math.PI/3));b&&(a.il[3]=a.jl[1]=Math.min(b,Math.PI/3))}function x(a,b){var c=b.filter(function(a){return a instanceof HMDVRDevice}),d=null;c.length&&(d=c[0]);c=null;d&&
(c=b.filter(function(a){return-1!==a.deviceName.toLowerCase().indexOf("oculus")&&a.hardwareUnitId==d.hardwareUnitId&&a instanceof PositionSensorVRDevice}));a.Up=d;a.wk=c}function r(a,b,c){switch(a.type){case 20:var d=e(a,0);if(d&1){var f="left"==b?a.il:a.jl;ea.copy(f,c)}else if(f=a.Zd||a.Up)f=f.getEyeParameters(b),(f=f.fieldOfView||f.currentFieldOfView)?(c[0]=ia.df(f.upDegrees),c[1]=ia.df(f.rightDegrees),c[2]=ia.df(f.downDegrees),c[3]=ia.df(f.leftDegrees)):d&16&&(d=ca,"left"==b?ja.copy(a.Si.leftProjectionMatrix,
d):ja.copy(a.Si.rightProjectionMatrix,d),c[0]=Math.atan(-S[1]/S[2]),c[1]=Math.atan(-S[0]/S[2]),c[2]=Math.atan(S[1]/S[2]),c[3]=Math.atan(S[0]/S[2]));break;default:qa.error("fov is undefined for device: ",a.type)}return c}function g(a,b,c){switch(a.type){case 20:a.Zd&&("left"==b?ja.copy(a.Si.leftProjectionMatrix,c):"right"==b?ja.copy(a.Si.rightProjectionMatrix,c):qa.error("Unknown type of eye: ",b));break;default:qa.error("Projection matrix is undefined for device: ",a.type)}return c}function e(a,b){switch(b){case 0:var c=
0;navigator.getVRDisplays&&(c|=8,a.Si&&(c|=16));navigator.getVRDevices&&(c=la.is_mobile_device?c|4:c|2);return c||1;case 23:var d=a.Zd||a.Up;return d?(c=d.getEyeParameters("left"),d=d.getEyeParameters("right"),a.Zd?d.offset[0]-c.offset[0]:d.eyeTranslation.x-c.eyeTranslation.x):a.Wi}}function B(a,c){if(a){for(var d=0;d<a.buttons.length;d++)c.Oo[d]=a.buttons[d].value||+a.buttons[d].pressed;if(a.axes)for(d=0;d<a.axes.length;d++)c.Im[d]=a.axes[d];if(d=a.pose){var e=b(20).II;d.position&&C.Mc(d.position,
e,c.position);d.orientation&&C.AS(d.orientation,e,c.orientation)}}}function v(a){for(var b=0;b<a.Oo;b++)a.Oo[b]=0;for(b=0;b<a.Im.length;b++)a.sN[b]=a.Im[b],a.Im[b]=0;a.position.set(ia.hE);a.orientation.set(ia.Gx)}function P(a,b){var c=a.indexOf(b);0<=c&&(a[c]=null)}function N(a){return null===a}function M(a,b,c,d){switch(b){case 130:c&&P(a.mi,c);if(d||a.cj.every(N)&&a.mi.every(N))a.mi.length=0,a.cj.length=0,b=a.vc.indexOf(141),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("deviceorientation",
I,!1));break;case 140:c&&P(a.cj,c);if(d||a.cj.every(N)&&a.mi.every(N))a.mi.length=0,a.cj.length=0,b=a.vc.indexOf(141),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("deviceorientation",I,!1));break;case 50:c&&P(a.zl,c);if(d||a.zl.every(N))a.zl.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("mousedown",u,!1));break;case 40:c&&P(a.Oe,c);if(d||a.Oe.every(N))a.Oe.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("mousemove",D,!1));
break;case 41:c&&P(a.Oe,c);if(d||a.Oe.every(N))a.Oe.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("mousemove",l,!1));break;case 60:c&&P(a.Al,c);if(d||a.Al.every(N))a.Al.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("mouseout",L,!1),a.element.removeEventListener("mouseup",F,!1));break;case 70:c&&P(a.Bl,c);if(d||a.Bl.every(N))a.Bl.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("wheel",U,!1));break;
case 90:c&&P(a.tv,c);if(d||a.tv.every(N))a.tv.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("keydown",K,!1));break;case 80:c&&P(a.tl,c);if(d||a.tl.every(N))a.tl.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("keyup",A,!1));break;case 100:c&&P(a.Zl,c);if(d||a.Zl.every(N))a.Zl.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("touchstart",E,!1));break;case 110:c&&P(a.Xl,c);if(d||a.Xl.every(N))a.Xl.length=
0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("touchmove",n,!1));break;case 120:if(c&&P(a.Wl,c),d||a.Wl.every(N))a.Wl.length=0,b=a.vc.indexOf(b),0<=b&&(a.vc.splice(b,1),a.element.removeEventListener("touchend",f,!1))}}function p(a,b){ia.qH(a,ia.iE,b);if("orientation"in window)var c=ia.df(window.orientation);else"orientation"in window.screen?c=ia.df(window.screen.orientation.angle):c=0;c=pa.setAxisAngle(ia.qc,c,Ja);pa.multiply(b,c,b);return b}function I(a){var c=S;null===
a.alpha||null===a.beta||null===a.gamma?c[0]=c[1]=c[2]=0:(c[0]=ia.df(a.alpha),c[1]=ia.df(a.beta),c[2]=ia.df(a.gamma));a=b(10,a.currentTarget);for(var d=0;d<a.cj.length;d++){var e=a.cj[d];e&&(ma.copy(c,Z),e(Z))}if(a.mi.length)for(c=p(c,V),d=0;d<a.mi.length;d++)if(e=a.mi[d])pa.copy(c,fa),e(fa);for(d=0;d<a.mi.length;d++)a.mi[d]||a.mi.splice(d,1);for(d=0;d<a.cj.length;d++)a.cj[d]||a.cj.splice(d,1)}function y(a,b){switch(a.type){case 30:a.eB[0]=b.clientX,a.eB[1]=b.clientY,a.m2=b.which}}function D(a){if(!aa||
!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);y(c,a);for(var d=0;d<c.Oe.length;d++){var e=c.Oe[d];e&&(oa[0]=a.clientX,oa[1]=a.clientY,e(oa))}c.hk&&a.preventDefault();for(d=0;d<c.Oe.length;d++)c.Oe[d]||c.Oe.splice(d,1)}}function l(a){if(!aa||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);y(c,a);for(var d=0;d<c.Oe.length;d++){var e=c.Oe[d];if(e){if("number"==typeof a.movementX)var f=
a.movementX,g=a.movementY;else"number"==typeof a.webkitMovementX?(f=a.webkitMovementX,g=a.webkitMovementY):"number"==typeof a.mozMovementX?(f=a.mozMovementX,g=a.mozMovementY):g=f=0;oa[0]=f;oa[1]=g;e(oa)}}c.hk&&a.preventDefault();for(d=0;d<c.Oe.length;d++)c.Oe[d]||c.Oe.splice(d,1)}}function u(a){if(!aa||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);y(c,a);for(var d=0;d<c.zl.length;d++){var e=c.zl[d];e&&e(a.which)}c.hk&&(window.frameElement&&
window.frameElement.focus(),a.preventDefault());for(d=0;d<c.zl.length;d++)c.zl[d]||c.zl.splice(d,1)}}function L(a){!R.eP(a.relatedTarget)&&a.which&&F(a)}function F(a){if(!aa||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var c=b(30,a.currentTarget);y(c,a);for(var d=0;d<c.Al.length;d++){var e=c.Al[d];e&&e(a.which)}c.hk&&a.preventDefault();for(d=0;d<c.Al.length;d++)c.Al[d]||c.Al.splice(d,1)}}function U(a){for(var c=b(30,a.currentTarget),d=0;d<c.Bl.length;d++){var e=
c.Bl[d];if(e){var f;f=a;var g=0;f.wheelDelta?f.wheelDelta%120?g=ia.sign(f.wheelDelta):g=f.wheelDelta/120:f.deltaY&&(g=f.deltaY%3?-ia.sign(f.deltaY):-f.deltaY/3);f=ia.pa(100*g,-2E3,2E3);e(f)}}c.hk&&a.preventDefault();for(d=0;d<c.Bl.length;d++)c.Bl[d]||c.Bl.splice(d,1)}function K(a){for(var c=b(40,a.currentTarget),d=a.ctrlKey||a.altKey||a.metaKey?c.rP:c.tv,e=0;e<d.length;e++){var f=d[e];f?f(a.keyCode):d.splice(e--,1)}c.hk&&a.preventDefault()}function A(a){for(var c=b(40,a.currentTarget),d=0;d<c.tl.length;d++){var e=
c.tl[d];e&&e(a.keyCode)}c.hk&&a.preventDefault();for(d=0;d<c.tl.length;d++)c.tl[d]||c.tl.splice(d,1)}function E(a){for(var c=b(50,a.currentTarget),d=0;d<c.Zl.length;d++){var e=c.Zl[d];e&&e(a.targetTouches)}for(d=0;d<c.Zl.length;d++)c.Zl[d]||c.Zl.splice(d,1)}function n(a){for(var c=b(50,a.currentTarget),d=0;d<c.Xl.length;d++){var e=c.Xl[d];e&&e(a.targetTouches)}c.hk&&a.preventDefault();for(d=0;d<c.Xl.length;d++)c.Xl[d]||c.Xl.splice(d,1)}function f(a){for(var c=b(50,a.currentTarget),d=0;d<c.Wl.length;d++){var e=
c.Wl[d];e&&e(a.targetTouches)}for(d=0;d<c.Wl.length;d++)c.Wl[d]||c.Wl.splice(d,1)}function X(a){switch(a){case 0:a=60;break;case 1:a=70;break;case 2:a=80;break;case 3:a=90;break;default:a=60}return a}function d(a){function b(){document.pointerLockElement===c||document.webkitPointerLockElement===c||document.mozPointerLockElement===c?a.value=1:(a.value=0,document.removeEventListener("pointerlockchange",b,!1),document.removeEventListener("webkitpointerlockchange",b,!1),document.removeEventListener("mozpointerlockchange",
b,!1))}var c=a.element;document.addEventListener("pointerlockchange",b,!1);document.addEventListener("webkitpointerlockchange",b,!1);document.addEventListener("mozpointerlockchange",b,!1);var d=c.requestPointerLock||c.webkitRequestPointerLock||c.mozRequestPointerLock;"function"===typeof d&&d.apply(c)}function H(){return window.document.fullscreenEnabled||window.document.mozFullScreenEnabled||window.document.msFullscreenEnabled||window.document.webkitFullscreenEnabled?!0:!1}var G=w("__compat"),R=w("__container"),
q=w("__config"),ja=w("__mat4"),qa=w("__print"),C=w("__tsr"),pa=w("__quat"),ia=w("__util"),ma=w("__vec3"),ea=w("__vec4"),la=q.L,ba=q.MO,da=C.create(),xa=C.create(),ca=ja.create();a.sj=10;a.Tb=20;a.Wc=30;a.ot=40;a.Tg=50;a.dx=60;a.RD=70;a.SD=80;a.TD=90;a.uq=2;a.zk=4;a.jm=1;a.Un=8;a.Bx=16;a.Ug=0;a.wx=10;a.xx=20;a.IJ=21;a.JJ=22;a.zt=23;a.vx=24;a.tx=25;a.zx=26;a.Ax=27;a.yx=28;a.ux=29;a.m7=30;a.n7=31;a.uj=40;a.ZJ=41;a.lm=50;a.Ct=60;a.Dt=70;a.Bt=80;a.At=90;a.QJ=91;a.nm=100;a.Kt=110;a.Wn=120;a.sx=130;a.tq=
140;a.cq=300;a.eq=301;a.mq=302;a.nq=303;a.oq=304;a.pq=305;a.Sn=306;a.Tn=307;a.qq=308;a.rq=309;a.fq=310;a.gq=311;a.hq=312;a.iq=313;a.jq=314;a.kq=315;a.lq=316;a.ix=317;a.jx=318;a.kx=319;a.lx=320;a.mx=321;a.nx=322;a.ox=323;a.px=324;a.qx=325;a.GJ=300;a.HJ=301;a.EJ=302;a.FJ=303;a.hm=326;a.Qn=327;a.im=328;a.Rn=329;a.aq=330;a.bq=331;a.vt=332;a.wt=333;a.xt=334;a.yt=335;a.tt=336;a.ut=337;var V=pa.create(),Ja=pa.create(),S=ma.create(),oa=new Float32Array(2),Z=ma.create(),fa=pa.create(),aa="ontouchstart"in document.documentElement,
za=[];a.Cj=t;a.Nf=function(){if("HMD"==la.stereo||"NONE"==la.stereo&&la.is_mobile_device){var a=b(20);a&&document.addEventListener("onvrdisplayconnect",function(b){a.Zd=b.display;a.vh=!0;a.Zd.getFrameData(a.Si)})}};a.ba=b;a.x3=k;a.zw=function(a,b){a.hk=b};a.VH=function(a){switch(a.type){case 20:if(a.vh)if(a.Zd)a.Zd.resetPose();else if(a.wk)for(var b=0;b<a.wk.length;b++)a.wk[b].resetSensor();break;default:qa.error("reset_device() is undefined for device: ",a.type)}};a.Zh=function(a,b,c){switch(b){case 10:a:switch(a.type){case 20:ma.copy(ia.Gx,
c);if(a.Zd)c[0]=a.orientation[0],c[1]=a.orientation[1],c[2]=a.orientation[2],c[3]=a.orientation[3];else if(a.wk)for(b=0;b<a.wk.length;b++){var d=a.wk[b],d=d.getState&&d.getState()||d.getImmediateState&&d.getImmediateState();d.orientation&&(c[0]=d.orientation.x,c[1]=d.orientation.y,c[2]=d.orientation.z,c[3]=d.orientation.w)}a=c;break a;default:qa.error("orientation_quat is undefined for device: ",a.type),a=c}return a;case 20:a:switch(a.type){case 20:ma.copy(ia.Mt,c);if(a.Zd)c[0]=a.position[0],c[1]=
a.position[1],c[2]=a.position[2];else if(a.wk)for(b=0;b<a.wk.length;b++)d=a.wk[b],d=d.getState&&d.getState()||d.getImmediateState&&d.getImmediateState(),d.position&&(c[0]=d.position.x,c[1]=-d.position.z,c[2]=d.position.y);a=c;break a;default:qa.error("position is undefined for device: ",a.type),a=c}return a;case 21:return r(a,"left",c);case 22:return r(a,"right",c);case 30:return g(a,"left",c);case 31:return g(a,"right",c);case 40:case 41:return c[0]=a.eB[0],c[1]=a.eB[1],c}};a.vg=e;a.kk=function(a,
b,c){switch(a.type){case 20:if(e(a,0)&8)break;switch(b){case 24:a.distortion_coefs[0]=c[0];a.distortion_coefs[1]=c[1];break;case 23:a.Wi=c;m(a);break;case 25:a.wj=c;m(a);break;case 26:a.iw=c;m(a);break;case 27:a.Nn=c;m(a);break;case 28:a.Vj=c;m(a);break;case 29:a.xj=c,m(a)}break;case 60:case 70:case 80:case 90:a.Ez[b]=c}};a.i0=function(a,b){var c=b-300;return c<a.Oo.length?a.Oo[a.Ez[c]-300]:!1};a.h0=function(a,b){return b-326<a.Im.length?a.Im[a.Ez[b-300]-326]:0};a.ZF=function(a,b){b.set(a.position);
return b};a.YF=function(a,b){b.set(a.orientation);return b};a.update=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<za.length;b++){var c=za[b];switch(c.type){case 60:v(c);B(a[0],c);break;case 70:v(c);B(a[1],c);break;case 80:v(c);B(a[2],c);break;case 90:v(c);B(a[3],c);break;case 20:if(c.Zd){var d=c.Zd;if(c.Si&&d.getFrameData(c.Si)){var e=c.Si.pose,f=ia.TG(c.Si.leftViewMatrix,S);c.Wi=2*ma.length(f)}else e=d.getPose();
e&&(f=pa.setAxisAngle(ia.Cf,Math.PI/2,V),d.stageParameters&&d.stageParameters.sittingToStandingTransform?(d=C.Vh(d.stageParameters.sittingToStandingTransform,da),C.identity(xa),f=C.Gc(f,xa),d=C.multiply(f,d,c.II)):(C.identity(da),d=C.Gc(f,c.II)),e.orientation&&C.AS(e.orientation,d,c.orientation),e.position&&C.Mc(e.position,d,c.position))}}}};a.Id=function(a,b,c){switch(b){case 130:a.mi.push(c);b=141;break;case 140:a.cj.push(c);b=141;break;case 50:a.zl.push(c);break;case 40:case 41:a.Oe.push(c);break;
case 60:a.Al.push(c);break;case 70:a.Bl.push(c);break;case 90:a.tv.push(c);break;case 91:a.rP.push(c);b=90;break;case 80:a.tl.push(c);break;case 100:a.Zl.push(c);break;case 110:a.Xl.push(c);break;case 120:a.Wl.push(c)}if(-1==a.vc.indexOf(b)&&(a.vc.push(b),a.vh))switch(b){case 50:/iPad|iPhone|iPod/.test(navigator.platform)||a.element.addEventListener("mousedown",u,!1);break;case 40:a.element.addEventListener("mousemove",D,!1);break;case 41:a.element.addEventListener("mousemove",l,!1);break;case 60:/iPad|iPhone|iPod/.test(navigator.platform)||
(a.element!=window&&a.element.addEventListener("mouseout",L,!1),a.element.addEventListener("mouseup",F,!1));break;case 70:a.element.addEventListener("wheel",U,!1);break;case 90:a.element.addEventListener("keydown",K,!1);break;case 80:a.element.addEventListener("keyup",A,!1);break;case 100:a.element.addEventListener("touchstart",E,!1);break;case 110:a.element.addEventListener("touchmove",n,!1);break;case 120:a.element.addEventListener("touchend",f,!1);break;case 141:a.element.addEventListener("deviceorientation",
I,!1)}};a.oe=function(a,b,c){M(a,b,c,!1)};a.H0=p;a.Ja=function(){for(var a=0;a<za.length;a++)for(var b=za[a],c=0;c<b.vc.length;c++)M(b,b.vc[c],null,!0);za.length=0};a.dG=function(a){a=b(X(a));for(var c=0;c<a.Oo.length;c++)if(a.Oo[c])return c+300;return-1};a.Rz=function(a){a=b(X(a));for(var c=0;c<a.Im.length;c++)if(a.sN[c]-a.Im[c])return c+326;return-1};a.Lz=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<a.length;b++)if(a[b])return b;
return 0};a.E0=function(){var a=b(20);return a&&a.Zd};a.ZV=function(a){a.element.addEventListener("mousedown",function(){a.value||d(a)},!1)};a.Ih=function(a,b){la.is_mobile_device?a.addEventListener("touchend",b):a.addEventListener("mouseup",b)};a.MB=function(a,b){la.is_mobile_device?a.removeEventListener("touchend",b):a.removeEventListener("mouseup",b)};a.Mq=H};b4w.module.__prerender=function(a,w){function t(a,b){return a.em-b.em}function c(a,b){var c=a.sh;c.Cr=!1;if(c.bi)return!1;var e=b.H,h=b.type==x.ae?e.QA:r.Wb(e.D,v),m=a.Fa;if(!O.Z5(m,c,h))return!1;c.Cr=!0;if(b.type==x.Bi)m=b.debug_view_mode==k.fx?m.$k:!m.$k;else{if(!(c=b.type==x.Ci&&0==c.ek)&&(c=!m.bl&&a.$w)){var e=e.No,B=a.$w.Gf,c=a.$w.ig,h=B.V;if(g.V4(h,e,B.pb))c=!0;else if(m.In)var m=c.ab,B=c.eb,l=c.fb,h=c.V,c=g.OZ(h,e,m,B,l);else c=!1}m=c?!1:!0}return m}function b(a){var b=a.Ra;if(b&&b.hB){a=a.Pa;
h.Y1(a);var c=a.cd;h.hT(a.Uc,"a_position",b.Tv,c.a_position.offset);h.hT(a.Uc,"a_tbn",b.Aw,c.a_tbn.offset);h.OS(a)}}var k=w("__debug"),h=w("__geometry"),O=w("__objects"),m=w("__renderer"),x=w("__subscene"),r=w("__tsr"),g=w("__util"),e=w("__vec3"),B=[x.Nb,x.Hd,x.Ge,x.$d,x.Vg,x.dg,x.Fe,x.Fh,x.ae,x.Wg,x.Ci,x.Bi,x.Df,x.zi],v=new Float32Array(3);a.xp=function(a){if(-1<B.indexOf(a.type)){for(var g=!1,k=a.type==x.$d||a.type==x.dg,h=a.kb,w=0;w<h.length;w++){for(var y=h[w],D=y.Ua,l=!1,u=0;u<D.length;u++){var L=
D[u],F=L.Fa;if(k)for(var P=0;6>P;P++)a.H.No=a.Ao[P],L.AF[P]=c(L,a),L.AF[P]&&(l=g=!0,b(F));else L.lc=c(L,a),L.lc&&(l=g=!0,b(F));a.Wa&&(F.Hb.Lr=!0);L.lc?(F=r.Wb(a.H.D,v),L.$w?(P=L.$w.Gf,F=e.squaredDistance(P.V,F)+P.pb*P.pb):F=Infinity,L.em=F):L.em=Infinity}0<D.length&&!D[0].Fa.xb&&(D.sort(t),h.em=D[0].em);y.lc=l}a.Wa=!1;switch(a.type){case x.Bi:break;default:a.type==x.Nb||a.type==x.Wg||a.type==x.Fe||a.type==x.Ge||a.type==x.$d||g?a.lc=!0:(a.lc&&m.clear(a),a.lc=!1)}}else if(a.Wa){h=a.kb;for(w=0;w<h.length;w++)for(D=
h[w].Ua,u=0;u<D.length;u++)L=D[u],F=L.Fa,F.Hb.Lr=!0;a.Wa=!1}a.Gv&&x.N4(a)}};b4w.module.__primitives=function(a,w){function t(a,b,c,k){for(var e=[],g=[],h=[],p=a*b,v=2*c/(a-1),y=2*k/(b-1),r=0;r<a;r++)for(var l=-c+r*v,u=0;u<b;u++)if(g.push(l,-k+u*y,0),h.push(r/(a-1),u/(b-1)),r&&u){var B=r*b+u,t=B-1,w=(r-1)*b+u,K=w-1;e.push(B,t,w);e.push(t,K,w)}a=x.Ij();a.a_position=new Float32Array(g);a.a_tbn=m.create(p);p=O.ei("GRID_PLANE");p.sa[0]=a;p.Ea.a_texcoord=new Float32Array(h);p.Ha=new Uint32Array(e);p.hb=g.length/3;return p}function c(a){var b=a.length;b%4&&x.K("Wrong array");for(var c=
[],g=[],h=0;h<b;h+=4){var r=a[h+1],t=a[h+2],p=a[h+3];k(a[h],g);k(r,g);k(t,g);k(p,g);c.push(h,h+1,h+2);c.push(h,h+2,h+3)}a=x.Ij();a.a_position=new Float32Array(g);a.a_tbn=m.create(b/4);b=O.ei("FROM_QUADS");b.sa[0]=a;b.Ha=new Uint32Array(c);b.hb=g.length/3;return b}function b(a,b){var c=3*b;return[a[c],a[c+1],a[c+2]]}function k(a,b){b.push(a[0],a[1],a[2])}var h=w("__config"),O=w("__geometry"),m=w("__tbn"),x=w("__util"),r=h.L;a.D_=function(){var a=O.ei("LINE"),b=x.Ij();b.a_position=new Float32Array(3);
b.a_direction=new Float32Array(3);a.sa[0]=b;a.Ha=new Uint32Array(1);a.hb=1;return a};a.Gz=function(){var a=t(2,2,1,1);a.name="PLANE";return a};a.Taa=t;a.y_=function(a,b,c){function e(a,b){return 1==a%2&&(0==b||b==p-1)||1==b%2&&(0==a||a==h-1)?!0:!1}var g=c/=Math.pow(2,a-1),k=c,h=b+1,p=b+1;b=[];c=[];for(var B=0,y=0,t=0,l=-1,u=[],w=0;w<a;w++){for(var F=2*g/(h-1),U=2*k/(p-1),K=[],A=[],E=0,n=0;n<h;n++){for(var f=-g+n*F,X=[],d=0;d<p;d++){var H=-k+d*U;if(f>-y&&f<y&&H>-t&&H<t)X.push(-1),E++;else{for(var G=
null,R=0;R<u.length;R+=3)if(f==u[R]&&H==u[R+1]){G=u[R+2];break}R=null!==G?G:l+1;e(n,d)?(X.push(-2),E++):(null==G&&(d&&d!=p-1&&n&&n!=h-1?G=F:(G=w==a-1?F:2*F,K.push(f,H,R)),c.push(f,H,G),B++,l++),X.push(R));if(n&&d)if(1==n)if(e(n-1,d)){if(1<d){var H=R-1,G=A[n-1][d+1],q=G-1;b.push(q,H,R)}else G=A[n-1][d+1],q=G-1;b.push(G,q,R)}else e(n,d)||(H=R-1,G=A[n-1][d],b.push(G,H,R));else if(n==h-1){if(!e(n,d))if(d==p-1)H=R-1,G=A[n-1][d-1],q=A[n-2][d],b.push(G,H,R),b.push(q,G,R);else{var H=R-1,G=A[n-1][d],q=G-1,
ja=G+1;b.push(q,H,R);b.push(G,q,R);b.push(ja,G,R);2==d&&(ja=A[n-2][d-2],b.push(q,ja,H))}}else 1==d?e(n,d-1)?(H=A[n-1][d],G=A[n-1][d-1],b.push(H,G,R)):(H=X[d-1],G=A[n-1][d],q=A[n-2][d-1],b.push(G,H,R),b.push(G,q,H)):d==p-1?e(n,d)||(H=X[d-1],G=A[n-1][d-1],q=A[n-2][d],b.push(G,H,R),b.push(q,G,R)):-1!=A[n-1][d]&&-1!=A[n-1][d-1]&&-1!=X[d-1]?(H=X[d-1],G=A[n-1][d],q=A[n-1][d-1],b.push(G,H,R),b.push(G,q,H),d==p-2&&e(n,d+1)&&(ja=A[n-1][d+1],b.push(ja,G,R))):d==p-2&&e(n,d+1)&&(G=A[n-1][d],ja=A[n-1][d+1],b.push(ja,
G,R))}}A.push(X)}u=K;y=g;t=k;g*=2;k*=2}2E4>y&&(a=-(2*y)/(h-1),c.push(-2E4,-2E4,a),c.push(-2E4,2E4,a),c.push(-y,-t,a),c.push(-y,t,a),c.push(2E4,-2E4,a),c.push(2E4,2E4,a),c.push(y,-t,a),c.push(y,t,a),R=l+1,b.push(R+1,R+2,R+3,R+1,R+0,R+2,R+2,R+4,R+6,R+2,R+0,R+4,R+1,R+7,R+5,R+1,R+3,R+7,R+7,R+4,R+5,R+6,R+4,R+7),B+=8);a=x.Ij();a.a_position=new Float32Array(c);a.a_tbn=m.create(B);m.hH(a.a_tbn,[.707,0,0,.707],a.a_tbn);g=O.ei("MULTIGRID_PLANE");g.sa[0]=a;g.Ha=new Uint32Array(b);g.hb=c.length/3;r.uT&&(O.PC(g,
1,!0),a.a_polyindex=O.qz(g));return g};a.Saa=function(a){var b=a.length;b%3&&x.K("Wrong array");for(var c=[],g=[],h=0;h<b;h+=3){var m=a[h+1],r=a[h+2];k(a[h],g);k(m,g);k(r,g);c.push(h,h+1,h+2)}a=x.Ij();a.a_position=new Float32Array(g);b=O.ei("FROM_TRIANGLES");b.sa[0]=a;b.Ha=new Uint32Array(c);b.hb=g.length/3;return b};a.Raa=c;a.A_=function(a){a=x.B6(a);var b=[];b.push(a[0],a[1],a[2],a[3]);b.push(a[0],a[3],a[5],a[4]);b.push(a[3],a[2],a[6],a[5]);b.push(a[1],a[7],a[6],a[2]);b.push(a[0],a[4],a[7],a[1]);
b.push(a[4],a[5],a[6],a[7]);a=c(b);a.name="FRUSTUM";return a};a.Md=function(){var a=O.ei("FULLSCREEN_TRI"),b=x.Ij();b.a_position=new Float32Array([0,0,1,0,0,1]);a.sa[0]=b;a.Ha=new Uint32Array([0,1,2]);a.hb=3;return a};a.B_=function(){var a=O.ei("FULLSCREEN_QUAD"),b=x.Ij();b.a_position=new Float32Array([-1,1,1,1,-1,-1,1,-1]);a.sa[0]=b;a.Ha=new Uint32Array([0,2,1,1,2,3]);a.hb=4;return a};a.x_=function(){var a=O.ei("BILLBOARD"),b=x.Ij();b.a_bb_vertex=O.tN(1);a.sa[0]=b;a.Ha=new Uint32Array([0,2,1,0,3,
2]);a.hb=4;return a};a.OF=function(a,c){var e=O.ei("UV_SPHERE"),g,h,r=[],x=[],p=[];for(h=0;8>=h;h++)for(g=0;16>=g;g++){var t=g/16,y=h/8;x.push(-a*Math.cos(2*t*Math.PI)*Math.sin(y*Math.PI)+c[0],a*Math.cos(y*Math.PI)+c[1],a*Math.sin(2*t*Math.PI)*Math.sin(y*Math.PI)+c[2])}for(h=t=0;8>h;h++)for(g=0;16>g;g++){var y=b(x,17*h+g+1),w=b(x,17*h+g),l=b(x,17*(h+1)+g),u=b(x,17*(h+1)+g+1);Math.abs(y[1])==a+c[1]?(k(y,r),k(l,r),k(u,r),p.push(t,t+1,t+2),t+=3):Math.abs(l[1])==a+c[1]?(k(y,r),k(w,r),k(l,r),p.push(t,
t+1,t+2),t+=3):(k(y,r),k(w,r),k(l,r),k(u,r),p.push(t,t+1,t+2),p.push(t,t+2,t+3),t+=4)}g={};g.a_position=r;x=O.hX(p,x,r);x=O.fX(p,r,x);g.a_tbn=m.fr(x);e.sa[0]=g;e.Ha=p;e.hb=r.length/3;return e};a.xN=function(a){var b=O.ei("INDEX"),c=x.Ij();c.a_index=new Float32Array(3*a);for(var g=new Uint16Array(3*a),k=0;k<3*a;k++)c.a_index[k]=k,g[k]=k;b.sa[0]=c;b.Ha=g;b.hb=3*a;return b}};b4w.module.__scenegraph=function(a,w){function t(a,b){var c=[];n.yi(a,function(b,d,e){-1<c.indexOf(e)?n.t3(a,b,d,e,I(e)):c.push(e)});n.ka(a,function(a,e){for(var f=0;f<e.rb.length;f++){var g=e.rb[f];b||e.type!=d.Ge&&e.type!=d.$d&&e.type!=d.Fh||(g.Fd=!0);-1<c.indexOf(g)?e.rb[f]=I(g):c.push(g)}})}function c(a,c){n.ka(a,function(b,e){e.type==d.wJ&&n.$l(a,b,function(a,b){if(b.type==d.tj)for(var c=0;c<b.rb.length;c++){var e=b.rb[c];e.ga=H.U;e.ha=H.U}});c||n.$l(a,b,function(a,b,c){"DEPTH"==c.from&&(c.Fd=
!0)})});n.ka(a,function(c){var d={};b(a,c,d);for(var e in d){c=d[e];for(var f=c[0],g=0;g<c.length;g++)if(c[g].ga==H.U){f=c[g];break}for(var k=c[0],g=0;g<c.length;g++)if(c[g].ha==H.U){k=c[g];break}for(var h=c[0],g=0;g<c.length;g++)if(!c[g].Fd){h=c[g];break}for(g=0;g<c.length;g++)c[g].ga=f.ga,c[g].ha=k.ha,c[g].Fd=h.Fd}})}function b(a,c,e){n.$l(a,c,function(c,d,f){f.active&&f.from==f.to&&(e[f.from]=e[f.from]||[],-1==e[f.from].indexOf(f)&&e[f.from].push(f),b(a,c,e))});n.Dn(a,c,function(a,b,c){c.active&&
(e[c.from]=e[c.from]||[],-1==e[c.from].indexOf(c)&&e[c.from].push(c))});c=n.lb(a,c);if(c.type==d.tj)for(var f=0;f<c.rb.length;f++){var g=c.rb[f];e[g.from].push(g)}}function k(a){var b=[d.tj,d.eE,d.Jx,d.Ge,d.$d,d.Ft];q.sb||b.push(d.zJ);var c=n.VI(a),e=[];n.ka(c,function(a,d){for(var f=0;f<d.rb.length;f++){var g=d.rb[f];-1<b.indexOf(d.type)&&(g.Gn=!0);var k=r(e,g,h(g));g.Xa=k;d.xi[f]=k}for(f=0;f<d.xi.length;f++)k=d.xi[f],x(e,k);n.Dn(c,a,function(f,g,k){if(!k.Xa){if(-1<b.indexOf(d.type))k.Gn=!0;else if((f=
O(c,a,k.from))&&k.active&&!k.Xa){m(e,f);k.Xa=f;return}f=r(e,k,h(k));k.Xa=f}});n.$l(c,a,function(a,b,c){x(e,c.Xa)});n.Dn(c,a,function(a,b,c){c.Xa&&"NONE"==c.to&&x(e,c.Xa)})})}function h(a){var b=a.to,c=a.active,d=a.Xa;a.to="";a.active=!1;a.Xa=null;var e=G.DL(a);a.to=b;a.active=c;a.Xa=d;return e}function O(a,b,c){var d=null;n.$l(a,b,function(a,b,e){if(e.active&&e.from==e.to&&e.from==c&&e.Xa)return d=e.Xa,!0});n.Dn(a,b,function(a,b,e){if(e.active&&e.from==c&&e.Xa)return d=e.Xa,!0});return d}function m(a,
b){for(var c=0;c<a.length;c++){var d=a[c];d.UI===b&&d.aw++}}function x(a,b){for(var c=0;c<a.length;c++){var d=a[c];d.UI===b&&d.aw&&d.aw--}}function r(a,b,c){if(b.vp)return m(a,b.vp.Xa),b.vp.Xa;if(b.Gn)return g(b);for(var d=null,e=0;e<a.length;e++){var f=a[e];if(f.id==c&&0===f.aw){d=f;break}}if(d&&!q.mN)return d.aw++,d.UI;b=g(b);a.push({id:c,aw:1,UI:b});return b}function g(a){var b=a.Pl*a.size,c=a.Ql*a.size,d=a.pD,e=a.Ve;switch(a.from){case "COLOR":return a.Fd?(d=H.Xk(a.rh?H.Ox:H.Nx,d,e),H.resize(d,
b,c)):(d=a.Ru?H.Xk(H.Yn,d,e):H.Xk(H.Di,d,e),H.resize(d,b,c),H.jI(d,a.ga,a.ha)),d;case "DEPTH":return a.Fd?(d=H.Xk(a.rh?H.Mx:H.Lx,d,e),H.resize(d,b,c)):(d=H.Xk(H.Xn,d,e),H.resize(d,b,c),H.jI(d,a.ga,a.ha)),d;case "CUBEMAP":return d=H.mY(b,e);case "SCREEN":case "NONE":return null;default:G.K("Wrong slink param: "+a.from)}}function e(a,b){var c=!1;n.yi(a,function(d,e,f){if(f&&(d=n.lb(a,d),e=n.lb(a,e),b(f,!1,d,e)))return c=!0});c||n.ka(a,function(a,c){for(var d=0;d<c.rb.length;d++)if(b(c.rb[d],!0,c,null))return!0})}
function B(a){n.ka(a,function(b,c){if(c.type!=d.mm){var e=c.H;n.Dn(a,b,function(a,b,c){c.Xa&&c.active&&c.Xa&&(K.UB(e,c.from,c.Xa),c.from==c.to&&b.H&&K.UB(b.H,c.from,c.Xa))});for(var g=0;g<c.rb.length;g++){var k=c.rb[g];k.active&&k.from==k.to&&K.UB(e,k.from,c.xi[g])}!e.bc&&!e.og||e.Mf||(e.Mf=f.p3(e.bc,e.og))}});n.ka(a,function(b,c){if(c.type==d.Hx||c.type==d.PD){var e=l(a,c);c.H.Wu=e[0].H.Mf}})}function v(a){var b=null,c=0;n.ka(a,function(a,d){if(d.type==R.yw){if(c==R.j5)return b=d,!0;c++}});return b}
function P(a,b){var c=n.Cl(a,b),e=d.bd("NONE"),f=n.Z(a,e),g=n.ev(a)[0];n.yi(a,function(b,c){c==g&&n.i3(a,b,g,b,f)});var k=N(b,a);n.yi(a,function(f,g,h){if(f==c){if(k){f=d.Bu();n.Z(a,f);g=p("COLOR","RESOLVE",1,1,1,!0,!0);g.rh=!0;g.Fd=!0;var l=p("DEPTH","RESOLVE",1,1,1,!0,!0);l.rh=!0;l.Fd=!0;n.I(a,b,f,g);n.I(a,b,f,l);b=f}n.I(a,b,e,p(R.J4,"u_color",h.size,h.Pl,h.Ql,h.Jp,h.$x));return!0}});n.Zc(a,f,g,p("SCREEN","NONE",.5,.5,.5,!0,!0))}function N(a,b){var c=!1,d=n.Cl(b,a);n.th(b,d)&&(c=n.Yh(b,d,0),d=n.ld(b,
d,c,0),"COLOR"==d.from&&"COLOR"==d.to||"DEPTH"==d.from&&"DEPTH"==d.to?(d=n.lb(b,c),c=N(d,b)):c="RESOLVE"==d.to);return c}function M(a,b,c,e){var f=c.oa,g=b.pA,k=b.anaglyph_use,h=b.gj.gk,l=b.gj.zB;b=n.wn(a,n.p0(a,e),n.gm);var m=[],C=[],v=[];b=n.clone(b,function(b){var e;if(-1<qa.indexOf(b.type))C.push(b),e=b;else{e=d.UX(b);if(e.type==d.Ge)for(var k=0;k<h.length;k++)if(h[k][0]==b){h[k]=[b,e];e.H.Kc=b.H.Kc;c.oa.push(e.H);break}if(b.type==d.Vg)for(k=0;k<h.length;k++){if(l[k][0]==b){l[k]=[b,e];e.H=h[k][1].H;
break}}else-1<f.indexOf(b.H)&&(g?(K.WA(b.H,K.eg),K.WA(e.H,K.Ef),e.Jo=!0):(K.WA(b.H,K.Yc),K.WA(e.H,K.gd)),f.push(e.H));var q=n.Cl(a,b);n.$l(a,q,function(a,b,c){-1<qa.indexOf(b.type)&&m.push([b,e,c])});if(b.type!==d.tj)for(k=0;k<b.rb.length;k++)e.rb[k].vp=b.rb[k];b=!0;for(k=0;k<n.Wj(a,q);k++){var p=n.kh(a,q,k),p=n.lb(a,p);-1==qa.indexOf(p.type)&&(b=!1)}b&&v.push(e)}return e},function(a){var b=I(a,!0);b.vp=a;return b});for(var A=0;A<C.length;A++)n.Dg(b,n.Cl(b,C[A]));n.OE(b);k=d.iZ(g,k);A=n.Z(a,k);if(q.wA)var u=
d.bd("NONE"),r=p("COLOR","u_color",1,1,1,!0,!0);else u=d.iF(),r=p("COLOR","COPY",1,1,1,!0,!0);r.ga=H.U;r.ha=H.U;n.Z(a,u);n.I(a,e,u,r);var y=p("COLOR","u_sampler_left",1,1,1,!0,!0);y.Gn=!0;y.ga=H.U;y.ha=H.U;n.I(a,u,k,y);if(!e.mc){if(q.wA)var y=d.bd("NONE"),E=p("COLOR","u_color",1,1,1,!0,!0);else y=d.iF(),E=p("COLOR","COPY",1,1,1,!0,!0);n.Z(b,y);E.vp=r;var G=n.ev(b)[0],G=n.lb(b,G);n.I(b,G,y,E)}y=p("COLOR","u_sampler_right",1,1,1,!0,!0);e.mc&&(y.vp=r);y.ga=H.U;y.ha=H.U;n.WK(b,a,[n.ev(b)[0],A,y]);for(A=
0;A<m.length;A++)n.I(a,m[A][0],m[A][1],m[A][2]);e=p("SCREEN","NONE",0,0,0,!1,!1);for(A=0;A<v.length;A++)n.I(a,u,v[A],e);n.yi(a,function(b,c,e){n.lb(a,b).type===d.tj&&(e.vp=null)});return k}function p(a,b,c,d,e,f,g){return{from:a,to:b,size:c,Pl:d,Ql:e,Jp:f,$x:g,active:!0,Xa:null,rh:!1,Ru:!1,Fd:!1,ga:H.Ze,ha:H.Ze,Gn:!1,pD:!1,Ve:!1}}function I(a,b){var c=p(a.from,a.to,a.size,a.Pl,a.Ql,a.Jp,a.$x);c.active=a.active;!b&&a.Xa&&G.K("Failed to clone slink with attached texture");c.Xa=a.Xa;c.rh=a.rh;c.Fd=a.Fd;
c.ga=a.ga;c.ha=a.ha;c.Gn=a.Gn;c.pD=a.pD;c.Ve=a.Ve;return c}function y(a,b,c){if(b.type==c)return!0;b=u(a,b);for(var d=0;d<b.length;d++)if(y(a,b[d],c))return!0;return!1}function D(a,b,c){if(b.type==c)return!0;b=l(a,b);for(var d=0;d<b.length;d++)if(D(a,b[d],c))return!0;return!1}function l(a,b){var c=n.Cl(a,b);c==n.cE&&G.K("Subscene not in graph");for(var d=[],e=n.Wj(a,c),f=0;f<e;f++){var g=n.kh(a,c,f);g!=c&&d.push(n.lb(a,g))}return d}function u(a,b){var c=n.Cl(a,b);c==n.cE&&G.K("Subscene not in graph");
for(var d=[],e=n.th(a,c),f=0;f<e;f++){var g=n.Yh(a,c,f);g!=c&&d.push(n.lb(a,g))}return d}function L(a){var b=[],c=[];e(a,function(a){a.Xa&&-1==b.indexOf(a.Xa)&&(b.push(a.Xa),c.push(a.Xa,b.length-1))});return c}function F(a,b){var c;c=""+(a.from+"\\n");c+="NONE"!=a.to?a.to+"\\n":"";c+="(";if(a.Jp){var d=a.Pl,e=a.Ql;Math.round(d)!=d&&(d=d.toFixed(2));Math.round(e)!=e&&(e=e.toFixed(2));c=c+((1==d?"":d)+"Sx"+((1==e?"":e)+"S"))+(a.$x?" FACT":" VIEW")}else d=a.Pl,e=a.Ql,c+=a.size*d+"x"+a.size*e;if("SCREEN"!=
a.from){c+=" ";if(a.Fd)c+="RR";else{var d=a.ga,e=a.ha,f="";d==H.U?f+="L":d==H.Ze&&(f+="N");e==H.U?f+="L":e==H.Ze&&(f+="N");c+=f}for(d=0;d<b.length;d+=2)b[d]==a.Xa&&(c+=" "+b[d+1])}return c+")\\n"}var U=w("__batch"),K=w("__camera"),A=w("__config"),E=w("__debug"),n=w("__graph"),f=w("__renderer"),X=w("__shaders"),d=w("__subscene"),H=w("__textures"),G=w("__util"),R=A.Bo,q=A.L,ja=A.fs,qa=[d.yk,d.ae,d.$d,d.dg];a.GX=function(a){switch(a.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "NONE":return!1;
default:return!0}};a.Ms=e;a.BY=function(a,b,e,f){function g(c){var e=K.hd(Ea,!0);b.oa.push(e);e=d.zo(c,e,!1,L,F,Y,ka,ua,a.xn);n.Z(h,e);c==d.Fh?(n.I(h,m[0],e,p("COLOR","COLOR",1,1,1,!0,!0)),e.rb.push(p("DEPTH","DEPTH",1,1,1,!0,!0))):(c=sa&&m[0].type==d.Hx?Za:m[0],n.I(h,Za,e,Ia),n.I(h,c,e,cb));Na&&(n.I(h,Na,e,Ra),n.I(h,Na,e,Ha));for(c=0;c<A.length;c++)n.I(h,A[c],e,r[c]);bb&&n.I(h,bb,e,Bb);if(y.length){var f=y.length;for(c=0;c<f;c++)n.I(h,y[c],e,x[c])}if(w.length)for(c=0;c<w.length;c++)n.I(h,w[c],e,
D[c]);lc&&n.I(h,lc,e,kd);return e}var h=n.create(),m=[],C=[],A=[],r=[],y=[],x=[],w=[],D=[],N=[],F=a.x1,L=a.Yd,X=a.Xf,qa=a.L4,J=a.ssao,O=a.god_rays,pa=a.gj,ia=a.OP,U=a.TW,ma=a.motion_blur,Ba=a.compositing,Aa=a.antialiasing,ka=a.On,Y=a.xT,ua=a.Cd,Pa=a.h2,wa=a.rX,W=a.F0,Ya=a.A2,Ga=a.dof,z=a.xZ,Da=a.refractions,ta=!!f.length,sa=1<q.oc;q.ds=q.ds&&!!ua&&!(sa&&J);var Qa=q.ds,cb=p("COLOR","COLOR",1,1,1,!0,!0),Ia=p("DEPTH","DEPTH",1,1,1,!0,!0);if(sa){var Oa=I(Ia);cb.rh=!0;cb.Fd=!0;Ia.rh=!0;Ia.Fd=!0}var Ea=
b.oa[0];if(a.kd){var Na=d.VY();n.Z(h,Na);var Fa=ja.gv;Na.H.width=Fa;Na.H.height=Fa;var Ra=p("DEPTH","u_grass_map_depth",Fa,1,1,!1,!1);q.sb||(Ra.ga=H.U,Ra.ha=H.U);var Ha=p("COLOR","u_grass_map_color",Fa,1,1,!1,!1);Ha.ga=H.U;Ha.ha=H.U}else Ha=Ra=Na=null;if(ua){K.jJ(Ea,ua);for(var ga=0;ga<ua.Zi.length;ga++)for(var Lb=ua.csm_num,na=0;na<Lb;na++){var T=d.dZ(na,ga,ua,F);n.Z(h,T);A.push(T);var Fa=ua.csm_resolution,Ka=T.H;b.RR.push(Ka);Ka.width=Fa;Ka.height=Fa;T.yb=!0;var Wa=0<ga?ga:na;if(q.hw){r.push(p("COLOR",
"u_shadow_map"+Wa,Fa,1,1,!1,!1));var Xa=p("DEPTH","DEPTH",Fa,1,1,!1,!1);Xa.Fd=!0;T.rb.push(Xa)}else{var Ma=p("DEPTH","u_shadow_map"+Wa,Fa,1,1,!1,!1);q.su&&(Ma.ga=H.U,Ma.ha=H.U,Ma.pD=!0);r.push(Ma);(E.zX()||q.SR)&&T.rb.push(p("COLOR","COLOR",Fa,1,1,!1,!1))}Na&&(n.I(h,Na,T,Ra),n.I(h,Na,T,Ha))}}if(pa&&pa.dQ&&!ta)for(na=0;na<pa.dQ;na++){Ka=K.ad(K.fd);Ka.width=a.Zk;Ka.height=a.Zk;K.rR(Ka,Math.PI/2,.1,100);K.Nl(Ka,!1);var ab=d.zo(d.$d,Ka,!1,L,F,Y,ka,null,a.xn);ab.Oh=G.C_();for(ga=0;6>ga;ga++)ab.Ao.push(K.qY());
n.Z(h,ab);var ub=p("CUBEMAP","u_cube_reflection",a.Zk,1,1,!1,!1);ub.ga=H.U;ub.ha=H.U;D.push(ub);if(!pa.pG){var rb=p("CUBEMAP","u_sky_reflection",1,1,1,!1);rb.Ve=!0;rb.ga=H.Ck;rb.ha=H.U;N.push(rb)}Na&&(n.I(h,Na,ab,Ra),n.I(h,Na,ab,Ha));if(pa.EO){var Ca=d.zo(d.dg,Ka,!1,L,F,Y,ka,null,a.xn);Ca.Oh=ab.Oh;Ca.Ao=ab.Ao;n.Z(h,Ca);var Ua=p("DEPTH","DEPTH",a.Zk,1,1,!1,!1),Xb=p("COLOR","COLOR",a.Zk,1,1,!1,!1);n.I(h,ab,Ca,Ua);n.I(h,ab,Ca,Xb);w.push(Ca);pa.lF.push(Ca);Na&&(n.I(h,Na,Ca,Ra),n.I(h,Na,Ca,Ha))}else{var $a=
p("DEPTH","DEPTH",a.Zk,1,1,!1,!1);ab.rb.push($a);w.push(ab)}pa.Yk.push(ab)}if(pa&&0<pa.IQ.length&&!ta)for(ga=0;ga<pa.IQ.length;ga++)Ka=K.hd(Ea,!0),Ka.Kc=new Float32Array(4),b.oa.push(Ka),ab=d.zo(d.Ge,Ka,!1,L,F,Y,ka,null,a.xn),n.Z(h,ab),ub=p("COLOR","u_plane_reflection",1,a.fj,a.fj,!0,!0),ub.ga=H.U,ub.ha=H.U,x.push(ub),Na&&(n.I(h,Na,ab,Ra),n.I(h,Na,ab,Ha)),pa.EO?(Ca=d.zo(d.Vg,Ka,!1,L,F,Y,ka,null,a.xn),n.Z(h,Ca),Ua=p("DEPTH","DEPTH",1,a.fj,a.fj,!0,!0),Xb=p("COLOR","COLOR",1,a.fj,a.fj,!0,!0),Xb.ga=H.Ze,
Xb.ha=H.Ze,n.I(h,ab,Ca,Ua),n.I(h,ab,Ca,Xb),pa.zB.push([Ca]),y.push(Ca),Na&&(n.I(h,Na,Ca,Ra),n.I(h,Na,Ca,Ha))):($a=p("DEPTH","DEPTH",1,a.fj,a.fj,!0,!0),ab.rb.push($a),y.push(ab)),pa.gk.push([ab]);if(ua){var Fb=K.hd(Ea,!0);b.oa.push(Fb);var nb=d.eZ(Fb,F);n.Z(h,nb);nb.self_shadow_normal_offset=ua.self_shadow_normal_offset;for(na=0;na<A.length;na++)T=A[na],n.I(h,T,nb,r[na]);if(Qa){if(Ma=p("DEPTH","DEPTH",1,1,1,!0,!0),sa){Ma.rh=!0;Ma.Fd=!0;var sb=d.Bu();n.Z(h,sb);var ic=p("COLOR","RESOLVE",1,1,1,!0,!0);
ic.rh=!0;ic.Fd=!0;var jc=p("DEPTH","RESOLVE",1,1,1,!0,!0);jc.rh=!0;jc.Fd=!0;n.I(h,nb,sb,ic);n.I(h,nb,sb,jc)}}else sa?Ma=p("DEPTH","DEPTH",1,1,1,!0,!0):q.hw?(Ma=p("DEPTH","DEPTH",1,1,1,!0,!0),Ma.Fd=!0):Ma=Ia;if(J){var ib=p("COLOR","u_color",1,1,1,!0,!0),fb=p("DEPTH","u_depth",1,1,1,!0,!0),Ta=K.hd(Ea,!0);b.oa.push(Ta);var Ib=a.b5,Yb=d.gZ(Ta,Y,Ib);n.Z(h,Yb);var Cc=p("COLOR","u_ssao_mask",1,1,1,!0,!0);n.I(h,nb,Yb,ib);n.I(h,nb,Yb,fb);var kc=K.hd(Ea,!0);b.oa.push(kc);var Mb=d.hZ(kc,Ib);n.Z(h,Mb);var vb=
p("COLOR","u_shadow_mask",1,1,1,!0,!0);n.I(h,Yb,Mb,Cc);n.I(h,nb,Mb,fb)}Na&&(n.I(h,Na,nb,Ra),n.I(h,Na,nb,Ha))}else nb=null;var Za=d.zo(d.Nb,Ea,!Qa,L,F,Y,ka,null,a.xn);n.Z(h,Za);ua&&(Qa?n.I(h,nb,Za,Ma):nb.rb.push(Ma));if(sa){var Ab=d.Bu();n.Z(h,Ab);C.push(Ab);var Sb=p("COLOR","RESOLVE",1,1,1,!0,!0);Sb.rh=!0;Sb.Fd=!0;var Nb=p("DEPTH","RESOLVE",1,1,1,!0,!0);Nb.rh=!0;Nb.Fd=!0;n.I(h,Za,Ab,Sb);n.I(h,Za,Ab,Nb)}else C.push(Za);nb&&(Cc?n.I(h,Mb,Za,vb):n.I(h,Qa&&sa?sb:nb,Za,p("COLOR","u_shadow_mask",1,1,1,!0,
!0)));Na&&(n.I(h,Na,Za,Ra),n.I(h,Na,Za,Ha));if(y.length)for(var Dc=y.length,ga=0;ga<Dc;ga++)n.I(h,y[ga],Za,x[ga]);if(w.length)for(ga=0;ga<w.length;ga++)n.I(h,w[ga],Za,D[ga]);m=C;C=[];if(!ta&&a.VX){var sc=R.enabled&&(R.yw===d.Df||R.yw===d.zi),Ka=K.hd(Ea,!0);sc||(Ka.width=Ka.height=1);b.oa.push(Ka);var tc=d.EM(Ka,!1,F);n.Z(h,tc);if(a.rj){Ka=K.hd(Ea,!0);sc||(Ka.width=Ka.height=1);b.oa.push(Ka);var uc=d.EM(Ka,!0,F);n.Z(h,uc);n.I(h,tc,uc,p("COLOR","COLOR",1,1,1,sc,!0));n.I(h,tc,uc,p("DEPTH","DEPTH",1,
1,1,sc,!0))}}else tc=null;if(!ia.refractions&&!Da||ta)lc=null;else{if(sa)lc=Ab;else{if(q.wA)var lc=d.bd("NONE"),wb=p("COLOR","u_color",1,1,1,!0,!0);else lc=d.iF(),wb=p("COLOR","COPY",1,1,1,!0,!0);n.Z(h,lc);n.I(h,m[0],lc,wb)}var kd=p("COLOR","u_refractmap",1,1,1,!0,!0)}if(z&&(Da||X||qa)){var Mc=K.hd(Ea,!0);b.oa.push(Mc);var bb=d.SY(Mc);n.Z(h,bb);n.I(h,sa?Ab:Za,bb,p("DEPTH","u_depth",1,1,1,!0,!0));var Bb=p("COLOR","u_scene_depth",1,1,1,!0,!0);Bb.ga=H.Ze;Bb.ha=H.Ze}else bb=null;if(a.bA){var gb=g(d.Hd);
C.push(gb);m=C;C=[]}if(a.glow_materials){var Tb=K.hd(Ea,!0);b.oa.push(Tb);var lb=d.zo(d.Fe,Tb,!1,L,F,Y,ka);n.Z(h,lb);bb&&n.I(h,bb,lb,Bb);lc&&n.I(h,lc,lb,kd);Na&&(n.I(h,Na,lb,Ra),n.I(h,Na,lb,Ha));if(y.length)for(Dc=y.length,ga=0;ga<Dc;ga++)n.I(h,y[ga],lb,x[ga]);if(w.length)for(ga=0;ga<w.length;ga++)n.I(h,w[ga],lb,D[ga]);a.bA&&n.I(h,lb,gb,p("SCREEN","NONE",0,0,0,!1,!1));n.I(h,sa?Ab:Za,lb,sa?Oa:Ia);var db=d.bd("X_GLOW_BLUR");db.Ib="GLOW_MASK_SMALL";db.wf=a.Tj.small_glow_mask_width;var Ec=p("COLOR","u_color",
1,1,1,!0,!0);Ec.ga=H.U;Ec.ha=H.U;n.Z(h,db);n.I(h,lb,db,Ec);var bc=d.bd("Y_GLOW_BLUR");bc.Ib="GLOW_MASK_SMALL";bc.wf=a.Tj.small_glow_mask_width;var dd=p("COLOR","u_color",1,.5,.5,!0,!0);dd.ga=H.U;dd.ha=H.U;n.Z(h,bc);n.I(h,db,bc,dd);var Nc=d.bd("X_GLOW_BLUR");Nc.Ib="GLOW_MASK_LARGE";Nc.wf=a.Tj.large_glow_mask_width;var Xc=p("COLOR","u_color",1,.5,.5,!0,!0);Xc.ga=H.U;Xc.ha=H.U;n.Z(h,Nc);n.I(h,bc,Nc,Xc);var ld=d.bd("Y_GLOW_BLUR");ld.Ib="GLOW_MASK_LARGE";ld.wf=a.Tj.large_glow_mask_width;var md=p("COLOR",
"u_color",1,.25,.25,!0,!0);md.ga=H.U;md.ha=H.U;n.Z(h,ld);n.I(h,Nc,ld,md);var ed=K.hd(Ea,!0);b.oa.push(ed);var Fc=d.TY(ed,a);n.Z(h,Fc);var Zb=p("COLOR","u_src_color",1,1,1,!0,!0);Zb.ga=H.U;Zb.ha=H.U;if(a.bA)if(sa){var fd=d.Bu();n.Z(h,fd);n.I(h,gb,fd,Sb);n.I(h,gb,fd,Nb);n.I(h,fd,Fc,Zb)}else n.I(h,gb,Fc,Zb);else n.I(h,sa?Ab:Za,Fc,Zb);var Yc=p("COLOR","u_glow_mask_small",1,.5,.5,!0,!0);Yc.ga=H.U;Yc.ha=H.U;n.I(h,bc,Fc,Yc);var gd=p("COLOR","u_glow_mask_large",1,.25,.25,!0,!0);gd.ga=H.U;gd.ha=H.U;n.I(h,
ld,Fc,gd);m=[Fc];C=[]}a.bA||(gb=g(d.Hd),C.push(gb),m=C,C=[]);if(q.debug_view){Ka=K.hd(Ea,!0);b.oa.push(Ka);var Cb=d.RY(Ka);C.push(Cb);n.Z(h,Cb);n.I(h,m[0],Cb,cb);n.I(h,m[0],Cb,Ia);Na&&(n.I(h,Na,Cb,Ra),n.I(h,Na,Cb,Ha));E.V3(Cb);m=C;C=[]}if(sa){var Gb=d.Bu();n.Z(h,Gb);C.push(Gb);n.I(h,m[0],Gb,Sb);n.I(h,m[0],Gb,Nb);m=C;C=[]}var xb=m.slice(0);if(!ta&&a.bW){Ka=K.hd(Ea,!0);b.oa.push(Ka);var ob=d.MY(Ka);n.Z(h,ob);n.I(h,m[0],ob,sa?Oa:Ia)}if(O&&z&&!ta){var Jb=W.Ym,nd=W.intensity,Oc=W.un,jb=m[0],Pc=L?!0:!1,
cc=p("DEPTH","u_input",1,1,1,!0,!0),Gc=p("COLOR","u_input",1,.25,.25,!0,!0);Gc.ga=H.U;Gc.ha=H.U;var dc=Jb/Oc,Zc=K.hd(Ea,!0);b.oa.push(Zc);var Ub=d.jF(Zc,Pc,Jb,!0,dc,F,Oc);n.Z(h,Ub);n.I(h,jb,Ub,cc);var dc=Jb/Oc*.5,Ob=K.hd(Ea,!0);b.oa.push(Ob);var Db=d.jF(Ob,Pc,Jb,!1,dc,F,Oc);n.Z(h,Db);n.I(h,Ub,Db,Gc);var dc=Jb/Oc*.25,vc=K.hd(Ea,!0);b.oa.push(vc);var mb=d.jF(vc,Pc,Jb,!1,dc,F,Oc);n.Z(h,mb);n.I(h,Db,mb,Gc);var Hc=d.UY(nd,F);C.push(Hc);n.Z(h,Hc);var mc=p("COLOR","u_main",1,1,1,!0,!0);mc.ga=H.U;mc.ha=H.U;
n.I(h,jb,Hc,mc);var Qc=p("COLOR","u_god_rays",1,1,1,!0,!0);Qc.ga=H.U;Qc.ha=H.U;n.I(h,mb,Hc,Qc);m=C;C=[]}if(U&&!ta){var jb=m[0],Hb=d.XY();n.Z(h,Hb);mc=p("COLOR","u_input",1,1,1,!0,!0);mc.ga=H.U;mc.ha=H.U;n.I(h,jb,Hb,mc);var Kb=U.key,wc=U.edge_lum,nc=K.hd(Ea,!0);b.oa.push(nc);var tb=d.YY(Kb,wc,F,nc);n.Z(h,tb);var Pb=p("COLOR","u_luminance",1,.25,.25,!0,!0);Pb.ga=H.U;Pb.ha=H.U;if(U.adaptive){var yb=d.NY();n.Z(h,yb);yb.H.width=1;yb.H.height=1;var Eb=p("COLOR","u_input",1,.25,.25,!0,!0);Eb.Ve=!0;Eb.ga=
H.Ck;Eb.ha=H.U;if(q.sb)Pb.Ve=!0,Pb.ga=H.Ck,n.I(h,Hb,yb,Eb);else{var Sa=d.DY(),oc=p("COLOR","u_color",1,.25,.25,!0,!0);n.Z(h,Sa);n.I(h,Hb,Sa,oc);n.I(h,Sa,yb,Eb)}n.I(h,yb,tb,p("COLOR","u_average_lum",1,1,1,!1,!1));tb.ao=!0}else tb.ao=!1,tb.average_luminance=U.average_luminance;n.I(h,jb,tb,p("COLOR","u_main",1,1,1,!0,!0));n.I(h,Hb,tb,Pb);for(var Qb=tb,ec=1,eb=[],na=0;5>na;na++)db=d.bd("X_BLOOM_BLUR"),db.wf=a.Tj.small_glow_mask_width,Ec=p("COLOR","u_color",1,ec,ec,!0,!0),Ec.ga=H.U,Ec.ha=H.U,n.Z(h,db),
n.I(h,Qb,db,Ec),ec/=2,bc=d.bd("Y_BLOOM_BLUR"),bc.wf=a.Tj.small_glow_mask_width,dd=p("COLOR","u_color",1,ec,ec,!0,!0),dd.ga=H.U,dd.ha=H.U,n.Z(h,bc),n.I(h,db,bc,dd),Qb=bc,bc.Hq=ec,db.Hq=ec,eb.push(bc,ec);var Vb=d.OY(U.blur);n.Z(h,Vb);for(na=0;na<eb.length;na+=2){var bc=eb[na],xc=eb[na+1],Yc=p("COLOR","u_bloom_level_"+(na/2).toString(),1,xc,xc,!0,!0);Yc.ga=H.U;Yc.ha=H.U;n.I(h,bc,Vb,Yc)}n.I(h,jb,Vb,p("COLOR","u_main",1,1,1,!0,!0));C.push(Vb);m=C;C=[]}if(Ga&&z&&!ta){var jb=m[0],kb=K.hd(Ea,!0);b.oa.push(kb);
var rd=q.uS&&q.HL,Ic=e.dof_bokeh&&rd;if(Ic){var fc=H.Ze,Rb=p("COLOR","u_color",1,1,1,!0,!0);Rb.ga=fc;Rb.ha=fc;var Rc=p("DEPTH","u_depth",1,1,1,!0,!0),Sc=p("COLOR","u_color",1,.5,.5,!0,!0);Sc.Ru=!0;Sc.ga=H.Ze;Sc.ha=H.Ze;var Jc=p("COLOR","u_color",1,.5,.5,!0,!0);Jc.Ru=!0;Jc.ga=H.Ze;Jc.ha=H.Ze;var Kc=p("COLOR","u_blurred1",1,.5,.5,!0,!0);Kc.Ru=!0;Kc.ga=fc;Kc.ha=fc;var yc=p("COLOR","u_blurred2",1,.5,.5,!0,!0);yc.Ru=!0;yc.ga=fc;yc.ha=fc;var Bd=xb[0];if(e.pe){var pb=K.hd(Ea,!0);b.oa.push(pb);var Tc=d.hF(pb,
"COC_FOREGROUND");pb.dof_distance=e.dof_distance;pb.dof_object=e.dof_object;pb.dof_front_start=e.dof_front_start;pb.dof_front_end=e.dof_front_end;pb.dof_rear_start=e.dof_rear_start;pb.dof_rear_end=e.dof_rear_end;pb.dof_power=e.dof_power;pb.dof_bokeh=e.dof_bokeh;pb.dof_bokeh_intensity=e.dof_bokeh_intensity;pb.pe=e.pe;pb.dof_on=!0;n.Z(h,Tc);n.I(h,jb,Tc,Rb);n.I(h,Bd,Tc,Rc);var $c=d.bd("X_ALPHA_BLUR");n.Z(h,$c);n.I(h,Tc,$c,Sc);var sd=d.bd("Y_ALPHA_BLUR");n.Z(h,sd);n.I(h,$c,sd,Jc);var La=K.hd(Ea,!0),hb=
d.hF(La,"COC_COMBINE");b.oa.push(La);La.dof_distance=e.dof_distance;La.dof_object=e.dof_object;La.dof_front_start=e.dof_front_start;La.dof_front_end=e.dof_front_end;La.dof_rear_start=e.dof_rear_start;La.dof_rear_end=e.dof_rear_end;La.dof_power=e.dof_power;La.dof_bokeh=e.dof_bokeh;La.dof_bokeh_intensity=e.dof_bokeh_intensity;La.pe=e.pe;La.dof_on=!0;n.Z(h,hb);n.I(h,jb,hb,Rb);n.I(h,Bd,hb,Rc);n.I(h,sd,hb,p("COLOR","u_coc_fg",1,.5,.5,!0,!0))}else La=K.hd(Ea,!0),b.oa.push(La),hb=d.hF(La,"COC_ALL"),La.dof_distance=
e.dof_distance,La.dof_object=e.dof_object,La.dof_front_start=e.dof_front_start,La.dof_front_end=e.dof_front_end,La.dof_rear_start=e.dof_rear_start,La.dof_rear_end=e.dof_rear_end,La.dof_power=e.dof_power,La.dof_bokeh=e.dof_bokeh,La.dof_bokeh_intensity=e.dof_bokeh_intensity,La.pe=e.pe,La.dof_on=!0,n.Z(h,hb),n.I(h,jb,hb,Rb),n.I(h,Bd,hb,Rc);var Wb=d.bd("X_DOF_BLUR");Wb.H.dof_bokeh_intensity=e.dof_bokeh_intensity;n.Z(h,Wb);n.I(h,hb,Wb,Sc);var Uc=d.bd("Y_DOF_BLUR");Uc.H.dof_bokeh_intensity=e.dof_bokeh_intensity;
n.Z(h,Uc);n.I(h,Wb,Uc,Jc);var gc=d.bd("Y_DOF_BLUR");gc.H.dof_bokeh_intensity=e.dof_bokeh_intensity;n.Z(h,gc);n.I(h,Wb,gc,Jc);var zc=d.FM(kb,Ic);kb.dof_distance=e.dof_distance;kb.dof_object=e.dof_object;kb.dof_front_start=e.dof_front_start;kb.dof_front_end=e.dof_front_end;kb.dof_rear_start=e.dof_rear_start;kb.dof_rear_end=e.dof_rear_end;kb.dof_power=e.dof_power;kb.dof_bokeh=e.dof_bokeh;kb.dof_bokeh_intensity=e.dof_bokeh_intensity;kb.pe=e.pe;kb.dof_on=!0;C.push(zc);n.Z(h,zc);n.I(h,jb,zc,p("COLOR","u_sharp",
1,1,1,!0,!0));n.I(h,Uc,zc,Kc);n.I(h,gc,zc,yc)}else{var Vd=p("COLOR","u_color",1,1,1,!0,!0);Vd.ga=H.U;Vd.ha=H.U;var Od=p("COLOR","u_color",1,1,1,!0,!0);Od.ga=H.U;Od.ha=H.U;Wb=d.bd("X_BLUR");n.Z(h,Wb);n.I(h,jb,Wb,Vd);var Lc=d.bd("Y_BLUR");n.Z(h,Lc);n.I(h,Wb,Lc,Od);var Pd=xb[0],zc=d.FM(kb,Ic);kb.dof_distance=e.dof_distance;kb.dof_object=e.dof_object;kb.dof_front_start=e.dof_front_start;kb.dof_front_end=e.dof_front_end;kb.dof_rear_start=e.dof_rear_start;kb.dof_rear_end=e.dof_rear_end;kb.dof_power=e.dof_power;
kb.dof_bokeh=e.dof_bokeh;kb.dof_bokeh_intensity=e.dof_bokeh_intensity;kb.pe=e.pe;kb.dof_on=!0;C.push(zc);n.Z(h,zc);n.I(h,jb,zc,p("COLOR","u_sharp",1,1,1,!0,!0));n.I(h,Lc,zc,p("COLOR","u_blurred",1,1,1,!0,!0));n.I(h,Pd,zc,p("DEPTH","u_depth",1,1,1,!0,!0))}m=C;C=[]}if(a.rj){var pc=g(d.Fh);C.push(pc);m=C;C=[]}if(ma&&!ta){var ce=m[0],ud=d.ZY(Pa.mb_decay_threshold,Pa.mb_factor);C.push(ud);n.Z(h,ud);n.I(h,ce,ud,p("COLOR","u_mb_tex_curr",1,1,1,!0,!0));ud.rb.push(p("COLOR","u_mb_tex_accum",1,1,1,!0,!0));
m=C;C=[]}if(!ta&&a.outline){var jb=m[0],Zd=K.hd(Ea,!0);b.oa.push(Zd);var $b=d.aZ(Zd,F);n.Z(h,$b);var td=d.bd("X_EXTEND"),ae=p("COLOR","u_color",1,1,1,!0,!0),Wd=p("COLOR","u_outline_mask",1,1,1,!0,!0);Wd.ga=H.U;Wd.ha=H.U;td.cp=!0;n.Z(h,td);n.I(h,$b,td,ae);var vd=p("COLOR","u_color",1,.5,.5,!0,!0);vd.ga=H.U;vd.ha=H.U;var Ac=d.bd("Y_EXTEND");Ac.cp=!0;n.Z(h,Ac);n.I(h,td,Ac,vd);Wb=d.bd("X_BLUR");Wb.cp=!0;n.Z(h,Wb);n.I(h,Ac,Wb,vd);var Cd=p("COLOR","u_color",1,.25,.25,!0,!0);Cd.ga=H.U;Cd.ha=H.U;var Dd=p("COLOR",
"u_outline_mask_blurred",1,.25,.25,!0,!0);Dd.ga=H.U;Dd.ha=H.U;Lc=d.bd("Y_BLUR");Lc.cp=!0;n.Z(h,Lc);n.I(h,Wb,Lc,Cd);var bd=d.$Y(Ya);n.Z(h,bd);var Ed=p("COLOR","u_outline_src",1,1,1,!0,!0);Ed.ga=H.U;Ed.ha=H.U;n.I(h,jb,bd,Ed);n.I(h,$b,bd,Wd);n.I(h,Lc,bd,Dd);C.push(bd);m=C;C=[]}t(h,z);if((a.anaglyph_use||a.pA||a.qw)&&!ta){var Qd=M(h,a,b,m[0]);C.push(Qd);m=C;C=[]}if(Ba&&!ta){var jb=m[0],Fd=d.QY(wa.brightness,wa.contrast,wa.exposure,wa.saturation),wd=p("COLOR","u_color",1,1,1,!0,!0);wd.ga=H.U;wd.ha=H.U;
(a.anaglyph_use||a.pA||a.qw)&&!ta&&(wd.Gn=!0);n.Z(h,Fd);n.I(h,jb,Fd,wd);C.push(Fd);m=C;C=[]}if(!m[0].mc||m[0].type==d.tj||m[0].type==d.Hx){var Gd=d.bd("NONE");n.Z(h,Gd);var Hd=p("COLOR","u_color",1,1,1,!0,!0);Hd.ga=H.U;Hd.ha=H.U;n.I(h,m[0],Gd,Hd);C.push(Gd);m=C;C=[]}if(Aa){jb=m[0];if(q.smaa){var Id=p("COLOR","u_color",1,1,1,!0,!1);Id.ga=H.U;Id.ha=H.U;var qc=d.kF(d.Ix,a);n.Z(h,qc);n.I(h,jb,qc,Id);var od=d.kF(d.Jt,a);n.Z(h,od);n.I(h,qc,od,Id);var Jd=p("COLOR","u_search_tex",1,1,1,!1,!1),rc=p("COLOR",
"u_area_tex",1,1,1,!1,!1);Jd.ga=H.U;Jd.ha=H.U;rc.ga=H.U;rc.ha=H.U;od.rb.push(Jd);od.rb.push(rc);var qb=d.kF(d.Jx,a);n.Z(h,qb);n.I(h,jb,qb,Id);var Rd=p("COLOR","u_blend",1,1,1,!0,!1);Rd.ga=H.U;Rd.ha=H.U;n.I(h,od,qb,Rd);C.push(qb)}else{var Kd=d.LY(a);n.Z(h,Kd);var hd=p("COLOR","u_color",1,1,1,!0,!1);hd.ga=H.U;hd.ha=H.U;(a.anaglyph_use||a.pA||a.qw)&&!ta&&(hd.Gn=!0);n.I(h,jb,Kd,hd);C.push(Kd)}m=C;C=[]}C.push(m[0]);tc&&(uc?C.push(uc):C.push(tc));ob&&C.push(ob);Fa=1;if(a.uC.QH){var be=a.uC,Sd=a.On,xd=Sd.Fp,
Fa=xd?xd.vS:Fa,ac=d.fZ(Sd,F,be,Fa);n.Z(h,ac);C.push(ac);N.length&&(n.I(h,ac,Za,N[0]),gb&&n.I(h,ac,gb,N[0]),lb&&n.I(h,ac,lb,N[0]),pc&&n.I(h,ac,pc,N[0]));if(pa.N0)if(q.sb&&!q.is_mobile_device){var cd=d.WY(F,Fa);n.Z(h,cd);var hc=p("CUBEMAP","u_sky_reflection",Fa,1,1,!1);hc.Ve=!0;hc.ga=H.Ck;hc.ha=H.U;n.I(h,ac,cd,hc);var id=p("CUBEMAP","u_irradiance",32,1,1,!1);id.Ve=!1;id.ga=H.U;id.ha=H.U;n.I(h,cd,Za,id);gb&&n.I(h,cd,gb,id);lb&&n.I(h,cd,lb,id);pc&&n.I(h,cd,pc,id);C.push(cd);var jd=d.cZ(F);n.Z(h,jd);n.I(h,
ac,jd,hc);var zb=p("CUBEMAP","u_cube_r_convolution",128,1,1,!1);zb.Ve=!1;zb.ga=H.Ck;zb.ha=H.U;n.I(h,jd,Za,zb);gb&&n.I(h,jd,gb,zb);lb&&n.I(h,jd,lb,zb);pc&&n.I(h,jd,pc,zb);var yd=d.PY();n.Z(h,yd);var Bc=p("COLOR","u_brdf",512,1,1,!1);Bc.ga=H.U;Bc.ha=H.U;n.I(h,yd,Za,Bc);gb&&n.I(h,yd,gb,Bc);lb&&n.I(h,yd,lb,Bc);pc&&n.I(h,yd,pc,Bc)}else hc=p("CUBEMAP","u_sky_reflection",Fa,1,1,!1),hc.Ve=!0,hc.ga=H.Ck,hc.ha=H.U,n.I(h,ac,Za,hc),gb&&n.I(h,ac,gb,hc),lb&&n.I(h,ac,lb,hc),pc&&n.I(h,ac,pc,hc)}var Vc=d.GM();n.Z(h,
Vc);for(na=0;na<C.length;na++){var pd=C[na];switch(pd.type){case d.Df:case d.zi:n.I(h,pd,Vc,p("COLOR","NONE",1,1,1,sc,!1));n.I(h,pd,Vc,p("DEPTH","NONE",1,1,1,sc,!1));break;case d.Ye:n.I(h,pd,Vc,p("CUBEMAP","u_sky",Fa,1,1,!1));break;case d.km:var zd=p("CUBEMAP","u_irradiance",Fa,1,1,!1);zd.Ve=!0;zd.ga=H.Ze;zd.ha=H.Ze;n.I(h,cd,Vc,zd);break;case d.Wp:n.I(h,pd,Vc,p("COLOR","NONE",1,1,1,!0,!1));break;default:if(ta){var qd=f[0],Ad=p("COLOR","OFFSCREEN",1,1,1,!0,!0);Ad.Xa=qd;n.I(h,C[na],Vc,Ad);for(ga=1;ga<
f.length;ga++){var Xd=f[ga],Ld=d.bd("NONE");n.Z(h,Ld);n.I(h,C[na],Ld,p("COLOR","SCALE",1,1,1,!0,!0));var Md=Xd.Rl/qd.Rl,Ad=p("COLOR","OFFSCREEN",1,Md,Md,!0,!0);Ad.Xa=Xd;n.I(h,Ld,Vc,Ad)}}else n.I(h,C[na],Vc,p("SCREEN","NONE",1,1,1,!0,!1))}}Ab&&!u(h,Ab).length&&(n.Dg(h,n.Cl(h,Ab)),n.OE(h));t(h,z);c(h,z);if(R.enabled){var Td=v(h);Td&&P(h,Td)}k(h);B(h);ua&&n.ka(h,function(a,b){if(b.type==d.Wg||b.type==d.Hd||b.type==d.Fh){for(var c=0,e=l(h,b),f=0,g=0;g<e.length;g++){var k=e[g];k.type==d.ae&&(f++,b.Fl=
b.Fl||[],b.Fl[0<k.xh?k.xh:c]=k.H.Jb,c++)}b.Ws&&b.Vs||(q.UA?b.Rw=new Float32Array(9*f):(b.Ws=new Float32Array(4*f),b.Vs=new Float32Array(4*f)))}});if(!pa.pG)for(na=0;na<D.length;na++)D[na].active=!1;return h};a.n2=function(a,b,c){var e=[];n.ka(a,function(b,c){if(-1==qa.indexOf(c.type)&&c.rb.length&&y(a,c,d.Gh))for(var f=0;f<c.rb.length;f++){var g=c.rb[f];-1==e.indexOf(g)&&e.push(g)}});n.yi(a,function(b,c,f){b=n.lb(a,b);c=n.lb(a,c);-1==qa.indexOf(b.type)&&y(a,c,d.Gh)&&-1==e.indexOf(f)&&e.push(f)});
for(var f=0;f<e.length;f++)e[f].Pl*=b,e[f].Ql*=c};a.ye=function(a,b,c){var d=a.wf;a.Bw[0]=b*a.Mb[0]*d;a.Bw[1]=c*a.Mb[1]*d};a.Ud=function(a,b){a.wf=b};a.AY=function(){var a=n.create(),b=d.bZ(),c=K.ad(K.Ac);c.width=512;c.height=512;b.H=c;n.Z(a,b);b.rb.push(p("COLOR","u_color",512,1,1,!1,!1));c=d.GM();n.Z(a,c);n.I(a,b,c,p("COLOR","NONE",512,1,1,!1,!1));k(a);B(a);return a};a.l_=function(a){var b=null;n.ka(a,function(a,c){return c.H&&null===c.H.Mf?(b=c,!0):!1});return b};a.sd=function(a,b,c){a=l(a,b);
for(b=0;b<a.length;b++)if(a[b].type==c)return a[b];return null};a.Pz=function(a,b,c){a=l(a,b);b=[];for(var d=0;d<a.length;d++)a[d].type==c&&b.push(a[d]);return b};a.nca=y;a.qca=D;a.l0=l;a.r0=u;a.cc=function(a,b){var c=null;n.ka(a,function(a,d){return d.type==b?(c=d,!0):!1});return c};a.rZ=function(a){var b="digraph scenegraph {\n",b=b+"    ",b=b+'size="11.7,16.5";\n',b=b+"    ",b=b+'ratio="fill";\n',b=b+"    ",b=b+'node [shape=box margin="0.25,0.055"];\n',c=L(a);n.ka(a,function(a,e){var f=b+="    ",
g=d.RC(e);if(e.H){for(var g=g+"\\n",h=0;h<c.length;h+=2){var k=e.H.bc;c[h]==k&&(g=H.yr(k)?g+("CR"+c[h+1]+" "):g+("C"+c[h+1]+" "))}for(h=0;h<c.length;h+=2)k=e.H.og,c[h]==k&&(g=H.yr(k)?g+("DR"+c[h+1]):g+("D"+c[h+1]))}e.rb.length&&(g+="\\n-----\\n");for(h=0;h<e.rb.length;h++)g+=F(e.rb[h],c);b=f+(String(a)+' [label="'+g+'" color="black" style="'+((e.type==d.mm?"dotted":e.enqueue?"solid":"dashed")+",bold")+'"];\n')});n.yi(a,function(a,d,e){b+="    ";b+=String(a)+" -> "+String(d)+' [label="'+F(e,c)+'" style="'+
(e.active?"solid":"dotted")+'"];\n'});return b+="}"};a.CY=function(a){a=n.v5(a);for(var b=[],c=0;c<a.length;c++){var d=a[c];d.enqueue&&b.push(d)}return b};a.vo=function(a,b,c){var e=n.Cl(a,b);n.$l(a,e,function(a,b,e){if(e.active){switch(e.from){case "COLOR":case "CUBEMAP":var f=b.H.bc;break;case "DEPTH":f=b.H.og;break;case "SCREEN":f=null;break;case d.$d:return;default:G.K("Wrong slink")}switch(e.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "u_cube_reflection":case "u_plane_reflection":break;
default:f||G.K("Connection of SCREEN is forbidden"),f.bg&&G.K("Batch texture can't use renderbuffer"),X.UL(c.Hb,e.to)&&U.Ji(c,f,e.to)}}});for(a=0;a<b.rb.length;a++){var e=b.rb[a],f=b.xi[a];switch(e.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":break;default:f.bg&&G.K("Batch texture can't use renderbuffer"),X.UL(c.Hb,e.to)&&U.Ji(c,f,e.to)}}}};b4w.module.__shaders=function(a,w){function t(){return{Lg:"",jf:"",Oi:[],Rf:[],status:0,cy:0,WC:0}}function c(a){var b=t();b.Lg=a.Lg;b.jf=a.jf;b.Oi=E.Y(a.Oi);b.Rf=E.Y(a.Rf);b.status=a.status;b.cy=a.cy;b.WC=a.WC;return b}function b(a,b,c){var d=a.Oi;"string"==typeof c?(a=k(a,c))&&(c=a[1]):c=String(c);for(a=0;a<d.length;a++)if(d[a][0]==b){d[a][1]=c;break}}function k(a,b){for(var c=a.Oi,d=0;d<c.length;d++)if(c[d][0]==b)return c[d];return!1}function h(a,b){var c=a+b;if(!(c in R)){var d=N(X.shaders_path,
a),e=N(X.shaders_path,b),d=p(d),e=p(e),f;for(f in e)d[f]=e[f];e=[];for(f in d)e.push([f,d[f]]);R[c]=e}return R[c]}function O(a,b){return a+b}function m(a,b){return(a.split(";").map(function(a){return(a=a.match(b))&&(a[3]?parseInt(a[3],10):1)}).filter(function(a){return a})||[]).reduce(O,0)}function x(a,b){var c=P(a.type),d=P(b.type),e=a.jo,f=b.jo;return c>d?-1:c<d?1:e>f?-1:e<f?1:0}function r(a){if(n.sb){a=a.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2");var b=C}else b=pa;a=a.split(";").map(function(a){return(a=
a.match(b))&&{type:a[2],jo:a[4]?parseInt(a[4],10):1}}).filter(function(a){return a});return e(a,ea,f.XA)}function g(a,b,c){a=a.split(";");for(var d=[],f=0;f<a.length;f++){var g=a[f].match(qa);g&&d.push({type:g[2],jo:g[4]?parseInt(g[4],10):1})}return e(d,b,c)}function e(a,b,c){function d(){for(var c=0;l<a.length;){var d=a[l];if(3!=P(d.type))break;c+=v(d.type)*d.jo;l++}h=k+c;if(h>xa)return!1;B(b,k,c,0,3);return!0}function e(){for(var c=xa-h,d=c,e=c;l<a.length;){var f=a[l];if(2!=P(f.type))break;f=v(f.type)*
f.jo;if(f<=d)d-=f;else if(f<=e)e-=f;else return!1;l++}e=c-e;B(b,h,c-d,0,2);B(b,xa-e,e,2,2);return!0}function f(){for(;l<a.length;){for(var d=a[l],d=v(d.type)*d.jo,e=-1,f=c+1,g=-1,h=0;4>h;h++){var k=ma;k[0]=0;k[1]=1;var q;q=b;for(var n=h,m=d,p=k;da<q.length&&15===q[da];)da++;for(;0<xa&&15===q[xa];)xa--;if(xa-da<m)q=!1;else{for(var n=1<<n,C=0,A=-1,u=q.length+1,r=!1,y=da;y<=xa;y++)y<xa&&!(q[y]&n)?r||(C=y,r=!0):(r&&(r=y-C,r>=m&&r<u&&(u=r,A=C)),r=!1);0>A?q=!1:(p[0]=A,p[1]=u,q=!0)}q&&k[1]<f&&(g=k[0],f=
k[1],e=h)}if(0>e)return!1;B(b,g,d,e,1);l++}return!0}if(!a.length)return!0;for(var g=0;g<c;g++)b[g]=0;xa=c;a.sort(x);var h=0,k=0,l=0;return function(){for(;l<a.length;){var c=a[l];if(4!=P(c.type))break;k+=v(c.type)*c.jo;l++}if(k>xa)return!1;da=k;B(b,0,k,0,4);return!0}()&&d()&&e()&&f()}function B(a,b,c,d,e){for(var f=0,g=0;g<e;g++)f|=1<<d+g;for(g=0;g<c;g++)a[b+g]|=f}function v(a){switch(a){case "mat4":a=4;break;case "mat3":a=3;break;case "mat2":a=2;break;default:a=1}return a}function P(a){switch(a){case "mat4":case "vec4":case "ivec4":case "bvec4":case "mat2":a=
4;break;case "mat3":case "vec3":case "ivec3":case "bvec3":a=3;break;case "vec2":case "ivec2":case "bvec2":a=2;break;default:a=1}return a}function N(a,b){var c=a+b;if(H[c])return H[c];if(G){var d=G[b];if(!d)return null;d=w("__gpp_parser").yda.parse(d)}else if(d=w("shader_texts")[b],!d)return null;return H[c]=d}function M(a,b){for(var c={},d=b.Oi||[],e=0;e<d.length;e++)c[d[e][0]]=[d[e][1]];for(e=0;e<b.Rf.length;e++)c["USE_NODE_"+b.Rf[e].id]=["1"];n.sb?(c.GLSL1=["0"],c.GLSL3=["1"],c.GLSL_VERSION=["300 es"],
c.GLSL_IN=["in"],c.GLSL_OUT=["out"],c.GLSL_OUT_FRAG_COLOR=["glsl_out_frag_color"],c.GLSL_TEXTURE=["texture"],c.GLSL_TEXTURE_CUBE=["texture"],c.GLSL_TEXTURE_PROJ=["textureProj"],c.GLSL_TEXTURE_LOD=["textureLod"],c.GLSL_TEXTURE_CUBE_LOD=["textureLod"]):(c.GLSL1=["1"],c.GLSL3=["0"],c.GLSL_VERSION=["100"],c.GLSL_IN="vert"==a?["attribute"]:["varying"],c.GLSL_OUT="vert"==a?["varying"]:[""],c.GLSL_OUT_FRAG_COLOR=["gl_FragColor"],c.GLSL_TEXTURE=["texture2D"],c.GLSL_TEXTURE_CUBE=["textureCube"],c.GLSL_TEXTURE_PROJ=
["texture2DProj"],c.GLSL_TEXTURE_LOD=["textureLod"],n.XC?(c.GLSL_TEXTURE_LOD=["texture2DLodEXT"],c.GLSL_TEXTURE_CUBE_LOD=["textureCubeLodEXT"]):(c.GLSL_TEXTURE_LOD=["texture2D"],c.GLSL_TEXTURE_CUBE_LOD=["textureCube"]));c.GLSL_SMPLR2D_SHDW=n.su&&!n.hw?["sampler2DShadow"]:["sampler2D"];for(var f in c)c[f][0].constructor!=String&&A.warn("Warning! The value of a directive '"+f+"' is not of type string.");return c}function p(a){function b(a){"var"==a.a?d[a.c]=a.b.join(""):"include"==a.a&&(a=N(X.shaders_path,
X.QR+a.F),c(a,b))}function c(a,b,d){if(a instanceof Array)for(var e=0;e<a.length;e++)c(a[e],b,d);else if(a instanceof Object&&a){b&&b(a);for(e in a)c(a[e],b,d);d&&d(a)}}var d={};c(a,b);return d}function I(a,b,c){function d(b){b=b.f;for(var c=0;c<b.length;c++){var l=b[c];switch(l.a){case "cond":a:for(var l=l.f,n=0;n<l.length;n++){var u=l[n];switch(u.a){case "if":case "elif":if(e(u.j)){d(u.l);break a}break;case "else":d(u.l);break a;case "ifdef":u.c in p&&d(u.l);break;case "ifndef":u.c in p||d(u.l)}}break;
case "include":l=l.F;n=N(X.shaders_path,X.QR+l);v.push("include/"+l);d(n);v.pop();break;case "var":break;case "define":p[l.c]=l.b;break;case "error":E.K("Shader error: #error "+l.b.join(" "));break;case "line":break;case "pragma":m.push("#pragma "+l.c+" "+l.b.join(" "));break;case "undef":delete p[l.c];break;case "warning":A.warn("Shader warning: #warning "+l.b.join(" "));break;case "extension":l=k(l.b,p,C,!1);m.push("#extension "+l.join(" "));break;case "version":l=k(l.b,p,C,!1),m.push("#version "+
l.join(" "));case "#":break;case "node":r[l.c]=l;break;case "nodes_global":l=q;for(n=0;n<l.length;n++){var u=l[n],G=r[u.id];if(G)for(var H=0,x=0;x<G.B.length;x++){var V=G.B[x];if("node_param"==V.a){var w;if("PARTICLE_INFO"==u.id&&V.g)if(1==p.PARTICLE_BATCH)switch(w=!1,H){case 0:w=L(u.jb,"PART_INFO_IND")||L(u.jb,"PART_INFO_AGE")||L(u.jb,"PART_INFO_LT")||L(u.jb,"PART_INFO_SIZE");break;case 1:w=L(u.jb,"PART_INFO_LOC");break;case 2:w=L(u.jb,"PART_INFO_VEL");break;case 3:w=L(u.jb,"PART_INFO_A_VEL");break;
case 4:w=L(u.jb,"PART_INFO_IND")}else w=!1;else w=!0;w&&(V=V.i.join(" ")+" ","vert"==a?V+=u.Af[H]:"frag"==a&&(V+=u.nb[H],null!==u.Wr[H]&&(V+="="+u.Wr[H])),V+=";",h(g(V)));H++}}}break;case "nodes_main":l=q;for(n=0;n<l.length;n++)if(u=l[n],G=r[u.id]){H={};z=t=B=0;x=G;V=u;w=x;for(var D={},S=0;S<w.C.length;S++){var F=w.C[S];D[F.c]=[F.b.join("")]}w=D;for(D=0;D<V.jb.length;D++)S=V.jb[D][0],S in w&&(w[S]=[V.jb[D][1]]);for(D=S=0;D<x.B.length;D++)F=x.B[D],"node_out"==F.a&&(w["USE_OUT_"+F.c]=[-1<y.indexOf(V.outputs[S])|
0],S++);x=w;V=u;w=G.B;D=H;S=x;for(F=0;F<w.length;F++){var K=w[F];switch(K.a){case "node_in":var R=V.inputs[B];if(null!==V.xG[B]){if(("MATERIAL_BEGIN"==V.id&&3===B||!S.MATERIAL_EXT&&("MATERIAL_BEGIN"==V.id&&4===B||"MATERIAL_END"==V.id&&3===B||"MATERIAL_END"==V.id&&4===B||"MATERIAL_END"==V.id&&5===B)||"TEXTURE_COLOR"==V.id||"TEXTURE_NORMAL"==V.id)&&K.g){D[K.c]=V.xG[B];B++;continue}var ja=K.i.join(" ")+" ",ja=ja+(R+"="+V.xG[B]+";");h(g(ja))}D[K.c]=R;B++;break;case "node_out":R=V.outputs[t];if(!K.g||
-1<y.indexOf(R))ja=K.i.join(" ")+" ",ja+=R+";",h(g(ja)),D[K.c]=R;t++;break;case "node_param":"vert"==a?R=V.Af[z]:"frag"==a&&(R=V.nb[z]),D[K.c]=R,z++}}m.push("{");f(u,G.u,H,x);m.push("}")}break;case "txt":h(l.b);break;default:E.K("Unknown element type: "+l.a)}}}function e(a,b){var c;c=k(a,p,C,!0,b);for(var d=[],e=0;e<c.length;e++)if(c[e]instanceof Object)switch(c[e].a){case "conditional_expr":var f=d.pop(),g=d.pop();d.pop()?d.push(g):d.push(f);break;case "logical_or_expr":for(var g=d.pop(),h=0;h<c[e].o-
1;h++)f=d.pop(),g=g||f;d.push(g);break;case "logical_and_expr":g=d.pop();for(h=0;h<c[e].o-1;h++)f=d.pop(),g=g&&f;d.push(g);break;case "logical_bitor_expr":g=d.pop();for(h=0;h<c[e].o-1;h++)g|=d.pop();d.push(g);break;case "logical_bitxor_expr":g=d.pop();for(h=0;h<c[e].o-1;h++)g^=d.pop();d.push(g);break;case "logical_bitand_expr":g=d.pop();for(h=0;h<c[e].o-1;h++)g&=d.pop();d.push(g);break;case "equal_expr":f=d.pop();g=d.pop();d.push(g==f);break;case "non_equal_expr":f=d.pop();g=d.pop();d.push(g!=f);
break;case "le_expr":f=d.pop();g=d.pop();d.push(g<=f);break;case "ge_expr":f=d.pop();g=d.pop();d.push(g>=f);break;case "l_expr":f=d.pop();g=d.pop();d.push(g<f);break;case "g_expr":f=d.pop();g=d.pop();d.push(g>f);break;case "left_shift_expr":g=d.pop();f=d.pop();d.push(g<<f);break;case "right_shift_expr":g=d.pop();f=d.pop();d.push(g>>f);break;case "add_expr":g=d.pop();f=d.pop();d.push(g+f);break;case "sub_expr":g=d.pop();f=d.pop();d.push(g-f);break;case "mul_expr":g=d.pop();f=d.pop();d.push(g*f);break;
case "div_expr":g=d.pop();f=d.pop();d.push(g/f);break;case "mod_expr":g=d.pop();f=d.pop();d.push(g%f);break;case "pre_inc_expr":case "post_inc_expr":f=d.pop();d.push(++f);break;case "pre_dec_expr":case "post_dec_expr":f=d.pop();d.push(--f);break;case "positive_expr":f=d.pop();d.push(+f);break;case "negative_expr":f=d.pop();d.push(-f);break;case "one_compl_expr":f=d.pop();d.push(~f);break;case "logic_negative_expr":f=d.pop();d.push(!f);break;default:E.K("Unknown operation type: "+c[e].a)}else f=c[e],
/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(f)?(d.push(0),0!=f.indexOf("USE_NODE_")&&(g=v[v.length-1],g in u||(u[g]=[]),-1==u[g].indexOf(f)&&(u[g].push(f),A.error("Undefined directive '"+f+"' in shader '"+g+"'. Should it be defined with #var/#node_var or #define?")))):d.push(parseFloat(c[e]));1==d.length?c=d[0]:(E.K("Incorrect expression: "+c.join(" ")),c=void 0);return c}function f(a,b,c,d){for(var g=0;g<b.length;g++){var k=b[g];switch(k.a){case "node_cond":a:for(var l=a,k=k.f,q=c,n=d,m=0;m<k.length;m++){var C=
k[m];switch(C.a){case "node_if":case "node_elif":if(e(C.j,n)){f(l,C.u,q,n);break a}break;case "node_else":f(l,C.u,q,n);break a;case "node_ifdef":(C.c in p||C.c in n)&&f(l,C.u,q,n);break;case "node_ifndef":C.c in p||C.c in n||f(l,C.u,q,n)}}break;case "txt":l=[];for(q=0;q<k.b.length;q++)n=k.b[q],n in c?l.push(c[n]):l.push(n);h(l,d)}}}function g(a){return a.match(/([\d]+\.[\d]+|[\w]+|[^\s])/g)}function h(b,c){var d=b;if(!n.sb&&"frag"==a){var e=d.join(" ");x&&(e.match(/[^;]*;/)?(e=e.replace(/[^;]*;/,
""),x=!1):e="");e=e.replace(/GLSL_OUT [^;]*;/g,"");e.match(/GLSL_OUT(?:$| [^;]*)/)&&(e=e.replace(/GLSL_OUT(?:$| [^;]*)/,""),x=!0);e=e.replace(/ {2,}/g," ");(e=e.trim())?d=e.split(" "):d=[]}b=d;b.length&&(d=k(b,p,C,!1,c),m.push(d.join(" ")))}function k(a,b,c,d,e){var f=[];l(a,b,c,d,f,e);return f}function l(a,b,c,d,e,f){for(var g=0;g<a.length;g++){var h=a[g];if(f&&h in f)h=f[h];else if(h in b)h=b[h];else{e.push(h);continue}0==h.length&&d?e.push(0):l(h,b,c,d,e,f)}}var q=c.Rf,m=[],p=M(a,c),C={},v=[c[a]],
u={},r={},y=[],G;for(G in q)for(var H in q[G].inputs)y.push(q[G].inputs[H]);var x=!1;d(b);var B=0,t=0,z=0;return m.join("\n")}function y(a,b,c){c=a.createShader(c);a.shaderSource(c,b);a.compileShader(c);return c}function D(a){V.deleteProgram(a.ik);V.deleteShader(a.AD);V.deleteShader(a.Cz);delete d[a.E4]}function l(a,b){!b&&a.length?b=a.length:b||(b=1);switch(b){case 1:return u(a);case 2:return"vec2("+u(a[0])+","+u(a[1])+")";case 3:return"vec3("+u(a[0])+","+u(a[1])+","+u(a[2])+")";case 4:return"vec4("+
u(a[0])+","+u(a[1])+","+u(a[2])+","+u(a[3])+")";case 9:return"mat3("+u(a[0])+","+u(a[1])+","+u(a[2])+","+u(a[3])+","+u(a[4])+","+u(a[5])+","+u(a[6])+","+u(a[7])+","+u(a[8])+")";case 16:return"mat4("+u(a[0])+","+u(a[1])+","+u(a[2])+","+u(a[3])+","+u(a[4])+","+u(a[5])+","+u(a[6])+","+u(a[7])+","+u(a[8])+","+u(a[9])+","+u(a[10])+","+u(a[11])+","+u(a[12])+","+u(a[13])+","+u(a[14])+","+u(a[15])+")";default:E.K("Wrong glsl value dimension")}}function u(a){return a%1?String(a):String(a)+".0"}function L(a,
b){for(var c=0;c<a.length;c++)if(a[c][0]==b)return!0;return!1}var F=w("__assets"),U=w("__config"),K=w("__debug"),A=w("__print"),E=w("__util"),n=U.L,f=U.Ni,X=U.Tf,d={},H={},G=null,R={},q="anchors.glslf anchors.glslv color_id.glslf color_id.glslv shadow.glslf shadow.glslv error.glslf error.glslv grass_map.glslf grass_map.glslv halo.glslf halo.glslv line.glslf line.glslv main.glslf main.glslv main_stack.glslf particle_system.glslf particle_system_stack.glslf particle_system.glslv proc_skybox.glslf skybox.glslv lens_flares.glslf lens_flares.glslv sky.glslf sky.glslv water.glslf water.glslv tex_skybox.glslf debug_view.glslf debug_view.glslv node_skybox.glslf irradiance_skybox.glslf r_convolution_skybox.glslf postprocessing/antialiasing.glslf postprocessing/bloom_combine.glslf postprocessing/coc.glslf postprocessing/compositing.glslf postprocessing/depth_pack.glslf postprocessing/dof.glslf postprocessing/glow.glslf postprocessing/god_rays.glslf postprocessing/god_rays.glslv postprocessing/god_rays_combine.glslf postprocessing/luminance.glslf postprocessing/luminance_av.glslf postprocessing/luminance_truncated.glslf postprocessing/motion_blur.glslf postprocessing/outline.glslf postprocessing/performance.glslf postprocessing/postprocessing.glslf postprocessing/postprocessing.glslv postprocessing/smaa.glslf postprocessing/smaa.glslv postprocessing/ssao.glslf postprocessing/ssao_blur.glslf postprocessing/stereo.glslf postprocessing/precompute_brdf.glslf include/blending.glslf include/caustics.glslf include/color_util.glslf include/coverage.glslf include/depth_fetch.glslf include/dynamic_grass.glslv include/environment.glslf include/fog.glslf include/fxaa.glslf include/halo_color.glslf include/lighting_nodes.glslf include/math.glslv include/mirror.glslf include/nodes.glslf include/nodes.glslv include/pack.glslf include/particles.glslv include/particles_nodes.glslf include/particles_nodes.glslv include/precision_statement.glslf include/procedural.glslf include/refraction.glslf include/scale_texcoord.glslv include/shadow.glslf include/shadow.glslv include/skin.glslv include/sky_blending.glslf include/std.glsl include/to_world.glslv include/wind_bending.glslv".split(" ");
a.pK=0;a.IT=1;a.HT=2;a.LT=4;a.KT=8;a.JT=16;a.ET=32;var ja=/(?:^|[^a-zA-Z_])uniform.*?(sampler2D|samplerCube)(?=\s)(.*?\[\s*([0-9]*)\s*\])?/,qa=/(?:^|[^a-zA-Z_])(uniform)(?=\s)\s*(float|vec2|vec3|vec4|ivec2|ivec3|ivec4|bvec2|bvec3|bvec4|mat2|mat3|mat4|sampler2D|samplerCube)\s*(.*?\[\s*([0-9]*)\s*\])?/,C=/(?:^|[^a-zA-Z_])(in)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,pa=/(?:^|[^a-zA-Z_])(varying)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,
ia=/(?:\W|^)discard(\W|$)/,ma=new Int16Array(2),ea=null,la=null,ba=null,da=0,xa=0,ca=[],V=null,Ja=!1;a.wh=function(a){V=a};a.f1=t;a.SX=c;a.wa=b;a.Y_=k;a.W3=function(a){a.Oi=E.Y(h(a.Lg,a.jf));b(a,"PRECISION",U.L.precision);"highp"==U.L.precision?b(a,"EPSILON",l(1E-6)):b(a,"EPSILON",l(1E-4));b(a,"CONSTANTS_HACK",n.zI|0);b(a,"SRGB",n.srgb_type);b(a,"COMPARED_MODE",n.su|0)};a.fca=function(a){return a.Lg};a.oba=function(a){return a.jf};a.S_=function(a){var b=JSON.stringify(a.Lg)+JSON.stringify(a.jf)+JSON.stringify(a.Oi)+
JSON.stringify(a.Rf),e=d[b];if(e)return e;var h=a.jf,k=N(X.shaders_path,a.Lg),h=N(X.shaders_path,h);if(!k||!h)return null;var k=I("vert",k,a),h=I("frag",h,a),e=0,l=m(h,ja);a.WC=l;l>f.YG&&(e|=1);ea||(ea=new Uint32Array(f.XA));la||(la=new Uint32Array(f.UG));ba||(ba=new Uint32Array(f.YA));g(h,la,f.UG)||(e|=2);g(k,ba,f.YA)||(e|=4);l=n.sb?(k.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2").match(/(?:^|[^a-zA-Z_])in(?=\s)/g)||[]).length:(k.match(/(?:^|[^a-zA-Z_])attribute(?=\s)/g)||[]).length;a.cy=l;l>f.ZG&&(e|=
8);r(h)||(e|=16);a.status=e;if(0===a.status){var e=V,q=y(e,k,e.VERTEX_SHADER),p=y(e,h,e.FRAGMENT_SHADER),l=e.createProgram();e.attachShader(l,q);e.attachShader(l,p);e.linkProgram(l);for(var q={AD:q,Cz:p,ik:l,attributes:{},Fn:{},Nv:E.zm(),zH:E.zm(),AH:{},Lr:!0,jB:!1,DS:E.zm(),CS:E.zm(),qb:c(a),E4:b,GO:!!h.match(ia),Mh:!0},C=e.getProgramParameter(l,e.ACTIVE_ATTRIBUTES),p=0;p<C;p++){var u=e.getActiveAttrib(l,p).name;q.attributes[u]=e.getAttribLocation(l,u)}C=e.getProgramParameter(l,e.ACTIVE_UNIFORMS);
for(p=0;p<C;p++)u=e.getActiveUniform(l,p).name.split("[0]").join(""),q.Fn[u]=e.getUniformLocation(l,u);d[b]=e=q;l=!V.getShaderParameter(e.Cz,V.COMPILE_STATUS);q=!V.getShaderParameter(e.AD,V.COMPILE_STATUS);p=!V.getProgramParameter(e.ik,V.LINK_STATUS);l?K.LQ(e.Cz,b,h):q?K.LQ(e.AD,b,k):p&&K.v3(e.ik,b,k,h);if(l||q||p)a.status|=32,e=null}else e=null;return e};a.N1=function(){Ja=!1;if(b4w.module_check("shader_texts"))Ja=!0;else{for(var a=[],b=F.LD,c=0;c<q.length;c++){var d=E.El(X.shaders_path+q[c]);a.push({id:q[c],
type:b,url:d})}b=function(a,b){G||(G={});G[b]=a};a.length?F.enqueue(a,b,function(){Ja=!0}):A.error("Shaders have not been found.")}};a.TL=function(){return Ja};a.D$=function(){return ca};a.KN=function(){return d};a.Ja=function(){for(var a in d)D(d[a]);for(var b in H)delete H[b];for(var c in ca)delete ca[c];ba=la=ea=null;R={}};a.LX=D;a.E$=function(a){var b=a.Oi;A.log("Shader: "+a.Lg+" "+a.jf+", "+String(b.length)+" directives: ");for(a=0;a<b.length;a++)A.log("  "+b[a][0],b[a][1])};a.fa=l;a.UL=function(a,
b){return b in a.Fn?!0:!1};a.reset=function(){V=null}};b4w.module.__assets=function(a,w){function t(){return P.dP()?w(P.Tf.qy).data:null}function c(){var a={Tx:null,XV:function(b){switch(a.responseType){case "json":case "text":return b;case "arraybuffer":b=atob(b);for(var c=b.length,e=new Int8Array(c),f=0;f<c;f++)e[f]=b.charCodeAt(f);return e.buffer;default:return b}},status:0,readyState:0,response:"",responseType:"",onreadystatechange:null,overrideMimeType:function(){},addEventListener:function(){},open:function(b,c){a.Tx=c;a.readyState=1},send:function(){a.status=
404;a.readyState=4;var b=t();b&&a.Tx in b&&(a.status=200,b[a.Tx]&&(a.response=a.XV(b[a.Tx])));if("[object Function]"==={}.toString.call(a.onreadystatechange))a.onreadystatechange()}};return a}function b(b){for(var c=0,d=0;d<b.length;d++){var e=b[d];20===e.state&&c++;if(c>=u.f2)break;if(10===e.state)switch(e.state=20,c++,e.type){case a.jt:case a.Xp:case a.it:k(e,"arraybuffer");break;case a.fm:k(e,"json");break;case a.LD:k(e,"text");break;case a.JD:h(e);break;case a.Yp:O(e);break;case a.KD:m(e);break;
case a.bx:x(e);break;case a.ax:r(e);break;default:y.K("Wrong asset type: "+e.type)}}}function k(b,e){var d=b.url.split("?v=")[0];if(d in K)"json"==e?b.jc(y.Y(K[d]),b.id,b.type,b.url,b.Qb):b.jc(K[d],b.id,b.type,b.url,b.Qb);else{var f=t(),g=f&&b.url in f?new c:new XMLHttpRequest,f=null;if("GET"==b.jk)g.open("GET",b.url,!0);else if("POST"==b.jk)switch(g.open("POST",b.url,!0),b.type){case a.LD:f="text/plain";break;case a.fm:f="application/json"}if(b.fn)for(var h in b.fn)"Content-Type"==h?f=b.fn[h]:g.setRequestHeader(h,
b.fn[h]);f&&g.setRequestHeader("Content-Type",f);"text"==e?(g.overrideMimeType("text/plain"),g.responseType="text"):"json"==e?(g.overrideMimeType("application/json"),g.responseType="text"):g.responseType=e;g.onreadystatechange=function(){if(40!=b.state&&4==g.readyState){if(200==g.status||0==g.status){var c=g.response;if(!c||"arraybuffer"==e&&0==c.byteLength)p.error("empty responce when trying to get "+b.url),b.jc(null,b.id,b.type,b.url,b.Qb);else{switch(b.type){case a.jt:try{c=M.pr(c,{to:"string"})}catch(ja){p.error(ja+
" (parsing gzipped file "+b.url+")");b.jc(null,b.id,b.type,b.url,b.Qb);return}case a.fm:try{c=JSON.parse(c,b.t1)}catch(ja){p.error(ja+" (parsing JSON "+b.url+")");b.jc(null,b.id,b.type,b.url,b.Qb);return}break;case a.it:try{c=M.pr(c).buffer}catch(ja){p.error(ja+" (parsing gzipped file "+b.url+")");b.jc(null,b.id,b.type,b.url,b.Qb);return}}b.nf&&(K[d]=b.type==a.fm||b.type==a.jt?y.Y(c):c);b.jc(c,b.id,b.type,b.url,b.Qb)}}else p.error(g.status+" when trying to get "+b.url),b.jc(null,b.id,b.type,b.url,
b.Qb);b.state=30}};g.addEventListener("progress",function(a){a.lengthComputable&&b.yQ(a.loaded/a.total)},!1);g.send(b.BB)}}function h(a){var b=a.url.split("?v=")[0];if(b in n)a.jc(n[b],a.id,a.type,a.url,a.Qb),a.state=30;else{"GET"!=a.jk&&y.K("Unsupported request type for audio buffer");var d=(b=t())&&a.url in b?new c:new XMLHttpRequest;d.open("GET",a.url,!0);d.responseType="arraybuffer";d.onreadystatechange=function(){if(40!=a.state&&4==d.readyState)if(200==d.status||0==d.status){var b=d.response;
b?I.uZ(b,function(b){a.jc(b,a.id,a.type,a.url,a.Qb);a.state=30;a.nf&&(n[a.url.split("?v=")[0]]=b)},function(){p.error("failed to decode "+a.url);a.jc(null,a.id,a.type,a.url,a.Qb);a.state=30}):(p.error("empty responce when trying to get "+a.url),a.jc(null,a.id,a.type,a.url,a.Qb),a.state=30)}else p.error(d.status+" when trying to get "+a.url),a.jc(null,a.id,a.type,a.url,a.Qb),a.state=30};d.send()}}function O(a){var b=a.url.split("?v=")[0];if(b in A)a.jc(A[b],a.id,a.type,a.url,a.Qb),a.state=30;else{"GET"!=
a.jk&&y.K("Unsupported request type for image element");var c=document.createElement("img");l.allow_cors&&(c.crossOrigin="Anonymous");c.onload=function(){40!=a.state&&(a.jc(c,a.id,a.type,a.url,a.Qb),a.state=30,a.nf&&(A[a.url.split("?v=")[0]]=c))};c.addEventListener("error",function(){40!=a.state&&(p.error("could not load image: "+a.url),a.jc(null,a.id,a.type,a.url,a.Qb),a.state=30)},!1);if((b=t())&&a.url in b)if(b[a.url]){var f=e(a.url);c.src="data:"+f+";base64,"+b[a.url]}else N.ep()?(b=document.createEvent("CustomEvent"),
b.initCustomEvent("error",!1,!1,null)):b=new CustomEvent("error"),c.dispatchEvent(b);else c.src=a.url}}function m(a){var b=a.url.split("?v=")[0];if(b in E)a.jc(E[b],a.id,a.type,a.url,a.Qb),a.state=30;else{"GET"!=a.jk&&y.K("Unsupported request type for audio element");var c=document.createElement("audio");l.allow_cors&&(c.crossOrigin="Anonymous");c.addEventListener("loadeddata",function(){40!=a.state&&(a.jc(c,a.id,a.type,a.url,a.Qb),a.state=30,a.nf&&(E[a.url.split("?v=")[0]]=c))},!1);c.addEventListener("error",
function(){40!=a.state&&(p.error("could not load sound: "+a.url),a.jc(null,a.id,a.type,a.url,a.Qb),a.state=30)},!1);c.addEventListener("stalled",function(){40!=a.state&&(p.error("could not load sound: "+a.url),a.jc(null,a.id,a.type,a.url,a.Qb),a.state=30)},!1);if((b=t())&&a.url in b)if(b[a.url]){var e=B(a.url);c.src="data:"+e+";base64,"+b[a.url];40!=a.state&&(a.jc(c,a.id,a.type,a.url,a.Qb),a.state=30)}else N.ep()?(b=document.createEvent("CustomEvent"),b.initCustomEvent("error",!1,!1,null)):b=new CustomEvent("error"),
c.dispatchEvent(b);else c.src=a.url,l.is_mobile_device&&c.load();l.bH&&(c.autoplay=!0,c.pause());setTimeout(function(){c.YV=1},5E3)}}function x(a){function b(){40!=a.state&&(p.error("could not load video: "+a.url,a.Qb),a.jc(null,a.id,a.type,a.url),a.state=30)}var c=a.url.split("?v=")[0];if(c in A)a.jc(A[c],a.id,a.type,a.url,a.Qb),a.state=30;else{"GET"!=a.jk&&y.K("Unsupported request type for video element");var e=document.createElement("video");e.muted=!0;l.allow_cors&&(e.crossOrigin="Anonymous");
e.addEventListener("loadeddata",function(){e.removeEventListener("error",b,!1);40!=a.state&&(a.jc(e,a.id,a.type,a.url,a.Qb),a.state=30,a.nf&&(A[a.url.split("?v=")[0]]=e))},!1);e.addEventListener("error",b,!1);if((c=t())&&a.url in c)if(c[a.url]){var f=v(a.url);e.src="data:"+f+";base64,"+c[a.url];40!=a.state&&e.addEventListener("loadeddata",function(){a.jc(e,a.id,a.type,a.url,a.Qb);a.state=30},!1)}else N.ep()?(c=document.createEvent("CustomEvent"),c.initCustomEvent("error",!1,!1,null)):c=new CustomEvent("error"),
e.dispatchEvent(c);else e.src=a.url,l.is_mobile_device&&e.load();if(l.bH||l.YO)e.autoplay=!0,e.pause();setTimeout(function(){e.YV=1},1E4)}}function r(a){function b(b){a.jc(b,a.id,a.type,a.url,a.Qb);a.state=30;a.nf&&(A[a.url.split("?v=")[0]]=b)}var d=a.url.split("?v=")[0];if(d in A)a.jc(A[d],a.id,a.type,a.url,a.Qb),a.state=30;else{"GET"!=a.jk&&y.K("Unsupported request type for seq video element");var e=(d=t())&&a.url in d?new c:new XMLHttpRequest;e.open("GET",a.url,!0);e.responseType="arraybuffer";
e.onreadystatechange=function(){if(40!=a.state&&4==e.readyState)if(200==e.status||0==e.status){var c=e.response;c?g(c,b):(p.error("empty responce when trying to get "+a.url),a.jc(null,a.id,a.type,a.url,a.Qb),a.state=30)}else p.error(e.status+" when trying to get "+a.url),a.jc(null,a.id,a.type,a.url,a.Qb),a.state=30};e.addEventListener("progress",function(b){b.lengthComputable&&a.yQ(b.loaded/b.total)},!1);e.send()}}function g(a,b){for(var c=new Int32Array(a),e=new Int8Array(a),f=c[3],g={images:[],
xL:[],Ri:c[4]},h=20,k=0;k<f;k++){var l=c[h/4],n=new Blob([e.subarray(h+4,h+4+l)],{type:"image/jpg"}),m=document.createElement("img");m.src=window.URL.createObjectURL(n);g.images.push(m);g.xL.push(n);h+=l+8-l%4}m.onload=function(){for(var a=0;a<g.images.length;a++)window.URL.revokeObjectURL(g.images[a].src);delete g.xL;b(g)}}function e(a){var b="image";switch(y.XF(a).toLowerCase()){case "jpeg":case "jpg":b+="/jpeg";break;case "png":b+="/png"}return b}function B(a){var b="audio";switch(y.XF(a).toLowerCase()){case "ogv":case "ogg":b+=
"/ogg";break;case "mp3":b+="/mpeg";break;case "m4v":case "mp4":b+="/mp4";break;case "webm":b+="/webm"}return b}function v(a){var b="video";switch(y.XF(a).toLowerCase()){case "ogv":b+="/ogg";break;case "webm":b+="/webm";break;case "m4v":case "mp4":b+="/mp4"}return b}var P=w("__config"),N=w("__compat"),M=w("__pako_inflate"),p=w("__print"),I=w("__sfx"),y=w("__util"),D=w("__version"),l=P.L,u=P.Je;a.Xp=10;a.it=20;a.fm=30;a.jt=40;a.LD=50;a.JD=60;a.Yp=70;a.KD=80;a.bx=90;a.ax=100;var L=[],F=0,U={},K={},A=
{},E={},n={};a.HC=function(a){a=a.split(".");var b=Array(2);b[0]=a.slice(0,-1).join(".");b[1]=String(a.slice(-1));return b};a.Vba=function(a){if(U[a])return U[a];var b=u.prevent_caching?a+"?v="+D.get_build_version():a,c=new XMLHttpRequest;c.overrideMimeType("text/plain");c.open("GET",b,!1);c.send(null);if(200!=c.status&&c.status)y.K("Error XHR: "+c.status+", GET "+a);else{b=c.responseText;if(b.length)return U[a]=b;y.K("Error XHR: responce is empty, GET "+a)}};a.Ja=function(){for(var a=0;a<L.length;a++)L[a].state=
40;L=[];F=0;U={}};a.enqueue=function(a,c,d,e,g){for(var f=0;f<a.length;f++){var h=a[f],h={id:h.id,type:h.type,url:h.url,nf:h.nf,jk:h.jk?h.jk:"GET",fn:h.fn?h.fn:null,BB:h.BB?h.BB:null,Qb:h.Qb?h.Qb:null,state:10,jc:c||function(){},lQ:d||function(){},yQ:e||function(){},t1:g||null,mQ:F};if(u.prevent_caching){var k=t();k&&h.url in k||(h.url+="?v="+D.get_build_version())}L.push(h)}b(L);F++};a.update=function(){b(L);for(var a=L,c=0,d=!0,e=0;e<a.length;e++){var g=a[e];g.mQ===a[c].mQ?30!==g.state&&(d=!1):
(d&&(a[e-1].lQ(),d=e-c,a.splice(c,d),e-=d),c=e,d=30===a[e].state?!0:!1);e===a.length-1&&d&&(g=a[e],a.splice(c),g.lQ())}};a.DX=function(a){return"png"==a||"jpg"==a||"jpeg"==a||"gif"==a||"bmp"==a||"dds"==a||"pvr"==a?!0:!1};a.NX=function(){K={};A={};E={};n={}}};b4w.module.__pako_inflate=function(a){(function(a){var t;"undefined"!==typeof window?t=window:"undefined"!==typeof self?t=self:t=this;t.E2=a()})(function(){return function t(a,b,k){function c(h){if(!b[h]){if(!a[h]){if(O)return O(h,!0);var m=Error("Cannot find module '"+h+"'");throw m.code="MODULE_NOT_FOUND",m;}m=b[h]={exports:{}};a[h][0].call(m.exports,function(b){var e=a[h][1][b];return c(e?e:b)},m,m.exports,t,a,b,k)}return b[h].exports}for(var O=!1,m=0;m<k.length;m++)c(k[m]);return c}({1:[function(a,
c,b){a="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;b.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!==typeof c)throw new TypeError(c+"must be non-object");for(var h in c)c.hasOwnProperty(h)&&(a[h]=c[h])}}return a};b.VR=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var k={io:function(a,b,c,h,g){if(b.subarray&&a.subarray)a.set(b.subarray(c,
c+h),g);else for(var e=0;e<h;e++)a[g+e]=b[c+e]},nN:function(a){var b,c,h,g,e;b=h=0;for(c=a.length;b<c;b++)h+=a[b].length;e=new Uint8Array(h);b=h=0;for(c=a.length;b<c;b++)g=a[b],e.set(g,h),h+=g.length;return e}},h={io:function(a,b,c,h,g){for(var e=0;e<h;e++)a[g+e]=b[c+e]},nN:function(a){return[].concat.apply([],a)}};b.M3=function(a){a?(b.Pn=Uint8Array,b.mt=Uint16Array,b.nt=Int32Array,b.assign(b,k)):(b.Pn=Array,b.mt=Array,b.nt=Array,b.assign(b,h))};b.M3(a)},{}],2:[function(a,c,b){function k(a,b){if(65537>
b&&(a.subarray&&m||!a.subarray&&t))return String.fromCharCode.apply(null,h.VR(a,b));for(var c="",g=0;g<b;g++)c+=String.fromCharCode(a[g]);return c}var h=a("./common"),t=!0,m=!0,x=new h.Pn(256);for(a=0;256>a;a++)x[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;x[254]=x[254]=1;b.f5=function(a){var b,c,k,m,r,x=a.length,t=0;for(m=0;m<x;m++)c=a.charCodeAt(m),55296===(c&64512)&&m+1<x&&(k=a.charCodeAt(m+1),56320===(k&64512)&&(c=65536+(c-55296<<10)+(k-56320),m++)),t+=128>c?1:2048>c?2:65536>c?3:4;b=new h.Pn(t);
for(m=r=0;r<t;m++)c=a.charCodeAt(m),55296===(c&64512)&&m+1<x&&(k=a.charCodeAt(m+1),56320===(k&64512)&&(c=65536+(c-55296<<10)+(k-56320),m++)),128>c?b[r++]=c:(2048>c?b[r++]=192|c>>>6:(65536>c?b[r++]=224|c>>>12:(b[r++]=240|c>>>18,b[r++]=128|c>>>12&63),b[r++]=128|c>>>6&63),b[r++]=128|c&63);return b};b.U9=function(a){return k(a,a.length)};b.SW=function(a){for(var b=new h.Pn(a.length),c=0,k=b.length;c<k;c++)b[c]=a.charCodeAt(c);return b};b.aX=function(a,b){var c,h,g,m,r=b||a.length,t=Array(2*r);for(c=h=
0;c<r;)if(g=a[c++],128>g)t[h++]=g;else if(m=x[g],4<m)t[h++]=65533,c+=m-1;else{for(g&=2===m?31:3===m?15:7;1<m&&c<r;)g=g<<6|a[c++]&63,m--;1<m?t[h++]=65533:65536>g?t[h++]=g:(g-=65536,t[h++]=55296|g>>10&1023,t[h++]=56320|g&1023)}return k(t,h)};b.z6=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);for(c=b-1;0<=c&&128===(a[c]&192);)c--;return 0>c||!c?b:c+x[a[c]]>b?c:b}},{"./common":1}],3:[function(a,c){c.exports=function(a,c,h,t){var b=a&65535|0;a=a>>>16&65535|0;for(var k;0!==h;){k=2E3<h?2E3:
h;h-=k;do b=b+c[t++]|0,a=a+b|0;while(--k);b%=65521;a%=65521}return b|a<<16|0}},{}],4:[function(a,c){c.exports={HK:0,j9:1,IK:2,g9:3,Qx:4,Y8:5,n9:6,yq:0,Rx:1,TV:2,d9:-1,l9:-2,Z8:-3,SV:-5,i9:0,W8:1,V8:9,a9:-1,e9:1,h9:2,k9:3,f9:4,b9:0,X8:0,m9:1,o9:2,c9:8}},{}],5:[function(a,c){var b=function(){for(var a,b=[],c=0;256>c;c++){a=c;for(var m=0;8>m;m++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}();c.exports=function(a,c,t,m){t=m+t;for(a^=-1;m<t;m++)a=a>>>8^b[(a^c[m])&255];return a^-1}},{}],6:[function(a,
c){c.exports=function(){this.z2=this.P6=this.time=this.text=0;this.ee=null;this.FF=0;this.VE=this.name="";this.P0=0;this.done=!1}},{}],7:[function(a,c){c.exports=function(a,c){var b,k,m,x,r,g,e,B,v,t,N,M,p,I,y,D,l,u,L,F,U,K,A,E;b=a.state;k=a.an;A=a.input;m=k+(a.bh-5);x=a.sf;E=a.ej;r=x-(c-a.be);g=x+(a.be-257);e=b.fz;B=b.Rg;v=b.dm;t=b.Qg;N=b.window;M=b.Lm;p=b.Kd;I=b.vl;y=b.Eo;D=(1<<b.$j)-1;l=(1<<b.Yq)-1;a:do b:for(15>p&&(M+=A[k++]<<p,p+=8,M+=A[k++]<<p,p+=8),u=I[M&D];;){L=u>>>24;M>>>=L;p-=L;if(L=u>>>
16&255)if(L&16){F=u&65535;if(L&=15)p<L&&(M+=A[k++]<<p,p+=8),F+=M&(1<<L)-1,M>>>=L,p-=L;15>p&&(M+=A[k++]<<p,p+=8,M+=A[k++]<<p,p+=8);u=y[M&l];c:for(;;){L=u>>>24;M>>>=L;p-=L;L=u>>>16&255;if(L&16){u&=65535;L&=15;p<L&&(M+=A[k++]<<p,p+=8,p<L&&(M+=A[k++]<<p,p+=8));u+=M&(1<<L)-1;if(u>e){a.Pb="invalid distance too far back";b.mode=30;break a}M>>>=L;p-=L;L=x-r;if(u>L){L=u-L;if(L>v&&b.bI){a.Pb="invalid distance too far back";b.mode=30;break a}U=0;K=N;if(0===t){if(U+=B-L,L<F){F-=L;do E[x++]=N[U++];while(--L);
U=x-u;K=E}}else if(t<L){if(U+=B+t-L,L-=t,L<F){F-=L;do E[x++]=N[U++];while(--L);U=0;if(t<F){L=t;F-=L;do E[x++]=N[U++];while(--L);U=x-u;K=E}}}else if(U+=t-L,L<F){F-=L;do E[x++]=N[U++];while(--L);U=x-u;K=E}for(;2<F;)E[x++]=K[U++],E[x++]=K[U++],E[x++]=K[U++],F-=3;F&&(E[x++]=K[U++],1<F&&(E[x++]=K[U++]))}else{U=x-u;do E[x++]=E[U++],E[x++]=E[U++],E[x++]=E[U++],F-=3;while(2<F);F&&(E[x++]=E[U++],1<F&&(E[x++]=E[U++]))}}else if(L&64){a.Pb="invalid distance code";b.mode=30;break a}else{u=y[(u&65535)+(M&(1<<L)-
1)];continue c}break}}else if(L&64){L&32?b.mode=12:(a.Pb="invalid literal/length code",b.mode=30);break a}else{u=I[(u&65535)+(M&(1<<L)-1)];continue b}else E[x++]=u&65535;break}while(k<m&&x<g);F=p>>3;k-=F;p-=F<<3;a.an=k;a.sf=x;a.bh=k<m?5+(m-k):5-(k-m);a.be=x<g?257+(g-x):257-(x-g);b.Lm=M&(1<<p)-1;b.Kd=p}},{}],8:[function(a,c,b){function k(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function h(){this.mode=0;this.HA=!1;this.qj=0;this.sG=!1;this.total=this.check=this.fz=this.td=0;
this.head=null;this.Qg=this.dm=this.Rg=this.ht=0;this.window=null;this.ee=this.offset=this.length=this.Kd=this.Lm=0;this.Eo=this.vl=null;this.ai=this.Fv=this.Or=this.XP=this.Yq=this.$j=0;this.next=null;this.qf=new e.mt(320);this.Zw=new e.mt(288);this.ZM=this.xP=null;this.K6=this.back=this.bI=0}function t(a){var b;if(!a||!a.state)return-2;b=a.state;a.WI=a.Ew=b.total=0;a.Pb="";b.qj&&(a.bo=b.qj&1);b.mode=1;b.HA=0;b.sG=0;b.fz=32768;b.head=null;b.Lm=0;b.Kd=0;b.vl=b.xP=new e.nt(852);b.Eo=b.ZM=new e.nt(592);
b.bI=1;b.back=-1;return 0}function m(a){var b;if(!a||!a.state)return-2;b=a.state;b.Rg=0;b.dm=0;b.Qg=0;return t(a)}function x(a,b){var c,e;if(!a||!a.state)return-2;e=a.state;0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15));if(b&&(8>b||15<b))return-2;null!==e.window&&e.ht!==b&&(e.window=null);e.qj=c;e.ht=b;return m(a)}function r(a,b){var c;if(!a)return-2;c=new h;a.state=c;c.window=null;c=x(a,b);0!==c&&(a.state=null);return c}function g(a,b,c,g){var h=a.state;null===h.window&&(h.Rg=1<<h.ht,h.Qg=0,h.dm=0,h.window=
new e.Pn(h.Rg));g>=h.Rg?(e.io(h.window,b,c-h.Rg,h.Rg,0),h.Qg=0,h.dm=h.Rg):(a=h.Rg-h.Qg,a>g&&(a=g),e.io(h.window,b,c-g,a,h.Qg),(g-=a)?(e.io(h.window,b,c-g,g,0),h.Qg=g,h.dm=h.Rg):(h.Qg+=a,h.Qg===h.Rg&&(h.Qg=0),h.dm<h.Rg&&(h.dm+=a)));return 0}var e=a("../utils/common"),B=a("./adler32"),v=a("./crc32"),P=a("./inffast"),N=a("./inftrees"),M=!0,p,I;b.Lca=m;b.Mca=x;b.Nca=t;b.Jca=function(a){return r(a,15)};b.V0=r;b.pr=function(a,b){var c,h,m,r,y,x,A,E,n,f,t,d,H,G,D,q,ja,qa,C=new e.Pn(4),O=[16,17,18,0,8,7,
9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.ej||!a.input&&0!==a.bh)return-2;c=a.state;12===c.mode&&(c.mode=13);y=a.sf;m=a.ej;A=a.be;r=a.an;h=a.input;x=a.bh;E=c.Lm;n=c.Kd;f=x;t=A;qa=0;a:for(;;)switch(c.mode){case 1:if(0===c.qj){c.mode=13;break}for(;16>n;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}if(c.qj&2&&35615===E){c.check=0;C[0]=E&255;C[1]=E>>>8&255;c.check=v(c.check,C,2,0);n=E=0;c.mode=2;break}c.td=0;c.head&&(c.head.done=!1);if(!(c.qj&1)||(((E&255)<<8)+(E>>8))%31){a.Pb="incorrect header check";
c.mode=30;break}if(8!==(E&15)){a.Pb="unknown compression method";c.mode=30;break}E>>>=4;n-=4;H=(E&15)+8;if(0===c.ht)c.ht=H;else if(H>c.ht){a.Pb="invalid window size";c.mode=30;break}c.fz=1<<H;a.bo=c.check=1;c.mode=E&512?10:12;n=E=0;break;case 2:for(;16>n;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}c.td=E;if(8!==(c.td&255)){a.Pb="unknown compression method";c.mode=30;break}if(c.td&57344){a.Pb="unknown header flags set";c.mode=30;break}c.head&&(c.head.text=E>>8&1);c.td&512&&(C[0]=E&255,C[1]=E>>>8&255,
c.check=v(c.check,C,2,0));n=E=0;c.mode=3;case 3:for(;32>n;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}c.head&&(c.head.time=E);c.td&512&&(C[0]=E&255,C[1]=E>>>8&255,C[2]=E>>>16&255,C[3]=E>>>24&255,c.check=v(c.check,C,4,0));n=E=0;c.mode=4;case 4:for(;16>n;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}c.head&&(c.head.P6=E&255,c.head.z2=E>>8);c.td&512&&(C[0]=E&255,C[1]=E>>>8&255,c.check=v(c.check,C,2,0));n=E=0;c.mode=5;case 5:if(c.td&1024){for(;16>n;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}c.length=E;c.head&&
(c.head.FF=E);c.td&512&&(C[0]=E&255,C[1]=E>>>8&255,c.check=v(c.check,C,2,0));n=E=0}else c.head&&(c.head.ee=null);c.mode=6;case 6:if(c.td&1024&&(d=c.length,d>x&&(d=x),d&&(c.head&&(H=c.head.FF-c.length,c.head.ee||(c.head.ee=Array(c.head.FF)),e.io(c.head.ee,h,r,d,H)),c.td&512&&(c.check=v(c.check,h,d,r)),x-=d,r+=d,c.length-=d),c.length))break a;c.length=0;c.mode=7;case 7:if(c.td&2048){if(0===x)break a;d=0;do H=h[r+d++],c.head&&H&&65536>c.length&&(c.head.name+=String.fromCharCode(H));while(H&&d<x);c.td&
512&&(c.check=v(c.check,h,d,r));x-=d;r+=d;if(H)break a}else c.head&&(c.head.name=null);c.length=0;c.mode=8;case 8:if(c.td&4096){if(0===x)break a;d=0;do H=h[r+d++],c.head&&H&&65536>c.length&&(c.head.VE+=String.fromCharCode(H));while(H&&d<x);c.td&512&&(c.check=v(c.check,h,d,r));x-=d;r+=d;if(H)break a}else c.head&&(c.head.VE=null);c.mode=9;case 9:if(c.td&512){for(;16>n;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}if(E!==(c.check&65535)){a.Pb="header crc mismatch";c.mode=30;break}n=E=0}c.head&&(c.head.P0=
c.td>>9&1,c.head.done=!0);a.bo=c.check=0;c.mode=12;break;case 10:for(;32>n;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}a.bo=c.check=k(E);n=E=0;c.mode=11;case 11:if(0===c.sG)return a.sf=y,a.be=A,a.an=r,a.bh=x,c.Lm=E,c.Kd=n,2;a.bo=c.check=1;c.mode=12;case 12:if(5===b||6===b)break a;case 13:if(c.HA){E>>>=n&7;n-=n&7;c.mode=27;break}for(;3>n;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}c.HA=E&1;E>>>=1;--n;switch(E&3){case 0:c.mode=14;break;case 1:H=c;if(M){p=new e.nt(512);I=new e.nt(32);for(d=0;144>d;)H.qf[d++]=
8;for(;256>d;)H.qf[d++]=9;for(;280>d;)H.qf[d++]=7;for(;288>d;)H.qf[d++]=8;N(1,H.qf,0,288,p,0,H.Zw,{Kd:9});for(d=0;32>d;)H.qf[d++]=5;N(2,H.qf,0,32,I,0,H.Zw,{Kd:5});M=!1}H.vl=p;H.$j=9;H.Eo=I;H.Yq=5;c.mode=20;if(6===b){E>>>=2;n-=2;break a}break;case 2:c.mode=17;break;case 3:a.Pb="invalid block type",c.mode=30}E>>>=2;n-=2;break;case 14:E>>>=n&7;for(n-=n&7;32>n;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}if((E&65535)!==(E>>>16^65535)){a.Pb="invalid stored block lengths";c.mode=30;break}c.length=E&65535;n=
E=0;c.mode=15;if(6===b)break a;case 15:c.mode=16;case 16:if(d=c.length){d>x&&(d=x);d>A&&(d=A);if(0===d)break a;e.io(m,h,r,d,y);x-=d;r+=d;A-=d;y+=d;c.length-=d;break}c.mode=12;break;case 17:for(;14>n;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}c.Or=(E&31)+257;E>>>=5;n-=5;c.Fv=(E&31)+1;E>>>=5;n-=5;c.XP=(E&15)+4;E>>>=4;n-=4;if(286<c.Or||30<c.Fv){a.Pb="too many length or distance symbols";c.mode=30;break}c.ai=0;c.mode=18;case 18:for(;c.ai<c.XP;){for(;3>n;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}c.qf[O[c.ai++]]=
E&7;E>>>=3;n-=3}for(;19>c.ai;)c.qf[O[c.ai++]]=0;c.vl=c.xP;c.$j=7;d={Kd:c.$j};qa=N(0,c.qf,0,19,c.vl,0,c.Zw,d);c.$j=d.Kd;if(qa){a.Pb="invalid code lengths set";c.mode=30;break}c.ai=0;c.mode=19;case 19:for(;c.ai<c.Or+c.Fv;){for(;;){D=c.vl[E&(1<<c.$j)-1];d=D>>>24;D&=65535;if(d<=n)break;if(0===x)break a;x--;E+=h[r++]<<n;n+=8}if(16>D)E>>>=d,n-=d,c.qf[c.ai++]=D;else{if(16===D){for(H=d+2;n<H;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}E>>>=d;n-=d;if(0===c.ai){a.Pb="invalid bit length repeat";c.mode=30;break}H=
c.qf[c.ai-1];d=3+(E&3);E>>>=2;n-=2}else if(17===D){for(H=d+3;n<H;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}E>>>=d;n-=d;H=0;d=3+(E&7);E>>>=3;n-=3}else{for(H=d+7;n<H;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}E>>>=d;n-=d;H=0;d=11+(E&127);E>>>=7;n-=7}if(c.ai+d>c.Or+c.Fv){a.Pb="invalid bit length repeat";c.mode=30;break}for(;d--;)c.qf[c.ai++]=H}}if(30===c.mode)break;if(0===c.qf[256]){a.Pb="invalid code -- missing end-of-block";c.mode=30;break}c.$j=9;d={Kd:c.$j};qa=N(1,c.qf,0,c.Or,c.vl,0,c.Zw,d);c.$j=d.Kd;
if(qa){a.Pb="invalid literal/lengths set";c.mode=30;break}c.Yq=6;c.Eo=c.ZM;d={Kd:c.Yq};qa=N(2,c.qf,c.Or,c.Fv,c.Eo,0,c.Zw,d);c.Yq=d.Kd;if(qa){a.Pb="invalid distances set";c.mode=30;break}c.mode=20;if(6===b)break a;case 20:c.mode=21;case 21:if(6<=x&&258<=A){a.sf=y;a.be=A;a.an=r;a.bh=x;c.Lm=E;c.Kd=n;P(a,t);y=a.sf;m=a.ej;A=a.be;r=a.an;h=a.input;x=a.bh;E=c.Lm;n=c.Kd;12===c.mode&&(c.back=-1);break}for(c.back=0;;){D=c.vl[E&(1<<c.$j)-1];d=D>>>24;H=D>>>16&255;D&=65535;if(d<=n)break;if(0===x)break a;x--;E+=
h[r++]<<n;n+=8}if(H&&!(H&240)){G=d;q=H;for(ja=D;;){D=c.vl[ja+((E&(1<<G+q)-1)>>G)];d=D>>>24;H=D>>>16&255;D&=65535;if(G+d<=n)break;if(0===x)break a;x--;E+=h[r++]<<n;n+=8}E>>>=G;n-=G;c.back+=G}E>>>=d;n-=d;c.back+=d;c.length=D;if(!H){c.mode=26;break}if(H&32){c.back=-1;c.mode=12;break}if(H&64){a.Pb="invalid literal/length code";c.mode=30;break}c.ee=H&15;c.mode=22;case 22:if(c.ee){for(H=c.ee;n<H;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}c.length+=E&(1<<c.ee)-1;E>>>=c.ee;n-=c.ee;c.back+=c.ee}c.K6=c.length;
c.mode=23;case 23:for(;;){D=c.Eo[E&(1<<c.Yq)-1];d=D>>>24;H=D>>>16&255;D&=65535;if(d<=n)break;if(0===x)break a;x--;E+=h[r++]<<n;n+=8}if(!(H&240)){G=d;q=H;for(ja=D;;){D=c.Eo[ja+((E&(1<<G+q)-1)>>G)];d=D>>>24;H=D>>>16&255;D&=65535;if(G+d<=n)break;if(0===x)break a;x--;E+=h[r++]<<n;n+=8}E>>>=G;n-=G;c.back+=G}E>>>=d;n-=d;c.back+=d;if(H&64){a.Pb="invalid distance code";c.mode=30;break}c.offset=D;c.ee=H&15;c.mode=24;case 24:if(c.ee){for(H=c.ee;n<H;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}c.offset+=E&(1<<c.ee)-
1;E>>>=c.ee;n-=c.ee;c.back+=c.ee}if(c.offset>c.fz){a.Pb="invalid distance too far back";c.mode=30;break}c.mode=25;case 25:if(0===A)break a;d=t-A;if(c.offset>d){d=c.offset-d;if(d>c.dm&&c.bI){a.Pb="invalid distance too far back";c.mode=30;break}d>c.Qg?(d-=c.Qg,H=c.Rg-d):H=c.Qg-d;d>c.length&&(d=c.length);G=c.window}else G=m,H=y-c.offset,d=c.length;d>A&&(d=A);A-=d;c.length-=d;do m[y++]=G[H++];while(--d);0===c.length&&(c.mode=21);break;case 26:if(0===A)break a;m[y++]=c.length;A--;c.mode=21;break;case 27:if(c.qj){for(;32>
n;){if(0===x)break a;x--;E|=h[r++]<<n;n+=8}t-=A;a.Ew+=t;c.total+=t;t&&(a.bo=c.check=c.td?v(c.check,m,t,y-t):B(c.check,m,t,y-t));t=A;if((c.td?E:k(E))!==c.check){a.Pb="incorrect data check";c.mode=30;break}n=E=0}c.mode=28;case 28:if(c.qj&&c.td){for(;32>n;){if(0===x)break a;x--;E+=h[r++]<<n;n+=8}if(E!==(c.total&4294967295)){a.Pb="incorrect length check";c.mode=30;break}n=E=0}c.mode=29;case 29:qa=1;break a;case 30:qa=-3;break a;case 31:return-4;default:return-2}a.sf=y;a.be=A;a.an=r;a.bh=x;c.Lm=E;c.Kd=
n;if((c.Rg||t!==a.be&&30>c.mode&&(27>c.mode||4!==b))&&g(a,a.ej,a.sf,t-a.be))return c.mode=31,-4;f-=a.bh;t-=a.be;a.WI+=f;a.Ew+=t;c.total+=t;c.qj&&t&&(a.bo=c.check=c.td?v(c.check,m,t,a.sf-t):B(c.check,m,t,a.sf-t));a.qZ=c.Kd+(c.HA?64:0)+(12===c.mode?128:0)+(20===c.mode||15===c.mode?256:0);(0===f&&0===t||4===b)&&0===qa&&(qa=-5);return qa};b.T0=function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0};b.U0=function(a,b){var c;a&&a.state&&(c=a.state,c.qj&2&&(c.head=
b,b.done=!1))};b.W0=function(a,b){var c=b.length,e,h;if(!a||!a.state)return-2;e=a.state;if(0!==e.qj&&11!==e.mode)return-2;if(11===e.mode&&(h=B(1,b,c,0),h!==e.check))return-3;if(g(a,b,c,c))return e.mode=31,-4;e.sG=1;return 0};b.Ica="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(a,c){var b=a("../utils/common"),k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,
16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],t=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];c.exports=function(a,c,g,e,B,v,P,N){var r=N.Kd,p,x,y,D,l,u,L,F,O,K,A,E,n,f=0,X,d=new b.mt(16);l=new b.mt(16);var H,G=0,R,q,ja;for(p=0;15>=p;p++)d[p]=0;for(x=0;x<e;x++)d[c[g+x]]++;D=r;for(y=15;1<=y&&0===
d[y];y--);D>y&&(D=y);if(!y)return B[v++]=20971520,B[v++]=20971520,N.Kd=1,0;for(r=1;r<y&&0===d[r];r++);D<r&&(D=r);for(p=u=1;15>=p;p++)if(u<<=1,u-=d[p],0>u)return-1;if(0<u&&(0===a||1!==y))return-1;l[1]=0;for(p=1;15>p;p++)l[p+1]=l[p]+d[p];for(x=0;x<e;x++)0!==c[g+x]&&(P[l[c[g+x]]++]=x);0===a?(n=H=P,X=19):1===a?(n=k,f-=257,H=h,G-=257,X=256):(n=t,H=m,X=-1);x=F=0;p=r;E=v;e=D;l=0;K=-1;L=1<<D;A=L-1;if(1===a&&852<L||2===a&&592<L)return 1;for(;;){R=p-l;P[x]<X?(q=0,ja=P[x]):P[x]>X?(q=H[G+P[x]],ja=n[f+P[x]]):
(q=96,ja=0);u=1<<p-l;r=O=1<<e;do O-=u,B[E+(F>>l)+O]=R<<24|q<<16|ja|0;while(O);for(u=1<<p-1;F&u;)u>>=1;u?(F&=u-1,F+=u):F=0;x++;if(!--d[p]){if(p===y)break;p=c[g+P[x]]}if(p>D&&(F&A)!==K){0===l&&(l=D);E+=r;e=p-l;for(u=1<<e;e+l<y;){u-=d[e+l];if(0>=u)break;e++;u<<=1}L+=1<<e;if(1===a&&852<L||2===a&&592<L)return 1;K=F&A;B[K]=D<<24|e<<16|E-v|0}}F&&(B[E+F]=p-l<<24|4194304);N.Kd=D;return 0}},{"../utils/common":1}],10:[function(a,c){c.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error",
"-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(a,c){c.exports=function(){this.input=null;this.WI=this.bh=this.an=0;this.ej=null;this.Ew=this.be=this.sf=0;this.Pb="";this.state=null;this.qZ=2;this.bo=0}},{}],"/lib/inflate.js":[function(a,c,b){function k(a){if(!(this instanceof k))return new k(a);var b=this.options=m.assign({IX:16384,Xe:0,to:""},a||{});b.raw&&0<=b.Xe&&16>b.Xe&&(b.Xe=-b.Xe,b.Xe||(b.Xe=-15));!(0<=b.Xe&&16>b.Xe)||a&&a.Xe||
(b.Xe+=32);15<b.Xe&&48>b.Xe&&!(b.Xe&15)&&(b.Xe|=15);this.CF=0;this.Pb="";this.ended=!1;this.vy=[];this.Ip=new e;this.Ip.be=0;a=t.V0(this.Ip,b.Xe);if(a!==r.yq)throw Error(g[a]);this.Q0=new B;t.U0(this.Ip,this.Q0)}function h(a,b){var c=new k(b);c.push(a,!0);if(c.CF)throw c.Pb||g[c.CF];return c.result}var t=a("./zlib/inflate"),m=a("./utils/common"),x=a("./utils/strings"),r=a("./zlib/constants"),g=a("./zlib/messages"),e=a("./zlib/zstream"),B=a("./zlib/gzheader"),v=Object.prototype.toString;k.prototype.push=
function(a,b){var c=this.Ip,e=this.options.IX,h=this.options.G$,g,k,l,u,B,N,P=!1;if(this.ended)return!1;k=b===~~b?b:!0===b?r.Qx:r.HK;"string"===typeof a?c.input=x.SW(a):"[object ArrayBuffer]"===v.call(a)?c.input=new Uint8Array(a):c.input=a;c.an=0;c.bh=c.input.length;do{0===c.be&&(c.ej=new m.Pn(e),c.sf=0,c.be=e);g=t.pr(c,r.HK);g===r.TV&&h&&("string"===typeof h?N=x.f5(h):"[object ArrayBuffer]"===v.call(h)?N=new Uint8Array(h):N=h,g=t.W0(this.Ip,N));g===r.SV&&!0===P&&(g=r.yq,P=!1);if(g!==r.Rx&&g!==r.yq)return this.pH(g),
this.ended=!0,!1;!c.sf||0!==c.be&&g!==r.Rx&&(0!==c.bh||k!==r.Qx&&k!==r.IK)||("string"===this.options.to?(l=x.z6(c.ej,c.sf),u=c.sf-l,B=x.aX(c.ej,l),c.sf=u,c.be=e-u,u&&m.io(c.ej,c.ej,l,u,0),this.jQ(B)):this.jQ(m.VR(c.ej,c.sf)));0===c.bh&&0===c.be&&(P=!0)}while((0<c.bh||0===c.be)&&g!==r.Rx);g===r.Rx&&(k=r.Qx);if(k===r.Qx)return g=t.T0(this.Ip),this.pH(g),this.ended=!0,g===r.yq;k===r.IK&&(this.pH(r.yq),c.be=0);return!0};k.prototype.jQ=function(a){this.vy.push(a)};k.prototype.pH=function(a){a===r.yq&&
(this.result="string"===this.options.to?this.vy.join(""):m.nN(this.vy));this.vy=[];this.CF=a;this.Pb=this.Ip.Pb};b.p7=k;b.pr=h;b.Kca=function(a,b){b=b||{};b.raw=!0;return h(a,b)};b.ufa=h},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")});a.pr=window.E2.pr};b4w.module.__sfx=function(a,w){function t(){var a=window.AudioContext||window.webkitAudioContext;if(a){try{var b=new a}catch(qa){return I.error('Unable to initialize AudioContext: "'+qa+'". The audio is disabled.'),null}if(b.createGain)return b;I.warn("deprecated WebAudio implementation");return null}I.warn("WebAudio is not supported");return null}function c(a,c,e){var f=a.ra;if("NONE"!=f.behavior){var g=f.loop,k=f.pitch;if(f.src&&(g||0<=e)){f.sE=Math.floor(5E4*Math.random());var l=X.currentTime+
c,l=Math.max(0,l);f.Gg=l;f.state=20;var q=d.od;"POSITIONAL"==f.behavior&&"none"==q.Iu&&(f.behavior="BACKGROUND_SOUND");b(a,d.od);if("POSITIONAL"==f.behavior||"BACKGROUND_SOUND"==f.behavior){c=X.createBufferSource();c.buffer=f.src;c.playbackRate.value=k;if(g){f.zc&&f.zc.disconnect();f.Ae&&f.Ae.disconnect();c.loop=!0;c.loopStart=f.IP;if(c.loopEnd=f.TA)e=X.createBufferSource(),e.buffer=f.src,e.playbackRate.value=k,f.Ae=e,e.connect(f.ve);c.start(l);f.duration=0}else g=c.buffer?c.buffer.duration:0,e>g?
(g=l+e+f.Lf,c.loop=!0,c.start(l),c.stop(g),f.duration=e):(c.loop=!1,c.start(l),f.duration=g);c.connect(f.ve);f.zc=c;h(f);O(f);m(f)}else"BACKGROUND_MUSIC"==f.behavior&&(D.Nq(f.vE),D.Nq(f.wE),e=function(){var b=a.ra,c=b.src;c&&(c.volume=1,c.loop=b.loop,b.zc=b.zc||X.createMediaElementSource(c),b.zc.connect(b.ve),20==b.state&&(c.currentTime&&(c.currentTime=0),c.play()))},0==c?e():f.vE=D.cC(e,1E3*c),g?f.duration=0:f.duration=M(a));x(f,l)}}}function b(a,b){var c=a.ra;if(!c.ve){var d=l.X(a.A.D),e=l.la(a.A.D);
if(U.aB){var f=X.createBiquadFilter();f.type="peaking"}else f=null;var h=X.createGain();switch(c.behavior){case "POSITIONAL":var g=X.createPanner();"string"!=typeof g.panningModel?(g.panningModel=g.EQUALPOWER,g.distanceModel=g.INVERSE_DISTANCE):(g.panningModel="equalpower",g.distanceModel=b.Iu);g.setPosition(d[0],d[1],d[2]);L.copy(d,c.KG);d=K;u.Jc(e,u.qc,d);g.setOrientation(d[0],d[1],d[2]);g.refDistance=c.dist_ref;g.maxDistance=c.dist_max;g.rolloffFactor=c.attenuation;g.coneInnerAngle=c.oM;g.coneOuterAngle=
c.pM;g.coneOuterGain=c.qM;var k=X.createGain();k.gain.value=N(c);f?(g.connect(f),f.connect(k)):g.connect(k);k.connect(h);c.ve=g;if(c.Rp){var q=X.createGain();h.connect(q);q.connect(b.ve)}else q=null,h.connect(b.ve);break;case "BACKGROUND_SOUND":g=null;k=X.createGain();k.gain.value=N(c);f?(c.ve=f,f.connect(k)):c.ve=k;k.connect(h);c.Rp?(q=X.createGain(),h.connect(q),q.connect(b.ve)):(q=null,h.connect(b.ve));break;case "BACKGROUND_MUSIC":q=g=null,k=X.createGain(),k.gain.value=N(c),f?(c.ve=f,f.connect(k)):
c.ve=k,k.connect(h),h.connect(b.ve)}c.vH=g;c.Pi=f;c.hr=k;c.Fm=h;c.LH=q}}function k(a){var b=a.ra;c(a,b.VM+b.WM*Math.random(),b.duration)}function h(a){var b=a.Ae||a.zc;u.Pf(b.onended)&&(b.onended=function(){a.state=50})}function O(a){a.Rp&&a.LH.gain.cancelScheduledValues(a.Gg);a.$r&&(a.zc.playbackRate.cancelScheduledValues(a.Gg),a.Ae&&a.Ae.playbackRate.cancelScheduledValues(a.Gg));a.Ww=a.Gg}function m(a){if(a.Rp||a.$r){var b=a.LH,c=a.zc,d=c.buffer?c.buffer.duration:0;if(d){var e=a.Gg;G[0]=a.sE;for(var f=
0;5>f;){var h=a.pitch+a.$r*u.oi(G);if(e>=a.Ww){if(a.Rp){var g=1-u.pa(a.Rp,0,1)*Math.random();b.gain.setValueAtTime(g,e)}a.$r&&(c.playbackRate.setValueAtTime(h,e),a.Ae&&a.Ae.playbackRate.setValueAtTime(h,e));f++}e+=d/h}a.Ww=e-.001}}}function x(a,b){if(a.hl||a.Lf){var c=a.Fm;c.gain.cancelScheduledValues(b);a.hl?(c.gain.setValueAtTime(0,b),c.gain.linearRampToValueAtTime(1,b+a.hl)):c.gain.setValueAtTime(1,b);a.Lf&&!a.loop&&(c.gain.setValueAtTime(1,b+a.duration),c.gain.linearRampToValueAtTime(0,b+a.duration+
a.Lf))}}function r(a){"SPEAKER"!=a.type&&u.K("Wrong object type");var b=a.ra;if(50==b.state)b.state=30;else if(20==b.state||40==b.state){var c=b.Fm,d=X.currentTime;b.Lf&&(c.gain.setValueAtTime(c.gain.value,d),c.gain.linearRampToValueAtTime(0,d+b.Lf));"BACKGROUND_MUSIC"==b.behavior?b.src&&(D.Nq(b.vE),D.Nq(b.wE),b.wE=D.cC(function(){var b=a.ra.src;b&&(b.currentTime&&(b.currentTime=0),b.pause())},1E3*b.Lf)):(c=b.zc,c.onended=function(){},b.duration<c.buffer.duration?b.Lf&&20==b.state?c.stop(d+b.Lf):
20==b.state&&(c.stop(0),c.disconnect()):c.disconnect(),b.Gg=0,b.xH=0,b.py=0);b.state=30}}function g(a){a=a.ra;if(20==a.state){var b=X.currentTime;a.xH=b;"BACKGROUND_MUSIC"==a.behavior?(b=a.src)&&b.pause():(b>a.Gg?a.py=e(a,b):a.py=0,a.zc.onended=function(){},a.zc.stop(0),a.zc.disconnect(),O(a));a.state=40}}function e(a,b){G[0]=a.sE;for(var c=a.zc.buffer.duration,d=a.Gg,e;d<b;)e=a.pitch+a.$r*u.oi(G),d+=c/e;return(c/e-(d-b))*e}function B(a){var b=a.ra;if(40==b.state){var c=X.currentTime;b.Gg+=c-b.xH;
if("BACKGROUND_MUSIC"==b.behavior)b.src.play();else{a=a.ra;var d=X.createBufferSource();d.loop=a.zc.loop;d.loopStart=a.zc.loopStart;d.loopEnd=a.zc.loopEnd;d.buffer=a.zc.buffer;d.playbackRate.value=a.zc.playbackRate.value;d.connect(a.ve);a.zc=d;a.Ae&&(d=X.createBufferSource(),d.loop=a.Ae.loop,d.buffer=a.Ae.buffer,d.playbackRate.value=a.Ae.playbackRate.value,d.connect(a.ve),a.Ae=d);b.Ww=c;c=b.zc;h(b);c.start(b.Gg,b.py);m(b)}x(b,b.Gg);b.state=20}}function v(a,b,c){var d;d=b.EZ;if(0<d){var e=b.U4;if(0!=
L.dot(a.wD,a.wD)||0!=L.dot(b.kp,b.kp)){var f=L.subtract(a.KG,b.bk,K),h=L.length(f);b=L.dot(f,b.kp)/h;f=L.dot(f,a.wD)/h;h=e/d;b=Math.min(-b,h);f=Math.min(-f,h);d=(e-d*b)/(e-d*f);isFinite(d)||(d=0);d=Math.min(d,16);d=Math.max(d,.125);d=u.Tc(d,a.vP,c,.3);a.zc.playbackRate.value=d;a.vP=d}}}function P(a){a=a.ra;return!a||20!=a.state&&40!=a.state&&30!=a.state&&50!=a.state?!1:!0}function N(a){return a.muted?0:a.volume}function M(a){a=a.ra;return(a=a.src)?a.duration:0}var p=w("__config"),I=w("__print"),y=
w("__quat"),D=w("__time"),l=w("__tsr"),u=w("__util"),L=w("__vec3"),F=p.L,U=p.ra,K=new Float32Array(3),A=new Float32Array(3),E=y.create(),n=[],f=[],X=null,d=null,H=[],G=[1],R=null;a.yJ=10;a.ID=20;a.xJ=30;a.EY=function(){return{dd:-1,Oj:"",behavior:"NONE",muted:!1,volume:1,pitch:1,attenuation:1,dist_ref:1,dist_max:1E4,oM:360,pM:360,qM:1,autoplay:!1,ce:!1,loop:!1,IP:0,TA:0,VM:0,WM:0,Rp:0,$r:0,hl:0,Lf:0,Gg:0,xH:0,py:0,duration:0,Ww:0,sE:1,src:null,state:10,KG:new Float32Array(3),wD:new Float32Array(3),
mz:!1,vP:1,vE:-1,wE:-1,Go:0,ve:null,zc:null,Ae:null,vH:null,Pi:null,hr:null,Fm:null,LH:null,Hn:0}};a.Nf=function(){var a=document.createElement("audio"),b=document.createElement("video");a.canPlayType&&(""!=a.canPlayType("audio/ogg")&&(n.push("ogg"),n.push("ogv"),n.push("oga")),""!=a.canPlayType("audio/mpeg")&&n.push("mp3"),""!=a.canPlayType("audio/mp4")&&(n.push("mp4"),n.push("m4v"),n.push("m4a")),""!=a.canPlayType("audio/webm")&&n.push("webm"));b.canPlayType&&(""!=b.canPlayType("video/ogg")&&(f.push("ogv"),
f.push("ogg"),f.push("oga")),""!=b.canPlayType("video/mp4")&&(f.push("m4v"),f.push("mp4")),""!=b.canPlayType("video/webm")&&f.push("webm"),""!=b.canPlayType("video/mpeg")&&f.push("mp3"))};a.IW=function(a){U.tJ&&!X&&(X=t())&&I.log("%cINIT WEBAUDIO: "+X.sampleRate+"Hz","color: #00a");if(X){var b={bk:new Float32Array(3),kp:new Float32Array(3),Hn:0},c=X.createGain(),d=X.createGain();b.hr=c;b.Fm=d;c.connect(d);d.connect(X.destination);if(a.b4w_enable_dynamic_compressor){var d=X.createDynamicsCompressor(),
e=a.b4w_dynamic_compressor_settings;d.threshold.value=e.threshold;d.knee.value=e.knee;d.ratio.value=e.ratio;d.attack.value=e.attack;d.release.value=e.release;d.connect(c);b.vu=d;b.ve=d}else b.vu=null,b.ve=c;switch(a.audio_distance_model){case "INVERSE":case "INVERSE_CLAMPED":b.Iu="inverse";break;case "LINEAR":case "LINEAR_CLAMPED":b.Iu="linear";break;case "EXPONENT":case "EXPONENT_CLAMPED":b.Iu="exponential";break;case "NONE":b.Iu="none";break;default:u.K("Wrong audio distance model")}b.EZ=a.audio_doppler_factor;
b.U4=a.audio_doppler_speed;b.muted=!1;b.volume=a.audio_volume;c.gain.value=N(b);b.Go=0}else b=null;a.od=b};a.N3=function(a){d=a};a.uF=function(a){a||(a="ogg");return-1<n.indexOf(a)?a:-1<n.indexOf("m4a")?"m4a":-1<n.indexOf("oga")?"oga":""};a.vF=function(a){a||(a="webm");return-1<f.indexOf(a)?a:-1<f.indexOf("m4v")?"m4v":-1<f.indexOf("webm")?"webm":""};a.Os=function(a,b){var c=a.data,d=b.ra;if(a.data.sound){d.dd=a.data.sound.uuid;d.Oj=a.data.sound.filepath;switch(c.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":d.behavior=
X?c.b4w_behavior:"NONE";break;case "BACKGROUND_MUSIC":var e;X?(window.MediaElementAudioSourceNode?e=!0:(I.warn("MediaElementAudioSourceNode not found"),e=!1),e=e&&!F.WL?"BACKGROUND_MUSIC":"BACKGROUND_SOUND"):e="NONE";d.behavior=e;break;default:u.K("Wrong speaker behavior")}c.sound||(d.behavior="NONE");d.mz=c.b4w_enable_doppler;d.muted=c.muted;d.volume=c.volume;d.pitch=c.pitch;d.attenuation=c.attenuation;d.dist_ref=c.distance_reference;d.dist_max=c.distance_max||1E4;d.oM=c.cone_angle_inner;d.pM=c.cone_angle_outer;
d.qM=c.cone_volume_outer;d.autoplay=c.b4w_auto_play;d.ce=c.b4w_cyclic_play;d.loop=c.b4w_loop;d.IP=c.b4w_loop_start;d.TA=c.b4w_loop_end;d.VM=c.b4w_delay;d.WM=c.b4w_delay_random;d.Rp=c.b4w_volume_random;d.$r=c.b4w_pitch_random;d.hl=c.b4w_fade_in;d.Lf=c.b4w_fade_out;H.push(b)}};a.ZR=function(b){"SPEAKER"!=b.type&&u.K("Wrong object type");switch(b.ra.behavior){case "POSITIONAL":return a.ID;case "BACKGROUND_SOUND":return a.ID;case "BACKGROUND_MUSIC":return a.xJ;case "NONE":return a.yJ;default:u.K("Wrong speaker behavior")}};
a.o6=function(a,b){var c=a.ra;switch(c.behavior){case "POSITIONAL":case "BACKGROUND_SOUND":case "BACKGROUND_MUSIC":c.src=b;break;case "NONE":break;default:u.K("Wrong speaker behavior")}};a.qQ=function(){var a=X.createBufferSource();a.buffer=X.createBuffer(1,22050,22050);a.connect(X.destination);a.start(0)};a.uZ=function(a,b,c){X?X.decodeAudioData(a,b,c):c()};a.Q4=function(a){r(a);a.ra=null;H.splice(H.indexOf(a),1)};a.Ja=function(){for(var a=0;a<H.length;a++){var b=H[a].ra;"BACKGROUND_MUSIC"==b.behavior?
(b=b.src)&&b.pause():(b.zc&&b.zc.disconnect(),b.Ae&&b.Ae.disconnect())}d&&d.od&&(a=d.od,a.bk[0]=0,a.bk[1]=0,a.bk[2]=0,a.kp[0]=0,a.kp[1]=0,a.kp[2]=0);d=null;H.splice(0);R=null};a.update=function(a){if(X&&H.length){for(var b=0;b<H.length;b++){var c=H[b],d=c.ra,e=d.zc,f=X.currentTime;!d.loop&&20==d.state&&d.duration&&d.Gg+d.duration<f&&("BACKGROUND_MUSIC"==d.behavior||e&&!u.Pf(e.onended))&&(d.state=50);d.ce&&50==d.state&&k(c);20==d.state&&3>d.Ww-f&&m(d)}R&&R.Sl.length&&(-1==R.active||a>R.RK+R.dN[R.active])&&
(b=R,-1<b.active&&r(b.Sl[b.active]),c=-1==b.active&&b.random?Math.round(Math.random()*(b.Sl.length-1)):b.random?(b.active+(1+Math.round(Math.random()*(b.Sl.length-2))))%b.Sl.length:(b.active+1)%b.Sl.length,k(b.Sl[c]),b.active=c,b.RK=a)}};a.play=c;a.AB=k;a.stop=r;a.EG=function(a){return 20==a.ra.state};a.P4=g;a.S4=B;a.JP=function(a,b){var c=a.ra,d=c.Ae;if(P(a)&&("POSITIONAL"==c.behavior||"BACKGROUND_SOUND"==c.behavior)&&d){var e=X.currentTime+b;c.zc.stop(e);d.start(e,c.TA)}};a.CH=function(a,b){var c=
a.ra;c.pitch=b;!P(a)||"POSITIONAL"!=c.behavior&&"BACKGROUND_SOUND"!=c.behavior||(c.zc.playbackRate.value=b,c.Ae&&(c.Ae.playbackRate.value=b),O(c),m(c))};a.fO=function(a){return a.ra.pitch};a.ce=function(a,b){a.ra.ce=!!b};a.i1=function(a){return a.ra.autoplay};a.CG=function(a){return a.ra.ce};a.M1=function(a,b,c,d,e){if(a=a.od){var f=K;f[0]=0;f[1]=0;f[2]=-1;L.transformQuat(f,c,f);A[0]=0;A[1]=1;A[2]=0;L.transformQuat(A,c,A);c=X.listener;c.setPosition(b[0],b[1],b[2]);c.setOrientation(f[0],f[1],f[2],
A[0],A[1],A[2]);if(d&&a.Hn!=e){if(a.Er)a.Er=!1,L.copy(b,a.bk);else for(c=a.kp,c[0]=(b[0]-a.bk[0])/d,c[1]=(b[1]-a.bk[1])/d,c[2]=(b[2]-a.bk[2])/d,L.copy(b,a.bk),b=0;b<H.length;b++)c=H[b],f=c.ra,P(c)&&"POSITIONAL"==f.behavior&&f.mz&&v(f,a,d);a.Hn=e}else L.copy(b,a.bk)}};a.Er=function(){var a=d.od;a&&(a.Er=!0)};a.T4=function(a,b,c){var e=a.ra;if(P(a)&&"POSITIONAL"==e.behavior){var f=l.Wb(a.A.D,K);a=l.Fb(a.A.D,E);var h=e.vH;h.setPosition(f[0],f[1],f[2]);u.Jc(a,u.qc,A);h.setOrientation(A[0],A[1],A[2]);
e.mz&&(a=e.KG,b&&e.Hn!=c?(e.jS?(L.copy(f,a),e.jS=!1):(h=e.wD,h[0]=(f[0]-a[0])/b,h[1]=(f[1]-a[1])/b,h[2]=(f[2]-a[2])/b,L.copy(f,a),v(e,d.od,b)),e.Hn=c):L.copy(f,a))}};a.FI=function(a){var b=a.ra;P(a)&&"POSITIONAL"==b.behavior&&b.mz&&(b.jS=!0)};a.gG=function(a){return a.ra.behavior};a.NL=function(){for(var a=0;a<H.length;a++)if(P(H[a]))return!0;return!1};a.j4=function(a){var b=d.od;b&&(b.volume=a,X&&(b.hr.gain.value=N(b)))};a.n0=function(){var a=d.od;return a?a.volume:0};a.yI=function(a,b){var c=a.ra;
c.volume=b;P(a)&&(c.hr.gain.value=N(c))};a.xO=function(a){return a.ra.volume};a.Yb=function(a,b){a.ra.muted=!!b;P(a)&&(a.ra.hr.gain.value=N(a.ra))};a.kP=function(a){return a.ra.muted};a.p2=function(a){var b=d.od;b&&(b.muted=!!a,X&&(b.hr.gain.value=N(b)))};a.p1=function(){var a=d.od;return a?a.muted:!1};a.Yz=function(){return H};a.pause=function(){for(var a=0;a<H.length;a++)g(H[a])};a.resume=function(){for(var a=0;a<H.length;a++)B(H[a])};a.hR=function(a,b){if(a.od&&a.od.vu){var c=a.od.vu;c.threshold.value=
b.threshold;c.knee.value=b.knee;c.ratio.value=b.ratio;c.attack.value=b.attack;c.release.value=b.release}};a.LN=function(a){if(!a.od||!a.od.vu)return null;a=a.od.vu;return{threshold:a.threshold.value,knee:a.knee.value,ratio:a.ratio.value,attack:a.attack.value,release:a.release.value}};a.bN=function(a,b,c){if(P(a)){a=a.ra;var d=a.Fm,e=X.currentTime;d.gain.setValueAtTime(d.gain.value,e);d.gain.linearRampToValueAtTime(b,e+c);a.Go=c}};a.HS=function(a){if(P(a)){a=a.ra;var b=a.Fm,c=X.currentTime;b.gain.setValueAtTime(b.gain.value,
c);b.gain.linearRampToValueAtTime(1,c+a.Go);a.Go=0}};a.IZ=function(a,b){if(X){var c=d.od,e=c.Fm,f=X.currentTime;e.gain.setValueAtTime(e.gain.value,f);e.gain.linearRampToValueAtTime(a,f+b);c.Go=b}};a.C5=function(){if(X){var a=d.od,b=a.Fm,c=X.currentTime;b.gain.setValueAtTime(b.gain.value,c);b.gain.linearRampToValueAtTime(1,c+a.Go);a.Go=0}};a.ZK=function(a,b,c){R={active:-1,RK:0,random:c,Sl:[],dN:[]};for(c=0;c<a.length;c++){var d=a[c],e=M(d);0==e?I.warn("Ignoring speaker with zero duration: "+d.name):
(r(d),d.ra.ce=!1,R.Sl.push(d),R.dN.push(e+b))}};a.PN=M;a.gM=function(){if(R)for(var a=R.Sl,b=0;b<a.length;b++)r(a[b]);R=null};a.gO=function(a){return(a=a.ra)&&"POSITIONAL"==a.behavior?{dist_ref:a.dist_ref,dist_max:a.dist_max,attenuation:a.attenuation}:null};a.ER=function(a,b){var c=a.ra;if(c&&"POSITIONAL"==c.behavior){c.dist_ref=b.dist_ref;c.dist_max=b.dist_max;c.attenuation=b.attenuation;var d=c.vH;d&&(d.refDistance=c.dist_ref,d.maxDistance=c.dist_max,d.rolloffFactor=c.attenuation)}};a.lR=function(a,
b){var c=a.ra;c&&c.Pi&&(c.Pi.frequency.value=b.freq,c.Pi.Q.value=b.Q,c.Pi.gain.value=b.gain)};a.TN=function(a){return(a=a.ra)&&a.Pi?{freq:a.Pi.frequency.value,Q:a.Pi.Q.value,gain:a.Pi.gain.value}:null};a.SN=function(a,b,c,d){a=a.ra;if(!a||!a.Pi)return null;a.Pi.getFrequencyResponse(b,c,d)};a.reset=function(){n.length=0;f.length=0;X=null}};b4w.module.__version=function(a){var w=new Date(2017,10,21,11,5,11),t=[17,10,1];a.version=function(){return t};a.Sw=function(){for(var a="",b=0;b<t.length;b++)a=1==b?a+(10>t[b]?"0"+t[b]:t[b]):a+t[b],b!=t.length-1&&(a+=".");return a};a.type=function(){return"RELEASE"};a.RM=function(){return w};a.pF=function(){var a=w.getDate(),a=10>a?"0"+String(a):String(a),b=w.getMonth()+1,b=10>b?"0"+String(b):String(b),k=String(w.getFullYear()),h=w.getHours(),h=10>h?"0"+String(h):String(h),t=w.getMinutes(),t=10>
t?"0"+String(t):String(t),m=w.getSeconds(),m=10>m?"0"+String(m):String(m);return a+"."+b+"."+k+" "+h+":"+t+":"+m};a.get_build_version=function(){return"17_10.1"}};b4w.module.shader_texts=function(a){a["anchors.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ; }".split(" ")}]};a["anchors.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"ANCHOR_NUM",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform vec3 u_position [ ANCHOR_NUM ] ; uniform mat4 u_view_proj_matrix ; uniform vec2 u_texel_size ; GLSL_IN float a_index ; void main ( ) { int c = int ( mod ( a_index , 3.0 ) ) ; int d = int ( a_index / 3.0 ) ; vec2 e ; if ( c == 0 ) { e = vec2 ( - 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else if ( c == 1 ) { e = vec2 ( 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else { e = vec2 ( 0.0 , 5.0 * u_texel_size [ 1 ] ) ; } vec4 f = u_view_proj_matrix * vec4 ( u_position [ d ] , 1.0 ) ; f . xy += e * f . w ; gl_Position = f ; }".split(" ")}]};
a["color_id.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"USE_OUTLINE",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",
c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"NUM_VALUES",b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},
{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",
F:"math.glslv"}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"txt",b:["uniform","vec3","u_camera_eye_frag",";"]},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",
";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_diffuse_color",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_sampler ; uniform float u_alpha_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_OUTLINE",{a:"logic_negative_expr",o:1}],l:{a:"grp",
f:[{a:"txt",b:["uniform","vec3","u_color_id",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE",
"REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]},{a:"cond",f:[{a:"if",j:["USE_REFRACTION","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP"],l:{a:"grp",
f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE",
"SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map1 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map2 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map3 ; uniform sampler2D u_shadow_mask ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["USE_OUTLINE"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_outline_intensity",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec4 i ; GLSL_IN vec3 j ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 n ; GLSL_IN vec4 o ; GLSL_IN vec4 u ; GLSL_IN vec4 v ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",
F:"nodes.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"txt",b:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; float L = I ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"float L = ( GLSL_TEXTURE ( u_sampler , A ) ) . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float M = u_alpha_factor * L ; M += ( 1.0 - step ( 0.0 , M ) ) ; L = mix ( M , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",
f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_OUTLINE"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , u_outline_intensity ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( u_color_id , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["color_id.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},
{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"CALC_TBN",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"var",
c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"SMAA_JITTER",b:["0"]},{a:"var",c:"VERTEX_ANIM_MIX_NORMALS_FACTOR",b:["u_va_frame_factor"]},{a:"var",c:"MAX_BONES",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"scale_texcoord.glslv"},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],
l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{a:"cond",f:[{a:"if",
j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],
l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_texture_scale",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},
{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_position_next",";"]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN",
"USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec3 h ; GLSL_OUT vec4 i ; GLSL_OUT vec3 j ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","m",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],
l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},{a:"include",F:"skin.glslv"},{a:"include",F:"wind_bending.glslv"},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"nodes.glslv"}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",
{a:"logical_and_expr",o:3},{a:"logical_or_expr",o:6},{a:"logical_and_expr",o:3},"USE_TBN_SHADING","CALC_TBN",{a:"logical_and_expr",o:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:7}],l:{a:"grp",f:[{a:"txt",b:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 U = vec3 ( 0.0 ) ; vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN"],l:{a:"grp",f:[{a:"txt",b:"vec3 ac = normalize ( _ ( u_model_tsr , U ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",
o:5}],l:{a:"grp",f:[{a:"txt",b:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ay = T ( a_tbn , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2},{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],
l:{a:"grp",f:[{a:"txt",b:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"h = aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",
"USE_NODE_BUMP",{a:"logical_or_expr",o:12}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:"B = aw . aB ;".split(" ")}]}}]},{a:"txt",b:"i = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * i ;".split(" ")},{a:"cond",f:[{a:"if",
j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"m = - i . z / u_view_max_depth ;".split(" ")}]}}]},{a:"txt",b:["J","(",")",";"]}]}}]},{a:"txt",b:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; }".split(" ")}]};
a["debug_view.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DEBUG_SPHERE",b:["0"]},{a:"var",c:"WIREFRAME_QUALITY",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"DEBUG_SPHERE_DYNAMIC",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"uniform int u_debug_view_mode ; uniform float u_cluster_id ; uniform float u_batch_debug_id_color ; uniform float u_batch_debug_main_render_time ; uniform float u_debug_colors_seed ; uniform float u_debug_render_time_threshold ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},
{a:"txt",b:"GLSL_IN vec3 aD ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float aE = 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE_DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"const vec3 aF = vec3 ( 1.0 , 0.05 , 0.05 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"const vec3 aF = vec3 ( 0.05 , 0.05 , 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"const vec3 aG = vec3 ( 0.4 , 0.4 , 1.0 ) ; const vec3 aH = vec3 ( 1.0 , 0.4 , 0.4 ) ; const vec3 aI = vec3 ( 1.0 , 1.0 , 1.0 ) ; const vec3 aJ = vec3 ( 0.0 , 133.0 / 255.0 , 66.0 / 255.0 ) ; const vec3 aK = vec3 ( 160.0 / 255.0 , 38.0 / 255.0 , 33.0 / 255.0 ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"float aP ( ) { float aL = 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIREFRAME_QUALITY",0,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) aL = 0.0 ;".split(" ")}]}},{a:"elif",j:["WIREFRAME_QUALITY",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GLSL1"],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",
":","enable"]}]}}]},{a:"txt",b:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; aL = min ( min ( aO . x , aO . y ) , aO . z ) ; aL = clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["return","aL",";","}"]}]}}]},{a:"txt",b:"void main ( ) { vec3 aQ = vec3 ( 0.0 ) ; float L = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE"],l:{a:"grp",f:[{a:"txt",b:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) { aQ = aF ; L = 1.0 ; } else discard ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"if ( u_debug_view_mode == DV_OPAQUE_WIREFRAME ) { float aL = aP ( ) ; aQ = vec3 ( mix ( u_wireframe_edge_color , aI , aL ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_TRANSPARENT_WIREFRAME ) { float aL = aP ( ) ; aQ = u_wireframe_edge_color ; L = mix ( 1.0 , 0.0 , aL ) ; } else if ( u_debug_view_mode == DV_FRONT_BACK_VIEW ) { float aL = aP ( ) ; if ( gl_FrontFacing ) aQ = mix ( u_wireframe_edge_color , aG , aL ) ; else aQ = mix ( u_wireframe_edge_color , aH , aL ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_CLUSTERS_VIEW ) { float aR = u_cluster_id + u_debug_colors_seed + 2.0 ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_BATCHES_VIEW ) { float aR = u_batch_debug_id_color + u_debug_colors_seed ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_RENDER_TIME ) { float aS ; if ( u_debug_render_time_threshold > 0.0 ) aS = clamp ( u_batch_debug_main_render_time , 0.0 , u_debug_render_time_threshold ) / u_debug_render_time_threshold ; else aS = 1.0 ; float aT = clamp ( 2.0 * aS , 0.0 , 1.0 ) ; float aU = clamp ( 2.0 * aS - 1.0 , 0.0 , 1.0 ) ; float aV = aS ; aQ = mix ( aJ , aK , vec3 ( aT , aU , aV ) ) ; L = 1.0 ; }".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["debug_view.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"USE_INSTANCED_PARTCLS",b:["0"]},{a:"var",c:"DEBUG_VIEW_SPECIAL_SKYDOME",b:["0"]},{a:"var",c:"DEBUG_SPHERE",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",
c:"BILLBOARD",b:["0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"MAX_BONES",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN float a_polyindex ;".split(" ")},
{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],
l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_position_next",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]}]}}]},{a:"txt",b:["GLSL_OUT","vec3","aD",";"]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_wind ; uniform float u_time ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"skin.glslv"},{a:"include",F:"wind_bending.glslv"},{a:"include",F:"dynamic_grass.glslv"}]}}]},{a:"txt",
b:"void main ( ) { if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_VIEW_SPECIAL_SKYDOME"],l:{a:"grp",f:[{a:"txt",b:"gl_Position = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["STATIC_BATCH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]}]}}]},{a:"txt",b:"mat3 N = u_view_tsr ; vec3 O = a_position ; vec4 S = R ( a_tbn ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEBUG_SPHERE"],l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ; an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"elif",j:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"au aw = aZ ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 a_ = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , a_ , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( O - ao , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["error.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",
F:"std.glsl"},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 0.0 , 1.0 , 1.0 ) ; }".split(" ")}]};a["error.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; void main ( ) { gl_Position = u_proj_matrix * bc ( u_view_tsr ) * vec4 ( a_position , 1.0 ) ; }".split(" ")}]};a["grass_map.glslf"]={a:"grp",
f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DYNAMIC_GRASS_SIZE",b:["0"]},{a:"var",c:"DYNAMIC_GRASS_COLOR",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","bd",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","bd",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec3","bd",";"]}]}}]}]}}]},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT_FRAG_COLOR","=","bd",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( bd , vec3 ( 1.0 ) ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",
b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , bd ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:["}"]}]};a["grass_map.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DYNAMIC_GRASS_SIZE",b:["0"]},{a:"var",c:"DYNAMIC_GRASS_COLOR",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",
F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:["GLSL_IN","vec3","a_position",";"]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_grass_size",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_grass_color",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","bd",";"]}]}},{a:"else",
l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","bd",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bd",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},
{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_wind ; uniform float u_time ; uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , vec3 ( 0.0 ) ) ; Z = as ( u_camera_eye , aq , N , u_model_tsr ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},
{a:"txt",b:"vec4 f = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_SIZE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:"bd = vec4 ( a_grass_size , a_grass_color ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["bd","=","a_grass_size",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS_COLOR"],l:{a:"grp",f:[{a:"txt",b:["bd","=","a_grass_color",";"]}]}}]}]}}]},{a:"txt",b:["gl_Position",
"=","f",";","}"]}]};a["halo.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"SKY_STARS",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform vec4 u_diffuse_color ; uniform vec3 u_halo_rings_color ; uniform vec3 u_halo_lines_color ; uniform float u_halo_hardness ; uniform float u_halo_size ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:["uniform",
"vec3","u_sun_intensity",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ; uniform float u_cam_water_depth ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKY_STARS","WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","be",";"]}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_IN float bf ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{a:"include",F:"color_util.glslf"},{a:"include",F:"halo_color.glslf"},{a:"txt",b:"void main ( ) { vec4 bi = bh ( ) ; vec3 aQ = bi . rgb ; float aM = bi . a ; aW ( aQ ) ; aX ( aQ , aM ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , aM ) ; }".split(" ")}]};a["halo.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"SKY_STARS",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"include",F:"std.glsl"},
{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform PRECISION float u_halo_size ; uniform vec3 u_camera_eye ;".split(" ")},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec2 a_halo_bb_vertex ; GLSL_IN float a_random_vals ; GLSL_OUT vec2 A ; GLSL_OUT float bf ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","be",";"]}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; vec3 O = ap ( Z , a_position ) ; A = a_halo_bb_vertex * 2.0 - 1.0 ; bf = a_random_vals ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"mat3 bk = bj ( O , N ) ; mat3 bl = N ; bl [ 0 ] [ 0 ] = 0.0 ; bl [ 0 ] [ 1 ] = 0.0 ; bl [ 0 ] [ 2 ] = 0.0 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat3 bk = bj ( O , N ) ;".split(" ")}]}}]},{a:"txt",b:"vec2 bm = ( a_halo_bb_vertex * 2.0 - 1.0 ) * u_halo_size ; vec3 bn = vec3 ( bm [ 0 ] , 0.0 , bm [ 1 ] ) ; vec3 bo = ap ( bk , bn ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"vec4 f = u_proj_matrix * vec4 ( ap ( bl , bo ) , 1.0 ) ; f . z = 0.99999 * f . w ;".split(" ")},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"be = vec4 ( bo , 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 f = u_proj_matrix * vec4 ( ap ( N , bo ) , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["irradiance_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform samplerCube u_sky_reflection ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bp ; void main ( ) { vec3 bq = normalize ( bp ) ; vec3 bs ; vec3 bt = vec3 ( 0.0 ) ; vec3 bu = vec3 ( 0.0 , 0.0 , 1.0 ) ; vec3 bv = vec3 ( 1.0 , 0.0 , 0.0 ) ; const float bw = 0.025 ; float bx = 0.0 ; for ( float by = 0.0 ; by < 2.0 * M_PI ; by += bw ) { for ( float bz = 0.0 ; bz < 0.5 * M_PI ; bz += bw ) { vec3 bA = vec3 ( sin ( bz ) * cos ( by ) , sin ( bz ) * sin ( by ) , cos ( bz ) ) ; vec3 bB = bA . x * bv + bA . y * bu + bA . z * bq ; vec3 bs = GLSL_TEXTURE_CUBE ( u_sky_reflection , bB ) . rgb ; bC ( bs ) ; bt += bs * cos ( bz ) * sin ( bz ) ; bx ++ ; } } bt = M_PI * bt * ( 1.0 / float ( bx ) ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bt , 1.0 ) ; }".split(" ")}]};
a["lens_flares.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_sampler ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_sampler , A ) ; aW ( aQ . rgb ) ; aX ( aQ . rgb , aQ . a ) ; GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};a["lens_flares.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"NUM_LIGHTS",
b:["0"]},{a:"define",c:"LIGHT_INDEX",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; GLSL_IN float a_lf_dist ; GLSL_IN vec2 a_lf_bb_vertex ; GLSL_IN vec2 a_texcoord ; GLSL_OUT vec2 A ; void main ( ) { A = a_texcoord ; vec3 bD = normalize ( u_light_directions [ LIGHT_INDEX ] ) ; vec4 f = u_proj_matrix * vec4 ( _ ( u_view_tsr , bD ) , 0.0 ) ; f . x /= f . w ; f . y /= f . w ; f += 99999.0 * step ( f . z , 0.0 ) ; f += 100.0 * ( step ( 1.0 , abs ( f . x ) ) + step ( 1.0 , abs ( f . y ) ) ) ; f . x = a_lf_dist * f . x ; f . y = a_lf_dist * f . y ; float bE = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bF = vec2 ( a_lf_bb_vertex . x / bE , a_lf_bb_vertex . y ) ; if ( a_lf_dist < 0.999 ) { const float bG = 1.9 ; bF *= ( 1.0 + bG * length ( f . xy ) ) ; } gl_Position = vec4 ( f . xy + bF , 0.999999 , 1.0 ) ; }".split(" ")}]};
a["line.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"ALPHA",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform vec4 u_diffuse_color ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 aQ = u_diffuse_color . xyz ; float L = u_diffuse_color . a ; aW ( aQ ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
a["line.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec3 a_direction ; uniform mat3 u_model_tsr ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform float u_height ; uniform float u_line_width ; void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , normalize ( a_direction ) , Z ) ; vec4 bH = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; bH . xyz /= bH . w ; vec4 bI = u_proj_matrix * vec4 ( ap ( N , aw . O + aw . U ) , 1.0 ) ; bI . xyz /= bI . w ; float bE = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bJ = ( bI - bH ) . xy ; bJ . x *= bE ; float bK = M_PI / 2.0 ; mat2 bL = mat2 ( cos ( bK ) , sin ( bK ) , - sin ( bK ) , cos ( bK ) ) ; bJ = bL * bJ ; bJ = normalize ( bJ ) ; vec2 bM = ( u_line_width / u_height ) * vec2 ( 1.0 / bE , 1.0 ) ; gl_Position = vec4 ( bH . xy + bJ . xy * bM / 2.0 , bH . z , 1.0 ) ; gl_Position *= bH . w ; }".split(" ")}]};
a["main.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"NORMAL_TEXCOORD",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},
{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"PARALLAX",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"USE_BSDF_SKY_DIM",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"WETTABLE",b:["0"]},{a:"var",c:"NUM_VALUES",b:["0"]},
{a:"var",c:"NUM_RGBS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"SSAO_ONLY",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",
b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"USE_TEXTURE_LOD_EXT",b:["0"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_TEXTURE_LOD_EXT",{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"extension",b:["GL_EXT_shader_texture_lod",":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"include",F:"caustics.glslf"}]}}]}]}}]},{a:"cond",f:[{a:"if",
j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"txt",b:"uniform float u_time ; uniform vec2 u_texel_size ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["GLSL1","USE_BSDF_SKY_DIM",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_bsdf_cube_sky_dim",";"]}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{a:"txt",b:["uniform","vec3","u_camera_eye_frag",";"]},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform",
"mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",
b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},
{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PBR_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PBR_STANDARD",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform samplerCube u_cube_irradiance ; uniform samplerCube u_cube_r_convolution ; uniform sampler2D u_brdf ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shadow_mask",";"]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP",
"NUM_LAMP_LIGHTS",0,{a:"non_equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},
"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN",
"vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE","USE_POSITION_CLIP",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"include",F:"nodes.glslf"},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"float bN = length ( i ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"float bO = h . z - WATER_LEVEL ;".split(" ")}]}}]},{a:"txt",b:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; vec3 aQ = E ; float L = I ; vec3 U = G ; vec4 bP = H ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1},"WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WETTABLE"],l:{a:"grp",f:[{a:"txt",b:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bO , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"bQ ( aQ , bO , u_time , bP , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bN ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"L = min ( 1.0 , L ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , bO ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , 1.0 ) ;".split(" ")}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float bS = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bS ) ;".split(" ")}]}}]},{a:"txt",b:"aQ = max ( vec3 ( 0.0 ) , aQ ) ; aW ( aQ ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
a["main.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"CALC_TBN",b:["0"]},{a:"var",c:"USE_INSTANCED_PARTCLS",b:["0"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"PARALLAX",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},
{a:"var",c:"SMAA_JITTER",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",
c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"MAC_OS_SHADOW_HACK",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"TEXCOORD",b:["0"]},{a:"var",c:"VERTEX_COLOR",b:["0"]},{a:"var",c:"VERTEX_ANIM_MIX_NORMALS_FACTOR",b:["u_va_frame_factor"]},{a:"var",c:"MAX_BONES",
b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"scale_texcoord.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",
f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],
l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","vec3","a_position_next",";"]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE",{a:"logical_or_expr",o:9}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_color",";"]}]}}]}]}}]},{a:"txt",b:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},"SHADOW_USAGE",
"SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bT",";"]},
{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bU",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_OUT","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE",
"USE_POSITION_CLIP",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","NODES",{a:"logic_negative_expr",o:1},"USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"BILLBOARD","DYNAMIC_GRASS",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_texture_scale",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_normal_offset",";"]},{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{a:"txt",b:["uniform","mat4","u_p_light_matrix0",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{a:"include",F:"dynamic_grass.glslv"},{a:"include",F:"shadow.glslv"},{a:"include",F:"skin.glslv"},
{a:"include",F:"wind_bending.glslv"},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"include",F:"nodes.glslv"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["mat4","bV","=","u_view_refl_matrix",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat4 bV = mat4 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:["mat3","N","=","u_view_tsr",";"]},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",
b:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["STATIC_BATCH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]}]}}]},{a:"txt",b:["vec3","O","=","a_position",";"]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN",
"USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"NODES",{a:"logic_negative_expr",o:1},"USE_TBN_SHADING","CALC_TBN",{a:"logical_and_expr",o:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:14}],l:{a:"grp",f:[{a:"txt",b:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 bW = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"NODES",{a:"logic_negative_expr",o:1},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:13}],l:{a:"grp",f:[{a:"txt",b:["vec3","U","=","bW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","NODES",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},{a:"elif",j:["NODES",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"vec3 bX = ap ( Z , O ) ; vec3 ac = normalize ( _ ( Z , bW ) ) ; vec3 D = bX - u_camera_eye ; vec3 W = cross ( D , ac ) ; vec3 V = cross ( ac , W ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN"],l:{a:"grp",f:[{a:"txt",b:"vec3 ac = normalize ( _ ( Z , bW ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",
o:2},"USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE","USE_NODE_BUMP",{a:"logical_or_expr",o:10}],l:{a:"grp",f:[{a:"txt",b:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_BSDF_BEGIN","USE_NODE_BUMP",{a:"logical_or_expr",o:8}],l:{a:"grp",f:[{a:"txt",b:"U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS",
"BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"elif",j:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"au aw = aZ ( O , V , ae , W , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"O = ( bV * vec4 ( O , 1.0 ) ) . xyz ; ao = ( bV * vec4 ( ao , 1.0 ) ) . xyz ; aq = ( bV * vec4 ( aq , 1.0 ) ) . xyz ;".split(" ")}]}}]},{a:"txt",b:"Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 a_ = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , a_ , Z ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:"B = aw . aB ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"ax ( aw . O , aw . ao , U , bV ) ;".split(" ")}]}}]},{a:"txt",b:"h = aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO",
"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:13}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"bT = u_camera_eye - aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",
b:"bU = aw . aQ ;".split(" ")}]}},{a:"elif",j:["VERTEX_COLOR"],l:{a:"grp",f:[{a:"txt",b:["bU","=","a_color",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 bY = bV * vec4 ( aw . O , 1.0 ) ; bY . xyz = ap ( N , bY . xyz ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 bY = vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["NODES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:["i","=","bY",";"]}]}}]},{a:"txt",b:"vec4 f = u_proj_matrix * bY ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE","USE_POSITION_CLIP",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bZ ( aw . O , aw . U ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["REFRACTIVE","NODES",{a:"logic_negative_expr",o:1},"USE_NODE_B4W_REFRACTION",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"m = - bY . z / u_view_max_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"txt",b:["J","(",")",";"]}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["main_stack.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},
{a:"var",c:"TEXTURE_SPEC_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"TEXTURE_COLOR0_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"TEXTURE_COLOR1_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"PARALLAX",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_PLANE"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"TEXTURE_SPEC",b:["0"]},{a:"var",c:"ALPHA_AS_SPEC",b:["0"]},{a:"var",
c:"TEXTURE_STENCIL_ALPHA_MASK",b:["0"]},{a:"var",c:"TEXTURE_STENCIL_ALPHA_MASK_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"NORMAL_TEXCOORD",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"DOUBLE_SIDED_LIGHTING",b:["0"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"TEXCOORD",b:["0"]},{a:"var",c:"VERTEX_COLOR",b:["0"]},{a:"var",c:"WETTABLE",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",
b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"PARALLAX_LOD_DIST",b:["5.0"]},{a:"var",c:"PARALLAX_STEPS",b:["5.0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},
{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"SSAO_ONLY",b:["0"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},
{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"include",F:"caustics.glslf"}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"txt",b:["uniform","float","u_time",";"]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT",
"SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",
";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_colormap0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_SPEC","ALPHA_AS_SPEC",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_specmap0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_normalmap0",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_STENCIL_ALPHA_MASK"],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_colormap1 ; uniform sampler2D u_stencil0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE",
"REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shadow_mask",";"]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",
";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},
{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform float u_specular_alpha ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_reflect_factor",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"txt",b:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_normal_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform float u_diffuse_color_factor ; uniform float u_alpha_factor ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_SPEC"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_specular_color_factor",";"]}]}}]},{a:"txt",b:"uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float",
"u_parallax_scale",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_refr_bump",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",
o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","bT",";"]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","bU",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","o",";"]}]}}]},
{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],
l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"shadow.glslf"}]}}]},{a:"include",F:"mirror.glslf"},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"include",F:"refraction.glslf"}]}}]},{a:"include",F:"environment.glslf"},{a:"cond",f:[{a:"if",
j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"lighting_nodes.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",
{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2},"SHADELESS",{a:"logic_negative_expr",o:1},"CAUSTICS","WATER_EFFECTS",{a:"logical_and_expr",o:3},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float bN = length ( i ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"float bO = h . z - WATER_LEVEL ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:["vec2","b_","=","A",";"]}]}}]},{a:"txt",b:"vec3 ca = normalize ( j ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( gl_FrontFacing == false )".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["if","(","gl_FrontFacing",")"]}]}}]},{a:"txt",b:"ca = ca ; else ca = - ca ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( ca , k . xyz ) * k . w ; mat3 cb = mat3 ( k . xyz , W , ca ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["mat3","N","=","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"vec2 cc = normalize ( _ ( N , j ) ) . st ; cc = cc * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"PARALLAX",{a:"logical_and_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"if ( bN < PARALLAX_LOD_DIST ) { float cd = clamp ( 0.5 * ( PARALLAX_LOD_DIST - bN ) , 0.0 , 1.0 ) ; float ce = u_parallax_scale * cd ; vec3 cf = normalize ( bT * cb ) ; float cg = 1.0 / PARALLAX_STEPS ; vec2 ch = cf . xy * ce / ( PARALLAX_STEPS * cf . z ) ; float ci = 1.0 ; float cj ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec2","ck","=","cc",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",
b:["vec2","ck","=","b_",";"]}]}}]},{a:"txt",b:"cj = GLSL_TEXTURE ( u_normalmap0 , ck ) . a ; for ( float cl = 1.0 ; cl <= PARALLAX_STEPS ; cl ++ ) { if ( cj < ci ) { ci -= cg ; ck -= ch ; cj = GLSL_TEXTURE ( u_normalmap0 , ck ) . a ; } } vec2 cm = ck + ch ; float cn = GLSL_TEXTURE ( u_normalmap0 , cm ) . a - ( ci + cg ) ; float co = cj - ci ; float cp = co / ( co - cn ) ; ck = cp * cm + ( 1.0 - cp ) * ck ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",
o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"b_ += ck - cc ;".split(" ")}]}}]},{a:"txt",b:["cc","=","ck",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD"],l:{a:"grp",f:[{a:"txt",b:"cc += ck - b_ ;".split(" ")}]}}]},{a:"txt",b:["b_","=","ck",";"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec4","cq",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO",
"TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cq = GLSL_TEXTURE ( u_normalmap0 , cc ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"cq = GLSL_TEXTURE ( u_normalmap0 , b_ ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 cr = cq . rgb - 0.5 ; cr = mix ( vec3 ( 0.0 , 0.0 , 1.0 ) , cr , u_normal_factor ) ; vec3 U = cb * cr ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","U","=","ca",";"]}]}}]},{a:"txt",b:"U = normalize ( U ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD"],
l:{a:"grp",f:[{a:"txt",b:"cc = normalize ( _ ( N , U ) ) . st ; cc = cc * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 D = normalize ( bT ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 cs = bU ; bC ( cs ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_COLOR","DYNAMIC_GRASS",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 ct = vec4 ( cs , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",
f:[{a:"txt",b:["vec4","ct","=","u_diffuse_color",";"]}]}}]},{a:"txt",b:["float","cu","=","1.0",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 cv = GLSL_TEXTURE ( u_colormap0 , cc ) ;".split(" ")}]}},{a:"elif",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 cv = GLSL_TEXTURE ( u_colormap0 , b_ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",
{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bC ( cv . rgb ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_STENCIL_ALPHA_MASK"],l:{a:"grp",f:[{a:"txt",b:["vec4","cw",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cw = GLSL_TEXTURE ( u_colormap1 , cc ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"cw = GLSL_TEXTURE ( u_colormap1 , b_ ) ;".split(" ")}]}}]},{a:"txt",b:"bC ( cw . rgb ) ;".split(" ")},{a:"cond",
f:[{a:"if",j:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 cx = GLSL_TEXTURE ( u_stencil0 , cc ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 cx = GLSL_TEXTURE ( u_stencil0 , b_ ) ;".split(" ")}]}}]},{a:"txt",b:"cv = mix ( cv , cw , cx . r ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb = mix ( ct . rgb , cv . rgb , u_diffuse_color_factor ) ; float M = u_alpha_factor * cv . a ; M += ( 1.0 - step ( 0.0 , M ) ) ; ct . a = mix ( M , 1.0 , u_diffuse_color . a ) ; cu = cv . a ;".split(" ")}]}},
{a:"elif",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb *= mix ( vec3 ( 1.0 ) , cv . rgb , u_diffuse_color_factor ) ; ct . a = cv . a ; cu = cv . a ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADELESS"],l:{a:"grp",f:[{a:"txt",b:"vec3 aQ = ct . rgb ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 cy = u_diffuse_intensity * ct . rgb ; vec3 cA = u_environment_energy * cz ( U ) ; vec3 cB = u_ambient * cA ; vec4 bP = cC ( cy ) ; vec3 cD = u_emit * ct . rgb ; vec3 cE = u_specular_color ;".split(" ")},
{a:"cond",f:[{a:"if",j:["TEXTURE_SPEC"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_AS_SPEC"],l:{a:"grp",f:[{a:"txt",b:"vec3 cF = vec3 ( cu ) ;".split(" ")}]}},{a:"elif",j:["TEXTURE_SPEC_CO","TEXTURE_COORDS_NORMAL",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 cF = GLSL_TEXTURE ( u_specmap0 , cc ) . rgb ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 cF = GLSL_TEXTURE ( u_specmap0 , b_ ) . rgb ;".split(" ")}]}}]},{a:"txt",b:"bC ( cF . rgb ) ; cE = mix ( cE , cF , u_specular_color_factor ) ;".split(" ")}]}}]},
{a:"txt",b:"float cG = u_specular_params [ 0 ] ; vec2 cH = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cI = cG * cE ; vec3 aQ ; vec3 cJ ; cK ( cD , cB , cy , cI , h , U , D , cH , u_diffuse_params , bP , 0.0 , vec4 ( 0.0 ) , aQ , cJ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cL ( aQ , D , U , u_reflect_factor , N ) ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"cL ( aQ , D , U , u_reflect_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cL ( aQ , D , U , u_mirror_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["aQ","+=","cJ",";"]}]}}]},{a:"txt",b:"float L = ct . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1},"WATER_EFFECTS",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WETTABLE"],l:{a:"grp",f:[{a:"txt",b:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bO , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CAUSTICS"],l:{a:"grp",f:[{a:"txt",b:"bQ ( aQ , bO , u_time , bP , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bN ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"float t = max ( max ( cJ . r , cJ . g ) , cJ . b ) * u_specular_alpha ; L = ct . a * ( 1.0 - t ) + t ;".split(" ")}]}}]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"vec2 cM = - ( _ ( N , U ) ) . xy ; aQ = mix ( cN ( l , cM * u_refr_bump ) , aQ , L ) ; L = 1.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , bO ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , bN , D , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float bS = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bS ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["node_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",
c:"NUM_VALUES",b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",
b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 bp ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"include",F:"nodes.glslf"},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR","USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_GEOMETRY_NO","USE_NODE_GEOMETRY_GL","USE_NODE_GEOMETRY_IN","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB","USE_NODE_TEX_COORD_NO","USE_NODE_B4W_REFLECT_WORLD",{a:"logical_or_expr",
o:9}],l:{a:"grp",f:[{a:"txt",b:"vec3 D = - normalize ( bp ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","D",";"]}]}}]},{a:"txt",b:"vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; E = max ( vec3 ( 0.0 ) , E ) ; aW ( E ) ; GLSL_OUT_FRAG_COLOR = vec4 ( E , _1_0 ) ; }".split(" ")}]};a["particle_system.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"NUM_VALUES",b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",
c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"NORMAL_TEXCOORD",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"SOFT_STRENGTH",b:["0.25"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",
c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},
{a:"var",c:"USE_TEXTURE_LOD_EXT",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_TEXTURE_LOD_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_EXT_shader_texture_lod",":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES",
"NODES",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform",
"vec4","u_fog_color_density",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform float u_time ; uniform vec3 u_camera_eye_frag ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",
{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",
f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D",
"u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["TEXTURE_COLOR","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:7}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","h",";"]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"txt",b:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"include",F:"math.glslv"},{a:"include",F:"particles_nodes.glslf"},{a:"txt",b:"void main ( ) { vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; vec3 aQ = E ; float L = I ;".split(" ")},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"L = min ( 1.0 , L ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , length ( i ) , D , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"float cO = - i . z / u_view_max_depth ; vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cR = cQ ( cP ) ; float cS = cR - cO ; float cT = u_view_max_depth / SOFT_STRENGTH * cS ; L = L * min ( cT , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["particle_system.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"BILLBOARD_ALIGN",b:["BILLBOARD_ALIGN_VIEW"]},{a:"var",c:"TEXTURE_NORM_CO",b:["TEXTURE_COORDS_NONE"]},{a:"var",c:"CALC_TBN_SPACE",
b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"HALO_PARTICLES",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"PARTICLES_SHADELESS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"var",c:"COLOR_RAMP_LENGTH",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"WORLD_SPACE",b:["0"]},{a:"var",c:"USE_COLOR_RAMP",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",
c:"WIND_BEND",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN vec3 a_p_data ; GLSL_IN vec4 a_p_vels ; GLSL_IN vec2 a_p_bb_vertex ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","cU",";"]}]}}]},{a:"txt",b:["GLSL_OUT",
"vec3","bU",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:8}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},
{a:"txt",b:["GLSL_OUT","vec3","h",";"]},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","bT",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","USE_POSITION_CLIP",{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","float","bf",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec3","j",";"]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_p_color_ramp [ COLOR_RAMP_LENGTH ] ;".split(" ")}]}}]},{a:"txt",b:"uniform float u_p_time ; uniform float u_p_length ; uniform int u_p_cyclic ; uniform float u_p_fade_in ; uniform float u_p_fade_out ; uniform float u_p_nfactor ; uniform float u_p_gravity ; uniform float u_p_mass ; uniform float u_p_wind_fac ; uniform float u_p_max_lifetime ; uniform float u_p_tilt ; uniform float u_p_tilt_rand ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_wind ; uniform float u_p_size ; uniform vec3 u_camera_eye ;".split(" ")},{a:"cond",f:[{a:"if",j:["WORLD_SPACE",{a:"logic_negative_expr",o:1},"NODES","HALO_PARTICLES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_COLOR_RAMP"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_color_ramp_tex",";"]}]}}]},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"particles.glslv"},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"include",F:"particles_nodes.glslv"}]}}]},{a:"txt",b:"float cX ( vec2 cV , vec2 cW ) { return ( atan ( cW . y , cW . x ) - atan ( cV . y , cV . x ) ) ; } void main ( ) {".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS",
"REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["mat4","bV","=","u_view_refl_matrix",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat4 bV = mat4 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"mat3 N = u_view_tsr ; cY pp ; pp = cZ ( ) ; float c_ ; mat3 bk = da ( ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 db = ( bV * vec4 ( pp . O , 1.0 ) ) . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 db = pp . O ;".split(" ")}]}}]},
{a:"txt",b:"vec3 U = vec3 ( 0.0 , - 1.0 , 0.0 ) ; if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_VIEW ) { c_ = pp . bK ; bk = bj ( db , N ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_XY ) { c_ = cX ( vec2 ( EPSILON , 1.0 ) , vec2 ( U . x , - U . y ) ) + pp . bK ; bk [ 0 ] = db ; vec4 dc = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ; bk = dd ( dc , bk ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_YZ ) { c_ = pp . bK ; bk [ 0 ] = db ; vec4 de = X ( UP_VECTOR , M_PI / 2.0 ) ; bk = dd ( de , bk ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_ZX ) { c_ = pp . bK ; bk [ 0 ] = db ; } vec3 bn = vec3 ( ( a_p_bb_vertex [ 0 ] * 2.0 - 1.0 ) * pp . df * u_p_size , 0.0 , ( a_p_bb_vertex [ 1 ] * 2.0 - 1.0 ) * pp . df * u_p_size ) ; float dg = a_p_data [ 2 ] ; float dh = u_p_tilt * u_p_tilt_rand * ( 2.0 * dg - 1.0 ) ; float di = ( dh + u_p_tilt ) * M_PI ; vec4 dj = X ( TOWARD_VECTOR , di + c_ ) ; vec3 bo = ap ( bk , T ( dj , bn ) ) ; vec4 bY = vec4 ( ap ( N , bo ) , 1.0 ) ; vec4 f = u_proj_matrix * bY ;".split(" ")},
{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["bf","=","dg",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 dk = da ( ) ; dj = X ( TOWARD_VECTOR , c_ ) ; dk = dd ( dj , dk ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE","NODES",{a:"logic_negative_expr",o:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{a:"equal_expr",
o:2},{a:"logical_and_expr",o:2},"USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 W = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , V , vec3 ( 0.0 ) , W , U , aY ( bk , dk ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{a:"non_equal_expr",o:2},"CALC_TBN_SPACE",
"USE_TBN_SHADING",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{a:"txt",b:"J ( pp . O , pp . dl , pp . dm , pp . dn , pp . df , a_p_bb_vertex , a_p_data [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , aY ( bk , dk ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["A","=","a_p_bb_vertex",";"]}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"A = a_p_bb_vertex * 2.0 - 1.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"cU = pp . L ;".split(" ")}]}}]},{a:"txt",b:"bU = pp . aQ ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1},"PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO",
"CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:11}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",
o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["i","=","bY",";"]}]}}]},{a:"txt",b:"gl_Position = f ; h = bo ;".split(" ")},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bT = u_camera_eye - bo ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["particle_system_stack.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",
c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"ALPHA_CLIP",b:["0"]},{a:"var",c:"SOFT_STRENGTH",b:["0.25"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"HALO_PARTICLES",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_STARS",b:["0"]},
{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"PARTICLES_SHADELESS",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","NODES",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_sampler",";"]}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_diffuse_color_factor",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:"uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_emit ; uniform float u_ambient ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"uniform float u_halo_size ; uniform vec3 u_halo_rings_color ; uniform float u_halo_hardness ; uniform vec3 u_halo_lines_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_sun_intensity ; uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ;".split(" ")}]}}]},{a:"txt",b:"uniform float u_p_alpha_start ; uniform float u_p_alpha_end ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",
o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"txt",b:["uniform","vec4","u_diffuse_color",
";"]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:8}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","h",";"]},{a:"cond",f:[{a:"if",j:["NODES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","cU",";"]}]}}]},{a:"txt",b:["GLSL_IN","vec3","bU",";"]}]}}]},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN",
"vec3","bT",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","DISABLE_FOG",{a:"logic_negative_expr",o:1},"NODES",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","bf",";"]},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","be",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",
b:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"include",F:"lighting_nodes.glslf"},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"environment.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"include",F:"halo_color.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",
j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1},"DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 D = normalize ( bT ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["HALO_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"vec4 bi = bh ( ) ; vec3 aQ = bi . rgb * bU ; float dp = 0.9 * length ( A ) ; float dq = smoothstep ( u_p_alpha_start , u_p_alpha_end , dp ) ; float L = bi . a * ( 1.0 - dq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec4",
"ct","=","u_diffuse_color",";"]},{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"vec4 cv = GLSL_TEXTURE ( u_sampler , A ) ; bC ( cv . rgb ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb = mix ( ct . rgb , cv . rgb , u_diffuse_color_factor ) ;".split(" ")}]}},{a:"elif",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ct . rgb *= mix ( vec3 ( 1.0 ) , cv . rgb , u_diffuse_color_factor ) ;".split(" ")}]}}]},
{a:"txt",b:"ct . a = cv . a ;".split(" ")}]}}]},{a:"txt",b:"ct . rgb *= bU ;".split(" ")},{a:"cond",f:[{a:"if",j:["PARTICLES_SHADELESS",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec3 cy = u_diffuse_intensity * ct . rgb ; vec3 cD = u_emit * ct . rgb ; vec3 U = normalize ( j ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logic_negative_expr",o:1},"SKY_COLOR",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 cA = u_environment_energy * cz ( vec3 ( 0.0 ) ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 cA = u_environment_energy * cz ( U ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 cB = u_ambient * cA ; float cG = u_specular_params [ 0 ] ; vec2 cH = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cI = cG * u_specular_color ; vec3 aQ ; vec3 cJ ; cK ( cD , cB , cy , cI , h , U , D , cH , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cJ ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 aQ = ct . rgb ;".split(" ")}]}}]},{a:"txt",
b:"float L = ct . a * cU ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["ALPHA_CLIP"],l:{a:"grp",f:[{a:"txt",b:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"bR ( aQ , length ( i ) , D , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES"],l:{a:"grp",f:[{a:"txt",b:"float cO = - i . z / u_view_max_depth ; vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cR = cQ ( cP ) ; float cS = cR - cO ; float cT = u_view_max_depth / SOFT_STRENGTH * cS ; L = L * min ( cT , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["ALPHA","ALPHA_CLIP",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["proc_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform vec3 u_sky_color ; uniform vec3 u_sun_direction ; uniform float u_rayleigh_brightness ; uniform float u_mie_brightness ; uniform float u_spot_brightness ; uniform float u_scatter_strength ; uniform float u_rayleigh_strength ; uniform float u_mie_strength ; uniform float u_rayleigh_collection_power ; uniform float u_mie_collection_power ; uniform float u_mie_distribution ; GLSL_IN vec3 bp ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float dr = 0.99 ; const float ds = 1.8 ; const int dt = 8 ; float dy ( vec3 O , vec3 bD ) { float a = dot ( bD , bD ) ; float b = 2.0 * dot ( bD , O ) ; float du = dot ( O , O ) - 1.0 ; float dv = b * b - 4.0 * a * du ; float dw = sqrt ( dv ) ; float q = ( - b - dw ) / 2.0 ; float dx = du / q ; return dx ; } float dA ( float L , float g ) { float a = 3.0 * ( 1.0 - g * g ) ; float b = 2.0 * ( 2.0 + g * g ) ; float du = 1.0 + L * L ; float dz = pow ( 1.0 + g * g - 2.0 * g * L , 1.5 ) ; dz = max ( dz , 0.00001 ) ; return ( a / b ) * ( du / dz ) ; } float dF ( vec3 O , vec3 bD , float dB ) { float dC = dot ( bD , - O ) ; if ( dC < 0.0 ) { return 1.0 ; } vec3 dD = O + dC * bD ; if ( length ( dD ) < dB ) { return 0.0 ; } else if ( length ( dD ) >= dB ) { vec3 cW = normalize ( dD ) * dB - O ; float dE = acos ( dot ( normalize ( cW ) , bD ) ) ; return smoothstep ( 0.0 , 1.0 , pow ( dE * 2.0 , 3.0 ) ) ; } else return 1.0 ; } vec3 dG ( float aM , vec3 aQ , float aL ) { return aQ - aQ * pow ( u_sky_color , vec3 ( aL / aM ) ) ; } void main ( ) { vec3 bq = normalize ( bp ) ; vec3 dH = u_sun_direction ; float L = dot ( bq , dH ) ; float dI = dA ( L , - 0.01 ) * u_rayleigh_brightness * dH . z ; float dJ = dA ( L - 0.5 , u_mie_distribution ) * u_mie_brightness * ( 1.0 - dH . z ) ; float dK = smoothstep ( 0.0 , 100.0 , dA ( L , 0.9995 ) ) * u_spot_brightness ; vec3 dL = vec3 ( 0.0 , 0.0 , dr ) ; float dM = dy ( dL , bq ) ; float dN = dM / float ( dt ) ; float dO = dF ( dL , bq , dr - 0.3 ) ; vec3 dP = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 dQ = vec3 ( 0.0 , 0.0 , 0.0 ) ; for ( int cl = 0 ; cl < dt ; cl ++ ) { float dR = dN * float ( cl ) ; vec3 O = dL + bq * dR ; float dS = dF ( O , dH , dr - 0.2 ) ; float dT = dy ( O , dH ) ; vec3 dU = dG ( dT , vec3 ( ds ) , u_scatter_strength ) * dS ; dP += dG ( sqrt ( dR ) , u_sky_color * dU , u_rayleigh_strength ) ; dQ += dG ( dR , dU , u_mie_strength ) ; } dP = dP * dO * pow ( dM , u_rayleigh_collection_power ) / float ( dt ) ; dQ = ( dQ * dO * pow ( dM , u_mie_collection_power ) ) / float ( dt ) ; vec3 aQ = vec3 ( dK * dQ + dJ * dQ + dI * dP ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , 1.0 ) ; }".split(" ")}]};
a["r_convolution_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform samplerCube u_sky_reflection ; uniform float u_roughness ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bp ; float dZ ( int cr , int dV ) { float dW = 1.0 / float ( dV ) ; float dX = 1.0 ; float dY = 0.0 ; for ( int cl = 0 ; cl < 32 ; ++ cl ) { if ( cr > 0 ) { dX = mod ( float ( cr ) , 2.0 ) ; dY += dX * dW ; dW = dW / 2.0 ; cr = int ( float ( cr ) / 2.0 ) ; } } return dY ; } vec2 ea ( int cl , int d_ ) { return vec2 ( float ( cl ) / float ( d_ ) , dZ ( cl , 2 ) ) ; } vec3 eh ( vec2 eb , vec3 d_ , float ec ) { float a = ec * ec ; float by = 2.0 * M_PI * eb . x ; float ed = sqrt ( ( 1.0 - eb . y ) / ( 1.0 + ( a * a - 1.0 ) * eb . y ) ) ; float ee = sqrt ( 1.0 - ed * ed ) ; vec3 ef ; ef . x = cos ( by ) * ee ; ef . y = sin ( by ) * ee ; ef . z = ed ; vec3 bu = abs ( d_ . z ) < 0.999 ? vec3 ( 0.0 , 0.0 , 1.0 ) : vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 V = normalize ( cross ( bu , d_ ) ) ; vec3 eg = cross ( d_ , V ) ; vec3 bB = V * ef . x + eg * ef . y + d_ * ef . z ; return normalize ( bB ) ; } void main ( ) { vec3 ei = vec3 ( 0.0 ) ; if ( u_roughness != 0.0 ) { vec3 d_ = normalize ( bp ) ; vec3 ej = d_ ; vec3 ek = ej ; const int el = 1024 ; float em = 0.0 ; for ( int cl = 0 ; cl < el ; ++ cl ) { vec2 eb = ea ( cl , el ) ; vec3 ef = eh ( eb , d_ , u_roughness ) ; vec3 en = normalize ( 2.0 * dot ( ek , ef ) * ef - ek ) ; float eo = max ( dot ( d_ , en ) , 0.0 ) ; if ( eo > 0.0 ) { vec3 bs = GLSL_TEXTURE_CUBE ( u_sky_reflection , en ) . rgb ; bC ( bs ) ; ei += bs * eo ; em += eo ; } } ei = ei / em ; } else { vec3 bs = GLSL_TEXTURE_CUBE ( u_sky_reflection , normalize ( bp ) ) . rgb ; bC ( bs ) ; ei = bs ; } GLSL_OUT_FRAG_COLOR = vec4 ( ei , 1.0 ) ; }".split(" ")}]};
a["shadow.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"SHADELESS",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"USE_VIEW_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_MODEL_TSR_INVERSE",b:["0"]},{a:"var",c:"USE_VIEW_TSR",b:["0"]},{a:"var",c:"USE_MODEL_TSR",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_TEXTURE",
b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"NUM_LAMP_LIGHTS",b:["0"]},{a:"var",c:"TEXTURE_BLEND_TYPE",b:["TEXTURE_BLEND_TYPE_MIX"]},{a:"var",c:"NUM_VALUES",
b:["0"]},{a:"var",c:"NUM_RGBS",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"USE_LOD_SMOOTHING",b:["0"]},{a:"cond",f:[{a:"if",j:["GLSL1","USE_DERIVATIVES_EXT",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",
":","enable"]}]}}]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"math.glslv"}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"include",F:"depth_fetch.glslf"},{a:"include",F:"pack.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"include",F:"coverage.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{a:"txt",b:["uniform","vec3","u_camera_eye_frag",";"]},{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2},"CAMERA_TYPE",
"CAM_TYPE_ORTHO",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_direction",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_VIEW_TSR",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_VIEW_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR"],l:{a:"grp",
f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_MODEL_TSR_INVERSE"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_cube_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"txt",b:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_refl_plane",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_LAMP"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_VALUE"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_RGB"],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_colormap0 ; uniform float u_alpha_factor ;".split(" ")}]}}]},{a:"txt",b:["uniform","vec4","u_diffuse_color",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{a:"txt",b:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW",
"u_shadow_map1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]},{a:"cond",f:[{a:"if",j:["USE_REFRACTION","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{a:"logical_or_expr",o:3}],
l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_OBJECT_INFO"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_obj_info",";"]}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS","SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_camera_range",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","k",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE",
"SHADOW_CASTING",{a:"equal_expr",o:2},"RGBA_SHADOWS",{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2",
"NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["SHADELESS",{a:"logic_negative_expr",o:1},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",
{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"include",F:"shadow.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"nodes.glslf"}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_LOD_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NODES"],l:{a:"grp",f:[{a:"txt",
b:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; float L = I ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"float L = ( GLSL_TEXTURE ( u_colormap0 , A ) ) . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float M = u_alpha_factor * L ; M += ( 1.0 - step ( 0.0 , M ) ) ; L = mix ( M , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},{a:"txt",b:"if ( L < 0.5 ) discard ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","NO_SHADOWS",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",f:[{a:"txt",b:"float eq = ep ( - i . z , u_camera_range ) ; GLSL_OUT_FRAG_COLOR = er ( eq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",
b:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = es ( i . z ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR . a *= clamp ( k . r , 0.999999999 , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:["}"]}]};a["shadow.glslv"]={a:"grp",
f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"CALC_TBN",b:["0"]},{a:"var",c:"USE_INSTANCED_PARTCLS",b:["0"]},{a:"var",c:"NODES",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"SMAA_JITTER",b:["0"]},{a:"var",c:"MAC_OS_SHADOW_HACK",b:["0"]},{a:"var",c:"USE_POSITION_CLIP",
b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"AU_QUALIFIER",b:["GLSL_IN"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"HAIR_BILLBOARD",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"var",c:"SHADOW_TEX_RES",b:["2048.0"]},{a:"var",c:"VERTEX_ANIM",b:["0"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"TEXTURE_COLOR",b:["0"]},{a:"var",c:"ALPHA",
b:["0"]},{a:"var",c:"VERTEX_ANIM_MIX_NORMALS_FACTOR",b:["u_va_frame_factor"]},{a:"var",c:"MAX_BONES",b:["0"]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"scale_texcoord.glslv"},{a:"txt",b:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},
{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_influence",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_bending_col_main",";"]},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{a:"txt",b:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","a_position_next",";"]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP",
"CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2},{a:"logic_negative_expr",o:1},"TEXTURE_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",
j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","k",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},"RGBA_SHADOWS",{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4",
"i",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","n",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","o",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","u",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3",
"NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_OUT","float","m",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_subpixel_jitter",
";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_camera_eye",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_shadow_cast_billboard_view_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",
b:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",
b:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{a:"txt",b:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:["uniform","float",
"u_va_frame_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2},{a:"logic_negative_expr",o:1},"TEXTURE_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec3","u_texture_scale",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_normal_offset",";"]},{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{a:"txt",b:["uniform","mat4","u_p_light_matrix0",";"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{a:"include",F:"dynamic_grass.glslv"},{a:"include",F:"shadow.glslv"},{a:"include",F:"skin.glslv"},{a:"include",F:"wind_bending.glslv"},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"nodes.glslv"}]}}]},{a:"txt",b:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO",
"USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:13}],l:{a:"grp",f:[{a:"txt",b:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 bW = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; vec3 U = bW ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NODES","ALPHA","CALC_TBN_SPACE",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["VERTEX_ANIM"],l:{a:"grp",f:[{a:"txt",b:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"txt",b:"an ( O , V , W , U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_INSTANCED_PARTCLS"],l:{a:"grp",f:[{a:"txt",b:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["STATIC_BATCH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","Z","=","u_model_tsr",";"]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{a:"logical_or_expr",o:3},"USE_INSTANCED_PARTCLS",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ao","=","au_center_pos",";"]}]}},{a:"elif",j:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",
{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["CALC_TBN"],l:{a:"grp",f:[{a:"txt",b:"vec3 ac = normalize ( _ ( Z , bW ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","ae","=",
"a_shade_tangs",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"txt",b:"au aw = aZ ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"vec3 aq = ap ( Z , ao ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["HAIR_BILLBOARD",{a:"logic_negative_expr",o:1},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["mat3","et","=","u_shadow_cast_billboard_view_tsr",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["mat3","et","=","N",";"]}]}}]},{a:"txt",b:"Z = as ( u_camera_eye , aq , et , Z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WIND_BEND","BILLBOARD_JITTERED",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},
{a:"txt",b:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec3","ay","=","bW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"h = aw . O ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{a:"logical_and_expr",o:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:12}],l:{a:"grp",f:[{a:"txt",b:"j = aw . U ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"txt",b:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:"B = aw . aB ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec4 bY = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * bY ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_JITTER"],l:{a:"grp",f:[{a:"txt",b:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NODES","ALPHA",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"USE_POSITION_CLIP",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"l = aC ( f ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"m = - bY . z / u_view_max_depth ;".split(" ")}]}}]},{a:"txt",b:["J","(",")",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",
j:["TEXTURE_COLOR"],l:{a:"grp",f:[{a:"txt",b:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bZ ( aw . O , aw . U ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"NODES","ALPHA",{a:"logical_and_expr",o:2},"SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2},"RGBA_SHADOWS",{a:"logical_and_expr",o:2},{a:"logical_or_expr",
o:3}],l:{a:"grp",f:[{a:"txt",b:["i","=","bY",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 eu = ( u_proj_matrix * vec4 ( N [ 0 ] , 1.0 ) ) . xy ; float ev = SHADOW_TEX_RES / 2.0 ; eu = floor ( eu * ev + 0.5 ) / ev - eu ; f . xy += eu ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["sky.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"WO_SKYTEX",b:["0"]},{a:"var",c:"WO_SKYREAL",b:["0"]},{a:"var",
c:"WO_SKYBLEND",b:["0"]},{a:"var",c:"PROCEDURAL_SKYDOME",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WO_SKYPAPER",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:["uniform","samplerCube","u_sky",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},"REFLECTION_PASS",
"REFL_PASS_NONE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_camera_eye_frag ; uniform vec4 u_underwater_fog_color_density ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND","WO_SKYPAPER",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND",
"WO_SKYPAPER","WO_SKYTEX",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"include",F:"sky_blending.glslf"}]}}]},{a:"txt",b:["GLSL_IN","vec3","bp",";"]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 bs ; vec3 bq = normalize ( bp ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND",
"WO_SKYPAPER",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["float","ew","=","0.0",";"]},{a:"cond",f:[{a:"if",j:["WO_SKYREAL"],l:{a:"grp",f:[{a:"txt",b:"ew = abs ( A . y ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"ew = ( A . y + 1.0 ) * 0.5 ;".split(" ")}]}}]},{a:"txt",b:"vec3 ex = u_horizon_color ; vec3 ey = u_zenith_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:"vec3 ez = vec3 ( A , 0.0 ) ; vec4 eA = GLSL_TEXTURE_CUBE ( u_sky , bq ) ; bC ( eA . rgb ) ; bs = eB ( ex , ey , eA , ew , ez ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"bs = mix ( ex , ey , ew ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bs = GLSL_TEXTURE_CUBE ( u_sky , bq ) . rgb ; bC ( bs ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},"REFLECTION_PASS","REFL_PASS_NONE",{a:"equal_expr",o:2},{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float eC = WATER_LEVEL - u_camera_eye_frag . z ; vec3 eD = vec3 ( 0.0 ) ; vec3 eE = mix ( u_underwater_fog_color_density . rgb , eD , min ( - bq . z , 1.0 ) ) ; eE *= min ( 1.0 - min ( 0.03 * eC , 0.8 ) , 1.0 ) ; float aL = clamp ( sign ( 0.01 * eC - bq . z ) , 0.0 , 1.0 ) ; bs = mix ( bs , eE , aL ) ;".split(" ")}]}}]},
{a:"txt",b:"aW ( bs ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bs , 1.0 ) ; }".split(" ")}]};a["sky.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PROCEDURAL_SKYDOME",b:["0"]},{a:"var",c:"WO_SKYTEX",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform mat4 u_sky_vp_inverse ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 bp ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",
o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"txt",b:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ; vec4 bq = u_sky_vp_inverse * O ; bp = bq . xyz ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"A = a_position . xy ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","O",";","}"]}]};
a["skybox.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PROCEDURAL_SKYDOME",b:["0"]},{a:"var",c:"WO_SKYTEX",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform mat4 u_cube_view_matrix ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 bp ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",
";"]}]}}]},{a:"txt",b:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.999999 , 1.0 ) ; vec4 bq = u_cube_view_matrix * O ; bp = bq . xyz ;".split(" ")},{a:"cond",f:[{a:"if",j:["PROCEDURAL_SKYDOME",{a:"logic_negative_expr",o:1},"WO_SKYTEX","WO_SKYBLEND",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"A = a_position . xy ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","O",";","}"]}]};a["tex_skybox.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"WO_SKYTEX",
b:["0"]},{a:"var",c:"WO_SKYREAL",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"var",c:"WO_SKYPAPER",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bp ; GLSL_IN vec2 A ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{a:"txt",b:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"include",F:"sky_blending.glslf"}]}}]},{a:"txt",b:"void main ( ) { vec3 bq = normalize ( bp ) ; vec3 bs ; float ew = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYPAPER"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:"bs = GLSL_TEXTURE_CUBE ( u_sky_texture , bq ) . xyz ; bC ( bs ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"bs = vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",
j:["WO_SKYBLEND"],l:{a:"grp",f:[{a:"txt",b:"float L = acos ( bq . z ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYREAL"],l:{a:"grp",f:[{a:"txt",b:"ew = abs ( L * INV_PI - 0.5 ) * 2.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"ew = 1.0 - L * INV_PI ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec3 ex = u_horizon_color ; vec3 ey = u_zenith_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["WO_SKYTEX"],l:{a:"grp",f:[{a:"txt",b:"vec4 eA = GLSL_TEXTURE_CUBE ( u_sky_texture , bq ) ; bC ( eA . rgb ) ; vec3 ez = vec3 ( bp . xy , 0.0 ) ; bs = eB ( ex , ey , eA , ew , ez ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WO_SKYBLEND"],l:{a:"grp",f:[{a:"txt",b:"bs = mix ( ex , ey , ew ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["bs","=","ex",";"]}]}}]}]}}]}]}}]},{a:"txt",b:"aW ( bs ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bs , 1.0 ) ; }".split(" ")}]};a["water.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"DEBUG_WIREFRAME",b:["0"]},{a:"var",c:"NUM_NORMALMAPS",
b:["0"]},{a:"var",c:"FOAM",b:["0"]},{a:"var",c:"SHORE_PARAMS",b:["0"]},{a:"var",c:"GENERATED_MESH",b:["0"]},{a:"var",c:"ABSORB",b:["6.0"]},{a:"var",c:"SSS_STRENGTH",b:["1.0"]},{a:"var",c:"SSS_WIDTH",b:["0.45"]},{a:"var",c:"ALPHA",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"WAVES_HEIGHT",b:["1.0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"var",
c:"SHORE_SMOOTHING",b:["0"]},{a:"var",c:"DYNAMIC",b:["0"]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"define",c:"REFL_BUMP",b:["0.002"]},{a:"txt",b:["uniform","float","u_time",";"]},{a:"cond",
f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_sky_texture",";"]}]}},{a:"elif",j:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{a:"txt",b:["uniform","float","u_environment_energy",";"]},{a:"cond",f:[{a:"if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{a:"txt",b:"uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_cam_water_depth",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_color_density",
";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","mat4","u_cube_fog",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{a:"cond",f:[{a:"if",
j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_refractmap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_plane_reflection",";"]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","sampler2D","u_scene_depth",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_foam",";"]}]}}]},{a:"txt",b:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ; uniform vec3 u_shallow_water_col ; uniform vec3 u_shore_water_col ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"uniform float u_water_norm_uv_velocity ; uniform vec2 u_normalmap0_scale ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",1,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_normalmap1_scale",";"]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_normalmap2_scale",";"]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_mirror_factor",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_reflect_factor",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_view_max_depth",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_water_shallow_col_fac ; uniform float u_water_shore_col_fac ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:"uniform float u_foam_factor ; uniform vec2 u_foam_uv_freq ; uniform vec2 u_foam_mag ; uniform vec2 u_foam_scale ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_refr_bump",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:"const float aE = 1.0 ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},{a:"txt",b:"GLSL_IN vec3 bT ; GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 k ; GLSL_IN vec3 eF ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH","DYNAMIC",{a:"logical_and_expr",
o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","eG",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","eH",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",
o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","aD",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","B",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"include",F:"environment.glslf"},{a:"cond",f:[{a:"if",j:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{a:"logical_and_expr",o:3}],l:{a:"grp",
f:[{a:"include",F:"refraction.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"include",F:"fog.glslf"}]}}]},{a:"txt",b:"vec3 eP ( in vec2 eI , in vec3 U , in vec3 eJ , in vec3 eK , out float eL , in float eM ) { eL = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 eN = eI . xy + U . xy * REFL_BUMP / m ; eL = u_reflect_factor ; vec3 eO ; if ( u_cam_water_depth < 0.0 ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["DISABLE_FOG",{a:"logic_negative_expr",o:1},"WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eO = u_underwater_fog_color_density . rgb ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"eO = u_diffuse_color . rgb ;".split(" ")}]}}]},{a:"txt",b:"} else { eO = GLSL_TEXTURE ( u_plane_reflection , eN ) . rgb ; bC ( eO ) ; }".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eL = u_mirror_factor ; vec3 eO = eK * GLSL_TEXTURE_CUBE ( u_mirrormap , eJ ) . rgb ; bC ( eO ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"eL = u_reflect_factor ; vec3 eO = eK * vec3 ( 0.3 , 0.5 , 1.0 ) ; bC ( eO ) ;".split(" ")}]}}]},{a:"txt",b:"eL = min ( eL * eM , 1.0 ) ; return eO ; }".split(" ")},{a:"include",F:"lighting_nodes.glslf"},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 cb = mat3 ( k , eF , j ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 U = normalize ( j ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DYNAMIC",
"FOAM",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",b:"float bO = h . z - WATER_LEVEL ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float bO = h . z ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"vec2 b_ = vec2 ( eG . x , - eG . y ) + 0.5 ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 b_ = vec2 ( h . x , - h . y ) + 0.5 ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec2","b_","=","A",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 eQ = vec3 ( 0.0 ) ; eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap0_scale + vec2 ( 0.3 , 0.5 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",1,{a:"g_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap1_scale + vec2 ( - 0.3 , 0.7 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap2_scale + vec2 ( 0.0 , 1.1 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap3_scale + vec2 ( - 0.66 , - 0.3 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"U = mix ( U , normalize ( cb * eQ ) , 0.3 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"U = mix ( U , normalize ( cb * eQ ) , 0.5 ) ;".split(" ")}]}}]},{a:"txt",b:"U = normalize ( U ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 D = normalize ( bT ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 eI = l . xy / l . z ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 eI = vec2 ( 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"vec2 eR = eI + U . xy * u_refr_bump / m ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ; vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cR = cQ ( cP ) ; float cS = max ( cR - m , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"float eT = eS ( cR , eR , eI ) ; float eU = max ( eT - m , 0.0 ) ; float eV = u_view_max_depth / ABSORB * eU ; float eW = min ( L * eV , 1.0 ) ; L = min ( 15.0 * L * u_view_max_depth * cS , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float cT = u_view_max_depth / ABSORB * cS ; if ( u_cam_water_depth > 0.0 ) L = min ( L * cT , 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float L = u_diffuse_color . a ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:["float","eW","=","L",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"if ( u_cam_water_depth < 0.0 ) eW = 0.0 ; vec3 eX = GLSL_TEXTURE ( u_refractmap , eR ) . rgb ; bC ( eX ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"float eY = pow ( min ( eH . b / u_water_shallow_col_fac , 1.0 ) , 0.3 ) ; vec3 ct = mix ( u_shallow_water_col , u_diffuse_color . rgb , eY ) ; eY = pow ( min ( eH . b / u_water_shore_col_fac , 1.0 ) , 0.3 ) ; ct = mix ( u_shore_water_col , ct , eY ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ct = u_diffuse_color . rgb ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING"],l:{a:"grp",f:[{a:"txt",b:"float eZ = max ( 1.0 - u_view_max_depth * cS , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float eZ = 1.0 - L ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"float e_ = max ( bO / WAVES_HEIGHT + 0.1 , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],
l:{a:"grp",f:[{a:"txt",b:"vec3 fa = normalize ( vec3 ( eH . rg , 0.0 ) ) ; vec3 fb = normalize ( mix ( UP_VECTOR , fa , 0.8 ) ) ; float fc = 1.25 * max ( dot ( U , fb ) - 0.2 , 0.0 ) ; fc += max ( dot ( U , - UP_VECTOR ) , 0.0 ) ; eZ += fc * ( 1.0 - eH . b ) ; e_ *= ( 1.0 - 0.95 * pow ( eH . b , 0.1 ) ) ;".split(" ")}]}}]},{a:"txt",b:"eZ += e_ ; eZ = min ( u_foam_factor * eZ , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:"vec4 fd = GLSL_TEXTURE ( u_foam , u_foam_mag * sin ( u_foam_uv_freq * u_time ) + b_ * u_foam_scale ) ;".split(" ")}]}}]},
{a:"txt",b:"float cG = u_specular_params [ 0 ] ; vec2 cH = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cI = cG * u_specular_color ; vec3 cA = u_environment_energy * cz ( U ) ; vec3 cB = u_ambient * cA ; vec3 eK = cB + u_sun_intensity ; float eL ; vec3 eJ = reflect ( - D , U ) ; vec3 fe = normalize ( eJ + D ) ; float ff = 1.0 - dot ( D , fe ) ; float d_ = u_fresnel_params [ 0 ] ; float fg = u_fresnel_params [ 1 ] ; float fh = fg + ( 1.0 - fg ) * pow ( ff , d_ ) ; vec3 eO = eP ( eI , U , eJ , eK , eL , fh ) ; vec3 cy = u_diffuse_intensity * ct ; vec3 aQ ; vec3 cJ ; cK ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , cy , cI , h , U , D , cH , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cJ ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"float fi = max ( dot ( u_sun_direction , - j ) + SSS_WIDTH , 0.0 ) * max ( dot ( - D , u_sun_direction ) - 0.5 , 0.0 ) * max ( 0.0 , length ( u_sun_intensity ) - 0.1 ) ; fi = clamp ( SSS_STRENGTH * fi , 0.0 , 1.0 ) ; aQ = mix ( aQ , u_shallow_water_col , fi ) ; aQ = mix ( aQ , u_shore_water_col , fi ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"txt",b:"aQ = mix ( eX , aQ , eW ) ;".split(" ")}]}}]},{a:"txt",
b:"aQ = mix ( aQ , eO , eL ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:"float fj = mix ( fd . g , fd . r , max ( 4.0 * ( eZ - 0.75 ) , 0.0 ) ) ; fj = mix ( fd . b , fj , max ( 2.0 * eZ - 1.0 , 0.0 ) ) ; fj = mix ( 0.0 , fj , eZ ) ; aQ = mix ( aQ , eK , fj ) ;".split(" ")}]}}]},{a:"txt",b:["aQ","+=","cJ",";"]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float fk = m * u_view_max_depth ; float fl = 1.0 ; if ( u_cam_water_depth > 1.0 ) fl = 2.0 ; bR ( aQ , fk , D , fl ) ;".split(" ")}]}}]},
{a:"txt",b:["aW","(","aQ",")",";"]},{a:"cond",f:[{a:"if",j:["REFRACTIVE",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"L = max ( L , cJ . r ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["FOAM"],l:{a:"grp",f:[{a:"txt",b:["L","+=","fj",";"]}]}}]}]}},{a:"elif",j:["SHORE_SMOOTHING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["L","=","1.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aX ( aQ , L ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME",
1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GLSL1"],l:{a:"grp",f:[{a:"extension",b:["GL_OES_standard_derivatives",":","enable"]}]}}]},{a:"txt",b:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; float fm = min ( min ( aO . x , aO . y ) , aO . z ) ; fm = clamp ( fm , 0.0 , 1.0 ) ; aQ = mix ( u_wireframe_edge_color , aQ , fm ) ; L = mix ( 1.0 , L , fm ) ;".split(" ")}]}},{a:"elif",j:["DEBUG_WIREFRAME",2,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; float fm = 1.0 ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) fm = 0.0 ; aQ = mix ( u_wireframe_edge_color , aQ , fm ) ; L = mix ( 1.0 , L , fm ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};a["water.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"USE_TBN_SHADING",b:["0"]},{a:"var",c:"DEBUG_WIREFRAME",b:["0"]},{a:"var",c:"NUM_NORMALMAPS",b:["0"]},
{a:"var",c:"FOAM",b:["0"]},{a:"var",c:"SHORE_PARAMS",b:["0"]},{a:"var",c:"MAX_SHORE_DIST",b:["100.0"]},{a:"var",c:"SHORE_MAP_SIZE_X",b:["1.0"]},{a:"var",c:"SHORE_MAP_SIZE_Y",b:["1.0"]},{a:"var",c:"SHORE_MAP_CENTER_X",b:["0.0"]},{a:"var",c:"SHORE_MAP_CENTER_Y",b:["0.0"]},{a:"var",c:"GENERATED_MESH",b:["0"]},{a:"var",c:"DST_NOISE_SCALE_0",b:["0.05"]},{a:"var",c:"DST_NOISE_SCALE_1",b:["0.03"]},{a:"var",c:"DST_NOISE_FREQ_0",b:["1.3"]},{a:"var",c:"DST_NOISE_FREQ_1",b:["1.0"]},{a:"var",c:"DIR_MIN_SHR_FAC",
b:["0.4"]},{a:"var",c:"DIR_FREQ",b:["0.5"]},{a:"var",c:"DIR_NOISE_SCALE",b:["0.05"]},{a:"var",c:"DIR_NOISE_FREQ",b:["0.07"]},{a:"var",c:"DIR_MIN_NOISE_FAC",b:["0.5"]},{a:"var",c:"DST_MIN_FAC",b:["0.2"]},{a:"var",c:"WAVES_HOR_FAC",b:["5.0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"var",c:"WAVES_HEIGHT",b:["1.0"]},{a:"var",c:"WAVES_LENGTH",b:["10.0"]},{a:"var",c:"WATER_LEVEL",b:["0.0"]},{a:"var",c:"SHORE_SMOOTHING",b:["0"]},{a:"var",c:"DYNAMIC",b:["0"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",
c:"REFRACTIVE",b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"include",F:"procedural.glslf"},{a:"txt",b:["GLSL_IN","vec3","a_position",";"]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH",{a:"logic_negative_expr",o:1},"DYNAMIC",{a:"logic_negative_expr",o:1},"NUM_NORMALMAPS",0,{a:"g_expr",o:2},{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN",
"vec4","a_tbn",";"]}]}}]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH",{a:"logic_negative_expr",o:1},"NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","float","a_polyindex",";"]}]}}]},{a:"txt",b:"GLSL_OUT vec3 bT ; GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",
o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","A",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec3 k ; GLSL_OUT vec3 eF ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2},"GENERATED_MESH","DYNAMIC",{a:"logical_and_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3",
"eG",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","eH",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","l",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",
b:["GLSL_OUT","float","m",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","aD",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_TBN_SHADING"],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec3","B",";"]}]}}]},{a:"cond",f:[{a:"if",j:["STATIC_BATCH"],l:{a:"grp",f:[{a:"txt",b:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["uniform","mat3","u_model_tsr",";"]}]}}]},{a:"txt",b:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_camera_eye ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"uniform PRECISION float u_time ; uniform vec3 u_wind ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_shore_dist_map",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"vec3 ft ( in vec2 fn ) { vec2 fo = 0.5 + vec2 ( ( fn . x - SHORE_MAP_CENTER_X ) / SHORE_MAP_SIZE_X , ( fn . y - SHORE_MAP_CENTER_Y ) / SHORE_MAP_SIZE_Y ) ; vec4 fp = GLSL_TEXTURE ( u_shore_dist_map , fo ) ; const vec2 fq = vec2 ( 1.0 / 255.0 , 1.0 ) ; float fr = dot ( fp . ba , fq ) ; vec2 fs = normalize ( fp . rg * 2.0 - 1.0 ) ; return vec3 ( fs , fr ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",
f:[{a:"define",c:"SMALL_WAVES_FAC",b:["0.2"]},{a:"txt",b:"void fI ( inout vec3 fn , in float fu , in vec3 fp ) { float fw = fv ( DST_NOISE_SCALE_0 * ( fn . xy + DST_NOISE_FREQ_0 * fu ) ) * fv ( DST_NOISE_SCALE_1 * ( fn . yx - DST_NOISE_FREQ_1 * fu ) ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"float fx = WAVES_LENGTH / MAX_SHORE_DIST / M_PI ; float fr = fp . b ; float fy = sqrt ( fr ) ; float fz = max ( fr , DIR_MIN_SHR_FAC ) * sin ( fy / fx + DIR_FREQ * fu ) ; float fA = max ( fv ( DIR_NOISE_SCALE * ( fn . xy + DIR_NOISE_FREQ * fu ) ) , DIR_MIN_NOISE_FAC ) ; fz *= fA ; float fB = WAVES_HEIGHT * mix ( fz , fw , max ( fy , DST_MIN_FAC ) ) ; vec2 fs = fp . rg ; float fC = WAVES_HOR_FAC * fz * max ( MAX_SHORE_DIST / 35.0 * ( 0.05 - fr ) , 0.0 ) ; vec2 fD = fC * fs ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"float fB = WAVES_HEIGHT * fw ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"txt",b:"vec2 fE = 1.0 * ( fn . xy - 0.3 * fu ) ; vec2 fF = 0.7 * ( fn . yx + 0.07 * fu ) ; float fH = fG ( fE ) . x + fG ( fF ) . x - 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"fn . xy += fD ; fH *= fr ;".split(" ")}]}}]},{a:"txt",b:"fB += SMALL_WAVES_FAC * fH ;".split(" ")}]}}]},{a:"txt",b:"fn . z += fB ; }".split(" ")}]}}]},
{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["DEBUG_WIREFRAME"],l:{a:"grp",f:[{a:"txt",b:"if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"txt",b:"vec3 O = a_position ; float fJ = abs ( O . z ) ; vec2 fK = u_camera_eye . xy - mod ( u_camera_eye . xy , fJ ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],
l:{a:"grp",f:[{a:"txt",b:"O . z = WATER_LEVEL ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"O . z = 0.0 ;".split(" ")}]}}]},{a:"txt",b:"O . xy += fK ; vec3 bX = O ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2},"FOAM",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["A","=","a_texcoord",";"]}]}}]},{a:"txt",b:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , u_model_tsr ) ; vec3 bX = aw . O ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"eH = ft ( bX . xy ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DYNAMIC"],l:{a:"grp",f:[{a:"txt",b:"float fL = length ( u_wind ) ; if ( fL == 0.0 ) fL = 1.0 ; float fM = u_time ; fM *= fL ;".split(" ")},{a:"cond",f:[{a:"if",j:["GENERATED_MESH"],l:{a:"grp",f:[{a:"txt",b:"float fN = fJ ; vec3 fO = bX + vec3 ( fN , 0.0 , 0.0 ) ; vec3 fP = bX + vec3 ( 0.0 , fN , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",
o:2},"FOAM",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["eG","=","bX",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 fO = bX + vec3 ( 0.05 , 0.0 , 0.0 ) ; vec3 fP = bX + vec3 ( 0.0 , 0.05 , 0.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SHORE_PARAMS"],l:{a:"grp",f:[{a:"txt",b:"vec3 fQ = ft ( fO . xy ) ; vec3 fR = ft ( fP . xy ) ; fI ( fO , fM , fQ ) ; fI ( fP , fM , fR ) ; fI ( bX , fM , eH ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"fI ( fO , fM , vec3 ( 0.0 ) ) ; fI ( fP , fM , vec3 ( 0.0 ) ) ; fI ( bX , fM , vec3 ( 0.0 ) ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["GENERATED_MESH","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( a_position . z < 0.0 ) { bX . z = WATER_LEVEL - 1.0 ; fO . z = bX . z ; fP . z = bX . z ; }".split(" ")}]}}]},{a:"txt",b:"vec3 eg = normalize ( fO - bX ) ; vec3 V = normalize ( fP - bX ) ; j = normalize ( cross ( eg , V ) ) ; float fS = dot ( j , UP_VECTOR ) ; float aL = clamp ( 0.8 - fS , 0.0 , 1.0 ) ; j = mix ( j , UP_VECTOR , aL ) ;".split(" ")}]}},{a:"elif",j:["GENERATED_MESH",{a:"logic_negative_expr",
o:1}],l:{a:"grp",f:[{a:"txt",b:"vec4 S = R ( a_tbn ) ; j = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"j = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_NORMALMAPS",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DYNAMIC",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["GENERATED_MESH",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ;".split(" ")}]}},
{a:"elif",j:["DYNAMIC",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"k = V ; eF = cross ( j , k ) ;".split(" ")}]}}]},{a:"txt",b:"h = bX ; bT = u_camera_eye - bX ; vec4 bY = vec4 ( ap ( u_view_tsr , bX ) , 1.0 ) ; vec4 f = u_proj_matrix * bY ;".split(" ")},{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"float fT = f . x ; float fU = f . y ; float fV = f . w ; l . x = ( fT + fV ) / 2.0 ; l . y = ( fU + fV ) / 2.0 ; l . z = fV ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFRACTIVE","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"m = - bY . z / u_view_max_depth ;".split(" ")}]}}]},{a:"txt",b:["gl_Position","=","f",";","}"]}]};a["postprocessing/antialiasing.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"AA_METHOD",b:["AA_METHOD_FXAA_LIGHT"]},{a:"var",c:"AA_QUALITY",b:["AA_QUALITY_LOW"]},{a:"include",F:"precision_statement.glslf"},
{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_REDUCE_MIN",b:["(","1.0","/","128.0",")"]},{a:"define",c:"FXAA_REDUCE_MUL",b:["(","1.0","/","8.0",")"]},{a:"define",c:"FXAA_SPAN_MAX",b:["8.0"]},{a:"txt",b:"vec4 fX ( float x , float y ) { vec2 fW = A + vec2 ( x , y ) * u_texel_size ; return GLSL_TEXTURE ( u_color , fW ) ; } vec4 gt ( ) { vec4 fY = fX ( - 1.0 , - 1.0 ) ; vec4 fZ = fX ( 1.0 , - 1.0 ) ; vec4 f_ = fX ( - 1.0 , 1.0 ) ; vec4 gc = fX ( 1.0 , 1.0 ) ; vec4 gd = fX ( 0.0 , 0.0 ) ; float gf = ge ( gd ) ; float gh = ge ( fY ) ; float gi = ge ( fZ ) ; float gj = ge ( f_ ) ; float gk = ge ( gc ) ; float gl = min ( gf , min ( min ( gh , gi ) , min ( gj , gk ) ) ) ; float gm = max ( gf , max ( max ( gh , gi ) , max ( gj , gk ) ) ) ; vec2 bD ; bD . x = - ( ( gh + gi ) - ( gj + gk ) ) ; bD . y = ( ( gh + gj ) - ( gi + gk ) ) ; float gn = max ( ( gh + gi + gj + gk ) * ( 0.25 * FXAA_REDUCE_MUL ) , FXAA_REDUCE_MIN ) ; float go = 1.0 / ( min ( abs ( bD . x ) , abs ( bD . y ) ) + gn ) ; bD = min ( vec2 ( FXAA_SPAN_MAX , FXAA_SPAN_MAX ) , max ( vec2 ( - FXAA_SPAN_MAX , - FXAA_SPAN_MAX ) , bD * go ) ) * u_texel_size ; vec4 gp = 0.5 * ( GLSL_TEXTURE ( u_color , A + bD * ( 1.0 / 3.0 - 0.5 ) ) + GLSL_TEXTURE ( u_color , A + bD * ( 2.0 / 3.0 - 0.5 ) ) ) ; vec4 gq = gp * 0.5 + 0.25 * ( GLSL_TEXTURE ( u_color , A + bD * - 0.5 ) + GLSL_TEXTURE ( u_color , A + bD * 0.5 ) ) ; float gs = ge ( gq ) ; if ( ( gs < gl ) || ( gs > gm ) ) return gp ; else return gq ; }".split(" ")}]}},
{a:"elif",j:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_GREEN_AS_LUMA",b:["1"]},{a:"include",F:"fxaa.glslf"},{a:"cond",f:[{a:"if",j:["AA_QUALITY","AA_QUALITY_HIGH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["39"]},{a:"define",c:"FXAA_QUALITY_SUBPIX",b:["1.00"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD",b:["0.063"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",b:["0.0312"]}]}},{a:"elif",j:["AA_QUALITY","AA_QUALITY_MEDIUM",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["20"]},{a:"define",c:"FXAA_QUALITY_SUBPIX",b:["0.65"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD",b:["0.166"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",b:["0.0625"]}]}},{a:"elif",j:["AA_QUALITY","AA_QUALITY_LOW",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["12"]},{a:"define",c:"FXAA_QUALITY_SUBPIX",b:["0.50"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD",b:["0.166"]},{a:"define",c:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",
b:["0.0833"]}]}}]}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = gt ( ) ;".split(" ")}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 gu = u_texel_size ; GLSL_OUT_FRAG_COLOR = gv ( A , u_color , gu , FXAA_QUALITY_SUBPIX , FXAA_QUALITY_EDGE_THRESHOLD , FXAA_QUALITY_EDGE_THRESHOLD_MIN ) ;".split(" ")}]}}]},{a:"txt",
b:["}"]}]};a["postprocessing/bloom_combine.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"var",c:"BLUR_PASS_NUM",b:["BLUR_PASS_5"]},{a:"txt",b:["uniform","sampler2D","u_main",";"]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_1",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_2",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:["uniform","sampler2D","u_bloom_level_1",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_3",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_2",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_4",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_3",";"]}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_5",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_bloom_level_4",";"]}]}}]},
{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gw = GLSL_TEXTURE ( u_main , A ) ; vec4 gx = vec4 ( 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_1",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_0 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_2",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_1 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",
j:["BLUR_PASS_NUM","BLUR_PASS_3",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_2 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_4",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_3 , A ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BLUR_PASS_NUM","BLUR_PASS_5",{a:"ge_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gx += GLSL_TEXTURE ( u_bloom_level_4 , A ) ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT_FRAG_COLOR = gw + gx ; }".split(" ")}]};
a["postprocessing/coc.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"COC_TYPE",b:["COC_ALL"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform sampler2D u_depth ;".split(" ")},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_COMBINE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D",
"u_coc_fg",";"]}]}}]},{a:"txt",b:"uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_start ; uniform float u_dof_front_end ; uniform float u_dof_rear_start ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; if ( u_dof_dist > 0.0 ) { float eq = gy ( u_depth , A , u_camera_range ) ; eq *= u_view_max_depth ; float gz = 0.0 ;".split(" ")},{a:"cond",
f:[{a:"if",j:["COC_TYPE","COC_COMBINE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 gA = GLSL_TEXTURE ( u_coc_fg , A ) ; float gB = gA . a ;".split(" ")}]}}]},{a:"txt",b:"if ( eq < u_dof_dist ) gz = ( u_dof_dist - eq - u_dof_front_start ) / ( u_dof_front_end - u_dof_front_start ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_FOREGROUND",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"else gz = ( eq - u_dof_dist - u_dof_rear_start ) / ( u_dof_rear_end - u_dof_rear_start ) ;".split(" ")}]}}]},
{a:"txt",b:"gz = clamp ( gz , 0.0 , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_COMBINE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"gz = max ( gz , gB ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COC_TYPE","COC_FOREGROUND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( gz ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz * gz , gz ) ;".split(" ")}]}}]},{a:"txt",b:"} else GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz , 0.0 ) ; }".split(" ")}]};
a["postprocessing/compositing.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform float u_brightness ; uniform float u_contrast ; uniform float u_exposure ; uniform float u_saturation ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gC = GLSL_TEXTURE ( u_color , A ) ; vec3 aQ = gC . rgb ; if ( u_brightness < 0.0 ) aQ = aQ * ( 1.0 + u_brightness ) ; else aQ = aQ + ( ( 1.0 - aQ ) * u_brightness ) ; aQ = ( aQ - 0.5 ) * ( tan ( ( u_contrast + 1.0 ) * M_PI_4 ) ) + 0.5 ; aQ *= u_exposure ; float ds = ge ( vec4 ( aQ , 0.0 ) ) ; aQ = mix ( vec3 ( ds ) , aQ , u_saturation ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , gC . a ) ; }".split(" ")}]};
a["postprocessing/depth_pack.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = er ( clamp ( gy ( u_depth , A , u_camera_range ) , 0.0 , 0.999999 ) ) ; }".split(" ")}]};
a["postprocessing/dof.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"DOF_TYPE",b:["DOF_SIMPLE"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["DOF_TYPE","DOF_BOKEH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform highp sampler2D u_sharp ; uniform highp sampler2D u_blurred1 ; uniform highp sampler2D u_blurred2 ; uniform float u_dof_dist ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_sharp ; uniform sampler2D u_blurred ; uniform sampler2D u_depth ; uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_end ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ;".split(" ")}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gD = GLSL_TEXTURE ( u_sharp , A ) ; if ( u_dof_dist > 0.0 ) {".split(" ")},{a:"cond",f:[{a:"if",
j:["DOF_TYPE","DOF_BOKEH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float gz ; vec4 gE = GLSL_TEXTURE ( u_blurred1 , A ) ; vec4 gF = GLSL_TEXTURE ( u_blurred2 , A ) ; vec4 gG = min ( gE . rgba , gF . rgba ) ; gz = gG . a ; if ( gz > 0.0 ) { gG = vec4 ( gG . rgb / gz , gD . a ) ; GLSL_OUT_FRAG_COLOR = mix ( gD , gG , min ( gz * 5.0 , 1.0 ) ) ; } else GLSL_OUT_FRAG_COLOR = gD ;".split(" ")}]}},{a:"elif",j:["DOF_TYPE","DOF_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float eq = gy ( u_depth , A , u_camera_range ) ; eq *= u_view_max_depth ; float gH ; if ( eq < u_dof_dist ) gH = ( u_dof_dist - eq ) / u_dof_front_end ; else gH = ( eq - u_dof_dist ) / u_dof_rear_end ; gH = clamp ( gH , 0.0 , 1.0 ) ; vec4 gI = GLSL_TEXTURE ( u_blurred , A ) ; GLSL_OUT_FRAG_COLOR = mix ( gD , gI , gH ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT_FRAG_COLOR","=","gD",";"]}]}}]},{a:"txt",b:"} else GLSL_OUT_FRAG_COLOR = gD ; }".split(" ")}]};a["postprocessing/glow.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_src_color ; uniform sampler2D u_glow_mask_small ; uniform sampler2D u_glow_mask_large ; uniform float u_glow_mask_small_coeff ; uniform float u_glow_mask_large_coeff ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gJ = GLSL_TEXTURE ( u_src_color , A ) ; vec4 gK = GLSL_TEXTURE ( u_glow_mask_small , A ) ; vec4 gL = GLSL_TEXTURE ( u_glow_mask_large , A ) ; GLSL_OUT_FRAG_COLOR = gJ ; if ( gL . a != 0.0 ) { float gM = u_glow_mask_large_coeff * gL . a ; gM = clamp ( gM , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gL . rgb / gL . a , gM ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gM ) ; } if ( gK . a != 0.0 ) { float gN = u_glow_mask_small_coeff * gK . a ; gN = clamp ( gN , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gK . rgb / gK . a , gN ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gN ) ; } }".split(" ")}]};
a["postprocessing/god_rays.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"DEPTH_RGBA",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"STEPS_PER_PASS",b:["10.0"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"depth_fetch.glslf"},{a:"include",F:"procedural.glslf"},{a:"include",F:"pack.glslf"},{a:"txt",b:"uniform float u_time ; uniform float u_radial_blur_step ; uniform sampler2D u_input ;".split(" ")},
{a:"cond",f:[{a:"if",j:["DEPTH_RGBA"],l:{a:"grp",f:[{a:"txt",b:["uniform","vec2","u_camera_range",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN float gO ; GLSL_IN vec2 gP ;".split(" ")}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_IN vec4 gQ ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec2 cS = ( gQ . xy - A ) ; float aM = length ( cS ) ; vec2 gR = u_radial_blur_step * cS / aM ; float gS = aM / u_radial_blur_step ; gR *= min ( gS , STEPS_PER_PASS ) / STEPS_PER_PASS ; gS = max ( gS , STEPS_PER_PASS ) ; vec2 gT = A ; float gU = 0.0 ; const int gV = int ( STEPS_PER_PASS ) ; int gW = int ( gS + 0.5 ) ; for ( int cl = 0 ; cl < gV ; cl += 1 ) { if ( cl <= gW ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["DEPTH_RGBA"],l:{a:"grp",f:[{a:"txt",b:"float eq = gy ( u_input , gT , u_camera_range ) ; gU += max ( ( 1.0 - pow ( aM , 0.3 ) ) * step ( 0.9 , eq ) , 0.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 gX = GLSL_TEXTURE ( u_input , gT ) ; gU += cQ ( gX ) ;".split(" ")}]}}]},{a:"txt",b:"} gT += gR ; }".split(" ")},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 b_ = A + gP ; float gY = fG ( vec2 ( 2.5 * ( b_ . x ) , 2.5 * ( b_ . y ) + 1.0 * u_time ) ) . x + 0.75 * fG ( vec2 ( 5.0 * ( b_ . x ) - 0.66 * u_time , 5.0 * ( b_ . y ) + 0.66 * u_time ) ) . x + 0.5 * fv ( vec2 ( 7.5 * ( b_ . x ) + 0.33 * u_time , 7.5 * ( b_ . y ) - 0.33 * u_time ) ) ; gY *= clamp ( 1.2 - sqrt ( 0.2 * aM ) , 0.0 , 1.0 ) * gO ; gU = max ( gY , gU ) ;".split(" ")}]}}]},
{a:"txt",b:"GLSL_OUT_FRAG_COLOR = er ( gU / STEPS_PER_PASS ) ; }".split(" ")}]};a["postprocessing/god_rays.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"DEPTH_RGBA",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"math.glslv"},{a:"txt",b:"uniform mat4 u_view_proj_matrix ; uniform vec3 u_sun_direction ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform vec4 u_camera_quat ; uniform float u_cam_water_depth ;".split(" ")}]}}]},
{a:"txt",b:["GLSL_IN","vec2","a_bb_vertex",";"]},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT float gO ; GLSL_OUT vec2 gP ;".split(" ")}]}}]},{a:"txt",b:"GLSL_OUT vec2 A ; GLSL_OUT vec4 gQ ; void main ( ) { A = a_bb_vertex ; vec3 bD = normalize ( u_sun_direction ) ; gQ = u_view_proj_matrix * vec4 ( bD , 0.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DEPTH_RGBA","WATER_EFFECTS",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",
b:"if ( u_cam_water_depth < 0.0 ) { gO = 1.0 ; vec3 gZ = vec3 ( 0.0 , 1.0 , 0.0 ) ; vec3 g_ = T ( u_camera_quat , gZ ) ; g_ = normalize ( g_ ) ; float ha = dot ( g_ , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; float hb = atan ( g_ . x , g_ . z ) ; gP = vec2 ( - hb , acos ( ha ) ) ; } else { gO = 0.0 ; }".split(" ")}]}}]},{a:"txt",b:"gQ . xy = 0.5 * ( gQ . xy / gQ . w + 1.0 ) ; gQ += 99999.0 * step ( gQ . z , 0.0 ) ; gl_Position = vec4 ( 2.0 * a_bb_vertex . xy - 1.0 , 0.0 , 1.0 ) ; }".split(" ")}]};a["postprocessing/god_rays_combine.glslf"]=
{a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"SAFARI_CANVAS_ALPHA_HACK",b:["0"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"include",F:"pack.glslf"},{a:"txt",b:"uniform sampler2D u_main ; uniform sampler2D u_god_rays ; uniform float u_god_rays_intensity ; uniform vec3 u_sun_intensity ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hc = GLSL_TEXTURE ( u_main , A ) ; vec3 hd = clamp ( u_sun_intensity , 0.4 , 0.8 ) ; bC ( hc . rgb ) ; float he = cQ ( GLSL_TEXTURE ( u_god_rays , A ) ) ; vec3 hf = hc . rgb + u_god_rays_intensity * vec3 ( he ) * hd ; aW ( hf ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SAFARI_CANVAS_ALPHA_HACK"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( hf , max ( 0.01 , hc . a ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( hf , hc . a ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]};a["postprocessing/luminance.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_input ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gw = GLSL_TEXTURE ( u_input , A ) ; float hg = dot ( gw . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( hg ) , 1.0 ) ; }".split(" ")}]};
a["postprocessing/luminance_av.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_input ; uniform float u_mipmap_1x1 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float hh = max ( GLSL_TEXTURE ( u_input , A , u_mipmap_1x1 ) . r , 0.01 ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( hh ) , 1.0 ) ; }".split(" ")}]};a["postprocessing/luminance_truncated.glslf"]={a:"grp",f:[{a:"version",
b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"var",c:"ADAPTIVE_BLOOM",b:["0"]},{a:"txt",b:"uniform sampler2D u_main ; uniform sampler2D u_luminance ; uniform sampler2D u_average_lum ; uniform float u_bloom_edge_lum ; uniform float u_bloom_key ;".split(" ")},{a:"cond",f:[{a:"if",j:["ADAPTIVE_BLOOM",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_average_lum_val",";"]}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["ADAPTIVE_BLOOM"],l:{a:"grp",f:[{a:"txt",b:"float hh = GLSL_TEXTURE ( u_average_lum , vec2 ( 0.5 ) ) . r ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","hh","=","u_average_lum_val",";"]}]}}]},{a:"txt",b:"float hi = GLSL_TEXTURE ( u_luminance , A ) . r ; vec4 aQ = GLSL_TEXTURE ( u_main , A ) ; float hj = hi / hh ; float hk = u_bloom_edge_lum ; GLSL_OUT_FRAG_COLOR = aQ * u_bloom_key * smoothstep ( hk , hk + 1.2 , hj ) ; }".split(" ")}]};a["postprocessing/motion_blur.glslf"]=
{a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_mb_tex_curr ; uniform sampler2D u_mb_tex_accum ; uniform float u_motion_blur_exp ; uniform float u_motion_blur_decay_threshold ; float hl = 0.0042 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hm = GLSL_TEXTURE ( u_mb_tex_curr , A ) ; vec4 hn = GLSL_TEXTURE ( u_mb_tex_accum , A ) ; if ( length ( hm - hn ) > u_motion_blur_decay_threshold ) { vec4 ho = ( 1.0 - u_motion_blur_exp ) * hm + u_motion_blur_exp * hn ; vec4 hp = ho - hn ; vec4 hq = hm - hn ; vec4 cS = min ( max ( abs ( hp ) , vec4 ( hl ) ) , abs ( hq ) ) * sign ( hp ) ; GLSL_OUT_FRAG_COLOR = hn + cS ; } else { GLSL_OUT_FRAG_COLOR = hm ; } }".split(" ")}]};
a["postprocessing/outline.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_outline_src ; uniform sampler2D u_outline_mask ; uniform sampler2D u_outline_mask_blurred ; uniform vec3 u_outline_color ; uniform float u_draw_outline ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hr = GLSL_TEXTURE ( u_outline_src , A ) ; GLSL_OUT_FRAG_COLOR = hr ; if ( u_draw_outline != 0.0 ) { vec4 hs = GLSL_TEXTURE ( u_outline_mask , A ) ; vec4 ht = GLSL_TEXTURE ( u_outline_mask_blurred , A ) ; float hu = ht . a - hs . a ; if ( hu != 0.0 ) { float hv = smoothstep ( 0.0 , 1.0 , ht . a ) ; if ( hs . a == 0.0 ) { vec3 hw = u_outline_color ; aW ( hw ) ; vec4 hx = vec4 ( clamp ( hw , 0.0 , 1.0 ) , 1.0 ) ; GLSL_OUT_FRAG_COLOR = mix ( hr , hx , hv ) ; } } } }".split(" ")}]};
a["postprocessing/performance.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform sampler2D u_color ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = vec4 ( 0.0 ) ; for ( int cl = 0 ; cl < 10 ; cl ++ ) { vec2 hy = vec2 ( fract ( A * vec2 ( cl ) * vec2 ( 1.431 , 3.921 ) ) ) ; aQ += 0.01 * GLSL_TEXTURE ( u_color , hy ) ; } GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};a["postprocessing/postprocessing.glslf"]=
{a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"POST_EFFECT",b:["POST_EFFECT_NONE"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform vec2 u_texel_size ; uniform sampler2D u_color ;".split(" ")},{a:"cond",f:[{a:"if",j:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform int u_tex_number ; uniform vec2 u_delta ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{a:"equal_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:["uniform","float","u_dof_bokeh_intensity",";"]}]}}]},{a:"txt",b:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{a:"cond",f:[{a:"if",j:["POST_EFFECT","POST_EFFECT_NONE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}},{a:"elif",j:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 du = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR . rgb = vec3 ( ( du . r + du . g + du . b ) / 3.0 ) ; GLSL_OUT_FRAG_COLOR . a = 1.0 ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * 0.2270270270 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_GLOW_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.152507 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; GLSL_OUT_FRAG_COLOR = clamp ( GLSL_OUT_FRAG_COLOR , 0.0 , 1.0 ) ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; vec4 hz ; vec4 hA ; float gz ; float hB = u_dof_bokeh_intensity ; aQ = GLSL_TEXTURE ( u_color , A ) ; hz = aQ ; hA = aQ ; gz = aQ . a ; cS = gz * cS ; for ( int cl = 0 ; cl < 12 ; cl += 2 ) { fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hz += aQ ; hA = max ( hA , aQ ) ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hz += aQ ; hA = max ( hA , aQ ) ; } hz /= 13.0 ; GLSL_OUT_FRAG_COLOR = mix ( hz , hA , hB ) ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_ALPHA_BLUR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; vec4 hz ; vec4 hA ; aQ = GLSL_TEXTURE ( u_color , A ) ; hA = max ( hA , aQ ) ; hz = aQ ; hz . a = aQ . a * 0.2270270270 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1945945946 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1216216216 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0540540541 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0162162162 ; GLSL_OUT_FRAG_COLOR = mix ( hz , hA , 0.5 ) ;".split(" ")}]}},
{a:"elif",j:["POST_EFFECT","POST_EFFECT_EXTEND",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 cS = u_texel_size ; vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ ; if ( aQ . a == 0.0 ) { aQ = GLSL_TEXTURE ( u_color , A + cS ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; else { aQ = GLSL_TEXTURE ( u_color , A - cS ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; } }".split(" ")}]}},{a:"elif",j:["POST_EFFECT",
"FLIP_CUBEMAP_COORDS",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float hC = u_delta [ 0 ] ; float hD = u_delta [ 1 ] ; float hE = 1.0 / 3.0 ; float hF = 0.5 ; vec2 hG = vec2 ( hE , hF ) ; if ( u_tex_number == 0 ) { vec2 b_ = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * hG + vec2 ( 2.0 * hE , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , 2.0 * hE + hC ) ; b_ [ 1 ] = max ( b_ [ 1 ] , hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( b_ [ 0 ] , hF - b_ [ 1 ] ) ) ; } else if ( u_tex_number == 1 ) { vec2 b_ = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * hG + vec2 ( 0.0 , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , hF - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hE - b_ [ 0 ] , b_ [ 1 ] ) ) ; } else if ( u_tex_number == 2 ) { vec2 b_ = A * hG + vec2 ( 2.0 * hE , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , 2.0 * hE + hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , 1.0 - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( b_ [ 0 ] , 1.5 - b_ [ 1 ] ) ) ; } else if ( u_tex_number == 3 ) { vec2 b_ = A * hG + vec2 ( hE , 0.0 ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hE + hC ) ; b_ [ 0 ] = min ( b_ [ 0 ] , 2.0 * hE - hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , hF - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( 1.0 - b_ [ 0 ] , b_ [ 1 ] ) ) ; } else if ( u_tex_number == 4 ) { vec2 b_ = A * hG + vec2 ( hE , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hE + hC ) ; b_ [ 0 ] = min ( b_ [ 0 ] , 2.0 * hE - hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , 1.0 - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( b_ [ 0 ] , 3.0 * hF - b_ [ 1 ] ) ) ; } else { vec2 b_ = A * hG + vec2 ( 0.0 , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , 1.0 - hD ) ; b_ [ 1 ] = max ( b_ [ 1 ] , hF + hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hE - b_ [ 0 ] , b_ [ 1 ] ) ) ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]};a["postprocessing/postprocessing.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"std.glsl"},{a:"txt",b:"GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ; void main ( ) { A = 2.0 * a_position ; gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};a["postprocessing/precompute_brdf.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"var",c:"PRECISION",b:["highp"]},
{a:"txt",b:"precision PRECISION sampler2D ; precision PRECISION float ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; float dZ ( int cr , int dV ) { float dW = 1.0 / float ( dV ) ; float dX = 1.0 ; float dY = 0.0 ; for ( int cl = 0 ; cl < 32 ; ++ cl ) { if ( cr > 0 ) { dX = mod ( float ( cr ) , 2.0 ) ; dY += dX * dW ; dW = dW / 2.0 ; cr = int ( float ( cr ) / 2.0 ) ; } } return dY ; } vec2 ea ( int cl , int d_ ) { return vec2 ( float ( cl ) / float ( d_ ) , dZ ( cl , 2 ) ) ; } vec3 eh ( vec2 eb , vec3 d_ , float ec ) { float a = ec * ec ; float by = 2.0 * M_PI * eb . x ; float ed = sqrt ( ( 1.0 - eb . y ) / ( 1.0 + ( a * a - 1.0 ) * eb . y ) ) ; float ee = sqrt ( 1.0 - ed * ed ) ; vec3 ef ; ef . x = cos ( by ) * ee ; ef . y = sin ( by ) * ee ; ef . z = ed ; vec3 bu = abs ( d_ . z ) < 0.999 ? vec3 ( 0.0 , 0.0 , 1.0 ) : vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 V = normalize ( cross ( bu , d_ ) ) ; vec3 eg = cross ( d_ , V ) ; vec3 bB = V * ef . x + eg * ef . y + d_ * ef . z ; return normalize ( bB ) ; } float hK ( float hH , float ec ) { float a = ec ; float hI = ( a * a ) / 2.0 ; float hJ = hH ; float dX = hH * ( 1.0 - hI ) + hI ; return hJ / dX ; } float hN ( vec3 d_ , vec3 ek , vec3 en , float ec ) { float hH = max ( dot ( d_ , ek ) , 0.0 ) ; float eo = max ( dot ( d_ , en ) , 0.0 ) ; float hL = hK ( hH , ec ) ; float hM = hK ( eo , ec ) ; return hM * hL ; } vec2 hU ( float hH , float ec ) { vec3 ek ; ek . x = sqrt ( 1.0 - hH * hH ) ; ek . y = 0.0 ; ek . z = hH ; float cB = 0.0 ; float hO = 0.0 ; vec3 d_ = vec3 ( 0.0 , 0.0 , 1.0 ) ; const int el = 1024 ; for ( int cl = 0 ; cl < el ; ++ cl ) { vec2 eb = ea ( cl , el ) ; vec3 ef = eh ( eb , d_ , ec ) ; vec3 en = normalize ( 2.0 * dot ( ek , ef ) * ef - ek ) ; float eo = max ( en . z , 0.0 ) ; float hP = max ( ef . z , 0.0 ) ; float hQ = max ( dot ( ek , ef ) , 0.0 ) ; if ( eo > 0.0 ) { float hR = hN ( d_ , ek , en , ec ) ; float hS = ( hR * hQ ) / ( hP * hH ) ; float hT = pow ( 1.0 - hQ , 5.0 ) ; cB += ( 1.0 - hT ) * hS ; hO += hT * hS ; } } cB /= float ( el ) ; hO /= float ( el ) ; return vec2 ( cB , hO ) ; } void main ( ) { vec2 hV = hU ( A . x , A . y ) ; GLSL_OUT_FRAG_COLOR = vec4 ( hV , 0.0 , 1.0 ) ; }".split(" ")}]};
a["postprocessing/smaa.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"SMAA_PASS",b:["SMAA_RESOLVE"]},{a:"var",c:"SMAA_REPROJECTION",b:["0"]},{a:"var",c:"SMAA_PREDICATION",b:["0"]},{a:"var",c:"SMAA_DISABLE_CORNER_DETECTION",b:["0"]},{a:"var",c:"AA_METHOD",b:["AA_METHOD_SMAA_ULTRA"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"txt",b:["uniform","sampler2D","u_color",";"]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_RESOLVE",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_color_prev",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_blend",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2},"SMAA_PREDICATION",{a:"logical_and_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform sampler2D u_search_tex ; uniform sampler2D u_area_tex ; uniform vec4 u_subsample_indices ;".split(" ")}]}}]},{a:"txt",b:"uniform vec2 u_texel_size ; GLSL_IN vec2 A ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec4",
"hW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec4 hX ; GLSL_IN vec4 hY ; GLSL_IN vec4 hZ ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec2","h_",";"]}]}}]},{a:"txt",b:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_SMAA_LOW",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.15"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",
b:["1"]},{a:"define",c:"SMAA_DISABLE_CORNER_DETECTION",b:["1"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.1"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["1"]},{a:"define",c:"SMAA_DISABLE_CORNER_DETECTION",b:["1"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_HIGH",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.1"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["0"]},{a:"define",c:"SMAA_MAX_SEARCH_STEPS_DIAG",
b:["8"]},{a:"define",c:"SMAA_CORNER_ROUNDING",b:["25"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.05"]},{a:"define",c:"SMAA_DISABLE_DIAG_DETECTION",b:["0"]},{a:"define",c:"SMAA_MAX_SEARCH_STEPS_DIAG",b:["16"]},{a:"define",c:"SMAA_CORNER_ROUNDING",b:["25"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_THRESHOLD",l:{a:"grp",f:[{a:"define",c:"SMAA_THRESHOLD",b:["0.1"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_DEPTH_THRESHOLD",l:{a:"grp",
f:[{a:"define",c:"SMAA_DEPTH_THRESHOLD",b:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_MAX_SEARCH_STEPS_DIAG",l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS_DIAG",b:["8"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_CORNER_ROUNDING",l:{a:"grp",f:[{a:"define",c:"SMAA_CORNER_ROUNDING",b:["25"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",l:{a:"grp",f:[{a:"define",c:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",b:["2.0"]}]}}]},{a:"cond",f:[{a:"ifndef",
c:"SMAA_PREDICATION",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION_THRESHOLD",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION_THRESHOLD",b:["0.01"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION_SCALE",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION_SCALE",b:["2.0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_PREDICATION_STRENGTH",l:{a:"grp",f:[{a:"define",c:"SMAA_PREDICATION_STRENGTH",b:["0.4"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_REPROJECTION",
l:{a:"grp",f:[{a:"define",c:"SMAA_REPROJECTION",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_REPROJECTION_WEIGHT_SCALE",l:{a:"grp",f:[{a:"define",c:"SMAA_REPROJECTION_WEIGHT_SCALE",b:["30.0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_MAX_SEARCH_STEPS",l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["16"]}]}}]},{a:"define",c:"SMAA_AREATEX_MAX_DISTANCE",b:["16"]},{a:"define",c:"SMAA_AREATEX_MAX_DISTANCE_DIAG",b:["20"]},{a:"define",c:"SMAA_AREATEX_PIXEL_SIZE",b:"( 1.0 / vec2 ( 160.0 , 560.0 ) )".split(" ")},
{a:"define",c:"SMAA_AREATEX_SUBTEX_SIZE",b:["(","1.0","/","7.0",")"]},{a:"define",c:"SMAA_SEARCHTEX_SIZE",b:"vec2 ( 66.0 , 33.0 )".split(" ")},{a:"define",c:"SMAA_SEARCHTEX_PACKED_SIZE",b:"vec2 ( 64.0 , 16.0 )".split(" ")},{a:"define",c:"SMAA_CORNER_ROUNDING_NORM",b:"( float ( SMAA_CORNER_ROUNDING ) / 100.0 )".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 id ( vec2 b_ , sampler2D ia ) { float p = GLSL_TEXTURE ( ia , b_ ) . r ; float ib = GLSL_TEXTURE ( ia , hX . xy ) . r ; float ic = GLSL_TEXTURE ( ia , hX . zw ) . r ; return vec3 ( p , ib , ic ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 ii ( vec2 b_ , sampler2D ie ) { vec3 ig = id ( b_ , ie ) ; vec2 cS = abs ( ig . xx - ig . yz ) ; vec2 ih = step ( SMAA_PREDICATION_THRESHOLD , cS ) ; return SMAA_PREDICATION_SCALE * SMAA_THRESHOLD * ( 1.0 - SMAA_PREDICATION_STRENGTH * ih ) ; }".split(" ")}]}}]},{a:"txt",b:"void im ( bvec2 ij , inout vec2 ik , vec2 il ) { if ( ij . x ) ik . x = il . x ; if ( ij . y ) ik . y = il . y ; } void im ( bvec4 ij , inout vec4 ik , vec4 il ) { im ( ij . xy , ik . xy , il . xy ) ; im ( ij . zw , ik . zw , il . zw ) ; } vec2 io ( vec2 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; } vec4 io ( vec4 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 iA ( vec2 b_ , sampler2D ip".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PREDICATION"],l:{a:"grp",f:[{a:"txt",b:[",","sampler2D","ie"]}]}}]},{a:"txt",b:[")","{"]},{a:"cond",f:[{a:"if",j:["SMAA_PREDICATION"],l:{a:"grp",f:[{a:"txt",b:"vec2 iq = ii ( b_ , ie ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 iq = vec2 ( SMAA_THRESHOLD , SMAA_THRESHOLD ) ;".split(" ")}]}}]},{a:"txt",
b:"vec3 ir = vec3 ( 0.2126 , 0.7152 , 0.0722 ) ; float en = dot ( GLSL_TEXTURE ( ip , b_ ) . rgb , ir ) ; float is = dot ( GLSL_TEXTURE ( ip , hX . xy ) . rgb , ir ) ; float it = dot ( GLSL_TEXTURE ( ip , hX . zw ) . rgb , ir ) ; vec4 cS ; cS . xy = abs ( en - vec2 ( is , it ) ) ; vec2 ih = step ( iq , cS . xy ) ; if ( dot ( ih , vec2 ( 1.0 , 1.0 ) ) == 0.0 ) discard ; float iu = dot ( GLSL_TEXTURE ( ip , hY . xy ) . rgb , ir ) ; float iv = dot ( GLSL_TEXTURE ( ip , hY . zw ) . rgb , ir ) ; cS . zw = abs ( en - vec2 ( iu , iv ) ) ; vec2 iw = max ( cS . xy , cS . zw ) ; float ix = dot ( GLSL_TEXTURE ( ip , hZ . xy ) . rgb , ir ) ; float iy = dot ( GLSL_TEXTURE ( ip , hZ . zw ) . rgb , ir ) ; cS . zw = abs ( vec2 ( is , it ) - vec2 ( ix , iy ) ) ; iw = max ( iw . xy , cS . zw ) ; float iz = max ( iw . x , iw . y ) ; ih . xy *= step ( iz , SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR * cS . xy ) ; return ih ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_DIAG_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec2 iC ( vec2 iB ) { iB . r = iB . r * abs ( 5.0 * iB . r - 5.0 * 0.75 ) ; return io ( iB ) ; } vec4 iC ( vec4 iB ) { iB . rb = iB . rb * abs ( 5.0 * iB . rb - 5.0 * 0.75 ) ; return io ( iB ) ; } vec2 iE ( sampler2D iD , vec2 b_ , vec2 bD , out vec2 iB ) { vec4 fW = vec4 ( b_ , - 1.0 , 1.0 ) ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS_DIAG ; cl ++ ) { if ( fW . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && fW . w > 0.9 ) { fW . xyz += t * vec3 ( bD , 1.0 ) ; iB = GLSL_TEXTURE ( iD , fW . xy , 0.0 ) . rg ; fW . w = dot ( iB , vec2 ( 0.5 , 0.5 ) ) ; } } return fW . zw ; } vec2 iF ( sampler2D iD , vec2 b_ , vec2 bD , out vec2 iB ) { vec4 fW = vec4 ( b_ , - 1.0 , 1.0 ) ; fW . x += 0.25 * u_texel_size . x ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS_DIAG ; cl ++ ) { if ( fW . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && fW . w > 0.9 ) { fW . xyz = t * vec3 ( bD , 1.0 ) + fW . xyz ; iB = GLSL_TEXTURE ( iD , fW . xy , 0.0 ) . rg ; iB = iC ( iB ) ; fW . w = dot ( iB , vec2 ( 0.5 , 0.5 ) ) ; } } return fW . zw ; } vec2 iH ( sampler2D iG , vec2 aM , vec2 iB , float fI ) { vec2 b_ = vec2 ( SMAA_AREATEX_MAX_DISTANCE_DIAG , SMAA_AREATEX_MAX_DISTANCE_DIAG ) * iB + aM ; b_ = SMAA_AREATEX_PIXEL_SIZE * b_ + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; b_ . x += 0.5 ; b_ . y += SMAA_AREATEX_SUBTEX_SIZE * fI ; return GLSL_TEXTURE ( iG , b_ , 0.0 ) . rg ; } vec2 iM ( sampler2D iD , sampler2D iG , vec2 b_ , vec2 iB , vec4 iI ) { vec2 ir = vec2 ( 0.0 , 0.0 ) ; vec4 dz ; vec2 iJ ; if ( iB . r > 0.0 ) { dz . xz = iE ( iD , b_ , vec2 ( - 1.0 , 1.0 ) , iJ ) ; dz . x += float ( iJ . y > 0.9 ) ; } else dz . xz = vec2 ( 0.0 , 0.0 ) ; dz . yw = iE ( iD , b_ , vec2 ( 1.0 , - 1.0 ) , iJ ) ; if ( dz . x + dz . y > 2.0 ) { vec4 iK = vec4 ( - dz . x + 0.25 , dz . x , dz . y , - dz . y - 0.25 ) * u_texel_size . xyxy + b_ . xyxy ; vec4 du ; du . xy = GLSL_TEXTURE ( iD , iK . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . rg ; du . zw = GLSL_TEXTURE ( iD , iK . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . rg ; du . yxwz = iC ( du . xyzw ) ; vec2 iL = vec2 ( 2.0 , 2.0 ) * du . xz + du . yw ; im ( bvec2 ( step ( 0.9 , dz . zw ) ) , iL , vec2 ( 0.0 , 0.0 ) ) ; ir += iH ( iG , dz . xy , iL , iI . z ) ; } dz . xz = iF ( iD , b_ , vec2 ( - 1 , - 1 ) , iJ ) ; if ( GLSL_TEXTURE ( iD , b_ + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r > 0.0 ) { dz . yw = iF ( iD , b_ , vec2 ( 1 , 1 ) , iJ ) ; dz . y += float ( iJ . y > 0.9 ) ; } else dz . yw = vec2 ( 0.0 , 0.0 ) ; if ( dz . x + dz . y > 2.0 ) { vec4 iK = vec4 ( - dz . x , - dz . x , dz . y , dz . y ) * u_texel_size . xyxy + b_ . xyxy ; vec4 du ; du . x = GLSL_TEXTURE ( iD , iK . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . g ; du . y = GLSL_TEXTURE ( iD , iK . xy + u_texel_size * vec2 ( 0 , - 1 ) , 0.0 ) . r ; du . zw = GLSL_TEXTURE ( iD , iK . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . gr ; vec2 iL = vec2 ( 2.0 , 2.0 ) * du . xz + du . yw ; im ( bvec2 ( step ( 0.9 , dz . zw ) ) , iL , vec2 ( 0 , 0 ) ) ; ir += iH ( iG , dz . xy , iL , iI . w ) . gr ; } return ir ; }".split(" ")}]}}]},
{a:"txt",b:"float iP ( sampler2D iN , vec2 iB , float fI ) { vec2 hG = SMAA_SEARCHTEX_SIZE * vec2 ( 0.5 , - 1.0 ) ; vec2 iO = SMAA_SEARCHTEX_SIZE * vec2 ( fI , 1.0 ) ; hG += vec2 ( - 1.0 , 1.0 ) ; iO += vec2 ( 0.5 , - 0.5 ) ; hG *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; iO *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; return GLSL_TEXTURE ( iN , hG * iB + iO , 0.0 ) . r ; } float iQ ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 0.0 , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . x > iJ && iB . g > 0.8281 && iB . r == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = - vec2 ( 2.0 , 0.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB , 0.0 ) + 3.25 ; return u_texel_size . x * fI + b_ . x ; } float iR ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 0.0 , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . x < iJ && iB . g > 0.8281 && iB . r == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = vec2 ( 2.0 , 0.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB , 0.5 ) + 3.25 ; return - u_texel_size . x * fI + b_ . x ; } float iS ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 1.0 , 0.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . y > iJ && iB . r > 0.8281 && iB . g == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = - vec2 ( 0.0 , 2.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB . gr , 0.0 ) + 3.25 ; return u_texel_size . y * fI + b_ . y ; } float iT ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 1.0 , 0.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . y < iJ && iB . r > 0.8281 && iB . g == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = vec2 ( 0.0 , 2.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB . gr , 0.5 ) + 3.25 ; return - u_texel_size . y * fI + b_ . y ; } vec2 iW ( sampler2D iG , vec2 aM , float iU , float iV , float fI ) { vec2 b_ = vec2 ( SMAA_AREATEX_MAX_DISTANCE , SMAA_AREATEX_MAX_DISTANCE ) * io ( 4.0 * vec2 ( iU , iV ) ) + aM ; b_ = SMAA_AREATEX_PIXEL_SIZE * b_ + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; b_ . y = SMAA_AREATEX_SUBTEX_SIZE * fI + b_ . y ; return GLSL_TEXTURE ( iG , b_ , 0.0 ) . rg ; } void iZ ( sampler2D iD , inout vec2 ir , vec4 b_ , vec2 dz ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_CORNER_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec2 iX = step ( dz . xy , dz . yx ) ; vec2 iY = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * iX ; iY /= iX . x + iX . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . r ; aL . x -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . r ; aL . y -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( 0 , - 2 ) , 0.0 ) . r ; aL . y -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( 1 , - 2 ) , 0.0 ) . r ; ir *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:"} void i_ ( sampler2D iD , inout vec2 ir , vec4 b_ , vec2 dz ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_CORNER_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"vec2 iX = step ( dz . xy , dz . yx ) ; vec2 iY = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * iX ; iY /= iX . x + iX . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . g ; aL . x -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . g ; aL . y -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( - 2 , 0 ) , 0.0 ) . g ; aL . y -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( - 2 , 1 ) , 0.0 ) . g ; ir *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 jc ( vec2 b_ , vec2 ja , sampler2D iD , sampler2D iG , sampler2D iN , vec4 iI ) { vec4 ir = vec4 ( 0.0 , 0.0 , 0.0 , 0.0 ) ; vec2 iB = GLSL_TEXTURE ( iD , b_ ) . rg ; if ( iB . g > 0.0 ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_DIAG_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"ir . rg = iM ( iD , iG , b_ , iB , iI ) ; if ( ir . r == - ir . g ) {".split(" ")}]}}]},
{a:"txt",b:"vec2 dz ; vec3 iK ; iK . x = iQ ( iD , iN , hX . xy , hZ . x ) ; iK . y = hY . y ; dz . x = iK . x ; float iU = GLSL_TEXTURE ( iD , iK . xy , 0.0 ) . r ; iK . z = iR ( iD , iN , hX . zw , hZ . y ) ; dz . y = iK . z ; dz = abs ( io ( dz / u_texel_size . xx - ja . xx ) ) ; vec2 jb = sqrt ( dz ) ; float iV = GLSL_TEXTURE ( iD , iK . zy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r ; ir . rg = iW ( iG , jb , iU , iV , iI . y ) ; iK . y = b_ . y ; iZ ( iD , ir . rg , iK . xyzy , dz ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_DISABLE_DIAG_DETECTION",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"} else iB . r = 0.0 ;".split(" ")}]}}]},{a:"txt",b:"} if ( iB . r > 0.0 ) { vec2 dz ; vec3 iK ; iK . y = iS ( iD , iN , hY . xy , hZ . z ) ; iK . x = hX . x ; dz . x = iK . y ; float iU = GLSL_TEXTURE ( iD , iK . xy , 0.0 ) . g ; iK . z = iT ( iD , iN , hY . zw , hZ . w ) ; dz . y = iK . z ; dz = abs ( io ( dz / u_texel_size . yy - ja . yy ) ) ; vec2 jb = sqrt ( dz ) ; float iV = GLSL_TEXTURE ( iD , iK . xz + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . g ; ir . ba = iW ( iG , jb , iU , iV , iI . x ) ; iK . x = b_ . x ; i_ ( iD , ir . ba , iK . xyxz , dz ) ; } return ir ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 jl ( vec2 b_ , sampler2D ip , sampler2D jd".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","sampler2D","je"]}]}}]},{a:"txt",b:") { vec4 a ; a . x = GLSL_TEXTURE ( jd , hW . xy ) . a ; a . y = GLSL_TEXTURE ( jd , hW . zw ) . g ; a . wz = GLSL_TEXTURE ( jd , b_ ) . xz ; if ( dot ( a , vec4 ( 1.0 , 1.0 , 1.0 , 1.0 ) ) < 1e-5 ) { vec4 aQ = GLSL_TEXTURE ( ip , b_ , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 jf = GLSL_TEXTURE ( je , A ) ; vec2 dl = 2.0 * jg ( jf ) - 1.0 ; aQ . a = sqrt ( 2.0 * length ( dl ) ) ;".split(" ")}]}}]},{a:"txt",b:"return aQ ; } else { bool cj = max ( a . x , a . z ) > max ( a . y , a . w ) ; vec4 jh = vec4 ( 0.0 , a . y , 0.0 , a . w ) ; vec2 ji = a . yw ; im ( bvec4 ( cj , cj , cj , cj ) , jh , vec4 ( a . x , 0.0 , a . z , 0.0 ) ) ; im ( bvec2 ( cj , cj ) , ji , a . xz ) ; ji /= dot ( ji , vec2 ( 1.0 , 1.0 ) ) ; vec4 jj = jh * vec4 ( u_texel_size , - u_texel_size ) + b_ . xyxy ; vec4 aQ = ji . x * GLSL_TEXTURE ( ip , jj . xy , 0.0 ) ; aQ += ji . y * GLSL_TEXTURE ( ip , jj . zw , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 jf = GLSL_TEXTURE ( je , jj . xy ) ; vec2 jk = 2.0 * jg ( jf ) - 1.0 ; vec2 dl = ji . x * jk ; jf = GLSL_TEXTURE ( je , jj . zw ) ; jk = 2.0 * jg ( jf ) - 1.0 ; dl += ji . y * jk ; aQ . a = sqrt ( 2.0 * length ( dl ) ) ;".split(" ")}]}}]},{a:"txt",b:["return","aQ",";","}","}"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_RESOLVE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 jq ( vec2 b_ , sampler2D jm , sampler2D jn".split(" ")},
{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","sampler2D","je"]}]}}]},{a:"txt",b:[")","{"]},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 jf = GLSL_TEXTURE ( je , A ) ; vec2 dl ; dl = 2.0 * jg ( jf ) - 1.0 ; vec4 jo = GLSL_TEXTURE ( jm , b_ ) ; vec4 jp = GLSL_TEXTURE ( jn , b_ - dl ) ; float cS = abs ( jo . a * jo . a - jp . a * jp . a ) / 2.0 ; float cp = 0.5 * clamp ( 1.0 - sqrt ( cS ) * SMAA_REPROJECTION_WEIGHT_SCALE , 0.0 , 1.0 ) ; vec4 aQ = mix ( jo , jp , cp ) ; aQ . a = 1.0 ; return aQ ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 jo = GLSL_TEXTURE ( jm , b_ ) ; vec4 jp = GLSL_TEXTURE ( jn , b_ ) ; return mix ( jo , jp , 0.5 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = vec4 ( iA ( A , u_color".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PREDICATION"],l:{a:"grp",f:[{a:"txt",b:[",","u_predication_tex"]}]}}]},{a:"txt",b:") , 0.0 , 0.0 ) ;".split(" ")}]}},
{a:"elif",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = jc ( A , h_ , u_color , u_area_tex , u_search_tex , u_subsample_indices ) ;".split(" ")}]}},{a:"elif",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = jl ( A , u_color , u_blend".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","u_velocity_tex"]}]}}]},{a:"txt",b:[")",";"]}]}},{a:"elif",j:["SMAA_PASS",
"SMAA_RESOLVE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = vec4 ( jq ( A , u_color , u_color_prev".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_REPROJECTION"],l:{a:"grp",f:[{a:"txt",b:[",","u_velocity_tex"]}]}}]},{a:"txt",b:[")",")",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 aQ = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}}]},{a:"txt",b:["GLSL_OUT_FRAG_COLOR","=","aQ",";","}"]}]};a["postprocessing/smaa.glslv"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",
b:["highp"]},{a:"var",c:"SMAA_PASS",b:["SMAA_RESOLVE"]},{a:"var",c:"AA_METHOD",b:["AA_METHOD_SMAA_LOW"]},{a:"include",F:"std.glsl"},{a:"txt",b:"uniform PRECISION vec2 u_texel_size ; GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec4","hW",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT vec4 hX ; GLSL_OUT vec4 hY ; GLSL_OUT vec4 hZ ;".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_OUT","vec2","h_",";"]}]}}]},{a:"cond",f:[{a:"if",j:["AA_METHOD","AA_METHOD_SMAA_LOW",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["4"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["8"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_HIGH",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["16"]}]}},{a:"elif",j:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["32"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"SMAA_MAX_SEARCH_STEPS",l:{a:"grp",f:[{a:"define",c:"SMAA_MAX_SEARCH_STEPS",b:["16"]}]}}]},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"void jr ( vec2 b_ ) { hX = u_texel_size . xyxy * vec4 ( - 1.0 , 0.0 , 0.0 , - 1.0 ) + b_ . xyxy ; hY = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + b_ . xyxy ; hZ = u_texel_size . xyxy * vec4 ( - 2.0 , 0.0 , 0.0 , - 2.0 ) + b_ . xyxy ; }".split(" ")}]}},
{a:"elif",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"void js ( vec2 b_ , out vec2 ja ) { ja = b_ / u_texel_size ; hX = u_texel_size . xyxy * vec4 ( - 0.25 , - 0.125 , 1.25 , - 0.125 ) + b_ . xyxy ; hY = u_texel_size . xyxy * vec4 ( - 0.125 , - 0.25 , - 0.125 , 1.25 ) + b_ . xyxy ; hZ = u_texel_size . xxyy * vec4 ( - 2.0 , 2.0 , - 2.0 , 2.0 ) * float ( SMAA_MAX_SEARCH_STEPS ) + vec4 ( hX . xz , hY . yw ) ; }".split(" ")}]}},{a:"elif",j:["SMAA_PASS",
"SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"void jt ( vec2 b_ ) { hW = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + b_ . xyxy ; }".split(" ")}]}}]},{a:"txt",b:"void main ( ) { A = 2.0 * a_position ;".split(" ")},{a:"cond",f:[{a:"if",j:["SMAA_PASS","SMAA_EDGE_DETECTION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["jr","(","A",")",";"]}]}},{a:"elif",j:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"js ( A , h_ ) ;".split(" ")}]}},
{a:"elif",j:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["jt","(","A",")",";"]}]}}]},{a:"txt",b:"gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};a["postprocessing/ssao.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SSAO_WHITE",b:["0"]},{a:"var",c:"SSAO_QUALITY",b:["SSAO_QUALITY_8"]},{a:"var",c:"SSAO_HEMISPHERE",b:["0"]},{a:"txt",b:["precision","PRECISION","sampler2D",
";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"depth_fetch.glslf"},{a:"txt",b:"uniform sampler2D u_color ; uniform sampler2D u_depth ; uniform sampler2D u_ssao_special_tex ; uniform vec2 u_camera_range ; uniform vec2 u_texel_size ; uniform float u_ssao_radius_increase ; uniform float u_ssao_influence ; uniform float u_ssao_dist_factor ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; float ju ( in vec2 fW ) { return gy ( u_depth , fW , u_camera_range ) ; } void main ( ) { vec3 gC = GLSL_TEXTURE ( u_color , A ) . rgb ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SSAO_WHITE"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( gC , 1.0 ) ; return ;".split(" ")}]}}]},{a:"txt",b:"vec3 jv = normalize ( 2.0 * GLSL_TEXTURE ( u_ssao_special_tex , A * 0.25 / u_texel_size ) . rgb - 1.0 ) ; float eq = ju ( A ) ; float jw = eq * ( u_camera_range . y - u_camera_range . x ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_QUALITY","SSAO_QUALITY_8",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 8.0 ; const int jy = 1 ;".split(" ")}]}},
{a:"elif",j:["SSAO_QUALITY","SSAO_QUALITY_16",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 16.0 ; const int jy = 2 ;".split(" ")}]}},{a:"elif",j:["SSAO_QUALITY","SSAO_QUALITY_24",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 24.0 ; const int jy = 3 ;".split(" ")}]}},{a:"elif",j:["SSAO_QUALITY","SSAO_QUALITY_32",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float jx = 32.0 ; const int jy = 4 ;".split(" ")}]}}]},{a:"txt",b:"float jz = u_ssao_radius_increase * 0.001 ; const float jA = 1.0 + 2.4 / jx ; float jB = 0.0 ; for ( int cl = 0 ; cl < jy ; cl ++ ) for ( int x = - 1 ; x <= 1 ; x += 2 ) for ( int y = - 1 ; y <= 1 ; y += 2 ) for ( int z = - 1 ; z <= 1 ; z += 2 ) { vec3 jC = reflect ( normalize ( vec3 ( x , y , z ) ) , jv ) * ( jz *= jA ) ; vec3 jD = vec3 ( A , jw ) ; jD += vec3 ( jC . xy , jC . z * jw * 2.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SSAO_HEMISPHERE"],l:{a:"grp",f:[{a:"txt",b:"jD . z -= 1.4 * ( jD . z - jw ) * step ( jw , jD . z ) ;".split(" ")}]}}]},{a:"txt",b:"float jE = ju ( jD . xy ) * ( u_camera_range . y - u_camera_range . x ) ; float jF = clamp ( ( jw - jE ) / jE , 0.0 , 1.0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_HEMISPHERE"],l:{a:"grp",f:[{a:"txt",b:"jB += mix ( 1.0 , jF , step ( jE , jD . z ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"jB += mix ( step ( jD . z , jE ) , 0.5 , jF ) ;".split(" ")}]}}]},
{a:"txt",b:"} jB = jB / jx ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_HEMISPHERE"],l:{a:"grp",f:[{a:"txt",b:"jB = clamp ( jB * jB + 0.6 * jB , 0.0 , 1.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"jB = clamp ( jB * jB + jB , 0.0 , 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:"float jG = u_ssao_influence * ( 1.0 - u_ssao_dist_factor * eq ) ; jB = mix ( 1.0 , jB , jG ) ; GLSL_OUT_FRAG_COLOR = vec4 ( gC , jB ) ; }".split(" ")}]};a["postprocessing/ssao_blur.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},
{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SSAO_BLUR_DEPTH",b:["0"]},{a:"txt",b:["precision","PRECISION","sampler2D",";"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"include",F:"depth_fetch.glslf"}]}}]},{a:"txt",b:"uniform sampler2D u_ssao_mask ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",
b:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; uniform float u_ssao_blur_discard_value ; float ju ( in vec2 fW ) { return gy ( u_depth , fW , u_camera_range ) ; }".split(" ")}]}}]},{a:"txt",b:"void main ( ) { float jH = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",b:"float jI = ju ( A ) ; float cp = 0.0 ; float jJ = u_ssao_blur_discard_value * 100.0 ;".split(" ")}]}}]},{a:"txt",b:"vec2 jK = vec2 ( - 2.0 ) ; for ( int cl = 0 ; cl < 4 ; ++ cl ) { for ( int jL = 0 ; jL < 4 ; ++ jL ) { vec2 fI = ( jK + vec2 ( float ( cl ) , float ( jL ) ) ) * u_texel_size ; float jM = GLSL_TEXTURE ( u_ssao_mask , A + fI ) . a ;".split(" ")},
{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",b:"float jN = ju ( A + fI ) ; float jO = 1.0 - clamp ( abs ( jN - jI ) * jJ , 0.0 , 1.0 ) ; jH += jM * jO ; cp += jO ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["jH","+=","jM",";"]}]}}]},{a:"txt",b:["}","}"]},{a:"cond",f:[{a:"if",j:["SSAO_BLUR_DEPTH"],l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , jH / cp ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , jH / 16.0 ) ;".split(" ")}]}}]},
{a:"txt",b:["}"]}]};a["postprocessing/stereo.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"var",c:"ANAGLYPH",b:["0"]},{a:"var",c:"SIDEBYSIDE",b:["0"]},{a:"var",c:"EPSILON",b:["0.000001"]},{a:"var",c:"DISTOR_SCALE",b:["0.8"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"txt",b:"uniform sampler2D u_sampler_left ; uniform sampler2D u_sampler_right ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{a:"cond",f:[{a:"if",j:["ANAGLYPH",{a:"logic_negative_expr",o:1},"SIDEBYSIDE",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"uniform int u_enable_hmd_stereo ; uniform vec4 u_distortion_params ; uniform vec4 u_chromatic_aberration_coefs ; void jX ( vec2 b_ , vec2 ao , float df , sampler2D jP ) { vec2 bz = ( b_ - ao ) * 4.0 * u_texel_size [ 0 ] / u_texel_size [ 1 ] / df ; float jQ = bz . x * bz . x + bz . y * bz . y ; vec2 jR = bz * ( 1.0 + u_distortion_params [ 0 ] * jQ + u_distortion_params [ 1 ] * jQ * jQ ) ; vec2 jS = jR * 0.5 / ( 1.0 + u_distortion_params [ 0 ] + u_distortion_params [ 1 ] ) ; if ( length ( u_chromatic_aberration_coefs ) > 0.0 ) { vec2 jT = jS * ( 1.0 + u_chromatic_aberration_coefs [ 0 ] + jQ * u_chromatic_aberration_coefs [ 1 ] ) + 0.5 ; vec2 jU = jS + 0.5 ; vec2 jV = jS * ( 1.0 + u_chromatic_aberration_coefs [ 2 ] + jQ * u_chromatic_aberration_coefs [ 3 ] ) + 0.5 ; if ( clamp ( jV , 0.0 , 1.0 ) != jV ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { vec4 jW = GLSL_TEXTURE ( jP , jU ) ; GLSL_OUT_FRAG_COLOR [ 0 ] = GLSL_TEXTURE ( jP , jT ) . x ; GLSL_OUT_FRAG_COLOR [ 1 ] = jW . y ; GLSL_OUT_FRAG_COLOR [ 2 ] = GLSL_TEXTURE ( jP , jV ) . z ; GLSL_OUT_FRAG_COLOR [ 3 ] = jW . w ; } } else { jS += 0.5 ; if ( clamp ( jS , 0.0 , 1.0 ) != jS ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( jP , jS ) ; } } }".split(" ")}]}}]},
{a:"txt",b:["void","main","(",")","{"]},{a:"cond",f:[{a:"if",j:["ANAGLYPH"],l:{a:"grp",f:[{a:"txt",b:"vec4 jY = GLSL_TEXTURE ( u_sampler_left , A ) ; vec4 jZ = GLSL_TEXTURE ( u_sampler_right , A ) ; vec3 j_ = vec3 ( jY [ 0 ] , jY [ 1 ] , jY [ 2 ] ) ; bC ( j_ ) ; vec3 ka = vec3 ( jZ [ 0 ] , jZ [ 1 ] , jZ [ 2 ] ) ; bC ( ka ) ; mat3 kb = mat3 ( 0.437 , - 0.062 , - 0.048 , 0.449 , - 0.062 , - 0.050 , 0.164 , - 0.024 , - 0.017 ) ; mat3 bv = mat3 ( - 0.011 , 0.377 , - 0.026 , - 0.032 , 0.761 , - 0.093 , - 0.007 , 0.009 , 1.234 ) ; vec3 aQ = clamp ( kb * j_ , 0.0 , 1.0 ) + clamp ( bv * ka , 0.0 , 1.0 ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , jY [ 3 ] + jZ [ 3 ] ) ;".split(" ")}]}},
{a:"elif",j:["SIDEBYSIDE"],l:{a:"grp",f:[{a:"txt",b:"if ( A [ 0 ] < 0.5 ) { vec2 b_ = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , b_ ) ; } else { vec2 b_ = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_right , b_ ) ; }".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"if ( u_enable_hmd_stereo != 0 ) { if ( abs ( u_distortion_params [ 0 ] ) > EPSILON || abs ( u_distortion_params [ 1 ] ) > EPSILON ) if ( A [ 0 ] < 0.5 ) { vec2 b_ = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 - ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float df = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; jX ( b_ , ao , df , u_sampler_left ) ; } else { vec2 b_ = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 + ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float df = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; jX ( b_ , ao , df , u_sampler_right ) ; } else if ( A [ 0 ] < 0.5 ) { vec2 b_ = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , b_ ) ; } else { vec2 b_ = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_right , b_ ) ; } } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , A ) ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]};a["postprocessing/velocity.glslf"]={a:"grp",f:[{a:"version",b:["GLSL_VERSION"]},{a:"include",F:"precision_statement.glslf"},{a:"include",F:"std.glsl"},{a:"include",F:"pack.glslf"},{a:"txt",b:"uniform sampler2D u_depth ; uniform mat4 u_view_proj_inverse ; uniform mat4 u_view_proj_prev ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float eq = GLSL_TEXTURE ( u_depth , A ) . x ; vec4 kc = vec4 ( A * 2.0 - 1.0 , 2.0 * eq - 1.0 , 1.0 ) ; vec4 cy = u_view_proj_inverse * kc ; vec4 kd = cy / cy . w ; vec4 ke = u_view_proj_prev * kd ; ke /= ke . w ; vec2 dl = ( kc . xy - ke . xy ) / 4.0 + 0.5 ; dl = clamp ( dl , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR = er ( dl ) ; }".split(" ")}]};
a["include/blending.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"BLENDING_GLSLF",l:{a:"grp",f:[{a:"define",c:"BLENDING_GLSLF",b:[""]},{a:"txt",b:"vec3 kf ( vec3 rgb ) { vec4 hI = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hI . wz ) , vec4 ( rgb . gb , hI . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dz = q . x - min ( q . w , q . y ) ; float iB = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dz + iB ) ) , dz / ( q . x + iB ) , q . x ) ; } vec3 kh ( vec3 kg ) { vec4 hI = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kg . r , kg . r , kg . r ) + hI . xyz ) * 6.0 - hI . www ) ; return kg . b * mix ( hI . xxx , clamp ( p - hI . xxx , _0_0 , _1_0 ) , kg . g ) ; } vec3 kl ( vec3 ki , vec3 kj , float kk ) { return mix ( ki , kj , kk ) ; } vec3 km ( vec3 ki , vec3 kj , float kk ) { return kk * ki + kj ; } vec3 kn ( vec3 ki , vec3 kj , float kk ) { return kj - kk * ki ; } vec3 kp ( vec3 ki , vec3 kj , float kk ) { float ko = _1_0 - kk ; return ( vec3 ( ko ) + kk * ki ) * kj ; } vec3 kq ( vec3 ki , vec3 kj , float kk ) { vec3 ko = vec3 ( _1_0 - kk ) ; return vec3 ( _1_0 ) - ( ko + kk * ( vec3 ( _1_0 ) - ki ) ) * ( vec3 ( _1_0 ) - kj ) ; } vec3 kr ( vec3 ki , vec3 kj , float kk ) { vec3 ko = vec3 ( _1_0 - kk ) ; return mix ( kj * ( ko + 2.0 * kk * ki ) , vec3 ( _1_0 ) - ( ko + 2.0 * kk * ( vec3 ( _1_0 ) - ki ) ) * ( vec3 ( _1_0 ) - kj ) , step ( 0.5 , kj ) ) ; } vec3 ks ( vec3 ki , vec3 kj , float kk ) { return mix ( kj , abs ( ki - kj ) , kk ) ; } vec3 kt ( vec3 ki , vec3 kj , float kk ) { return mix ( kj , kj / ( ki + step ( ki , vec3 ( _0_0 ) ) ) , kk ) ; } vec3 ku ( vec3 ki , vec3 kj , float kk ) { return mix ( kj , min ( ki , kj ) , kk ) ; } vec3 kv ( vec3 ki , vec3 kj , float kk ) { return max ( kk * ki , kj ) ; } vec3 kz ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( kj ) ; if ( kw . y != _0_0 ) { vec3 kx = kf ( ki ) ; vec3 ky = kh ( vec3 ( kw . x , kx . yz ) ) ; return mix ( ki , ky , kk ) ; } return ki ; } vec3 kA ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( ki ) ; if ( kw . y != _0_0 ) { vec3 kx = kf ( kj ) ; return kh ( vec3 ( kw . x , mix ( kw . y , kx . y , kk ) , kw . z ) ) ; } return ki ; } vec3 kB ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( ki ) ; vec3 kx = kf ( kj ) ; return kh ( vec3 ( kw . xy , mix ( kw . z , kx . z , kk ) ) ) ; } vec3 kC ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( kj ) ; if ( kw . y != _0_0 ) { vec3 kx = kf ( ki ) ; vec3 ky = kh ( vec3 ( kw . xy , kx . z ) ) ; return mix ( ki , ky , kk ) ; } return ki ; } vec3 kE ( vec3 ki , vec3 kj , float kk ) { vec3 kD = vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - kj ) * ( vec3 ( _1_0 ) - ki ) ; return mix ( ki , ( ( vec3 ( _1_0 ) - ki ) * kj * ki ) + ki * kD , kk ) ; } vec3 kF ( vec3 ki , vec3 kj , float kk ) { return ki + kk * ( 2.0 * kj - _1_0 ) ; } float kJ ( float kG , float kH , float kk , float kI ) { float ko = _1_0 - kI ; return ( ko + kk * kG ) * kH ; } float kK ( float kG , float kH , float kk , float kI ) { float ko = _1_0 - kI ; return _1_0 - ( ko + kk * ( _1_0 - kG ) ) * ( _1_0 - kH ) ; } float kL ( float kG , float kH , float kk , float kI ) { float ko = _1_0 - kI ; return mix ( kH * ( ko + 2.0 * kk * kG ) , _1_0 - ( ko + 2.0 * kk * ( _1_0 - kG ) ) * ( _1_0 - kH ) , step ( 0.5 , kH ) ) ; }".split(" ")}]}}]}]};
a["include/caustics.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"CAUSTICS_GLSLF",l:{a:"grp",f:[{a:"define",c:"CAUSTICS_GLSLF",b:[""]},{a:"var",c:"SUN_NUM",b:["0"]},{a:"var",c:"CAUST_SCALE",b:["0.25"]},{a:"var",c:"CAUST_SPEED",b:["vec2","(","0.0",")"]},{a:"var",c:"CAUST_BRIGHT",b:["0.5"]},{a:"include",F:"procedural.glslf"},{a:"include",F:"math.glslv"},{a:"define",c:"CAUSTICS_VIEW_DISTANCE",b:["100.0"]},{a:"txt",b:"void bQ ( inout vec3 aQ , float kM , float fu , vec4 bP , vec3 U , vec3 kN , vec3 kO , vec4 kP , vec3 bo , float bN ) { if ( bN > CAUSTICS_VIEW_DISTANCE ) return ; vec3 kQ = bo + U ; kQ . xz = 10.0 * sin ( 0.1 * kQ . xz ) ; vec3 kS = T ( kR ( kP ) , kQ ) ; vec2 b_ = kS . xz ; vec3 kT = kN ; float kU = max ( dot ( U , kT ) , 0.0 ) ; float kV = 0.025 ; vec2 kW = CAUST_SPEED * fu ; b_ . s += 0.25 * sin ( dot ( bo + fu , vec3 ( 1.0 ) ) ) ; b_ . t += 0.35 * ( - sin ( dot ( bo - fu , vec3 ( - 0.7 ) ) ) ) ; b_ . st += 0.15 * cos ( 4.0 * kM - kW . x ) + 1.5 * sin ( kM - 0.3 * kW . y ) ; float hG = CAUST_SCALE * ( 1.0 + max ( 0.1 * kM , 0.0 ) ) ; vec3 kY = kX ( ( b_ / hG ) , kV ) ; kY *= CAUST_BRIGHT ; kY *= kY ; float kZ = min ( 0.25 * kM , - kM ) + 1.0 ; kZ = max ( kZ , 0.0 ) ; float k_ = bP [ SUN_NUM ] * kU ; float la = max ( sign ( kM ) , 0.0 ) ; k_ = k_ + max ( 0.5 * sign ( - U . y ) * la , 0.0 ) ; k_ = min ( k_ , 1.0 ) ; aQ += kO * kY * kZ * k_ ; }".split(" ")}]}}]}]};
a["include/color_util.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"COLOR_UTIL_GLSLF",l:{a:"grp",f:[{a:"define",c:"COLOR_UTIL_GLSLF",b:[""]},{a:"define",c:"PREMULTIPLY_ALPHA",b:["1"]},{a:"var",c:"SRGB",b:["SRGB_NONE"]},{a:"include",F:"std.glsl"},{a:"txt",b:"void bC ( inout float aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , 2.2 ) ;".split(" ")}]}},{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"if ( aQ < 0.04045 ) aQ = aQ / 12.92 ; else aQ = pow ( aQ * ( 1.0 / 1.055 ) + 0.0521327 , 2.4 ) ;".split(" ")}]}}]},{a:"txt",b:"} void aW ( inout float aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , 1.0 / 2.2 ) ;".split(" ")}]}},{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( aQ < 0.0031308 ) aQ = aQ * 12.92 ; else aQ = 1.055 * pow ( aQ , 1.0 / 2.4 ) - 0.055 ;".split(" ")}]}}]},
{a:"txt",b:"} void bC ( inout vec3 aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , vec3 ( 2.2 ) ) ;".split(" ")}]}},{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"bC ( aQ . r ) ; bC ( aQ . g ) ; bC ( aQ . b ) ;".split(" ")}]}}]},{a:"txt",b:"} void aW ( inout vec3 aQ ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SRGB","SRGB_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aQ = pow ( aQ , vec3 ( 1.0 / 2.2 ) ) ;".split(" ")}]}},
{a:"elif",j:["SRGB","SRGB_PROPER",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"aW ( aQ . r ) ; aW ( aQ . g ) ; aW ( aQ . b ) ;".split(" ")}]}}]},{a:"txt",b:"} void aX ( inout vec3 aQ , in float L ) {".split(" ")},{a:"cond",f:[{a:"if",j:["PREMULTIPLY_ALPHA"],l:{a:"grp",f:[{a:"txt",b:"aQ = aQ * L ;".split(" ")}]}}]},{a:"txt",b:"} float ge ( vec4 aQ ) { vec3 lb = vec3 ( 0.299 , 0.587 , 0.114 ) ; float lc = dot ( aQ . rgb , lb ) ; return lc ; }".split(" ")}]}}]}]};a["include/coverage.glslf"]={a:"grp",
f:[{a:"cond",f:[{a:"ifndef",c:"COVERAGE_GLSLF",l:{a:"grp",f:[{a:"define",c:"COVERAGE_GLSLF",b:[""]},{a:"include",F:"procedural.glslf"},{a:"txt",b:"const float ld = 1000.0 ; bool C ( float L , float le ) { if ( le < 0.0 ) L = 1.0 - L ; float lf = floor ( L * ld ) ; float lh = floor ( lg ( gl_FragCoord . xy ) * ld ) ; if ( le > 0.0 ) return lh < lf ; else return lh >= lf ; }".split(" ")}]}}]}]};a["include/depth_fetch.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"DEPTH_FETCH_GLSLF",l:{a:"grp",f:[{a:"define",
c:"DEPTH_FETCH_GLSLF",b:[""]},{a:"include",F:"std.glsl"},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_CASTING",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float ep ( in float li , in vec2 lj ) { float dD = lj . x ; float lk = lj . y ;".split(" ")},{a:"cond",f:[{a:"if",j:["CAMERA_TYPE","CAM_TYPE_PERSP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return lk * ( 1.0 - dD / li ) / ( lk - dD ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"return ( li - dD ) / ( lk - dD ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float gy ( in sampler2D ll , in vec2 fW , in vec2 lj ) { float eq = GLSL_TEXTURE ( ll , fW ) . r ; float dD = lj . x ; float lk = lj . y ; float li = 2.0 * dD / ( dD + lk - ( 2.0 * eq - 1.0 ) * ( lk - dD ) ) ; return li ; }".split(" ")}]}}]}]}}]}]};a["include/dynamic_grass.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"DYNAMIC_GRASS_GLSLV",l:{a:"grp",f:[{a:"define",
c:"DYNAMIC_GRASS_GLSLV",b:[""]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"DYNAMIC_GRASS",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"GRASS_TEXTURE_SIZE",b:["1024.0"]},{a:"cond",f:[{a:"if",j:["DYNAMIC_GRASS"],l:{a:"grp",f:[{a:"include",F:"math.glslv"},{a:"include",F:"to_world.glslv"},{a:"txt",b:"vec2 lp ( vec3 O , float lm , vec2 ln ) { vec2 lo = vec2 ( ( O . x - ln . x ) / lm , ( O . y - ln . y ) / lm ) ; return fract ( lo ) ; } vec2 lq ( vec2 gT , float lm , vec2 ln ) { return vec2 ( gT . x * lm , gT . y * lm ) + ln ; } au lr ( ) { return au ( vec3 ( - 10000.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) ) ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["GLSL3"],l:{a:"grp",f:[{a:"txt",b:"vec4 lB ( sampler2D ls , vec2 lt ) { float lu = 1.0 / GRASS_TEXTURE_SIZE ; vec4 lv = GLSL_TEXTURE ( ls , lt ) ; vec4 lw = GLSL_TEXTURE ( ls , lt + vec2 ( lu , 0.0 ) ) ; vec4 lx = GLSL_TEXTURE ( ls , lt + vec2 ( 0.0 , lu ) ) ; vec4 ly = GLSL_TEXTURE ( ls , lt + vec2 ( lu , lu ) ) ; float a = fract ( lt . x * GRASS_TEXTURE_SIZE ) ; vec4 lz = mix ( lv , lw , a ) ; vec4 lA = mix ( lx , ly , a ) ; float b = fract ( lt . y * GRASS_TEXTURE_SIZE ) ; return mix ( lz , lA , b ) ; }".split(" ")}]}}]},
{a:"txt",b:"au aZ ( vec3 O , vec3 V , vec3 lC , vec3 W , vec3 U , vec3 ao , PRECISION sampler2D lD , sampler2D lE , vec3 lF , float lG , vec3 lH , vec4 lI , mat3 N , mat3 Z ) { vec3 lJ = T ( lI , vec3 ( 0.0 , 0.0 , - 1.0 ) ) ; float lK = - lJ . x ; float lL = lJ . y ; vec2 ln = vec2 ( lH . x - lG * ( 1.0 + lK ) / 2.0 , lH . y - lG * ( 1.0 - lL ) / 2.0 ) ; vec2 lM = lp ( ao , lG , ln ) ; float lN = lG / 2.0 ; vec2 lO = abs ( lq ( lM - vec2 ( 0.5 ) , lG , vec2 ( 0.0 ) ) ) ; float lP = lN * ( 1.0 + sqrt ( 2.0 ) ) / 2.0 ; if ( length ( lO ) > lP ) return lr ( ) ; float lQ = lG / lF . z ; vec2 lR = ( lM - vec2 ( 0.5 ) ) * lQ + vec2 ( 0.5 ) ; vec3 lS = lJ * ( lG / lF . z - 1.0 ) / 2.0 ; lR . x += lS . x ; lR . y += lS . y ; vec4 lT = GLSL_TEXTURE ( lE , lR ) ; float hG = lT . r ; if ( hG < u_scale_threshold ) return lr ( ) ; float lU = lF . y - lF . x ;".split(" ")},
{a:"cond",f:[{a:"if",j:["GLSL3"],l:{a:"grp",f:[{a:"txt",b:"float ci = lF . y - ( lB ( lD , lR ) ) . r * lU ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float ci = lF . y - ( GLSL_TEXTURE ( lD , lR ) ) . r * lU ;".split(" ")}]}}]},{a:"txt",b:"vec2 lV = O . xy - ao . xy ; ao . xy = lq ( lM , lG , ln ) ; ao . z = ci ; O . xy = ao . xy + lV ; O . z *= hG ; O . z += ci ; vec3 aQ = lT . gba ;".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD"],l:{a:"grp",f:[{a:"txt",b:"O -= ao ; mat3 lW = as ( lH , ao , N , Z ) ; au aw = av ( O , ao , V , lC , W , U , lW ) ; aw . ao = ao ; aw . aQ = aQ ; return lX ( aw ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"return lX ( au ( O , ao , V , lC , W , U , aQ ) ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]};a["include/environment.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"ENVIRONMENT_GLSLF",l:{a:"grp",f:[{a:"define",c:"ENVIRONMENT_GLSLF",b:[""]},{a:"var",c:"USE_ENVIRONMENT_LIGHT",b:["0"]},{a:"var",c:"SKY_COLOR",b:["0"]},{a:"var",c:"SKY_TEXTURE",b:["0"]},{a:"txt",b:"vec3 cz ( vec3 U ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_ENVIRONMENT_LIGHT"],l:{a:"grp",f:[{a:"cond",
f:[{a:"if",j:["SKY_TEXTURE"],l:{a:"grp",f:[{a:"txt",b:"return GLSL_TEXTURE_CUBE ( u_sky_texture , U ) . rgb ;".split(" ")}]}},{a:"elif",j:["SKY_COLOR"],l:{a:"grp",f:[{a:"txt",b:"float lY = 0.5 * U . z + 0.5 ; return mix ( u_horizon_color , u_zenith_color , lY ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec3 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/fog.glslf"]={a:"grp",f:[{a:"cond",
f:[{a:"ifndef",c:"FOG_GLSLF",l:{a:"grp",f:[{a:"define",c:"FOG_GLSLF",b:[""]},{a:"var",c:"USE_FOG",b:["0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"FOG_TYPE",b:["QUADRATIC"]},{a:"var",c:"PROCEDURAL_FOG",b:["0"]},{a:"include",F:"std.glsl"},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"txt",b:"void mc ( inout vec3 aQ , in float lZ , in float ci , in vec4 l_ ) { float ma = clamp ( ( lZ - u_fog_params . z ) / u_fog_params . y , 0.0 , 1.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FOG_TYPE","QUADRATIC",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["ma","*=","ma",";"]}]}},{a:"elif",j:["FOG_TYPE","LINEAR",{a:"equal_expr",o:2}],l:{a:"grp",f:[]}},{a:"elif",j:["FOG_TYPE","INVERSE_QUADRATIC",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"ma = sqrt ( ma ) ;".split(" ")}]}}]},{a:"txt",b:"if ( u_fog_params . w > 0.0 ) { if ( ci > u_fog_params . w ) ma = 0.0 ; else { float mb = ( u_fog_params . w - max ( ci , 0.0 ) ) / u_fog_params . w ; ma *= mb * mb ; } } l_ . a = 1.0 - ( 1.0 - ma ) * ( 1.0 - u_fog_params . x ) ; aQ = mix ( aQ , l_ . rgb , l_ . a ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:"vec3 mh ( in mat4 md , in vec3 D ) { vec3 me = mix ( md [ 0 ] . rgb , md [ 1 ] . rgb , ( D . x + 1.0 ) / 2.0 ) ; vec3 mf = mix ( md [ 2 ] . rgb , md [ 3 ] . rgb , ( D . y + 1.0 ) / 2.0 ) ; vec3 mg = vec3 ( md [ 0 ] . a , md [ 1 ] . a , md [ 2 ] . a ) ; vec3 aQ = mix ( me , mf , abs ( D . y ) ) ; aQ = mix ( aQ , mg , abs ( D . z ) ) ; bC ( aQ ) ; return aQ ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",
b:"void mj ( inout float mi ) { mi -= 0.5 ; mi = 4.0 * ( mi * mi * mi ) + 0.5 ; } void mp ( inout vec3 aQ , in float lZ , in vec3 D , in float eC , in vec4 mk , in float fl ) { float ml = max ( D . z , 0.0 ) ; float mm = max ( lZ - max ( eC / ml , 0.0 ) , 0.0 ) ; float mn = mk . w * mm ; vec3 eD = vec3 ( 0.0 , 0.02 , 0.05 ) ; vec3 mo = mk . rgb ; mn = min ( mn , 1.0 ) ; mj ( mn ) ; mn *= clamp ( 2.0 - fl , 0.0 , 1.0 ) ; vec3 eE = mix ( mo , eD , min ( ml , 1.0 ) ) ; eC = clamp ( - eC * 0.03 , 0.0 , 0.8 ) ; eE *= 1.0 - eC ; aQ = mix ( aQ , eE , mn ) ; }".split(" ")}]}}]},
{a:"txt",b:"void bR ( inout vec3 aQ , float lZ , vec3 D , float bO ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_FOG"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["PROCEDURAL_FOG"],l:{a:"grp",f:[{a:"txt",b:"vec3 md = mh ( u_cube_fog , D ) ; vec4 eE = vec4 ( md , u_fog_color_density . a ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec4","eE","=","u_fog_color_density",";"]}]}}]},{a:"txt",b:"mc ( aQ , lZ , h . z , eE ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WATER_EFFECTS"],l:{a:"grp",f:[{a:"txt",
b:"mp ( aQ , lZ , D , u_cam_water_depth , u_underwater_fog_color_density , bO ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/fxaa.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"FXAA_GLSLF",l:{a:"grp",f:[{a:"define",c:"FXAA_GLSLF",b:[""]},{a:"var",c:"FXAA_BLEND4WEB",b:["1"]},{a:"var",c:"FXAA_QUALITY_P12",b:["0.0"]},{a:"cond",f:[{a:"ifndef",c:"FXAA_PS3",l:{a:"grp",f:[{a:"define",c:"FXAA_PS3",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_360",l:{a:"grp",f:[{a:"define",c:"FXAA_360",b:["0"]}]}}]},
{a:"cond",f:[{a:"ifndef",c:"FXAA_360_OPT",l:{a:"grp",f:[{a:"define",c:"FXAA_360_OPT",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_PC",l:{a:"grp",f:[{a:"define",c:"FXAA_PC",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_PC_CONSOLE",l:{a:"grp",f:[{a:"define",c:"FXAA_PC_CONSOLE",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GLSL_120",l:{a:"grp",f:[{a:"define",c:"FXAA_GLSL_120",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GLSL_130",l:{a:"grp",f:[{a:"define",c:"FXAA_GLSL_130",b:["0"]}]}}]},{a:"cond",
f:[{a:"ifndef",c:"FXAA_HLSL_3",l:{a:"grp",f:[{a:"define",c:"FXAA_HLSL_3",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_HLSL_4",l:{a:"grp",f:[{a:"define",c:"FXAA_HLSL_4",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_HLSL_5",l:{a:"grp",f:[{a:"define",c:"FXAA_HLSL_5",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GREEN_AS_LUMA",l:{a:"grp",f:[{a:"define",c:"FXAA_GREEN_AS_LUMA",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_EARLY_EXIT",l:{a:"grp",f:[{a:"define",c:"FXAA_EARLY_EXIT",b:["1"]}]}}]},{a:"cond",
f:[{a:"ifndef",c:"FXAA_DISCARD",l:{a:"grp",f:[{a:"define",c:"FXAA_DISCARD",b:["0"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_FAST_PIXEL_OFFSET",l:{a:"grp",f:[{a:"cond",f:[{a:"ifdef",c:"GL_EXT_gpu_shader4",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_NV_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_ARB_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["1"]}]}}]},{a:"cond",
f:[{a:"ifndef",c:"FXAA_FAST_PIXEL_OFFSET",l:{a:"grp",f:[{a:"define",c:"FXAA_FAST_PIXEL_OFFSET",b:["0"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GATHER4_ALPHA",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["FXAA_HLSL_5",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_ARB_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",b:["1"]}]}}]},{a:"cond",f:[{a:"ifdef",c:"GL_NV_gpu_shader5",l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",
b:["1"]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_GATHER4_ALPHA",l:{a:"grp",f:[{a:"define",c:"FXAA_GATHER4_ALPHA",b:["0"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:[1],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:[0],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",b:["4.0"]}]}}]},{a:"cond",f:[{a:"if",j:[0],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",
b:["2.0"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:[1],l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",b:["0.125"]}]}},{a:"else",l:{a:"grp",f:[{a:"define",c:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",b:["0.25"]}]}}]}]}}]},{a:"cond",f:[{a:"ifndef",c:"FXAA_QUALITY_PRESET",l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PRESET",b:["12"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",10,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",
c:"FXAA_QUALITY_PS",b:["3"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P1",b:["3.0"]},{a:"define",c:"FXAA_QUALITY_P2",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",11,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["4"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["3.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",
12,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["5"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",13,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["6"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",
b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",14,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["7"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",15,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["8"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",
b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["12.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",20,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["3"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P1",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P2",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",21,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["4"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",
c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",22,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["5"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",
23,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["6"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",24,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["7"]},{a:"define",c:"FXAA_QUALITY_P0",
b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["3.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",25,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["8"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",26,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["9"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",27,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["10"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P9",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",28,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["11"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",
b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P9",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P10",b:["8.0"]}]}}]},{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PRESET",29,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["12"]},{a:"define",c:"FXAA_QUALITY_P0",
b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P2",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P9",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P10",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P11",b:["8.0"]}]}}]},{a:"cond",
f:[{a:"if",j:["FXAA_QUALITY_PRESET",39,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"define",c:"FXAA_QUALITY_PS",b:["12"]},{a:"define",c:"FXAA_QUALITY_P0",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P1",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P2",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P3",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P4",b:["1.0"]},{a:"define",c:"FXAA_QUALITY_P5",b:["1.5"]},{a:"define",c:"FXAA_QUALITY_P6",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P7",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P8",b:["2.0"]},
{a:"define",c:"FXAA_QUALITY_P9",b:["2.0"]},{a:"define",c:"FXAA_QUALITY_P10",b:["4.0"]},{a:"define",c:"FXAA_QUALITY_P11",b:["8.0"]}]}}]},{a:"include",F:"color_util.glslf"},{a:"txt",b:"float mq ( float x ) { return clamp ( x , 0.0 , 1.0 ) ; }".split(" ")},{a:"cond",f:[{a:"if",j:["FXAA_BLEND4WEB",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 mr ( sampler2D t , vec2 p ) { return GLSL_TEXTURE ( t , p ) ; } vec4 mt ( sampler2D t , vec2 p , vec2 ms , vec2 r ) { return GLSL_TEXTURE ( t , p + ( ms * r ) ) ; }".split(" ")}]}}]},
{a:"txt",b:"vec4 gv ( vec2 fn , sampler2D ia , vec2 mu , float mv , float mw , float mx ) { vec2 my ; my . x = fn . x ; my . y = fn . y ;".split(" ")},{a:"cond",f:[{a:"if",j:["FXAA_GATHER4_ALPHA",1,{a:"equal_expr",o:2}],l:{a:"grp",f:[]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 mz = mr ( ia , my ) ; float gf = ge ( mz ) ; float mA = ge ( mt ( ia , my , vec2 ( 0 , 1 ) , mu . xy ) ) ; float mB = ge ( mt ( ia , my , vec2 ( 1 , 0 ) , mu . xy ) ) ; float mC = ge ( mt ( ia , my , vec2 ( 0 , - 1 ) , mu . xy ) ) ; float mD = ge ( mt ( ia , my , vec2 ( - 1 , 0 ) , mu . xy ) ) ;".split(" ")}]}}]},
{a:"txt",b:"float mE = max ( mA , gf ) ; float mF = min ( mA , gf ) ; float mG = max ( mB , mE ) ; float mH = min ( mB , mF ) ; float mI = max ( mC , mD ) ; float mJ = min ( mC , mD ) ; float mK = max ( mI , mG ) ; float mL = min ( mJ , mH ) ; float mM = mK * mw ; float mN = mK - mL ; float mO = max ( mx , mM ) ; bool mP = mN < mO ; if ( mP ) return mz ;".split(" ")},{a:"cond",f:[{a:"if",j:["FXAA_GATHER4_ALPHA",0,{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float gh = ge ( mt ( ia , my , vec2 ( - 1 , - 1 ) , mu . xy ) ) ; float gk = ge ( mt ( ia , my , vec2 ( 1 , 1 ) , mu . xy ) ) ; float gi = ge ( mt ( ia , my , vec2 ( 1 , - 1 ) , mu . xy ) ) ; float gj = ge ( mt ( ia , my , vec2 ( - 1 , 1 ) , mu . xy ) ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[]}}]},{a:"txt",b:"float mQ = mC + mA ; float mR = mD + mB ; float mS = 1.0 / mN ; float mT = mQ + mR ; float mU = ( - 2.0 * gf ) + mQ ; float mV = ( - 2.0 * gf ) + mR ; float mW = gi + gk ; float mX = gh + gi ; float mY = ( - 2.0 * mB ) + mW ; float mZ = ( - 2.0 * mC ) + mX ; float m_ = gh + gj ; float na = gj + gk ; float nb = ( abs ( mU ) * 2.0 ) + abs ( mY ) ; float nc = ( abs ( mV ) * 2.0 ) + abs ( mZ ) ; float nd = ( - 2.0 * mD ) + m_ ; float ne = ( - 2.0 * mA ) + na ; float nf = abs ( nd ) + nb ; float ng = abs ( ne ) + nc ; float nh = m_ + mW ; float ni = mu . x ; bool nj = nf >= ng ; float nk = mT * 2.0 + nh ; if ( ! nj ) mC = mD ; if ( ! nj ) mA = mB ; if ( nj ) ni = mu . y ; float nl = ( nk * ( 1.0 / 12.0 ) ) - gf ; float nm = mC - gf ; float nn = mA - gf ; float no = mC + gf ; float np = mA + gf ; bool nq = abs ( nm ) >= abs ( nn ) ; float nr = max ( abs ( nm ) , abs ( nn ) ) ; if ( nq ) ni = - ni ; float ns = mq ( abs ( nl ) * mS ) ; vec2 nt ; nt . x = my . x ; nt . y = my . y ; vec2 nu ; nu . x = ( ! nj ) ? 0.0 : mu . x ; nu . y = ( nj ) ? 0.0 : mu . y ; if ( ! nj ) nt . x += ni * 0.5 ; if ( nj ) nt . y += ni * 0.5 ; vec2 nv ; nv . x = nt . x - nu . x * FXAA_QUALITY_P0 ; nv . y = nt . y - nu . y * FXAA_QUALITY_P0 ; vec2 nw ; nw . x = nt . x + nu . x * FXAA_QUALITY_P0 ; nw . y = nt . y + nu . y * FXAA_QUALITY_P0 ; float nx = ( ( - 2.0 ) * ns ) + 3.0 ; float ny = ge ( mr ( ia , nv ) ) ; float nz = ns * ns ; float nA = ge ( mr ( ia , nw ) ) ; if ( ! nq ) no = np ; float nB = nr * 1.0 / 4.0 ; float nC = gf - no * 0.5 ; float nD = nx * nz ; bool nE = nC < 0.0 ; ny -= no * 0.5 ; nA -= no * 0.5 ; bool nF = abs ( ny ) >= nB ; bool nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P1 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P1 ; bool nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P1 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P1 ; if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P2 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P2 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P2 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P2 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P3 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P3 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P3 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P3 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",4,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P4 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P4 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P4 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P4 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",5,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P5 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P5 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P5 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P5 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",6,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P6 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P6 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P6 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P6 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",7,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P7 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P7 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P7 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P7 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",8,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P8 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P8 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P8 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P8 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",9,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P9 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P9 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P9 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P9 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",10,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P10 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P10 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P10 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P10 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",11,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P11 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P11 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P11 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P11 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_QUALITY_PS",12,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P12 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P12 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P12 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P12 ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"txt",b:"} float nI = my . x - nv . x ; float nJ = nw . x - my . x ; if ( ! nj ) nI = my . y - nv . y ; if ( ! nj ) nJ = nw . y - my . y ; bool nK = ( ny < 0.0 ) != nE ; float nL = ( nJ + nI ) ; bool nM = ( nA < 0.0 ) != nE ; float nN = 1.0 / nL ; bool nO = nI < nJ ; float nP = min ( nI , nJ ) ; bool nQ = nO ? nK : nM ; float nR = nD * nD ; float nS = ( nP * ( - nN ) ) + 0.5 ; float nT = nR * mv ; float nU = nQ ? nS : 0.0 ; float nV = max ( nU , nT ) ; if ( ! nj ) my . x += nV * ni ; if ( nj ) my . y += nV * ni ;".split(" ")},
{a:"cond",f:[{a:"if",j:["FXAA_DISCARD",1,{a:"equal_expr",o:2},"FXAA_BLEND4WEB",1,{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return mr ( ia , my ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec4 ( mr ( ia , my ) . xyz , gf ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/halo_color.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"HALO_COLOR_GLSLF",l:{a:"grp",f:[{a:"define",c:"HALO_COLOR_GLSLF",b:[""]},{a:"var",c:"NUM_RINGS",b:["0"]},{a:"var",
c:"NUM_LINES",b:["0"]},{a:"var",c:"NUM_STARS",b:["0"]},{a:"var",c:"SKY_STARS",b:["0"]},{a:"var",c:"WAVES_HEIGHT",b:["1.0"]},{a:"var",c:"WATER_EFFECTS",b:["0"]},{a:"var",c:"DISABLE_FOG",b:["0"]},{a:"cond",f:[{a:"if",j:["NUM_RINGS","NUM_LINES",{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const int nW = NUM_RINGS ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"const int nW = NUM_LINES ;".split(" ")}]}}]},{a:"txt",b:"float nX ( float x ) { return x - floor ( x * ( 1.0 / 0.01 ) ) * 0.01 ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_RINGS"],l:{a:"grp",f:[{a:"txt",b:"void od ( inout float nY , in float nZ [ nW ] , in float n_ ) { for ( int a = 0 ; a < NUM_RINGS ; a ++ ) { float oa = 40.0 * nZ [ a ] ; float ob = 300.0 * ( nX ( oa ) - 0.005 ) ; float oc = oa ; float ma = abs ( oc * ( u_halo_size * ob - n_ ) ) ; nY += 1.0 - min ( ma , 1.0 ) ; } }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_LINES"],l:{a:"grp",f:[{a:"txt",b:"void oi ( inout float oe , in float nZ [ nW ] , in float aM ) { for ( int a = 0 ; a < NUM_LINES ; a ++ ) { float of = nZ [ a ] ; float og = of ; float oh = 1000.0 * ( nX ( of ) - 0.005 ) ; float ma = 20.0 * abs ( og * A . x + oh * A . y ) ; oe += 1.0 - min ( ma , 1.0 ) ; } oe *= aM ; }".split(" ")}]}}]},
{a:"txt",b:"void om ( inout float aM , in vec2 b_ ) { float oj , bK ; bK = atan ( b_ . y , b_ . x ) ; bK *= ( 1.0 + 0.25 * float ( NUM_STARS ) ) ; float ok = cos ( bK ) ; float ol = sin ( bK ) ; bK = ( ok * b_ . x + ol * b_ . y ) * ( ok * b_ . y - ol * b_ . x ) ; oj = abs ( bK ) ; if ( oj < 1.0 ) { oj = ( 0.01 * u_halo_size ) / ( oj ) ; aM *= sqrt ( min ( oj , 1.0 ) ) ; } } vec4 bh ( ) { float aM = ( A . x * A . x + A . y * A . y ) ; float n_ = sqrt ( aM ) ; aM = max ( 1.0 - aM , 0.0 ) ; aM = pow ( aM , u_halo_hardness ) ; float L = u_diffuse_color . a ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_RINGS","NUM_LINES",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float nZ [ nW ] ; for ( int cl = 0 ; cl < nW ; cl ++ ) { nZ [ cl ] = fract ( bf / float ( cl + 1 ) ) - 1.0 ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_RINGS"],l:{a:"grp",f:[{a:"txt",b:"float nY = 0.0 ; od ( nY , nZ , n_ ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_LINES"],l:{a:"grp",f:[{a:"txt",b:"float oe = 0.0 ; oi ( oe , nZ , aM ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_STARS"],
l:{a:"grp",f:[{a:"txt",b:"om ( aM , A ) ;".split(" ")}]}}]},{a:"txt",b:"aM *= L ; vec3 aQ = u_diffuse_color . rgb ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_RINGS"],l:{a:"grp",f:[{a:"txt",b:"nY *= aM ; aQ += u_halo_rings_color * nY ; aM += nY ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_LINES"],l:{a:"grp",f:[{a:"txt",b:"oe *= L ; aQ += u_halo_lines_color * oe ; aM += oe ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["SKY_STARS"],l:{a:"grp",f:[{a:"txt",b:"aM *= max ( 1.0 - 2.0 * u_sun_intensity . x , 0.0 ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WATER_EFFECTS","DISABLE_FOG",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float kZ = u_halo_stars_blend * ( be . y - u_halo_stars_height ) ; aM *= clamp ( kZ , 0.0 , 1.0 ) ; aM *= min ( u_cam_water_depth + 2.0 * WAVES_HEIGHT , 1.0 ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec4 on = vec4 ( aQ , aM ) ; return on ; }".split(" ")}]}}]}]};a["include/lighting_nodes.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"LIGHTING_NODES_GLSLF",l:{a:"grp",
f:[{a:"define",c:"LIGHTING_NODES_GLSLF",b:[""]},{a:"include",F:"std.glsl"},{a:"node",c:"LIGHTING_BEGIN",C:[],B:[{a:"node_out",c:"oB",i:["vec3"],g:!1},{a:"node_out",c:"oC",i:["vec3"],g:!1},{a:"node_out",c:"oD",i:["vec3"],g:!1},{a:"node_out",c:"oE",i:["vec3"],g:!0},{a:"node_out",c:"oF",i:["vec3"],g:!0},{a:"node_out",c:"oG",i:["vec2"],g:!0},{a:"node_out",c:"oH",i:["vec2"],g:!0},{a:"node_out",c:"oI",i:["vec4"],g:!0},{a:"node_out",c:"oJ",i:["float"],g:!0},{a:"node_out",c:"oK",i:["vec4"],g:!0}],u:[{a:"txt",
b:"oB = oo ; oC = op ; oD = oq ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oE"],u:[{a:"txt",b:["oE","=","or",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oF"],u:[{a:"txt",b:["oF","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oH"],u:[{a:"txt",b:["oH","=","ov",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oG"],u:[{a:"txt",b:["oG","=","ow",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oI"],u:[{a:"txt",b:["oI","=","ox",";"]}]}]},{a:"node_cond",f:[{a:"node_if",
j:["USE_OUT_oJ"],u:[{a:"txt",b:["oJ","=","oy",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_oK"],u:[{a:"txt",b:["oK","=","oz",";"]}]}]}]},{a:"node",c:"LIGHTING_AMBIENT",C:[],B:[{a:"node_in",c:"oL",i:["vec3"],g:!1},{a:"node_in",c:"oM",i:["vec3"],g:!1},{a:"node_in",c:"oN",i:["vec3"],g:!1},{a:"node_out",c:"oO",i:["vec4"],g:!1},{a:"node_out",c:"oP",i:["vec3"],g:!1}],u:[{a:"txt",b:"oO = vec4 ( oL + oN * oM , _0_0 ) ; oP = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"LIGHTING_LAMP",C:[{a:"node_var",
c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_IND",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]},{a:"node_var",c:"LAMP_SHADOW_MAP_IND",b:["-","1"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]}],B:[{a:"node_in",c:"oQ",i:["vec4"],g:!1},{a:"node_out",c:"oR",i:["vec3"],g:!1},{a:"node_out",c:"oS",i:["vec2"],g:!1},{a:"node_out",c:"oT",i:["vec3"],g:!1},{a:"node_out",c:"oU",i:["float"],g:!1}],u:[{a:"txt",b:"oS = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","HEMI",{a:"equal_expr",o:2}],u:[{a:"txt",b:["oU","=","_0_5",";"]}]},{a:"node_else",u:[{a:"txt",b:["oU","=","_0_0",";"]}]}]},{a:"txt",b:"oT = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_SHADOW_MAP_IND",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],u:[{a:"txt",b:"oT *= oQ [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE",
"POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"vec3 oV = u_light_positions [ LAMP_IND ] . xyz ; oR = oV - os ; float aM = length ( oR ) ; float oW = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oR = normalize ( oR ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 oX = u_light_directions [ LAMP_IND ] ; float oY = dot ( oR , oX ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oW *= oY ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"oW *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]},{a:"txt",b:["oT","*=","oW",";"]}]},{a:"node_else",u:[{a:"txt",b:"oR = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{a:"node",c:"DIFFUSE_FRESNEL",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"oZ",i:["vec3"],g:!1},{a:"node_in",c:"o_",i:["vec2"],g:!1},{a:"node_in",c:"pa",i:["vec3"],g:!1},{a:"node_in",c:"pb",i:["float"],g:!1},
{a:"node_in",c:"pc",i:["vec2"],g:!1},{a:"node_out",c:"pd",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( oZ , B . xyz ) ; pa = cross ( pe , B . xyz ) ; pa = - normalize ( pa ) ;".split(" ")}]}]},{a:"txt",b:"pd = _0_0 ; if ( o_ . r != _0_0 ) { float pf = ( _1_0 - pb ) * dot ( pa , oZ ) + pb ; if ( pc [ 0 ] == _0_0 ) { pd = _1_0 ; } else { float t = _1_0 + abs ( pf ) ; t = pc [ 1 ] + ( _1_0 - pc [ 1 ] ) * pow ( t , pc [ 0 ] ) ; pd = clamp ( t , _0_0 , _1_0 ) ; } pd = max ( pd , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_LAMBERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pg",i:["vec3"],g:!1},{a:"node_in",c:"ph",i:["vec2"],g:!1},{a:"node_in",c:"pi",i:["vec3"],g:!1},{a:"node_in",c:"pj",i:["float"],g:!1},{a:"node_out",c:"pk",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pg , B . xyz ) ; pi = cross ( pe , B . xyz ) ; pi = - normalize ( pi ) ;".split(" ")}]}]},{a:"txt",b:"pk = _0_0 ; if ( ph . r != _0_0 ) { float pf = ( _1_0 - pj ) * dot ( pi , pg ) + pj ; pk = max ( pf , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_OREN_NAYAR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pl",i:["vec3"],g:!1},{a:"node_in",c:"pm",i:["vec2"],g:!1},{a:"node_in",c:"pn",i:["vec3"],g:!1},{a:"node_in",c:"po",i:["float"],g:!1},{a:"node_in",c:"pr",i:["vec2"],g:!1},{a:"node_out",c:"pu",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pl , B . xyz ) ; pn = cross ( pe , B . xyz ) ; pn = - normalize ( pn ) ;".split(" ")}]}]},{a:"txt",
b:"pu = _0_0 ; if ( pm . r != _0_0 ) { float pf = ( _1_0 - po ) * dot ( pn , pl ) + po ; if ( pr [ 0 ] > _0_0 ) { float pv = max ( dot ( pn , ou ) , _0_0 ) ; float pw = pr [ 0 ] * pr [ 0 ] ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = pl - pf * pn ; vec3 py = ou - pv * pn ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) pu = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; pu = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else pu = pf ; pu = max ( pu , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_MINNAERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pD",i:["vec3"],g:!1},{a:"node_in",c:"pE",i:["vec2"],g:!1},{a:"node_in",c:"pF",i:["vec3"],g:!1},{a:"node_in",c:"pG",i:["float"],g:!1},{a:"node_in",c:"pH",i:["vec2"],g:!1},{a:"node_out",c:"pI",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pD , B . xyz ) ; pF = cross ( pe , B . xyz ) ; pF = - normalize ( pF ) ;".split(" ")}]}]},{a:"txt",
b:"pI = _0_0 ; if ( pE . r != _0_0 ) { float pf = ( _1_0 - pG ) * dot ( pF , pD ) + pG ; float pv = max ( dot ( pF , ou ) , _0_0 ) ; if ( pH [ 0 ] <= _1_0 ) pI = pf * pow ( max ( pv * pf , 0.1 ) , pH [ 0 ] - _1_0 ) ; else pI = pf * pow ( 1.0001 - pv , pH [ 0 ] - _1_0 ) ; pI = max ( pI , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pJ",i:["vec3"],g:!1},{a:"node_in",c:"pK",i:["vec2"],g:!1},{a:"node_in",c:"pL",i:["vec3"],g:!1},
{a:"node_in",c:"pM",i:["float"],g:!1},{a:"node_in",c:"pN",i:["vec2"],g:!1},{a:"node_out",c:"pO",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pJ , B . xyz ) ; pL = cross ( pe , B . xyz ) ; pL = - normalize ( pL ) ;".split(" ")}]}]},{a:"txt",b:"pO = _0_0 ; if ( pK . r != _0_0 ) { float pf = ( _1_0 - pM ) * dot ( pL , pJ ) + pM ; float pP = acos ( pf ) ; if ( pP < pN [ 0 ] ) pO = _1_0 ; else if ( pP > ( pN [ 0 ] + pN [ 1 ] ) || pN [ 1 ] == _0_0 ) pO = _0_0 ; else pO = _1_0 - ( ( pP - pN [ 0 ] ) / pN [ 1 ] ) ; pO = max ( pO , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"SPECULAR_PHONG",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pQ",i:["vec3"],g:!1},{a:"node_in",c:"pR",i:["vec2"],g:!1},{a:"node_in",c:"pS",i:["vec3"],g:!1},{a:"node_in",c:"pT",i:["float"],g:!1},{a:"node_in",c:"pU",i:["vec2"],g:!1},{a:"node_out",c:"pV",i:["float"],g:!1}],u:[{a:"txt",b:"pV = _0_0 ; if ( pR . g != _0_0 ) { vec3 pW = normalize ( pQ + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pT == _0_0 ) { pV = dot ( B . xyz , pW ) ; pV = sqrt ( _1_0 - pV * pV ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"pV = ( _1_0 - pT ) * max ( dot ( pS , pW ) , _0_0 ) + pT ;".split(" ")}]}]},{a:"txt",b:"pV = pow ( pV , pU [ 0 ] ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_COOKTORR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pX",i:["vec3"],g:!1},{a:"node_in",c:"pY",i:["vec2"],g:!1},{a:"node_in",c:"pZ",i:["vec3"],g:!1},{a:"node_in",c:"p_",i:["float"],g:!1},{a:"node_in",c:"qa",i:["vec2"],g:!1},{a:"node_out",c:"qb",i:["float"],g:!1}],u:[{a:"txt",b:"qb = _0_0 ; if ( pY . g != _0_0 ) { vec3 pW = normalize ( pX + ou ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( p_ == _0_0 ) { qb = dot ( B . xyz , pW ) ; qb = sqrt ( _1_0 - qb * qb ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"qb = max ( dot ( pZ , pW ) , _0_0 ) ; qb = ( _1_0 - p_ ) * qb + p_ ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float pv = max ( dot ( B . xyz , ou ) , _0_0 ) ; pv = sqrt ( _1_0 - pv * pv ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float pv = max ( dot ( pZ , ou ) , _0_0 ) ;".split(" ")}]}]},
{a:"txt",b:"qb = pow ( qb , qa [ 0 ] ) ; qb = qb / ( 0.1 + pv ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_WARDISO",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qc",i:["vec3"],g:!1},{a:"node_in",c:"qd",i:["vec2"],g:!1},{a:"node_in",c:"qe",i:["vec3"],g:!1},{a:"node_in",c:"qf",i:["float"],g:!1},{a:"node_in",c:"qg",i:["vec2"],g:!1},{a:"node_out",c:"qh",i:["float"],g:!1}],u:[{a:"txt",b:"qh = _0_0 ; if ( qd . g != _0_0 ) { vec3 pW = normalize ( qc + ou ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; float pv = _0_0 ; float qj = _0_0 ; if ( qf == _0_0 ) { qi = dot ( B . xyz , pW ) ; pv = dot ( B . xyz , ou ) ; qj = dot ( B . xyz , qc ) ; qi = sqrt ( _1_0 - qi * qi ) ; pv = sqrt ( _1_0 - pv * pv ) ; qj = sqrt ( _1_0 - qj * qj ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = max ( dot ( qe , pW ) , 0.01 ) ; float pv = max ( dot ( qe , ou ) , 0.01 ) ; float qj = max ( dot ( qe , qc ) , 0.01 ) ;".split(" ")}]}]},
{a:"txt",b:"float bK = tan ( acos ( qi ) ) ; float L = max ( qg [ 0 ] , 0.01 ) ; qh = qj * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bK * bK ) / ( L * L ) ) / ( sqrt ( pv * qj ) ) ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qk",i:["vec3"],g:!1},{a:"node_in",c:"ql",i:["vec2"],g:!1},{a:"node_in",c:"qm",i:["vec3"],g:!1},{a:"node_in",c:"qn",i:["float"],g:!1},{a:"node_in",c:"qo",i:["vec2"],g:!1},{a:"node_out",c:"qr",i:["float"],
g:!1}],u:[{a:"txt",b:"qr = _0_0 ; if ( ql . g != _0_0 ) { vec3 cj = normalize ( qk + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qu = dot ( cj , B . xyz ) ; float bK = qo [ 0 ] + qo [ 1 ] ; if ( qn == _0_0 ) bK = acos ( sqrt ( _1_0 - qu * qu ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float bK = acos ( dot ( cj , qm ) ) ;".split(" ")}]}]},{a:"txt",b:"if ( bK < qo [ 0 ] ) qr = _1_0 ; else if ( bK >= qo [ 0 ] + qo [ 1 ] || qo [ 1 ] == _0_0 ) qr = _0_0 ; else qr = _1_0 - ( bK - qo [ 0 ] ) / qo [ 1 ] ; }".split(" ")}]},
{a:"node",c:"SPECULAR_BLINN",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qv",i:["vec3"],g:!1},{a:"node_in",c:"qw",i:["vec2"],g:!1},{a:"node_in",c:"qx",i:["vec3"],g:!1},{a:"node_in",c:"qy",i:["float"],g:!1},{a:"node_in",c:"qz",i:["vec2"],g:!1},{a:"node_out",c:"qA",i:["float"],g:!1}],u:[{a:"txt",b:"float qB = qz [ 0 ] ; float qC = qz [ 1 ] ; qA = _0_0 ; if ( qw . g != _0_0 ) { if ( qB < 1.0 || qC == _0_0 ) qA = _0_0 ; else { if ( qC < 100.0 ) qC = sqrt ( 1.0 / qC ) ; else qC = 10.0 / qC ; vec3 pW = normalize ( ou + qv ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = 0.0 ; if ( qy == _0_0 ) { float qD = dot ( B . xyz , pW ) ; qi = sqrt ( _1_0 - qD * qD ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = ( _1_0 - qy ) * max ( dot ( qx , pW ) , _0_0 ) + qy ;".split(" ")}]}]},{a:"txt",b:"if ( qi < _0_0 ) qA = _0_0 ; else { float pv = max ( dot ( qx , ou ) , 0.01 ) ; float qj = dot ( qx , qv ) ; if ( qj <= 0.01 ) qA = _0_0 ; else { float qE = max ( dot ( ou , pW ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qi * pv ) / qE ; float du = ( 2.0 * qi * qj ) / qE ; float g = min ( min ( a , b ) , du ) ; float p = sqrt ( pow ( qB , 2.0 ) + pow ( qE , 2.0 ) - _1_0 ) ; float mi = pow ( p - qE , 2.0 ) / pow ( p + qE , 2.0 ) * ( _1_0 + pow ( qE * ( p + qE ) - _1_0 , 2.0 ) / pow ( qE * ( p - qE ) + _1_0 , 2.0 ) ) ; float pP = acos ( qi ) ; qA = max ( mi * g * exp ( - pow ( pP , 2.0 ) / ( 2.0 * pow ( qC , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{a:"node",c:"LIGHTING_APPLY",C:[],B:[{a:"node_in",c:"qF",i:["vec4"],g:!1},{a:"node_in",c:"qG",i:["vec3"],g:!1},{a:"node_in",c:"qH",i:["float"],g:!1},{a:"node_in",c:"qI",i:["float"],g:!1},{a:"node_in",c:"qJ",i:["vec3"],g:!1},{a:"node_in",c:"qK",i:["vec3"],g:!1},{a:"node_in",c:"qL",i:["vec4"],g:!1},{a:"node_in",c:"qM",i:["vec3"],g:!1},{a:"node_in",c:"qN",i:["vec3"],g:!1},{a:"node_in",c:"qO",i:["vec3"],g:!1},{a:"node_in",c:"qP",i:["float"],g:!1},{a:"node_out",c:"qQ",i:["vec4"],g:!1},{a:"node_out",c:"qR",
i:["vec3"],g:!1}],u:[{a:"txt",b:"qR = qG + qO * qN * qI ; qQ = qF + vec4 ( qO * qM * qH , qI ) ;".split(" ")}]},{a:"node",c:"LIGHTING_END",C:[],B:[{a:"node_in",c:"qS",i:["vec4"],g:!1},{a:"node_in",c:"qT",i:["vec3"],g:!1}],u:[{a:"txt",b:"E = qS . rgb ; oA = qT ;".split(" ")}]},{a:"nodes_global"},{a:"txt",b:"void cK ( vec3 oo , vec3 op , vec3 oq , vec3 or , vec3 os , vec3 ot , vec3 ou , vec2 ov , vec2 ow , vec4 ox , float oy , vec4 oz , out vec3 E , out vec3 oA ) {".split(" ")},{a:"nodes_main"},{a:"txt",
b:["}"]}]}}]}]};a["include/math.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"MATH_GLSLV",l:{a:"grp",f:[{a:"define",c:"MATH_GLSLV",b:[""]},{a:"var",c:"EPSILON",b:["0.000001"]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"USE_POSITION_CLIP",b:["0"]},{a:"var",c:"SOFT_PARTICLES",b:["0"]},{a:"include",F:"std.glsl"},{a:"txt",b:"struct au { vec3 O ; vec3 ao ; vec3 V ; vec3 aB ; vec3 W ; vec3 U ; vec3 aQ ; } ; bool qU ( vec3 a , vec3 b ) { return any ( lessThan ( abs ( a - b ) , vec3 ( EPSILON ) ) ) ; } vec3 T ( in vec4 q , in vec3 kQ ) { return kQ + 2.0 * cross ( q . xyz , cross ( q . xyz , kQ ) + q . w * kQ ) ; } vec4 kR ( in vec4 qV ) { return vec4 ( - qV . xyz , qV . w ) ; } vec4 qX ( in vec4 a , in vec4 b ) { vec4 qW ; qW . x = a . x * b . w + a . w * b . x + a . y * b . z - a . z * b . y ; qW . y = a . y * b . w + a . w * b . y + a . z * b . x - a . x * b . z ; qW . z = a . z * b . w + a . w * b . z + a . x * b . y - a . y * b . x ; qW . w = a . w * b . w - a . x * b . x - a . y * b . y - a . z * b . z ; return qW ; } vec4 X ( in vec3 qY , in float qZ ) { vec4 qW ; qZ = qZ * 0.5 ; float s = sin ( qZ ) ; qW . x = s * qY [ 0 ] ; qW . y = s * qY [ 1 ] ; qW . z = s * qY [ 2 ] ; qW . w = cos ( qZ ) ; return qW ; } vec4 rd ( in vec3 bD , in vec3 q_ ) { vec4 qW ; float dz = dot ( q_ , bD ) ; vec3 rc = cross ( q_ , bD ) ; qW . xyz = rc . xyz ; qW . w = 1.0 + dz ; return normalize ( qW ) ; } vec3 rh ( vec4 re , vec4 qV , vec3 rf ) { vec3 qW = rf * re . w ; qW = T ( qV , qW ) ; qW += re . xyz ; return qW ; } vec3 ap ( mat3 ri , vec3 rf ) { vec3 qW = rf * ri [ 1 ] [ 0 ] ; vec4 qV = vec4 ( ri [ 1 ] [ 1 ] , ri [ 1 ] [ 2 ] , ri [ 2 ] [ 0 ] , ri [ 2 ] [ 1 ] ) ; qW = T ( qV , qW ) ; qW += ri [ 0 ] ; return qW ; } vec3 rj ( vec4 re , vec4 qV , vec3 bD ) { vec3 qW = bD * re . w ; qW = T ( qV , qW ) ; return qW ; } vec3 _ ( mat3 ri , vec3 bD ) { vec3 qW = bD * ri [ 1 ] [ 0 ] ; vec4 qV = vec4 ( ri [ 1 ] [ 1 ] , ri [ 1 ] [ 2 ] , ri [ 2 ] [ 0 ] , ri [ 2 ] [ 1 ] ) ; qW = T ( qV , qW ) ; return qW ; } vec3 rk ( vec4 re , vec4 qV , vec3 rf ) { vec3 qW = rf - re . xyz ; qW = T ( kR ( qV ) , qW ) ; qW /= re . w ; return qW ; } vec3 rl ( vec4 re , vec4 qV , vec3 bD ) { return T ( kR ( qV ) , bD ) / re . w ; } mat4 rm ( ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rn ( float bK ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , cos ( bK ) , sin ( bK ) , _0_0 , _0_0 , - sin ( bK ) , cos ( bK ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 ro ( float bK ) { return mat4 ( cos ( bK ) , _0_0 , - sin ( bK ) , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , sin ( bK ) , _0_0 , cos ( bK ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rp ( float bK ) { return mat4 ( cos ( bK ) , sin ( bK ) , _0_0 , _0_0 , - sin ( bK ) , cos ( bK ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } au lX ( in au kQ ) { return au ( kQ . O , kQ . ao , normalize ( kQ . V ) , normalize ( kQ . aB ) , normalize ( kQ . W ) , normalize ( kQ . U ) , kQ . aQ ) ; }".split(" ")},
{a:"cond",f:[{a:"if",j:["SOFT_PARTICLES","REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2},"REFRACTIVE","USE_POSITION_CLIP",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:"vec3 aC ( vec4 f ) { float fT = f . x ; float fU = f . y ; float fV = f . w ; vec3 rq ; rq . x = ( fT + fV ) / 2.0 ; rq . y = ( fU + fV ) / 2.0 ; rq . z = fV ; return rq ; }".split(" ")}]}}]},{a:"txt",b:"mat3 da ( ) { return mat3 ( _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 ) ; } mat4 bc ( mat3 t ) { mat4 rs ; rs [ 0 ] [ 0 ] = ( _1_0 - ( t [ 1 ] [ 2 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) + t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) ) * t [ 1 ] [ 0 ] ; rs [ 0 ] [ 1 ] = ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) + t [ 2 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 0 ] [ 2 ] = ( t [ 1 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) - t [ 2 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 0 ] [ 3 ] = _0_0 ; rs [ 1 ] [ 0 ] = ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) - t [ 2 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 1 ] [ 1 ] = ( _1_0 - ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) + t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) ) * t [ 1 ] [ 0 ] ; rs [ 1 ] [ 2 ] = ( t [ 1 ] [ 2 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 1 ] [ 3 ] = _0_0 ; rs [ 2 ] [ 0 ] = ( t [ 1 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 2 ] [ 1 ] = ( t [ 1 ] [ 2 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) - t [ 2 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 2 ] [ 2 ] = ( _1_0 - ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) + t [ 1 ] [ 2 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) ) * t [ 1 ] [ 0 ] ; rs [ 2 ] [ 3 ] = _0_0 ; rs [ 3 ] [ 0 ] = t [ 0 ] [ 0 ] ; rs [ 3 ] [ 1 ] = t [ 0 ] [ 1 ] ; rs [ 3 ] [ 2 ] = t [ 0 ] [ 2 ] ; rs [ 3 ] [ 3 ] = 1.0 ; return rs ; } mat3 aY ( in mat3 ri , in mat3 rt ) { mat3 qW ; vec3 rf = rt [ 0 ] ; vec4 re = vec4 ( ri [ 0 ] , ri [ 1 ] [ 0 ] ) ; vec4 qV = vec4 ( ri [ 1 ] [ 1 ] , ri [ 1 ] [ 2 ] , ri [ 2 ] [ 0 ] , ri [ 2 ] [ 1 ] ) ; qW [ 0 ] = rh ( re , qV , rf ) ; qW [ 1 ] [ 0 ] = ri [ 1 ] [ 0 ] * rt [ 1 ] [ 0 ] ; qW [ 1 ] [ 1 ] = ri [ 1 ] [ 1 ] * rt [ 2 ] [ 1 ] + ri [ 2 ] [ 1 ] * rt [ 1 ] [ 1 ] + ri [ 1 ] [ 2 ] * rt [ 2 ] [ 0 ] - ri [ 2 ] [ 0 ] * rt [ 1 ] [ 2 ] ; qW [ 1 ] [ 2 ] = ri [ 1 ] [ 2 ] * rt [ 2 ] [ 1 ] + ri [ 2 ] [ 1 ] * rt [ 1 ] [ 2 ] + ri [ 2 ] [ 0 ] * rt [ 1 ] [ 1 ] - ri [ 1 ] [ 1 ] * rt [ 2 ] [ 0 ] ; qW [ 2 ] [ 0 ] = ri [ 2 ] [ 0 ] * rt [ 2 ] [ 1 ] + ri [ 2 ] [ 1 ] * rt [ 2 ] [ 0 ] + ri [ 1 ] [ 1 ] * rt [ 1 ] [ 2 ] - ri [ 1 ] [ 2 ] * rt [ 1 ] [ 1 ] ; qW [ 2 ] [ 1 ] = ri [ 2 ] [ 1 ] * rt [ 2 ] [ 1 ] - ri [ 1 ] [ 1 ] * rt [ 1 ] [ 1 ] - ri [ 1 ] [ 2 ] * rt [ 1 ] [ 2 ] - ri [ 2 ] [ 0 ] * rt [ 2 ] [ 0 ] ; return qW ; } mat3 dd ( in vec4 qV , in mat3 ri ) { mat3 qW ; qW [ 0 ] = ri [ 0 ] ; qW [ 1 ] [ 0 ] = ri [ 1 ] [ 0 ] ; qW [ 1 ] [ 1 ] = qV [ 0 ] ; qW [ 1 ] [ 2 ] = qV [ 1 ] ; qW [ 2 ] [ 0 ] = qV [ 2 ] ; qW [ 2 ] [ 1 ] = qV [ 3 ] ; return qW ; } vec4 R ( in vec4 ru ) { return normalize ( ru ) ; } vec4 R ( in vec4 ru , out float P , out float Q ) { vec4 qV = R ( ru ) ; P = length ( ru ) * M_PI ; Q = sign ( ru [ 3 ] ) ; return R ( ru ) ; }".split(" ")}]}}]}]};
a["include/mirror.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"MIRROR_GLSLF",l:{a:"grp",f:[{a:"define",c:"MIRROR_GLSLF",b:[""]},{a:"var",c:"REFLECTION_TYPE",b:["REFL_NONE"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"USE_BSDF_SKY_DIM",b:[""]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],
l:{a:"grp",f:[{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"define",c:"REFL_BUMP",b:["0.1"]},{a:"txt",b:"float rv ( in vec3 D , vec3 eJ , float d_ , float fg ) { vec3 fe = normalize ( eJ + D ) ; float ff = 1.0 - dot ( D , fe ) ; float r = fg + ( 1.0 - fg ) * pow ( ff , d_ ) ; return r ; } void cL ( inout vec3 rw , vec3 D , vec3 U , float rx , mat3 N ) { vec3 eJ = reflect ( - D , U ) ; float d_ = u_fresnel_params [ 0 ] ; float fg = u_fresnel_params [ 1 ] ; float r = 1.0 ; if ( d_ != 0.0 ) r = rv ( D , eJ , d_ , fg ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_TYPE","REFL_CUBE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 eO = GLSL_TEXTURE_CUBE ( u_cube_reflection , eJ ) . xyz ;".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_NONE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 ry = u_refl_plane . xyz * dot ( U , u_refl_plane . xyz ) ; vec3 rz = U - ry ; vec2 rA = _ ( N , rz ) . xy ; vec2 rB = l . xy / l . z ; rB += rA * REFL_BUMP ; vec3 eO = GLSL_TEXTURE ( u_plane_reflection , rB ) . rgb ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 eO = vec3 ( 1.0 ) ; rx = 0.0 ;".split(" ")}]}}]}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_MIRRORMAP",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 eO = GLSL_TEXTURE_CUBE ( u_mirrormap , eJ ) . xyz ;".split(" ")}]}}]},{a:"txt",b:"bC ( eO . rgb ) ; rw = mix ( rw , eO , rx * r ) ; }".split(" ")}]}},{a:"elif",j:["REFLECTION_TYPE","REFL_PBR_STANDARD",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 rD ( float ed , vec3 rC , float ec ) { return rC + ( max ( vec3 ( 1.0 - ec ) , rC ) - rC ) * pow ( 1.0 - ed , 5.0 ) ; } vec3 rO ( vec3 rw , vec3 rE , vec3 D , vec3 U , float rF , float rG , mat3 N ) { vec3 d_ = U ; vec3 ek = D ; vec3 ej = reflect ( - D , U ) ; float ec = sqrt ( rG ) ; vec3 rC = vec3 ( 0.04 ) ; rC = mix ( rC , rE , rF ) ; vec3 rH = rD ( max ( dot ( d_ , ek ) , 0.0 ) , rC , ec ) ; vec3 rI = rH ; vec3 rJ = 1.0 - rI ; rJ *= 1.0 - rF ; vec3 bt = GLSL_TEXTURE_CUBE ( u_cube_irradiance , U ) . xyz ; vec3 rK = bt * rw ; const float rL = 5.0 ; vec3 ei = GLSL_TEXTURE_CUBE_LOD ( u_cube_r_convolution , ej , ec * rL ) . rgb ; vec2 rM = GLSL_TEXTURE ( u_brdf , vec2 ( max ( dot ( d_ , ek ) , 0.0 ) , ec ) ) . rg ; vec3 cJ = ei * ( rH * rM . x + rM . y ) ; vec3 rN = ( rJ * rK + cJ ) ; return rN ; }".split(" ")}]}},
{a:"elif",j:["REFLECTION_TYPE","REFL_PBR_SIMPLE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 rO ( vec3 rw , vec3 rE , vec3 D , vec3 U , float rF , float rG , mat3 N ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_BSDF_SKY_DIM"],l:{a:"grp",f:[{a:"txt",b:"float rP = max ( dot ( U , D ) , _0_0 ) ; float rQ = rF + ( max ( _1_0 - rG , rF ) - rF ) * pow ( _1_0 - rP , 5.0 ) ; vec3 eJ = reflect ( - D , U ) ; float rR = 2.0 / ( rG * rG ) - 2.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["GLSL1"],l:{a:"grp",
f:[{a:"txt",b:["float","rS","=","u_bsdf_cube_sky_dim",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"float rS = float ( textureSize ( u_sky_reflection , 0 ) . x ) ;".split(" ")}]}}]},{a:"txt",b:"float rT = log2 ( rS * sqrt ( 3.0 ) ) - _0_5 * log2 ( rR + _1_0 ) ; vec3 eO = GLSL_TEXTURE_CUBE_LOD ( u_sky_reflection , eJ , rT ) . xyz ; bC ( eO ) ; eO *= rE ; vec3 rU = GLSL_TEXTURE_CUBE_LOD ( u_sky_reflection , U , 100.0 ) . xyz ; bC ( rU ) ; rU *= rw ; return rU + rQ * eO ;".split(" ")}]}},{a:"else",l:{a:"grp",
f:[{a:"txt",b:["return","rw",";"]}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]};a["include/nodes.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"NODES_GLSLF",l:{a:"grp",f:[{a:"define",c:"NODES_GLSLF",b:[""]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"var",c:"DOUBLE_SIDED_LIGHTING",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"USE_REFRACTION",b:["0"]},{a:"var",c:"HAS_REFRACT_TEXTURE",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"REFLECTION_TYPE",
b:["REFL_NONE"]},{a:"var",c:"USE_DERIVATIVES_EXT",b:["0"]},{a:"var",c:"CAMERA_TYPE",b:["CAM_TYPE_PERSP"]},{a:"var",c:"IS_WORLD",b:["0"]},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"mirror.glslf"},{a:"include",F:"shadow.glslf"},{a:"include",F:"environment.glslf"}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"refraction.glslf"}]}}]},
{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["GLSL_IN","vec3","rV",";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_B4W_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:"vec3 rY ( in vec3 rW , in float rX ) { vec3 eX = vec3 ( _0_0 ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_REFRACTION"],l:{a:"grp",f:[{a:"txt",b:"eX = cN ( l , rW . xy * rX ) ;".split(" ")}]}},{a:"elif",
j:["HAS_REFRACT_TEXTURE"],l:{a:"grp",f:[{a:"txt",b:"eX = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bC ( eX ) ;".split(" ")}]}}]},{a:"txt",b:["return","eX",";","}"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kf ( vec3 rgb ) { vec4 hI = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hI . wz ) , vec4 ( rgb . gb , hI . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dz = q . x - min ( q . w , q . y ) ; float iB = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dz + iB ) ) , dz / ( q . x + iB ) , q . x ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kh ( vec3 kg ) { vec4 hI = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kg . r , kg . r , kg . r ) + hI . xyz ) * 6.0 - hI . www ) ; return kg . b * mix ( hI . xxx , clamp ( p - hI . xxx , _0_0 , _1_0 ) , kg . g ) ; }".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED","USE_NODE_TEX_COORD_UV","USE_NODE_UVMAP",{a:"logical_or_expr",o:5}],l:{a:"grp",f:[{a:"txt",b:"vec3 rZ ( vec2 gT ) { return vec3 ( gT * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec2 r_ ( vec3 rf ) { return vec2 ( rf . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float sd ( vec3 sa , vec3 sb , float sc ) { float du = abs ( dot ( sa , sb ) ) ; float g = sc * sc - _1_0 + du * du ; float dY ; if ( g > _0_0 ) { g = sqrt ( g ) ; float cB = ( g - du ) / ( g + du ) ; float hO = ( du * ( g + du ) - _1_0 ) / ( du * ( g - du ) + _1_0 ) ; dY = _0_5 * cB * cB * ( _1_0 + hO * hO ) ; } else { dY = _1_0 ; } return dY ; }".split(" ")}]}}]},{a:"node",c:"CAMERA",
C:[],B:[{a:"node_out",c:"sG",i:["vec3"],g:!0},{a:"node_out",c:"sH",i:["float"],g:!0},{a:"node_out",c:"sI",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sG"],u:[{a:"txt",b:"sG = normalize ( sD . xyz ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sH"],u:[{a:"txt",b:"sH = abs ( sD . z ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sI"],u:[{a:"txt",b:"sI = length ( sD . xyz ) ;".split(" ")}]}]}]},{a:"node",c:"COMBRGB",C:[],B:[{a:"node_in",c:"sJ",i:["float"],
g:!1},{a:"node_in",c:"sK",i:["float"],g:!1},{a:"node_in",c:"sL",i:["float"],g:!1},{a:"node_out",c:"sM",i:["vec3"],g:!1}],u:[{a:"txt",b:"sM = vec3 ( sJ , sK , sL ) ;".split(" ")}]},{a:"node",c:"COMBHSV",C:[],B:[{a:"node_in",c:"sN",i:["float"],g:!1},{a:"node_in",c:"sO",i:["float"],g:!1},{a:"node_in",c:"sP",i:["float"],g:!1},{a:"node_out",c:"sQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"sQ = kh ( vec3 ( sN , sO , sP ) ) ;".split(" ")}]},{a:"node",c:"EMPTY_UV",C:[],B:[{a:"node_out",c:"sR",i:["vec3"],g:!1}],u:[{a:"txt",
b:"sR = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{a:"node",c:"EMPTY_VC",C:[],B:[{a:"node_out",c:"sS",i:["vec3"],g:!1}],u:[{a:"txt",b:"sS = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[{a:"node_out",c:"sT",i:["vec3"],g:!1},{a:"node_param",c:"se",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",b:"sT = rZ ( se ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_OR",C:[],B:[{a:"node_out",c:"sU",i:["vec3"],g:!1}],u:[{a:"txt",b:"sU = 2.0 * rV - vec3 ( _1_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC",
C:[],B:[{a:"node_out",c:"sV",i:["vec3"],g:!1},{a:"node_param",c:"sf",i:["GLSL_IN","vec3"],g:!1}],u:[{a:"txt",b:"sV = max ( vec3 ( _0_0 ) , sf ) ; bC ( sV ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC1",C:[],B:[{a:"node_out",c:"sW",i:["float"],g:!1},{a:"node_param",c:"sg",i:["GLSL_IN","float"],g:!1}],u:[{a:"txt",b:"sW = max ( _0_0 , sg ) ; bC ( sW ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC2",C:[],B:[{a:"node_out",c:"sX",i:["float"],g:!1},{a:"node_out",c:"sY",i:["float"],g:!1},{a:"node_param",c:"sh",
i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",b:"sX = max ( _0_0 , sh [ 0 ] ) ; sY = max ( _0_0 , sh [ 1 ] ) ; bC ( sX ) ; bC ( sY ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC3",C:[],B:[{a:"node_out",c:"sZ",i:["float"],g:!1},{a:"node_out",c:"s_",i:["float"],g:!1},{a:"node_out",c:"ta",i:["float"],g:!1},{a:"node_param",c:"si",i:["GLSL_IN","vec3"],g:!1}],u:[{a:"txt",b:"sZ = max ( _0_0 , si [ 0 ] ) ; s_ = max ( _0_0 , si [ 1 ] ) ; ta = max ( _0_0 , si [ 2 ] ) ; bC ( sZ ) ; bC ( s_ ) ; bC ( ta ) ;".split(" ")}]},
{a:"node",c:"GEOMETRY_NO",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"tb",i:["vec3"],g:!1},{a:"node_out",c:"tc",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["tc","=","tb",";"]}]},{a:"node_else",u:[{a:"txt",b:"tc = sw . xyz ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_FB",C:[],B:[{a:"node_out",c:"td",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_BF",C:[],B:[{a:"node_out",c:"te",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"te = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"te = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_VW",C:[],B:[{a:"node_out",c:"tf",i:["vec3"],g:!1}],u:[{a:"txt",
b:"tf = - _ ( u_view_tsr_frag , ou ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_LO",C:[],B:[{a:"node_out",c:"tg",i:["vec3"],g:!1}],u:[{a:"txt",b:"tg = sD . xyz ;".split(" ")}]},{a:"node",c:"GEOMETRY_GL",C:[],B:[{a:"node_out",c:"th",i:["vec3"],g:!1}],u:[{a:"txt",b:["th","=","os",";"]}]},{a:"node",c:"GEOMETRY_IN",C:[],B:[{a:"node_out",c:"ti",i:["vec3"],g:!1}],u:[{a:"txt",b:["ti","=","ou",";"]}]},{a:"node",c:"NEW_GEOMETRY",C:[],B:[{a:"node_out",c:"tj",i:["vec3"],g:!1},{a:"node_out",c:"tk",i:["vec3"],g:!1},
{a:"node_out",c:"tl",i:["vec3"],g:!1},{a:"node_out",c:"tm",i:["vec3"],g:!1},{a:"node_out",c:"tn",i:["vec3"],g:!1},{a:"node_out",c:"to",i:["vec3"],g:!1},{a:"node_out",c:"tr",i:["float"],g:!1},{a:"node_out",c:"tu",i:["float"],g:!1}],u:[{a:"txt",b:"tj = vec3 ( _0_0 ) ; tk = vec3 ( _0_0 ) ; tl = vec3 ( _0_0 ) ; tm = vec3 ( _0_0 ) ; tn = vec3 ( _0_0 ) ; to = vec3 ( _0_0 ) ; tr = _0_0 ; tu = _0_0 ;".split(" ")}]},{a:"node",c:"HUE_SAT",C:[],B:[{a:"node_in",c:"tv",i:["float"],g:!1},{a:"node_in",c:"tw",i:["float"],
g:!1},{a:"node_in",c:"tx",i:["float"],g:!1},{a:"node_in",c:"ty",i:["float"],g:!1},{a:"node_in",c:"tz",i:["vec3"],g:!1},{a:"node_out",c:"tA",i:["vec3"],g:!1}],u:[{a:"txt",b:"vec3 kg = kf ( tz ) ; kg [ 0 ] += ( tv - _0_5 ) ; if ( kg [ 0 ] > _1_0 ) kg [ 0 ] -= _1_0 ; else if ( kg [ 0 ] < _0_0 ) kg [ 0 ] += _1_0 ; kg *= vec3 ( _1_0 , tw , tx ) ; kg = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , kg , step ( vec3 ( _0_0 ) , kg ) ) , step ( kg , vec3 ( _1_0 ) ) ) ; tA = mix ( tz , kh ( kg ) , ty ) ;".split(" ")}]},
{a:"node",c:"INVERT",C:[],B:[{a:"node_in",c:"tB",i:["float"],g:!1},{a:"node_in",c:"tC",i:["vec3"],g:!1},{a:"node_out",c:"tD",i:["vec3"],g:!1}],u:[{a:"txt",b:"tD = mix ( tC , vec3 ( _1_0 ) - tC , tB ) ;".split(" ")}]},{a:"node",c:"LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_INDEX",b:["0"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]}],B:[{a:"node_out",
c:"tE",i:["vec3"],g:!0},{a:"node_out",c:"tF",i:["vec3"],g:!1},{a:"node_out",c:"tG",i:["float"],g:!1},{a:"node_out",c:"tH",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["LAMP_INDEX",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tE"],u:[{a:"txt",b:"tE = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{a:"txt",b:"vec3 tI = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 tJ = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"tF = h - tJ ; tG = length ( tF ) ; tF = normalize ( tF ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:"tH = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + tG * tG ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"float oY = dot ( - tF , tI ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; tH *= oY ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"tH *= max ( LAMP_LIGHT_DIST - tG , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tF"],u:[{a:"txt",b:["tF","=","tI",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tG"],u:[{a:"txt",b:"tG = length ( tJ - h ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:["tH","=","_1_0",";"]}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",
j:["USE_OUT_tE"],u:[{a:"txt",b:"tE = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"txt",b:"tF = vec3 ( _0_0 ) ; tG = 0.0 ;".split(" ")}]}]}]},{a:"node",c:"NORMAL",C:[],B:[{a:"node_in",c:"tK",i:["vec3"],g:!1},{a:"node_out",c:"tL",i:["vec3"],g:!0},{a:"node_out",c:"tM",i:["float"],g:!0},{a:"node_param",c:"sj",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tL"],u:[{a:"txt",b:["tL","=","sj",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tM"],u:[{a:"txt",b:"tM = - dot ( tK , sj ) ;".split(" ")}]}]}]},
{a:"node",c:"B4W_VECTOR_VIEW",C:[],B:[{a:"node_in",c:"tN",i:["vec3"],g:!1},{a:"node_out",c:"tO",i:["vec3"],g:!1}],u:[{a:"txt",b:"tO = - _ ( u_view_tsr_frag , tN ) ;".split(" ")}]},{a:"node",c:"BSDF_BEGIN",C:[],B:[{a:"node_in",c:"tP",i:["vec3"],g:!1},{a:"node_in",c:"tQ",i:["vec3"],g:!1},{a:"node_in",c:"tR",i:["float"],g:!1},{a:"node_in",c:"tS",i:["vec3"],g:!1},{a:"node_in",c:"tT",i:["float"],g:!1},{a:"node_in",c:"tU",i:["float"],g:!1},{a:"node_in",c:"tV",i:["vec3"],g:!1},{a:"node_in",c:"tW",i:["vec3"],
g:!1},{a:"node_in",c:"tX",i:["float"],g:!1},{a:"node_in",c:"tY",i:["vec3"],g:!1},{a:"node_in",c:"tZ",i:["float"],g:!1},{a:"node_out",c:"t_",i:["vec3"],g:!1},{a:"node_out",c:"ua",i:["vec3"],g:!1},{a:"node_out",c:"ub",i:["vec3"],g:!1},{a:"node_out",c:"uc",i:["vec3"],g:!1},{a:"node_out",c:"ud",i:["vec3"],g:!1},{a:"node_out",c:"ue",i:["vec4"],g:!1},{a:"node_out",c:"uf",i:["vec4"],g:!1},{a:"node_out",c:"ug",i:["vec3"],g:!1},{a:"node_out",c:"uh",i:["vec3"],g:!1},{a:"node_out",c:"ui",i:["vec3"],g:!1},{a:"node_out",
c:"uj",i:["float"],g:!1},{a:"node_out",c:"uk",i:["vec3"],g:!1},{a:"node_out",c:"ul",i:["float"],g:!1}],u:[{a:"txt",b:"ub = tQ ; uc = tS ; ud = tV ; ug = tQ ; uh = tS ; ui = tW ; uj = tX ; uk = tY ; ul = tZ ; t_ = sE * ub ; ua = sF * u_environment_energy * cz ( ud ) ; uf = cC ( ub ) ; H = uf ; ue [ 0 ] = tR ; ue [ 1 ] = tT ; ue [ 2 ] = tU ;".split(" ")}]},{a:"node",c:"BSDF_END",C:[],B:[{a:"node_in",c:"um",i:["vec4"],g:!1},{a:"node_in",c:"un",i:["vec3"],g:!1},{a:"node_in",c:"uo",i:["vec3"],g:!1},{a:"node_in",
c:"up",i:["vec4"],g:!1},{a:"node_in",c:"uq",i:["vec3"],g:!1},{a:"node_in",c:"ur",i:["vec3"],g:!1},{a:"node_in",c:"us",i:["vec3"],g:!1},{a:"node_in",c:"ut",i:["float"],g:!1},{a:"node_in",c:"uu",i:["vec3"],g:!1},{a:"node_in",c:"uv",i:["float"],g:!1},{a:"node_out",c:"uw",i:["vec3"],g:!1}],u:[{a:"txt",b:"float ux = clamp ( up [ 1 ] , _0_0 , _1_0 ) ; float rF = up [ 2 ] ; uw = um . rgb ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_TYPE","REFL_PBR_STANDARD",{a:"equal_expr",o:2},"REFLECTION_TYPE",
"REFL_PBR_SIMPLE",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"uw += rO ( uq , ur , ou , uo , rF , ux , mat3 ( _0_0 ) ) ;".split(" ")}]},{a:"node_elif",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"uw += rO ( uq , ur , ou , uo , rF , u_view_tsr_frag ) ;".split(" ")}]}]},{a:"txt",b:"uw += un ; uw = mix ( uw , us , ut ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_BSDF_TRANSPARENT"],u:[{a:"txt",b:"vec3 uy = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bC ( uy ) ; uu = uu * uy ; uw += uu ;".split(" ")}]}]},
{a:"txt",b:["uo",";"]}]},{a:"node",c:"BSDF_COMPUTE",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"uz",i:["vec3"],g:!1},{a:"node_in",c:"uA",i:["vec2"],g:!1},{a:"node_in",c:"uB",i:["vec3"],g:!1},{a:"node_in",c:"uC",i:["float"],g:!1},{a:"node_in",c:"uD",i:["vec4"],g:!1},{a:"node_out",c:"uE",i:["float"],g:!1},{a:"node_out",c:"uF",i:["float"],g:!1}],u:[{a:"txt",b:"vec3 sb = uB ; float uG = clamp ( uD [ 0 ] , _0_0 , _1_0 ) ; float ux = clamp ( uD [ 1 ] , _0_0 , _1_0 ) ; float rF = uD [ 2 ] ; vec3 pW = normalize ( ou + uz ) ; float pf = ( _1_0 - uC ) * dot ( sb , uz ) + uC ; float uH = ( _1_0 - uC ) * max ( dot ( uz , pW ) , _0_0 ) + uC ; float uI = ( _1_0 - uC ) * max ( dot ( uB , pW ) , _0_0 ) + uC ; uE = _0_0 ; if ( uA . r != _0_0 ) { if ( uG > _0_0 ) { float pv = max ( dot ( sb , ou ) , _0_0 ) ; float pw = uG * uG ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = uz - pf * sb ; vec3 py = ou - pv * sb ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) uE = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; uE = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else uE = pf ; uE = max ( uE , _0_0 ) / M_PI ; } float L = ux ; float uJ = L * L ; float dX = ( uI * uJ - uI ) * uI + _1_0 ; float cy = uJ / ( M_PI * dX * dX ) ; float uK ; float uL ; float uM = pow ( _1_0 - uH , 5.0 ) ; uK = _1_0 ; uL = uM ; float hI = L / 2.0 ; float uN = hI * hI ; float uO = _1_0 - uN ; float uP = _1_0 / ( uH * uH * uO + uN ) ; uK *= uP ; uL *= uP ; float rC = mix ( 0.04 , _1_0 , rF ) ; float uQ = mix ( uL , uK , rC ) ; uF = max ( pf * cy * uQ , _0_0 ) ;".split(" ")}]},
{a:"node",c:"BSDF_ANISOTROPIC",C:[],B:[{a:"node_in",c:"uR",i:["vec3"],g:!1},{a:"node_in",c:"uS",i:["float"],g:!1},{a:"node_in",c:"uT",i:["float"],g:!1},{a:"node_in",c:"uU",i:["float"],g:!1},{a:"node_in",c:"uV",i:["vec3"],g:!1},{a:"node_in",c:"uW",i:["vec3"],g:!1},{a:"node_out",c:"uX",i:["vec3"],g:!1}],u:[{a:"txt",b:"uX = uR ; uS ; uT ; uU ; uV ; uW ;".split(" ")}]},{a:"node",c:"BSDF_DIFFUSE",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"uY",i:["vec3"],g:!1},{a:"node_in",c:"uZ",i:["float"],
g:!1},{a:"node_in",c:"u_",i:["vec3"],g:!1},{a:"node_out",c:"va",i:["vec3"],g:!1},{a:"node_out",c:"vb",i:["vec3"],g:!1},{a:"node_out",c:"vc",i:["float"],g:!1},{a:"node_out",c:"vd",i:["vec3"],g:!1},{a:"node_out",c:"ve",i:["float"],g:!1},{a:"node_out",c:"vf",i:["float"],g:!1},{a:"node_out",c:"vg",i:["vec3"],g:!1},{a:"node_out",c:"vh",i:["vec3"],g:!1},{a:"node_out",c:"vi",i:["float"],g:!1},{a:"node_out",c:"vj",i:["vec3"],g:!1},{a:"node_out",c:"vk",i:["float"],g:!1}],u:[{a:"txt",b:"vb = uY ; vc = uZ ; ve = _1_0 ; vf = _0_0 ; vi = _0_0 ; vk = _1_0 ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vg","=","u_",";"]}]},{a:"node_else",u:[{a:"txt",b:["vg","=","ot",";"]}]}]},{a:"txt",b:"va ; vd = vec3 ( _0_0 ) ; vh = vec3 ( _0_0 ) ; vj = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"BSDF_GLASS",C:[],B:[{a:"node_in",c:"vl",i:["vec3"],g:!1},{a:"node_in",c:"vm",i:["float"],g:!1},{a:"node_in",c:"vn",i:["float"],g:!1},{a:"node_in",c:"vo",i:["vec3"],g:!1},{a:"node_out",c:"vp",i:["vec3"],g:!1}],u:[{a:"txt",b:"vp = vl ; vm ; vn ; vo ;".split(" ")}]},
{a:"node",c:"BSDF_GLOSSY",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"vq",i:["vec3"],g:!1},{a:"node_in",c:"vr",i:["float"],g:!1},{a:"node_in",c:"vs",i:["vec3"],g:!1},{a:"node_out",c:"vt",i:["vec3"],g:!1},{a:"node_out",c:"vu",i:["vec3"],g:!1},{a:"node_out",c:"vv",i:["float"],g:!1},{a:"node_out",c:"vw",i:["vec3"],g:!1},{a:"node_out",c:"vx",i:["float"],g:!1},{a:"node_out",c:"vy",i:["float"],g:!1},{a:"node_out",c:"vz",i:["vec3"],g:!1},{a:"node_out",c:"vA",i:["vec3"],g:!1},{a:"node_out",
c:"vB",i:["float"],g:!1},{a:"node_out",c:"vC",i:["vec3"],g:!1},{a:"node_out",c:"vD",i:["float"],g:!1}],u:[{a:"txt",b:"vw = vq ; vx = vr ; vy = _1_0 ; vB = _0_0 ; vD = _1_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vz","=","vs",";"]}]},{a:"node_else",u:[{a:"txt",b:["vz","=","ot",";"]}]}]},{a:"txt",b:"vt ; vu = vec3 ( _0_0 ) ; vv = _0_0 ; vA = vec3 ( _0_0 ) ; vC = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"BSDF_HAIR",C:[],B:[{a:"node_in",c:"vE",i:["vec3"],g:!1},
{a:"node_in",c:"vF",i:["float"],g:!1},{a:"node_in",c:"vG",i:["float"],g:!1},{a:"node_in",c:"vH",i:["float"],g:!1},{a:"node_out",c:"vI",i:["vec3"],g:!1}],u:[{a:"txt",b:"vI = vE ; vF ; vG ; vH ;".split(" ")}]},{a:"node",c:"BSDF_TRANSPARENT",C:[],B:[{a:"node_in",c:"vJ",i:["vec3"],g:!1},{a:"node_out",c:"vK",i:["vec3"],g:!1},{a:"node_out",c:"vL",i:["vec3"],g:!1},{a:"node_out",c:"vM",i:["float"],g:!1},{a:"node_out",c:"vN",i:["vec3"],g:!1},{a:"node_out",c:"vO",i:["float"],g:!1},{a:"node_out",c:"vP",i:["float"],
g:!1},{a:"node_out",c:"vQ",i:["vec3"],g:!1},{a:"node_out",c:"vR",i:["vec3"],g:!1},{a:"node_out",c:"vS",i:["float"],g:!1},{a:"node_out",c:"vT",i:["vec3"],g:!1},{a:"node_out",c:"vU",i:["float"],g:!1}],u:[{a:"txt",b:"vT = vJ ; vP = _0_0 ; vS = _0_0 ; vU = _0_0 ; vQ = ot ; vK ; vL = vec3 ( _0_0 ) ; vM = _0_0 ; vN = vec3 ( _0_0 ) ; vO = _0_0 ; vR = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"BSDF_TRANSLUCENT",C:[],B:[{a:"node_in",c:"vV",i:["vec3"],g:!1},{a:"node_in",c:"vW",i:["vec3"],g:!1},{a:"node_out",
c:"vX",i:["vec3"],g:!1}],u:[{a:"txt",b:"vX = vV ; vW ;".split(" ")}]},{a:"node",c:"BSDF_REFRACTION",C:[],B:[{a:"node_in",c:"vY",i:["vec3"],g:!1},{a:"node_in",c:"vZ",i:["float"],g:!1},{a:"node_in",c:"v_",i:["float"],g:!1},{a:"node_in",c:"wa",i:["vec3"],g:!1},{a:"node_out",c:"wb",i:["vec3"],g:!1}],u:[{a:"txt",b:"wb [ 0 ] = wb [ 1 ] = wb [ 2 ] = _0_0 ; vY ; vZ ; v_ ; wa ;".split(" ")}]},{a:"node",c:"BSDF_TOON",C:[],B:[{a:"node_in",c:"wc",i:["vec3"],g:!1},{a:"node_in",c:"wd",i:["float"],g:!1},{a:"node_in",
c:"we",i:["float"],g:!1},{a:"node_in",c:"wf",i:["vec3"],g:!1},{a:"node_out",c:"wg",i:["vec3"],g:!1}],u:[{a:"txt",b:"wg = wc ; wd ; we ; wf ;".split(" ")}]},{a:"node",c:"BSDF_VELVET",C:[],B:[{a:"node_in",c:"wh",i:["vec3"],g:!1},{a:"node_in",c:"wi",i:["float"],g:!1},{a:"node_in",c:"wj",i:["vec3"],g:!1},{a:"node_out",c:"wk",i:["vec3"],g:!1}],u:[{a:"txt",b:"wk = wh ; wi ; wj ;".split(" ")}]},{a:"node",c:"SUBSURFACE_SCATTERING",C:[],B:[{a:"node_in",c:"wl",i:["vec3"],g:!1},{a:"node_in",c:"wm",i:["float"],
g:!1},{a:"node_in",c:"wn",i:["vec3"],g:!1},{a:"node_in",c:"wo",i:["float"],g:!1},{a:"node_in",c:"wp",i:["float"],g:!1},{a:"node_in",c:"wq",i:["vec3"],g:!1},{a:"node_out",c:"wr",i:["vec3"],g:!1}],u:[{a:"txt",b:"wr [ 0 ] = wr [ 1 ] = wr [ 2 ] = _0_0 ; wl ; wn ; wo ; wp ; wq ; wm ;".split(" ")}]},{a:"node",c:"EMISSION",C:[],B:[{a:"node_in",c:"ws",i:["vec3"],g:!1},{a:"node_in",c:"wt",i:["float"],g:!1},{a:"node_out",c:"wu",i:["vec3"],g:!1},{a:"node_out",c:"wv",i:["vec3"],g:!1},{a:"node_out",c:"wA",i:["float"],
g:!1},{a:"node_out",c:"wB",i:["vec3"],g:!1},{a:"node_out",c:"wC",i:["float"],g:!1},{a:"node_out",c:"wD",i:["float"],g:!1},{a:"node_out",c:"wE",i:["vec3"],g:!1},{a:"node_out",c:"wF",i:["vec3"],g:!1},{a:"node_out",c:"wG",i:["float"],g:!1},{a:"node_out",c:"wH",i:["vec3"],g:!1},{a:"node_out",c:"wI",i:["float"],g:!1}],u:[{a:"txt",b:"wF = wt * ws ; wD = _0_0 ; wG = _1_0 ; wI = _1_0 ; wE = ot ; wu ; wv = vec3 ( _0_0 ) ; wA = _0_0 ; wB = vec3 ( _0_0 ) ; wC = _0_0 ;".split(" ")}]},{a:"node",c:"AMBIENT_OCCLUSION",
C:[],B:[{a:"node_in",c:"wJ",i:["vec3"],g:!1},{a:"node_out",c:"wK",i:["vec3"],g:!1}],u:[{a:"txt",b:"wK [ 0 ] = wK [ 1 ] = wK [ 2 ] = _0_0 ; wJ ;".split(" ")}]},{a:"node",c:"HOLDOUT",C:[],B:[{a:"node_out",c:"wL",i:["vec3"],g:!1}],u:[{a:"txt",b:"wL [ 0 ] = wL [ 1 ] = wL [ 2 ] = _0_0 ;".split(" ")}]},{a:"node",c:"VOLUME_ABSORPTION",C:[],B:[{a:"node_in",c:"wM",i:["vec3"],g:!1},{a:"node_in",c:"wN",i:["float"],g:!1},{a:"node_out",c:"wO",i:["vec3"],g:!1}],u:[{a:"txt",b:"wO [ 0 ] = wO [ 1 ] = wO [ 2 ] = _0_0 ; wM ; wN ;".split(" ")}]},
{a:"node",c:"VOLUME_SCATTER",C:[],B:[{a:"node_in",c:"wP",i:["vec3"],g:!1},{a:"node_in",c:"wQ",i:["float"],g:!1},{a:"node_in",c:"wR",i:["float"],g:!1},{a:"node_out",c:"wS",i:["vec3"],g:!1}],u:[{a:"txt",b:"wS [ 0 ] = wS [ 1 ] = wS [ 2 ] = _0_0 ; wP ; wQ ; wR ;".split(" ")}]},{a:"node",c:"BUMP",C:[{a:"node_var",c:"INVERT",b:["0"]},{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"wT",i:["float"],g:!1},{a:"node_in",c:"wU",i:["float"],g:!1},{a:"node_in",c:"wV",i:["float"],g:!1},{a:"node_in",
c:"wW",i:["vec3"],g:!1},{a:"node_out",c:"wX",i:["vec3"],g:!1}],u:[{a:"txt",b:"float aM = wU ; float gH = wT ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["INVERT"],u:[{a:"txt",b:["aM","=","-","_1_0",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vec3","U","=","wW",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","U","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_DERIVATIVES_EXT"],u:[{a:"txt",b:"vec3 wY = dFdx ( os ) ; vec3 wZ = dFdy ( os ) ; vec3 w_ = cross ( wZ , U ) ; vec3 xa = cross ( U , wY ) ; float dv = dot ( wY , w_ ) ; float xb = abs ( dv ) ; vec3 xc = dFdx ( wV ) * w_ + dFdy ( wV ) * xa ; gH = max ( gH , _0_0 ) ; wX = normalize ( xb * U - aM * sign ( dv ) * xc ) ; wX = normalize ( gH * wX + ( _1_0 - gH ) * U ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["wX","=","U",";"]}]}]}]},{a:"node",c:"DISPLACEMENT_BUMP",C:[],B:[{a:"node_in",c:"xd",i:["float"],g:!1},{a:"node_out",c:"xe",i:["vec3"],g:!1}],u:[{a:"txt",b:"float aM = 0.1 ; vec3 U = ot ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_DERIVATIVES_EXT"],u:[{a:"txt",b:"vec3 wY = dFdx ( os ) ; vec3 wZ = dFdy ( os ) ; vec3 w_ = cross ( wZ , U ) ; vec3 xa = cross ( U , wY ) ; float dv = dot ( wY , w_ ) ; float xb = abs ( dv ) ; vec3 xc = dFdx ( xd ) * w_ + dFdy ( xd ) * xa ; xe = normalize ( xb * U - aM * sign ( dv ) * xc ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["xe","=","U",";"]}]}]}]},{a:"node",c:"NORMAL_MAP",C:[{a:"node_var",c:"SPACE",b:["NM_TANGENT"]},{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"xf",i:["float"],g:!1},{a:"node_in",c:"xg",i:["vec4"],g:!1},{a:"node_in",c:"xh",i:["vec3"],g:!1},{a:"node_out",c:"xi",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vec3","xj","=","xh",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","xj","=","sy",";"]}]}]},{a:"node_cond",f:[{a:"node_if",
j:["SPACE","NM_TANGENT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi = sC * xi ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_OBJECT",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_OBJECT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ; xi = _ ( u_model_tsr , xi ) ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_WORLD",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_WORLD",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",
b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ;".split(" ")}]}]},{a:"txt",b:"float ma = max ( xf , _0_0 ) ; xi = normalize ( mix ( xj , xi , ma ) ) ;".split(" ")}]},{a:"node",c:"VECT_TRANSFORM",C:[{a:"node_var",c:"CONVERT_TYPE",b:["VT_WORLD_TO_OBJECT"]},{a:"node_var",c:"VECTOR_TYPE",b:["VT_VECTOR"]}],B:[{a:"node_in",c:"xk",i:["vec3"],g:!1},{a:"node_out",c:"xl",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{a:"equal_expr",o:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",
{a:"equal_expr",o:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],u:[{a:"txt",b:["xl","=","xk",";"]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_POINT",{a:"equal_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr_inverse , xk ) ;".split(" ")}]},
{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ; xl = ap ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",
{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ; xl = ap ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",
{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ; xl = _ ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ; xl = _ ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_NORMAL",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = normalize ( xl ) ;".split(" ")}]}]}]}]}]},{a:"node",c:"BLACKBODY",C:[],B:[{a:"node_in",c:"xm",i:["float"],g:!1},{a:"node_out",c:"xn",i:["vec3"],g:!1}],u:[{a:"txt",b:"xn [ 0 ] = xn [ 1 ] = xn [ 2 ] = _0_0 ; xm ;".split(" ")}]},{a:"node",c:"WAVELENGTH",C:[],B:[{a:"node_in",c:"xo",i:["float"],g:!1},{a:"node_out",c:"xp",i:["vec3"],g:!1}],u:[{a:"txt",b:"xp [ 0 ] = xp [ 1 ] = xp [ 2 ] = _0_0 ; xo ;".split(" ")}]},
{a:"node",c:"SEPXYZ",C:[],B:[{a:"node_in",c:"xq",i:["vec3"],g:!1},{a:"node_out",c:"xr",i:["float"],g:!1},{a:"node_out",c:"xs",i:["float"],g:!1},{a:"node_out",c:"xt",i:["float"],g:!1}],u:[{a:"txt",b:"xr = xq [ 0 ] ; xs = xq [ 1 ] ; xt = xq [ 2 ] ;".split(" ")}]},{a:"node",c:"COMBXYZ",C:[],B:[{a:"node_in",c:"xu",i:["float"],g:!1},{a:"node_in",c:"xv",i:["float"],g:!1},{a:"node_in",c:"xA",i:["float"],g:!1},{a:"node_out",c:"xB",i:["vec3"],g:!1}],u:[{a:"txt",b:"xB [ 0 ] = xu ; xB [ 1 ] = xv ; xB [ 2 ] = xA ;".split(" ")}]},
{a:"node",c:"BRIGHTCONTRAST",C:[],B:[{a:"node_in",c:"xC",i:["vec3"],g:!1},{a:"node_in",c:"xD",i:["float"],g:!1},{a:"node_in",c:"xE",i:["float"],g:!1},{a:"node_out",c:"xF",i:["vec3"],g:!1}],u:[{a:"txt",b:"float b = xD - xE * _0_5 ; xF = max ( ( _1_0 + xE ) * xC + b , vec3 ( _0_0 ) ) ;".split(" ")}]},{a:"node",c:"LIGHT_FALLOFF",C:[],B:[{a:"node_in",c:"xG",i:["float"],g:!1},{a:"node_in",c:"xH",i:["float"],g:!1},{a:"node_out",c:"xI",i:["float"],g:!1},{a:"node_out",c:"xJ",i:["float"],g:!1},{a:"node_out",
c:"xK",i:["float"],g:!1}],u:[{a:"txt",b:"xI = xJ = xK = _0_0 ; xG ; xH ;".split(" ")}]},{a:"node",c:"TEX_SKY",C:[],B:[{a:"node_in",c:"xL",i:["vec3"],g:!1},{a:"node_out",c:"xM",i:["vec3"],g:!1}],u:[{a:"txt",b:"xM [ 0 ] = xM [ 1 ] = xM [ 2 ] = _0_0 ; xL ;".split(" ")}]},{a:"node",c:"TEX_NOISE",C:[],B:[{a:"node_in",c:"xN",i:["vec3"],g:!1},{a:"node_in",c:"xO",i:["float"],g:!1},{a:"node_in",c:"xP",i:["float"],g:!1},{a:"node_in",c:"xQ",i:["float"],g:!1},{a:"node_out",c:"xR",i:["vec3"],g:!1},{a:"node_out",
c:"xS",i:["float"],g:!1}],u:[{a:"txt",b:"xR [ 0 ] = xR [ 1 ] = xR [ 2 ] = _0_0 ; xS = _1_0 ; xN ; xO ; xP ; xQ ;".split(" ")}]},{a:"node",c:"TEX_WAVE",C:[],B:[{a:"node_in",c:"xT",i:["vec3"],g:!1},{a:"node_in",c:"xU",i:["float"],g:!1},{a:"node_in",c:"xV",i:["float"],g:!1},{a:"node_in",c:"xW",i:["float"],g:!1},{a:"node_in",c:"xX",i:["float"],g:!1},{a:"node_out",c:"xY",i:["vec3"],g:!1},{a:"node_out",c:"xZ",i:["float"],g:!1}],u:[{a:"txt",b:"xY [ 0 ] = xY [ 1 ] = xY [ 2 ] = _0_0 ; xZ = _1_0 ; xT ; xU ; xV ; xW ; xX ;".split(" ")}]},
{a:"node",c:"TEX_VORONOI",C:[],B:[{a:"node_in",c:"x_",i:["vec3"],g:!1},{a:"node_in",c:"ya",i:["float"],g:!1},{a:"node_out",c:"yb",i:["vec3"],g:!1},{a:"node_out",c:"yc",i:["float"],g:!1}],u:[{a:"txt",b:"yb [ 0 ] = yb [ 1 ] = yb [ 2 ] = _0_0 ; yc = _1_0 ; x_ ; ya ;".split(" ")}]},{a:"node",c:"TEX_MUSGRAVE",C:[],B:[{a:"node_in",c:"yd",i:["vec3"],g:!1},{a:"node_in",c:"ye",i:["float"],g:!1},{a:"node_in",c:"yf",i:["float"],g:!1},{a:"node_in",c:"yg",i:["float"],g:!1},{a:"node_in",c:"yh",i:["float"],g:!1},
{a:"node_in",c:"yi",i:["float"],g:!1},{a:"node_in",c:"yj",i:["float"],g:!1},{a:"node_out",c:"yk",i:["vec3"],g:!1},{a:"node_out",c:"yl",i:["float"],g:!1}],u:[{a:"txt",b:"yk [ 0 ] = yk [ 1 ] = yk [ 2 ] = _0_0 ; yl = _1_0 ; yd ; ye ; yf ; yg ; yh ; yi ; yj ;".split(" ")}]},{a:"node",c:"TEX_GRADIENT",C:[],B:[{a:"node_in",c:"ym",i:["vec3"],g:!1},{a:"node_out",c:"yn",i:["vec3"],g:!1},{a:"node_out",c:"yo",i:["float"],g:!1}],u:[{a:"txt",b:"yn [ 0 ] = yn [ 1 ] = yn [ 2 ] = _0_0 ; yo = _1_0 ; ym ;".split(" ")}]},
{a:"node",c:"TEX_MAGIC",C:[],B:[{a:"node_in",c:"yp",i:["vec3"],g:!1},{a:"node_in",c:"yq",i:["float"],g:!1},{a:"node_in",c:"yr",i:["float"],g:!1},{a:"node_out",c:"ys",i:["vec3"],g:!1},{a:"node_out",c:"yt",i:["float"],g:!1}],u:[{a:"txt",b:"ys [ 0 ] = ys [ 1 ] = ys [ 2 ] = _0_0 ; yt = _1_0 ; yp ; yq ; yr ;".split(" ")}]},{a:"node",c:"TEX_CHECKER",C:[],B:[{a:"node_in",c:"yu",i:["vec3"],g:!1},{a:"node_in",c:"yv",i:["vec3"],g:!1},{a:"node_in",c:"yA",i:["vec3"],g:!1},{a:"node_in",c:"yB",i:["float"],g:!1},
{a:"node_out",c:"yC",i:["vec3"],g:!1},{a:"node_out",c:"yD",i:["float"],g:!1}],u:[{a:"txt",b:"yC [ 0 ] = yC [ 1 ] = yC [ 2 ] = _0_0 ; yD = _1_0 ; yu ; yv ; yA ; yB ;".split(" ")}]},{a:"node",c:"TEX_BRICK",C:[],B:[{a:"node_in",c:"yE",i:["vec3"],g:!1},{a:"node_in",c:"yF",i:["vec3"],g:!1},{a:"node_in",c:"yG",i:["vec3"],g:!1},{a:"node_in",c:"yH",i:["vec3"],g:!1},{a:"node_in",c:"yI",i:["float"],g:!1},{a:"node_in",c:"yJ",i:["float"],g:!1},{a:"node_in",c:"yK",i:["float"],g:!1},{a:"node_in",c:"yL",i:["float"],
g:!1},{a:"node_in",c:"yM",i:["float"],g:!1},{a:"node_out",c:"yN",i:["vec3"],g:!1},{a:"node_out",c:"yO",i:["float"],g:!1}],u:[{a:"txt",b:"yN [ 0 ] = yN [ 1 ] = yN [ 2 ] = _0_0 ; yO = _1_0 ; yE ; yF ; yG ; yH ; yI ; yJ ; yK ; yL ; yM ;".split(" ")}]},{a:"node",c:"ADD_SHADER",C:[],B:[{a:"node_in",c:"yP",i:["vec3"],g:!1},{a:"node_in",c:"yQ",i:["vec3"],g:!1},{a:"node_out",c:"yR",i:["vec3"],g:!1}],u:[{a:"txt",b:"yR = clamp ( yP + yQ , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},{a:"node",c:"MIX_SHADER",
C:[],B:[{a:"node_in",c:"yS",i:["float"],g:!1},{a:"node_in",c:"yT",i:["vec3"],g:!1},{a:"node_in",c:"yU",i:["vec3"],g:!1},{a:"node_in",c:"yV",i:["vec3"],g:!1},{a:"node_in",c:"yW",i:["float"],g:!1},{a:"node_in",c:"yX",i:["vec3"],g:!1},{a:"node_in",c:"yY",i:["float"],g:!1},{a:"node_in",c:"yZ",i:["float"],g:!1},{a:"node_in",c:"y_",i:["vec3"],g:!1},{a:"node_in",c:"za",i:["vec3"],g:!1},{a:"node_in",c:"zb",i:["float"],g:!1},{a:"node_in",c:"zc",i:["vec3"],g:!1},{a:"node_in",c:"zd",i:["float"],g:!1},{a:"node_in",
c:"ze",i:["vec3"],g:!1},{a:"node_in",c:"zf",i:["float"],g:!1},{a:"node_in",c:"zg",i:["vec3"],g:!1},{a:"node_in",c:"zh",i:["float"],g:!1},{a:"node_in",c:"zi",i:["float"],g:!1},{a:"node_in",c:"zj",i:["vec3"],g:!1},{a:"node_in",c:"zk",i:["vec3"],g:!1},{a:"node_in",c:"zl",i:["float"],g:!1},{a:"node_in",c:"zm",i:["vec3"],g:!1},{a:"node_in",c:"zn",i:["float"],g:!1},{a:"node_out",c:"zo",i:["vec3"],g:!1},{a:"node_out",c:"zp",i:["vec3"],g:!1},{a:"node_out",c:"zq",i:["float"],g:!1},{a:"node_out",c:"zr",i:["vec3"],
g:!1},{a:"node_out",c:"zs",i:["float"],g:!1},{a:"node_out",c:"zt",i:["float"],g:!1},{a:"node_out",c:"zu",i:["vec3"],g:!1},{a:"node_out",c:"zv",i:["vec3"],g:!1},{a:"node_out",c:"zA",i:["float"],g:!1},{a:"node_out",c:"zB",i:["vec3"],g:!1},{a:"node_out",c:"zC",i:["float"],g:!1}],u:[{a:"txt",b:"float zD = sqrt ( clamp ( yS , _0_0 , _1_0 ) ) ; zp = mix ( yV , ze , zD ) ; zq = mix ( yW , zf , zD ) ; if ( yZ > _0_0 ) { if ( zi > _0_0 ) { zr = mix ( yX , zg , zD ) ; zs = mix ( yY , zh , zD ) ; } else { zr = yX ; zs = yY ; } } else { zr = zg ; zs = zh ; } if ( zb > _0_0 ) { if ( zl > _0_0 ) { zv = mix ( za , zk , zD ) ; } else { zv = za ; } } else { zv = zk ; } zt = mix ( yZ , zi , zD ) ; zu = mix ( y_ , zj , zD ) ; zA = mix ( zb , zl , zD ) ; zB = mix ( zc , zm , zD ) ; zC = mix ( zd , zn , zD ) ;".split(" ")}]},
{a:"node",c:"UV_MERGED",C:[],B:[{a:"node_out",c:"zE",i:["vec3"],g:!1},{a:"node_out",c:"zF",i:["vec3"],g:!1},{a:"node_param",c:"sk",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zE"],u:[{a:"txt",b:"zE = rZ ( sk ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zF"],u:[{a:"txt",b:"zF = vec3 ( sk , _0_0 ) ;".split(" ")}]}]}]},{a:"node",c:"TEX_COORD_UV",C:[],B:[{a:"node_out",c:"zG",i:["vec3"],g:!1},{a:"node_param",c:"sl",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",
b:"zG = vec3 ( sl , _0_0 ) ;".split(" ")}]},{a:"node",c:"TEX_COORD_NO",C:[],B:[{a:"node_out",c:"zH",i:["vec3"],g:!1}],u:[{a:"txt",b:["zH","=","ot",";"]}]},{a:"node",c:"TEX_COORD_GE",C:[],B:[{a:"node_out",c:"zI",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["IS_WORLD",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["zI","=","rV",";"]}]},{a:"node_else",u:[{a:"txt",b:["zI","=","sv",";"]}]}]}]},{a:"node",c:"TEX_COORD_OB",C:[],B:[{a:"node_out",c:"zJ",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",
j:["IS_WORLD",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:"zJ = ap ( u_model_tsr_inverse , os ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["zJ","=","sv",";"]}]}]}]},{a:"node",c:"TEX_COORD_CA",C:[],B:[{a:"node_out",c:"zK",i:["vec3"],g:!1}],u:[{a:"txt",b:"zK . xy = sD . xy ; zK . z = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_WI",C:[],B:[{a:"node_out",c:"zL",i:["vec3"],g:!1}],u:[{a:"txt",b:"zL . xy = l . xy / l . z ; zL . z = _0_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_RE",C:[],B:[{a:"node_out",
c:"zM",i:["vec3"],g:!1}],u:[{a:"txt",b:"zM = reflect ( - ou , ot ) ;".split(" ")}]},{a:"node",c:"UVMAP",C:[],B:[{a:"node_out",c:"zN",i:["vec3"],g:!1},{a:"node_param",c:"sm",i:["GLSL_IN","vec2"],g:!1}],u:[{a:"txt",b:"zN = vec3 ( sm , _0_0 ) ;".split(" ")}]},{a:"node",c:"PARTICLE_INFO",C:[],B:[{a:"node_out",c:"zO",i:["float"],g:!1},{a:"node_out",c:"zP",i:["float"],g:!1},{a:"node_out",c:"zQ",i:["float"],g:!1},{a:"node_out",c:"zR",i:["vec3"],g:!1},{a:"node_out",c:"zS",i:["float"],g:!1},{a:"node_out",
c:"zT",i:["vec3"],g:!1},{a:"node_out",c:"zU",i:["vec3"],g:!1}],u:[{a:"txt",b:"zO = _0_0 ; zP = _0_0 ; zQ = _0_0 ; zR = vec3 ( _0_0 ) ; zS = _0_0 ; zT = zR ; zU = zR ;".split(" ")}]},{a:"node",c:"HAIR_INFO",C:[],B:[{a:"node_out",c:"zV",i:["float"],g:!1},{a:"node_out",c:"zW",i:["float"],g:!1},{a:"node_out",c:"zX",i:["float"],g:!1},{a:"node_out",c:"zY",i:["vec3"],g:!1}],u:[{a:"txt",b:"zV = _0_0 ; zW = _0_0 ; zX = _0_0 ; zY = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"OBJECT_INFO",C:[{a:"node_var",c:"USE_LOCATION_OUT",
b:["0"]},{a:"node_var",c:"USE_OBJ_IND_OUT",b:["0"]},{a:"node_var",c:"USE_MAT_IND_OUT",b:["0"]},{a:"node_var",c:"USE_RANDOM_OUT",b:["0"]}],B:[{a:"node_out",c:"zZ",i:["vec3"],g:!1},{a:"node_out",c:"z_",i:["float"],g:!1},{a:"node_out",c:"Aa",i:["float"],g:!1},{a:"node_out",c:"Ab",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_LOCATION_OUT"],u:[{a:"txt",b:"zZ = u_model_tsr [ 0 ] . xyz ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OBJ_IND_OUT"],u:[{a:"txt",b:"z_ = u_obj_info . r ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MAT_IND_OUT"],u:[{a:"txt",b:"Aa = u_obj_info . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_RANDOM_OUT"],u:[{a:"txt",b:"Ab = u_obj_info . b ;".split(" ")}]}]}]},{a:"node",c:"WIREFRAME",C:[],B:[{a:"node_in",c:"Ac",i:["float"],g:!1},{a:"node_out",c:"Ad",i:["float"],g:!1}],u:[{a:"txt",b:["Ad","=","Ac",";"]}]},{a:"node",c:"TANGENT",C:[],B:[{a:"node_out",c:"Ae",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ae = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"LAYER_WEIGHT",
C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"Af",i:["float"],g:!1},{a:"node_in",c:"Ag",i:["vec3"],g:!1},{a:"node_out",c:"Ah",i:["float"],g:!1},{a:"node_out",c:"Ai",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:"vec3 cr = normalize ( Ag ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["vec3","cr","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["CAMERA_TYPE","CAM_TYPE_PERSP",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 Aj = normalize ( ou ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["vec3","Aj","=","u_camera_direction",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ah"],u:[{a:"txt",b:"float sc = max ( _1_0 - Af , 0.00001 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"non_equal_expr",o:2}],u:[{a:"txt",b:"sc = gl_FrontFacing == false ? sc : _1_0 / sc ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"sc = gl_FrontFacing ? sc : _1_0 / sc ;".split(" ")}]}]},{a:"txt",b:"Ah = sd ( Aj , cr , sc ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["Ah","=","_0_0",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ai"],u:[{a:"txt",b:"Ai = abs ( dot ( Aj , cr ) ) ; float ew = Af ; if ( ew != _0_5 ) { ew = clamp ( ew , _0_0 , 0.99999 ) ; ew = ( ew < _0_5 ) ? 2.0 * ew : _0_5 / ( _1_0 - ew ) ; Ai = pow ( Ai , ew ) ; } Ai = _1_0 - Ai ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["Ai","=","_0_0",";"]}]}]}]},{a:"node",c:"LIGHT_PATH",C:[],B:[{a:"node_out",c:"Ak",i:["float"],g:!1},{a:"node_out",c:"Al",i:["float"],g:!1},
{a:"node_out",c:"Am",i:["float"],g:!1},{a:"node_out",c:"An",i:["float"],g:!1},{a:"node_out",c:"Ao",i:["float"],g:!1},{a:"node_out",c:"Ap",i:["float"],g:!1},{a:"node_out",c:"Aq",i:["float"],g:!1},{a:"node_out",c:"Ar",i:["float"],g:!1},{a:"node_out",c:"As",i:["float"],g:!1},{a:"node_out",c:"At",i:["float"],g:!1},{a:"node_out",c:"Au",i:["float"],g:!1}],u:[{a:"txt",b:"Ak = Al = Am = _0_0 ; An = Ao = Ap = _0_0 ; Aq = Au = As = At = _0_0 ; Ar = _0_0 ;".split(" ")}]},{a:"node",c:"ATTRIBUTE",C:[],B:[{a:"node_out",
c:"Av",i:["vec3"],g:!1},{a:"node_out",c:"Aw",i:["vec3"],g:!1},{a:"node_out",c:"Ax",i:["float"],g:!1}],u:[{a:"txt",b:"Av = Aw = vec3 ( _0_0 ) ; Ax = _0_0 ;".split(" ")}]},{a:"node",c:"SCRIPT",C:[],B:[],u:[]},{a:"node",c:"CURVE_VEC",C:[{a:"node_var",c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"Ay",i:["float"],g:!1},{a:"node_in",c:"Az",i:["vec3"],g:!1},{a:"node_out",c:"AA",i:["vec3"],g:!1}],u:[{a:"txt",
b:["AA","=","Az",";"]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AA . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AA . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AA . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},
{a:"txt",b:"AA = mix ( Az , AA , Ay ) ;".split(" ")}]},{a:"node",c:"CURVE_RGB",C:[{a:"node_var",c:"READ_A",b:["0"]},{a:"node_var",c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AB",i:["float"],g:!1},{a:"node_in",c:"AC",i:["vec3"],g:!1},{a:"node_out",c:"AD",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["READ_A"],u:[{a:"txt",b:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"float r = AC . r ; float g = AC . g ; float b = AC . b ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AD . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . r = r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AD . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . g = g ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AD . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . b = b ;".split(" ")}]}]},{a:"txt",b:"AD = mix ( AC , AD , AB ) ;".split(" ")}]},{a:"node",c:"VALTORGB",C:[{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AE",i:["float"],g:!1},{a:"node_out",c:"AF",i:["vec3"],g:!1},{a:"node_out",c:"AG",i:["float"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AE , NODE_TEX_ROW ) ) ; AF = AH . rgb ; AG = AH . a ;".split(" ")}]},
{a:"node",c:"MAPPING",C:[{a:"node_var",c:"MAPPING_SCALE_DEF",b:["0"]},{a:"node_var",c:"MAPPING_SCALE",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_TRANS_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRANS",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_TRS_MATRIX_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRS_MATRIX",b:["mat4","(","_1_0",")"]},{a:"node_var",c:"MAPPING_MIN_CLIP_DEF",b:["0"]},{a:"node_var",c:"MAPPING_MIN_CLIP",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_MAX_CLIP_DEF",b:["0"]},
{a:"node_var",c:"MAPPING_MAX_CLIP",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_IS_NORMAL",b:["0"]}],B:[{a:"node_in",c:"AI",i:["vec3"],g:!1},{a:"node_out",c:"AJ",i:["vec3"],g:!1}],u:[{a:"txt",b:["AJ","=","AI",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_SCALE_DEF"],u:[{a:"txt",b:"AJ = AJ * MAPPING_SCALE ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRANS_DEF"],u:[{a:"txt",b:"AJ = AJ + MAPPING_TRANS ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRS_MATRIX_DEF"],
u:[{a:"txt",b:"AJ = ( MAPPING_TRS_MATRIX * vec4 ( AJ , _1_0 ) ) . xyz ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MIN_CLIP_DEF"],u:[{a:"txt",b:"AJ = max ( AJ , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MAX_CLIP_DEF"],u:[{a:"txt",b:"AJ = min ( AJ , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_IS_NORMAL"],u:[{a:"txt",b:"AJ = normalize ( AJ ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ADD",C:[{a:"node_var",c:"MATH_USE_CLAMP",
b:["0"]}],B:[{a:"node_in",c:"AK",i:["float"],g:!1},{a:"node_in",c:"AL",i:["float"],g:!1},{a:"node_out",c:"AM",i:["float"],g:!1}],u:[{a:"txt",b:"AM = AK + AL ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AM = clamp ( AM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SUBTRACT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AN",i:["float"],g:!1},{a:"node_in",c:"AO",i:["float"],g:!1},{a:"node_out",c:"AP",i:["float"],g:!1}],u:[{a:"txt",b:"AP = AN - AO ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AP = clamp ( AP , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MULTIPLY",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AQ",i:["float"],g:!1},{a:"node_in",c:"AR",i:["float"],g:!1},{a:"node_out",c:"AS",i:["float"],g:!1}],u:[{a:"txt",b:"AS = AQ * AR ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AS = clamp ( AS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_DIVIDE",
C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AT",i:["float"],g:!1},{a:"node_in",c:"AU",i:["float"],g:!1},{a:"node_out",c:"AV",i:["float"],g:!1}],u:[{a:"txt",b:"AV = ( AU != _0_0 ) ? AT / AU : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AV = clamp ( AV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AW",i:["float"],g:!1},{a:"node_in",c:"AX",i:["float"],g:!1},
{a:"node_out",c:"AY",i:["float"],g:!1}],u:[{a:"txt",b:"AY = sin ( AW ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AY = clamp ( AY , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["AX",";"]}]},{a:"node",c:"MATH_COSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AZ",i:["float"],g:!1},{a:"node_in",c:"A_",i:["float"],g:!1},{a:"node_out",c:"Ba",i:["float"],g:!1}],u:[{a:"txt",b:"Ba = cos ( AZ ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"Ba = clamp ( Ba , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["A_",";"]}]},{a:"node",c:"MATH_TANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bb",i:["float"],g:!1},{a:"node_in",c:"Bc",i:["float"],g:!1},{a:"node_out",c:"Bd",i:["float"],g:!1}],u:[{a:"txt",b:"Bd = tan ( Bb ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bd = clamp ( Bd , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bc",";"]}]},{a:"node",c:"MATH_ARCSINE",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Be",i:["float"],g:!1},{a:"node_in",c:"Bf",i:["float"],g:!1},{a:"node_out",c:"Bg",i:["float"],g:!1}],u:[{a:"txt",b:"Bg = ( Be <= _1_0 && Be >= - _1_0 ) ? asin ( Be ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bg = clamp ( Bg , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bf",";"]}]},{a:"node",c:"MATH_ARCCOSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bh",i:["float"],g:!1},{a:"node_in",
c:"Bi",i:["float"],g:!1},{a:"node_out",c:"Bj",i:["float"],g:!1}],u:[{a:"txt",b:"Bj = ( Bh <= _1_0 && Bh >= - _1_0 ) ? acos ( Bh ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bj = clamp ( Bj , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bi",";"]}]},{a:"node",c:"MATH_ARCTANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bk",i:["float"],g:!1},{a:"node_in",c:"Bl",i:["float"],g:!1},{a:"node_out",c:"Bm",i:["float"],g:!1}],u:[{a:"txt",
b:"Bm = atan ( Bk ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bm = clamp ( Bm , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bl",";"]}]},{a:"node",c:"MATH_POWER",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bn",i:["float"],g:!1},{a:"node_in",c:"Bo",i:["float"],g:!1},{a:"node_out",c:"Bp",i:["float"],g:!1}],u:[{a:"txt",b:"if ( Bn < _0_0 && Bo != floor ( Bo ) ) Bp = _0_0 ; else if ( Bo == _0_0 ) Bp = _1_0 ; else if ( Bn < _0_0 ) Bp = mix ( _1_0 , - _1_0 , sign ( mod ( - Bo , 2.0 ) ) ) * pow ( - Bn , Bo ) ; else if ( Bn == _0_0 ) Bp = _0_0 ; else Bp = pow ( Bn , Bo ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bp = clamp ( Bp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_LOGARITHM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bq",i:["float"],g:!1},{a:"node_in",c:"Br",i:["float"],g:!1},{a:"node_out",c:"Bs",i:["float"],g:!1}],u:[{a:"txt",b:"Bs = ( Bq > _0_0 && Br > _0_0 ) ? log2 ( Bq ) / log2 ( Br ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bs = clamp ( Bs , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MATH_MINIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bt",i:["float"],g:!1},{a:"node_in",c:"Bu",i:["float"],g:!1},{a:"node_out",c:"Bv",i:["float"],g:!1}],u:[{a:"txt",b:"Bv = min ( Bt , Bu ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bv = clamp ( Bv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MAXIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bw",i:["float"],g:!1},{a:"node_in",c:"Bx",i:["float"],
g:!1},{a:"node_out",c:"By",i:["float"],g:!1}],u:[{a:"txt",b:"By = max ( Bw , Bx ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"By = clamp ( By , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ROUND",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bz",i:["float"],g:!1},{a:"node_in",c:"BA",i:["float"],g:!1},{a:"node_out",c:"BB",i:["float"],g:!1}],u:[{a:"txt",b:"BB = floor ( Bz + _0_5 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BB = clamp ( BB , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BA",";"]}]},{a:"node",c:"MATH_LESS_THAN",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BC",i:["float"],g:!1},{a:"node_in",c:"BD",i:["float"],g:!1},{a:"node_out",c:"BE",i:["float"],g:!1}],u:[{a:"txt",b:"BE = ( BC < BD ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BE = clamp ( BE , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_GREATER_THAN",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BF",i:["float"],g:!1},{a:"node_in",c:"BG",i:["float"],g:!1},{a:"node_out",c:"BH",i:["float"],g:!1}],u:[{a:"txt",b:"BH = ( BF > BG ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BH = clamp ( BH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MODULO",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BI",i:["float"],g:!1},{a:"node_in",c:"BJ",i:["float"],g:!1},{a:"node_out",c:"BK",
i:["float"],g:!1}],u:[{a:"txt",b:"BK = abs ( BJ ) > 0.000001 ? mod ( BI , BJ ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BK = clamp ( BK , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ABSOLUTE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BL",i:["float"],g:!1},{a:"node_in",c:"BM",i:["float"],g:!1},{a:"node_out",c:"BN",i:["float"],g:!1}],u:[{a:"txt",b:"BN = abs ( BL ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BN = clamp ( BN , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BM",";"]}]},{a:"node",c:"MIX_RGB_MIX",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BO",i:["float"],g:!1},{a:"node_in",c:"BP",i:["vec3"],g:!1},{a:"node_in",c:"BQ",i:["vec3"],g:!1},{a:"node_out",c:"BR",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BO , _0_0 , _1_0 ) ; BR = mix ( BP , BQ , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BR = clamp ( BR , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MIX_RGB_ADD",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BS",i:["float"],g:!1},{a:"node_in",c:"BT",i:["vec3"],g:!1},{a:"node_in",c:"BU",i:["vec3"],g:!1},{a:"node_out",c:"BV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BS , _0_0 , _1_0 ) ; BV = mix ( BT , BT + BU , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_MULTIPLY",C:[{a:"node_var",
c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BW",i:["float"],g:!1},{a:"node_in",c:"BX",i:["vec3"],g:!1},{a:"node_in",c:"BY",i:["vec3"],g:!1},{a:"node_out",c:"BZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BW , _0_0 , _1_0 ) ; BZ = mix ( BX , BX * BY , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BZ = clamp ( BZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SUBTRACT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"B_",i:["float"],g:!1},{a:"node_in",c:"Ca",i:["vec3"],g:!1},{a:"node_in",c:"Cb",i:["vec3"],g:!1},{a:"node_out",c:"Cc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( B_ , _0_0 , _1_0 ) ; Cc = mix ( Ca , Ca - Cb , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cc = clamp ( Cc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SCREEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cd",i:["float"],g:!1},{a:"node_in",c:"Ce",
i:["vec3"],g:!1},{a:"node_in",c:"Cf",i:["vec3"],g:!1},{a:"node_out",c:"Cg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Cg = vec3 ( _1_0 ) - ( vec3 ( Ch ) + zD * ( vec3 ( _1_0 ) - Cf ) ) * ( vec3 ( _1_0 ) - Ce ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cg = clamp ( Cg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIVIDE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Ci",
i:["float"],g:!1},{a:"node_in",c:"Cj",i:["vec3"],g:!1},{a:"node_in",c:"Ck",i:["vec3"],g:!1},{a:"node_out",c:"Cl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Ci , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Ck += step ( Ck , vec3 ( _0_0 ) ) ; Cl = Ch * Cj + zD * Cj / Ck ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cl = clamp ( Cl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIFFERENCE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"Cm",i:["float"],g:!1},{a:"node_in",c:"Cn",i:["vec3"],g:!1},{a:"node_in",c:"Co",i:["vec3"],g:!1},{a:"node_out",c:"Cp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cm , _0_0 , _1_0 ) ; Cp = mix ( Cn , abs ( Cn - Co ) , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cp = clamp ( Cp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DARKEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cq",i:["float"],g:!1},{a:"node_in",
c:"Cr",i:["vec3"],g:!1},{a:"node_in",c:"Cs",i:["vec3"],g:!1},{a:"node_out",c:"Ct",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cq , _0_0 , _1_0 ) ; Ct = min ( Cr . rgb , Cs . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Ct = clamp ( Ct , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LIGHTEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cu",i:["float"],g:!1},{a:"node_in",c:"Cv",i:["vec3"],g:!1},{a:"node_in",
c:"Cw",i:["vec3"],g:!1},{a:"node_out",c:"Cx",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cu , _0_0 , _1_0 ) ; Cx = max ( Cv . rgb , Cw . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cx = clamp ( Cx , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_OVERLAY",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cy",i:["float"],g:!1},{a:"node_in",c:"Cz",i:["vec3"],g:!1},{a:"node_in",c:"CA",i:["vec3"],g:!1},{a:"node_out",
c:"CB",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cy , _0_0 , _1_0 ) ; vec3 CC = vec3 ( _1_0 - zD ) ; CB = mix ( Cz * ( CC + 2.0 * zD * CA ) , vec3 ( _1_0 ) - ( CC + 2.0 * zD * ( vec3 ( _1_0 ) - CA ) ) * ( vec3 ( _1_0 ) - Cz ) , step ( _0_5 , Cz ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CB = clamp ( CB , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DODGE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CD",i:["float"],
g:!1},{a:"node_in",c:"CE",i:["vec3"],g:!1},{a:"node_in",c:"CF",i:["vec3"],g:!1},{a:"node_out",c:"CG",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CD , _0_0 , _1_0 ) ; vec3 CH = vec3 ( _1_0 ) - zD * CF ; vec3 CI = clamp ( CE / CH , _0_0 , _1_0 ) ; CG = mix ( mix ( CI , vec3 ( _1_0 ) , step ( CH , vec3 ( _0_0 ) ) ) , CE , step ( CE , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CG = clamp ( CG , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",
c:"MIX_RGB_BURN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CJ",i:["float"],g:!1},{a:"node_in",c:"CK",i:["vec3"],g:!1},{a:"node_in",c:"CL",i:["vec3"],g:!1},{a:"node_out",c:"CM",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CJ , _0_0 , _1_0 ) ; vec3 ko = vec3 ( _1_0 - zD ) ; vec3 CH = ko + zD * CL ; vec3 CI = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - CK ) / CH , _0_0 , _1_0 ) ; CM = mix ( CI , vec3 ( _0_0 ) , step ( CH , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CM = clamp ( CM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_HUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CN",i:["float"],g:!1},{a:"node_in",c:"CO",i:["vec3"],g:!1},{a:"node_in",c:"CP",i:["vec3"],g:!1},{a:"node_out",c:"CQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CN , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; CQ = CO ; CR = kf ( CP ) ; if ( CR . y != _0_0 ) { kg = kf ( CQ ) ; kg . x = CR . x ; CH = kh ( kg ) ; CQ = mix ( CQ , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CQ = clamp ( CQ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SATURATION",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CS",i:["float"],g:!1},{a:"node_in",c:"CT",i:["vec3"],g:!1},{a:"node_in",c:"CU",i:["vec3"],g:!1},{a:"node_out",c:"CV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CS , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; CV = CT ; vec3 kg , CR ; kg = kf ( CV ) ; if ( kg . y != _0_0 ) { CR = kf ( CU ) ; kg . y = Ch * kg . y + zD * CR . y ; CV = kh ( kg ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CV = clamp ( CV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_VALUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CW",i:["float"],g:!1},{a:"node_in",c:"CX",i:["vec3"],g:!1},{a:"node_in",c:"CY",i:["vec3"],g:!1},{a:"node_out",c:"CZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CW , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 kg , CR ; kg = kf ( CX ) ; CR = kf ( CY ) ; kg . z = Ch * kg . z + zD * CR . z ; CZ = kh ( kg ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CZ = clamp ( CZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_COLOR",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"C_",i:["float"],g:!1},{a:"node_in",c:"Da",i:["vec3"],g:!1},{a:"node_in",c:"Db",i:["vec3"],g:!1},{a:"node_out",c:"Dc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( C_ , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; Dc = Da ; CR = kf ( Db ) ; if ( CR . y != _0_0 ) { kg = kf ( Dc ) ; kg . x = CR . x ; kg . y = CR . y ; CH = kh ( kg ) ; Dc = mix ( Dc , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dc = clamp ( Dc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SOFT_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Dd",i:["float"],g:!1},{a:"node_in",c:"De",i:["vec3"],g:!1},{a:"node_in",c:"Df",i:["vec3"],g:!1},{a:"node_out",c:"Dg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 Dh = Df + De - Df * De ; Dg = De * ( vec3 ( Ch ) + vec3 ( zD ) * ( ( vec3 ( _1_0 ) - De ) * Df + Dh ) ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dg = clamp ( Dg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LINEAR_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Di",i:["float"],g:!1},{a:"node_in",c:"Dj",i:["vec3"],g:!1},{a:"node_in",c:"Dk",i:["vec3"],g:!1},{a:"node_out",c:"Dl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Di , _0_0 , _1_0 ) ; Dl = Dj + zD * ( 2.0 * Dk - vec3 ( _1_0 ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",
j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dl = clamp ( Dl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_WORLD_RGB",C:[],B:[{a:"node_in",c:"Dm",i:["float"],g:!1},{a:"node_in",c:"Dn",i:["vec3"],g:!1},{a:"node_in",c:"Do",i:["vec3"],g:!1},{a:"node_out",c:"Dp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dm , _0_0 , _1_0 ) ; Dp = mix ( Dn , Do , zD ) ;".split(" ")}]},{a:"node",c:"ADD_WORLD_RGB",C:[],B:[{a:"node_in",c:"Dq",i:["float"],g:!1},{a:"node_in",c:"Dr",i:["vec3"],g:!1},{a:"node_in",
c:"Ds",i:["vec3"],g:!1},{a:"node_out",c:"Dt",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dq , _0_0 , _1_0 ) ; Dt = mix ( Dr , Dr + Ds , zD ) ;".split(" ")}]},{a:"node",c:"OUTPUT",C:[],B:[{a:"node_in",c:"Du",i:["vec3"],g:!1},{a:"node_in",c:"Dv",i:["float"],g:!1}],u:[{a:"txt",b:"E = Du ; I = Dv ;".split(" ")}]},{a:"node",c:"OUTPUT_SURFACE",C:[],B:[{a:"node_in",c:"Dw",i:["vec3"],g:!1}],u:[{a:"txt",b:"E = Dw ; I = _1_0 ;".split(" ")}]},{a:"node",c:"OUTPUT_WORLD_SURFACE",C:[],B:[{a:"node_in",c:"Dx",
i:["vec3"],g:!1}],u:[{a:"txt",b:"E = Dx ; I = _1_0 ;".split(" ")}]},{a:"node",c:"MATERIAL_BEGIN",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_NORMAL",b:["0"]},{a:"node_var",c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"SHADELESS_MAT",b:["0"]}],B:[{a:"node_in",c:"Dy",i:["vec3"],g:!1},{a:"node_in",c:"Dz",i:["vec3"],g:!1},{a:"node_in",c:"DA",i:["float"],g:!1},{a:"node_in",c:"DB",i:["vec3"],g:!0},{a:"node_in",c:"DC",i:["float"],g:!0},{a:"node_out",c:"DD",i:["vec3"],g:!1},
{a:"node_out",c:"DE",i:["vec3"],g:!1},{a:"node_out",c:"DF",i:["vec3"],g:!1},{a:"node_out",c:"DG",i:["vec3"],g:!1},{a:"node_out",c:"DH",i:["vec3"],g:!1},{a:"node_out",c:"DI",i:["vec2"],g:!1},{a:"node_out",c:"DJ",i:["vec2"],g:!1},{a:"node_out",c:"DK",i:["vec4"],g:!1},{a:"node_param",c:"sn",i:["const","vec2"],g:!1},{a:"node_param",c:"so",i:["const","vec3"],g:!1}],u:[{a:"txt",b:"DF = clamp ( Dy , _0_0 , _1_0 ) ; DG = so [ 0 ] * clamp ( Dz , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",
j:["USE_MATERIAL_NORMAL"],u:[{a:"txt",b:"DH = normalize ( DB ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["DH","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["SHADELESS_MAT",{a:"logic_negative_expr",o:1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"txt",b:"DD = DC * DF ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DD = sE * DF ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:["DF","*=","DA",";"]}]}]},{a:"txt",b:"DE = sF * u_environment_energy * cz ( DH ) ; DK = cC ( DF ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],u:[{a:"txt",b:"DI = vec2 ( sn [ 0 ] , sn [ 1 ] ) ; DJ = vec2 ( so [ 1 ] , so [ 2 ] ) ;".split(" ")}]}]},{a:"txt",b:["H","=","DK",";"]}]},{a:"node_else",u:[{a:"txt",b:"DD = vec3 ( _0_0 ) ; DE = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATERIAL_END",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"USE_MATERIAL_SPECULAR",b:["0"]}],B:[{a:"node_in",c:"DL",i:["vec4"],g:!1},
{a:"node_in",c:"DM",i:["vec3"],g:!1},{a:"node_in",c:"DN",i:["vec3"],g:!1},{a:"node_in",c:"DO",i:["float"],g:!0},{a:"node_in",c:"DP",i:["float"],g:!0},{a:"node_in",c:"DQ",i:["float"],g:!0},{a:"node_out",c:"DR",i:["vec3"],g:!0},{a:"node_out",c:"DS",i:["float"],g:!0},{a:"node_out",c:"DT",i:["vec3"],g:!0},{a:"node_out",c:"DU",i:["vec3"],g:!0},{a:"node_out",c:"DV",i:["vec3"],g:!0},{a:"node_param",c:"sr",i:["float"],g:!1},{a:"node_param",c:"su",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DR"],
u:[{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:"DR = DL . rgb ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DR = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{a:"non_equal_expr",o:2},{a:"logical_and_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_TYPE","REFL_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"cL ( DR , ou , DN , DO , u_view_tsr_frag ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"cL ( DR , ou , DN , DO , mat3 ( _0_0 ) ) ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["DR","+=","DM",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DT"],u:[{a:"txt",b:["DT","=","DN",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DU"],u:[{a:"txt",b:"DU = DL . rgb ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DV"],u:[{a:"txt",b:["DV","=","DM",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( DQ , _0_0 , _1_0 ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * DP ; DS = clamp ( DQ * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( sr , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * su ; DS = sr * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["F","=","DM",";"]}]},{a:"node_else",u:[{a:"txt",b:"F = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"txt",b:["G","=","DN",";"]}]},{a:"node",c:"LIGHTING_AMBIENT",C:[],B:[{a:"node_in",c:"oL",i:["vec3"],g:!1},{a:"node_in",c:"oM",i:["vec3"],g:!1},{a:"node_in",c:"oN",i:["vec3"],g:!1},{a:"node_out",c:"oO",i:["vec4"],g:!1},{a:"node_out",c:"oP",i:["vec3"],g:!1}],u:[{a:"txt",b:"oO = vec4 ( oL + oN * oM , _0_0 ) ; oP = vec3 ( _0_0 ) ;".split(" ")}]},
{a:"node",c:"LIGHTING_LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_IND",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]},{a:"node_var",c:"LAMP_SHADOW_MAP_IND",b:["-","1"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]}],B:[{a:"node_in",c:"oQ",i:["vec4"],g:!1},{a:"node_out",c:"oR",i:["vec3"],g:!1},{a:"node_out",c:"oS",i:["vec2"],g:!1},{a:"node_out",c:"oT",i:["vec3"],g:!1},{a:"node_out",
c:"oU",i:["float"],g:!1}],u:[{a:"txt",b:"oS = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","HEMI",{a:"equal_expr",o:2}],u:[{a:"txt",b:["oU","=","_0_5",";"]}]},{a:"node_else",u:[{a:"txt",b:["oU","=","_0_0",";"]}]}]},{a:"txt",b:"oT = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_SHADOW_MAP_IND",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],
u:[{a:"txt",b:"oT *= oQ [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"vec3 oV = u_light_positions [ LAMP_IND ] . xyz ; oR = oV - os ; float aM = length ( oR ) ; oT *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oR = normalize ( oR ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 oX = u_light_directions [ LAMP_IND ] ; float oY = dot ( oR , oX ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oT *= oY ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"oT *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]},{a:"node_else",u:[{a:"txt",b:"oR = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{a:"node",c:"DIFFUSE_FRESNEL",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"oZ",i:["vec3"],g:!1},{a:"node_in",c:"o_",i:["vec2"],g:!1},{a:"node_in",c:"pa",i:["vec3"],g:!1},{a:"node_in",c:"pb",i:["float"],g:!1},{a:"node_in",c:"pc",i:["vec2"],
g:!1},{a:"node_out",c:"pd",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pa",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( oZ , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",b:"pd = _0_0 ; if ( o_ . r != _0_0 ) { float pf = ( _1_0 - pb ) * dot ( sb , oZ ) + pb ; if ( pc [ 0 ] == _0_0 ) { pd = _1_0 ; } else { float t = _1_0 + abs ( pf ) ; t = pc [ 1 ] + ( _1_0 - pc [ 1 ] ) * pow ( t , pc [ 0 ] ) ; pd = clamp ( t , _0_0 , _1_0 ) ; } pd = max ( pd , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_LAMBERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pg",i:["vec3"],g:!1},{a:"node_in",c:"ph",i:["vec2"],g:!1},{a:"node_in",c:"pi",i:["vec3"],g:!1},{a:"node_in",c:"pj",i:["float"],g:!1},{a:"node_out",c:"pk",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pi",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pg , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",
b:"pk = _0_0 ; if ( ph . r != _0_0 ) { float pf = ( _1_0 - pj ) * dot ( sb , pg ) + pj ; pk = max ( pf , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_OREN_NAYAR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pl",i:["vec3"],g:!1},{a:"node_in",c:"pm",i:["vec2"],g:!1},{a:"node_in",c:"pn",i:["vec3"],g:!1},{a:"node_in",c:"po",i:["float"],g:!1},{a:"node_in",c:"pr",i:["vec2"],g:!1},{a:"node_out",c:"pu",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pn",";"]},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pl , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",b:"pu = _0_0 ; if ( pm . r != _0_0 ) { float pf = ( _1_0 - po ) * dot ( sb , pl ) + po ; if ( pr [ 0 ] > _0_0 ) { float pv = max ( dot ( sb , ou ) , _0_0 ) ; float pw = pr [ 0 ] * pr [ 0 ] ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = pl - pf * sb ; vec3 py = ou - pv * sb ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) pu = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; pu = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else pu = pf ; pu = max ( pu , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_MINNAERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pD",i:["vec3"],g:!1},{a:"node_in",c:"pE",i:["vec2"],g:!1},{a:"node_in",c:"pF",i:["vec3"],g:!1},{a:"node_in",c:"pG",i:["float"],g:!1},{a:"node_in",c:"pH",i:["vec2"],g:!1},{a:"node_out",c:"pI",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pF",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pD , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},
{a:"txt",b:"pI = _0_0 ; if ( pE . r != _0_0 ) { float pf = ( _1_0 - pG ) * dot ( sb , pD ) + pG ; float pv = max ( dot ( sb , ou ) , _0_0 ) ; if ( pH [ 0 ] <= _1_0 ) pI = pf * pow ( max ( pv * pf , 0.1 ) , pH [ 0 ] - _1_0 ) ; else pI = pf * pow ( 1.0001 - pv , pH [ 0 ] - _1_0 ) ; pI = max ( pI , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pJ",i:["vec3"],g:!1},{a:"node_in",c:"pK",i:["vec2"],g:!1},{a:"node_in",c:"pL",i:["vec3"],
g:!1},{a:"node_in",c:"pM",i:["float"],g:!1},{a:"node_in",c:"pN",i:["vec2"],g:!1},{a:"node_out",c:"pO",i:["float"],g:!1}],u:[{a:"txt",b:["vec3","sb","=","pL",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pJ , B . xyz ) ; sb = cross ( pe , B . xyz ) ; sb = - normalize ( sb ) ;".split(" ")}]}]},{a:"txt",b:"pO = _0_0 ; if ( pK . r != _0_0 ) { float pf = ( _1_0 - pM ) * dot ( sb , pJ ) + pM ; float pP = acos ( pf ) ; if ( pP < pN [ 0 ] ) pO = _1_0 ; else if ( pP > ( pN [ 0 ] + pN [ 1 ] ) || pN [ 1 ] == _0_0 ) pO = _0_0 ; else pO = _1_0 - ( ( pP - pN [ 0 ] ) / pN [ 1 ] ) ; pO = max ( pO , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"SPECULAR_PHONG",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pQ",i:["vec3"],g:!1},{a:"node_in",c:"pR",i:["vec2"],g:!1},{a:"node_in",c:"pS",i:["vec3"],g:!1},{a:"node_in",c:"pT",i:["float"],g:!1},{a:"node_in",c:"pU",i:["vec2"],g:!1},{a:"node_out",c:"pV",i:["float"],g:!1}],u:[{a:"txt",b:"pV = _0_0 ; if ( pR . g == _1_0 ) { vec3 pW = normalize ( pQ + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pT == _0_0 ) { pV = dot ( B . xyz , pW ) ; pV = sqrt ( _1_0 - pV * pV ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"pV = ( _1_0 - pT ) * max ( dot ( pS , pW ) , _0_0 ) + pT ;".split(" ")}]}]},{a:"txt",b:"pV = pow ( pV , pU [ 0 ] ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_COOKTORR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pX",i:["vec3"],g:!1},{a:"node_in",c:"pY",i:["vec2"],g:!1},{a:"node_in",c:"pZ",i:["vec3"],g:!1},{a:"node_in",c:"p_",i:["float"],g:!1},{a:"node_in",c:"qa",i:["vec2"],g:!1},{a:"node_out",c:"qb",i:["float"],g:!1}],u:[{a:"txt",b:"qb = _0_0 ; if ( pY . g != _0_0 ) { vec3 pW = normalize ( pX + ou ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( p_ == _0_0 ) { qb = dot ( B . xyz , pW ) ; qb = sqrt ( _1_0 - qb * qb ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"qb = max ( dot ( pZ , pW ) , _0_0 ) ; qb = ( _1_0 - p_ ) * qb + p_ ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float pv = max ( dot ( B . xyz , ou ) , _0_0 ) ; pv = sqrt ( _1_0 - pv * pv ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float pv = max ( dot ( pZ , ou ) , _0_0 ) ;".split(" ")}]}]},
{a:"txt",b:"qb = pow ( qb , qa [ 0 ] ) ; qb = qb / ( 0.1 + pv ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_WARDISO",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qc",i:["vec3"],g:!1},{a:"node_in",c:"qd",i:["vec2"],g:!1},{a:"node_in",c:"qe",i:["vec3"],g:!1},{a:"node_in",c:"qf",i:["float"],g:!1},{a:"node_in",c:"qg",i:["vec2"],g:!1},{a:"node_out",c:"qh",i:["float"],g:!1}],u:[{a:"txt",b:"qh = _0_0 ; if ( qd . g == _1_0 ) { vec3 pW = normalize ( qc + ou ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; float pv = _0_0 ; float qj = _0_0 ; if ( qf == _0_0 ) { qi = dot ( B . xyz , pW ) ; pv = dot ( B . xyz , ou ) ; qj = dot ( B . xyz , qc ) ; qi = sqrt ( _1_0 - qi * qi ) ; pv = sqrt ( _1_0 - pv * pv ) ; qj = sqrt ( _1_0 - qj * qj ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = max ( dot ( qe , pW ) , 0.01 ) ; float pv = max ( dot ( qe , ou ) , 0.01 ) ; float qj = max ( dot ( qe , qc ) , 0.01 ) ;".split(" ")}]}]},
{a:"txt",b:"float bK = tan ( acos ( qi ) ) ; float L = max ( qg [ 0 ] , 0.01 ) ; qh = qj * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bK * bK ) / ( L * L ) ) / ( sqrt ( pv * qj ) ) ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qk",i:["vec3"],g:!1},{a:"node_in",c:"ql",i:["vec2"],g:!1},{a:"node_in",c:"qm",i:["vec3"],g:!1},{a:"node_in",c:"qn",i:["float"],g:!1},{a:"node_in",c:"qo",i:["vec2"],g:!1},{a:"node_out",c:"qr",i:["float"],
g:!1}],u:[{a:"txt",b:"qr = _0_0 ; if ( ql . g == _1_0 ) { vec3 cj = normalize ( qk + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qu = dot ( cj , B . xyz ) ; float bK = qo [ 0 ] + qo [ 1 ] ; if ( qn == _0_0 ) bK = acos ( sqrt ( _1_0 - qu * qu ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float bK = acos ( dot ( cj , qm ) ) ;".split(" ")}]}]},{a:"txt",b:"if ( bK < qo [ 0 ] ) qr = _1_0 ; else if ( bK >= qo [ 0 ] + qo [ 1 ] || qo [ 1 ] == _0_0 ) qr = _0_0 ; else qr = _1_0 - ( bK - qo [ 0 ] ) / qo [ 1 ] ; }".split(" ")}]},
{a:"node",c:"SPECULAR_BLINN",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qv",i:["vec3"],g:!1},{a:"node_in",c:"qw",i:["vec2"],g:!1},{a:"node_in",c:"qx",i:["vec3"],g:!1},{a:"node_in",c:"qy",i:["float"],g:!1},{a:"node_in",c:"qz",i:["vec2"],g:!1},{a:"node_out",c:"qA",i:["float"],g:!1}],u:[{a:"txt",b:"float qB = qz [ 0 ] ; float qC = qz [ 1 ] ; qA = _0_0 ; if ( qw . g == _1_0 ) { if ( qB < _1_0 || qC == _0_0 ) qA = _0_0 ; else { if ( qC < 100.0 ) qC = sqrt ( _1_0 / qC ) ; else qC = 10.0 / qC ; vec3 pW = normalize ( ou + qv ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; if ( qy == _0_0 ) { float qD = dot ( B . xyz , pW ) ; qi = sqrt ( _1_0 - qD * qD ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = ( _1_0 - qy ) * max ( dot ( qx , pW ) , _0_0 ) + qy ;".split(" ")}]}]},{a:"txt",b:"if ( qi < _0_0 ) qA = _0_0 ; else { float pv = max ( dot ( qx , ou ) , 0.01 ) ; float qj = dot ( qx , qv ) ; if ( qj <= 0.01 ) qA = _0_0 ; else { float qE = max ( dot ( ou , pW ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qi * pv ) / qE ; float du = ( 2.0 * qi * qj ) / qE ; float g = min ( min ( a , b ) , du ) ; float p = sqrt ( pow ( qB , 2.0 ) + pow ( qE , 2.0 ) - _1_0 ) ; float mi = pow ( p - qE , 2.0 ) / pow ( p + qE , 2.0 ) * ( _1_0 + pow ( qE * ( p + qE ) - _1_0 , 2.0 ) / pow ( qE * ( p - qE ) + _1_0 , 2.0 ) ) ; float pP = acos ( qi ) ; qA = max ( mi * g * exp ( - pow ( pP , 2.0 ) / ( 2.0 * pow ( qC , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{a:"node",c:"LIGHTING_APPLY",C:[],B:[{a:"node_in",c:"qF",i:["vec4"],g:!1},{a:"node_in",c:"qG",i:["vec3"],g:!1},{a:"node_in",c:"qH",i:["float"],g:!1},{a:"node_in",c:"qI",i:["float"],g:!1},{a:"node_in",c:"qJ",i:["vec3"],g:!1},{a:"node_in",c:"qK",i:["vec3"],g:!1},{a:"node_in",c:"qL",i:["vec4"],g:!1},{a:"node_in",c:"qM",i:["vec3"],g:!1},{a:"node_in",c:"qN",i:["vec3"],g:!1},{a:"node_in",c:"qO",i:["vec3"],g:!1},{a:"node_in",c:"qP",i:["float"],g:!1},{a:"node_out",c:"qQ",i:["vec4"],g:!1},{a:"node_out",c:"qR",
i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_B4W_TRANSLUCENCY"],u:[{a:"txt",b:"if ( dot ( qJ , qK ) * dot ( ou , qK ) < _0_0 ) { float DW = qL . x ; float DX = qL . y ; float DY = qL . z ; float DZ = qL . w ; float D_ = clamp ( abs ( dot ( qJ , qK ) ) , _0_0 , _1_0 ) ; float Ea = clamp ( dot ( ou , - qJ ) , _0_0 , _1_0 ) ; float Eb = pow ( Ea , DX ) ; qQ = qF + qP * vec4 ( qO * D_ * pow ( qM , vec3 ( DW ) ) , _1_0 ) ; qQ += DY * mix ( vec4 ( qM , _1_0 ) , vec4 ( _1_0 ) , DZ ) * qP * vec4 ( qO * D_ * vec3 ( Eb ) , _1_0 ) ; } else { qQ = qF + vec4 ( qO * qM * qH , qI ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"qQ = qF + vec4 ( qO * qM * qH , qI ) ;".split(" ")}]}]},{a:"txt",b:"qR = qG + qO * qN * qI ;".split(" ")}]},{a:"node",c:"RGB",C:[{a:"node_var",c:"RGB_IND",b:["0"]}],B:[{a:"node_out",c:"Ec",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ec = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{a:"node",c:"RGBTOBW",C:[],B:[{a:"node_in",c:"Ed",i:["vec3"],g:!1},{a:"node_out",c:"Ee",i:["float"],g:!1}],u:[{a:"txt",b:"Ee = dot ( Ed , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},{a:"node",c:"SEPRGB",
C:[],B:[{a:"node_in",c:"Ef",i:["vec3"],g:!1},{a:"node_out",c:"Eg",i:["float"],g:!0},{a:"node_out",c:"Eh",i:["float"],g:!0},{a:"node_out",c:"Ei",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eg"],u:[{a:"txt",b:"Eg = Ef . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eh"],u:[{a:"txt",b:"Eh = Ef . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ei"],u:[{a:"txt",b:"Ei = Ef . b ;".split(" ")}]}]}]},{a:"node",c:"SEPHSV",C:[],B:[{a:"node_in",c:"Ej",i:["vec3"],
g:!1},{a:"node_out",c:"Ek",i:["float"],g:!0},{a:"node_out",c:"El",i:["float"],g:!0},{a:"node_out",c:"Em",i:["float"],g:!0}],u:[{a:"txt",b:"vec3 En = kf ( Ej ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ek"],u:[{a:"txt",b:"Ek = En . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_El"],u:[{a:"txt",b:"El = En . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Em"],u:[{a:"txt",b:"Em = En . b ;".split(" ")}]}]}]},{a:"node",c:"SQUEEZE",C:[],B:[{a:"node_in",
c:"Eo",i:["float"],g:!1},{a:"node_in",c:"Ep",i:["float"],g:!1},{a:"node_in",c:"Eq",i:["float"],g:!1},{a:"node_out",c:"Er",i:["float"],g:!1}],u:[{a:"txt",b:"Er = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( Eo - Eq ) * Ep ) ) ;".split(" ")}]},{a:"node",c:"GAMMA",C:[],B:[{a:"node_in",c:"Es",i:["vec3"],g:!1},{a:"node_in",c:"Et",i:["float"],g:!1},{a:"node_out",c:"Eu",i:["vec3"],g:!1}],u:[{a:"txt",b:"Eu = Es ; if ( Eu . x > _0_0 ) Eu . x = pow ( Es . x , Et ) ; if ( Eu . y > _0_0 ) Eu . y = pow ( Es . y , Et ) ; if ( Eu . z > _0_0 ) Eu . z = pow ( Es . z , Et ) ;".split(" ")}]},
{a:"node",c:"B4W_SRGB_TO_LINEAR",C:[],B:[{a:"node_in",c:"Ev",i:["vec3"],g:!1},{a:"node_out",c:"Ew",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ew = max ( vec3 ( _0_0 ) , Ev ) ; Ew = pow ( Ew , vec3 ( 2.2 ) ) ;".split(" ")}]},{a:"node",c:"B4W_LINEAR_TO_SRGB",C:[],B:[{a:"node_in",c:"Ex",i:["vec3"],g:!1},{a:"node_out",c:"Ey",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ey = max ( vec3 ( _0_0 ) , Ex ) ; Ey = pow ( Ey , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{a:"node",c:"TEXTURE_EMPTY",C:[],B:[{a:"node_out",c:"Ez",i:["vec3"],
g:!1},{a:"node_out",c:"EA",i:["vec3"],g:!1},{a:"node_out",c:"EB",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ez"],u:[{a:"txt",b:"Ez [ 2 ] = Ez [ 1 ] = Ez [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EA"],u:[{a:"txt",b:"EA [ 2 ] = EA [ 1 ] = EA [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EB"],u:[{a:"txt",b:["EB","=","_0_0",";"]}]}]}]},{a:"node",c:"TEXTURE_ENVIRONMENT_CUBE",C:[],B:[{a:"node_in",c:"EC",i:["vec3"],g:!1},
{a:"node_out",c:"ED",i:["vec3"],g:!0},{a:"node_out",c:"EE",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_CUBE_var_texture",i:["uniform","samplerCube"],g:!1}],u:[{a:"txt",b:"vec3 EF = vec3 ( EC . x , EC . y , EC . z ) ; vec4 AH = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_CUBE_var_texture , EF ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ED"],u:[{a:"txt",b:"ED = AH . xyz ; bC ( ED ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EE"],u:[{a:"txt",b:"EE = AH . w ;".split(" ")}]}]}]},
{a:"node",c:"TEXTURE_ENVIRONMENT_EQUIRECTANGULAR",C:[{a:"node_var",c:"USE_VECTOR_IN",b:["0"]}],B:[{a:"node_in",c:"EG",i:["vec3"],g:!1},{a:"node_out",c:"EH",i:["vec3"],g:!1},{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_VECTOR_IN"],u:[{a:"txt",b:"vec3 EI = normalize ( EG ) ;".split(" ")}]},{a:"node_elif",j:["IS_WORLD"],u:[{a:"txt",b:["vec3","EI","=","sv",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3",
"EI","=","ot",";"]}]}]},{a:"txt",b:"float dC = - atan ( EI . y , EI . x ) / ( 2.0 * M_PI ) + _0_5 ; float kQ = atan ( EI . z , sqrt ( EI . x * EI . x + EI . y * EI . y ) ) / M_PI + _0_5 ; vec4 AH = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture , vec2 ( dC , kQ ) ) ; EH = AH . xyz ; bC ( EH ) ;".split(" ")}]},{a:"node",c:"TEXTURE_ENVIRONMENT_MIRROR_BALL",C:[{a:"node_var",c:"USE_VECTOR_IN",b:["0"]}],B:[{a:"node_in",c:"EJ",i:["vec3"],g:!1},{a:"node_out",c:"EK",i:["vec3"],g:!1},
{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_VECTOR_IN"],u:[{a:"txt",b:"vec3 EI = normalize ( EJ ) ;".split(" ")}]},{a:"node_elif",j:["IS_WORLD"],u:[{a:"txt",b:["vec3","EI","=","sv",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","EI","=","ot",";"]}]}]},{a:"txt",b:"EI . y -= _1_0 ; float EL = 2.0 * sqrt ( max ( - _0_5 * EI . y , _0_0 ) ) ; if ( EL > _0_0 ) EI /= EL ; float dC = _0_5 * ( EI . x + _1_0 ) ; float kQ = _0_5 * ( EI . z + _1_0 ) ; vec4 AH = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture , vec2 ( dC , kQ ) ) ; EK = AH . xyz ; bC ( EK ) ;".split(" ")}]},
{a:"node",c:"TEXTURE_COLOR",C:[{a:"node_var",c:"NON_COLOR",b:["0"]},{a:"node_var",c:"CONVERT_UV",b:["0"]},{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EM",i:["vec3"],g:!0},{a:"node_in",c:"EN",i:["vec3"],g:!0},{a:"node_in",c:"EO",i:["vec3"],g:!0},{a:"node_in",c:"EP",i:["vec3"],g:!0},{a:"node_out",c:"EQ",i:["vec3"],g:!0},{a:"node_out",c:"ER",i:["float"],g:!0},{a:"node_out",c:"ES",i:["vec3"],g:!0},{a:"node_out",c:"ET",i:["float"],
g:!0},{a:"node_out",c:"EU",i:["vec3"],g:!0},{a:"node_out",c:"EV",i:["float"],g:!0},{a:"node_out",c:"EW",i:["vec3"],g:!0},{a:"node_out",c:"EX",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_COLOR_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_UV"],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EM ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EM . xy ) ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EQ"],u:[{a:"txt",b:"EQ = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EQ",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ER"],u:[{a:"txt",b:"ER = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_UV"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EN ) ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EN . xy ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ES"],u:[{a:"txt",b:"ES = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","ES",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ET"],u:[{a:"txt",b:"ET = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],u:[{a:"node_cond",f:[{a:"node_if",
j:["CONVERT_UV"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EO ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EO . xy ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EU"],u:[{a:"txt",b:"EU = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EU",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EV"],u:[{a:"txt",
b:"EV = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_UV"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EP ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , EP . xy ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EW"],u:[{a:"txt",b:"EW = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",
o:1}],u:[{a:"txt",b:["bC","(","EW",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EX"],u:[{a:"txt",b:"EX = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"TEXTURE_NORMAL",C:[{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EY",i:["vec3"],g:!0},{a:"node_in",c:"EZ",i:["vec3"],g:!0},{a:"node_in",c:"E_",i:["vec3"],g:!0},{a:"node_in",c:"Fa",i:["vec3"],g:!0},{a:"node_out",c:"Fb",i:["vec3"],g:!0},{a:"node_out",c:"Fc",
i:["float"],g:!0},{a:"node_out",c:"Fd",i:["vec3"],g:!0},{a:"node_out",c:"Fe",i:["float"],g:!0},{a:"node_out",c:"Ff",i:["vec3"],g:!0},{a:"node_out",c:"Fg",i:["float"],g:!0},{a:"node_out",c:"Fh",i:["vec3"],g:!0},{a:"node_out",c:"Fi",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_NORMAL_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EY ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fb"],u:[{a:"txt",b:"Fb = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fc"],u:[{a:"txt",b:"Fc = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EZ ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fd"],u:[{a:"txt",b:"Fd = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fe"],u:[{a:"txt",b:"Fe = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],
u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( E_ ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ff"],u:[{a:"txt",b:"Ff = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fg"],u:[{a:"txt",b:"Fg = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( Fa ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fh"],
u:[{a:"txt",b:"Fh = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fi"],u:[{a:"txt",b:"Fi = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"VALUE",C:[{a:"node_var",c:"VALUE_ROW_IND",b:["0"]},{a:"node_var",c:"VALUE_COL_IND",b:["0"]}],B:[{a:"node_out",c:"Fj",i:["float"],g:!1}],u:[{a:"txt",b:"Fj = u_node_values [ VALUE_ROW_IND ] [ VALUE_COL_IND ] ;".split(" ")}]},{a:"node",c:"VECT_MATH_ADD",C:[],B:[{a:"node_in",c:"Fk",i:["vec3"],g:!1},{a:"node_in",c:"Fl",
i:["vec3"],g:!1},{a:"node_out",c:"Fm",i:["vec3"],g:!1},{a:"node_out",c:"Fn",i:["float"],g:!0}],u:[{a:"txt",b:"Fm = Fk + Fl ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fn"],u:[{a:"txt",b:"Fn = ( abs ( Fm [ 0 ] ) + abs ( Fm [ 1 ] ) + abs ( Fm [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_SUBTRACT",C:[],B:[{a:"node_in",c:"Fo",i:["vec3"],g:!1},{a:"node_in",c:"Fp",i:["vec3"],g:!1},{a:"node_out",c:"Fq",i:["vec3"],g:!1},{a:"node_out",c:"Fr",i:["float"],g:!0}],u:[{a:"txt",b:"Fq = Fo - Fp ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fr"],u:[{a:"txt",b:"Fr = ( abs ( Fq [ 0 ] ) + abs ( Fq [ 1 ] ) + abs ( Fq [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_AVERAGE",C:[],B:[{a:"node_in",c:"Fs",i:["vec3"],g:!1},{a:"node_in",c:"Ft",i:["vec3"],g:!1},{a:"node_out",c:"Fu",i:["vec3"],g:!1},{a:"node_out",c:"Fv",i:["float"],g:!0}],u:[{a:"txt",b:"Fu = Fs + Ft ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fv"],u:[{a:"txt",b:"Fv = length ( Fu ) ;".split(" ")}]}]},{a:"node_cond",
f:[{a:"node_if",j:["USE_OUT_Fu"],u:[{a:"txt",b:"Fu = normalize ( Fu ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_DOT_PRODUCT",C:[],B:[{a:"node_in",c:"Fw",i:["vec3"],g:!1},{a:"node_in",c:"Fx",i:["vec3"],g:!1},{a:"node_out",c:"Fy",i:["vec3"],g:!1},{a:"node_out",c:"Fz",i:["float"],g:!0}],u:[{a:"txt",b:"Fy = vec3 ( _0_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fz"],u:[{a:"txt",b:"Fz = dot ( Fw , Fx ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_CROSS_PRODUCT",C:[],B:[{a:"node_in",c:"FA",
i:["vec3"],g:!1},{a:"node_in",c:"FB",i:["vec3"],g:!1},{a:"node_out",c:"FC",i:["vec3"],g:!1},{a:"node_out",c:"FD",i:["float"],g:!0}],u:[{a:"txt",b:"FC = cross ( FA , FB ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FD"],u:[{a:"txt",b:"FD = length ( FC ) ; FC /= FD ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"FC = normalize ( FC ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_NORMALIZE",C:[],B:[{a:"node_in",c:"FE",i:["vec3"],g:!1},{a:"node_in",c:"FF",i:["vec3"],g:!1},{a:"node_out",c:"FG",
i:["vec3"],g:!1},{a:"node_out",c:"FH",i:["float"],g:!0}],u:[{a:"txt",b:"FG = normalize ( FE ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FH"],u:[{a:"txt",b:"FH = length ( FE ) ;".split(" ")}]}]},{a:"txt",b:["FF",";"]}]},{a:"node",c:"FRESNEL",C:[{a:"node_var",c:"USE_FRESNEL_NORMAL",b:["0"]}],B:[{a:"node_in",c:"FI",i:["float"],g:!1},{a:"node_in",c:"FJ",i:["vec3"],g:!1},{a:"node_out",c:"FK",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_FRESNEL_NORMAL"],u:[{a:"txt",b:"vec3 cr = normalize ( FJ ) ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:["vec3","cr","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["CAMERA_TYPE","CAM_TYPE_PERSP",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 Aj = normalize ( ou ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["vec3","Aj","=","u_camera_direction",";"]}]}]},{a:"txt",b:"float sc = max ( FI , 0.00001 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"sc = gl_FrontFacing == false ? sc : _1_0 / sc ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"sc = gl_FrontFacing ? sc : _1_0 / sc ;".split(" ")}]}]},{a:"txt",b:"FK = sd ( Aj , cr , sc ) ;".split(" ")}]},{a:"node",c:"BACKGROUND",C:[],B:[{a:"node_in",c:"FL",i:["vec3"],g:!1},{a:"node_in",c:"FM",i:["float"],g:!1},{a:"node_out",c:"FN",i:["vec3"],g:!1}],u:[{a:"txt",b:"FN = FL * FM ;".split(" ")}]},{a:"node",c:"B4W_REFLECT",C:[],B:[{a:"node_in",c:"FO",i:["vec3"],g:!1},{a:"node_in",c:"FP",i:["vec3"],g:!1},{a:"node_out",c:"FQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"FQ = reflect ( _ ( u_view_tsr_inverse , FO ) , FP ) ;".split(" ")}]},
{a:"node",c:"B4W_REFLECT_WORLD",C:[],B:[{a:"node_in",c:"FR",i:["vec3"],g:!1},{a:"node_out",c:"FS",i:["vec3"],g:!1}],u:[{a:"txt",b:"FS = reflect ( - ou . xyz , FR ) ;".split(" ")}]},{a:"node",c:"B4W_PARALLAX",C:[],B:[{a:"node_in",c:"FT",i:["vec3"],g:!1},{a:"node_in",c:"FU",i:["float"],g:!1},{a:"node_in",c:"FV",i:["const","float"],g:!1},{a:"node_in",c:"FW",i:["const","float"],g:!1},{a:"node_out",c:"FX",i:["vec3"],g:!1},{a:"node_param",c:"node_B4W_PARALLAX_var_texture",i:["uniform","sampler2D"],g:!1}],
u:[{a:"txt",b:"float bN = length ( sD ) ; if ( bN < FW ) { vec2 b_ = r_ ( FT ) ; float cd = clamp ( _0_5 * ( FW - bN ) , _0_0 , _1_0 ) ; float hG = FU * cd ; vec3 cf = normalize ( ou * sA ) ; float cg = _1_0 / FV ; vec2 ch = cf . xy * hG / ( FV * cf . z ) ; float ci = _1_0 ; float cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; for ( float cl = 1.0 ; cl <= FV ; cl ++ ) { if ( cj < ci ) { ci -= cg ; b_ -= ch ; cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; } } vec2 cm = b_ + ch ; float cn = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , cm ) . a - ( ci + cg ) ; float co = cj - ci ; float cp = co / ( co - cn ) ; b_ = cp * cm + ( _1_0 - cp ) * b_ ; FX = rZ ( b_ ) ; } else FX = FT ;".split(" ")}]},
{a:"node",c:"B4W_CLAMP",C:[],B:[{a:"node_in",c:"FY",i:["vec3"],g:!1},{a:"node_out",c:"FZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"FZ = clamp ( FY , _0_0 , _1_0 ) ;".split(" ")}]},{a:"node",c:"B4W_REFRACTION",C:[],B:[{a:"node_in",c:"F_",i:["vec3"],g:!1},{a:"node_in",c:"Ga",i:["float"],g:!1},{a:"node_out",c:"Gb",i:["vec3"],g:!1}],u:[{a:"txt",b:"Gb = rY ( F_ , Ga ) ;".split(" ")}]},{a:"node",c:"B4W_TRANSLUCENCY",C:[],B:[{a:"node_in",c:"Gc",i:["float"],g:!1},{a:"node_in",c:"Gd",i:["float"],g:!1},{a:"node_in",
c:"Ge",i:["float"],g:!1},{a:"node_in",c:"Gf",i:["float"],g:!1},{a:"node_in",c:"Gg",i:["float"],g:!1},{a:"node_out",c:"Gh",i:["float"],g:!0},{a:"node_out",c:"Gi",i:["vec4"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gh"],u:[{a:"txt",b:["Gh","=","Gc",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gi"],u:[{a:"txt",b:"Gi = vec4 ( Gd , Ge , Gf , Gg ) ;".split(" ")}]}]}]},{a:"node",c:"B4W_TIME",C:[],B:[{a:"node_out",c:"Gj",i:["float"],g:!1}],u:[{a:"txt",b:["Gj","=","u_time",";"]}]},{a:"node",
c:"B4W_SMOOTHSTEP",C:[],B:[{a:"node_in",c:"Gk",i:["float"],g:!1},{a:"node_in",c:"Gl",i:["float"],g:!1},{a:"node_in",c:"Gm",i:["float"],g:!1},{a:"node_out",c:"Gn",i:["float"],g:!1}],u:[{a:"txt",b:"Gn = smoothstep ( Gl , Gm , Gk ) ;".split(" ")}]},{a:"node",c:"B4W_GLOW_OUTPUT",C:[],B:[{a:"node_in",c:"Go",i:["vec3"],g:!1},{a:"node_in",c:"Gp",i:["float"],g:!1}],u:[{a:"txt",b:"E = Go ; I = Gp ;".split(" ")}]},{a:"node",c:"B4W_VECTOSCAL",C:[],B:[{a:"node_in",c:"Gq",i:["vec3"],g:!1},{a:"node_out",c:"Gr",
i:["float"],g:!1}],u:[{a:"txt",b:"Gr = ( Gq . r + Gq . g + Gq . b ) / 3.0 ;".split(" ")}]},{a:"node",c:"B4W_SCALTOVEC",C:[],B:[{a:"node_in",c:"Gs",i:["float"],g:!1},{a:"node_out",c:"Gt",i:["vec3"],g:!1}],u:[{a:"txt",b:"Gt [ 0 ] = Gs ; Gt [ 1 ] = Gs ; Gt [ 2 ] = Gs ;".split(" ")}]},{a:"nodes_global"},{a:"txt",b:"void J ( in vec3 ou , out vec3 E , out vec3 F , out vec3 G , out vec4 H , out float I ) { E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec3 ( _0_0 ) ; H = vec4 ( _0_0 ) ; I = _0_0 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["IS_WORLD"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR","USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"vec3 sv = - ou ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_GL"],l:{a:"grp",f:[{a:"txt",b:"vec3 os = - ou ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEX_COORD_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","ot","=","ou",
";"]}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","sw","=","ou",";"]}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:11}],l:{a:"grp",f:[{a:"txt",b:["vec3","sx","=","j",";"]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING",
"USE_NODE_GEOMETRY_NO",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"if ( gl_FrontFacing == false )".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["if","(","gl_FrontFacing",")"]}]}}]},{a:"txt",b:"sx = sx ; else sx = - sx ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:["vec3","sy","=","sx",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING",
"USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"vec3 sz = normalize ( sx ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING"],l:{a:"grp",f:[{a:"txt",b:["vec3","ot","=","sz",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ot = normalize ( j ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","sw","=","sz",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],
l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( sz , k . xyz ) * k . w ; mat3 sA = mat3 ( k . xyz , W , sz ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:"vec3 sB = cross ( sx , k . xyz ) * k . w ; mat3 sC = mat3 ( k . xyz , sB , sx ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec3 os = h ; vec4 sD = i ; float sE = u_emit ; float sF = u_ambient ;".split(" ")}]}}]},
{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};a["include/nodes.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"NODES_GLSLV",l:{a:"grp",f:[{a:"define",c:"NODES_GLSLV",b:[""]},{a:"var",c:"PARTICLE_BATCH",b:["0"]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2},"PARTICLE_BATCH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GLSL_IN vec3 a_orco_tex_coord ; GLSL_OUT vec3 rV ;".split(" ")}]}}]},{a:"node",c:"TEX_COORD_UV",
C:[],B:[{a:"node_param",c:"node_TEX_COORD_UV_var_a_uv",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"sl",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["sl","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{a:"node",c:"UV_MERGED",C:[],B:[{a:"node_param",c:"node_UV_MERGED_var_a_uv",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"sk",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["sk","=","node_UV_MERGED_var_a_uv",";"]}]},{a:"node",c:"UVMAP",C:[],B:[{a:"node_param",c:"node_UVMAP_var_a_uv",i:["GLSL_IN","vec2"],g:!1},
{a:"node_param",c:"sm",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["sm","=","node_UVMAP_var_a_uv",";"]}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[{a:"node_param",c:"node_GEOMETRY_UV_var_a_uv",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"se",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["se","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{a:"node",c:"GEOMETRY_VC",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC_var_a_vertex_color",i:["GLSL_IN","vec3"],g:!1},{a:"node_param",c:"Gu",i:["GLSL_OUT","vec3"],g:!1}],u:[{a:"txt",
b:["Gu","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{a:"node",c:"GEOMETRY_VC1",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC1_var_a_vertex_color",i:["GLSL_IN","float"],g:!1},{a:"node_param",c:"Gv",i:["GLSL_OUT","float"],g:!1}],u:[{a:"txt",b:["Gv","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{a:"node",c:"GEOMETRY_VC2",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC2_var_a_vertex_color",i:["GLSL_IN","vec2"],g:!1},{a:"node_param",c:"Gw",i:["GLSL_OUT","vec2"],g:!1}],u:[{a:"txt",b:["Gw","=","node_GEOMETRY_VC2_var_a_vertex_color",
";"]}]},{a:"node",c:"GEOMETRY_VC3",C:[],B:[{a:"node_param",c:"node_GEOMETRY_VC3_var_a_vertex_color",i:["GLSL_IN","vec3"],g:!1},{a:"node_param",c:"Gx",i:["GLSL_OUT","vec3"],g:!1}],u:[{a:"txt",b:["Gx","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{a:"nodes_global"},{a:"txt",b:["void","J","(",")","{"]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["rV","=","a_orco_tex_coord",";"]}]}}]},{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};
a["include/pack.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PACK_GLSLF",l:{a:"grp",f:[{a:"define",c:"PACK_GLSLF",b:[""]},{a:"txt",b:"vec4 er ( const in float il ) { vec4 fq = vec4 ( _255_0 * _255_0 * _255_0 , _255_0 * _255_0 , _255_0 , _1_0 ) ; vec4 Gy = vec4 ( _0_0 , _1_0 / _255_0 , _1_0 / _255_0 , _1_0 / _255_0 ) ; vec4 jB = fract ( il * fq ) ; jB -= jB . xxyz * Gy ; return jB ; } float cQ ( const in vec4 Gz ) { float eq ; vec4 fq = vec4 ( _1_0 / ( _255_0 * _255_0 * _255_0 ) , _1_0 / ( _255_0 * _255_0 ) , _1_0 / _255_0 , _1_0 ) ; eq = dot ( Gz , fq ) ; return eq ; } vec4 er ( const in vec2 rf ) { vec2 fq = vec2 ( _255_0 , _1_0 ) ; vec2 Gy = vec2 ( _0_0 , _1_0 / _255_0 ) ; vec4 jB = fract ( rf . xxyy * fq . xyxy ) ; jB -= jB . xxzz * Gy . xyxy ; if ( rf . r == _1_0 ) jB . rg = vec2 ( _0_0 , _1_0 ) ; if ( rf . g == _1_0 ) jB . ba = vec2 ( _0_0 , _1_0 ) ; return jB ; } vec2 jg ( const in vec4 GA ) { vec2 rf ; vec2 fq = vec2 ( _1_0 / _255_0 , _1_0 ) ; rf . r = dot ( GA . rg , fq ) ; rf . g = dot ( GA . ba , fq ) ; return rf ; }".split(" ")}]}}]}]};
a["include/particles.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PARTICLES_GLSLV",l:{a:"grp",f:[{a:"define",c:"PARTICLES_GLSLV",b:[""]},{a:"var",c:"EPSILON",b:["0.000001"]},{a:"var",c:"COLOR_RAMP_LENGTH",b:["0"]},{a:"var",c:"WORLD_SPACE",b:["0"]},{a:"var",c:"USE_COLOR_RAMP",b:["0"]},{a:"include",F:"math.glslv"},{a:"txt",b:"struct cY { float df ; vec3 O ; float L ; vec3 aQ ; float bK ; vec3 dl ; vec3 dm ; float dn ; } ;".split(" ")},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"void GE ( inout vec3 aQ , float GB , vec4 kb , vec4 bv ) { float GC = bv . x - kb . x ; float GD = ( GB - kb . x ) / GC ; aQ = mix ( aQ , bv . yzw , clamp ( GD , 0.0 , 1.0 ) ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 GH ( float t , float GF , vec4 GG [ COLOR_RAMP_LENGTH ] ) { float GB = t / GF ; vec3 aQ = GG [ 0 ] . yzw ;".split(" ")},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",1,{a:"g_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"GE ( aQ , GB , GG [ 0 ] , GG [ 1 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GE ( aQ , GB , GG [ 1 ] , GG [ 2 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"GE ( aQ , GB , GG [ 2 ] , GG [ 3 ] ) ;".split(" ")}]}}]},{a:"txt",b:["return","aQ",";","}"]}]}}]},{a:"txt",b:"float GN ( float t , float GF , float GI , float GJ ) { float GK = max ( 0.01 , min ( GF , GI ) ) ; float GL = max ( 0.01 , min ( GF , GJ ) ) ; float GM = GF - GL ; float L = clamp ( t / GK , 0.0 , 1.0 ) - step ( GM , t ) * ( t - GM ) / GL ; return L ; } cY cZ ( ) { cY sp ; float t ; float GF = a_p_data [ 0 ] ; float GO = a_p_data [ 1 ] ; if ( u_p_cyclic == 1 ) { t = mod ( u_p_time , u_p_length ) - GO ; if ( t < 0.0 ) t += u_p_length ; } if ( u_p_cyclic != 1 ) { t = u_p_time - GO ; } if ( t < 0.0 || t >= GF ) { sp . df = 0.0001 ; sp . O = vec3 ( 99999.0 , 0.0 , 0.0 ) ; } if ( ! ( t < 0.0 || t >= GF ) ) { vec4 S = R ( a_tbn ) ; vec3 bW = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["WORLD_SPACE"],l:{a:"grp",f:[{a:"txt",b:"vec3 fn = a_position ; vec3 sb = bW ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 fn = ap ( u_model_tsr , a_position ) ; vec3 sb = _ ( u_model_tsr , bW ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 GP = u_p_nfactor * sb ; GP += a_p_vels . xyz ; GP . z -= u_p_gravity * t / 2.0 ; float GQ = max ( u_p_mass , EPSILON ) ; GP += ( u_p_wind_fac * u_wind / GQ ) * t / 2.0 ; sp . dn = t ; sp . dl = GP ; sp . dm = bW * a_p_vels . w ; sp . O = fn + GP * t ; sp . bK = a_p_vels . w * t ;".split(" ")},
{a:"cond",f:[{a:"if",j:["USE_COLOR_RAMP"],l:{a:"grp",f:[{a:"txt",b:"sp . df = GLSL_TEXTURE ( u_color_ramp_tex , vec2 ( t / u_p_max_lifetime , 0.5 ) ) . g ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"sp . df = 1.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["COLOR_RAMP_LENGTH",0,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"sp . aQ = GH ( t , u_p_max_lifetime , u_p_color_ramp ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"sp . aQ = vec3 ( 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:"sp . L = GN ( t , a_p_data [ 0 ] , u_p_fade_in , u_p_fade_out ) ; } return sp ; }".split(" ")}]}}]}]};
a["include/particles_nodes.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PARTICLES_NODES_GLSLF",l:{a:"grp",f:[{a:"define",c:"PARTICLES_NODES_GLSLF",b:[""]},{a:"var",c:"CAUSTICS",b:["0"]},{a:"var",c:"DOUBLE_SIDED_LIGHTING",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"PARTICLE_BATCH",b:["0"]},{a:"var",c:"NUM_LIGHTS",b:["0"]},{a:"var",c:"CALC_TBN_SPACE",b:["0"]},{a:"cond",f:[{a:"if",j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{a:"logical_or_expr",o:2}],l:{a:"grp",
f:[{a:"include",F:"environment.glslf"}]}}]},{a:"include",F:"color_util.glslf"},{a:"include",F:"math.glslv"},{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kf ( vec3 rgb ) { vec4 hI = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hI . wz ) , vec4 ( rgb . gb , hI . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dz = q . x - min ( q . w , q . y ) ; float iB = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dz + iB ) ) , dz / ( q . x + iB ) , q . x ) ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{a:"logical_or_expr",o:6}],l:{a:"grp",f:[{a:"txt",b:"vec3 kh ( vec3 kg ) { vec4 hI = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kg . r , kg . r , kg . r ) + hI . xyz ) * 6.0 - hI . www ) ; return kg . b * mix ( hI . xxx , clamp ( p - hI . xxx , _0_0 , _1_0 ) , kg . g ) ; }".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec3 rZ ( vec2 gT ) { return vec3 ( gT * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"txt",b:"vec2 r_ ( vec3 rf ) { return vec2 ( rf . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},{a:"node",c:"CAMERA",
C:[],B:[{a:"node_out",c:"sG",i:["vec3"],g:!0},{a:"node_out",c:"sH",i:["float"],g:!0},{a:"node_out",c:"sI",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sG"],u:[{a:"txt",b:"sG = normalize ( sD . xyz ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sH"],u:[{a:"txt",b:"sH = abs ( sD . z ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_sI"],u:[{a:"txt",b:"sI = length ( sD . xyz ) ;".split(" ")}]}]}]},{a:"node",c:"COMBRGB",C:[],B:[{a:"node_in",c:"sJ",i:["float"],
g:!1},{a:"node_in",c:"sK",i:["float"],g:!1},{a:"node_in",c:"sL",i:["float"],g:!1},{a:"node_out",c:"sM",i:["vec3"],g:!1}],u:[{a:"txt",b:"sM = vec3 ( sJ , sK , sL ) ;".split(" ")}]},{a:"node",c:"COMBHSV",C:[],B:[{a:"node_in",c:"sN",i:["float"],g:!1},{a:"node_in",c:"sO",i:["float"],g:!1},{a:"node_in",c:"sP",i:["float"],g:!1},{a:"node_out",c:"sQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"sQ = kh ( vec3 ( sN , sO , sP ) ) ;".split(" ")}]},{a:"node",c:"EMPTY_UV",C:[],B:[{a:"node_out",c:"sR",i:["vec3"],g:!1}],u:[{a:"txt",
b:"sR = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{a:"node",c:"EMPTY_VC",C:[],B:[{a:"node_out",c:"sS",i:["vec3"],g:!1}],u:[{a:"txt",b:"sS = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[{a:"node_out",c:"sT",i:["vec3"],g:!1}],u:[{a:"txt",b:"sT = rZ ( A ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_OR",C:[],B:[{a:"node_out",c:"sU",i:["vec3"],g:!1}],u:[{a:"txt",b:"sU = 2.0 * vec3 ( A , _0_0 ) - vec3 ( _1_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC",C:[],B:[{a:"node_out",c:"sV",
i:["vec3"],g:!1}],u:[{a:"txt",b:"sV = vec3 ( _1_0 ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC1",C:[],B:[{a:"node_out",c:"sW",i:["float"],g:!1}],u:[{a:"txt",b:["sW","=","_1_0",";"]}]},{a:"node",c:"GEOMETRY_VC2",C:[],B:[{a:"node_out",c:"sX",i:["float"],g:!1},{a:"node_out",c:"sY",i:["float"],g:!1}],u:[{a:"txt",b:"sX = _1_0 ; sY = _1_0 ;".split(" ")}]},{a:"node",c:"GEOMETRY_VC3",C:[],B:[{a:"node_out",c:"sZ",i:["float"],g:!1},{a:"node_out",c:"s_",i:["float"],g:!1},{a:"node_out",c:"ta",i:["float"],g:!1}],
u:[{a:"txt",b:"sZ = _1_0 ; s_ = _1_0 ; ta = _1_0 ;".split(" ")}]},{a:"node",c:"GEOMETRY_NO",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"tb",i:["vec3"],g:!1},{a:"node_out",c:"tc",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["tc","=","tb",";"]}]},{a:"node_else",u:[{a:"txt",b:"tc = sw . xyz ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_FB",C:[],B:[{a:"node_out",c:"td",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["REFLECTION_PASS",
"REFL_PASS_PLANE",{a:"equal_expr",o:2}],u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"td = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{a:"node",c:"GEOMETRY_VW",C:[],B:[{a:"node_out",c:"tf",i:["vec3"],g:!1}],u:[{a:"txt",b:"tf = - _ ( u_view_tsr_frag , ou ) ;".split(" ")}]},{a:"node",c:"GEOMETRY_LO",C:[],B:[{a:"node_out",c:"tg",i:["vec3"],g:!1}],u:[{a:"txt",b:"tg [ 0 ] = sD [ 0 ] ; tg [ 1 ] = sD [ 1 ] ; tg [ 2 ] = sD [ 2 ] ;".split(" ")}]},
{a:"node",c:"GEOMETRY_GL",C:[],B:[{a:"node_out",c:"th",i:["vec3"],g:!1}],u:[{a:"txt",b:"th = vec3 ( os . r , os . g , os . b ) ;".split(" ")}]},{a:"node",c:"NEW_GEOMETRY",C:[],B:[{a:"node_out",c:"tj",i:["vec3"],g:!1},{a:"node_out",c:"tk",i:["vec3"],g:!1},{a:"node_out",c:"tl",i:["vec3"],g:!1},{a:"node_out",c:"tm",i:["vec3"],g:!1},{a:"node_out",c:"tn",i:["vec3"],g:!1},{a:"node_out",c:"to",i:["vec3"],g:!1},{a:"node_out",c:"tr",i:["float"],g:!1},{a:"node_out",c:"tu",i:["float"],g:!1}],u:[{a:"txt",b:"tj = vec3 ( _0_0 ) ; tk = vec3 ( _0_0 ) ; tl = vec3 ( _0_0 ) ; tm = vec3 ( _0_0 ) ; tn = vec3 ( _0_0 ) ; to = vec3 ( _0_0 ) ; tr = _0_0 ; tu = _0_0 ;".split(" ")}]},
{a:"node",c:"HUE_SAT",C:[],B:[{a:"node_in",c:"tv",i:["float"],g:!1},{a:"node_in",c:"tw",i:["float"],g:!1},{a:"node_in",c:"tx",i:["float"],g:!1},{a:"node_in",c:"ty",i:["float"],g:!1},{a:"node_in",c:"tz",i:["vec3"],g:!1},{a:"node_out",c:"tA",i:["vec3"],g:!1}],u:[{a:"txt",b:"vec3 kg = kf ( tz ) ; kg [ 0 ] += ( tv - _0_5 ) ; if ( kg [ 0 ] > _1_0 ) kg [ 0 ] -= _1_0 ; else if ( kg [ 0 ] < _0_0 ) kg [ 0 ] += _1_0 ; kg *= vec3 ( _1_0 , tw , tx ) ; kg = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , kg , step ( vec3 ( _0_0 ) , kg ) ) , step ( kg , vec3 ( _1_0 ) ) ) ; tA = mix ( tz , kh ( kg ) , ty ) ;".split(" ")}]},
{a:"node",c:"INVERT",C:[],B:[{a:"node_in",c:"tB",i:["float"],g:!1},{a:"node_in",c:"tC",i:["vec3"],g:!1},{a:"node_out",c:"tD",i:["vec3"],g:!1}],u:[{a:"txt",b:"tD = mix ( tC , vec3 ( _1_0 ) - tC , tB ) ;".split(" ")}]},{a:"node",c:"LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_INDEX",b:["0"]},{a:"node_var",c:"LAMP_USE_SPHERE",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]}],B:[{a:"node_out",
c:"tE",i:["vec3"],g:!0},{a:"node_out",c:"tF",i:["vec3"],g:!1},{a:"node_out",c:"tG",i:["float"],g:!1},{a:"node_out",c:"tH",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tE"],u:[{a:"txt",b:"tE = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{a:"txt",b:"vec3 tI = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 tJ = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",
o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"tF = - h + tJ ; tG = length ( tF ) ; tF = normalize ( tF ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:"tH = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + tG * tG ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"float oY = dot ( tF , tI ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; tH *= oY ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",
j:["LAMP_USE_SPHERE"],u:[{a:"txt",b:"tH *= max ( LAMP_LIGHT_DIST - tG , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tF"],u:[{a:"txt",b:["tF","=","tI",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tG"],u:[{a:"txt",b:"tG = length ( tJ - h ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tH"],u:[{a:"txt",b:["tH","=","_1_0",";"]}]}]}]}]}]},{a:"node",c:"NORMAL",C:[],B:[{a:"node_in",c:"tK",i:["vec3"],g:!1},{a:"node_out",
c:"tL",i:["vec3"],g:!0},{a:"node_out",c:"tM",i:["float"],g:!0},{a:"node_param",c:"sj",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tL"],u:[{a:"txt",b:["tL","=","sj",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_tM"],u:[{a:"txt",b:"tM = - dot ( tK , sj ) ;".split(" ")}]}]}]},{a:"node",c:"B4W_VECTOR_VIEW",C:[],B:[{a:"node_in",c:"tN",i:["vec3"],g:!1},{a:"node_out",c:"tO",i:["vec3"],g:!1}],u:[{a:"txt",b:"tO = - _ ( u_view_tsr_frag , tN ) ;".split(" ")}]},{a:"node",c:"BSDF_BEGIN",
C:[],B:[{a:"node_in",c:"tP",i:["vec3"],g:!1},{a:"node_in",c:"tQ",i:["vec3"],g:!1},{a:"node_in",c:"tR",i:["float"],g:!1},{a:"node_in",c:"tS",i:["vec3"],g:!1},{a:"node_in",c:"tT",i:["float"],g:!1},{a:"node_in",c:"tU",i:["float"],g:!1},{a:"node_in",c:"tV",i:["vec3"],g:!1},{a:"node_in",c:"tW",i:["vec3"],g:!1},{a:"node_in",c:"tX",i:["float"],g:!1},{a:"node_in",c:"tY",i:["vec3"],g:!1},{a:"node_in",c:"tZ",i:["float"],g:!1},{a:"node_out",c:"t_",i:["vec3"],g:!1},{a:"node_out",c:"ua",i:["vec3"],g:!1},{a:"node_out",
c:"ub",i:["vec3"],g:!1},{a:"node_out",c:"uc",i:["vec3"],g:!1},{a:"node_out",c:"ud",i:["vec3"],g:!1},{a:"node_out",c:"ue",i:["vec4"],g:!1},{a:"node_out",c:"uf",i:["vec4"],g:!1},{a:"node_out",c:"ug",i:["vec3"],g:!1},{a:"node_out",c:"uh",i:["vec3"],g:!1},{a:"node_out",c:"ui",i:["vec3"],g:!1},{a:"node_out",c:"uj",i:["float"],g:!1},{a:"node_out",c:"uk",i:["vec3"],g:!1},{a:"node_out",c:"ul",i:["float"],g:!1}],u:[{a:"txt",b:"ub = tQ ; uc = tS ; ud = tV ; ug = tQ ; uh = tS ; metalness_out = tU ; ui = tW ; uj = tX ; uk = tY ; ul = tZ ; t_ = sE * ub ; ua = sF * u_environment_energy * cz ( ud ) ; uf = cC ( ub ) ; H = uf ; ue [ 0 ] = tR ; ue [ 1 ] = tT ; ue [ 2 ] = tU ;".split(" ")}]},
{a:"node",c:"BSDF_END",C:[],B:[{a:"node_in",c:"um",i:["vec4"],g:!1},{a:"node_in",c:"un",i:["vec3"],g:!1},{a:"node_in",c:"uo",i:["vec3"],g:!1},{a:"node_in",c:"up",i:["vec4"],g:!1},{a:"node_in",c:"uq",i:["vec3"],g:!1},{a:"node_in",c:"ur",i:["vec3"],g:!1},{a:"node_in",c:"us",i:["vec3"],g:!1},{a:"node_in",c:"ut",i:["float"],g:!1},{a:"node_in",c:"uu",i:["vec3"],g:!1},{a:"node_in",c:"ut",i:["float"],g:!1},{a:"node_in",c:"uv",i:["float"],g:!1},{a:"node_out",c:"uw",i:["vec3"],g:!1}],u:[{a:"txt",b:"uw = um . rgb + un ; uw = mix ( uw , us , ut ) ; I = _1_0 ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_BSDF_TRANSPARENT"],u:[{a:"txt",b:"vec3 uy = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bC ( uy ) ; uu = uu * uy ; uw += uu ;".split(" ")}]}]},{a:"txt",b:["uo",";"]}]},{a:"node",c:"BSDF_COMPUTE",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"uz",i:["vec3"],g:!1},{a:"node_in",c:"uA",i:["vec2"],g:!1},{a:"node_in",c:"uB",i:["vec3"],g:!1},{a:"node_in",c:"uC",i:["float"],g:!1},{a:"node_in",c:"uD",i:["vec4"],g:!1},{a:"node_out",
c:"uE",i:["float"],g:!1},{a:"node_out",c:"uF",i:["float"],g:!1}],u:[{a:"txt",b:"vec3 sb = uB ; float uG = clamp ( uD [ 0 ] , _0_0 , _1_0 ) ; float ux = clamp ( uD [ 1 ] , _0_0 , _1_0 ) ; float rF = uD [ 2 ] ; vec3 pW = normalize ( ou + uz ) ; float pf = ( _1_0 - uC ) * dot ( sb , uz ) + uC ; float uH = ( _1_0 - uC ) * max ( dot ( uz , pW ) , _0_0 ) + uC ; float uI = ( _1_0 - uC ) * max ( dot ( uB , pW ) , _0_0 ) + uC ; uE = _0_0 ; if ( uA . r != _0_0 ) { if ( uG > _0_0 ) { float pv = max ( dot ( sb , ou ) , _0_0 ) ; float pw = uG * uG ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = uz - pf * sb ; vec3 py = ou - pv * sb ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) uE = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; uE = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else uE = pf ; uE = max ( uE , _0_0 ) ; } float L = ux ; float uJ = L * L ; float dX = ( uI * uJ - uI ) * uI + _1_0 ; float cy = uJ / ( M_PI * dX * dX ) ; float uK ; float uL ; float uM = pow ( _1_0 - uH , 5.0 ) ; uK = _1_0 ; uL = uM ; float hI = L / 2.0 ; float uN = hI * hI ; float uO = _1_0 - uN ; float uP = _1_0 / ( uH * uH * uO + uN ) ; uK *= uP ; uL *= uP ; float rC = mix ( 0.04 , _1_0 , rF ) ; float uQ = mix ( uL , uK , rC ) ; uF = max ( pf * cy * uQ , _0_0 ) ;".split(" ")}]},
{a:"node",c:"BSDF_ANISOTROPIC",C:[],B:[{a:"node_in",c:"uR",i:["vec3"],g:!1},{a:"node_in",c:"uS",i:["float"],g:!1},{a:"node_in",c:"uT",i:["float"],g:!1},{a:"node_in",c:"uU",i:["float"],g:!1},{a:"node_in",c:"uV",i:["vec3"],g:!1},{a:"node_in",c:"uW",i:["vec3"],g:!1},{a:"node_out",c:"uX",i:["vec3"],g:!1}],u:[{a:"txt",b:"uX = uR ; uS ; uT ; uU ; uV ; uW ;".split(" ")}]},{a:"node",c:"BSDF_DIFFUSE",C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"uY",i:["vec3"],g:!1},{a:"node_in",c:"uZ",i:["float"],
g:!1},{a:"node_in",c:"u_",i:["vec3"],g:!1},{a:"node_out",c:"va",i:["vec3"],g:!1},{a:"node_out",c:"vb",i:["vec3"],g:!1},{a:"node_out",c:"vc",i:["float"],g:!1},{a:"node_out",c:"vd",i:["vec3"],g:!1},{a:"node_out",c:"ve",i:["float"],g:!1},{a:"node_out",c:"vf",i:["float"],g:!1},{a:"node_out",c:"vg",i:["vec3"],g:!1},{a:"node_out",c:"vh",i:["vec3"],g:!1},{a:"node_out",c:"vi",i:["float"],g:!1},{a:"node_out",c:"vj",i:["vec3"],g:!1},{a:"node_out",c:"vk",i:["float"],g:!1}],u:[{a:"txt",b:"vb = uY ; vc = uZ ; vf = _0_0 ; vi = _0_0 ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vg","=","u_",";"]}]},{a:"node_else",u:[{a:"txt",b:["vg","=","ot",";"]}]}]},{a:"txt",b:"va ; vd ; ve ; vh ; vj ; vk ;".split(" ")}]},{a:"node",c:"BSDF_GLASS",C:[],B:[{a:"node_in",c:"vl",i:["vec3"],g:!1},{a:"node_in",c:"vm",i:["float"],g:!1},{a:"node_in",c:"vn",i:["float"],g:!1},{a:"node_in",c:"vo",i:["vec3"],g:!1},{a:"node_out",c:"vp",i:["vec3"],g:!1}],u:[{a:"txt",b:"vp = vl ; vm ; vn ; vo ;".split(" ")}]},{a:"node",c:"BSDF_GLOSSY",
C:[{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"vq",i:["vec3"],g:!1},{a:"node_in",c:"vr",i:["float"],g:!1},{a:"node_in",c:"vs",i:["vec3"],g:!1},{a:"node_out",c:"vt",i:["vec3"],g:!1},{a:"node_out",c:"vu",i:["vec3"],g:!1},{a:"node_out",c:"vv",i:["float"],g:!1},{a:"node_out",c:"vw",i:["vec3"],g:!1},{a:"node_out",c:"vx",i:["float"],g:!1},{a:"node_out",c:"vy",i:["float"],g:!1},{a:"node_out",c:"vz",i:["vec3"],g:!1},{a:"node_out",c:"vA",i:["vec3"],g:!1},{a:"node_out",c:"vB",i:["float"],g:!1},
{a:"node_out",c:"vC",i:["vec3"],g:!1},{a:"node_out",c:"vD",i:["float"],g:!1}],u:[{a:"txt",b:"vw = vq ; vx = vr ; vy = _1_0 ; vB = _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vz","=","vs",";"]}]},{a:"node_else",u:[{a:"txt",b:["vz","=","ot",";"]}]}]},{a:"txt",b:"vt ; vu ; vv ; vA ; vC ; vD ;".split(" ")}]},{a:"node",c:"BSDF_HAIR",C:[],B:[{a:"node_in",c:"vE",i:["vec3"],g:!1},{a:"node_in",c:"vF",i:["float"],g:!1},{a:"node_in",c:"vG",i:["float"],g:!1},{a:"node_in",
c:"vH",i:["float"],g:!1},{a:"node_out",c:"vI",i:["vec3"],g:!1}],u:[{a:"txt",b:"vI = vE ; vF ; vG ; vH ;".split(" ")}]},{a:"node",c:"BSDF_TRANSPARENT",C:[],B:[{a:"node_in",c:"vJ",i:["vec3"],g:!1},{a:"node_out",c:"vK",i:["vec3"],g:!1},{a:"node_out",c:"vL",i:["vec3"],g:!1},{a:"node_out",c:"vM",i:["float"],g:!1},{a:"node_out",c:"vN",i:["vec3"],g:!1},{a:"node_out",c:"vO",i:["float"],g:!1},{a:"node_out",c:"vP",i:["float"],g:!1},{a:"node_out",c:"vQ",i:["vec3"],g:!1},{a:"node_out",c:"vR",i:["vec3"],g:!1},
{a:"node_out",c:"vS",i:["float"],g:!1},{a:"node_out",c:"vT",i:["vec3"],g:!1},{a:"node_out",c:"vU",i:["float"],g:!1}],u:[{a:"txt",b:"vT = vJ ; vP = _0_0 ; vS = _0_0 ; vU = _0_0 ; vQ = ot ; vK ; vL ; vM ; vN ; vO ; vR ;".split(" ")}]},{a:"node",c:"BSDF_TRANSLUCENT",C:[],B:[{a:"node_in",c:"vV",i:["vec3"],g:!1},{a:"node_in",c:"vW",i:["vec3"],g:!1},{a:"node_out",c:"vX",i:["vec3"],g:!1}],u:[{a:"txt",b:"vX = vV ; vW ;".split(" ")}]},{a:"node",c:"BSDF_REFRACTION",C:[],B:[{a:"node_in",c:"vY",i:["vec3"],g:!1},
{a:"node_in",c:"vZ",i:["float"],g:!1},{a:"node_in",c:"v_",i:["float"],g:!1},{a:"node_in",c:"wa",i:["vec3"],g:!1},{a:"node_out",c:"wb",i:["vec3"],g:!1}],u:[{a:"txt",b:"wb [ 0 ] = wb [ 1 ] = wb [ 2 ] = _0_0 ; vY ; vZ ; v_ ; wa ;".split(" ")}]},{a:"node",c:"BSDF_TOON",C:[],B:[{a:"node_in",c:"wc",i:["vec3"],g:!1},{a:"node_in",c:"wd",i:["float"],g:!1},{a:"node_in",c:"we",i:["float"],g:!1},{a:"node_in",c:"wf",i:["vec3"],g:!1},{a:"node_out",c:"wg",i:["vec3"],g:!1}],u:[{a:"txt",b:"wg = wc ; wd ; we ; wf ;".split(" ")}]},
{a:"node",c:"BSDF_VELVET",C:[],B:[{a:"node_in",c:"wh",i:["vec3"],g:!1},{a:"node_in",c:"wi",i:["float"],g:!1},{a:"node_in",c:"wj",i:["vec3"],g:!1},{a:"node_out",c:"wk",i:["vec3"],g:!1}],u:[{a:"txt",b:"wk = wh ; wi ; wj ;".split(" ")}]},{a:"node",c:"SUBSURFACE_SCATTERING",C:[],B:[{a:"node_in",c:"wl",i:["vec3"],g:!1},{a:"node_in",c:"wm",i:["float"],g:!1},{a:"node_in",c:"wn",i:["vec3"],g:!1},{a:"node_in",c:"wo",i:["float"],g:!1},{a:"node_in",c:"wp",i:["float"],g:!1},{a:"node_in",c:"wq",i:["vec3"],g:!1},
{a:"node_out",c:"wr",i:["vec3"],g:!1}],u:[{a:"txt",b:"wr [ 0 ] = wr [ 1 ] = wr [ 2 ] = _0_0 ; wl ; wn ; wo ; wp ; wq ; wm ;".split(" ")}]},{a:"node",c:"EMISSION",C:[],B:[{a:"node_in",c:"ws",i:["vec3"],g:!1},{a:"node_in",c:"wt",i:["float"],g:!1},{a:"node_out",c:"wu",i:["vec3"],g:!1},{a:"node_out",c:"wv",i:["vec3"],g:!1},{a:"node_out",c:"wA",i:["float"],g:!1},{a:"node_out",c:"wB",i:["vec3"],g:!1},{a:"node_out",c:"wC",i:["float"],g:!1},{a:"node_out",c:"wD",i:["float"],g:!1},{a:"node_out",c:"wE",i:["vec3"],
g:!1},{a:"node_out",c:"wF",i:["vec3"],g:!1},{a:"node_out",c:"wG",i:["float"],g:!1},{a:"node_out",c:"wH",i:["vec3"],g:!1},{a:"node_out",c:"wI",i:["float"],g:!1}],u:[{a:"txt",b:"wF = wt * ws ; wD = _0_0 ; wG = _1_0 ; wE = ot ; wu ; wv ; wA ; wB ; wC ; wH ; wI ;".split(" ")}]},{a:"node",c:"AMBIENT_OCCLUSION",C:[],B:[{a:"node_in",c:"wJ",i:["vec3"],g:!1},{a:"node_out",c:"wK",i:["vec3"],g:!1}],u:[{a:"txt",b:"wK [ 0 ] = wK [ 1 ] = wK [ 2 ] = _0_0 ; wJ ;".split(" ")}]},{a:"node",c:"HOLDOUT",C:[],B:[{a:"node_out",
c:"wL",i:["vec3"],g:!1}],u:[{a:"txt",b:"wL [ 0 ] = wL [ 1 ] = wL [ 2 ] = _0_0 ;".split(" ")}]},{a:"node",c:"VOLUME_ABSORPTION",C:[],B:[{a:"node_in",c:"wM",i:["vec3"],g:!1},{a:"node_in",c:"wN",i:["float"],g:!1},{a:"node_out",c:"wO",i:["vec3"],g:!1}],u:[{a:"txt",b:"wO [ 0 ] = wO [ 1 ] = wO [ 2 ] = _0_0 ; wM ; wN ;".split(" ")}]},{a:"node",c:"VOLUME_SCATTER",C:[],B:[{a:"node_in",c:"wP",i:["vec3"],g:!1},{a:"node_in",c:"wQ",i:["float"],g:!1},{a:"node_in",c:"wR",i:["float"],g:!1},{a:"node_out",c:"wS",i:["vec3"],
g:!1}],u:[{a:"txt",b:"wS [ 0 ] = wS [ 1 ] = wS [ 2 ] = _0_0 ; wP ; wQ ; wR ;".split(" ")}]},{a:"node",c:"BUMP",C:[],B:[{a:"node_in",c:"GV",i:["float"],g:!1},{a:"node_in",c:"GW",i:["float"],g:!1},{a:"node_in",c:"wV",i:["float"],g:!1},{a:"node_in",c:"GX",i:["vec3"],g:!1},{a:"node_out",c:"wX",i:["vec3"],g:!1}],u:[{a:"txt",b:"wX = GX ; GV ; GW ; wV ;".split(" ")}]},{a:"node",c:"DISPLACEMENT_BUMP",C:[],B:[{a:"node_in",c:"xd",i:["float"],g:!1},{a:"node_out",c:"xe",i:["vec3"],g:!1}],u:[{a:"txt",b:"xe = ot ; xd ;".split(" ")}]},
{a:"node",c:"NORMAL_MAP",C:[{a:"node_var",c:"SPACE",b:["NM_TANGENT"]},{a:"node_var",c:"USE_NORMAL_IN",b:["0"]}],B:[{a:"node_in",c:"xf",i:["float"],g:!1},{a:"node_in",c:"xg",i:["vec4"],g:!1},{a:"node_in",c:"xh",i:["vec3"],g:!1},{a:"node_out",c:"xi",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NORMAL_IN"],u:[{a:"txt",b:["vec3","xj","=","xh",";"]}]},{a:"node_else",u:[{a:"txt",b:["vec3","xj","=","sy",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["SPACE","NM_TANGENT",{a:"equal_expr",o:2}],
u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi = sC * xi ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_OBJECT",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_OBJECT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ; xi = _ ( u_model_tsr , xi ) ;".split(" ")}]},{a:"node_elif",j:["SPACE","NM_WORLD",{a:"equal_expr",o:2},"SPACE","NM_BLENDER_WORLD",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"xi = 2.0 * xg . xyz - _1_0 ; xi . yz *= - _1_0 ;".split(" ")}]}]},
{a:"txt",b:"float ma = max ( xf , _0_0 ) ; xi = normalize ( mix ( xj , xi , ma ) ) ;".split(" ")}]},{a:"node",c:"VECT_TRANSFORM",C:[{a:"node_var",c:"CONVERT_TYPE",b:["VT_WORLD_TO_OBJECT"]},{a:"node_var",c:"VECTOR_TYPE",b:["VT_VECTOR"]}],B:[{a:"node_in",c:"xk",i:["vec3"],g:!1},{a:"node_out",c:"xl",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{a:"equal_expr",o:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",{a:"equal_expr",o:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",
{a:"equal_expr",o:2},{a:"logical_or_expr",o:3}],u:[{a:"txt",b:["xl","=","xk",";"]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_POINT",{a:"equal_expr",o:2}],u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",
j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_model_tsr , xk ) ; xl = ap ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{a:"equal_expr",
o:2}],u:[{a:"txt",b:"xl = ap ( u_view_tsr_inverse , xk ) ; xl = ap ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_frag , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{a:"equal_expr",
o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_model_tsr , xk ) ; xl = _ ( u_view_tsr_frag , xl ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ;".split(" ")}]},{a:"node_elif",j:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = _ ( u_view_tsr_inverse , xk ) ; xl = _ ( u_model_tsr_inverse , xl ) ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["VECTOR_TYPE","VT_NORMAL",{a:"equal_expr",o:2}],u:[{a:"txt",b:"xl = normalize ( xl ) ;".split(" ")}]}]}]}]}]},{a:"node",c:"BLACKBODY",C:[],B:[{a:"node_in",c:"xm",i:["float"],g:!1},{a:"node_out",c:"xn",i:["vec3"],g:!1}],u:[{a:"txt",b:"xn [ 0 ] = xn [ 1 ] = xn [ 2 ] = _0_0 ; xm ;".split(" ")}]},{a:"node",c:"WAVELENGTH",C:[],B:[{a:"node_in",c:"xo",i:["float"],g:!1},{a:"node_out",c:"xp",i:["vec3"],g:!1}],u:[{a:"txt",b:"xp [ 0 ] = xp [ 1 ] = xp [ 2 ] = _0_0 ; xo ;".split(" ")}]},
{a:"node",c:"SEPXYZ",C:[],B:[{a:"node_in",c:"xq",i:["vec3"],g:!1},{a:"node_out",c:"xr",i:["float"],g:!1},{a:"node_out",c:"xs",i:["float"],g:!1},{a:"node_out",c:"xt",i:["float"],g:!1}],u:[{a:"txt",b:"xr = xq [ 0 ] ; xs = xq [ 1 ] ; xt = xq [ 2 ] ;".split(" ")}]},{a:"node",c:"COMBXYZ",C:[],B:[{a:"node_in",c:"xu",i:["float"],g:!1},{a:"node_in",c:"xv",i:["float"],g:!1},{a:"node_in",c:"xA",i:["float"],g:!1},{a:"node_out",c:"xB",i:["vec3"],g:!1}],u:[{a:"txt",b:"xB [ 0 ] = xu ; xB [ 1 ] = xv ; xB [ 2 ] = xA ;".split(" ")}]},
{a:"node",c:"BRIGHTCONTRAST",C:[],B:[{a:"node_in",c:"xC",i:["vec3"],g:!1},{a:"node_in",c:"xD",i:["float"],g:!1},{a:"node_in",c:"xE",i:["float"],g:!1},{a:"node_out",c:"xF",i:["vec3"],g:!1}],u:[{a:"txt",b:"float b = xD - xE * _0_5 ; xF = max ( ( _1_0 + xE ) * xC + b , vec3 ( _0_0 ) ) ;".split(" ")}]},{a:"node",c:"LIGHT_FALLOFF",C:[],B:[{a:"node_in",c:"xG",i:["float"],g:!1},{a:"node_in",c:"xH",i:["float"],g:!1},{a:"node_out",c:"xI",i:["float"],g:!1},{a:"node_out",c:"xJ",i:["float"],g:!1},{a:"node_out",
c:"xK",i:["float"],g:!1}],u:[{a:"txt",b:"xI = xJ = xK = _0_0 ; xG ; xH ;".split(" ")}]},{a:"node",c:"TEX_IMAGE",C:[],B:[{a:"node_in",c:"GY",i:["vec3"],g:!1},{a:"node_out",c:"GZ",i:["vec3"],g:!1},{a:"node_out",c:"G_",i:["float"],g:!1}],u:[{a:"txt",b:"GZ [ 0 ] = GZ [ 1 ] = GZ [ 2 ] = _0_0 ; G_ = _1_0 ; GY ;".split(" ")}]},{a:"node",c:"TEX_ENVIRONMENT",C:[],B:[{a:"node_in",c:"Ha",i:["vec3"],g:!1},{a:"node_out",c:"Hb",i:["vec3"],g:!1}],u:[{a:"txt",b:"Hb [ 0 ] = Hb [ 1 ] = Hb [ 2 ] = _0_0 ; Ha ;".split(" ")}]},
{a:"node",c:"TEX_SKY",C:[],B:[{a:"node_in",c:"xL",i:["vec3"],g:!1},{a:"node_out",c:"xM",i:["vec3"],g:!1}],u:[{a:"txt",b:"xM [ 0 ] = xM [ 1 ] = xM [ 2 ] = _0_0 ; xL ;".split(" ")}]},{a:"node",c:"TEX_NOISE",C:[],B:[{a:"node_in",c:"xN",i:["vec3"],g:!1},{a:"node_in",c:"xO",i:["float"],g:!1},{a:"node_in",c:"xP",i:["float"],g:!1},{a:"node_in",c:"xQ",i:["float"],g:!1},{a:"node_out",c:"xR",i:["vec3"],g:!1},{a:"node_out",c:"xS",i:["float"],g:!1}],u:[{a:"txt",b:"xR [ 0 ] = xR [ 1 ] = xR [ 2 ] = _0_0 ; xS = _1_0 ; xN ; xO ; xP ; xQ ;".split(" ")}]},
{a:"node",c:"TEX_WAVE",C:[],B:[{a:"node_in",c:"xT",i:["vec3"],g:!1},{a:"node_in",c:"xU",i:["float"],g:!1},{a:"node_in",c:"xV",i:["float"],g:!1},{a:"node_in",c:"xW",i:["float"],g:!1},{a:"node_in",c:"xX",i:["float"],g:!1},{a:"node_out",c:"xY",i:["vec3"],g:!1},{a:"node_out",c:"xZ",i:["float"],g:!1}],u:[{a:"txt",b:"xY [ 0 ] = xY [ 1 ] = xY [ 2 ] = _0_0 ; xZ = _1_0 ; xT ; xU ; xV ; xW ; xX ;".split(" ")}]},{a:"node",c:"TEX_VORONOI",C:[],B:[{a:"node_in",c:"x_",i:["vec3"],g:!1},{a:"node_in",c:"ya",i:["float"],
g:!1},{a:"node_out",c:"yb",i:["vec3"],g:!1},{a:"node_out",c:"yc",i:["float"],g:!1}],u:[{a:"txt",b:"yb [ 0 ] = yb [ 1 ] = yb [ 2 ] = _0_0 ; yc = _1_0 ; x_ ; ya ;".split(" ")}]},{a:"node",c:"TEX_MUSGRAVE",C:[],B:[{a:"node_in",c:"yd",i:["vec3"],g:!1},{a:"node_in",c:"ye",i:["float"],g:!1},{a:"node_in",c:"yf",i:["float"],g:!1},{a:"node_in",c:"yg",i:["float"],g:!1},{a:"node_in",c:"yh",i:["float"],g:!1},{a:"node_in",c:"yi",i:["float"],g:!1},{a:"node_in",c:"yj",i:["float"],g:!1},{a:"node_out",c:"yk",i:["vec3"],
g:!1},{a:"node_out",c:"yl",i:["float"],g:!1}],u:[{a:"txt",b:"yk [ 0 ] = yk [ 1 ] = yk [ 2 ] = _0_0 ; yl = _1_0 ; yd ; ye ; yf ; yg ; yh ; yi ; yj ;".split(" ")}]},{a:"node",c:"TEX_GRADIENT",C:[],B:[{a:"node_in",c:"ym",i:["vec3"],g:!1},{a:"node_out",c:"yn",i:["vec3"],g:!1},{a:"node_out",c:"yo",i:["float"],g:!1}],u:[{a:"txt",b:"yn [ 0 ] = yn [ 1 ] = yn [ 2 ] = _0_0 ; yo = _1_0 ; ym ;".split(" ")}]},{a:"node",c:"TEX_MAGIC",C:[],B:[{a:"node_in",c:"yp",i:["vec3"],g:!1},{a:"node_in",c:"yq",i:["float"],
g:!1},{a:"node_in",c:"yr",i:["float"],g:!1},{a:"node_out",c:"ys",i:["vec3"],g:!1},{a:"node_out",c:"yt",i:["float"],g:!1}],u:[{a:"txt",b:"ys [ 0 ] = ys [ 1 ] = ys [ 2 ] = _0_0 ; yt = _1_0 ; yp ; yq ; yr ;".split(" ")}]},{a:"node",c:"TEX_CHECKER",C:[],B:[{a:"node_in",c:"yu",i:["vec3"],g:!1},{a:"node_in",c:"yv",i:["vec3"],g:!1},{a:"node_in",c:"yA",i:["vec3"],g:!1},{a:"node_in",c:"yB",i:["float"],g:!1},{a:"node_out",c:"yC",i:["vec3"],g:!1},{a:"node_out",c:"yD",i:["float"],g:!1}],u:[{a:"txt",b:"yC [ 0 ] = yC [ 1 ] = yC [ 2 ] = _0_0 ; yD = _1_0 ; yu ; yv ; yA ; yB ;".split(" ")}]},
{a:"node",c:"TEX_BRICK",C:[],B:[{a:"node_in",c:"yE",i:["vec3"],g:!1},{a:"node_in",c:"yF",i:["vec3"],g:!1},{a:"node_in",c:"yG",i:["vec3"],g:!1},{a:"node_in",c:"yH",i:["vec3"],g:!1},{a:"node_in",c:"yI",i:["float"],g:!1},{a:"node_in",c:"yJ",i:["float"],g:!1},{a:"node_in",c:"yK",i:["float"],g:!1},{a:"node_in",c:"yL",i:["float"],g:!1},{a:"node_in",c:"yM",i:["float"],g:!1},{a:"node_out",c:"yN",i:["vec3"],g:!1},{a:"node_out",c:"yO",i:["float"],g:!1}],u:[{a:"txt",b:"yN [ 0 ] = yN [ 1 ] = yN [ 2 ] = _0_0 ; yO = _1_0 ; yE ; yF ; yG ; yH ; yI ; yJ ; yK ; yL ; yM ;".split(" ")}]},
{a:"node",c:"ADD_SHADER",C:[],B:[{a:"node_in",c:"yP",i:["vec3"],g:!1},{a:"node_in",c:"yQ",i:["vec3"],g:!1},{a:"node_out",c:"yR",i:["vec3"],g:!1}],u:[{a:"txt",b:"yR = clamp ( yP + yQ , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},{a:"node",c:"MIX_SHADER",C:[],B:[{a:"node_in",c:"yS",i:["float"],g:!1},{a:"node_in",c:"yT",i:["vec3"],g:!1},{a:"node_in",c:"yU",i:["vec3"],g:!1},{a:"node_in",c:"yV",i:["vec3"],g:!1},{a:"node_in",c:"yW",i:["float"],g:!1},{a:"node_in",c:"yX",i:["vec3"],g:!1},{a:"node_in",
c:"yY",i:["float"],g:!1},{a:"node_in",c:"yZ",i:["float"],g:!1},{a:"node_in",c:"y_",i:["vec3"],g:!1},{a:"node_in",c:"za",i:["vec3"],g:!1},{a:"node_in",c:"zb",i:["float"],g:!1},{a:"node_in",c:"zc",i:["vec3"],g:!1},{a:"node_in",c:"zd",i:["float"],g:!1},{a:"node_in",c:"ze",i:["vec3"],g:!1},{a:"node_in",c:"zf",i:["float"],g:!1},{a:"node_in",c:"zg",i:["vec3"],g:!1},{a:"node_in",c:"zh",i:["float"],g:!1},{a:"node_in",c:"zi",i:["float"],g:!1},{a:"node_in",c:"zj",i:["vec3"],g:!1},{a:"node_in",c:"zk",i:["vec3"],
g:!1},{a:"node_in",c:"zl",i:["float"],g:!1},{a:"node_in",c:"zm",i:["vec3"],g:!1},{a:"node_in",c:"zn",i:["float"],g:!1},{a:"node_out",c:"zo",i:["vec3"],g:!1},{a:"node_out",c:"zp",i:["vec3"],g:!1},{a:"node_out",c:"zq",i:["float"],g:!1},{a:"node_out",c:"zr",i:["vec3"],g:!1},{a:"node_out",c:"zs",i:["float"],g:!1},{a:"node_out",c:"zt",i:["float"],g:!1},{a:"node_out",c:"zu",i:["vec3"],g:!1},{a:"node_out",c:"zv",i:["vec3"],g:!1},{a:"node_out",c:"zA",i:["float"],g:!1},{a:"node_out",c:"zB",i:["vec3"],g:!1},
{a:"node_out",c:"zC",i:["float"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( yS , _0_0 , _1_0 ) ; zp = mix ( yV , ze , zD ) ; zq = mix ( yW , zf , zD ) ; if ( yZ > _0_0 ) { if ( zi > _0_0 ) { zr = mix ( yX , zg , zD ) ; zs = mix ( yY , zh , zD ) ; } else { zr = yX ; zs = yY ; } } else { zr = zg ; zs = zh ; } if ( zb > _0_0 ) { if ( zl > _0_0 ) { zv = mix ( za , zk , zD ) ; } else { zv = za ; } } else { zv = zk ; } zt = mix ( yZ , zi , zD ) ; zu = mix ( y_ , zj , zD ) ; zA = mix ( zb , zl , zD ) ; zB = mix ( zc , zm , zD ) ; zC = mix ( zd , zn , zD ) ;".split(" ")}]},
{a:"node",c:"UV_MERGED",C:[],B:[{a:"node_out",c:"zE",i:["vec3"],g:!1},{a:"node_out",c:"zF",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zE"],u:[{a:"txt",b:"zE = rZ ( A ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zF"],u:[{a:"txt",b:"zF = vec3 ( A , _0_0 ) ;".split(" ")}]}]}]},{a:"node",c:"TEX_COORD_UV",C:[],B:[{a:"node_out",c:"zG",i:["vec3"],g:!1}],u:[{a:"txt",b:"zG = vec3 ( A , _0_0 ) ;".split(" ")}]},{a:"node",c:"TEX_COORD_NO",C:[],B:[{a:"node_out",c:"zH",i:["vec3"],
g:!1}],u:[{a:"txt",b:["zH","=","ot",";"]}]},{a:"node",c:"TEX_COORD_GE",C:[],B:[{a:"node_out",c:"zI",i:["vec3"],g:!1}],u:[{a:"txt",b:"zI = vec3 ( A , _0_0 ) ;".split(" ")}]},{a:"node",c:"TEX_COORD_OB",C:[],B:[{a:"node_out",c:"zJ",i:["vec3"],g:!1}],u:[{a:"txt",b:"zJ [ 0 ] = zJ [ 1 ] = zJ [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_CA",C:[],B:[{a:"node_out",c:"zK",i:["vec3"],g:!1}],u:[{a:"txt",b:"zK [ 0 ] = sD [ 0 ] ; zK [ 1 ] = sD [ 1 ] ; zK [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_WI",
C:[],B:[{a:"node_out",c:"zL",i:["vec3"],g:!1}],u:[{a:"txt",b:"zL [ 0 ] = zL [ 1 ] = zL [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"TEX_COORD_RE",C:[],B:[{a:"node_out",c:"zM",i:["vec3"],g:!1}],u:[{a:"txt",b:"zM [ 0 ] = zM [ 1 ] = zM [ 2 ] = _1_0 ;".split(" ")}]},{a:"node",c:"UVMAP",C:[],B:[{a:"node_out",c:"zN",i:["vec3"],g:!1}],u:[{a:"txt",b:"zN = vec3 ( A , _0_0 ) ;".split(" ")}]},{a:"node",c:"PARTICLE_INFO",C:[],B:[{a:"node_out",c:"zO",i:["float"],g:!1},{a:"node_out",c:"zP",i:["float"],g:!1},{a:"node_out",
c:"zQ",i:["float"],g:!1},{a:"node_out",c:"zR",i:["vec3"],g:!1},{a:"node_out",c:"zS",i:["float"],g:!1},{a:"node_out",c:"zT",i:["vec3"],g:!1},{a:"node_out",c:"zU",i:["vec3"],g:!1},{a:"node_param",c:"GR",i:["GLSL_IN","vec4"],g:!0},{a:"node_param",c:"GS",i:["GLSL_IN","vec3"],g:!0},{a:"node_param",c:"GT",i:["GLSL_IN","vec3"],g:!0},{a:"node_param",c:"GU",i:["GLSL_IN","vec3"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["PARTICLE_BATCH"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zO"],u:[{a:"txt",b:"zO = GR [ 0 ] ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zP"],u:[{a:"txt",b:"zP = GR [ 1 ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zQ"],u:[{a:"txt",b:"zQ = GR [ 2 ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zR"],u:[{a:"txt",b:["zR","=","GS",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zS"],u:[{a:"txt",b:"zS = GR [ 3 ] ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zT"],u:[{a:"txt",b:["zT","=","GT",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_zU"],
u:[{a:"txt",b:["zU","=","GU",";"]}]}]}]},{a:"node_else",u:[{a:"txt",b:"zO = _0_0 ; zP = _0_0 ; zQ = _0_0 ; zR = vec3 ( _0_0 ) ; zS = _0_0 ; zT = zR ; zU = zR ;".split(" ")}]}]}]},{a:"node",c:"HAIR_INFO",C:[],B:[{a:"node_out",c:"zV",i:["float"],g:!1},{a:"node_out",c:"zW",i:["float"],g:!1},{a:"node_out",c:"zX",i:["float"],g:!1},{a:"node_out",c:"zY",i:["vec3"],g:!1}],u:[{a:"txt",b:"zV = _0_0 ; zW = _0_0 ; zX = _0_0 ; zY = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"OBJECT_INFO",C:[],B:[{a:"node_out",
c:"zZ",i:["vec3"],g:!1},{a:"node_out",c:"z_",i:["float"],g:!1},{a:"node_out",c:"Aa",i:["float"],g:!1},{a:"node_out",c:"Ab",i:["float"],g:!1}],u:[{a:"txt",b:"z_ = _0_0 ; Aa = _0_0 ; Ab = _0_0 ; zZ = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",c:"WIREFRAME",C:[],B:[{a:"node_in",c:"Ac",i:["float"],g:!1},{a:"node_out",c:"Ad",i:["float"],g:!1}],u:[{a:"txt",b:["Ad","=","Ac",";"]}]},{a:"node",c:"TANGENT",C:[],B:[{a:"node_out",c:"Ae",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ae = vec3 ( _0_0 ) ;".split(" ")}]},{a:"node",
c:"LAYER_WEIGHT",C:[],B:[{a:"node_in",c:"Hc",i:["float"],g:!1},{a:"node_in",c:"Hd",i:["vec3"],g:!1},{a:"node_out",c:"Ah",i:["float"],g:!1},{a:"node_out",c:"Ai",i:["float"],g:!1}],u:[{a:"txt",b:"Ah = Ai = _0_0 ; Hd ; Hc ;".split(" ")}]},{a:"node",c:"LIGHT_PATH",C:[],B:[{a:"node_out",c:"Ak",i:["float"],g:!1},{a:"node_out",c:"Al",i:["float"],g:!1},{a:"node_out",c:"Am",i:["float"],g:!1},{a:"node_out",c:"An",i:["float"],g:!1},{a:"node_out",c:"Ao",i:["float"],g:!1},{a:"node_out",c:"Ap",i:["float"],g:!1},
{a:"node_out",c:"Aq",i:["float"],g:!1},{a:"node_out",c:"Ar",i:["float"],g:!1},{a:"node_out",c:"As",i:["float"],g:!1},{a:"node_out",c:"At",i:["float"],g:!1}],u:[{a:"txt",b:"Ak = Al = Am = _0_0 ; An = Ao = Ap = _0_0 ; Aq = Aq = As = At = _0_0 ; Ar = _0_0 ;".split(" ")}]},{a:"node",c:"ATTRIBUTE",C:[],B:[{a:"node_out",c:"Av",i:["vec3"],g:!1},{a:"node_out",c:"Aw",i:["vec3"],g:!1},{a:"node_out",c:"Ax",i:["float"],g:!1}],u:[{a:"txt",b:"Av = Aw = vec3 ( _0_0 ) ; Ax = _0_0 ;".split(" ")}]},{a:"node",c:"SCRIPT",
C:[],B:[],u:[]},{a:"node",c:"CURVE_VEC",C:[{a:"node_var",c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["0.0"]}],B:[{a:"node_in",c:"Ay",i:["float"],g:!1},{a:"node_in",c:"Az",i:["vec3"],g:!1},{a:"node_out",c:"AA",i:["vec3"],g:!1}],u:[{a:"txt",b:["AA","=","Az",";"]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AA . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AA . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AA . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * Az . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},{a:"txt",b:"AA = mix ( Az , AA , Ay ) ;".split(" ")}]},{a:"node",c:"CURVE_RGB",C:[{a:"node_var",c:"READ_A",b:["0"]},{a:"node_var",
c:"READ_R",b:["0"]},{a:"node_var",c:"READ_G",b:["0"]},{a:"node_var",c:"READ_B",b:["0"]},{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AB",i:["float"],g:!1},{a:"node_in",c:"AC",i:["vec3"],g:!1},{a:"node_out",c:"AD",i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["READ_A"],u:[{a:"txt",b:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AC . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"float r = AC . r ; float g = AC . g ; float b = AC . b ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_R"],u:[{a:"txt",b:"AD . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . r = r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["READ_G"],u:[{a:"txt",b:"AD . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . g = g ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["READ_B"],u:[{a:"txt",b:"AD . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"AD . b = b ;".split(" ")}]}]},{a:"txt",b:"AD = mix ( AC , AD , AB ) ;".split(" ")}]},{a:"node",c:"VALTORGB",C:[{a:"node_var",c:"NODE_TEX_ROW",b:["_0_0"]}],B:[{a:"node_in",c:"AE",i:["float"],g:!1},{a:"node_out",c:"AF",i:["vec3"],g:!1},{a:"node_out",c:"AG",i:["float"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AE , NODE_TEX_ROW ) ) ; AF = AH . rgb ; AG = AH . a ;".split(" ")}]},
{a:"node",c:"MAPPING",C:[{a:"node_var",c:"MAPPING_SCALE_DEF",b:["0"]},{a:"node_var",c:"MAPPING_SCALE",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_TRANS_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRANS",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_TRS_MATRIX_DEF",b:["0"]},{a:"node_var",c:"MAPPING_TRS_MATRIX",b:["mat4","(","_1_0",")"]},{a:"node_var",c:"MAPPING_MIN_CLIP_DEF",b:["0"]},{a:"node_var",c:"MAPPING_MIN_CLIP",b:["vec3","(","_0_0",")"]},{a:"node_var",c:"MAPPING_MAX_CLIP_DEF",b:["0"]},
{a:"node_var",c:"MAPPING_MAX_CLIP",b:["vec3","(","_1_0",")"]},{a:"node_var",c:"MAPPING_IS_NORMAL",b:["0"]}],B:[{a:"node_in",c:"AI",i:["vec3"],g:!1},{a:"node_out",c:"AJ",i:["vec3"],g:!1}],u:[{a:"txt",b:["AJ","=","AI",";"]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_SCALE_DEF"],u:[{a:"txt",b:"AJ = AJ * MAPPING_SCALE ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRANS_DEF"],u:[{a:"txt",b:"AJ = AJ + MAPPING_TRANS ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_TRS_MATRIX_DEF"],
u:[{a:"txt",b:"AJ = ( MAPPING_TRS_MATRIX * vec4 ( AJ , _1_0 ) ) . xyz ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MIN_CLIP_DEF"],u:[{a:"txt",b:"AJ = max ( AJ , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_MAX_CLIP_DEF"],u:[{a:"txt",b:"AJ = min ( AJ , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAPPING_IS_NORMAL"],u:[{a:"txt",b:"AJ = normalize ( AJ ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ADD",C:[{a:"node_var",c:"MATH_USE_CLAMP",
b:["0"]}],B:[{a:"node_in",c:"AK",i:["float"],g:!1},{a:"node_in",c:"AL",i:["float"],g:!1},{a:"node_out",c:"AM",i:["float"],g:!1}],u:[{a:"txt",b:"AM = AK + AL ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AM = clamp ( AM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SUBTRACT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AN",i:["float"],g:!1},{a:"node_in",c:"AO",i:["float"],g:!1},{a:"node_out",c:"AP",i:["float"],g:!1}],u:[{a:"txt",b:"AP = AN - AO ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AP = clamp ( AP , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MULTIPLY",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AQ",i:["float"],g:!1},{a:"node_in",c:"AR",i:["float"],g:!1},{a:"node_out",c:"AS",i:["float"],g:!1}],u:[{a:"txt",b:"AS = AQ * AR ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AS = clamp ( AS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_DIVIDE",
C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AT",i:["float"],g:!1},{a:"node_in",c:"AU",i:["float"],g:!1},{a:"node_out",c:"AV",i:["float"],g:!1}],u:[{a:"txt",b:"AV = ( AU != _0_0 ) ? AT / AU : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AV = clamp ( AV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_SINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AW",i:["float"],g:!1},{a:"node_in",c:"AX",i:["float"],g:!1},
{a:"node_out",c:"AY",i:["float"],g:!1}],u:[{a:"txt",b:"AY = sin ( AW ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"AY = clamp ( AY , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["AX",";"]}]},{a:"node",c:"MATH_COSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"AZ",i:["float"],g:!1},{a:"node_in",c:"A_",i:["float"],g:!1},{a:"node_out",c:"Ba",i:["float"],g:!1}],u:[{a:"txt",b:"Ba = cos ( AZ ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"Ba = clamp ( Ba , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["A_",";"]}]},{a:"node",c:"MATH_TANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bb",i:["float"],g:!1},{a:"node_in",c:"Bc",i:["float"],g:!1},{a:"node_out",c:"Bd",i:["float"],g:!1}],u:[{a:"txt",b:"Bd = tan ( Bb ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bd = clamp ( Bd , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bc",";"]}]},{a:"node",c:"MATH_ARCSINE",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Be",i:["float"],g:!1},{a:"node_in",c:"Bf",i:["float"],g:!1},{a:"node_out",c:"Bg",i:["float"],g:!1}],u:[{a:"txt",b:"Bg = ( Be <= _1_0 && Be >= - _1_0 ) ? asin ( Be ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bg = clamp ( Bg , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bf",";"]}]},{a:"node",c:"MATH_ARCCOSINE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bh",i:["float"],g:!1},{a:"node_in",
c:"Bi",i:["float"],g:!1},{a:"node_out",c:"Bj",i:["float"],g:!1}],u:[{a:"txt",b:"Bj = ( Bh <= _1_0 && Bh >= - _1_0 ) ? acos ( Bh ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bj = clamp ( Bj , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bi",";"]}]},{a:"node",c:"MATH_ARCTANGENT",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bk",i:["float"],g:!1},{a:"node_in",c:"Bl",i:["float"],g:!1},{a:"node_out",c:"Bm",i:["float"],g:!1}],u:[{a:"txt",
b:"Bm = atan ( Bk ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bm = clamp ( Bm , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["Bl",";"]}]},{a:"node",c:"MATH_POWER",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bn",i:["float"],g:!1},{a:"node_in",c:"Bo",i:["float"],g:!1},{a:"node_out",c:"Bp",i:["float"],g:!1}],u:[{a:"txt",b:"if ( Bn < _0_0 && Bo != floor ( Bo ) ) Bp = _0_0 ; else if ( Bo == _0_0 ) Bp = _1_0 ; else if ( Bn < _0_0 ) Bp = mix ( _1_0 , - _1_0 , sign ( mod ( - Bo , 2.0 ) ) ) * pow ( - Bn , Bo ) ; else if ( Bn == _0_0 ) Bp = _0_0 ; else Bp = pow ( Bn , Bo ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bp = clamp ( Bp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_LOGARITHM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bq",i:["float"],g:!1},{a:"node_in",c:"Br",i:["float"],g:!1},{a:"node_out",c:"Bs",i:["float"],g:!1}],u:[{a:"txt",b:"Bs = ( Bq > _0_0 && Br > _0_0 ) ? log2 ( Bq ) / log2 ( Br ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bs = clamp ( Bs , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MATH_MINIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bt",i:["float"],g:!1},{a:"node_in",c:"Bu",i:["float"],g:!1},{a:"node_out",c:"Bv",i:["float"],g:!1}],u:[{a:"txt",b:"Bv = min ( Bt , Bu ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"Bv = clamp ( Bv , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MAXIMUM",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bw",i:["float"],g:!1},{a:"node_in",c:"Bx",i:["float"],
g:!1},{a:"node_out",c:"By",i:["float"],g:!1}],u:[{a:"txt",b:"By = max ( Bw , Bx ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"By = clamp ( By , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ROUND",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Bz",i:["float"],g:!1},{a:"node_in",c:"BA",i:["float"],g:!1},{a:"node_out",c:"BB",i:["float"],g:!1}],u:[{a:"txt",b:"BB = floor ( Bz + _0_5 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BB = clamp ( BB , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BA",";"]}]},{a:"node",c:"MATH_LESS_THAN",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BC",i:["float"],g:!1},{a:"node_in",c:"BD",i:["float"],g:!1},{a:"node_out",c:"BE",i:["float"],g:!1}],u:[{a:"txt",b:"BE = ( BC < BD ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BE = clamp ( BE , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_GREATER_THAN",C:[{a:"node_var",
c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BF",i:["float"],g:!1},{a:"node_in",c:"BG",i:["float"],g:!1},{a:"node_out",c:"BH",i:["float"],g:!1}],u:[{a:"txt",b:"BH = ( BF > BG ) ? _1_0 : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BH = clamp ( BH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_MODULO",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BI",i:["float"],g:!1},{a:"node_in",c:"BJ",i:["float"],g:!1},{a:"node_out",c:"BK",
i:["float"],g:!1}],u:[{a:"txt",b:"BK = abs ( BJ ) > 0.000001 ? mod ( BI , BJ ) : _0_0 ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],u:[{a:"txt",b:"BK = clamp ( BK , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATH_ABSOLUTE",C:[{a:"node_var",c:"MATH_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BL",i:["float"],g:!1},{a:"node_in",c:"BM",i:["float"],g:!1},{a:"node_out",c:"BN",i:["float"],g:!1}],u:[{a:"txt",b:"BN = abs ( BL ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MATH_USE_CLAMP"],
u:[{a:"txt",b:"BN = clamp ( BN , _0_0 , _1_0 ) ;".split(" ")}]}]},{a:"txt",b:["BM",";"]}]},{a:"node",c:"MIX_RGB_MIX",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BO",i:["float"],g:!1},{a:"node_in",c:"BP",i:["vec3"],g:!1},{a:"node_in",c:"BQ",i:["vec3"],g:!1},{a:"node_out",c:"BR",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BO , _0_0 , _1_0 ) ; BR = mix ( BP , BQ , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BR = clamp ( BR , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{a:"node",c:"MIX_RGB_ADD",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BS",i:["float"],g:!1},{a:"node_in",c:"BT",i:["vec3"],g:!1},{a:"node_in",c:"BU",i:["vec3"],g:!1},{a:"node_out",c:"BV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BS , _0_0 , _1_0 ) ; BV = mix ( BT , BT + BU , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_MULTIPLY",C:[{a:"node_var",
c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"BW",i:["float"],g:!1},{a:"node_in",c:"BX",i:["vec3"],g:!1},{a:"node_in",c:"BY",i:["vec3"],g:!1},{a:"node_out",c:"BZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( BW , _0_0 , _1_0 ) ; BZ = mix ( BX , BX * BY , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"BZ = clamp ( BZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SUBTRACT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"B_",i:["float"],g:!1},{a:"node_in",c:"Ca",i:["vec3"],g:!1},{a:"node_in",c:"Cb",i:["vec3"],g:!1},{a:"node_out",c:"Cc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( B_ , _0_0 , _1_0 ) ; Cc = mix ( Ca , Ca - Cb , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cc = clamp ( Cc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SCREEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cd",i:["float"],g:!1},{a:"node_in",c:"Ce",
i:["vec3"],g:!1},{a:"node_in",c:"Cf",i:["vec3"],g:!1},{a:"node_out",c:"Cg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Cg = vec3 ( _1_0 ) - ( vec3 ( Ch ) + zD * ( vec3 ( _1_0 ) - Cf ) ) * ( vec3 ( _1_0 ) - Ce ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cg = clamp ( Cg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIVIDE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Ci",
i:["float"],g:!1},{a:"node_in",c:"Cj",i:["vec3"],g:!1},{a:"node_in",c:"Ck",i:["vec3"],g:!1},{a:"node_out",c:"Cl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Ci , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; Ck += step ( Ck , vec3 ( _0_0 ) ) ; Cl = Ch * Cj + zD * Cj / Ck ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cl = clamp ( Cl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DIFFERENCE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",
c:"Cm",i:["float"],g:!1},{a:"node_in",c:"Cn",i:["vec3"],g:!1},{a:"node_in",c:"Co",i:["vec3"],g:!1},{a:"node_out",c:"Cp",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cm , _0_0 , _1_0 ) ; Cp = mix ( Cn , abs ( Cn - Co ) , zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cp = clamp ( Cp , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DARKEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cq",i:["float"],g:!1},{a:"node_in",
c:"Cr",i:["vec3"],g:!1},{a:"node_in",c:"Cs",i:["vec3"],g:!1},{a:"node_out",c:"Ct",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cq , _0_0 , _1_0 ) ; Ct = min ( Cr . rgb , Cs . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Ct = clamp ( Ct , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LIGHTEN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cu",i:["float"],g:!1},{a:"node_in",c:"Cv",i:["vec3"],g:!1},{a:"node_in",
c:"Cw",i:["vec3"],g:!1},{a:"node_out",c:"Cx",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cu , _0_0 , _1_0 ) ; Cx = max ( Cv . rgb , Cw . rgb * zD ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Cx = clamp ( Cx , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_OVERLAY",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Cy",i:["float"],g:!1},{a:"node_in",c:"Cz",i:["vec3"],g:!1},{a:"node_in",c:"CA",i:["vec3"],g:!1},{a:"node_out",
c:"CB",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Cy , _0_0 , _1_0 ) ; vec3 CC = vec3 ( _1_0 - zD ) ; CB = mix ( Cz * ( CC + 2.0 * zD * CA ) , vec3 ( _1_0 ) - ( CC + 2.0 * zD * ( vec3 ( _1_0 ) - CA ) ) * ( vec3 ( _1_0 ) - Cz ) , step ( _0_5 , Cz ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CB = clamp ( CB , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_DODGE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CD",i:["float"],
g:!1},{a:"node_in",c:"CE",i:["vec3"],g:!1},{a:"node_in",c:"CF",i:["vec3"],g:!1},{a:"node_out",c:"CG",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CD , _0_0 , _1_0 ) ; vec3 CH = vec3 ( _1_0 ) - zD * CF ; vec3 CI = clamp ( CE / CH , _0_0 , _1_0 ) ; CG = mix ( mix ( CI , vec3 ( _1_0 ) , step ( CH , vec3 ( _0_0 ) ) ) , CE , step ( CE , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CG = clamp ( CG , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",
c:"MIX_RGB_BURN",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CJ",i:["float"],g:!1},{a:"node_in",c:"CK",i:["vec3"],g:!1},{a:"node_in",c:"CL",i:["vec3"],g:!1},{a:"node_out",c:"CM",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CJ , _0_0 , _1_0 ) ; vec3 ko = vec3 ( _1_0 - zD ) ; vec3 CH = ko + zD * CL ; vec3 CI = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - CK ) / CH , _0_0 , _1_0 ) ; CM = mix ( CI , vec3 ( _0_0 ) , step ( CH , vec3 ( _0_0 ) ) ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CM = clamp ( CM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_HUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CN",i:["float"],g:!1},{a:"node_in",c:"CO",i:["vec3"],g:!1},{a:"node_in",c:"CP",i:["vec3"],g:!1},{a:"node_out",c:"CQ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CN , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; CQ = CO ; CR = kf ( CP ) ; if ( CR . y != _0_0 ) { kg = kf ( CQ ) ; kg . x = CR . x ; CH = kh ( kg ) ; CQ = mix ( CQ , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CQ = clamp ( CQ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SATURATION",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CS",i:["float"],g:!1},{a:"node_in",c:"CT",i:["vec3"],g:!1},{a:"node_in",c:"CU",i:["vec3"],g:!1},{a:"node_out",c:"CV",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CS , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; CV = CT ; vec3 kg , CR ; kg = kf ( CV ) ; if ( kg . y != _0_0 ) { CR = kf ( CU ) ; kg . y = Ch * kg . y + zD * CR . y ; CV = kh ( kg ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CV = clamp ( CV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_VALUE",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"CW",i:["float"],g:!1},{a:"node_in",c:"CX",i:["vec3"],g:!1},{a:"node_in",c:"CY",i:["vec3"],g:!1},{a:"node_out",c:"CZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( CW , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 kg , CR ; kg = kf ( CX ) ; CR = kf ( CY ) ; kg . z = Ch * kg . z + zD * CR . z ; CZ = kh ( kg ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"CZ = clamp ( CZ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_COLOR",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"C_",i:["float"],g:!1},{a:"node_in",c:"Da",i:["vec3"],g:!1},{a:"node_in",c:"Db",i:["vec3"],g:!1},{a:"node_out",c:"Dc",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( C_ , _0_0 , _1_0 ) ; vec3 kg , CR , CH ; Dc = Da ; CR = kf ( Db ) ; if ( CR . y != _0_0 ) { kg = kf ( Dc ) ; kg . x = CR . x ; kg . y = CR . y ; CH = kh ( kg ) ; Dc = mix ( Dc , CH , zD ) ; }".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dc = clamp ( Dc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_SOFT_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Dd",i:["float"],g:!1},{a:"node_in",c:"De",i:["vec3"],g:!1},{a:"node_in",c:"Df",i:["vec3"],g:!1},{a:"node_out",c:"Dg",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Dd , _0_0 , _1_0 ) ; float Ch = _1_0 - zD ; vec3 Dh = Df + De - Df * De ; Dg = De * ( vec3 ( Ch ) + vec3 ( zD ) * ( ( vec3 ( _1_0 ) - De ) * Df + Dh ) ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dg = clamp ( Dg , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MIX_RGB_LINEAR_LIGHT",C:[{a:"node_var",c:"MIX_RGB_USE_CLAMP",b:["0"]}],B:[{a:"node_in",c:"Di",i:["float"],g:!1},{a:"node_in",c:"Dj",i:["vec3"],g:!1},{a:"node_in",c:"Dk",i:["vec3"],g:!1},{a:"node_out",c:"Dl",i:["vec3"],g:!1}],u:[{a:"txt",b:"float zD = clamp ( Di , _0_0 , _1_0 ) ; Dl = Dj + zD * ( 2.0 * Dk - vec3 ( _1_0 ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",
j:["MIX_RGB_USE_CLAMP"],u:[{a:"txt",b:"Dl = clamp ( Dl , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"OUTPUT",C:[],B:[{a:"node_in",c:"Du",i:["vec3"],g:!1},{a:"node_in",c:"Dv",i:["float"],g:!1}],u:[{a:"txt",b:"E = Du ; I = Dv ;".split(" ")}]},{a:"node",c:"OUTPUT_SURFACE",C:[],B:[{a:"node_in",c:"Dw",i:["vec3"],g:!1}],u:[{a:"txt",b:"E = Dw ; I = _1_0 ;".split(" ")}]},{a:"node",c:"MATERIAL_BEGIN",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_NORMAL",b:["0"]},{a:"node_var",
c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"SHADELESS_MAT",b:["0"]}],B:[{a:"node_in",c:"Dy",i:["vec3"],g:!1},{a:"node_in",c:"Dz",i:["vec3"],g:!1},{a:"node_in",c:"DA",i:["float"],g:!1},{a:"node_in",c:"DB",i:["vec3"],g:!0},{a:"node_in",c:"DC",i:["float"],g:!0},{a:"node_out",c:"DD",i:["vec3"],g:!1},{a:"node_out",c:"DE",i:["vec3"],g:!1},{a:"node_out",c:"DF",i:["vec3"],g:!1},{a:"node_out",c:"DG",i:["vec3"],g:!1},{a:"node_out",c:"DH",i:["vec3"],g:!1},{a:"node_out",c:"DI",i:["vec2"],g:!1},{a:"node_out",
c:"DJ",i:["vec2"],g:!1},{a:"node_out",c:"DK",i:["vec4"],g:!1},{a:"node_param",c:"sn",i:["const","vec2"],g:!0},{a:"node_param",c:"so",i:["const","vec3"],g:!1}],u:[{a:"txt",b:"DF = clamp ( Dy , _0_0 , _1_0 ) ; DG = so [ 0 ] * clamp ( Dz , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_NORMAL"],u:[{a:"txt",b:"DH = normalize ( DB ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:["DH","=","ot",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["SHADELESS_MAT",{a:"logic_negative_expr",
o:1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"txt",b:"DD = DC * DF ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DD = sE * DF ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:["DF","*=","DA",";"]}]}]},{a:"txt",b:"DE = sF * u_environment_energy * cz ( DH ) ; DK = vec4 ( _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NUM_LIGHTS",0,{a:"g_expr",o:2}],u:[{a:"txt",b:"DI = vec2 ( sn [ 0 ] , sn [ 1 ] ) ; DJ = vec2 ( so [ 1 ] , so [ 2 ] ) ;".split(" ")}]}]},
{a:"txt",b:["H","=","DK",";"]}]},{a:"node_else",u:[{a:"txt",b:"DD = vec3 ( _0_0 ) ; DE = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{a:"node",c:"MATERIAL_END",C:[{a:"node_var",c:"MATERIAL_EXT",b:["0"]},{a:"node_var",c:"USE_MATERIAL_DIFFUSE",b:["0"]},{a:"node_var",c:"USE_MATERIAL_SPECULAR",b:["0"]}],B:[{a:"node_in",c:"DL",i:["vec4"],g:!1},{a:"node_in",c:"DM",i:["vec3"],g:!1},{a:"node_in",c:"DN",i:["vec3"],g:!1},{a:"node_in",c:"DO",i:["float"],g:!0},{a:"node_in",c:"DP",i:["float"],g:!0},{a:"node_in",c:"DQ",
i:["float"],g:!0},{a:"node_out",c:"DR",i:["vec3"],g:!0},{a:"node_out",c:"DS",i:["float"],g:!0},{a:"node_out",c:"DT",i:["vec3"],g:!0},{a:"node_out",c:"DU",i:["vec3"],g:!0},{a:"node_out",c:"DV",i:["vec3"],g:!0},{a:"node_param",c:"sr",i:["float"],g:!1},{a:"node_param",c:"su",i:["float"],g:!1}],u:[{a:"txt",b:["DO",";"]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DR"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_DIFFUSE"],u:[{a:"txt",b:"DR = DL . rgb ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"DR = vec3 ( _0_0 ) ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["DR","+=","DM",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DT"],u:[{a:"txt",b:["DT","=","DN",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["MATERIAL_EXT"],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DU"],u:[{a:"txt",b:"DU = DL . rgb ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DV"],u:[{a:"txt",b:["DV","=","DM",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( DQ , _0_0 , _1_0 ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * DP ; DS = clamp ( DQ * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},{a:"node_else",u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_DS"],u:[{a:"txt",b:"DS = clamp ( sr , _0_0 , _1_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:"float t = max ( max ( DM . r , DM . g ) , DM . b ) * su ; DS = sr * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_MATERIAL_SPECULAR"],u:[{a:"txt",b:["F","=","DM",";"]}]},{a:"node_else",u:[{a:"txt",b:"F = vec3 ( _0_0 ) ;".split(" ")}]}]},{a:"txt",b:["G","=","DN",";"]}]},{a:"node",c:"LIGHTING_AMBIENT",C:[],B:[{a:"node_in",c:"oL",i:["vec3"],g:!1},{a:"node_in",c:"oM",i:["vec3"],g:!1},{a:"node_in",c:"oN",i:["vec3"],g:!1},{a:"node_out",c:"oO",i:["vec4"],g:!1},{a:"node_out",c:"oP",i:["vec3"],g:!1}],u:[{a:"txt",b:"oO = vec4 ( oL + oN * oM , _0_0 ) ; oP = vec3 ( _0_0 ) ;".split(" ")}]},
{a:"node",c:"LIGHTING_LAMP",C:[{a:"node_var",c:"LAMP_TYPE",b:["HEMI"]},{a:"node_var",c:"LAMP_IND",b:["0"]},{a:"node_var",c:"LAMP_SPOT_SIZE",b:["0.8"]},{a:"node_var",c:"LAMP_SPOT_BLEND",b:["0.03"]},{a:"node_var",c:"LAMP_LIGHT_DIST",b:["30.0"]},{a:"node_var",c:"LAMP_SHADOW_MAP_IND",b:["-","1"]}],B:[{a:"node_in",c:"oQ",i:["vec4"],g:!1},{a:"node_out",c:"oR",i:["vec3"],g:!1},{a:"node_out",c:"oS",i:["vec2"],g:!1},{a:"node_out",c:"oT",i:["vec3"],g:!1},{a:"node_out",c:"oU",i:["float"],g:!1}],u:[{a:"txt",
b:"oS = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","HEMI",{a:"equal_expr",o:2}],u:[{a:"txt",b:["oU","=","_0_5",";"]}]},{a:"node_else",u:[{a:"txt",b:["oU","=","_0_0",";"]}]}]},{a:"txt",b:"oT = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_SHADOW_MAP_IND",1,{a:"negative_expr",o:1},{a:"non_equal_expr",o:2}],u:[{a:"txt",b:"oT *= oQ [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},
{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2},"LAMP_TYPE","POINT",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],u:[{a:"txt",b:"vec3 oV = u_light_positions [ LAMP_IND ] . xyz ; oR = oV - os ; float aM = length ( oR ) ; oT *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oR = normalize ( oR ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["LAMP_TYPE","SPOT",{a:"equal_expr",o:2}],u:[{a:"txt",b:"vec3 oX = u_light_directions [ LAMP_IND ] ; float oY = dot ( oR , oX ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oT *= oY ;".split(" ")}]}]}]},
{a:"node_else",u:[{a:"txt",b:"oR = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{a:"node",c:"DIFFUSE_FRESNEL",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"oZ",i:["vec3"],g:!1},{a:"node_in",c:"o_",i:["vec2"],g:!1},{a:"node_in",c:"pa",i:["vec3"],g:!1},{a:"node_in",c:"pb",i:["float"],g:!1},{a:"node_in",c:"pc",i:["vec2"],g:!1},{a:"node_out",c:"pd",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( oZ , k . xyz ) ; pa = cross ( pe , k . xyz ) ; pa = - normalize ( pa ) ;".split(" ")}]}]},
{a:"txt",b:"pd = _0_0 ; if ( o_ . r != _0_0 ) { float pf = ( _1_0 - pb ) * dot ( pa , oZ ) + pb ; if ( pc [ 0 ] == _0_0 ) { pd = _1_0 ; } else { float t = _1_0 + abs ( pf ) ; t = pc [ 1 ] + ( _1_0 - pc [ 1 ] ) * pow ( t , pc [ 0 ] ) ; pd = clamp ( t , _0_0 , _1_0 ) ; } pd = max ( pd , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_LAMBERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pg",i:["vec3"],g:!1},{a:"node_in",c:"ph",i:["vec2"],g:!1},{a:"node_in",c:"pi",i:["vec3"],
g:!1},{a:"node_in",c:"pj",i:["float"],g:!1},{a:"node_out",c:"pk",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pg , k . xyz ) ; pi = cross ( pe , k . xyz ) ; pi = - normalize ( pi ) ;".split(" ")}]}]},{a:"txt",b:"pk = _0_0 ; if ( ph . r != _0_0 ) { float pf = ( _1_0 - pj ) * dot ( pi , pg ) + pj ; pk = max ( pf , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_OREN_NAYAR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",
c:"pl",i:["vec3"],g:!1},{a:"node_in",c:"pm",i:["vec2"],g:!1},{a:"node_in",c:"pn",i:["vec3"],g:!1},{a:"node_in",c:"po",i:["float"],g:!1},{a:"node_in",c:"pr",i:["vec2"],g:!1},{a:"node_out",c:"pu",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pl , k . xyz ) ; pn = cross ( pe , k . xyz ) ; pn = - normalize ( pn ) ;".split(" ")}]}]},{a:"txt",b:"pu = _0_0 ; if ( pm . r != _0_0 ) { float pf = ( _1_0 - po ) * dot ( pn , pl ) + po ; if ( pr [ 0 ] > _0_0 ) { float pv = max ( dot ( pn , ou ) , _0_0 ) ; float pw = pr [ 0 ] * pr [ 0 ] ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = pl - pf * pn ; vec3 py = ou - pv * pn ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) pu = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; pu = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else pu = pf ; pu = max ( pu , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"DIFFUSE_MINNAERT",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pD",i:["vec3"],g:!1},{a:"node_in",c:"pE",i:["vec2"],g:!1},{a:"node_in",c:"pF",i:["vec3"],g:!1},{a:"node_in",c:"pG",i:["float"],g:!1},{a:"node_in",c:"pH",i:["vec2"],g:!1},{a:"node_out",c:"pI",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pD , k . xyz ) ; pF = cross ( pe , k . xyz ) ; pF = - normalize ( pF ) ;".split(" ")}]}]},{a:"txt",
b:"pI = _0_0 ; if ( pE . r != _0_0 ) { float pf = ( _1_0 - pG ) * dot ( pF , pD ) + pG ; float pv = max ( dot ( pF , ou ) , _0_0 ) ; if ( pH [ 0 ] <= _1_0 ) pI = pf * pow ( max ( pv * pf , 0.1 ) , pH [ 0 ] - _1_0 ) ; else pI = pf * pow ( 1.0001 - pv , pH [ 0 ] - _1_0 ) ; pI = max ( pI , _0_0 ) ; }".split(" ")}]},{a:"node",c:"DIFFUSE_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pJ",i:["vec3"],g:!1},{a:"node_in",c:"pK",i:["vec2"],g:!1},{a:"node_in",c:"pL",i:["vec3"],g:!1},
{a:"node_in",c:"pM",i:["float"],g:!1},{a:"node_in",c:"pN",i:["vec2"],g:!1},{a:"node_out",c:"pO",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"vec3 pe = cross ( pJ , k . xyz ) ; pL = cross ( pe , k . xyz ) ; pL = - normalize ( pL ) ;".split(" ")}]}]},{a:"txt",b:"pO = _0_0 ; if ( pK . r != _0_0 ) { float pf = ( _1_0 - pM ) * dot ( pL , pJ ) + pM ; float pP = acos ( pf ) ; if ( pP < pN [ 0 ] ) pO = _1_0 ; else if ( pP > ( pN [ 0 ] + pN [ 1 ] ) || pN [ 1 ] == _0_0 ) pO = _0_0 ; else pO = _1_0 - ( ( pP - pN [ 0 ] ) / pN [ 1 ] ) ; pO = max ( pO , _0_0 ) ; }".split(" ")}]},
{a:"node",c:"SPECULAR_PHONG",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pQ",i:["vec3"],g:!1},{a:"node_in",c:"pR",i:["vec2"],g:!1},{a:"node_in",c:"pS",i:["vec3"],g:!1},{a:"node_in",c:"pT",i:["float"],g:!1},{a:"node_in",c:"pU",i:["vec2"],g:!1},{a:"node_out",c:"pV",i:["float"],g:!1}],u:[{a:"txt",b:"pV = _0_0 ; if ( pR . g == _1_0 ) { vec3 pW = normalize ( pQ + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( pT == _0_0 ) { pV = dot ( k . xyz , pW ) ; pV = sqrt ( _1_0 - pV * pV ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"pV = ( _1_0 - pT ) * max ( dot ( pS , pW ) , _0_0 ) + pT ;".split(" ")}]}]},{a:"txt",b:"pV = pow ( pV , pU [ 0 ] ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_COOKTORR",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"pX",i:["vec3"],g:!1},{a:"node_in",c:"pY",i:["vec2"],g:!1},{a:"node_in",c:"pZ",i:["vec3"],g:!1},{a:"node_in",c:"p_",i:["float"],g:!1},{a:"node_in",c:"qa",i:["vec2"],g:!1},{a:"node_out",c:"qb",i:["float"],g:!1}],u:[{a:"txt",b:"qb = _0_0 ; if ( pY . g != _0_0 ) { vec3 pW = normalize ( pX + ou ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"if ( p_ == _0_0 ) { qb = dot ( B . xyz , pW ) ; qb = sqrt ( _1_0 - qb * qb ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"qb = max ( dot ( pZ , pW ) , _0_0 ) ; qb = ( _1_0 - p_ ) * qb + p_ ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float pv = max ( dot ( B . xyz , ou ) , _0_0 ) ; pv = sqrt ( _1_0 - pv * pv ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float pv = max ( dot ( pZ , ou ) , _0_0 ) ;".split(" ")}]}]},
{a:"txt",b:"qb = pow ( qb , qa [ 0 ] ) ; qb = qb / ( 0.1 + pv ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_WARDISO",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qc",i:["vec3"],g:!1},{a:"node_in",c:"qd",i:["vec2"],g:!1},{a:"node_in",c:"qe",i:["vec3"],g:!1},{a:"node_in",c:"qf",i:["float"],g:!1},{a:"node_in",c:"qg",i:["vec2"],g:!1},{a:"node_out",c:"qh",i:["float"],g:!1}],u:[{a:"txt",b:"qh = _0_0 ; if ( qd . g == _1_0 ) { vec3 pW = normalize ( qc + ou ) ;".split(" ")},{a:"node_cond",
f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; float pv = _0_0 ; float qj = _0_0 ; if ( qf == _0_0 ) { qi = dot ( k . xyz , pW ) ; pv = dot ( k . xyz , ou ) ; qj = dot ( k . xyz , qc ) ; qi = sqrt ( _1_0 - qi * qi ) ; pv = sqrt ( _1_0 - pv * pv ) ; qj = sqrt ( _1_0 - qj * qj ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = max ( dot ( qe , pW ) , 0.01 ) ; float pv = max ( dot ( qe , ou ) , 0.01 ) ; float qj = max ( dot ( qe , qc ) , 0.01 ) ;".split(" ")}]}]},
{a:"txt",b:"float bK = tan ( acos ( qi ) ) ; float L = max ( qg [ 0 ] , 0.01 ) ; qh = qj * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bK * bK ) / ( L * L ) ) / ( sqrt ( pv * qj ) ) ) ; }".split(" ")}]},{a:"node",c:"SPECULAR_TOON",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qk",i:["vec3"],g:!1},{a:"node_in",c:"ql",i:["vec2"],g:!1},{a:"node_in",c:"qm",i:["vec3"],g:!1},{a:"node_in",c:"qn",i:["float"],g:!1},{a:"node_in",c:"qo",i:["vec2"],g:!1},{a:"node_out",c:"qr",i:["float"],
g:!1}],u:[{a:"txt",b:"qr = _0_0 ; if ( ql . g == _1_0 ) { vec3 cj = normalize ( qk + ou ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qu = dot ( cj , k . xyz ) ; float bK = qo [ 0 ] + qo [ 1 ] ; if ( qn == _0_0 ) bK = acos ( sqrt ( _1_0 - qu * qu ) ) ;".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float bK = acos ( dot ( cj , qm ) ) ;".split(" ")}]}]},{a:"txt",b:"if ( bK < qo [ 0 ] ) qr = _1_0 ; else if ( bK >= qo [ 0 ] + qo [ 1 ] || qo [ 1 ] == _0_0 ) qr = _0_0 ; else qr = _1_0 - ( bK - qo [ 0 ] ) / qo [ 1 ] ; }".split(" ")}]},
{a:"node",c:"SPECULAR_BLINN",C:[{a:"node_var",c:"MAT_USE_TBN_SHADING",b:["0"]}],B:[{a:"node_in",c:"qv",i:["vec3"],g:!1},{a:"node_in",c:"qw",i:["vec2"],g:!1},{a:"node_in",c:"qx",i:["vec3"],g:!1},{a:"node_in",c:"qy",i:["float"],g:!1},{a:"node_in",c:"qz",i:["vec2"],g:!1},{a:"node_out",c:"qA",i:["float"],g:!1}],u:[{a:"txt",b:"qA = _0_0 ; if ( qw . g == _1_0 ) { if ( qz [ 0 ] < _1_0 || qz [ 1 ] == _0_0 ) qA = _0_0 ; else { if ( qz [ 1 ] < 100.0 ) qz [ 1 ] = sqrt ( _1_0 / qz [ 1 ] ) ; else qz [ 1 ] = 10.0 / qz [ 1 ] ; vec3 pW = normalize ( ou + qv ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["MAT_USE_TBN_SHADING"],u:[{a:"txt",b:"float qi = _0_0 ; if ( qy == _0_0 ) { float qD = dot ( k . xyz , pW ) ; qi = sqrt ( _1_0 - qD * qD ) ; }".split(" ")}]},{a:"node_else",u:[{a:"txt",b:"float qi = ( _1_0 - qy ) * max ( dot ( qx , pW ) , _0_0 ) + qy ;".split(" ")}]}]},{a:"txt",b:"if ( qi < _0_0 ) qA = _0_0 ; else { float pv = max ( dot ( qx , ou ) , 0.01 ) ; float qj = dot ( qx , qv ) ; if ( qj <= 0.01 ) qA = _0_0 ; else { float qE = max ( dot ( ou , pW ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qi * pv ) / qE ; float du = ( 2.0 * qi * qj ) / qE ; float g = min ( min ( a , b ) , du ) ; float p = sqrt ( pow ( qz [ 0 ] , 2.0 ) + pow ( qE , 2.0 ) - _1_0 ) ; float mi = pow ( p - qE , 2.0 ) / pow ( p + qE , 2.0 ) * ( _1_0 + pow ( qE * ( p + qE ) - _1_0 , 2.0 ) / pow ( qE * ( p - qE ) + _1_0 , 2.0 ) ) ; float pP = acos ( qi ) ; qA = max ( mi * g * exp ( - pow ( pP , 2.0 ) / ( 2.0 * pow ( qz [ 1 ] , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{a:"node",c:"LIGHTING_APPLY",C:[],B:[{a:"node_in",c:"qF",i:["vec4"],g:!1},{a:"node_in",c:"qG",i:["vec3"],g:!1},{a:"node_in",c:"qH",i:["float"],g:!1},{a:"node_in",c:"qI",i:["float"],g:!1},{a:"node_in",c:"qJ",i:["vec3"],g:!1},{a:"node_in",c:"qK",i:["vec3"],g:!1},{a:"node_in",c:"qL",i:["vec4"],g:!1},{a:"node_in",c:"qM",i:["vec3"],g:!1},{a:"node_in",c:"qN",i:["vec3"],g:!1},{a:"node_in",c:"qO",i:["vec3"],g:!1},{a:"node_in",c:"qP",i:["float"],g:!1},{a:"node_out",c:"qQ",i:["vec4"],g:!1},{a:"node_out",c:"qR",
i:["vec3"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_NODE_B4W_TRANSLUCENCY"],u:[{a:"txt",b:"if ( dot ( qJ , qK ) * dot ( ou , qK ) < _0_0 ) { float DW = qL . x ; float DX = qL . y ; float DY = qL . z ; float DZ = qL . w ; float D_ = clamp ( abs ( dot ( qJ , qK ) ) , _0_0 , _1_0 ) ; float Ea = clamp ( dot ( ou , - qJ ) , _0_0 , _1_0 ) ; float Eb = pow ( Ea , DX ) ; qQ = qF + qP * vec4 ( qO * D_ * pow ( qM , vec3 ( DW ) ) , _1_0 ) ; qQ += DY * mix ( vec4 ( qM , _1_0 ) , vec4 ( _1_0 ) , DZ ) * qP * vec4 ( qO * D_ * vec3 ( Eb ) , _1_0 ) ; } else { qQ = qF + vec4 ( qO * qM * qH , qI ) ; }".split(" ")}]},
{a:"node_else",u:[{a:"txt",b:"qQ = qF + vec4 ( qO * qM * qH , qI ) ;".split(" ")}]}]},{a:"txt",b:"qR = qG + qO * qN * qI ;".split(" ")}]},{a:"node",c:"RGB",C:[{a:"node_var",c:"RGB_IND",b:["0"]}],B:[{a:"node_out",c:"Ec",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ec = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{a:"node",c:"RGBTOBW",C:[],B:[{a:"node_in",c:"Ed",i:["vec3"],g:!1},{a:"node_out",c:"Ee",i:["float"],g:!1}],u:[{a:"txt",b:"Ee = dot ( Ed , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},{a:"node",c:"SEPRGB",
C:[],B:[{a:"node_in",c:"Ef",i:["vec3"],g:!1},{a:"node_out",c:"Eg",i:["float"],g:!0},{a:"node_out",c:"Eh",i:["float"],g:!0},{a:"node_out",c:"Ei",i:["float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eg"],u:[{a:"txt",b:"Eg = Ef . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Eh"],u:[{a:"txt",b:"Eh = Ef . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ei"],u:[{a:"txt",b:"Ei = Ef . b ;".split(" ")}]}]}]},{a:"node",c:"SEPHSV",C:[],B:[{a:"node_in",c:"Ej",i:["vec3"],
g:!1},{a:"node_out",c:"Ek",i:["float"],g:!0},{a:"node_out",c:"El",i:["float"],g:!0},{a:"node_out",c:"Em",i:["float"],g:!0}],u:[{a:"txt",b:"vec3 En = kf ( Ej ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ek"],u:[{a:"txt",b:"Ek = En . r ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_El"],u:[{a:"txt",b:"El = En . g ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Em"],u:[{a:"txt",b:"Em = En . b ;".split(" ")}]}]}]},{a:"node",c:"SQUEEZE",C:[],B:[{a:"node_in",
c:"Eo",i:["float"],g:!1},{a:"node_in",c:"Ep",i:["float"],g:!1},{a:"node_in",c:"Eq",i:["float"],g:!1},{a:"node_out",c:"Er",i:["float"],g:!1}],u:[{a:"txt",b:"Er = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( Eo - Eq ) * Ep ) ) ;".split(" ")}]},{a:"node",c:"GAMMA",C:[],B:[{a:"node_in",c:"Es",i:["vec3"],g:!1},{a:"node_in",c:"Et",i:["float"],g:!1},{a:"node_out",c:"Eu",i:["vec3"],g:!1}],u:[{a:"txt",b:"Eu = Es ; if ( Eu . x > _0_0 ) Eu . x = pow ( Es . x , Et ) ; if ( Eu . y > _0_0 ) Eu . y = pow ( Es . y , Et ) ; if ( Eu . z > _0_0 ) Eu . z = pow ( Es . z , Et ) ;".split(" ")}]},
{a:"node",c:"B4W_SRGB_TO_LINEAR",C:[],B:[{a:"node_in",c:"Ev",i:["vec3"],g:!1},{a:"node_out",c:"Ew",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ew = max ( vec3 ( _0_0 ) , Ev ) ; Ew = pow ( Ew , vec3 ( 2.2 ) ) ;".split(" ")}]},{a:"node",c:"B4W_LINEAR_TO_SRGB",C:[],B:[{a:"node_in",c:"Ex",i:["vec3"],g:!1},{a:"node_out",c:"Ey",i:["vec3"],g:!1}],u:[{a:"txt",b:"Ey = max ( vec3 ( _0_0 ) , Ex ) ; Ey = pow ( Ey , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{a:"node",c:"TEXTURE_EMPTY",C:[],B:[{a:"node_out",c:"Ez",i:["vec3"],
g:!1},{a:"node_out",c:"EA",i:["vec3"],g:!1},{a:"node_out",c:"EB",i:["float"],g:!1}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ez"],u:[{a:"txt",b:"Ez [ 2 ] = Ez [ 1 ] = Ez [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EA"],u:[{a:"txt",b:"EA [ 2 ] = EA [ 1 ] = EA [ 0 ] = _0_0 ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EB"],u:[{a:"txt",b:["EB","=","_0_0",";"]}]}]}]},{a:"node",c:"TEXTURE_ENVIRONMENT",C:[],B:[{a:"node_in",c:"He",i:["vec3"],g:!1},{a:"node_out",
c:"Hf",i:["vec3"],g:!0},{a:"node_out",c:"Hg",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_ENVIRONMENT_var_texture",i:["uniform","samplerCube"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_var_texture , He ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Hf"],u:[{a:"txt",b:"Hf = AH . xyz ; bC ( Hf ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Hg"],u:[{a:"txt",b:"Hg = AH . w ;".split(" ")}]}]}]},{a:"node",c:"TEXTURE_COLOR",C:[{a:"node_var",
c:"NON_COLOR",b:["0"]},{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EM",i:["vec3"],g:!0},{a:"node_in",c:"EN",i:["vec3"],g:!0},{a:"node_in",c:"EO",i:["vec3"],g:!0},{a:"node_in",c:"EP",i:["vec3"],g:!0},{a:"node_out",c:"EQ",i:["vec3"],g:!0},{a:"node_out",c:"ER",i:["float"],g:!0},{a:"node_out",c:"ES",i:["vec3"],g:!0},{a:"node_out",c:"ET",i:["float"],g:!0},{a:"node_out",c:"EU",i:["vec3"],g:!0},{a:"node_out",c:"EV",i:["float"],
g:!0},{a:"node_out",c:"EW",i:["vec3"],g:!0},{a:"node_out",c:"EX",i:["float"],g:!0},{a:"node_param",c:"node_TEXTURE_COLOR_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EM ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EQ"],u:[{a:"txt",b:"EQ = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EQ",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",
j:["USE_OUT_ER"],u:[{a:"txt",b:"ER = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EN ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ES"],u:[{a:"txt",b:"ES = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","ES",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_ET"],u:[{a:"txt",b:"ET = AH . w ;".split(" ")}]}]}]}]},
{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EO ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EU"],u:[{a:"txt",b:"EU = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EU",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EV"],u:[{a:"txt",b:"EV = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"txt",
b:"AH = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , r_ ( EP ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EW"],u:[{a:"txt",b:"EW = AH . xyz ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["NON_COLOR",{a:"logic_negative_expr",o:1}],u:[{a:"txt",b:["bC","(","EW",")",";"]}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_EX"],u:[{a:"txt",b:"EX = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"TEXTURE_NORMAL",C:[{a:"node_var",c:"USE_uv2",b:["0"]},{a:"node_var",c:"USE_uv3",b:["0"]},
{a:"node_var",c:"USE_uv4",b:["0"]}],B:[{a:"node_in",c:"EY",i:["vec3"],g:!0},{a:"node_in",c:"EZ",i:["vec3"],g:!0},{a:"node_in",c:"E_",i:["vec3"],g:!0},{a:"node_in",c:"Fa",i:["vec3"],g:!0},{a:"node_out",c:"Fb",i:["vec3"],g:!0},{a:"node_out",c:"Fc",i:["float"],g:!0},{a:"node_out",c:"Fd",i:["vec3"],g:!0},{a:"node_out",c:"Fe",i:["float"],g:!0},{a:"node_out",c:"Ff",i:["vec3"],g:!0},{a:"node_out",c:"Fg",i:["float"],g:!0},{a:"node_out",c:"Fh",i:["vec3"],g:!0},{a:"node_out",c:"Fi",i:["float"],g:!0},{a:"node_param",
c:"node_TEXTURE_NORMAL_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"vec4 AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EY ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fb"],u:[{a:"txt",b:"Fb = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fc"],u:[{a:"txt",b:"Fc = AH . w ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv2"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( EZ ) ) ;".split(" ")},
{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fd"],u:[{a:"txt",b:"Fd = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fe"],u:[{a:"txt",b:"Fe = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv3"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( E_ ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Ff"],u:[{a:"txt",b:"Ff = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",
f:[{a:"node_if",j:["USE_OUT_Fg"],u:[{a:"txt",b:"Fg = AH . w ;".split(" ")}]}]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_uv4"],u:[{a:"txt",b:"AH = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , r_ ( Fa ) ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fh"],u:[{a:"txt",b:"Fh = normalize ( sA * ( AH . xyz - _0_5 ) ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fi"],u:[{a:"txt",b:"Fi = AH . w ;".split(" ")}]}]}]}]}]},{a:"node",c:"VALUE",C:[{a:"node_var",c:"VALUE_ROW_IND",
b:["0"]},{a:"node_var",c:"VALUE_COL_IND",b:["0"]}],B:[{a:"node_out",c:"Fj",i:["float"],g:!1}],u:[{a:"txt",b:"Fj = u_node_values [ VALUE_ROW_IND ] [ VALUE_COL_IND ] ;".split(" ")}]},{a:"node",c:"VECT_MATH_ADD",C:[],B:[{a:"node_in",c:"Fk",i:["vec3"],g:!1},{a:"node_in",c:"Fl",i:["vec3"],g:!1},{a:"node_out",c:"Fm",i:["vec3"],g:!1},{a:"node_out",c:"Fn",i:["float"],g:!0}],u:[{a:"txt",b:"Fm = Fk + Fl ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fn"],u:[{a:"txt",b:"Fn = ( abs ( Fm [ 0 ] ) + abs ( Fm [ 1 ] ) + abs ( Fm [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},
{a:"node",c:"VECT_MATH_SUBTRACT",C:[],B:[{a:"node_in",c:"Fo",i:["vec3"],g:!1},{a:"node_in",c:"Fp",i:["vec3"],g:!1},{a:"node_out",c:"Fq",i:["vec3"],g:!1},{a:"node_out",c:"Fr",i:["float"],g:!0}],u:[{a:"txt",b:"Fq = Fo - Fp ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fr"],u:[{a:"txt",b:"Fr = ( abs ( Fq [ 0 ] ) + abs ( Fq [ 1 ] ) + abs ( Fq [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_AVERAGE",C:[],B:[{a:"node_in",c:"Fs",i:["vec3"],g:!1},{a:"node_in",c:"Ft",i:["vec3"],g:!1},
{a:"node_out",c:"Fu",i:["vec3"],g:!1},{a:"node_out",c:"Fv",i:["float"],g:!0}],u:[{a:"txt",b:"Fu = Fs + Ft ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fv"],u:[{a:"txt",b:"Fv = length ( Fu ) ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fu"],u:[{a:"txt",b:"Fu = normalize ( Fu ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_DOT_PRODUCT",C:[],B:[{a:"node_in",c:"Fw",i:["vec3"],g:!1},{a:"node_in",c:"Fx",i:["vec3"],g:!1},{a:"node_out",c:"Fy",i:["vec3"],g:!1},{a:"node_out",c:"Fz",
i:["float"],g:!0}],u:[{a:"txt",b:"Fy = vec3 ( _0_0 ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Fz"],u:[{a:"txt",b:"Fz = dot ( Fw , Fx ) ;".split(" ")}]}]}]},{a:"node",c:"VECT_MATH_CROSS_PRODUCT",C:[],B:[{a:"node_in",c:"FA",i:["vec3"],g:!1},{a:"node_in",c:"FB",i:["vec3"],g:!1},{a:"node_out",c:"FC",i:["vec3"],g:!1},{a:"node_out",c:"FD",i:["float"],g:!0}],u:[{a:"txt",b:"FC = cross ( FA , FB ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FD"],u:[{a:"txt",b:"FD = length ( FC ) ;".split(" ")}]}]}]},
{a:"node",c:"VECT_MATH_NORMALIZE",C:[],B:[{a:"node_in",c:"FE",i:["vec3"],g:!1},{a:"node_in",c:"FF",i:["vec3"],g:!1},{a:"node_out",c:"FG",i:["vec3"],g:!1},{a:"node_out",c:"FH",i:["float"],g:!0}],u:[{a:"txt",b:"FG = normalize ( FE ) ;".split(" ")},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_FH"],u:[{a:"txt",b:"FH = length ( FE ) ;".split(" ")}]}]},{a:"txt",b:["FF",";"]}]},{a:"node",c:"B4W_REFLECT",C:[],B:[{a:"node_in",c:"FO",i:["vec3"],g:!1},{a:"node_in",c:"FP",i:["vec3"],g:!1},{a:"node_out",c:"FQ",
i:["vec3"],g:!1}],u:[{a:"txt",b:"FQ = reflect ( _ ( u_view_tsr_inverse , FO ) , FP ) ;".split(" ")}]},{a:"node",c:"B4W_REFLECT_WORLD",C:[],B:[{a:"node_in",c:"FR",i:["vec3"],g:!1},{a:"node_out",c:"FS",i:["vec3"],g:!1}],u:[{a:"txt",b:"vec3 Hh = - ou . xyz ; FS = reflect ( Hh , FR ) ;".split(" ")}]},{a:"node",c:"B4W_PARALLAX",C:[],B:[{a:"node_in",c:"FT",i:["vec3"],g:!1},{a:"node_in",c:"FU",i:["float"],g:!1},{a:"node_in",c:"FV",i:["const","float"],g:!1},{a:"node_in",c:"FW",i:["const","float"],g:!1},{a:"node_out",
c:"FX",i:["vec3"],g:!1},{a:"node_param",c:"node_B4W_PARALLAX_var_texture",i:["uniform","sampler2D"],g:!1}],u:[{a:"txt",b:"float bN = length ( sD ) ; if ( bN < FW ) { vec2 b_ = r_ ( FT ) ; float cd = clamp ( _0_5 * ( FW - bN ) , _0_0 , _1_0 ) ; float hG = FU * cd ; vec3 cf = normalize ( ou * sA ) ; float cg = _1_0 / FV ; vec2 ch = cf . xy * hG / ( FV * cf . z ) ; float ci = _1_0 ; float cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; for ( float cl = 1.0 ; cl <= FV ; cl ++ ) { if ( cj < ci ) { ci -= cg ; b_ -= ch ; cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; } } vec2 cm = b_ + ch ; float cn = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , cm ) . a - ( ci + cg ) ; float co = cj - ci ; float cp = co / ( co - cn ) ; b_ = cp * cm + ( _1_0 - cp ) * b_ ; FX = rZ ( b_ ) ; } else FX = FT ;".split(" ")}]},
{a:"node",c:"B4W_CLAMP",C:[],B:[{a:"node_in",c:"FY",i:["vec3"],g:!1},{a:"node_out",c:"FZ",i:["vec3"],g:!1}],u:[{a:"txt",b:"FZ = clamp ( FY , _0_0 , _1_0 ) ;".split(" ")}]},{a:"node",c:"B4W_REFRACTION",C:[],B:[{a:"node_in",c:"F_",i:["vec3"],g:!1},{a:"node_in",c:"Ga",i:["float"],g:!1},{a:"node_out",c:"Gb",i:["vec3"],g:!1}],u:[{a:"txt",b:["Gb","=","F_",";"]}]},{a:"node",c:"B4W_TRANSLUCENCY",C:[],B:[{a:"node_in",c:"Gc",i:["float"],g:!1},{a:"node_in",c:"Gd",i:["float"],g:!1},{a:"node_in",c:"Ge",i:["float"],
g:!1},{a:"node_in",c:"Gf",i:["float"],g:!1},{a:"node_in",c:"Gg",i:["float"],g:!1},{a:"node_out",c:"Gh",i:["float"],g:!0},{a:"node_out",c:"Gi",i:["vec4"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gh"],u:[{a:"txt",b:["Gh","=","Gc",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["USE_OUT_Gi"],u:[{a:"txt",b:"Gi = vec4 ( Gd , Ge , Gf , Gg ) ;".split(" ")}]}]}]},{a:"node",c:"B4W_TIME",C:[],B:[{a:"node_out",c:"Gj",i:["float"],g:!1}],u:[{a:"txt",b:["Gj","=","u_time",";"]}]},{a:"node",c:"B4W_SMOOTHSTEP",
C:[],B:[{a:"node_in",c:"Gk",i:["float"],g:!1},{a:"node_in",c:"Gl",i:["float"],g:!1},{a:"node_in",c:"Gm",i:["float"],g:!1},{a:"node_out",c:"Gn",i:["float"],g:!1}],u:[{a:"txt",b:"Gn = smoothstep ( Gl , Gm , Gk ) ;".split(" ")}]},{a:"node",c:"B4W_GLOW_OUTPUT",C:[],B:[{a:"node_in",c:"Go",i:["vec3"],g:!1},{a:"node_in",c:"Gp",i:["float"],g:!1}],u:[{a:"txt",b:"E = Go ; I = Gp ;".split(" ")}]},{a:"node",c:"B4W_VECTOSCAL",C:[],B:[{a:"node_in",c:"Gq",i:["vec3"],g:!1},{a:"node_out",c:"Gr",i:["float"],g:!1}],
u:[{a:"txt",b:"Gr = ( Gq . r + Gq . g + Gq . b ) / 3.0 ;".split(" ")}]},{a:"node",c:"B4W_SCALTOVEC",C:[],B:[{a:"node_in",c:"Gs",i:["float"],g:!1},{a:"node_out",c:"Gt",i:["vec3"],g:!1}],u:[{a:"txt",b:"Gt [ 0 ] = Gs ; Gt [ 1 ] = Gs ; Gt [ 2 ] = Gs ;".split(" ")}]},{a:"nodes_global"},{a:"txt",b:"void J ( in vec3 ou , out vec3 E , out vec3 F , out vec3 G , out vec4 H , out float I ) { E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec3 ( _0_0 ) ; H = vec4 ( _0_0 ) ; I = _0_0 ;".split(" ")},{a:"cond",f:[{a:"if",
j:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{a:"logical_or_expr",o:11}],l:{a:"grp",f:[{a:"txt",b:["vec3","sx","=","j",";"]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],
l:{a:"grp",f:[{a:"txt",b:"if ( gl_FrontFacing == false )".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["if","(","gl_FrontFacing",")"]}]}}]},{a:"txt",b:"sx = sx ; else sx = - sx ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:["vec3","sy","=","sx",";"]}]}}]},{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:4}],l:{a:"grp",f:[{a:"txt",b:"vec3 sz = normalize ( sx ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["DOUBLE_SIDED_LIGHTING"],l:{a:"grp",f:[{a:"txt",b:["vec3","ot","=","sz",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 ot = normalize ( j ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_NO"],l:{a:"grp",f:[{a:"txt",b:["vec3","sw","=","sz",";"]}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["CALC_TBN_SPACE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( sz , k . xyz ) * k . w ; mat3 sA = mat3 ( k . xyz , W , sz ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["USE_NODE_NORMAL_MAP"],l:{a:"grp",f:[{a:"txt",b:"vec3 W = cross ( sx , k . xyz ) * k . w ; mat3 sC = mat3 ( k . xyz , W , sx ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:"vec3 os = h ; vec4 sD = i ; float sE = u_emit ; float sF = u_ambient ;".split(" ")},{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};a["include/particles_nodes.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PARTICLES_NODES_GLSLV",l:{a:"grp",f:[{a:"define",c:"PARTICLES_NODES_GLSLV",b:[""]},{a:"node",c:"TEX_COORD_UV",C:[],
B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"UV_MERGED",C:[],B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"UVMAP",C:[],B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"GEOMETRY_UV",C:[],B:[],u:[{a:"txt",b:["A","=","Hn",";"]}]},{a:"node",c:"PARTICLE_INFO",C:[{a:"node_var",c:"PART_INFO_SIZE",b:["0"]},{a:"node_var",c:"PART_INFO_AGE",b:["0"]},{a:"node_var",c:"PART_INFO_LT",b:["0"]},{a:"node_var",c:"PART_INFO_LOC",b:["0"]},{a:"node_var",c:"PART_INFO_IND",b:["0"]},{a:"node_var",c:"PART_INFO_VEL",
b:["0"]},{a:"node_var",c:"PART_INFO_A_VEL",b:["0"]}],B:[{a:"node_param",c:"GR",i:["GLSL_OUT","vec4"],g:!0},{a:"node_param",c:"GS",i:["GLSL_OUT","vec3"],g:!0},{a:"node_param",c:"GT",i:["GLSL_OUT","vec3"],g:!0},{a:"node_param",c:"GU",i:["GLSL_OUT","vec3"],g:!0},{a:"node_param",c:"node_PARTICLE_INFO_var_a_p_indices",i:["GLSL_IN","float"],g:!0}],u:[{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_SIZE"],u:[{a:"txt",b:"GR [ 3 ] = Hm ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_AGE"],u:[{a:"txt",
b:"GR [ 1 ] = Hl ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_LT"],u:[{a:"txt",b:"GR [ 2 ] = Ho ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_LOC"],u:[{a:"txt",b:["GS","=","Hi",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_IND"],u:[{a:"txt",b:"GR [ 0 ] = node_PARTICLE_INFO_var_a_p_indices ;".split(" ")}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_VEL"],u:[{a:"txt",b:["GT","=","Hj",";"]}]}]},{a:"node_cond",f:[{a:"node_if",j:["PART_INFO_A_VEL"],u:[{a:"txt",
b:["GU","=","Hk",";"]}]}]}]},{a:"nodes_global"},{a:"txt",b:"void J ( in vec3 Hi , in vec3 Hj , in vec3 Hk , in float Hl , in float Hm , in vec2 Hn , in float Ho ) {".split(" ")},{a:"cond",f:[{a:"if",j:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["A","=","Hn",";"]}]}}]},{a:"nodes_main"},{a:"txt",b:["}"]}]}}]}]};a["include/precision_statement.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PRECISION_STATEMENT_GLSLF",l:{a:"grp",f:[{a:"define",c:"PRECISION_STATEMENT_GLSLF",
b:[""]},{a:"var",c:"PRECISION",b:["highp"]},{a:"txt",b:["precision","PRECISION","float",";"]}]}}]}]};a["include/procedural.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"PROCEDURAL_GLSLF",l:{a:"grp",f:[{a:"define",c:"PROCEDURAL_GLSLF",b:[""]},{a:"txt",b:"vec4 Hp ( vec4 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec3 Hp ( vec3 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec2 Hp ( vec2 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec4 Hq ( vec4 x ) { return x - floor ( x * ( _1_0 / 7.0 ) ) * 7.0 ; } vec4 Hr ( vec4 x ) { return Hp ( ( 34.0 * x + 5.0 ) * x ) ; }".split(" ")},
{a:"define",c:"K",b:["0.142857142857"]},{a:"define",c:"K2",b:["0.0714285714285"]},{a:"define",c:"JITTER",b:["0.7"]},{a:"txt",b:"vec2 fG ( vec2 Hs ) { vec2 Ht = Hp ( floor ( Hs ) ) ; vec2 Hu = fract ( Hs ) ; vec4 Hv = Hu . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 Hw = Hu . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = Hr ( Ht . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = Hr ( p + Ht . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 Hx = Hq ( p ) * K + K2 ; vec4 Hy = Hq ( floor ( p * K ) ) * K + K2 ; vec4 Hz = Hv + JITTER * Hx ; vec4 HA = Hw + JITTER * Hy ; vec4 dz = Hz * Hz + HA * HA ;".split(" ")},
{a:"cond",f:[{a:"if",j:[1],l:{a:"grp",f:[{a:"txt",b:"dz . xy = min ( dz . xy , dz . zw ) ; dz . x = min ( dz . x , dz . y ) ; return dz . xx ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"dz . xy = ( dz . x < dz . y ) ? dz . xy : dz . yx ; dz . xz = ( dz . x < dz . z ) ? dz . xz : dz . zx ; dz . xw = ( dz . x < dz . w ) ? dz . xw : dz . wx ; dz . y = min ( dz . y , dz . z ) ; dz . y = min ( dz . y , dz . w ) ; return sqrt ( dz . xy ) ;".split(" ")}]}}]},{a:"txt",b:"} vec3 kX ( vec2 Hs , float HB ) { vec2 Ht = Hp ( floor ( Hs ) ) ; vec2 Hu = fract ( Hs ) ; vec4 Hv = Hu . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 Hw = Hu . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = Hr ( Ht . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = Hr ( p + Ht . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 Hx = Hq ( p ) * K + K2 ; vec4 Hy = Hq ( floor ( p * K ) ) * K + K2 ; vec4 Hz = Hv + JITTER * Hx ; vec4 HA = Hw + JITTER * Hy ; vec4 HC = Hz * Hz + HA * HA ; Hz += HB ; HA += HB ; vec4 HD = Hz * Hz + HA * HA ; Hz += HB ; HA += HB ; vec4 HE = Hz * Hz + HA * HA ; HC . xy = min ( HC . xy , HC . zw ) ; HC . x = min ( HC . x , HC . y ) ; HD . xy = min ( HD . xy , HD . zw ) ; HD . x = min ( HD . x , HD . y ) ; HE . xy = min ( HE . xy , HE . zw ) ; HE . x = min ( HE . x , HE . y ) ; return vec3 ( HC . x , HD . x , HE . x ) ; } vec3 HF ( vec3 x ) { return Hp ( ( ( x * 34.0 ) + _1_0 ) * x ) ; } float fv ( vec2 kQ ) { const vec4 HG = vec4 ( 0.211324865405187 , 0.366025403784439 , - 0.577350269189626 , 0.024390243902439 ) ; vec2 cl = floor ( kQ + dot ( kQ , HG . yy ) ) ; vec2 HH = kQ - cl + dot ( cl , HG . xx ) ; vec2 HI ; HI = ( HH . x > HH . y ) ? vec2 ( _1_0 , _0_0 ) : vec2 ( _0_0 , _1_0 ) ; vec4 HJ = HH . xyxy + HG . xxzz ; HJ . xy -= HI ; cl = Hp ( cl ) ; vec3 p = HF ( HF ( cl . y + vec3 ( _0_0 , HI . y , _1_0 ) ) + cl . x + vec3 ( _0_0 , HI . x , _1_0 ) ) ; vec3 aA = max ( 0.5 - vec3 ( dot ( HH , HH ) , dot ( HJ . xy , HJ . xy ) , dot ( HJ . zw , HJ . zw ) ) , _0_0 ) ; aA = aA * aA ; aA = aA * aA ; vec3 x = 2.0 * fract ( p * HG . www ) - _1_0 ; vec3 cj = abs ( x ) - 0.5 ; vec3 Hx = floor ( x + 0.5 ) ; vec3 HK = x - Hx ; aA *= 1.79284291400159 - 0.85373472095314 * ( HK * HK + cj * cj ) ; vec3 g ; g . x = HK . x * HH . x + cj . x * HH . y ; g . yz = HK . yz * HJ . xz + cj . yz * HJ . yw ; return 130.0 * dot ( aA , g ) ; } vec2 HN ( vec2 fW ) { float HC = dot ( fW , vec2 ( 12.9898 , 78.233 ) ) ; float HD = dot ( fW , vec2 ( 12.9898 , 78.233 ) * 2.0 ) ; float HL = fract ( sin ( HC ) * 43758.5453 ) * 2.0 - _1_0 ; float HM = fract ( sin ( HD ) * 43758.5453 ) * 2.0 - _1_0 ; return vec2 ( HL , HM ) ; } float lg ( vec2 HO ) { return fract ( sin ( dot ( HO , vec2 ( 12.9898 , 78.233 ) ) ) * 43758.5453 ) ; }".split(" ")}]}}]}]};
a["include/refraction.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"REFRACTION_GLSLF",l:{a:"grp",f:[{a:"define",c:"REFRACTION_GLSLF",b:[""]},{a:"var",c:"REFRACTIVE",b:["0"]},{a:"var",c:"USE_REFRACTION_CORRECTION",b:["0"]},{a:"cond",f:[{a:"if",j:["REFRACTIVE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["USE_REFRACTION_CORRECTION"],l:{a:"grp",f:[{a:"include",F:"pack.glslf"}]}}]},{a:"include",F:"color_util.glslf"},{a:"cond",f:[{a:"if",j:["USE_REFRACTION_CORRECTION"],l:{a:"grp",f:[{a:"txt",b:"float eS ( in float cR , inout vec2 eR , in vec2 eI ) { vec4 HP = GLSL_TEXTURE ( u_scene_depth , eR ) ; float eT = cQ ( HP ) ; if ( eT < m ) { eR = eI ; return cR ; } else { return eT ; } return cR ; }".split(" ")}]}}]},
{a:"txt",b:"vec3 cN ( in vec3 rq , in vec2 HQ ) { vec2 eI = rq . xy / rq . z ; vec2 eR = eI + HQ ;".split(" ")},{a:"cond",f:[{a:"if",j:["USE_REFRACTION_CORRECTION"],l:{a:"grp",f:[{a:"txt",b:"vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , rq ) ; float cR = cQ ( cP ) ; eS ( cR , eR , eI ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 eX = GLSL_TEXTURE ( u_refractmap , eR ) . rgb ; bC ( eX ) ; return eX ; }".split(" ")}]}}]}]}}]}]};a["include/scale_texcoord.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SCALE_TEXCOORD_GLSLV",
l:{a:"grp",f:[{a:"define",c:"SCALE_TEXCOORD_GLSLV",b:[""]},{a:"txt",b:"vec2 az ( vec2 b_ , vec3 HR ) { return ( b_ + 0.5 ) * HR . xy - 0.5 ; }".split(" ")}]}}]}]};a["include/shadow.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SHADOW_GLSLF",l:{a:"grp",f:[{a:"define",c:"SHADOW_GLSLF",b:[""]},{a:"var",c:"PRECISION",b:["highp"]},{a:"var",c:"SHADOW_TEX_RES",b:["2048.0"]},{a:"var",c:"CSM_FADE_LAST_CASCADE",b:["0"]},{a:"var",c:"CSM_BLEND_BETWEEN_CASCADES",b:["0"]},{a:"var",c:"RGBA_SHADOWS",b:["0"]},{a:"var",
c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"var",c:"COMPARED_MODE",b:["0"]},{a:"var",c:"POISSON_DISK_NUM",b:["NO_SOFT_SHADOWS"]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"procedural.glslf"}]}}]},
{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"const float HS = 0.1 ; const float HT = 0.1 ; const float HU = - 0.01 ; const float HV = 0.05 ;".split(" ")},{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","POISSON_X_16",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 HW = vec4 ( 0.14383161 , 0.34495938 , - 0.38277543 , - 0.26496911 ) ; vec4 HX = vec4 ( 0.53742981 , 0.19984126 , 0.79197514 , - 0.094184101 ) ; vec4 HY = vec4 ( - 0.94201624 , - 0.91588581 , - 0.2418884 , 0.44323325 ) ; vec4 HZ = vec4 ( - 0.81544232 , 0.94558609 , - 0.81409955 , 0.97484398 ) ; vec4 H_ = vec4 ( - 0.1410079 , 0.2938776 , 0.27676845 , - 0.41893023 ) ; vec4 Ia = vec4 ( - 0.4737342 , 0.78641367 , 0.19090188 , - 0.9293887 ) ; vec4 Ib = vec4 ( - 0.39906216 , 0.45771432 , 0.99706507 , - 0.97511554 ) ; vec4 Ic = vec4 ( - 0.87912464 , - 0.76890725 , 0.9143759 , 0.7564837 ) ;".split(" ")}]}},
{a:"elif",j:["POISSON_DISK_NUM","POISSON_X_8",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 HW = vec2 ( - 0.37192261 , 0.47109537 ) ; vec2 HX = vec2 ( - 0.6807477 , 0.69048062 ) ; vec2 HY = vec2 ( 0.11615683 , - 0.91318524 ) ; vec2 HZ = vec2 ( 0.93688596 , - 0.16948928 ) ; vec2 H_ = vec2 ( - 0.89699117 , 0.74092316 ) ; vec2 Ia = vec2 ( 0.38263656 , - 0.66119884 ) ; vec2 Ib = vec2 ( - 0.08193062 , - 0.21275223 ) ; vec2 Ic = vec2 ( 0.05578877 , 0.84225623 ) ;".split(" ")}]}},{a:"elif",j:["POISSON_DISK_NUM",
"POISSON_X_4",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 HW = vec2 ( - 0.51808083 , 0.0 ) ; vec2 HX = vec2 ( 0.5741194 , 0.0 ) ; vec2 HY = vec2 ( - 0.68048857 , 0.0 ) ; vec2 HZ = vec2 ( 0.82934988 , 0.0 ) ; vec2 H_ = vec2 ( 0.70009436 , 0.0 ) ; vec2 Ia = vec2 ( - 0.78790467 , 0.0 ) ; vec2 Ib = vec2 ( - 0.58619489 , 0.0 ) ; vec2 Ic = vec2 ( 0.41902178 , 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"bool Ie ( vec2 iK , float Id ) { return all ( lessThanEqual ( iK , vec2 ( 1.0 + Id ) ) ) && all ( greaterThanEqual ( iK , vec2 ( 0.0 - Id ) ) ) ; } float Il ( float If , float Ig , mat2 Ih , vec3 Ii , float Ij , PRECISION GLSL_SMPLR2D_SHDW Ik ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec2 iK , fI ; fI . x = If ; fI . y = Ig ; fI = Ih * fI ; iK = Ii . xy + fI * Ij / SHADOW_TEX_RES ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec2 iK = Ii . xy ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"if ( ! Ie ( iK , HU ) ) return 1.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["RGBA_SHADOWS"],l:{a:"grp",
f:[{a:"txt",b:"float eq = cQ ( GLSL_TEXTURE ( Ik , iK ) ) ; return step ( Ii . z , eq ) ;".split(" ")}]}},{a:"elif",j:["COMPARED_MODE"],l:{a:"grp",f:[{a:"txt",b:"return GLSL_TEXTURE ( Ik , vec3 ( iK , Ii . z ) ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return step ( Ii . z , GLSL_TEXTURE ( Ik , iK ) . r ) ;".split(" ")}]}}]},{a:"txt",b:"} float Iq ( vec3 Ii , PRECISION GLSL_SMPLR2D_SHDW Ik , float Ij ) { float Im = 0.0 ; Ii . z = clamp ( Ii . z , 0.0 , 1.0 ) ;".split(" ")},{a:"cond",
f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float In = HN ( Ii . xy ) . x * M_PI ; float Io = cos ( In ) ; float Ip = sin ( In ) ; mat2 Ih = mat2 ( Io , Ip , - Ip , Io ) ; for ( int cl = 0 ; cl < POISSON_DISK_NUM ; cl ++ ) { Im += Il ( HW [ cl ] , H_ [ cl ] , Ih , Ii , Ij , Ik ) ; Im += Il ( HX [ cl ] , Ia [ cl ] , Ih , Ii , Ij , Ik ) ; Im += Il ( HY [ cl ] , Ib [ cl ] , Ih , Ii , Ij , Ik ) ; Im += Il ( HZ [ cl ] , Ic [ cl ] , Ih , Ii , Ij , Ik ) ; } return clamp ( Im / ( float ( POISSON_DISK_NUM ) * 4.0 ) , 0.0 , 1.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"return Il ( 0.0 , 0.0 , mat2 ( 0.0 ) , Ii , Ij , Ik ) ;".split(" ")}]}}]},{a:"txt",b:"} float Iz ( vec3 Ir , PRECISION GLSL_SMPLR2D_SHDW Is , vec3 It , PRECISION GLSL_SMPLR2D_SHDW Iu , float Iv , float Iw , float aL ) { float Ix , Iy ; Ir . z = clamp ( Ir . z , 0.0 , 1.0 ) ; It . z = clamp ( It . z , 0.0 , 1.0 ) ; Ix = 0.0 ; Iy = 0.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float In = HN ( Ir . xy ) . x * M_PI ; float Io = cos ( In ) ; float Ip = sin ( In ) ; mat2 Ih = mat2 ( Io , Ip , - Ip , Io ) ; for ( int cl = 0 ; cl < POISSON_DISK_NUM ; cl ++ ) { Ix += Il ( HW [ cl ] , H_ [ cl ] , Ih , Ir , Iv , Is ) ; Ix += Il ( HX [ cl ] , Ia [ cl ] , Ih , Ir , Iv , Is ) ; Ix += Il ( HY [ cl ] , Ib [ cl ] , Ih , Ir , Iv , Is ) ; Ix += Il ( HZ [ cl ] , Ic [ cl ] , Ih , Ir , Iv , Is ) ; } for ( int cl = 0 ; cl < POISSON_DISK_NUM ; cl ++ ) { Iy += Il ( HW [ cl ] , H_ [ cl ] , Ih , It , Iw , Iu ) ; Iy += Il ( HX [ cl ] , Ia [ cl ] , Ih , It , Iw , Iu ) ; Iy += Il ( HY [ cl ] , Ib [ cl ] , Ih , It , Iw , Iu ) ; Iy += Il ( HZ [ cl ] , Ic [ cl ] , Ih , It , Iw , Iu ) ; } Ix = mix ( Ix , Iy , aL ) ; Ix /= ( float ( POISSON_DISK_NUM ) * 4.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"Ix += Il ( 0.0 , 0.0 , mat2 ( 0.0 ) , Ir , Iv , Is ) ; Iy += Il ( 0.0 , 0.0 , mat2 ( 0.0 ) , It , Iw , Iu ) ; Ix = mix ( Ix , Iy , aL ) ;".split(" ")}]}}]},{a:"txt",b:"return clamp ( Ix , 0.0 , 1.0 ) ; } float IA ( vec2 iK ) { float a = min ( iK . x , iK . y ) ; float b = min ( 1.0 - iK . x , 1.0 - iK . y ) ; return min ( a , b ) ; } float IC ( float uP , float IB ) { if ( IB >= 0.0 && IB <= HT ) uP = ( uP - 1.0 ) / HT * IB + 1.0 ; return uP ; } float IH ( vec3 ID , vec3 IE , PRECISION GLSL_SMPLR2D_SHDW Is , PRECISION GLSL_SMPLR2D_SHDW Iu , float Iv , float Iw , float IF , float eq ) { float uP ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CSM_BLEND_BETWEEN_CASCADES"],l:{a:"grp",f:[{a:"txt",b:"float IB = IA ( ID . xy ) ; if ( - eq > IF && IB >= 0.0 && IB <= HS && Ie ( IE . xy , 0.0 ) ) { float IG = 1.0 - IB / HS ; uP = Iz ( ID , Is , IE , Iu , Iv , Iw , IG ) ; } else".split(" ")}]}}]},{a:"txt",b:"uP = Iq ( ID , Is , Iv ) ; return uP ; } float IJ ( vec3 II , PRECISION GLSL_SMPLR2D_SHDW Ik , float Ij , float IF , float eq ) { float uP = Iq ( II , Ik , Ij ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_FADE_LAST_CASCADE"],
l:{a:"grp",f:[{a:"txt",b:"if ( - eq > IF ) { float IB = IA ( II . xy ) ; uP = IC ( uP , IB ) ; }".split(" ")}]}}]},{a:"txt",b:"return uP ; } vec4 es ( float eq ) { float uP = 1.0 ;".split(" ")},{a:"cond",f:[{a:"if",j:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{a:"non_equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["vec4","IK","=","u_pcf_blur_radii",";"]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 IK = vec4 ( 0.0 ) ;".split(" ")}]}}]},{a:"txt",b:"vec3 Ir = n . xyz / n . w ; if ( n . w < 0.0 ) Ir . z = 0.0 ;".split(" ")},
{a:"cond",f:[{a:"if",j:["CSM_SECTION1","NUM_CAST_LAMPS",1,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 It = o . xyz / o . w ; if ( o . w < 0.0 ) It . z = 0.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2","NUM_CAST_LAMPS",2,{a:"g_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 IL = u . xyz / u . w ; if ( u . w < 0.0 ) IL . z = 0.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3","NUM_CAST_LAMPS",3,{a:"g_expr",o:2},{a:"logical_or_expr",
o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 IM = v . xyz / v . w ; if ( v . w < 0.0 ) IM . z = 0.0 ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1"],l:{a:"grp",f:[{a:"txt",b:"if ( Ie ( Ir . xy , 0.0 ) ) { uP = IH ( Ir , It , u_shadow_map0 , u_shadow_map1 , IK [ 0 ] , IK [ 1 ] , u_csm_center_dists [ 0 ] , eq ) ; }".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"if ( Ie ( Ir . xy , HV ) ) { uP = IJ ( Ir , u_shadow_map0 , IK [ 0 ] , u_csm_center_dists [ 0 ] , eq ) ; }".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["CSM_SECTION1"],l:{a:"grp",f:[{a:"txt",b:"else { if ( Ie ( It . xy , 0.0 ) ) {".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION2"],l:{a:"grp",f:[{a:"txt",b:"uP = IH ( It , IL , u_shadow_map1 , u_shadow_map2 , IK [ 1 ] , IK [ 2 ] , u_csm_center_dists [ 1 ] , eq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"uP = IJ ( It , u_shadow_map1 , IK [ 1 ] , u_csm_center_dists [ 1 ] , eq ) ;".split(" ")}]}}]},{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2"],l:{a:"grp",f:[{a:"txt",
b:"else { if ( Ie ( IL . xy , 0.0 ) ) {".split(" ")},{a:"cond",f:[{a:"if",j:["CSM_SECTION3"],l:{a:"grp",f:[{a:"txt",b:"uP = IH ( IL , IM , u_shadow_map2 , u_shadow_map3 , IK [ 2 ] , IK [ 3 ] , u_csm_center_dists [ 2 ] , eq ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"uP = IJ ( IL , u_shadow_map2 , IK [ 2 ] , u_csm_center_dists [ 2 ] , eq ) ;".split(" ")}]}}]},{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3"],l:{a:"grp",f:[{a:"txt",b:"else { if ( Ie ( IM . xy , 0.0 ) ) uP = IJ ( IM , u_shadow_map3 , IK [ 3 ] , u_csm_center_dists [ 3 ] , eq ) ; }".split(" ")}]}}]},
{a:"txt",b:["}"]}]}}]},{a:"txt",b:["}"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",1,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float IN = Iq ( It , u_shadow_map1 , IK [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","IN","=","0.0",";"]}]}}]},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float IO = Iq ( IL , u_shadow_map2 , IK [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","IO","=","0.0",";"]}]}}]},{a:"cond",
f:[{a:"if",j:["NUM_CAST_LAMPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"float IP = Iq ( IM , u_shadow_map3 , IK [ 0 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:["float","IP","=","1.0",";"]}]}}]},{a:"txt",b:"return vec4 ( uP , IN , IO , IP ) ; }".split(" ")}]}}]},{a:"txt",b:"vec4 cC ( inout vec3 cy ) {".split(" ")},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 Im = GLSL_TEXTURE ( u_shadow_mask , l . xy / l . z ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",3,{a:"l_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"cy *= Im . a ;".split(" ")}]}}]},{a:"txt",b:["return","Im",";"]}]}},{a:"elif",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 Im = es ( i . z ) ; return Im ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"return vec4 ( 1.0 ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]};a["include/shadow.glslv"]=
{a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SHADOW_GLSLV",l:{a:"grp",f:[{a:"define",c:"SHADOW_GLSLV",b:[""]},{a:"var",c:"MAC_OS_SHADOW_HACK",b:["0"]},{a:"var",c:"SHADOW_TEX_RES",b:["2048.0"]},{a:"var",c:"SHADOW_USAGE",b:["NO_SHADOWS"]},{a:"var",c:"NUM_CAST_LAMPS",b:["0"]},{a:"var",c:"CSM_SECTION1",b:["0"]},{a:"var",c:"CSM_SECTION2",b:["0"]},{a:"var",c:"CSM_SECTION3",b:["0"]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{a:"equal_expr",o:2},"SHADOW_USAGE",
"SHADOW_MAPPING_BLEND",{a:"equal_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"include",F:"math.glslv"},{a:"txt",b:"vec4 IT ( mat4 IQ , vec4 IR , mat4 IS ) { vec2 eu = ( IQ * IS [ 3 ] ) . xy ; float ev = SHADOW_TEX_RES / 2.0 ; eu = floor ( eu * ev + 0.5 ) / ev - eu ; vec4 Ii = IQ * IR ; Ii . xy += eu ; Ii . xyz = 0.5 * ( Ii . xyz + Ii . w ) ; return Ii ; } void bZ ( vec3 fn , vec3 IU ) {".split(" ")},{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"mat4 IS = bc ( u_v_light_tsr [ 0 ] ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat4 IS = bc ( mat3 ( u_v_light_ts [ 0 ] , u_v_light_r [ 0 ] , 0.0 ) ) ;".split(" ")}]}}]},{a:"txt",b:"vec4 IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; n = IT ( u_p_light_matrix0 , IV , IS ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",1,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"IS = bc ( u_v_light_tsr [ 1 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"IS = bc ( mat3 ( u_v_light_ts [ 1 ] , u_v_light_r [ 1 ] , 0.0 ) ) ;".split(" ")}]}}]},
{a:"txt",b:"IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; o = IT ( u_p_light_matrix1 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",2,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"IS = bc ( u_v_light_tsr [ 2 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"IS = bc ( mat3 ( u_v_light_ts [ 2 ] , u_v_light_r [ 2 ] , 0.0 ) ) ;".split(" ")}]}}]},{a:"txt",b:"IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; u = IT ( u_p_light_matrix2 , IV , IS ) ;".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["NUM_CAST_LAMPS",3,{a:"g_expr",o:2}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MAC_OS_SHADOW_HACK"],l:{a:"grp",f:[{a:"txt",b:"IS = bc ( u_v_light_tsr [ 3 ] ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"IS = bc ( mat3 ( u_v_light_ts [ 3 ] , u_v_light_r [ 3 ] , 0.0 ) ) ;".split(" ")}]}}]},{a:"txt",b:"IV = IS * vec4 ( fn + u_normal_offset * IU , 1.0 ) ; v = IT ( u_p_light_matrix3 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION1"],l:{a:"grp",f:[{a:"txt",
b:"o = IT ( u_p_light_matrix1 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION2"],l:{a:"grp",f:[{a:"txt",b:"u = IT ( u_p_light_matrix2 , IV , IS ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["CSM_SECTION3"],l:{a:"grp",f:[{a:"txt",b:"v = IT ( u_p_light_matrix3 , IV , IS ) ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]};a["include/skin.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SKIN_GLSLV",l:{a:"grp",f:[{a:"define",c:"SKIN_GLSLV",b:[""]},{a:"var",c:"DISABLE_TANGENT_SKINNING",
b:["0"]},{a:"var",c:"SKINNED",b:["0"]},{a:"var",c:"FRAMES_BLENDING",b:["0"]},{a:"cond",f:[{a:"if",j:["SKINNED"],l:{a:"grp",f:[{a:"include",F:"math.glslv"},{a:"define",c:"SKIN_SLERP",b:["0"]},{a:"cond",f:[{a:"if",j:["SKIN_SLERP"],l:{a:"grp",f:[{a:"txt",b:"vec4 Jc ( in vec4 qV , in vec4 IW , in float IX ) { float IY = qV [ 0 ] * IW [ 0 ] + qV [ 1 ] * IW [ 1 ] + qV [ 2 ] * IW [ 2 ] + qV [ 3 ] * IW [ 3 ] ; if ( IY < 0.0 ) { IW *= - 1.0 ; IY = - IY ; } if ( abs ( IY ) >= 1.0 ) return qV ; float IZ = acos ( IY ) ; float I_ = sqrt ( 1.0 - IY * IY ) ; if ( abs ( I_ ) < 0.001 ) return vec4 ( qV * 0.5 + IW * 0.5 ) ; float Ja = sin ( ( 1.0 - IX ) * IZ ) / I_ ; float Jb = sin ( IX * IZ ) / I_ ; return qV * Ja + IW * Jb ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"vec3 Jq ( in vec3 O , in vec4 Jd , in vec4 Je , in vec4 Jf , in vec4 Jg , in float Jh ) { vec3 Ji = rh ( u_arm_rel_trans , u_arm_rel_quat , O ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKIN_SLERP"],l:{a:"grp",f:[{a:"txt",b:"vec4 qV = Jc ( Jd , Je , Jh ) ; vec4 Jj = mix ( Jf , Jg , Jh ) ; vec3 Jk = T ( qV , Ji ) ; vec3 Jl = Jk * Jj . w + Jj . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Jm = T ( Jd , Ji ) ; vec3 Jn = T ( Je , Ji ) ; vec3 Jo = Jm * Jf . w + Jf . xyz ; vec3 Jp = Jn * Jg . w + Jg . xyz ; vec3 Jl = mix ( Jo , Jp , Jh ) ;".split(" ")}]}}]},
{a:"txt",b:"return rk ( u_arm_rel_trans , u_arm_rel_quat , Jl ) ; } vec3 Jw ( in vec3 Jr , in vec4 Jd , in vec4 Je , in float Jh ) { vec3 Js = rj ( u_arm_rel_trans , u_arm_rel_quat , Jr ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["SKIN_SLERP"],l:{a:"grp",f:[{a:"txt",b:"vec4 qV = Jc ( Jd , Je , Jh ) ; vec3 Jt = T ( qV , Js ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Ju = T ( Jd , Js ) ; vec3 Jv = T ( Je , Js ) ; vec3 Jt = mix ( Ju , Jv , Jh ) ;".split(" ")}]}}]},{a:"txt",b:"return rl ( u_arm_rel_trans , u_arm_rel_quat , Jt ) ; }".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Jq ( in vec3 O , in vec4 Jd , in vec4 Jf ) { vec3 Ji = rh ( u_arm_rel_trans , u_arm_rel_quat , O ) ; vec3 Jk = T ( Jd , Ji ) ; vec3 Jl = Jk * Jf . w + Jf . xyz ; return rk ( u_arm_rel_trans , u_arm_rel_quat , Jl ) ; } vec3 Jw ( in vec3 Jr , in vec4 Jd ) { vec3 Js = rj ( u_arm_rel_trans , u_arm_rel_quat , Jr ) ; vec3 Jt = T ( Jd , Js ) ; return rl ( u_arm_rel_trans , u_arm_rel_quat , Jt ) ; }".split(" ")}]}}]},{a:"txt",b:"void an ( inout vec3 O , inout vec3 V , inout vec3 W , inout vec3 U ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:["float","Jx","=","u_frame_factor",";"]}]}}]},{a:"txt",b:"if ( a_influence . y > 0.0 ) { vec3 jD = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 Jy = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 Jz = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 JA = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec4 JB = a_influence ; for ( int cl = 0 ; cl < 4 ; cl ++ ) { int JC = int ( JB [ cl ] ) ; float JD = fract ( JB [ cl ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",
b:"Jy += JD * Jw ( V , u_quatsb [ JC ] , u_quatsa [ JC ] , Jx ) ; Jz += JD * Jw ( W , u_quatsb [ JC ] , u_quatsa [ JC ] , Jx ) ; JA += JD * Jw ( U , u_quatsb [ JC ] , u_quatsa [ JC ] , Jx ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"jD += JD * Jq ( O , u_quatsb [ JC ] , u_transb [ JC ] ) ; JA += JD * Jw ( U , u_quatsb [ JC ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_TANGENT_SKINNING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"Jy += JD * Jw ( V , u_quatsb [ JC ] ) ; Jz += JD * Jw ( W , u_quatsb [ JC ] ) ;".split(" ")}]}}]}]}}]},
{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"int JC = int ( JB [ 0 ] ) ; float JD = fract ( JB [ 0 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ; JC = int ( JB [ 1 ] ) ; JD = fract ( JB [ 1 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ; JC = int ( JB [ 2 ] ) ; JD = fract ( JB [ 2 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ; JC = int ( JB [ 3 ] ) ; JD = fract ( JB [ 3 ] ) ; jD += JD * Jq ( O , u_quatsb [ JC ] , u_quatsa [ JC ] , u_transb [ JC ] , u_transa [ JC ] , Jx ) ;".split(" ")}]}}]},
{a:"txt",b:"O = jD ; U = JA ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_TANGENT_SKINNING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"V = Jy ; W = Jz ;".split(" ")}]}}]},{a:"txt",b:"} if ( ! ( a_influence . y > 0.0 ) ) { int JE = int ( a_influence [ 0 ] - 1.0 ) ; if ( JE > - 1 ) {".split(" ")},{a:"cond",f:[{a:"if",j:["FRAMES_BLENDING"],l:{a:"grp",f:[{a:"txt",b:"O = Jq ( O , u_quatsb [ JE ] , u_quatsa [ JE ] , u_transb [ JE ] , u_transa [ JE ] , Jx ) ; V = Jw ( V , u_quatsb [ JE ] , u_quatsa [ JE ] , Jx ) ; W = Jw ( W , u_quatsb [ JE ] , u_quatsa [ JE ] , Jx ) ; U = Jw ( U , u_quatsb [ JE ] , u_quatsa [ JE ] , Jx ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"O = Jq ( O , u_quatsb [ JE ] , u_transb [ JE ] ) ; U = Jw ( U , u_quatsb [ JE ] ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["DISABLE_TANGENT_SKINNING",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"V = Jw ( V , u_quatsb [ JE ] ) ; W = Jw ( W , u_quatsb [ JE ] ) ;".split(" ")}]}}]}]}}]},{a:"txt",b:["}","}","}"]}]}}]}]}}]}]};a["include/sky_blending.glslf"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"SKY_BLENDING_GLSLF",l:{a:"grp",f:[{a:"define",c:"SKY_BLENDING_GLSLF",
b:[""]},{a:"include",F:"std.glsl"},{a:"include",F:"blending.glslf"},{a:"var",c:"WO_SKYREAL",b:["0"]},{a:"var",c:"WO_SKYBLEND",b:["0"]},{a:"var",c:"BLENDTYPE",b:["MIX"]},{a:"var",c:"MTEX_RGBTOINT",b:["0"]},{a:"var",c:"WOMAP_HORIZ",b:["0"]},{a:"var",c:"WOMAP_ZENUP",b:["0"]},{a:"var",c:"WOMAP_ZENDOWN",b:["0"]},{a:"var",c:"WOMAP_BLEND",b:["0"]},{a:"var",c:"MTEX_NEGATIVE",b:["0"]},{a:"txt",b:"vec3 JF ( vec3 ki , vec3 kj , float aL , float kI ) { float kk = aL * kI ;".split(" ")},{a:"cond",f:[{a:"if",j:["BLENDTYPE",
"MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kl ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","ADD",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return km ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SUBTRACT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kn ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kp ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE",
"SCREEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kq ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","OVERLAY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kr ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIFFERENCE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ks ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIVIDE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kt ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE",
"DARKEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ku ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LIGHTEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kv ( ki , kj , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","HUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kz ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SATURATION",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kA ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE",
"VALUE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kB ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","COLOR",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kC ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SOFT_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kE ( kj , ki , kk ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LINEAR_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kF ( kj , ki , kk ) ;".split(" ")}]}}]},{a:"txt",
b:"return vec3 ( 1.0 , 0.0 , 1.0 ) ; } float JG ( float kG , float kH , float aL , float kI ) { vec3 ki = vec3 ( kG ) , kj = vec3 ( kH ) ; float kk = aL * kI ;".split(" ")},{a:"cond",f:[{a:"if",j:["BLENDTYPE","MIX",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kl ( kj , ki , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","ADD",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return km ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SUBTRACT",{a:"equal_expr",o:2}],l:{a:"grp",
f:[{a:"txt",b:"return kn ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","MULTIPLY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kJ ( kG , kH , kk , kI ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","SCREEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kK ( kG , kH , kk , kI ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","OVERLAY",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kL ( kG , kH , kk , kI ) ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIFFERENCE",
{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ks ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DIVIDE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kt ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","DARKEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return ku ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LIGHTEN",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kv ( ki , kj , kk ) . x ;".split(" ")}]}},{a:"elif",
j:["BLENDTYPE","SOFT_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kE ( kj , ki , kk ) . x ;".split(" ")}]}},{a:"elif",j:["BLENDTYPE","LINEAR_LIGHT",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"return kF ( kj , ki , kk ) . x ;".split(" ")}]}}]},{a:"txt",b:"return 0.0 ; } vec3 eB ( vec3 ex , vec3 ey , vec4 eA , float ew , vec3 ez ) { float JH = 1.0 ; JH = eA . a ;".split(" ")},{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT"],l:{a:"grp",f:[{a:"txt",b:"JH = ge ( eA ) ;".split(" ")}]}}]},{a:"cond",
f:[{a:"if",j:["MTEX_NEGATIVE"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"eA = vec4 ( vec3 ( 1.0 ) - eA . rgb , eA . a ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"JH = 1.0 - JH ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{a:"logical_or_expr",o:3}],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT"],l:{a:"grp",f:[{a:"txt",b:"eA = vec4 ( u_sky_tex_color , 1.0 ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"JH = eA . a ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_HORIZ"],l:{a:"grp",f:[{a:"txt",b:"ex = JF ( eA . rgb , ex , JH , u_sky_tex_fac [ 1 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_ZENUP","WOMAP_ZENDOWN",{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:["float","JI","=","0.0",";"]},{a:"cond",f:[{a:"if",j:["WO_SKYREAL"],l:{a:"grp",f:[{a:"txt",b:"if ( dot ( ez , vec3 ( 0.0 , 0.0 , 1.0 ) ) >= 0.0 ) {".split(" ")},{a:"cond",f:[{a:"if",j:["WOMAP_ZENUP"],
l:{a:"grp",f:[{a:"txt",b:"JI = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:[";"]}]}}]},{a:"txt",b:["}"]},{a:"cond",f:[{a:"if",j:["WOMAP_ZENDOWN"],l:{a:"grp",f:[{a:"txt",b:"else JI = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["WOMAP_ZENUP"],l:{a:"grp",f:[{a:"txt",b:"JI = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{a:"elif",j:["WOMAP_ZENDOWN"],l:{a:"grp",f:[{a:"txt",b:"JI = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}}]},{a:"txt",
b:"if ( JI != 0.0 ) ey = JF ( eA . rgb , ey , JH , JI ) ;".split(" ")}]}}]}]}}]},{a:"cond",f:[{a:"if",j:["WOMAP_BLEND"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["MTEX_RGBTOINT",{a:"logic_negative_expr",o:1}],l:{a:"grp",f:[{a:"txt",b:"JH = dot ( eA . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ;".split(" ")}]}}]},{a:"txt",b:"ew = JG ( u_sky_tex_dvar , ew , JH , u_sky_tex_fac [ 0 ] ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["WO_SKYBLEND"],l:{a:"grp",f:[{a:"txt",b:"vec3 bs = mix ( ex , ey , ew ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:["vec3","bs","=","ex",";"]}]}}]},{a:"txt",b:["return","bs",";","}"]}]}}]}]};a["include/std.glsl"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"STD_ENUMS_GLSL",l:{a:"grp",f:[{a:"define",c:"STD_ENUMS_GLSL",b:[""]},{a:"var",c:"CONSTANTS_HACK",b:["0"]},{a:"define",c:"TEXTURE_COORDS_NONE",b:["0"]},{a:"define",c:"TEXTURE_COORDS_UV_ORCO",b:["1"]},{a:"define",c:"TEXTURE_COORDS_NORMAL",b:["2"]},{a:"define",c:"TEXTURE_BLEND_TYPE_MIX",b:["1"]},{a:"define",c:"TEXTURE_BLEND_TYPE_MULTIPLY",
b:["2"]},{a:"define",c:"SHADOW_SRC_NONE",b:["1"]},{a:"define",c:"SHADOW_SRC_DEPTH",b:["2"]},{a:"define",c:"SHADOW_SRC_MASK",b:["3"]},{a:"define",c:"SHADOW_DST_NONE",b:["1"]},{a:"define",c:"SHADOW_DST_DEPTH",b:["2"]},{a:"define",c:"SHADOW_DST_MASK",b:["3"]},{a:"define",c:"NO_SHADOWS",b:["1"]},{a:"define",c:"SHADOW_CASTING",b:["2"]},{a:"define",c:"SHADOW_MASK_GENERATION",b:["3"]},{a:"define",c:"SHADOW_MAPPING_OPAQUE",b:["4"]},{a:"define",c:"SHADOW_MAPPING_BLEND",b:["5"]},{a:"define",c:"POISSON_X_16",
b:["4"]},{a:"define",c:"POISSON_X_8",b:["2"]},{a:"define",c:"POISSON_X_4",b:["1"]},{a:"define",c:"NO_SOFT_SHADOWS",b:["0"]},{a:"define",c:"SPECULAR_PHONG",b:["1"]},{a:"define",c:"SPECULAR_COOKTORR",b:["2"]},{a:"define",c:"SPECULAR_WARDISO",b:["3"]},{a:"define",c:"SPECULAR_BLINN",b:["4"]},{a:"define",c:"SPECULAR_TOON",b:["5"]},{a:"define",c:"DIFFUSE_LAMBERT",b:["1"]},{a:"define",c:"DIFFUSE_OREN_NAYAR",b:["2"]},{a:"define",c:"DIFFUSE_FRESNEL",b:["3"]},{a:"define",c:"DIFFUSE_MINNAERT",b:["4"]},{a:"define",
c:"DIFFUSE_TOON",b:["5"]},{a:"define",c:"MIX",b:["0"]},{a:"define",c:"ADD",b:["1"]},{a:"define",c:"SUBTRACT",b:["2"]},{a:"define",c:"MULTIPLY",b:["3"]},{a:"define",c:"SCREEN",b:["4"]},{a:"define",c:"OVERLAY",b:["5"]},{a:"define",c:"DIFFERENCE",b:["6"]},{a:"define",c:"DIVIDE",b:["7"]},{a:"define",c:"DARKEN",b:["8"]},{a:"define",c:"LIGHTEN",b:["9"]},{a:"define",c:"HUE",b:["10"]},{a:"define",c:"SATURATION",b:["11"]},{a:"define",c:"VALUE",b:["12"]},{a:"define",c:"COLOR",b:["13"]},{a:"define",c:"SOFT_LIGHT",
b:["14"]},{a:"define",c:"LINEAR_LIGHT",b:["15"]},{a:"define",c:"REFL_NONE",b:["0"]},{a:"define",c:"REFL_MIRRORMAP",b:["1"]},{a:"define",c:"REFL_PLANE",b:["2"]},{a:"define",c:"REFL_CUBE",b:["3"]},{a:"define",c:"REFL_PBR_SIMPLE",b:["4"]},{a:"define",c:"REFL_PBR_STANDARD",b:["5"]},{a:"define",c:"INVERSE_QUADRATIC",b:["0"]},{a:"define",c:"LINEAR",b:["1"]},{a:"define",c:"QUADRATIC",b:["2"]},{a:"define",c:"HEMI",b:["1"]},{a:"define",c:"SPOT",b:["2"]},{a:"define",c:"POINT",b:["3"]},{a:"define",c:"SUN",b:["4"]},
{a:"define",c:"DOF_SIMPLE",b:["0"]},{a:"define",c:"DOF_BOKEH",b:["1"]},{a:"define",c:"COC_ALL",b:["0"]},{a:"define",c:"COC_FOREGROUND",b:["1"]},{a:"define",c:"COC_COMBINE",b:["2"]},{a:"define",c:"VT_WORLD_TO_WORLD",b:["0"]},{a:"define",c:"VT_WORLD_TO_OBJECT",b:["1"]},{a:"define",c:"VT_WORLD_TO_CAMERA",b:["2"]},{a:"define",c:"VT_OBJECT_TO_WORLD",b:["3"]},{a:"define",c:"VT_OBJECT_TO_OBJECT",b:["4"]},{a:"define",c:"VT_OBJECT_TO_CAMERA",b:["5"]},{a:"define",c:"VT_CAMERA_TO_WORLD",b:["6"]},{a:"define",
c:"VT_CAMERA_TO_OBJECT",b:["7"]},{a:"define",c:"VT_CAMERA_TO_CAMERA",b:["8"]},{a:"define",c:"VT_POINT",b:["0"]},{a:"define",c:"VT_VECTOR",b:["1"]},{a:"define",c:"VT_NORMAL",b:["2"]},{a:"define",c:"NM_TANGENT",b:["0"]},{a:"define",c:"NM_OBJECT",b:["1"]},{a:"define",c:"NM_WORLD",b:["2"]},{a:"define",c:"NM_BLENDER_OBJECT",b:["3"]},{a:"define",c:"NM_BLENDER_WORLD",b:["4"]},{a:"define",c:"BILLBOARD_ALIGN_VIEW",b:["1"]},{a:"define",c:"BILLBOARD_ALIGN_XY",b:["2"]},{a:"define",c:"BILLBOARD_ALIGN_YZ",b:["3"]},
{a:"define",c:"BILLBOARD_ALIGN_ZX",b:["4"]},{a:"define",c:"POST_EFFECT_NONE",b:["1"]},{a:"define",c:"POST_EFFECT_GRAYSCALE",b:["2"]},{a:"define",c:"POST_EFFECT_BLUR",b:["3"]},{a:"define",c:"POST_EFFECT_GLOW_BLUR",b:["4"]},{a:"define",c:"POST_EFFECT_DOF_BLUR",b:["5"]},{a:"define",c:"POST_EFFECT_ALPHA_BLUR",b:["6"]},{a:"define",c:"POST_EFFECT_EXTEND",b:["7"]},{a:"define",c:"FLIP_CUBEMAP_COORDS",b:["8"]},{a:"define",c:"BLUR_PASS_1",b:["1"]},{a:"define",c:"BLUR_PASS_2",b:["2"]},{a:"define",c:"BLUR_PASS_3",
b:["3"]},{a:"define",c:"BLUR_PASS_4",b:["4"]},{a:"define",c:"BLUR_PASS_5",b:["5"]},{a:"define",c:"DV_NONE",b:["0"]},{a:"define",c:"DV_OPAQUE_WIREFRAME",b:["1"]},{a:"define",c:"DV_TRANSPARENT_WIREFRAME",b:["2"]},{a:"define",c:"DV_FRONT_BACK_VIEW",b:["3"]},{a:"define",c:"DV_BOUNDINGS",b:["4"]},{a:"define",c:"DV_CLUSTERS_VIEW",b:["5"]},{a:"define",c:"DV_BATCHES_VIEW",b:["6"]},{a:"define",c:"DV_RENDER_TIME",b:["7"]},{a:"define",c:"SSAO_QUALITY_8",b:["1"]},{a:"define",c:"SSAO_QUALITY_16",b:["2"]},{a:"define",
c:"SSAO_QUALITY_24",b:["3"]},{a:"define",c:"SSAO_QUALITY_32",b:["4"]},{a:"define",c:"AA_METHOD_FXAA_LIGHT",b:["1"]},{a:"define",c:"AA_METHOD_FXAA_QUALITY",b:["2"]},{a:"define",c:"AA_QUALITY_LOW",b:["0"]},{a:"define",c:"AA_QUALITY_MEDIUM",b:["1"]},{a:"define",c:"AA_QUALITY_HIGH",b:["2"]},{a:"define",c:"SMAA_RESOLVE",b:["25"]},{a:"define",c:"SMAA_EDGE_DETECTION",b:["24"]},{a:"define",c:"SMAA_BLENDING_WEIGHT_CALCULATION",b:["23"]},{a:"define",c:"SMAA_NEIGHBORHOOD_BLENDING",b:["26"]},{a:"define",c:"AA_METHOD_SMAA_LOW",
b:["1"]},{a:"define",c:"AA_METHOD_SMAA_MEDIUM",b:["2"]},{a:"define",c:"AA_METHOD_SMAA_HIGH",b:["3"]},{a:"define",c:"AA_METHOD_SMAA_ULTRA",b:["4"]},{a:"define",c:"REFL_PASS_NONE",b:["0"]},{a:"define",c:"REFL_PASS_PLANE",b:["1"]},{a:"define",c:"REFL_PASS_CUBE",b:["2"]},{a:"define",c:"SRGB_NONE",b:["0"]},{a:"define",c:"SRGB_SIMPLE",b:["1"]},{a:"define",c:"SRGB_PROPER",b:["2"]},{a:"define",c:"CAM_TYPE_ORTHO",b:["0"]},{a:"define",c:"CAM_TYPE_PERSP",b:["1"]},{a:"define",c:"M_PI",b:["3.14159265359"]},{a:"define",
c:"M_PI_4",b:["0.785398163"]},{a:"define",c:"INV_PI",b:["0.318309886"]},{a:"define",c:"UP_VECTOR",b:"vec3 ( 0.0 , 0.0 , 1.0 )".split(" ")},{a:"define",c:"RIGHT_VECTOR",b:"vec3 ( 1.0 , 0.0 , 0.0 )".split(" ")},{a:"define",c:"TOWARD_VECTOR",b:"vec3 ( 0.0 , - 1.0 , 0.0 )".split(" ")},{a:"cond",f:[{a:"if",j:["CONSTANTS_HACK"],l:{a:"grp",f:[{a:"txt",b:"float _0_0 = 0.0 ; float _0_5 = 0.5 ; float _1_0 = 1.0 ; float _255_0 = 255.0 ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"define",c:"_0_0",b:["0.0"]},
{a:"define",c:"_0_5",b:["0.5"]},{a:"define",c:"_1_0",b:["1.0"]},{a:"define",c:"_255_0",b:["255.0"]}]}}]}]}}]}]};a["include/to_world.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"TO_WORLD_GLSLV",l:{a:"grp",f:[{a:"define",c:"TO_WORLD_GLSLV",b:[""]},{a:"include",F:"math.glslv"},{a:"var",c:"BILLBOARD_ALIGN",b:["BILLBOARD_ALIGN_VIEW"]},{a:"var",c:"BILLBOARD_SPHERICAL",b:["0"]},{a:"var",c:"BILLBOARD_RANDOM",b:["0"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"var",c:"BILLBOARD_JITTERED",b:["0"]},{a:"var",c:"BILLBOARD_PRES_GLOB_ORIENTATION",
b:["0"]},{a:"var",c:"STATIC_BATCH",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"define",c:"MAX_BILLBOARD_ANGLE",b:["M_PI_4"]},{a:"cond",f:[{a:"if",j:["BILLBOARD_SPHERICAL","BILLBOARD",{a:"logic_negative_expr",o:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 bj ( vec3 JJ , mat3 N ) { vec4 JK = vec4 ( N [ 1 ] [ 1 ] , N [ 1 ] [ 2 ] , N [ 2 ] [ 0 ] , N [ 2 ] [ 1 ] ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec4 JL = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec4 JL = X ( RIGHT_VECTOR , M_PI / 2.0 ) ;".split(" ")}]}}]},{a:"txt",b:"JK = qX ( JL , JK ) ; JK = kR ( JK ) ; mat3 bk = da ( ) ; bk [ 0 ] = JJ ; bk = dd ( JK , bk ) ; return bk ; }".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat3 JN ( vec3 lH , vec3 JJ ) { vec3 JM = lH - JJ ; JM . z = 0.0 ; JM = normalize ( JM ) ; vec4 JK = rd ( JM , TOWARD_VECTOR ) ; mat3 bk = da ( ) ; bk [ 0 ] = JJ ; bk = dd ( JK , bk ) ; return bk ; }".split(" ")}]}}]},
{a:"cond",f:[{a:"if",j:["BILLBOARD_JITTERED"],l:{a:"grp",f:[{a:"txt",b:"mat3 at ( in vec3 JO , float JP , float JQ , float JR , vec3 a_ , mat3 Z ) { float HO = fract ( length ( a_ ) / 0.17 ) ; float JS = JR + HO / 10.0 ; float JT = HO ; if ( JR != 0.0 ) JT /= JR ; JO *= 1.0 + 0.5 * sin ( JP ) ; float JU = length ( JO ) * JQ * sin ( 2.0 * 3.14 * JP * JS + JT ) ; vec4 JV = X ( TOWARD_VECTOR , JU ) ; vec4 JW = vec4 ( Z [ 1 ] [ 1 ] , Z [ 1 ] [ 2 ] , Z [ 2 ] [ 0 ] , Z [ 2 ] [ 1 ] ) ; JW = qX ( JW , JV ) ; Z = dd ( JW , Z ) ; return Z ; }".split(" ")}]}}]},
{a:"txt",b:"mat3 as ( in vec3 lH , in vec3 aq , in mat3 N , in mat3 Z ) {".split(" ")},{a:"cond",f:[{a:"if",j:["BILLBOARD_SPHERICAL","BILLBOARD",{a:"logic_negative_expr",o:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{a:"equal_expr",o:2},{a:"logical_and_expr",o:2},{a:"logical_or_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"mat3 lW = bj ( aq , N ) ;".split(" ")}]}},{a:"elif",j:["BILLBOARD_RANDOM"],l:{a:"grp",f:[{a:"txt",b:"float HO = fract ( ( aq . x * 1.43 - aq . z * 0.123 + aq . y * 6.1 ) ) ; float JX = 2.0 * M_PI * HO ; vec4 JY = vec4 ( N [ 1 ] [ 1 ] , N [ 1 ] [ 2 ] , N [ 2 ] [ 0 ] , N [ 2 ] [ 1 ] ) ; float JZ = asin ( 2.0 * ( JY . x * JY . y - JY . z * JY . w ) ) ; float hu = JZ - JX ; if ( hu < 0.0 ) hu = 2.0 * M_PI + hu ; float J_ = JX ; if ( hu <= MAX_BILLBOARD_ANGLE ) J_ += hu ; else if ( hu <= M_PI - MAX_BILLBOARD_ANGLE ) J_ += MAX_BILLBOARD_ANGLE * ( 2.0 * hu - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) ; else if ( hu <= M_PI + MAX_BILLBOARD_ANGLE ) J_ += hu - M_PI ; else if ( hu <= 2.0 * M_PI - MAX_BILLBOARD_ANGLE ) J_ += MAX_BILLBOARD_ANGLE * ( 2.0 * hu - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) + M_PI ; else J_ += hu - 2.0 * M_PI ; vec4 Ka = X ( UP_VECTOR , J_ ) ; mat3 lW = da ( ) ; lW [ 0 ] = aq ; lW = dd ( Ka , lW ) ;".split(" ")}]}},
{a:"else",l:{a:"grp",f:[{a:"txt",b:"mat3 lW = JN ( lH , aq ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{a:"logic_negative_expr",o:1},{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Z [ 0 ] = vec3 ( 0.0 , 0.0 , 0.0 ) ; lW = aY ( lW , Z ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"lW [ 1 ] [ 0 ] *= Z [ 1 ] [ 0 ] ;".split(" ")}]}}]},{a:"txt",b:"return lW ; } au av ( in vec3 fn , in vec3 Kb , in vec3 Kc , in vec3 Kd , in vec3 Ke , in vec3 Kf , in mat3 Z ) { fn = ap ( Z , fn ) ; Kb = ap ( Z , Kb ) ; Kc = _ ( Z , Kc ) ; Kd = _ ( Z , Kd ) ; Ke = _ ( Z , Ke ) ; Kf = _ ( Z , Kf ) ; return lX ( au ( fn , Kb , Kc , Kd , Ke , Kf , vec3 ( 0.0 ) ) ) ; }".split(" ")}]}}]}]};
a["include/wind_bending.glslv"]={a:"grp",f:[{a:"cond",f:[{a:"ifndef",c:"WIND_BENDING_GLSLV",l:{a:"grp",f:[{a:"define",c:"WIND_BENDING_GLSLV",b:[""]},{a:"var",c:"WIND_BEND",b:["0"]},{a:"var",c:"MAIN_BEND_COL",b:["0"]},{a:"var",c:"DETAIL_BEND",b:["0"]},{a:"var",c:"BEND_CENTER_ONLY",b:["0"]},{a:"var",c:"REFLECTION_PASS",b:["REFL_PASS_NONE"]},{a:"var",c:"BILLBOARD",b:["0"]},{a:"include",F:"std.glsl"},{a:"cond",f:[{a:"if",j:["WIND_BEND"],l:{a:"grp",f:[{a:"txt",b:"void Ks ( inout vec3 bo , in vec3 Kg , in float Kh , in float Ki , in float fu , in vec3 JO , in float Kj , in mat4 bV ) {".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = ( bV * vec4 ( bo , 1.0 ) ) . xyz ; vec3 Kl = ( bV * vec4 ( Kg , 1.0 ) ) . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = bo ; vec3 Kl = Kg ;".split(" ")}]}}]},{a:"txt",b:"float dA = length ( Kl ) ; float Km = Ki * ( 1.0 + 0.1 * fract ( dA ) ) ; float Kn = Kh * Kj * ( 1.0 + sin ( 2.0 * 3.14 * fu * Km + dA ) ) ; float Ko = ( Kk . z - Kl . z ) * abs ( Kn ) ; Ko += 1.0 ; Ko *= Ko ; Ko = Ko * Ko - Ko ; vec3 Kp = Kk ; Kp . xy += JO . xy * Ko * sign ( Kn ) ; vec3 Kq = Kp - Kl ; if ( all ( equal ( Kq , vec3 ( 0.0 ) ) ) ) bo = Kg ; else {".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"Kq = ( bV * vec4 ( Kq , 0.0 ) ) . xyz ;".split(" ")}]}}]},{a:"txt",b:"float Kr = length ( Kk - Kl ) ; bo = Kg + normalize ( Kq ) * Kr ; } }".split(" ")},{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"vec4 Kt ( vec4 x ) { return x * x * ( 3.0 - 2.0 * x ) ; } vec4 Ku ( vec4 x ) { return abs ( fract ( x + 0.5 ) * 2.0 - 1.0 ) ; } vec4 Kv ( vec4 x ) { return Kt ( Ku ( x ) ) ; } void KH ( inout vec3 bo , in float fu , in vec3 U , in vec3 JO , in vec3 Kg , in float Kw , in float Kx , in float Ky , in vec3 Kz , in mat4 bV ) { float KA ; float KB ; float KC ; vec2 KD ; vec4 KE ; vec2 KF ; vec3 KG ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = ( bV * vec4 ( bo , 1.0 ) ) . xyz ; vec3 Kl = ( bV * vec4 ( Kg , 1.0 ) ) . xyz ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 Kk = bo ; vec3 Kl = Kg ;".split(" ")}]}}]},{a:"txt",b:"KA = dot ( Kl , vec3 ( 1.0 ) ) ; KB = KA + Kz . g ; KC = dot ( Kk , vec3 ( Kz . g ) ) ; KD = ( fu + vec2 ( KC , KB ) ) ; KE = ( ( fract ( ( KD . xxyy * vec4 ( 1.975 , 0.793 , 0.375 , 0.193 ) ) ) * 2.0 ) - 1.0 ) * length ( JO ) * Kw ; KE = Kv ( KE ) ; KF = KE . xz + KE . yw ; KF . y = 0.5 - KF . y ; KG = KF . xxy * Kz . rrb * vec3 ( Kx * U . x , Kx * U . y , Ky ) ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"KG = ( bV * vec4 ( KG , 0.0 ) ) . xyz ;".split(" ")}]}}]},{a:"txt",b:["bo","+=","KG",";","}"]}]}}]},{a:"txt",b:"void ax ( inout vec3 O , inout vec3 ao , in vec3 U , in mat4 bV ) { vec3 KI = u_wind * 1.0 + 0.7 * sin ( u_time ) ;".split(" ")},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:"vec3 KJ = ao ; vec3 KK = a_emitter_center ;".split(" ")},
{a:"cond",f:[{a:"if",j:["REFLECTION_PASS","REFL_PASS_PLANE",{a:"equal_expr",o:2},"BILLBOARD",{a:"logical_and_expr",o:2}],l:{a:"grp",f:[{a:"txt",b:"KK = ( bV * vec4 ( KK , 1.0 ) ) . xyz ;".split(" ")}]}}]}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"vec3 KJ = O ; vec3 KK = ao ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["MAIN_BEND_COL"],l:{a:"grp",f:[{a:"cond",f:[{a:"if",j:["DETAIL_BEND"],l:{a:"grp",f:[{a:"txt",b:"KH ( KJ , u_time , U , KI , KK , au_detail_bending_freq , au_detail_bending_amp , au_branch_bending_amp , a_bending_col_detail , bV ) ;".split(" ")}]}}]},
{a:"txt",b:"Ks ( KJ , KK , au_wind_bending_amp , au_wind_bending_freq , u_time , KI , a_bending_col_main , bV ) ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"Ks ( KJ , KK , au_wind_bending_amp , au_wind_bending_freq , u_time , KI , 1.0 , bV ) ;".split(" ")}]}}]},{a:"cond",f:[{a:"if",j:["BEND_CENTER_ONLY"],l:{a:"grp",f:[{a:"txt",b:"O += KJ - ao ; ao = KJ ;".split(" ")}]}},{a:"else",l:{a:"grp",f:[{a:"txt",b:"O = KJ ; ao = KK ;".split(" ")}]}}]},{a:"txt",b:["}"]}]}}]}]}}]}]}};b4w.module.__transform=function(a,w){function t(a,b){e.$h(a)?p.Bd(b,e.Xh(a)):p.Bd(b,a.A.D)}function c(a,b){var c=a.A;if(e.$h(a)){p.Gc(b,c.D);var f=e.Iz(a),f=p.invert(f,L);p.multiply(f,c.D,e.Xh(a))}else p.Gc(b,c.D)}function b(a,b){e.$h(a)?p.Gc(b,e.Xh(a)):p.Gc(b,a.A.D)}function k(a,b){p.Fb(a.A.D,b);return b}function h(a,b){e.$h(a)?p.Fb(e.Xh(a),b):p.Fb(a.A.D,b);return b}function O(a,b){e.$h(a)?p.copy(b,e.Xh(a)):p.copy(b,a.A.D)}function m(a,b){e.$h(a)?p.copy(e.Xh(a),b):p.copy(a.A.D,b);return b}function x(a){var b=
a.A,c=a.T,f=a.type;"CAMERA"==f&&g.KS(a);e.Q5(a,U);"CAMERA"==f&&g.O5(a);r.Lq(b.Ca,b.D,b.Ki);r.my(b.Bc,b.D,b.bf);for(var h=0;h<c.length;h++)for(var d=c[h].da,k=0;k<d.length;k++)P.WS(d[k],b.D,c[h].dh[k]);switch(f){case "MESH":a.YP&&p.invert(a.A.D,a.A.HD);if(d=a.by)p.invert(d.A.D,L),p.multiply(L,b.D,L),p.ir(L,b.Rt),p.Fb(L,b.Qt);b.Vu=!0;break;case "CAMERA":for(h=0;h<c.length;h++)g.P5(a,c[h]);break;case "SPEAKER":M.T4(a,U,K);break;case "LAMP":B.W5(a)}for(var d=p.Wb(b.D,D),l=p.Fb(b.D,u),h=0;h<c.length;h++)if(k=
c[h],k.xA){var m=k.wb,q=m.J;switch(f){case "MESH":b.Wf&&N.eI(m);q=k.Yk;null!=b.Ke&&q&&N.MS(q,d);break;case "EMPTY":v.T5(a);break;case "CAMERA":if(N.R()==m&&N.Jm(m)==a){N.H3(m);if(q.Cd){(q.Cd.enable_csm||q.Cd.JZ)&&N.eI(m);var A=P.La(a,m).oa[0];N.l6(A,q.Da)}M.M1(m,d,l,U,K)}break;case "LAMP":N.U5(a,m)}q=k.gk;A=a.cw;if(A.length)for(k=0;k<q.length;k++){var y=q[k].H;N.PS(q[k],d,l);P.QS(A,y.Kc);g.z4(y,N.Jm(m))}}b=a.cf;for(h=0;h<b.length;h++)x(b[h]);a=a.WE;for(h=0;h<a.length;h++)b=a[h],d=b[0],e.J5(d,b[1])}
var r=w("__boundings"),g=w("__camera"),e=w("__constraints"),B=w("__lights"),v=w("__objects"),P=w("__obj_util"),N=w("__scenes"),M=w("__sfx"),p=w("__tsr"),I=w("__util"),y=w("__vec3"),D=new Float32Array(3),l=new Float32Array(3),u=new Float32Array(4),L=p.create(),F=p.create(),U=0,K=0;a.update=function(a){U=a;K++};a.ke=function(a,b){var c=a.A;if(e.$h(a)){p.Bd(b,c.D);var f=e.Iz(a),f=p.invert(f,L);p.multiply(f,c.D,e.Xh(a))}else p.Bd(b,c.D)};a.eC=t;a.Me=function(a,b){p.Wb(a.A.D,b);return b};a.sO=function(a,
b){e.$h(a)?p.Wb(e.Xh(a),b):p.Wb(a.A.D,b);return b};a.Ol=c;a.bC=b;a.Rj=k;a.eG=h;a.sI=function(a,b){var e=I.fl(b,u);c(a,e)};a.tI=function(a,c){var e=I.fl(c,u);b(a,e)};a.iO=function(a,b){var c=k(a,u);return b=I.Wv(c,b)};a.jO=function(a,b){var c=h(a,u);return b=I.Wv(c,b)};a.Ue=function(a,b){var c=a.A;if(e.$h(a)){var c=e.Xh(a),f=p.ge(e.Iz(a));p.Ue(b/f,c)}else p.Ue(b,c.D)};a.uI=function(a,b){var c=a.A;e.$h(a)?p.Ue(b,e.Xh(a)):p.Ue(b,c.D)};a.ge=function(a){return p.ge(a.A.D)};a.lO=function(a){return e.$h(a)?
p.ge(e.Xh(a)):p.ge(a.A.D)};a.mk=function(a,b){p.copy(b,a.A.D);if(e.$h(a)){var c=e.Iz(a),c=p.invert(c,L);p.multiply(c,a.A.D,e.Xh(a))}};a.gC=O;a.Km=function(a,b){return p.copy(a.A.D,b)};a.fv=m;a.cG=function(a){var b=a.A;a=b.Mk;var c=p.ge(b.D),b=c*(a.max_x-a.min_x),e=c*(a.max_y-a.min_y);a=c*(a.max_z-a.min_z);return.5*Math.sqrt(b*b+e*e+a*a)};a.Tz=function(a,b,c){b?(a=a.A,y.copy(a.bf.V,c)):(a=a.A,b=a.Mk,c[0]=(b.max_x+b.min_x)/2,c[1]=(b.max_y+b.min_y)/2,c[2]=(b.max_z+b.min_z)/2,p.Mc(c,a.D,c));return c};
a.Bg=function(a,b,c,e){var f=m(a,L),d=D;d[0]=b;d[1]=c;d[2]=e;p.Mc(d,f,d);t(a,d)};a.aI=function(a,b){var c=m(a,L),e=p.Gc(b,p.identity(F));p.multiply(c,e,e);O(a,e)};a.W=x;a.distance=function(a,b){var c=p.Wb(a.A.D,D),e=p.Wb(b.A.D,l);return y.dist(c,e)};a.Iv=function(a,b){var c=p.Wb(a.A.D,D);return y.dist(c,b)}};b4w.module.__constraints=function(a,w){function t(a){return{type:a,$a:null,target:null,Ss:!1,Wd:null,Ma:null,Nj:null,axes:null,xS:null,We:null,fT:!1,influence:0,rm:"",YR:0,YL:0,$L:0,aM:0,XL:0,zF:0,dist_max:0,JA:!1,xv:0,dD:!1,Dw:0,distance:0,hor_units:"",vert_units:""}}function c(a,c){a.Cc&&a.Cc.$a&&b(a.Cc.$a,a);if(c.$a){var e=c.$a;-1==e.cf.indexOf(a)?e.cf.push(a):I.K("Descendant object override is forbidden")}a.Cc=c}function b(a,b){var c=a.cf.indexOf(b);-1!=c?a.cf.splice(c,1):I.K("No descendant object")}
function k(a,b,h,d,g,k){var f=t(3);f.$a=b;f.xS=new Float32Array(h);f.We=new Float32Array(d);f.fT=g;f.Wd=new Float32Array(a.A.D);f.influence=k;c(a,f);e(a,f,0)}function h(a,b,h,d,g,k){var f=t(8);f.$a=b;f.Ma=p.create();p.Bd(h,f.Ma);f.axes=new Float32Array(d);f.influence=k;f.Ss=g;f.Wd=new Float32Array(a.A.D);c(a,f);e(a,f,0)}function O(a,b,h,d,g){var f=t(9);f.$a=b;b=p.Fb(a.A.D,K);f.Nj=I.Wv(b,new Float32Array(3));f.axes=new Float32Array(h);f.influence=g;f.Ss=d;f.Wd=new Float32Array(a.A.D);c(a,f);e(a,f,
0)}function m(a,b,h){var d=t(11);d.$a=b;d.Ma=p.create();p.copy(a.A.D,d.Ma);d.Wd=new Float32Array(a.A.D);d.influence=h;c(a,d);e(a,d,0)}function x(a,b,h){var d=t(13);d.$a=b;d.Ma=new Float32Array(h);c(a,d);e(a,d,0)}function r(a,b,h,d){var f=t(14);f.$a=b;f.rm=h;f.Ma=new Float32Array(d);c(a,f);e(a,f,0)}function g(a,b,h){var d=t(17);d.$a=b;d.Wd=new Float32Array(a.A.D);d.Ma=p.create();I.Pf(h.right)?(d.JA=!1,d.xv=h.right):I.Pf(h.left)?(d.JA=!0,d.xv=h.left):(d.JA=!0,d.xv=0);I.Pf(h.bottom)?(d.dD=!1,d.Dw=h.bottom):
I.Pf(h.top)?(d.dD=!0,d.Dw=h.top):(d.dD=!0,d.Dw=0);I.Pf(h.distance)?d.distance=h.distance:d.distance=0;b=I.Pf(h.rotation)?new Float32Array(h.rotation):y.create();p.Gc(b,d.Ma);I.Pf(h.hor_units)?d.hor_units=h.hor_units:d.hor_units="widths";I.Pf(h.vert_units)?d.vert_units=h.vert_units:d.vert_units="heights";c(a,d);e(a,d,0)}function e(a,b,c){switch(b.type){case 1:p.multiply(b.$a.A.D,b.Ma,a.A.D);break;case 12:var d=p.X(a.A.D),e=p.la(a.A.D),f=p.Wb(b.Ma,L),h=b.$a.A.D;c=p.la(b.$a.A.D);y.multiply(y.invert(b.wH,
b.wH),e,e);y.multiply(c,e,e);p.Mc(f,h,d);y.copy(c,b.wH);d=p.la(a.A.D);e=p.la(b.$a.A.D);h=p.Fb(b.Ma,K);e=y.multiply(e,h,U);e=M.UF(e,l);h=M.UF(d,u);I.D3(d,a.A.We,I.oo(h[0],e[0]+b.$L,e[0]+b.YL),I.oo(h[1],e[1]+b.XL,e[1]+b.aM),d);break;case 15:var d=p.X(a.A.D),e=p.la(a.A.D),h=b.$a.A.D,g=p.X(h),k=b.YR,m=L,n=y.copy(e,U),f=p.Wb(b.Ma,F);p.Mc(f,h,m);I.BC(m,d,c,k,d);I.IB(d,n,g,I.qc);I.XR(n,e,c,.16*k,e);break;case 2:e=p.la(a.A.D);h=A;f=p.Wb(b.Ma,F);g=p.ge(b.Ma);d=p.Fb(b.Ma,U);N.TF(b.$a,b.rm,h);p.multiply(b.$a.A.D,
h,h);e[0]=h[4];e[1]=h[5];e[2]=h[6];e[3]=h[7];y.multiply(e,d,e);p.Ue(g*h[3],a.A.D);d=p.X(a.A.D);p.Mc(f,h,d);break;case 3:d=p.X(a.A.D);e=p.la(a.A.D);f=p.X(b.$a.A.D);h=b.influence;b.fT?(g=p.Fb(b.$a.A.D,U),g=D.transformQuat(I.ic,g,L)):g=I.ic;I.IB(d,e,f,b.xS);f=D.subtract(f,d,F);D.normalize(f,f);I.d3(e,b.We,g,f);f=p.Fb(b.Wd,U);y.slerp(f,e,h,e);p.Bd(d,b.Wd);break;case 5:d=p.X(a.A.D);e=p.la(a.A.D);f=p.X(b.$a.A.D);I.IB(d,e,f,I.qc);e=D.dist(d,f);if(e=e>b.dist_max?e-b.dist_max:e<b.zF?e-b.zF:0)D.sub(f,d,L),
D.normalize(L,L),D.scale(L,e,L),D.add(d,L,d);break;case 7:h=b.$a.A.D;d=p.X(a.A.D);f=p.Wb(b.Ma,L);p.Mc(f,h,d);p.Gc(p.la(a.A.D),b.Wd);break;case 8:g=p.X(b.$a.A.D);d=p.X(a.A.D);e=b.axes;c=p.Wb(b.Ma,L);f=D.set(0,0,0,F);b.Ss&&D.add(f,c,f);h=b.influence;e[0]&&(d[0]=(1-h)*c[0]+h*(I.sign(e[0])*g[0]+f[0]));e[1]&&(d[1]=(1-h)*c[1]+h*(I.sign(e[1])*g[1]+f[1]));e[2]&&(d[2]=(1-h)*c[2]+h*(I.sign(e[2])*g[2]+f[2]));p.Gc(p.la(a.A.D),b.Wd);break;case 9:e=b.axes;c=p.Fb(b.$a.A.D,U);d=I.e3(c,b.Nj,F);I.kM(d,b.Nj);e[0]?(b.Ss&&
(h=D.set(b.Nj[0],0,0,L),I.$H(d,h,d)),d[0]*=I.sign(e[0])):d[0]=b.Nj[0];e[1]?(b.Ss&&(h=D.set(0,b.Nj[1],0,L),I.$H(d,h,d)),d[1]*=I.sign(e[1])):d[1]=b.Nj[1];e[2]?(b.Ss&&(h=D.set(0,0,b.Nj[2],L),I.$H(d,h,d)),d[2]*=I.sign(e[2])):d[2]=b.Nj[2];I.kM(d,b.Nj);h=b.influence;d=I.fl(d,U);f=p.Fb(b.Wd,K);y.slerp(f,d,h,p.la(a.A.D));p.Bd(p.X(a.A.D),b.Wd);break;case 11:h=b.influence;g=p.Wb(b.$a.A.D,L);c=p.Fb(b.$a.A.D,U);d=p.Wb(b.Ma,F);f=p.Fb(b.Ma,K);I.jy(d,g,h,p.X(a.A.D));y.slerp(f,c,h,p.la(a.A.D));p.Bd(p.X(a.A.D),b.Wd);
break;case 16:e=p.la(a.A.D);h=b.$a.A.D;c=p.la(b.$a.A.D);f=p.Wb(b.Ma,F);d=p.Fb(b.Ma,U);y.multiply(c,d,e);d=p.X(a.A.D);p.Mc(f,h,d);break;case 13:p.multiply(b.$a.A.D,b.Ma,a.A.D);break;case 14:d=b.Ma;h=A;N.TF(b.$a,b.rm,h);p.multiply(b.$a.A.D,h,h);p.multiply(h,d,a.A.D);break;case 17:e=b.$a,h=M.a0(e),d=p.X(a.A.D),c=M.Jz(h,"LEFT"),k=M.Jz(h,"RIGHT"),f=M.Jz(h,"TOP"),g=M.Jz(h,"BOTTOM"),m="heights"==b.hor_units?f-g:k-c,d[0]=b.JA?c+m*b.xv:k-m*b.xv,c="heights"==b.vert_units?f-g:k-c,d[1]=b.dD?f-c*b.Dw:g+c*b.Dw,
M.q1(h)?d[2]=-b.distance:(d[2]=-1,D.normalize(d,d),D.scale(d,b.distance/Math.abs(d[2]),d)),p.Vd(d,e.A.D,d),h=p.X(e.A.D),D.add(h,d,d),f=p.la(a.A.D),e=p.la(e.A.D),d=p.Fb(b.Ma,K),y.multiply(e,d,f)}"CAMERA"==a.A.type&&a.A.zb!=M.He&&(d=a.A.We,12==b.type&&(c=p.la(b.$a.A.D),d=D.transformQuat(d,c,E)),M.KS(a),M.Fy(a,d))}function B(a,b){switch(b.type){case 18:var c=b.target.A.D,d=A;p.invert(a.A.D,d);p.multiply(d,c,d);N.P3(a,b.rm,d)}a.kH=!0}function v(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(!v(d.cf,b)||
d.name==b.name)return!1}return!0}var P=w("__physics"),N=w("__armature"),M=w("__camera"),p=w("__tsr"),I=w("__util"),y=w("__quat"),D=w("__vec3");a.e7=1;a.d7=2;a.i7=3;a.a7=5;a.f7=7;a.Z6=8;a.c7=12;a.X6=13;a.Y6=14;a.b7=15;a.g7=16;a.h7=17;a.U6=18;var l=new Float32Array(2),u=new Float32Array(2),L=new Float32Array(3),F=new Float32Array(3),U=new Float32Array(4),K=new Float32Array(4),A=p.create(),E=new Float32Array(3);a.UK=function(a,b,h,d,g){var f=t(1);f.$a=b;f.Ma=p.create();d=d?d:y.create();p.Bd(h,f.Ma);
p.Ue(g,f.Ma);p.Gc(d,f.Ma);f.Wd=new Float32Array(a.A.D);c(a,f);e(a,f,0)};a.qW=function(a,b,h,d,g,k){var f=t(2);f.$a=b;f.rm=h;f.Wd=new Float32Array(a.A.D);f.Ma=p.create();p.Bd(new Float32Array(d),f.Ma);p.Gc(new Float32Array(g),f.Ma);p.Ue(k,f.Ma);c(a,f);e(a,f,0)};a.oW=function(a,b,h,d,g,k,l,m){var f=t(12),n=p.la(a.A.D),q=p.la(b.A.D);d?(y.copy(d,n),y.multiply(q,n,n)):d=y.create();f.$a=b;f.Ma=p.create();p.Bd(h,f.Ma);p.Gc(d,f.Ma);f.wH=new Float32Array(q);f.YL=I.Jh(g);f.$L=I.Jh(k);f.aM=I.Fi(l,-Math.PI,Math.PI);
f.XL=I.Fi(m,-Math.PI,Math.PI);f.Wd=new Float32Array(a.A.D);c(a,f);e(a,f,0)};a.mW=function(a,b,h,d){var f=t(15);f.$a=b;f.YR=d;f.Wd=new Float32Array(a.A.D);f.Ma=p.create();p.Bd(new Float32Array(h),f.Ma);c(a,f);e(a,f,0)};a.tW=function(a,b,h,d){var f=t(16);f.$a=b;f.Wd=new Float32Array(a.A.D);f.Ma=p.create();p.Bd(new Float32Array(h),f.Ma);p.Gc(new Float32Array(d),f.Ma);p.Ue(1,f.Ma);c(a,f);e(a,f,0)};a.Hda=b;a.uW=k;a.iW=function(a,b,h,d){var f=t(5);f.$a=b;f.zF=h;f.dist_max=d;f.Wd=new Float32Array(a.A.D);
c(a,f);e(a,f,0)};a.sW=function(a,b,h){var d=t(7);d.$a=b;d.Ma=p.create();d.Wd=new Float32Array(a.A.D);p.Bd(new Float32Array(h),d.Ma);c(a,d);e(a,d,0)};a.eW=h;a.fW=O;a.gW=m;a.r9=x;a.s9=r;a.VK=g;a.Q5=function(a,b){a.Cc&&e(a,a.Cc,b)};a.J5=function(a,b){var c=a.A.eh[b];c.Cc&&B(a,c.Cc)};a.yX=function(a){return a.Cc?!0:!1};a.remove=function(a,c){a.Cc.$a&&b(a.Cc.$a,a);c&&p.copy(a.Cc.Wd,a.A.D);a.Cc=null};a.Xba=function(a){return a.Cc?a.Cc.type:null};a.$h=function(a){a=a.Cc;return!a||13!=a.type&&14!=a.type?
!1:!0};a.Iz=function(a){if((a=a.Cc)&&13==a.type)return a.$a.A.D;if(a&&14==a.type){var b=A;N.TF(a.$a,a.rm,b);p.multiply(a.$a.A.D,b,b);return b}return null};a.Xh=function(a){a=a.Cc;return!a||13!=a.type&&14!=a.type?null:a.Ma};a.Z2=function(a,b){for(var c=b.A,d=0;d<a.constraints.length;d++){var e=a.constraints[d],f=e.type;if(e.target){var l=e.target.Oa;if("COPY_LOCATION"==f){var f=new Float32Array(p.X(b.A.D)),n=new Float32Array(e.axes);h(b,l,f,n,e.use_offset,e.influence)}else if("COPY_ROTATION"==f)n=
new Float32Array(e.axes),O(b,l,n,e.use_offset,e.influence);else if("COPY_TRANSFORMS"==f)m(b,l,e.influence);else if("TRACK_TO"==f){f=e.track_axis;if("TRACK_Y"==f)var v=I.Ee;else"TRACK_NEGATIVE_Y"==f?v=I.Eh:"TRACK_X"==f?v=I.Cf:"TRACK_NEGATIVE_X"==f?v=I.kt:"TRACK_Z"==f?v=I.ic:"TRACK_NEGATIVE_Z"==f&&(v=I.qc);f=e.up_axis;if("UP_X"==f)var u=I.Cf;else"UP_Y"==f?u=I.Ee:"UP_Z"==f&&(u=I.ic);k(b,l,v,u,e.use_target_z,e.influence)}}}if(b.parent){!b.hn&&b.Td.Lw&&b.parent.Td.Lw&&(b.Rs=!1);e=!1;for(d=0;d<b.T.length;d++)if(b.T[d].wb.Pc){e=
!0;break}if(e&&P.L0(b))d=b.hn?p.copy(c.D,p.create()):c.D,p.multiply(b.parent.A.D,d,c.D);else if(b.hn||!b.Lv)if(d=p.copy(c.D,p.create()),b.zD&&"CAMERA"==b.parent.type){d={distance:b.zD.distance,rotation:p.la(d)};switch(b.zD.$V){case "TOP_LEFT":d.top=0;d.left=0;break;case "TOP":d.top=0;d.left=.5;break;case "TOP_RIGHT":d.top=0;d.right=0;break;case "LEFT":d.top=.5;d.left=0;break;case "CENTER":d.top=.5;d.left=.5;break;case "RIGHT":d.top=.5;d.right=0;break;case "BOTTOM_LEFT":d.bottom=0;d.left=0;break;case "BOTTOM":d.bottom=
0;d.left=.5;break;case "BOTTOM_RIGHT":d.bottom=0,d.right=0}g(b,b.parent,d)}else x(b,b.parent,d);else d=p.copy(c.D,p.create()),r(b,b.parent,b.Lv,d)}if("ARMATURE"==b.type)for(c=a.pose.bones,d=0;d<c.length;d++)if(e=c[d],v=e.constraints)for(u=0;u<v.length;u++)if(f=v[u],"COPY_TRANSFORMS"==f.type&&!f.subtarget&&!f.mute){var l=f.target.Oa,f=b,n=l,A=I.hE,y=I.Gx,l=t(18);l.rm=e.name;l.target=n;l.Ma=p.create();p.Bd(new Float32Array(A),l.Ma);p.Gc(new Float32Array(y),l.Ma);p.Ue(1,l.Ma);for(var n=f,A=l,y=A.target,
E=A.rm,w=n.A.eh[E],D=y.WE,N=0;N<D;N++){var F=D[N];if(F[0]==n&&F[1]==E){D.splice(N,1);break}}y.WE.push([n,E]);w.Cc=A;B(f,l)}};a.Li=function(a,b){return v(a.cf,b)};a.Mi=function(a,b){return a.name!=b.name}};b4w.module.__navmesh=function(a,w){function t(a,c){function d(a){var b=a[0];a[0]=a[1];a[1]=a[2];a[2]=b}for(var e=a.Mn,f=c.Mn,h=[],g=0;g<e.length;g++)0<=b(f,e[g])&&h.push(e[g]);if(2>h.length)return[];0<=b(h,e[0])&&0<=b(h,e[e.length-1])&&d(e);0<=b(h,f[0])&&0<=b(h,f[f.length-1])&&d(f);h=[];for(g=0;g<e.length;g++)0<=b(f,e[g])&&h.push(e[g]);return h}function c(a){function b(a){for(var c=a.ji,d=0;d<c.length;d++){var e=c[d];void 0==e.island&&(e.island=a.island,b(e))}}a=a.U2;for(var c=[],d=0,e=0;e<a.length;e++){var f=
a[e];void 0==f.island&&(f.island=d++,b(f));c[f.island]||(c[f.island]=[]);c[f.island].push(a[e])}return c}function b(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1}function k(a){function b(a,b){for(var c=0;c<a.length;c++)if(b===a[c])return c}for(var d={},e=a.bt,f=0;f<e.length;f++)e[f][0]=parseFloat(e[f][0].toFixed(2)),e[f][1]=parseFloat(e[f][1].toFixed(2)),e[f][2]=parseFloat(e[f][2].toFixed(2));d.bt=a.bt;a=c(a);d.HG=[];for(f=0;f<a.length;f++){for(var e=
[],h=a[f],g=0;g<h.length;g++){for(var k=[],l=h[g],m=0;m<l.ji.length;m++)k.push(b(h,l.ji[m]));for(var n=[],m=0;m<l.ji.length;m++)n.push(t(l,l.ji[m]));l.Ld[0]=parseFloat(l.Ld[0].toFixed(2));l.Ld[1]=parseFloat(l.Ld[1].toFixed(2));l.Ld[2]=parseFloat(l.Ld[2].toFixed(2));e.push({id:b(h,l),ji:k,Mn:l.Mn,Ld:l.Ld,yd:l.yd,V2:n,JF:0,$u:0,ec:0,aY:1,sJ:!1,closed:!1,parent:null})}d.HG.push(e)}return d}function h(a,b,c,d,e){function f(a,b){I.subtract(a,b,D);return I.dot(D,D)}function h(a,b){for(var c=[],d=0;d<b.ji.length;d++)c.push(a[b.ji[d]]);
return c}(function(a){for(var b=0;b<a.length;b++){var c=a[b];c.JF=0;c.$u=0;c.ec=0;c.aY=1;c.sJ=!1;c.closed=!1;c.parent=null}})(a);var g=N.PW(function(a){return a.JF});for(N.tL(g,b);0<g.content.length;){var k=N.QW(g);if(k===c){a=k;for(c=[];a.parent;)c.push(a),a=a.parent;c.push(b);return c.reverse()}k.closed=!0;for(var l=h(a,k),m=0,n=l.length;m<n;m++){var q=l[m];if(!q.closed){var p=k.$u+I.dist(q.Ld,k.Ld),v=q.sJ;if(!v||p<q.$u)q.sJ=!0,q.parent=k,q.ec=q.ec||f(q.Ld,e)+f(q.Ld,d),q.$u=p,q.JF=q.$u+q.ec,v?N.RW(g,
q):N.tL(g,q)}}}return[]}function O(a,b){a.push(b[0]);a.push(b[1]);a.push(b[2])}function m(a,b,c,d){b=I.subtract(b,a,D);a=I.subtract(c,a,l);a=I.cross(b,a,D);return p.sign(I.dot(d,a))}function x(a,b){I.subtract(a,b,D);return 1E-5>I.dot(D,D)}function r(a,b,c){var d=I.subtract(b.right,b.left,D),e=c.yd,f=b.yd;c=Math.acos(I.dot(e,f));e=p.sign(I.dot(d,I.cross(e,f,l)));c*=-e;e=M.identity(A);M.translate(e,b.left,e);M.rotate(e,c,d,e);M.translate(e,I.scale(b.left,-1,l),e);M.multiply(a,e,a)}function g(a,b,c,
d,e,f,h,g,k){for(var l=M.identity(U),m=e;m<c;m++)if(a[m].gP&&(m>e||!m)){var n,q=b,p=d;n=a[m].left;var v=a[m].right,A=f,x=l,C=I.create(),E=I.transformMat4(n,x,u);E[3]=1;x=I.transformMat4(v,x,D);x=I.subtract(x,E,L);q=I.subtract(p,q,D);A=I.cross(A,q,F);.01>Math.abs(I.dot(A,x))?p=.5:(I.normalize(A,A),A[3]=-I.dot(A,p),p=-y.dot(A,E)/y.dot(A,x));v=I.subtract(v,n,D);n=I.scaleAndAdd(n,v,p,C);O(h,n);g&&O(k,a[m].yd);m&&r(l,a[m],a[m-1])}}function e(a,b){function c(b,c){t=B=y=c;p=l=k=b;I.copy(b,v);I.copy(b,u);
I.copy(a[y].yd,A)}var e=[],h=[],k,l,p,v,u,A,y=0,B=0,t=0;k=a[0].right;l=a[0].left;p=a[0].right;v=I.copy(l,E);u=I.copy(p,n);A=I.copy(a[0].yd,d);O(e,k);b&&O(h,a[0].yd);for(var w=M.identity(K),G=1;G<a.length;G++){var V=a[G].left,D=a[G].right,H=I.transformMat4(V,w,f),N=I.transformMat4(D,w,X);a[G].gP&&r(w,a[G],a[G-1]);if(0>=m(k,u,N,A)){var F=x(k,p);if(F||0<m(k,v,N,A))p=D,I.copy(N,u),t=G;else{(V=x(v,k))||g(a,v,B,k,y,A,e,b,h);w=M.identity(w);c(l,B);G=y;V||(O(e,k),b&&O(h,a[G].yd));continue}}0<=m(k,v,H,A)&&
((F=x(k,l))||0>m(k,u,H,A)?(l=V,I.copy(H,v),B=G):((V=x(u,k))||g(a,u,t,k,y,A,e,b,h),w=M.identity(w),c(p,t),G=y,V||(O(e,k),b&&O(h,a[G].yd))))}w=a.length-1;G=a[w].left;(V=x(k,G))||g(a,v,w,k,y,A,e,b,h);V&&y||O(e,G);return b?(O(h,a[w].yd),{positions:new Float32Array(e),normals:new Float32Array(h)}):{positions:new Float32Array(e),normals:null}}function B(a,b,c,d,e){for(var f=null,h=Number.MAX_VALUE,g=0;g<a.length;g++){var k=a[g],l=e(c,k.Ld,k.Mn,b,h);l<h&&(f=k,h=l)}return 0<d&&h>d?null:f}function v(a,b,c,
d,e){a.push({left:b,right:c,gP:d,yd:e})}var P=w("__geometry"),N=w("__math"),M=w("__mat4"),p=w("__util"),I=w("__vec3"),y=w("__vec4"),D=I.create(),l=I.create(),u=y.create(),L=y.create(),F=y.create(),U=M.create(),K=M.create(),A=M.create(),E=I.create(),n=I.create(),f=I.create(),X=I.create(),d=I.create();a.q2=function(a){var b=P.iG(a.Uc,P.xq),c=a.mf;a=[];for(var d=0;d<c.length;d+=3)a.push({Ha:new Uint32Array([c[d],c[d+1],c[d+2]]),Ld:new Float32Array(3),yd:new Float32Array(3)});c=[];for(d=0;d<b.length;d+=
3){var e=new Float32Array(3);e[0]=b[d];e[1]=b[d+1];e[2]=b[d+2];c.push(e)}for(b=0;b<a.length;b++)d=a[b],I.add(c[d.Ha[0]],c[d.Ha[1]],D),I.add(D,c[d.Ha[2]],D),I.scale(D,1/3,d.Ld);for(b=0;b<a.length;b++){var d=a[b],e=I.subtract(c[d.Ha[1]],c[d.Ha[0]],D),f=I.subtract(c[d.Ha[2]],c[d.Ha[0]],l),e=I.cross(e,f,D);I.normalize(e,e);I.copy(e,d.yd)}for(var h={},b=[],d=[],g,m,n=Math.pow(10,4),e=0,f=c.length;e<f;e++)g=c[e],m=Math.round(g[0]*n)+"_"+Math.round(g[1]*n)+"_"+Math.round(g[2]*n),void 0===h[m]?(h[m]=e,b.push(g),
d[e]=b.length-1):d[e]=d[h[m]];h=[];e=0;for(f=a.length;e<f;e++)for(g=a[e],g.Ha[0]=d[g.Ha[0]],g.Ha[1]=d[g.Ha[1]],g.Ha[2]=d[g.Ha[2]],g=[g.Ha[0],g.Ha[1],g.Ha[2]],m=0;3>m;m++)if(g[m]==g[(m+1)%3]){h.push(e);break}for(e=h.length-1;0<=e;e--)a.splice(h[e],1);for(e=c.length=0;e<b.length;e++)c.push(b[e]);d=[];for(b=e=0;b<a.length;b++)f=a[b],d.push({id:e++,Mn:f.Ha,Ld:f.Ld,yd:f.yd,ji:[]});a={U2:d,bt:c};c={};for(b=0;b<d.length;b++)for(e=0;3>e;e++)f=d[b].Mn[e],h=d[b].Mn[(e+1)%3],f=f>h?h+"-"+f:f+"-"+h,f in c||(c[f]=
[]),c[f].push(d[b]);d=Object.keys(c);b=0;for(h=d.length;b<h;b++)for(f=d[b],e=0;e<c[f].length;e++)for(g=e+1;g<c[f].length;g++)c[f][e].ji.push(c[f][g]),c[f][g].ji.push(c[f][e]);return k(a)};a.WP=function(a,b,c){for(var d=null,e=Number.MAX_VALUE,f=a.HG,h=0;h<f.length;h++)for(var g=0;g<f[h].length;g++){var k=f[h][g];I.subtract(k.Ld,b,D);k=c(b,k.Ld,k.Mn,a.bt,e);k<e&&(d=h,e=k)}return d};a.r1=function(a,b,c){for(var d=[],e=0;e<b.length;e++)d.push(c[b[e]]);b=!1;c=-1;for(var e=d.length,f=e-1;++c<e;f=c)(d[c][1]<=
a[1]&&a[1]<d[f][1]||d[f][1]<=a[1]&&a[1]<d[c][1])&&a[0]<(d[f][0]-d[c][0])*(a[1]-d[c][1])/(d[f][1]-d[c][1])+d[c][0]&&(b=!b);return b?!0:!1};a.VP=function(a,b,c,d){var f;f=a.HG[d.island];var g=a.bt,k=B(f,g,b,d.allowed_distance,d.distance_to_closest);f=k?(g=B(f,g,c,d.allowed_distance,d.distance_to_farthest))?h(f,k,g,b,c):null:null;if(f&&f.length)if(d.do_not_pull_string)if(c=f,d.return_normals){b=new Float32Array(3*c.length);for(f=0;f<c.length;f++)b.set(c[f].Ld,3*f);c={positions:b,normals:null}}else{b=
new Float32Array(3*c.length);a=new Float32Array(3*c.length);for(f=0;f<c.length;f++)b.set(c[f].Ld,3*f),a.set(c[f].yd,3*f);c={positions:b,normals:a}}else{a=a.bt;d=d.return_normals;k=[];v(k,b,b,!1,f[0]&&f[0].yd||p.ic);for(b=0;b<f.length;b++){var l=f[b];if(g=f[b+1]){var m=.999>Math.abs(I.dot(l.yd,g.yd));a:{for(var n=0;n<l.ji.length;n++)if(l.ji[n]===g.id){l=l.V2[n];break a}l=void 0}v(k,a[l[0]],a[l[1]],m,g.yd)}}v(k,c,c,!1,k[k.length-1].yd);c=e(k,d)}else c=null;return c}};b4w.module.__reformer=function(a,w){function t(a){switch(a.type){case "VALTORGB":a.color_ramp||(a.color_ramp={elements:[{position:.5,color:[1,1,1,1]}]},b("node Color Ramp",a,"color_ramp"));break;case "CURVE_RGB":a.curve_mapping||(a.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]]],curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},b("node RGB Curves",a,
"curve_mapping"));break;case "CURVE_VEC":a.curve_mapping||(a.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]]],curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},b("node Vector Curves",a,"curve_mapping"));break;case "MAPPING":a.vector_type||(a.vector_type="POINT",b("node Mapping",a,"vector_type"));break;case "MATERIAL":case "MATERIAL_EXT":"alpha"in a||(a.alpha=1,b("node material",a,"alpha"));"darkness"in
a||(a.darkness=1,b("node material",a,"darkness"));"diffuse_toon_size"in a||(a.diffuse_toon_size=.5,b("node material",a,"diffuse_toon_size"));"diffuse_toon_smooth"in a||(a.diffuse_toon_smooth=.1,b("node material",a,"diffuse_toon_smooth"));"diffuse_intensity"in a||(a.diffuse_intensity=1,b("node material",a,"diffuse_intensity"));"use_tangent_shading"in a||(a.use_tangent_shading=!1,b("node material",a,"use_tangent_shading"));"specular_shader"in a||(a.specular_shader="COOKTORR",b("node material",a,"specular_shader"));
"specular_ior"in a||(a.specular_ior=4,b("node material",a,"specular_ior"));"specular_hardness"in a||(a.specular_hardness=50,b("node material",a,"specular_hardness"));"specular_slope"in a||(a.specular_slope=.1,b("node material",a,"specular_slope"));"specular_toon_size"in a||(a.specular_toon_size=.5,b("node material",a,"specular_toon_size"));"specular_toon_smooth"in a||(a.specular_toon_smooth=.1,b("node material",a,"specular_toon_smooth"));"specular_intensity"in a||(a.specular_intensity=.5,b("node material",
a,"specular_intensity"));"diffuse_shader"in a||(a.diffuse_shader="LAMBERT",b("node material",a,"diffuse_shader"));"roughness"in a||(a.roughness=.5,b("node material",a,"roughness"));"diffuse_fresnel"in a||(a.diffuse_fresnel=.1,b("node material",a,"diffuse_fresnel"));"diffuse_fresnel_factor"in a||(a.diffuse_fresnel_factor=.5,b("node material",a,"diffuse_fresnel_factor"));break;case "MATH":case "MIX_RGB":"use_clamp"in a||(a.use_clamp=!1,b("node "+a.type,a,"use_clamp"));break;case "GROUP":a.node_tree_name=
a.node_tree_name.replace(/\.[0-9]{3,}$/g,"");switch(a.node_tree_name){case "CLAMP":case "LEVELS_OF_QUALITY":case "LINEAR_TO_SRGB":case "NORMAL_VIEW":case "PARALLAX":case "REFLECT":case "REFRACTION":case "REPLACE":case "SMOOTHSTEP":case "SRGB_TO_LINEAR":case "TIME":case "TRANSLUCENCY":case "VECTOR_VIEW":a.node_tree_name="B4W_"+a.node_tree_name}break;case "VECT_TRANSFORM":"convert_from"in a||(a.convert_from="WORLD",b("node "+a.type,a,"convert_from")),"convert_to"in a||(a.convert_to="WORLD",b("node "+
a.type,a,"convert_to")),"vector_type"in a||(a.vector_type="POINT",b("node "+a.type,a,"vector_type"))}}function c(a){if(a=a.nla_tracks)for(var c=0;c<a.length;c++)for(var e=a[c],h=0;h<e.strips.length;h++){var f=e.strips[h];"action"in f||(f.action=null,b("strip",f,"action"));"action_frame_start"in f||(f.action_frame_start=0,b("strip",f,"action_frame_start"));"action_frame_end"in f||(f.action_frame_end=f.frame_end-f.frame_start,b("strip",f,"action_frame_end"));"repeat"in f||(f.repeat=1,b("strip",f,"repeat"));
"use_reverse"in f||(f.use_reverse=!1,b("strip",f,"use_reverse"));"scale"in f||(f.scale=1,b("strip",f,"scale"))}}function b(a,b,c){c=c+">>"+a;c in u||(u[c]={LI:[],MQ:"undefined",type:a});u[c].LI.push(b.name)}function k(a,b,c){c=c+">>"+a;c in u||(u[c]={LI:[],MQ:"deprecated",type:a});u[c].LI.push(b.name)}function h(a){B.warn(a)}function O(a,b){b||(b=a.name+"_COPY");var c=a.materials,e=a.submeshes;a.materials=null;a.submeshes=null;var f=N.Y(a);a.materials=c;a.submeshes=e;f.name=b;f.materials=a.materials.slice(0);
f.submeshes=[];for(c=0;c<e.length;c++){var h=N.ou(e[c]);f.submeshes.push(h)}return f}function m(a,b,c){if(1<c){for(var e=a.length/c,f=b.length/c,h=new Float32Array(a.length+b.length),d=0,g=0;g<c;g++)h.set(a.subarray(e*g,e*(g+1)),d),d+=e,h.set(b.subarray(f*g,f*(g+1)),d),d+=f;return h}return N.oN(a,b)}var x=w("__boundings"),r=w("__config"),g=w("__curve"),e=w("__mat4"),B=w("__print"),v=w("__quat"),P=w("__tbn"),N=w("__util"),M=w("__vec3"),p=w("__mat3"),I=w("__logic_nodes"),y=w("__animation"),D=r.L,l=
[5,4],u={},L=p.create(),F=P.create(),U=v.create();a.SL=function(a){return-1!=N.kT(a,l)};a.wX=function(a){u={};var e=a.worlds;if(0==e.length){B.warn('WARNING Datablock world is missing, reexport "'+a.b4w_filepath_blend+'" scene');var g={name:"DEFAULT",horizon_color:new Float32Array([0,0,0]),zenith_color:new Float32Array([0,0,0]),light_settings:{use_environment_light:!1,environment_energy:1,environment_color:"PLAIN"},fog_settings:{use_fog:!1,intensity:0,depth:25,start:5,height:0,falloff:"INVERSE_QUADRATIC",
use_custom_color:!0,color:[.5,.5,.5]},use_sky_paper:!1,use_sky_blend:!1,use_sky_real:!1,use_nodes:!1,node_tree:null,texture_slots:[]};e.push(g)}for(var l=0;l<e.length;l++){g=e[l];"use_sky_blend"in g||(b("world",g,"use_sky_blend"),g.use_sky_blend=!1);"use_sky_paper"in g||(b("world",g,"use_sky_paper"),g.use_sky_paper=!1);"use_sky_real"in g||(b("world",g,"use_sky_real"),g.use_sky_real=!1);"b4w_sky_settings"in g&&"rayleigh_brightness"in g.b4w_sky_settings||(b("world",g,"rayleigh_brightness"),g.b4w_sky_settings=
{render_sky:!1,procedural_skydome:!1,use_as_enviroment_map:!1,color:[.24,.43,.75],rayleigh_brightness:3.3,mie_brightness:.1,spot_brightness:10,scatter_strength:.2,rayleigh_strength:.2,mie_strength:.006,rayleigh_collection_power:.5,mie_collection_power:.5,mie_distribution:.4});"fog_settings"in g||(b("world",g,"fog_settings"),g.fog_settings={use_fog:!1,intensity:0,depth:25,start:0,height:0,falloff:"QUADRATIC",use_custom_color:!0,color:[.5,.5,.5]},"b4w_fog_color"in g&&(g.fog_settings.use_custom_color=
!0,g.fog_settings.color=g.b4w_fog_color),"b4w_fog_density"in g&&0<g.b4w_fog_density&&(g.fog_settings.depth=1/g.b4w_fog_density));"render_sky"in g.b4w_sky_settings||(b("world",g,"render_sky"),g.b4w_sky_settings.render_sky=!1);for(var f=g.texture_slots,m=0;m<f.length;m++){var d=f[m];"blend_type"in d||(d.blend_type="MIX",b("world_texture_slot",d,"blend_type"));"use_map_blend"in d||(d.use_map_blend=!1,b("world_texture_slot",d,"use_map_blend"));"use_map_horizon"in d||(d.use_map_horizon=!0,b("world_texture_slot",
d,"use_map_horizon"));"use_map_zenith_up"in d||(d.use_map_zenith_up=!1,b("world_texture_slot",d,"use_map_zenith_up"));"use_rgb_to_intensity"in d||(d.use_rgb_to_intensity=!1,b("world_texture_slot",d,"use_rgb_to_intensity"));"invert"in d||(d.invert=!1,b("world_texture_slot",d,"invert"));"color"in d||(d.color=[1,0,1],b("world_texture_slot",d,"color"));"blend_factor"in d||(d.blend_factor=0,b("world_texture_slot",d,"blend_factor"));"horizon_factor"in d||(d.horizon_factor=1,b("world_texture_slot",d,"horizon_factor"));
"zenith_up_factor"in d||(d.zenith_up_factor=0,b("world_texture_slot",d,"zenith_up_factor"));"zenith_down_factor"in d||(d.zenith_down_factor=0,b("world_texture_slot",d,"zenith_down_factor"));"default_value"in d||(d.default_value=1,b("world_texture_slot",d,"default_value"))}"b4w_use_default_animation"in g||(b("world",g,"b4w_use_default_animation"),g.b4w_use_default_animation=!1);"b4w_anim_behavior"in g||(b("world",g,"b4w_anim_behavior"),g.b4w_anim_behavior="CYCLIC")}m=a.scenes;for(l=0;l<m.length;l++)f=
m[l],d=f.world,"timeline_markers"in f||(f.timeline_markers=null,b("scene",f,"timeline_markers")),"boolean"==typeof f.b4w_enable_physics&&(f.b4w_enable_physics="AUTO"),"b4w_reflection_quality"in f||(f.b4w_reflection_quality="MEDIUM",b("scene",f,"b4w_reflection_quality")),"b4w_use_nla"in f||(f.b4w_use_nla=!1,b("scene",f,"b4w_use_nla")),"fps"in f||(f.fps=24,b("scene",f,"fps")),"b4w_nla_cyclic"in f||(f.b4w_nla_cyclic=!1,b("scene",f,"b4w_nla_cyclic")),"b4w_logic_nodes"in f||(f.b4w_logic_nodes=[],b("scene",
f,"b4w_logic_nodes")),"b4w_detect_collisions"in f&&(k("scene",f,"b4w_detect_collisions"),delete f.b4w_detect_collisions),"audio_doppler_speed"in f||(f.audio_doppler_speed=343.3),"audio_doppler_factor"in f||(f.audio_doppler_factor=1),"b4w_dynamic_compressor_settings"in f||(f.b4w_dynamic_compressor_settings={threshold:-24,knee:30,ratio:12,attack:.003,release:.25},b("scene",f,"b4w_dynamic_compressor_settings")),"b4w_enable_convolution_engine"in f||(f.b4w_enable_convolution_engine=!1),"b4w_enable_bloom"in
f||(f.b4w_enable_bloom=!1,b("scene",f,"b4w_enable_bloom")),"b4w_enable_motion_blur"in f||(f.b4w_enable_motion_blur=!1,b("scene",f,"b4w_enable_motion_blur")),"b4w_enable_color_correction"in f||(f.b4w_enable_color_correction=!1,b("scene",f,"b4w_enable_color_correction")),"b4w_antialiasing_quality"in f||(f.b4w_antialiasing_quality="MEDIUM",b("scene",f,"b4w_antialiasing_quality")),"b4w_tags"in f||(f.b4w_tags={title:"",description:""},b("scene",f,"b4w_tags")),"b4w_lod_smooth_type"in f||(f.b4w_lod_smooth_type=
"OFF",b("scene",f,"b4w_lod_smooth_type")),"b4w_lod_hyst_interval"in f||(f.b4w_lod_hyst_interval=0,b("scene",f,"b4w_lod_hyst_interval")),"b4w_enable_object_selection"in f||(f.b4w_enable_object_selection="AUTO",b("scene",f,"b4w_enable_object_selection")),"b4w_enable_outlining"in f||(f.b4w_enable_outlining="AUTO",b("scene",f,"b4w_enable_outlining")),"b4w_enable_glow_materials"in f||(f.b4w_enable_glow_materials="AUTO",b("scene",f,"b4w_enable_glow_materials")),"b4w_enable_anchors_visibility"in f||(f.b4w_enable_anchors_visibility=
"AUTO",b("scene",f,"b4w_enable_anchors_visibility")),"b4w_outline_color"in f||(f.b4w_outline_color=[1,1,1],b("scene",f,"b4w_outline_color")),"b4w_outline_factor"in f||(f.b4w_outline_factor="b4w_glow_factor"in f?f.b4w_glow_factor:1,b("scene",f,"b4w_outline_factor")),"b4w_shadow_settings"in f||(b("scene",f,"b4w_shadow_settings"),e=d.b4w_shadow_settings,f.b4w_shadow_settings=e?e:{csm_resolution:2048,blur_samples:"16x",self_shadow_polygon_offset:1,b4w_enable_csm:!1,csm_num:1,csm_first_cascade_border:10,
first_cascade_blur_radius:3,csm_last_cascade_border:100,last_cascade_blur_radius:1.5,fade_last_cascade:!0,blend_between_cascades:!0}),e=f.b4w_shadow_settings,"csm_resolution"in e||(b("scene",f,"b4w_shadow_settings.csm_resolution"),e.csm_resolution=2048),"blur_samples"in e||(b("scene",f,"b4w_shadow_settings.blur_samples"),e.blur_samples="16x"),"soft_shadows"in e||(b("scene",f,"b4w_shadow_settings.soft_shadows"),e.soft_shadows=!0),"self_shadow_polygon_offset"in e||(b("scene",f,"b4w_shadow_settings.self_shadow_polygon_offset"),
e.self_shadow_polygon_offset=1),"self_shadow_normal_offset"in e||(b("scene",f,"b4w_shadow_settings.self_shadow_normal_offset"),e.self_shadow_normal_offset=.01),"b4w_enable_csm"in e||(b("scene",f,"b4w_shadow_settings.b4w_enable_csm"),e.b4w_enable_csm=!1),"csm_num"in e||(b("scene",f,"b4w_shadow_settings.csm_num"),e.csm_num=1),"csm_first_cascade_border"in e||(b("scene",f,"b4w_shadow_settings.csm_first_cascade_border"),e.csm_first_cascade_border=10),"first_cascade_blur_radius"in e||(b("scene",f,"b4w_shadow_settings.first_cascade_blur_radius"),
e.first_cascade_blur_radius=3),"csm_last_cascade_border"in e||(b("scene",f,"b4w_shadow_settings.csm_last_cascade_border"),e.csm_last_cascade_border=100),"last_cascade_blur_radius"in e||(b("scene",f,"b4w_shadow_settings.last_cascade_blur_radius"),e.last_cascade_blur_radius=1.5),"fade_last_cascade"in e||(b("scene",f,"b4w_shadow_settings.fade_last_cascade"),e.fade_last_cascade=!0),"blend_between_cascades"in e||(b("scene",f,"b4w_shadow_settings.blend_between_cascades"),e.blend_between_cascades=!0),"b4w_ssao_settings"in
f||(b("scene",f,"b4w_ssao_settings"),e=d.b4w_ssao_settings,f.b4w_ssao_settings=e?e:{dist_factor:0,samples:16,hemisphere:!1,blur_depth:!1,blur_discard_value:1}),e=f.b4w_ssao_settings,"dist_factor"in e||(b("scene",f,"b4w_ssao_settings.dist_factor"),e.dist_factor=0),"samples"in e||(b("scene",f,"b4w_ssao_settings.samples"),e.samples=16),"hemisphere"in e||(b("scene",f,"b4w_ssao_settings.hemisphere"),e.hemisphere=!1),"blur_depth"in e||(b("scene",f,"b4w_ssao_settings.blur_depth"),e.blur_depth=!1),"blur_discard_value"in
e||(b("scene",f,"b4w_ssao_settings.blur_discard_value"),e.blur_discard_value=1),"b4w_bloom_settings"in f||(b("scene",f,"b4w_bloom_settings"),e=d.b4w_bloom_settings,f.b4w_bloom_settings=e?e:{key:.2,blur:4,edge_lum:1}),"key"in f.b4w_bloom_settings||(b("scene",f,"b4w_bloom_settings.key"),f.b4w_bloom_settings.key=.2),"blur"in f.b4w_bloom_settings||(b("scene",f,"b4w_bloom_settings.blur"),f.b4w_bloom_settings.blur=4),"edge_lum"in f.b4w_bloom_settings||(b("scene",f,"b4w_bloom_settings.edge_lum"),f.b4w_bloom_settings.edge_lum=
1),"adaptive"in f.b4w_bloom_settings||(b("scene",f,"b4w_bloom_settings.adaptive"),f.b4w_bloom_settings.adaptive=!0),"average_luminance"in f.b4w_bloom_settings||(b("scene",f,"b4w_bloom_settings.average_luminance"),f.b4w_bloom_settings.average_luminance=.5),"b4w_motion_blur_settings"in f||(b("scene",f,"b4w_motion_blur_settings"),e=d.b4w_motion_blur_settings,f.b4w_motion_blur_settings=e?e:{motion_blur_factor:.01,motion_blur_decay_threshold:.01}),"motion_blur_factor"in f.b4w_motion_blur_settings||(b("scene",
f,"b4w_motion_blur_settings.motion_blur_factor"),f.b4w_motion_blur_settings.motion_blur_factor=.01),"motion_blur_decay_threshold"in f.b4w_motion_blur_settings||(b("scene",f,"b4w_motion_blur_settings.motion_blur_decay_threshold"),f.b4w_motion_blur_settings.motion_blur_decay_threshold=.01),"b4w_color_correction_settings"in f||(b("scene",f,"b4w_color_correction_settings"),e=d.b4w_color_correction_settings,f.b4w_color_correction_settings=e?e:{brightness:0,contrast:0,exposure:1,saturation:1}),"b4w_god_rays_settings"in
f||(b("scene",f,"b4w_god_rays_settings"),e=d.b4w_god_rays_settings,f.b4w_god_rays_settings=e?e:{intensity:.7,max_ray_length:1,steps_per_pass:10}),"steps_per_pass"in f.b4w_god_rays_settings||(b("scene",f,"b4w_god_rays_settings.steps_per_pass"),f.b4w_god_rays_settings.steps_per_pass=10),"b4w_glow_settings"in f||(b("scene",f,"b4w_glow_settings"),f.b4w_glow_settings={render_glow_over_blend:!1,small_glow_mask_coeff:2,large_glow_mask_coeff:2,small_glow_mask_width:2,large_glow_mask_width:6},e=f.b4w_glow_settings,
"b4w_render_glow_over_blend"in d&&(e.render_glow_over_blend=d.b4w_render_glow_over_blend),"b4w_small_glow_mask_coeff"in d&&(e.small_glow_mask_coeff=d.b4w_small_glow_mask_coeff),"b4w_large_glow_mask_coeff"in d&&(e.large_glow_mask_coeff=d.b4w_large_glow_mask_coeff),"b4w_small_glow_mask_width"in d&&(e.small_glow_mask_width=d.b4w_small_glow_mask_width),"b4w_large_glow_mask_width"in d&&(e.large_glow_mask_width=d.b4w_large_glow_mask_width)),d=f.b4w_render_shadows,"AUTO"!=d&&"OFF"!=d&&"ON"!=d&&(f.b4w_render_shadows=
d?"ON":"OFF"),d=f.b4w_render_reflections,"OFF"!=d&&"ON"!=d&&(f.b4w_render_reflections=d?"ON":"OFF"),d=f.b4w_render_refractions,"AUTO"!=d&&"OFF"!=d&&"ON"!=d&&(f.b4w_render_refractions=d?"ON":"OFF"),"b4w_render_dynamic_grass"in f||(b("scene",f,"b4w_render_dynamic_grass"),f.b4w_render_dynamic_grass="AUTO"),f.b4w_nla_script&&k("scene",f,"b4w_nla_script"),"audio_distance_model"in f||(b("scene",f,"audio_distance_model"),f.audio_distance_model="INVERSE_CLAMPED"),"b4w_custom_prop"in f||(b("scene",f,"b4w_custom_prop"),
f.b4w_custom_prop=null);f=a.meshes;for(l=0;l<f.length;l++){d=f[l];d.b4w_boundings||(b("mesh",d,"b4w_boundings"),d.b4w_boundings={},e=d.b4w_boundings,e.bb=d.b4w_bounding_box?d.b4w_bounding_box:{max_x:0,max_y:0,max_z:0,min_x:0,min_y:0,min_z:0},e.bb_src=d.b4w_bounding_box_source?d.b4w_bounding_box_source:d.b4w_bounding_box,e.bs_cen=d.b4w_bounding_sphere_center?d.b4w_bounding_sphere_center:[0,0,0],e.bc_cen=d.b4w_bounding_cylinder_center?d.b4w_bounding_cylinder_center:[0,0,0],e.be_cen=d.b4w_bounding_ellipsoid_center?
d.b4w_bounding_ellipsoid_center:[0,0,0],d.b4w_bounding_ellipsoid_axes?e.be_ax=d.b4w_bounding_ellipsoid_axes:(m=e.bb,e.be_ax=[(m.max_x-m.min_x)/2,(m.max_y-m.min_y)/2,(m.max_z-m.min_z)/2]),d.b4w_rotated_bounding_box?e.rbb=d.b4w_rotated_bounding_box:(m=e.bb,e.rbb={rbb_c:[(m.max_x+m.min_x)/2,(m.max_y+m.min_y)/2,(m.max_z+m.min_z)/2],rbb_s:[1,1,1]}),e.caxis_x=d.b4w_cov_axis_x?d.b4w_cov_axis_x:[1,0,0],e.caxis_y=d.b4w_cov_axis_y?d.b4w_cov_axis_y:[0,1,0],e.caxis_z=d.b4w_cov_axis_z?d.b4w_cov_axis_z:[0,0,1]);
"is_boundings_overridden"in d||(b("mesh",d,"is_boundings_overridden"),d.is_boundings_overridden=!1);"b4w_shape_keys"in d||(d.b4w_shape_keys=[],b("mesh",d,"b4w_shape_keys"));e=!0;for(g=0;g<d.submeshes.length;g++){var p=d.submeshes[g];"boundings"in p||(e=!1,p.boundings={be_ax:d.b4w_bounding_ellipsoid_axes,be_cen:d.b4w_bounding_ellipsoid_center,bb:{max_x:d.b4w_bounding_box.max_x,max_y:d.b4w_bounding_box.max_y,max_z:d.b4w_bounding_box.max_z,min_x:d.b4w_bounding_box.min_x,min_y:d.b4w_bounding_box.min_y,
min_z:d.b4w_bounding_box.min_z}});"uv_layers"in p||(b("submesh",d,"uv_layers"),p.uv_layers=d.uv_textures);"be_ax"in p.boundings||(p.boundings.be_ax=d.b4w_bounding_ellipsoid_axes);"be_cen"in p.boundings||(p.boundings.be_cen=d.b4w_bounding_ellipsoid_center);"bb"in p.boundings||(p.boundings.bb=d.b4w_bounding_box);"rbb"in p.boundings||(m=d.b4w_bounding_box,p.boundings.rbb={rbb_c:[(m.max_x+m.min_x)/2,(m.max_y+m.min_y)/2,(m.max_z+m.min_z)/2],rbb_s:[1,1,1]});"caxis_x"in p.boundings||(p.boundings.caxis_x=
[1,0,0]);"caxis_y"in p.boundings||(p.boundings.caxis_y=[0,1,0]);"caxis_z"in p.boundings||(p.boundings.caxis_z=[0,0,1])}e||b("mesh",d,"submesh_bd");m=d;e=["b4w_apply_scale","b4w_apply_modifiers","b4w_export_edited_normals","b4w_loc_export_vertex_anim","b4w_shape_keys"];g=null;for(p=0;p<e.length;p++)m[e[p]]&&(g?(m[e[p]]=!1,B.warn('WARNING property "'+e[p]+'" of object "'+m.name+'" has been set to "false". Foreground property "'+g+'" already exists.')):g=e[p]);for(m=0;m<d.b4w_vertex_anim.length;m++)e=
d.b4w_vertex_anim[m],"allow_nla"in e||(b('mesh["b4w_vertex_anim"]',d,"allow_nla"),e.allow_nla=!0);"active_uv_name"in d||(b("mesh",d,"active_uv_name"),d.active_uv_name="")}m=a.cameras;for(l=0;l<m.length;l++)f=m[l],f.type||(f.type="PERSP",b("camera",f,"type")),"b4w_eye_target_dist"in f&&(delete f.b4w_eye_target_dist,k("camera",f,"b4w_eye_target_dist")),"b4w_hover_zero_level"in f||(f.b4w_hover_zero_level=0,b("camera",f,"b4w_hover_zero_level")),"b4w_trans_velocity"in f||(f.b4w_trans_velocity=1,b("camera",
f,"b4w_trans_velocity")),"b4w_rot_velocity"in f||(f.b4w_rot_velocity=1,b("camera",f,"b4w_rot_velocity")),"b4w_zoom_velocity"in f||(f.b4w_zoom_velocity=.1,b("camera",f,"b4w_zoom_velocity")),"b4w_use_target_distance_limits"in f||(f.b4w_use_target_distance_limits=f.b4w_use_distance_limits||!1,b("camera",f,"b4w_use_target_distance_limits")),"b4w_use_zooming"in f||(f.b4w_use_zooming=f.b4w_use_distance_limits||!1,b("camera",f,"b4w_use_zooming")),"b4w_distance_min"in f||(f.b4w_distance_min=1,b("camera",
f,"b4w_distance_min")),"b4w_distance_max"in f||(f.b4w_distance_max=100,b("camera",f,"b4w_distance_max")),"b4w_horizontal_translation_min"in f||(f.b4w_horizontal_translation_min=-100,b("camera",f,"b4w_horizontal_translation_min")),"b4w_horizontal_translation_max"in f||(f.b4w_horizontal_translation_max=100,b("camera",f,"b4w_horizontal_translation_max")),"b4w_vertical_translation_min"in f||(f.b4w_vertical_translation_min=-100,b("camera",f,"b4w_vertical_translation_min")),"b4w_vertical_translation_max"in
f||(f.b4w_vertical_translation_max=100,b("camera",f,"b4w_vertical_translation_max")),"b4w_use_horizontal_clamping"in f||(f.b4w_use_horizontal_clamping=!1,b("camera",f,"b4w_use_horizontal_clamping")),"b4w_rotation_left_limit"in f||(f.b4w_rotation_left_limit=-Math.PI,b("camera",f,"b4w_rotation_left_limit")),"b4w_rotation_right_limit"in f||(f.b4w_rotation_right_limit=Math.PI,b("camera",f,"b4w_rotation_right_limit")),"b4w_horizontal_clamping_type"in f||(f.b4w_horizontal_clamping_type="LOCAL",b("camera",
f,"b4w_horizontal_clamping_type")),"b4w_use_vertical_clamping"in f||(f.b4w_use_vertical_clamping=!1,b("camera",f,"b4w_use_vertical_clamping")),"b4w_rotation_down_limit"in f||(f.b4w_rotation_down_limit=-Math.PI/2,b("camera",f,"b4w_rotation_down_limit")),"b4w_rotation_up_limit"in f||(f.b4w_rotation_up_limit=Math.PI/2,b("camera",f,"b4w_rotation_up_limit")),"b4w_vertical_clamping_type"in f||(f.b4w_vertical_clamping_type="LOCAL",b("camera",f,"b4w_vertical_clamping_type")),"b4w_hover_angle_min"in f||(f.b4w_hover_angle_min=
Math.PI/6,b("camera",f,"b4w_hover_angle_min")),"b4w_hover_angle_max"in f||(f.b4w_hover_angle_max=Math.PI/6,b("camera",f,"b4w_hover_angle_max")),"b4w_enable_hover_hor_rotation"in f||(f.b4w_enable_hover_hor_rotation=!0,b("camera",f,"b4w_enable_hover_hor_rotation")),"b4w_use_panning"in f||(f.b4w_use_panning=!0,b("camera",f,"b4w_use_panning")),"b4w_use_pivot_limits"in f||(f.b4w_use_pivot_limits=!1,f.b4w_pivot_z_min=0,f.b4w_pivot_z_max=10,b("camera",f,"b4w_use_pivot_limits")),"b4w_dof_bokeh"in f||(f.b4w_dof_bokeh=
!1,b("camera",f,"b4w_dof_bokeh")),"b4w_dof_bokeh_intensity"in f||(f.b4w_dof_bokeh_intensity=.3,b("camera",f,"b4w_dof_bokeh_intensity")),"b4w_dof_foreground_blur"in f||(f.b4w_dof_foreground_blur=!1,b("camera",f,"b4w_dof_foreground_blur")),"b4w_dof_front_start"in f||(f.b4w_dof_front_start=0,b("camera",f,"b4w_dof_front_start")),"b4w_dof_front_end"in f||(f.b4w_dof_front_end=f.b4w_dof_front,b("camera",f,"b4w_dof_front_end")),"b4w_dof_rear_start"in f||(f.b4w_dof_rear_start=0,b("camera",f,"b4w_dof_rear_start")),
"b4w_dof_rear_end"in f||(f.b4w_dof_rear_end=f.b4w_dof_rear,b("camera",f,"b4w_dof_rear_end")),"sensor_fit"in f||(f.sensor_fit="VERTICAL",b("camera",f,"sensor_fit"));m=a.lamps;for(l=0;l<m.length;l++)if(f=m[l],"b4w_generate_shadows"in f||(f.b4w_generate_shadows=!1,b("lamp",f,"b4w_generate_shadows")),"b4w_dynamic_intensity"in f||(f.b4w_dynamic_intensity=!1,b("lamp",f,"b4w_dynamic_intensity")),"use_diffuse"in f||(f.use_diffuse=!0,b("lamp",f,"use_diffuse")),"use_specular"in f||(f.use_specular=!0,b("lamp",
f,"use_specular")),"clip_start"in f||(f.clip_start=.1,b("lamp",f,"clip_start")),"clip_end"in f||(f.clip_end=30,b("lamp",f,"clip_end")),"POINT"==f.type||"SPOT"==f.type)"use_sphere"in f||(f.use_sphere=!1,b("lamp",f,"use_sphere")),D.LP&&(f.type="SUN");m=a.speakers;for(l=0;l<m.length;l++)f=m[l],"b4w_behavior"in f||(f.b4w_behavior=f.b4w_background_music?"BACKGROUND_SOUND":"POSITIONAL"),"b4w_auto_play"in f||(f.b4w_auto_play=!1,b("speaker",f,"b4w_auto_play")),"b4w_enable_doppler"in f||(f.b4w_enable_doppler=
!1,b("speaker",f,"b4w_enable_doppler")),"b4w_delay"in f||(f.b4w_delay=0),"b4w_delay_random"in f||(f.b4w_delay_random=0),"b4w_volume_random"in f||(f.b4w_volume_random=0),"b4w_pitch_random"in f||(f.b4w_pitch_random=0),"b4w_fade_in"in f||(f.b4w_fade_in=0),"b4w_fade_out"in f||(f.b4w_fade_out=0),"b4w_loop"in f||(f.b4w_loop=!1),"b4w_loop_start"in f||(f.b4w_loop_start=0,b("speaker",f,"b4w_loop_start")),"b4w_loop_end"in f||(f.b4w_loop_end=0,b("speaker",f,"b4w_loop_end")),f.animation_data&&c(f.animation_data);
m=a.textures;for(l=0;l<m.length;l++)f=m[l],"b4w_anisotropic_filtering"in f||(f.b4w_anisotropic_filtering="OFF",b("texture",f,"b4w_anisotropic_filtering")),"b4w_water_foam"in f||(f.b4w_water_foam=!1,b("texture",f,"b4w_water_foam")),"b4w_foam_uv_freq"in f||(f.b4w_foam_uv_freq=[1,1],b("texture",f,"b4w_foam_uv_freq")),"b4w_foam_uv_magnitude"in f||(f.b4w_foam_uv_magnitude=[1,1],b("texture",f,"b4w_foam_uv_magnitude")),"b4w_parallax_steps"in f||(f.b4w_parallax_steps=5,b("material",f,"b4w_parallax_steps")),
"b4w_parallax_lod_dist"in f||(f.b4w_parallax_lod_dist=10,b("material",f,"b4w_parallax_lod_dist")),"b4w_shore_dist_map"in f||(f.b4w_shore_dist_map=!1,b("texture",f,"b4w_shore_dist_map")),"b4w_shore_boundings"in f||(f.b4w_shore_boundings=[1E3,-1E3,1E3,-1E3],b("texture",f,"b4w_shore_boundings")),"b4w_max_shore_dist"in f||(f.b4w_max_shore_dist=100,b("texture",f,"b4w_max_shore_dist")),"b4w_disable_compression"in f||(f.b4w_disable_compression=!1,b("texture",f,"b4w_disable_compression")),"b4w_source_type"in
f||(f.b4w_source_type="",b("texture",f,"b4w_source_type")),"b4w_source_id"in f||(f.b4w_source_id="",b("texture",f,"b4w_source_id")),"b4w_source_size"in f||(f.b4w_source_size=1024,b("texture",f,"b4w_source_size")),"b4w_enable_canvas_mipmapping"in f||(f.b4w_enable_canvas_mipmapping=!0,b("texture",f,"b4w_enable_canvas_mipmapping")),"b4w_nla_video"in f||(f.b4w_nla_video=!1,b("texture",f,"b4w_nla_video"));m=a.images;for(l=0;l<m.length;l++)f=m[l],"colorspace_settings_name"in f||(f.colorspace_settings_name=
"sRGB",b("image",f,"colorspace_settings_name"));e=a.materials;for(l=0;l<e.length;l++){g=e[l];"ALPHA_ANTIALIASING"==g.game_settings.alpha_blend&&(D.MP?g.game_settings.alpha_blend="CLIP":2>D.oc&&(B.warn('Material "'+g.name+'" has the "Alpha Anti-Aliasing" transparency type, but multisampling is disabled. Changed to "Alpha Clip".'),g.game_settings.alpha_blend="CLIP"));"use_tangent_shading"in g||(g.use_tangent_shading=!1,b("material",g,"use_tangent_shading"));"b4w_node_mat_type"in g&&k("material",g,"b4w_node_mat_type");
"b4w_skydome"in g&&k("material",g,"b4w_skydome");"b4w_procedural_skydome"in g&&k("material",g,"b4w_procedural_skydome");"b4w_lens_flares"in g||(g.b4w_lens_flares=!1,b("material",g,"b4w_lens_flares"));"LENS_FLARES"===g.name&&(g.b4w_lens_flares||B.warn('"LENS_FLARES" material name has been found. Enable the "Lens Flare" property for this material.'),g.b4w_lens_flares=!0);g.b4w_water&&("b4w_water_shore_smoothing"in g||(g.b4w_water_shore_smoothing=!1,b("material",g,"b4w_water_shore_smoothing")),"b4w_water_dynamic"in
g||(g.b4w_water_dynamic=!1,b("material",g,"b4w_water_dynamic")),"b4w_waves_height"in g||(g.b4w_waves_height=1,b("material",g,"b4w_waves_height")),"b4w_waves_length"in g||(g.b4w_waves_length=1,b("material",g,"b4w_waves_length")),"b4w_water_dst_noise_scale0"in g||(g.b4w_water_dst_noise_scale0=.05,b("material",g,"b4w_water_dst_noise_scale0")),"b4w_water_dst_noise_scale1"in g||(g.b4w_water_dst_noise_scale1=.03,b("material",g,"b4w_water_dst_noise_scale1")),"b4w_water_dst_noise_freq0"in g||(g.b4w_water_dst_noise_freq0=
1.3,b("material",g,"b4w_water_dst_noise_freq0")),"b4w_water_dst_noise_freq1"in g||(g.b4w_water_dst_noise_freq1=1,b("material",g,"b4w_water_dst_noise_freq1")),"b4w_water_dir_min_shore_fac"in g||(g.b4w_water_dir_min_shore_fac=.4,b("material",g,"b4w_water_dir_min_shore_fac")),"b4w_water_dir_freq"in g||(g.b4w_water_dir_freq=.5,b("material",g,"b4w_water_dir_freq")),"b4w_water_dir_noise_scale"in g||(g.b4w_water_dir_noise_scale=.05,b("material",g,"b4w_water_dir_noise_scale")),"b4w_water_dir_noise_freq"in
g||(g.b4w_water_dir_noise_freq=.07,b("material",g,"b4w_water_dir_noise_freq")),"b4w_water_dir_min_noise_fac"in g||(g.b4w_water_dir_min_noise_fac=.5,b("material",g,"b4w_water_dir_min_noise_fac")),"b4w_water_dst_min_fac"in g||(g.b4w_water_dst_min_fac=.2,b("material",g,"b4w_water_dst_min_fac")),"b4w_water_waves_hor_fac"in g||(g.b4w_water_waves_hor_fac=5,b("material",g,"b4w_water_waves_hor_fac")),"b4w_water_absorb_factor"in g||(g.b4w_water_absorb_factor=6,b("material",g,"b4w_water_absorb_factor")),"b4w_water_fog_color"in
g||(g.b4w_water_fog_color=[.5,.7,.7],b("material",g,"b4w_water_fog_color")),"b4w_foam_factor"in g||(g.b4w_foam_factor=5,b("material",g,"b4w_foam_factor")),"b4w_generated_mesh"in g||(g.b4w_generated_mesh=!1,b("material",g,"b4w_generated_mesh")),"b4w_water_num_cascads"in g||(g.b4w_water_num_cascads=5,b("material",g,"b4w_water_num_cascads")),"b4w_water_subdivs"in g||(g.b4w_water_subdivs=64,b("material",g,"b4w_water_subdivs")),"b4w_water_detailed_dist"in g||(g.b4w_water_detailed_dist=1E3,b("material",
g,"b4w_water_detailed_dist")),"b4w_water_enable_caust"in g||(g.b4w_water_enable_caust=!1,b("material",g,"b4w_water_enable_caust")),"b4w_water_caust_scale"in g||(g.b4w_water_caust_scale=.25,b("material",g,"b4w_water_caust_scale")),"b4w_water_caust_brightness"in g||(g.b4w_water_caust_brightness=.5,b("material",g,"b4w_water_caust_brightness")));"b4w_dynamic_grass_size"in g||(g.b4w_dynamic_grass_size="");"b4w_dynamic_grass_color"in g||(g.b4w_dynamic_grass_color="");"diffuse_intensity"in g||(g.diffuse_intensity=
1,b("material",g,"diffuse_intensity"));"b4w_use_ghost"in g||(g.b4w_use_ghost=!1);"b4w_collision_margin"in g||(g.b4w_collision_margin=.04,b("material",g,"b4w_collision_margin"));"b4w_collision_group"in g||(g.b4w_collision_group=128,b("material",g,"b4w_collision_group"));"b4w_collision_mask"in g||(g.b4w_collision_mask=127,b("material",g,"b4w_collision_mask"));"b4w_do_not_render"in g||(g.b4w_do_not_render=!1,b("material",g,"b4w_do_not_render"));"HALO"!=g.type||"b4w_halo_sky_stars"in g||(g.b4w_halo_sky_stars=
!1,b("material",g,"b4w_halo_sky_stars"));"HALO"!=g.type||"b4w_halo_stars_blend_height"in g||(g.b4w_halo_stars_blend_height=10,b("material",g,"b4w_halo_stars_blend_height"));"HALO"!=g.type||"b4w_halo_stars_min_height"in g||(g.b4w_halo_stars_min_height=0,b("material",g,"b4w_halo_stars_min_height"));"specular_shader"in g||(g.specular_shader="COOKTORR",b("material",g,"specular_shader"));"diffuse_shader"in g||(g.diffuse_shader="LAMBERT",b("material",g,"diffuse_shader"));"roughness"in g||(g.roughness=.5,
b("material",g,"roughness"));"diffuse_fresnel"in g||(g.diffuse_fresnel=.1,b("material",g,"diffuse_fresnel"));"diffuse_fresnel_factor"in g||(g.diffuse_fresnel_factor=.5,b("material",g,"diffuse_fresnel_factor"));"specular_slope"in g||(g.specular_slope=.2,b("material",g,"specular_slope"));"specular_toon_size"in g||(g.specular_toon_size=.5,b("material",g,"specular_toon_size"));"specular_toon_smooth"in g||(g.specular_toon_smooth=.1,b("material",g,"specular_toon_smooth"));"specular_alpha"in g||(g.specular_alpha=
1,b("material",g,"specular_alpha"));"b4w_wettable"in g||(g.b4w_wettable=!1,b("material",g,"b4w_wettable"));"b4w_refractive"in g||(g.b4w_refractive=!1,b("material",g,"b4w_refractive"));"b4w_refr_bump"in g||(g.b4w_refr_bump=0,b("material",g,"b4w_refr_bump"));"b4w_shallow_water_col"in g||(g.b4w_shallow_water_col=[0,.8,.3],b("material",g,"b4w_shallow_water_col"));"b4w_shore_water_col"in g||(g.b4w_shore_water_col=[0,.9,.2],b("material",g,"b4w_shore_water_col"));"b4w_shallow_water_col_fac"in g||(g.b4w_shallow_water_col_fac=
1,b("material",g,"b4w_shallow_water_col_fac"));"b4w_shore_water_col_fac"in g||(g.b4w_shore_water_col_fac=.5,b("material",g,"b4w_shore_water_col_fac"));"b4w_water_sss_strength"in g||(g.b4w_water_sss_strength=5.9,b("material",g,"b4w_water_sss_strength"));"b4w_water_sss_width"in g||(g.b4w_water_sss_width=.45,b("material",g,"b4w_water_sss_width"));"b4w_render_above_all"in g||(g.b4w_render_above_all=!1,b("material",g,"b4w_render_above_all"));"b4w_water_norm_uv_velocity"in g||(g.b4w_water_norm_uv_velocity=
.05,b("material",g,"b4w_water_norm_uv_velocity"));"specular_ior"in g||(g.specular_ior=1,b("material",g,"specular_ior"));"darkness"in g||(g.darkness=0,b("material",g,"darkness"));"diffuse_toon_size"in g||(g.diffuse_toon_size=0,b("material",g,"diffuse_toon_size"));"diffuse_toon_smooth"in g||(g.diffuse_toon_smooth=0,b("material",g,"diffuse_toon_smooth"));"pass_index"in g||(g.pass_index=0,b("material",g,"pass_index"));f=g.texture_slots;for(m=0;m<f.length;m++)d=f[m],"blend_type"in d||(d.blend_type="MIX",
b("texture_slot",d,"blend_type"));if(g.node_tree){f=g.node_tree.nodes;for(m=0;m<f.length;m++)t(f[m]);g.node_tree.animation_data&&c(g.node_tree.animation_data)}}d=a.node_groups;for(l=0;l<d.length;l++)for(f=d[l].node_tree.nodes,m=0;m<f.length;m++)t(f[m]);f=a.objects;for(l=0;l<f.length;l++){d=f[l];switch(d.type){case "MESH":"b4w_dynamic_geometry"in d||(d.b4w_dynamic_geometry=!1);"b4w_reflexible"in d||(d.b4w_reflexible=!1);"b4w_reflexible_only"in d||(d.b4w_reflexible_only=!1);"b4w_reflective"in d||(d.b4w_reflective=
!1);"b4w_reflection_type"in d||(d.b4w_reflection_type="PLANE",b("object",d,"b4w_reflection_type"));"b4w_wind_bending"in d||(d.b4w_wind_bending=!1,b("object",d,"b4w_wind_bending"));"b4w_wind_bending_angle"in d||(d.b4w_wind_bending_angle=10,d.b4w_wind_bending_freq=.25,b("object",d,"wind bending params"));"b4w_detail_bending_amp"in d||(d.b4w_detail_bending_amp=.1,d.b4w_branch_bending_amp=.3,b("object",d,"detail bending params"));"b4w_detail_bending_freq"in d||(d.b4w_detail_bending_freq=1,b("object",
d,"b4w_detail_bending_freq"));"b4w_main_bend_stiffness_col"in d||(d.b4w_main_bend_stiffness_col="",b("object",d,"b4w_main_bend_stiffness_col"));"b4w_detail_bend_colors"in d||(d.b4w_detail_bend_colors={leaves_stiffness_col:"",leaves_phase_col:"",overall_stiffness_col:""},b("object",d,"b4w_detail_bend_colors"));"b4w_caustics"in d||(d.b4w_caustics=!1);"vertex_groups"in d&&d.vertex_groups.length&&d.data&&0==d.data.vertex_groups.length&&(d.data.vertex_groups=d.vertex_groups,delete d.vertex_groups,b("object",
d,"vertex_groups"));"b4w_vertex_anim"in d&&d.b4w_vertex_anim.length&&d.data&&0==d.data.b4w_vertex_anim.length&&(d.data.b4w_vertex_anim=d.b4w_vertex_anim,delete d.b4w_vertex_anim,b("object",d,"b4w_vertex_anim"));"b4w_do_not_render"in d||(d.b4w_do_not_render=!1);"b4w_hidden_on_load"in d||(d.b4w_hidden_on_load=!1);"b4w_hide_chldr_on_load"in d||(d.b4w_hide_chldr_on_load=!1);"use_ghost"in d.game||(d.game.use_ghost=!1);"use_sleep"in d.game||(d.game.use_sleep=!1);"velocity_min"in d.game||(d.game.velocity_min=
0);"velocity_max"in d.game||(d.game.velocity_max=0);"collision_group"in d.game||(d.game.collision_group=1);"collision_mask"in d.game||(d.game.collision_mask=255);m=d;e=m.game;g=e.collision_bounds_type;e.use_collision_bounds&&"BOX"!=g&&"CYLINDER"!=g&&"CONE"!=g&&"SPHERE"!=g&&"CAPSULE"!=g&&"EMPTY"!=g&&(B.error("Wrong collision bounds type "+g+". Disable physics for object "+m.name),m.b4w_collision=!1,m.b4w_floating=!1,m.b4w_vehicle=!1,m.b4w_character=!1);"b4w_vehicle_settings"in d?d.b4w_vehicle_settings&&
("steering_ratio"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.steering_ratio=10),"steering_max"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.steering_max=1),"inverse_control"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.inverse_control=!1),"force_max"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.force_max=1500),"brake_max"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.brake_max=100),"speed_ratio"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.speed_ratio=.027),"max_speed_angle"in
d.b4w_vehicle_settings||(d.b4w_vehicle_settings.max_speed_angle=Math.PI),"delta_tach_angle"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.delta_tach_angle=4.43),"suspension_compression"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.suspension_compression=4.4),"suspension_stiffness"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.suspension_stiffness=20),"suspension_damping"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.suspension_damping=2.3),"wheel_friction"in d.b4w_vehicle_settings||
(d.b4w_vehicle_settings.wheel_friction=1E3),"roll_influence"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.roll_influence=.1),"max_suspension_travel_cm"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.max_suspension_travel_cm=30),"floating_factor"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.floating_factor=3),"floating_factor"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.floating_factor=3),"water_lin_damp"in d.b4w_vehicle_settings||(d.b4w_vehicle_settings.water_lin_damp=.9),"water_rot_damp"in
d.b4w_vehicle_settings||(d.b4w_vehicle_settings.water_rot_damp=.9)):(d.b4w_vehicle_settings=null,b("object",d,"b4w_vehicle_settings"));"b4w_floating_settings"in d?d.b4w_floating_settings&&("floating_factor"in d.b4w_floating_settings||(d.b4w_floating_settings.floating_factor=3),"water_lin_damp"in d.b4w_floating_settings||(d.b4w_floating_settings.water_lin_damp=.8),"water_rot_damp"in d.b4w_floating_settings||(d.b4w_floating_settings.water_rot_damp=.8)):(d.b4w_floating_settings=null,b("object",d,"b4w_floating_settings"));
"b4w_character_settings"in d?d.b4w_character_settings&&("walk_speed"in d.b4w_character_settings||(d.b4w_character_settings.walk_speed=4),"run_speed"in d.b4w_character_settings||(d.b4w_character_settings.run_speed=8),"step_height"in d.b4w_character_settings||(d.b4w_character_settings.step_height=.25),"jump_strength"in d.b4w_character_settings||(d.b4w_character_settings.jump_strength=5),"waterline"in d.b4w_character_settings||(d.b4w_character_settings.waterline=0)):(d.b4w_character_settings=null,b("object",
d,"b4w_character_settings"));"b4w_selectable"in d||(d.b4w_selectable=!1,b("object",d,"b4w_selectable"));"b4w_outlining"in d||(d.b4w_outlining=!1,b("object",d,"b4w_outlining"));"b4w_outline_on_select"in d||(d.b4w_outline_on_select=!1,b("object",d,"b4w_outline_on_select"));"b4w_billboard"in d||(d.b4w_billboard=!1,b("object",d,"b4w_billboard"));"b4w_billboard_geometry"in d||(d.b4w_billboard_geometry="SPHERICAL",b("object",d,"b4w_billboard_geometry"));"b4w_pres_glob_orientation"in d||(d.b4w_pres_glob_orientation=
!1,b("object",d,"b4w_pres_glob_orientation"));"b4w_outline_settings"in d||("b4w_glow_settings"in d?d.b4w_outline_settings=d.b4w_glow_settings:(d.b4w_outline_settings={},d.b4w_outline_settings.outline_duration=1,d.b4w_outline_settings.outline_period=1,d.b4w_outline_settings.outline_relapses=0),b("object",d,"b4w_outline_settings"));"lod_levels"in d||(d.lod_levels=[],b("object",d,"lod_levels"));"b4w_animation_mixing"in d||(d.b4w_animation_mixing=!1,b("object",d,"b4w_animation_mixing"));break;case "EMPTY":"b4w_anchor"in
d||(d.b4w_anchor=null,b("object",d,"b4w_anchor")),!d.b4w_anchor||"max_width"in d.b4w_anchor||(d.b4w_anchor.max_width=250)}"collision_margin"in d.game||(d.game.collision_margin=.04,b("object",d,"collision_margin"));"b4w_anim_behavior"in d||(d.b4w_anim_behavior=d.b4w_cyclic_animation?"CYCLIC":"FINISH_STOP",b("object",d,"b4w_anim_behavior"));if(!("rotation_quaternion"in d)){m=[0,0,0,1];N.fl(d.rotation_euler,m);var e=m,g=m[0],p=m[1],v=m[2];e[0]=m[3];e[1]=g;e[2]=p;e[3]=v;d.rotation_quaternion=m;b("object",
d,"rotation_quaternion")}"webgl_do_not_batch"in d&&(d.b4w_do_not_batch=d.webgl_do_not_batch)&&k("object",d,"webgl_do_not_batch");"b4w_shadow_cast_only"in d||(d.b4w_shadow_cast_only=!1,b("object",d,"b4w_shadow_cast_only"));"b4w_correct_bounding_offset"in d||(d.b4w_correct_bounding_offset="AUTO",b("object",d,"b4w_correct_bounding_offset"));e=d.particle_systems;for(m=0;m<e.length;m++)g=e[m],p=g.settings,"use_rotation_dupli"in p||(p.use_rotation_dupli=!1,b("particle_settings",p,"use_rotation_dupli")),
"use_whole_group"in p||(p.use_whole_group=!1,b("particle_settings",p,"use_whole_group")),g.transforms||(g.transforms=new Float32Array,b("particle_system",g,"transforms")),"b4w_billboard_align"in p||(p.b4w_billboard_align="VIEW",b("particle_settings",p,"b4w_billboard_align")),"b4w_dynamic_grass"in p||(p.b4w_dynamic_grass=!1,b("object",p,"b4w_dynamic_grass")),"b4w_dynamic_grass_scale_threshold"in p||(p.b4w_dynamic_grass_scale_threshold=.01,b("object",p,"b4w_dynamic_grass_scale_threshold")),"b4w_initial_rand_rotation"in
p||(p.b4w_initial_rand_rotation=!1,b("particle_settings",p,"b4w_initial_rand_rotation")),"b4w_rotation_type"in p||(p.b4w_rotation_type="Z",b("particle_settings",p,"b4w_rotation_type")),"b4w_rand_rotation_strength"in p||(p.b4w_rand_rotation_strength=1,b("particle_settings",p,"b4w_rand_rotation_strength")),"b4w_hair_billboard"in p||(p.b4w_hair_billboard=!1,b("particle_settings",p,"b4w_hair_billboard")),"b4w_hair_billboard_type"in p||(p.b4w_hair_billboard_type="BASIC",b("particle_settings",p,"b4w_hair_billboard_type")),
"b4w_hair_billboard_jitter_amp"in p||(p.b4w_hair_billboard_jitter_amp=0,b("particle_settings",p,"b4w_hair_billboard_jitter_amp")),"b4w_hair_billboard_jitter_freq"in p||(p.b4w_hair_billboard_jitter_freq=0,b("particle_settings",p,"b4w_hair_billboard_jitter_freq")),"b4w_hair_billboard_geometry"in p||(p.b4w_hair_billboard_geometry="SPHERICAL",b("particle_settings",p,"b4w_hair_billboard_geometry")),"b4w_wind_bend_inheritance"in p||(p.b4w_wind_bend_inheritance="PARENT",b("particle_settings",p,"b4w_wind_bend_inheritance")),
"b4w_shadow_inheritance"in p||(p.b4w_shadow_inheritance="PARENT",b("particle_settings",p,"b4w_shadow_inheritance")),"b4w_reflection_inheritance"in p||(p.b4w_reflection_inheritance="PARENT",b("particle_settings",p,"b4w_reflection_inheritance")),"b4w_vcol_from_name"in p||(p.b4w_vcol_from_name="",b("particle_settings",p,"b4w_vcol_from_name")),"b4w_vcol_to_name"in p||(p.b4w_vcol_to_name="",b("particle_settings",p,"b4w_vcol_to_name")),"b4w_coordinate_system"in p||(p.b4w_coordinate_system="LOCAL",b("particle_settings",
p,"b4w_coordinate_system")),"b4w_allow_nla"in p||(p.b4w_allow_nla=!0,b("particle_settings",p,"b4w_allow_nla")),"b4w_enable_soft_particles"in p||(p.b4w_enable_soft_particles=!1,b("particle_settings",p,"b4w_enable_soft_particles")),"b4w_particles_softness"in p||(p.b4w_particles_softness=1,b("particle_settings",p,"b4w_particles_softness")),"billboard_tilt"in p||(p.billboard_tilt=0,b("particle_settings",p,"billboard_tilt")),"billboard_tilt_random"in p||(p.billboard_tilt_random=0,b("particle_settings",
p,"billboard_tilt_random")),"use_rotations"in p||(p.use_rotations=!1,b("particle_settings",p,"use_rotations"));"constraints"in d||(d.constraints=[],b("object",d,"constraints"));e=d.constraints;for(m=0;m<e.length;m++)g=e[m],"influence"in g||(g.influence=1),"axes"in g||(g.axes=[1,1,1]);e=d.modifiers;for(m=0;m<e.length;m++){a:{g=e[m];switch(g.type){case "ARRAY":if(!("fit_type"in g)){B.error("WARNING Incomplete modifier "+String(g.type)+' for "'+d.name+'", reexport "'+a.b4w_filepath_blend+'" scene');
g=!1;break a}}g=!0}g||(e.splice(m,1),m--)}"animation_data"in d||(d.animation_data={action:null,nla_tracks:[]},b("object",d,"animation_data"));d.animation_data&&("action"in d.animation_data||(d.animation_data.action=null,h("no action in animation data "+d.name)),"nla_tracks"in d.animation_data||(d.animation_data.nla_tracks=[],h("no NLA in animation data "+d.name)),c(d.animation_data));"b4w_collision_id"in d||(d.b4w_collision_id="",b("object",d,"b4w_collision_id"));"b4w_viewport_alignment"in d||(d.b4w_viewport_alignment=
null,b("object",d,"b4w_viewport_alignment"));"pinverse_tsr"in d||(d.pinverse_tsr=null,b("object",d,"pinverse_tsr"));"b4w_cluster_data"in d||(d.b4w_cluster_data={cluster_id:-1,cluster_center:null},b("object",d,"b4w_cluster_data"));"pass_index"in d||(d.pass_index=0,b("object",d,"pass_index"));"b4w_custom_prop"in d||(b("object",d,"b4w_custom_prop"),d.b4w_custom_prop=null);(0>d.scale[0]||0>d.scale[1]||0>d.scale[2])&&h('negative scale for object "'+d.name+'", can lead to some errors');m=d.scale;0==m[0]&&
0==m[1]&&0==m[2]?m=!0:(e=Math.abs((m[1]-m[2])/m[1]),m=.005>Math.abs((m[0]-m[1])/m[0])&&.005>e);m||h("non-uniform scale for object "+d.name)}for(var r in u)l=u[r],m=r.match(/.*?(?=>>|$)/i)[0],B.warn('Property "'+String(m)+'" is '+l.MQ+' for "'+l.type+'". To fix this, reexport '+a.b4w_filepath_blend)};a.sX=function(a,b){"num_channels"in a||(a.num_channels=1,h('B4W Warning: no channels number in animation fcurve for "'+b.name+'" action, reexport scene'))};a.yW=function(a){var b;a:{b=a.modifiers;for(var c=
0;c<b.length;c++){var h=b[c].type;if("ARRAY"==h||"CURVE"==h){b=!0;break a}}b=!1}if(!b)return null;b=O(a.data,a.data.name+"_MOD");a=a.modifiers;for(c=0;c<a.length;c++){var f=a[c];switch(f.type){case "ARRAY":for(var h=b,k=f,d=0,l=0,u=0,r=new Float32Array(16),f=[],q=1;q<k.count;q++){k.use_constant_offset&&(d+=k.constant_offset_displace[0],l+=k.constant_offset_displace[1],u+=k.constant_offset_displace[2]);if(k.use_relative_offset)var y=h.b4w_boundings.bb,d=d+(y.max_x-y.min_x)*k.relative_offset_displace[0],
l=l+(y.max_y-y.min_y)*k.relative_offset_displace[1],u=u+(y.max_z-y.min_z)*k.relative_offset_displace[2];N.w5(d,l,u,r);for(var t=y=O(h),C=r,w=p.fromMat4(C,L),w=v.fromMat3(w,U),D=0;D<t.submeshes.length;D++){var K=t.submeshes[D];N.as(K.position,C,K.position,0);P.hH(K.tbn,w,K.tbn)}f.push(y)}for(q=0;q<f.length;q++)for(k=h,d=f[q],l=0;l<k.submeshes.length;l++)if(u=k.submeshes[l],r=d.submeshes[l],y=u.base_length,t=u.indices.length,y)for(var I in u)switch(I){case "base_length":u[I]+=r[I];break;case "boundings":break;
case "indices":u[I]=N.B5(u[I],r[I]);for(C=t;C<u[I].length;C++)u[I][C]+=y;break;case "position":u[I]=m(u[I],r[I],u[I].length/y/3);break;case "tbn":u[I]=m(u[I],r[I],u[I].length/y/4);break;case "shade_tangs":u[I]=m(u[I],r[I],u[I].length/y/3);break;case "group":u[I]=m(u[I],r[I],u[I].length/y);break;case "texcoord":u[I]=m(u[I],r[I],u.uv_layers.length);break;case "color":u[I]=m(u[I],r[I],u.vertex_colors.length);break;case "uv_layers":case "vertex_colors":break;default:B.warn('array_mesh_join(): unknown submesh property "'+
I+'"'),u[I]=N.oN(u[I],r[I])}break;case "CURVE":for(h=b,q=g.HY(f.object),k=new Float32Array(16),l=q.Pm?4:3,d=new Float32Array(l),l=new Float32Array(l),u=new Float32Array(3),r=new Float32Array(4),y=new Float32Array(4),t=new Float32Array(3),C=new Float32Array(3),w=new Float32Array(3),D=0;D<h.submeshes.length;D++){var la=h.submeshes[D],K=la.position,la=la.tbn,ba;a:{ba=f.deform_axis;switch(ba){case "POS_X":case "NEG_X":ba=0;break a;case "POS_Y":case "NEG_Y":ba=1;break a;case "POS_Z":case "NEG_Z":ba=2;
break a;default:N.K("Wrong deform axis value "+ba)}ba=void 0}t[0]=0;t[1]=0;t[2]=0;t[ba]=1;for(var da=g.Y4(q),xa=0;xa<K.length/3;xa++){w[0]=K[3*xa];w[1]=K[3*xa+1];w[2]=K[3*xa+2];var ca=w[ba],V=g.X4(q,ca);g.Z4(q,V,d);u[0]=d[0];u[1]=d[1];u[2]=d[2];g.W4(q,V,l);C[0]=l[0];C[1]=0;C[2]=l[2];M.normalize(C,C);v.rotationTo(t,C,r);0>ca?(d[0]=C[0],d[1]=C[1],d[2]=C[2],M.scale(d,ca,d),M.add(u,d,u)):ca>da&&(d[0]=C[0],d[1]=C[1],d[2]=C[2],M.scale(d,ca-da,d),M.add(u,d,u));e.fromRotationTranslation(r,u,k);q.Pm&&(v.setAxisAngle(t,
d[3],y),M.transformQuat(w,y,w));w[ba]=0;M.transformMat4(w,k,w);K[3*xa]=w[0];K[3*xa+1]=w[1];K[3*xa+2]=w[2];ca=P.Qo(la,xa,F);P.hH(ca,r,ca);P.lk(la,ca,xa)}}}x.h3(b)}return b};a.EW=function(a,b){function c(b,c){var d=b[0];if(1<b.length)for(var e=1;e<b.length;e++)d+="*"+b[e];for(e=0;e<a.length;e++){var f=a[e];if(f.name==d)for(var g in c)f[g]=c[g]}}function e(a,b){for(var d in a)c(a[d],b)}for(var f=b.b4w_logic_nodes,g=0;g<f.length;g++)for(var d=f[g],k=0;k<d.length;k++){var l=d[k],m={register1:"variable1",
register2:"variable2",registerd:"variabled"},q;for(q in m)q in l&&(l[m[q]]=l[q]);for(var p in l.variables)"boolean"!=typeof l.variables[p][0]&&(l.variables[p]=[!1,l.variables[p]]);0<=["MATH","CONDJUMP","PAGEPARAM","REGSTORE"].indexOf(l.type)&&("variable1"in l&&(l.variables.id0=[!1,l.variable1]),"variable2"in l&&(l.variables.id1=[!1,l.variable2]),"variabled"in l&&(l.variables.vd=[!1,l.variabled]));for(var u in l.links)u.startsWith("id")||delete l.links[u];var m=l.common_usage_names,v=l.variables;switch(l.type){case "SELECT":for(var r=
0;r<a.length;r++)m=a[r],m.name==l.object&&(m.b4w_selectable=!0);l.bools||(l.bools={});l.bools.not_wait||(l.bools.not_wait=!1);h('Logic nodes type "SELECT" is deprecated');break;case "SWITCH_SELECT":e(l.objects_paths,{b4w_selectable:!0});if(l.links instanceof Array){h('Format of a "SWITCH_SELECT" node is outdated. It is recommended to reexport the scene "'+b.name+'"');m={};v=0;for(r in l.objects_paths)m[r]=l.links[v],v++;l.links=m}break;case "SELECT_PLAY":h('Logic nodes type "SELECT_PLAY" is deprecated, node will be muted. To fix this, reexport the scene "'+
b.name+'"');l.mute=!0;break;case "SELECT_PLAY_ANIM":h('Logic nodes type "SELECT_PLAY_ANIM" is deprecated');break;case "SHOW":case "HIDE":l.bools||(l.bools={});void 0===l.bools.ch&&(l.bools.ch=!1);l.bools.id0||e(l.objects_paths,{b4w_do_not_batch:!0});break;case "SET_SHADER_NODE_PARAM":case "INHERIT_MAT":e(l.objects_paths,{b4w_do_not_batch:!0});break;case "PLAY":b.b4w_use_nla=!0;break;case "MOVE_TO":e(l.objects_paths,{b4w_do_not_batch:!0});break;case "TRANSFORM_OBJECT":e(l.objects_paths,{b4w_do_not_batch:!0});
switch(m.space_type){case "WORLD":m.space_type=I.NU;break;case "PARENT":m.space_type=I.MU;break;case "LOCAL":m.space_type=I.LU}break;case "OUTLINE":e(l.objects_paths,{b4w_outlining:!0});break;case "CONDJUMP":l.condition&&(m.condition=l.condition);if("cnd"in l.floats)m.condition=l.floats.cnd;else switch(m.condition){case "GEQUAL":m.condition=I.aK;break;case "LEQUAL":m.condition=I.cK;break;case "GREATER":m.condition=I.bK;break;case "LESS":m.condition=I.dK;break;case "NOTEQUAL":m.condition=I.eK;break;
case "EQUAL":m.condition=I.$J}void 0!=l.number1&&(l.input1=l.number1);void 0!=l.number2&&(l.input2=l.number2);l.bools||(l.bools={});l.bools.str&&(m.variable_type="STRING");switch(m.variable_type){case "NUMBER":m.variable_type=I.bE;break;case "STRING":m.variable_type=I.gK;break;case "OBJECT":m.variable_type=I.fK}void 0===m.variable_type&&(m.variable_type=I.bE,l.floats.inp1=l.input1,l.floats.inp2=l.input2);void 0===v.id0&&(v.id0=v.v1,v.id1=v.v2);break;case "SEND_REQ":l.bools||(l.bools={});l.strings||
(l.strings={});void 0===l.bools.ct&&(l.bools.ct=!1);void 0!=l.url&&(l.bools.url=!1,l.strings.url=l.url);break;case "MATH":void 0!=l.number1&&(l.input1=l.number1);void 0!=l.number2&&(l.input2=l.number2);void 0!=l.input1&&(l.floats.inp1=l.input1);void 0!=l.input2&&(l.floats.inp2=l.input2);switch(l.operation){case "DIV":l.operation=I.sU;break;case "SUB":l.operation=I.BU;break;case "MUL":l.operation=I.xU;break;case "ADD":l.operation=I.nU;break;case "RAND":l.operation=I.yU;break;case "SIN":l.operation=
I.AU;break;case "COS":l.operation=I.rU;break;case "TAN":l.operation=I.CU;break;case "ARCSIN":l.operation=I.pU;break;case "ARCCOS":l.operation=I.oU;break;case "ARCTAN":l.operation=I.qU;break;case "LOG":l.operation=I.tU;break;case "MIN":l.operation=I.vU;break;case "MAX":l.operation=I.uU;break;case "ROUND":l.operation=I.zU;break;case "MOD":l.operation=I.wU;break;case "ABS":l.operation=I.mU}void 0===v.id0&&(v.id0=v.v1,v.id1=v.v2);break;case "REGSTORE":l.floats||(l.floats={});l.strings||(l.strings={});
void 0!=l.number1&&(l.input1=l.number1);if(void 0!=l.input1)switch(typeof l.input1){case "number":l.floats.inp1=l.input1;m.variable_type="NUMBER";break;default:l.strings.inp1=l.input1,m.variable_type="STRING"}switch(m.variable_type){case "NUMBER":m.variable_type=I.bE;break;case "STRING":m.variable_type=I.gK;break;case "OBJECT":m.variable_type=I.fK,e(l.objects_paths,{b4w_do_not_batch:!0})}break;case "PAGEPARAM":l.bools||(l.bools={});void 0===l.bools.hsh&&(l.bools.hsh=!1);l.floats||(l.floats={});void 0===
l.floats.ptp&&(l.floats.ptp=0);break;case "STOP_ANIM":case "PLAY_ANIM":l.bools||(l.bools={});void 0===l.bools.env&&(l.bools.env=!1);void 0===l.bools.id0&&(l.bools.id0=!1);l.bools.id0||c(l.objects_paths.id0,{b4w_do_not_batch:!0});"PLAY_ANIM"==l.type&&((l=m.param_anim_behavior)||(l="FINISH_STOP"),m.param_anim_behavior=y.nE(l));break;case "STRING":switch(m.string_operation){case "JOIN":m.string_operation=I.IU;break;case "FIND":m.string_operation=I.HU;break;case "REPLACE":m.string_operation=I.JU;break;
case "SPLIT":m.string_operation=I.KU;break;case "COMPARE":m.string_operation=I.GU}if("cnd"in l.floats)m.condition=l.floats.cnd;else switch(m.condition){case "GEQUAL":m.condition=I.aK;break;case "LEQUAL":m.condition=I.cK;break;case "GREATER":m.condition=I.bK;break;case "LESS":m.condition=I.dK;break;case "NOTEQUAL":m.condition=I.eK;break;case "EQUAL":m.condition=I.$J}break;case "REDIRECT":void 0!=l.url&&(l.bools.url=!1,l.strings.url=l.url);break;case "SET_CAMERA_MOVE_STYLE":switch(m.camera_move_style){case "STATIC":m.camera_move_style=
I.iU;break;case "TARGET":m.camera_move_style=I.jU;break;case "EYE":m.camera_move_style=I.gU;break;case "HOVER":m.camera_move_style=I.hU}break;case "ENTRYPOINT":l.bools||(l.bools={});void 0===l.bools.js&&(l.bools.js=!1);l.bools.js&&(l.mute=!0);break;case "JS_CALLBACK":for(q in l=m.js_cb_params,l)switch(l[q]){case "OBJECT":l[q]=I.kU;break;case "VARIABLE":l[q]=I.lU}}}}};b4w.module.__curve=function(a,w){function t(a,b,c,e,h){var g=e.length;h||(h=new Float32Array(g));for(var k=g+a,m=new Float32Array(k),r=1;r<=k-1;r++)m[r-1]=b>=c[r-1]&&b<c[r+1-1]?1:0;for(var p=2;p<=a;p++)for(r=1;r<=k-p;r++)m[r-1]=(m[r-1]?(b-c[r-1])*m[r-1]/(c[r+p-1-1]-c[r-1]):0)+(m[r+1-1]?(c[r+p-1]-b)*m[r+1-1]/(c[r+p-1]-c[r+1-1]):0);b==c[k-1]&&(m[g-1]=1);a=0;for(r=1;r<=g;r++)a+=m[r-1]*e[r-1];for(r=1;r<=g;r++)h[r-1]=a?m[r-1]*e[r-1]/a:0;return h}function c(a){a=a.GA;return a[a.length-1]}function b(a){a=
a.NM;return a[a.length-1]}function k(a,b,c,e,m,v,t,w){var g=a+(b-a)/2,p=h(g,e,m,v,t)-c;w=w?w:.01;return Math.abs(p)<w?g:0<p?k(a,g,c,e,m,v,t,w):k(g,b,c,e,m,v,t,w)}function h(a,b,c,e,h){var g=1-a;return b*g*g*g+3*c*g*g*a+3*e*g*a*a+h*a*a*a}var O=w("__util"),m=w("__vec3");a.HY=function(a){var b={},c=a.data;a=c.splines[0];if(!a||"NURBS"!=a.type||!a.use_endpoint_u)return null;var e=a.order_u;b.order=e;a=a.points;var h=a.length/5,k=[],m=h+e,h=h+2;k[0]=0;for(var x=2;x<=m;x++)k[x-1]=x>e&&x<h?k[x-2]+1:k[x-
2];b.GA=k;"2D"==c.dimensions?b.Pm=!1:"3D"==c.dimensions?b.Pm=!0:O.K("Wrong curve dimensions");e=[];k=[];for(c=0;c<a.length;c+=5)e.push(a[c]),e.push(a[c+1]),e.push(a[c+2]),b.Pm&&e.push(a[c+3]),k.push(a[c+4]);b.YE=e;b.uJ=k;a=[];for(var c=b.YE,e=b.Pm?4:3,k=b.uJ,m=b.GA,h=b.order,x=c.length/e,w=x+h,p=0,I=m[w-1]/999,y=0;1E3>y;y++){5E-6>m[w-1]-p&&(p=m[w-1]);for(var D=t(h,p,m,k),l=0;l<e;l++)for(var u=a[e*y+l]=0;u<x;u++)a[e*y+l]+=D[u]*c[e*u+l];p+=I}e=b.Pm?4:3;k=new Float32Array(1E3);k[0]=0;for(c=1;1E3>c;c+=
1)m=a[(c-1)*e],h=a[(c-1)*e+1],x=a[(c-1)*e+2],w=a[c*e],p=a[c*e+1],I=a[c*e+2],k[c]=k[c-1]+Math.sqrt((w-m)*(w-m)+(p-h)*(p-h)+(I-x)*(I-x));b.NM=k;return b};a.Z4=function(a,b,g){g||(g=[]);b=Math.min(b,c(a));var e=a.YE,h=a.Pm?4:3,k=a.uJ,m=a.GA,r=a.order;a=e.length/h;var x=a+r;5E-6>m[x-1]-b&&(b=m[x-1]);x=new Float32Array(a);t(r,b,m,k,x);for(b=0;b<h;b++)for(k=g[b]=0;k<a;k++)g[b]+=x[k]*e[h*k+b]};a.W4=function(a,b,c){c||(c=[]);var e=a.YE,g=a.Pm?4:3,h=a.uJ,k=a.GA,m=a.order;a=e.length/g;var r=a+m;5E-6>k[r-1]-
b&&(b=k[r-1]);var r=new Float32Array(a),p=b;b=r;var x=h.length;b||(b=new Float32Array(x));var y=new Float32Array(x),t=new Float32Array(x),l=y,u=t;l||(l=new Float32Array(x));u||(u=new Float32Array(x));for(var w=x+m,F=new Float32Array(w),O=new Float32Array(w),K=1;K<=w-1;K++)F[K-1]=p>=k[K-1]&&p<k[K+1-1]?1:0;p==k[w-1]&&(F[x-1]=1);for(var A=2;A<=m;A++)for(K=1;K<=w-A;K++){var E=F[K-1]?F[K-1]/(k[K+A-1-1]-k[K-1]):0,n=F[K+1-1]?-F[K+1-1]/(k[K+A-1]-k[K+1-1]):0,f=O[K-1]?(p-k[K-1])*O[K-1]/(k[K+A-1-1]-k[K-1]):
0,X=O[K+1-1]?(k[K+A-1]-p)*O[K+1-1]/(k[K+A-1]-k[K+1-1]):0;F[K-1]=(F[K-1]?(p-k[K-1])*F[K-1]/(k[K+A-1-1]-k[K-1]):0)+(F[K+1-1]?(k[K+A-1]-p)*F[K+1-1]/(k[K+A-1]-k[K+1-1]):0);O[K-1]=E+n+f+X}for(K=1;K<=x;K++)l[K-1]=F[K-1],u[K-1]=O[K-1];k=0;for(m=1;m<=x;m++)k+=y[m-1]*h[m-1];p=0;for(m=1;m<=x;m++)p+=t[m-1]*h[m-1];for(m=1;m<=x;m++)b[m-1]=k?t[m-1]*h[m-1]/k+y[m-1]*h[m-1]*p/(k*k):0;for(h=0;h<g;h++)for(k=c[h]=0;k<a;k++)c[h]+=r[k]*e[g*k+h]};a.Sea=c;a.Y4=b;a.X4=function(a,h){if(0>=h)return 0;var g=c(a);if(h>=b(a))return g;
var e=a.NM,k=O.iy(e,h,0,e.length-1);return g*(k+(h-e[k])/(e[k+1]-e[k]))/1E3};a.NA=function(a,b,c,e,h){return c+(h-e)*(a-c)/(b-e)};a.zP=function(a,b,c){var e=b[0];b=b[1];c=(c[1]-b)/(c[0]-e);return c*a+(b-c*e)};a.rL=function(a,b,c,e,m,v){return h(k(0,1,a,b[0],c[0],e[0],m[0],v),b[1],c[1],e[1],m[1])};a.EE=function(a,b,c,e,h){var g=new Float32Array(3),k=new Float32Array(3),r=new Float32Array(3),x=new Float32Array(3),p=new Float32Array(3),t=new Float32Array(3);m.copy(a[1],k);null==b?(m.copy(c[1],r),g[0]=
2*k[0]-r[0],g[1]=2*k[1]-r[1]):m.copy(b[1],g);null==c?(m.copy(b[1],g),r[0]=2*k[0]-g[0],r[1]=2*k[1]-g[1]):m.copy(c[1],r);m.subtract(k,g,x);m.subtract(r,k,p);b=m.length(x);c=m.length(p);0==b&&(b=1);0==c&&(c=1);if("AUTO"==e||"AUTO"==h)if(t[0]=p[0]/c+x[0]/b,t[1]=p[1]/c+x[1]/b,g=2.5614*m.length(t))"AUTO"==e&&m.scaleAndAdd(k,t,-(b/g),a[0]),"AUTO"==h&&m.scaleAndAdd(k,t,c/g,a[2]);"VECTOR"==e&&m.scaleAndAdd(k,x,-1/3,a[0]);"VECTOR"==h&&m.scaleAndAdd(k,p,1/3,a[2])};a.$X=function(a,b,c,e){var g=[],h=[],k,m,r;
g[0]=a[0]-b[0];g[1]=a[1]-b[1];h[0]=e[0]-c[0];h[1]=e[1]-c[1];r=e[0]-a[0];k=Math.abs(g[0]);m=Math.abs(h[0]);k+m&&k+m>r&&(k=r/(k+m),b[0]=a[0]-k*g[0],b[1]=a[1]-k*g[1],c[0]=e[0]-k*h[0],c[1]=e[1]-k*h[1])}};b4w.module.__logic_nodes=function(a,w){function t(){return function(a,c,d,e){d=e[1];var f=e[2];e=b(e[0],f.Sb);if(-1==e.state){for(var g=0;g<e.J3;g++)if(U.wd(a,c,g)){for(var h=0;h<e.SB.length;h++)if(e.SB[h]==g){d.Nr==e.t5?(D.qv(d.Ta)&&(e.state=-3),f.Sb.di||(e.state=1,e.sw=e.OG[h])):(e.state=1,e.sw=e.OG[h]);e.fI=g;return}e.fI=g}e.state=0}}}function c(a,b){return{name:a.name,type:a.type,label:a.label,Sa:a.slot_idx_order,sw:a.slot_idx_jump,Ia:a.frame_range[0],vb:a.frame_range[1],q_:a.frame_range_mask?
a.frame_range_mask[0]:!0,p_:a.frame_range_mask?a.frame_range_mask[1]:!0,F2:a.param_name,y2:a.operation,Yb:a.mute,cN:a.object,Zg:a.anim_name,H2:a.parse_json_vars,G2:a.parse_json_paths,Rd:a.objects_paths,cQ:a.nodes_paths,Ga:a.floats,P:a.bools,N:a.variables,Ul:a.strings,Xm:a.logic_functions,HP:a.logic_node_trees,RG:a.materials_names,PR:a.shader_nd_type,$c:a.common_usage_names,SZ:a.encode_json_vars,RZ:a.encode_json_paths,t5:b,GH:ba[a.type]?ba[a.type]:m,EB:!1,AP:a.links,lv:[],MF:-1,PA:null,fI:-1}}function b(a,
b,c){var d=b.Ks+1-a.lv.length;if(0<d){for(var e=0;e<d;e++)e==d-1?a.lv.push({Ab:{},sw:-1,state:-1,SB:[],bD:-1,Rc:{},Qc:p.It,Fc:null}):a.lv.push(0);c&&c(a,a.lv[b.Ks],b)}return a.lv[b.Ks]}function k(a,b,c){return a[0]?b[a[1]]:c[a[1]]}function h(a,b,c,d){a[0]?b[a[1]]=d:c[a[1]]=d}function O(a,b,c){switch(b.state){case 2:c.za=a.Sa}}function m(a,b,c){switch(b.state){case 1:u.error("Unknown node type: "+a.type);break;case 2:c.za=a.Sa}}function x(a,c){for(var d=a.ia,e=0;e<d.length;e++){var f=d[e];"SWITCH_SELECT"==
f.type&&f!=c&&(b(f,a.Sb).state=-3)}}function r(a,c,d){var e=l.Wz(),f=b(a,d.Sb);f.SB=[];f.OG=[];for(var g in a.Rd){var h=a.P[g]?k(a.N[g],c.G,d.Sb.G):l.ud(l.le,a.Rd[g],0),h=e.indexOf(h);if(-1==h){u.error("logic script error: non-selectable object:",a.Rd[g][a.Rd[g].length-1]);return}f.SB.push(h);f.OG.push(a.AP[g])}f.J3=e.length;f=[];for(g=0;g<e.length;g++)f.push(U.gF(e[g],!1));e=t();U.qa(null,"LOGIC_NODES_SWITCH_SELECT_"+N(a.label),U.Ai,f,U.rF,e,[a,c,d])}function g(a,b,c,d,e){return c?k(a.N[b],d,e):
l.ud(l.le,a.Rd[b],0)}function e(a){var b=a.Sb.po;return 1>=b.length?a.ia:b[b.length-1].SA.Zu.ia}function B(a,b){var d=a.b4w_logic_nodes,e=b.zg,f=b.Xm;b.state=1;for(var g=-1,h=0;h<d.length;h++){for(var k={ia:[],Sb:{wb:a,za:0,di:!1,kJ:!1,Ks:h,po:[],G:{R1:0,R2:0,R3:0,R4:0,R5:0,R6:0,R7:0,R8:0}}},l=d[h],m=0;m<l.length;m++){var n=c(l[m],k);k.ia.push(n)}switch(k.ia[0].type){case "ENTRYPOINT":g++;k.Sb.Ks=g;e.push(k);break;case "DEF_FUNC":n=k.ia[0],k.Sb=null,f.push({id:[n.HP.id0,n.Xm.id0],Zu:k})}}for(h=0;h<
e.length;h++)for(k=e[h],d=0;d<k.ia.length;d++)n=k.ia[d],n.Yb||n.GH(n,b,k.Sb,0,0);for(h=0;h<f.length;h++)for(e=f[h].Zu,d=0;d<e.ia.length;d++)n=e.ia[d],n.Yb||n.GH(n,b,0,0,0);var f=a.timeline_markers,q;for(q in f)b.tw.push(f[q]);b.tw.sort(function(a,b){return a-b});b.state=2;da.push(b)}function v(a,b){switch(b){case 0:return Number(a)?Number(a):0;case 1:return String(a);case 2:return a;default:return null}}function P(a){switch(typeof a){case "string":return v(a,1);case "number":return v(a,0);default:return v(a,
1)}}function N(a){ca[a]||(ca[a]=0);var b=a+"_"+ca[a],b=b.replace(/ /g,"_").replace(/\//g,"_");ca[a]++;return b}function M(a,b){switch(b){case 0:return a.Ga;case 1:return a.Ul;case 2:return a.Rd}}var p=w("__animation"),I=w("__assets"),y=w("__camera"),D=w("__nla"),l=w("__objects"),u=w("__print"),L=w("__scenes"),F=w("__config"),U=w("__controls"),K=w("__batch"),A=w("__geometry"),E=w("__mat3"),n=w("__mat4"),f=w("__physics"),X=w("__quat"),d=w("__sfx"),H=w("__time"),G=w("__transform"),R=w("__tsr"),q=w("__util"),
ja=w("__vec3"),qa=w("__obj_util"),C=new Float32Array(4),pa=new Float32Array(3),ia=new Float32Array(3),ma=new Float32Array(2),ea=new Float32Array(9),la=new Float32Array(16);a.bE=0;a.gK=1;a.fK=2;a.sU=0;a.BU=1;a.xU=2;a.nU=3;a.yU=4;a.AU=5;a.rU=6;a.CU=7;a.pU=8;a.oU=9;a.qU=10;a.tU=11;a.vU=12;a.uU=13;a.zU=14;a.wU=15;a.mU=16;a.IU=0;a.HU=1;a.JU=2;a.KU=3;a.GU=4;a.aK=0;a.cK=1;a.bK=2;a.dK=3;a.eK=4;a.$J=5;a.NU=0;a.MU=1;a.LU=2;a.iU=0;a.jU=1;a.gU=2;a.hU=3;a.kU=0;a.lU=1;var ba={ENTRYPOINT:function(a,b,c){switch(b.state){case 2:c.po.push({FL:null,
G:c.G,SA:null}),c.za=a.Sa}},HIDE:function(a,c,d){function e(a,b){f||(b.aa=l.ud(l.le,a.Rd.id0,0),b.aa||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0))}var f=a.P.id0;switch(c.state){case 2:var g=b(a,d,e);c=f?k(a.N.id0,c.G,d.G):g.aa;a.P.ch?L.ju(c,!0):L.qo(c,!0);d.za=a.Sa}},SHOW:function(a,c,d){function e(a,b){f||(b.aa=l.ud(l.le,a.Rd.id0,0),b.aa||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0))}var f=a.P.id0;switch(c.state){case 2:var g=b(a,d,e);c=f?
k(a.N.id0,c.G,d.G):g.aa;a.P.ch?L.ju(c,!1):L.qo(c,!1);d.za=a.Sa}},PAGEPARAM:function(a,b,c){switch(b.state){case 2:var d=a.N.vd;b=b.G;var e=c.G,f;a:{f=a.F2;var g=a.Ga.ptp,k=a.P.hsh,l=F.get("url_params");if(l&&f in l)f=Number(l[f]);else{if(k=k?location.hash:location.search)for(k=k.slice(1).split("&"),l=0;l<k.length;l++){var m=k[l].split("=");if(1<m.length&&m[0]==f){f=v(m[1],g);break a}}f=0}}h(d,b,e,f);c.za=a.Sa}},SWITCH_SELECT:function(a,c,d){function e(a,b){b.state=-3}switch(c.state){case 2:var f=
b(a,d,e);if(-3==f.state)f.state=-2,x(c.zg[d.Ks],a),r(a,c,c.zg[d.Ks]);else if(-2==f.state)f.state=-1;else if(0==f.state||1==f.state){if(a.N.vd&&a.N.vd[1]){var g=l.Wz();h(a.N.vd,c.G,d.G,g[f.fI])}d.za=f.state?f.sw:a.Sa;f.state=-3;U.Uf(null,"LOGIC_NODES_SWITCH_SELECT_"+N(a.label))}}},SELECT:function(a,b){switch(b.state){case 1:u.error("Logic script error: node is deprecated. Node: ",a.name),a.Yb=!0}},PLAY:function(a,c,d,f){switch(c.state){case 1:D.gS();a.P.not_wait||(a.P.not_wait=!1);break;case 2:var g=
b(a,d);switch(g.state){case -1:if(D.qv(c.Ta))if(c.mF==c.Nr&&d.di)break;else{var h=c.Nr;if(h){h.Sb.za=e(h)[h.Sb.za].Sa;var h=c.Nr,k=h.Sb.po,l=k.length,m=[];1>=l&&m.push(h.ia);for(var n=1;n<l;n++)m.push(k[n].SA.Zu.ia);for(n=0;n<m.length;n++)for(k=0;k<m[n].length;k++)l=m[n][k],"PLAY"==l.type&&(b(l,h.Sb).state=-1)}}d.di=!a.P.not_wait;c.Nr=c.mF;g.state=0;a.q_&&(D.n4(a.Ia),D.zR(f));if(a.p_)D.rI(a.vb);else{f=D.Mz(f);var h=-1,p;for(p in c.tw)if(f<c.tw[p]){h=p;break}0<=h?D.rI(c.tw[h]):D.rI(D.WN())}D.T2();
a.P.not_wait&&(d.za=a.Sa,g.state=-1,d.di=!1);break;case 0:D.qv()||(d.za=a.Sa,g.state=-1,d.di=!1);break;case 1:d.za=a.Sa;g.state=-1;c.Nr=null;d.di=!1;break;default:q.K("Unknown state of "+a.name),g.state=-1}}},REDIRECT:function(a,b,c){switch(b.state){case 2:window.location.href=a.P.url?v(k(a.N.url,b.G,c.G),1):a.Ul.url,b.state=3}},MATH:function(a,b,c){switch(b.state){case 2:var d=-1==a.N.id0[1]?a.Ga.inp1:v(k(a.N.id0,b.G,c.G),0),e=-1==a.N.id1[1]?a.Ga.inp2:v(k(a.N.id1,b.G,c.G),0),f=0;switch(a.y2){case 3:f=
d+e;break;case 2:f=d*e;break;case 1:f=d-e;break;case 0:0==e&&q.K("Division by zero in Logic script");f=d/e;break;case 4:f=Math.random()*(e-d)+d;break;case 5:f=Math.sin(d);break;case 6:f=Math.cos(d);break;case 7:f=Math.tan(d);break;case 8:f=Math.asin(d);break;case 9:f=Math.acos(d);break;case 10:f=Math.atan(d);break;case 11:f=Math.log(d);break;case 12:f=Math.min(d,e);break;case 13:f=Math.max(d,e);break;case 14:f=Math.round(d);break;case 15:f=d%e;break;case 16:f=Math.abs(d)}h(a.N.vd,b.G,c.G,f);c.za=
a.Sa}},CONDJUMP:function(a,b,c){switch(b.state){case 2:var d=a.$c.variable_type,e=M(a,d),f=!1;if(2==d){var g=a.P.id0?k(a.N.id0,b.G,c.G):l.ud(l.le,a.Rd.id0,0);b=a.P.id1?k(a.N.id1,b.G,c.G):l.ud(l.le,a.Rd.id1,0);switch(a.$c.condition){case 5:g==b&&(f=!0);break;case 4:g!=b&&(f=!0)}}else switch(g=-1==a.N.id0[1]?e.inp1:v(k(a.N.id0,b.G,c.G),d),b=-1==a.N.id1[1]?e.inp2:v(k(a.N.id1,b.G,c.G),d),a.$c.condition){case 5:g==b&&(f=!0);break;case 4:g!=b&&(f=!0);break;case 3:g<b&&(f=!0);break;case 2:g>b&&(f=!0);break;
case 1:g<=b&&(f=!0);break;case 0:g>=b&&(f=!0)}c.za=f?a.sw:a.Sa}},REGSTORE:function(a,b,c){switch(b.state){case 2:if(a.P.vs)var d=k(a.N.vs,b.G,c.G);else var d=a.$c.variable_type,e=M(a,d),d=2==d?l.ud(l.le,e.id0,0):e.inp1;h([a.P["new"]&&a.P.gl||a.N.vd[0],a.N.vd[1]],b.G,c.G,d);c.za=a.Sa}},PLAY_ANIM:function(a,c,d){function f(a,b){for(var c=-1,d=0;8>d;d++){var e=a.Ba[d];if(e&&e.Kk&&p.kS(e.Kk)==p.kS(b))if(-1!=c)c=d;else return-1}return c}function h(a,b,d){b.aa=n?l.aA(a.cN[0],0):g(a,"id0",m,c.G,d.G);b.aa||
m||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0)}var m=a.P.id0,n=a.P.env;switch(c.state){case 2:var v=b(a,d,h);n||(v.aa=m?k(a.N.id0,c.G,d.G):v.aa);0!=v.state||p.qv(v.aa,v.Qc)||(v.state=1);switch(v.state){case -1:for(var r in c.zg){var x=c.zg[r],y=e(x),C=x.Sb.za;-1!=C&&(y=y[C],x=b(y,x.Sb),"PLAY_ANIM"==y.type&&y!=a&&0==x.state&&x.aa==v.aa&&(x.state=1))}r=a.$c.param_anim_behavior;""==a.Zg?(p.YK(v.aa),p.gI(v.aa,r,p.It)):(x=f(v.aa,a.Zg),-1==x?(v.Qc=p.K4(v.aa,a.Zg),p.apply(v.aa,
null,a.Zg,v.Qc)):v.Qc=x,p.gI(v.aa,r,v.Qc));a.P.not_wait||(d.di=!0);p.play(v.aa,null,v.Qc);v.state=0;a.P.not_wait&&(d.za=a.Sa,v.state=-1);break;case 0:break;case 1:a.P.not_wait||(d.di=!1);d.za=a.Sa;v.state=-1;break;default:q.K("Unknown state of "+a.name),v.state=-1}}},SELECT_PLAY:O,SEND_REQ:function(a,c,d){function e(a,d,e,f,g){a=JSON.stringify(a);d=g[1];e=b(g[0],d);h(g[0].N.dst,c.G,d.G,a);e.state=1}var f=b(a,d);switch(c.state){case 2:switch(f.state){case -1:f.state=0;var f=a.P.url?v(k(a.N.url,c.G,
d.G),1):a.Ul.url,g={};a.P.ct&&(g["Content-Type"]=a.Ul.ct);"GET"==a.$c.request_type?I.enqueue([{id:f,type:I.fm,url:f,fn:g,Qb:[a,d]}],e,null,null,null):"POST"==a.$c.request_type&&I.enqueue([{id:f,type:I.fm,url:f,fn:g,jk:"POST",BB:v(k(a.N.dst1,c.G,d.G),1),Qb:[a,d]}],e,null,null,null);break;case 1:f.state=-1,d.za=a.Sa}}},INHERIT_MAT:function(a,c,d){function e(a,b){for(var c=0;2>c;c++)b.Ab["id"+c]=l.ud(l.le,a.Rd["id"+c],0),b.Ab["id"+c]||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=
!0)}switch(c.state){case 2:c=b(a,d,e),l.X0(c.Ab.id0,a.RG.id0,c.Ab.id1,a.RG.id1),d.za=a.Sa}},SET_SHADER_NODE_PARAM:function(a,c,d){function e(a,b){a.Rd.id0&&(b.Ab.id0=l.ud(l.le,a.Rd.id0,0),a.Rd.id0||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0),a.cQ.id0.unshift(a.RG.id0))}switch(c.state){case 2:var f=b(a,d,e).Ab.id0,g=a.cQ.id0,h=g[0],m=K.Gm(f,h);d.za=a.Sa;if(null===m)u.error('Material "'+h+'" was not found in the object "'+f.name+'".');else{if("ShaderNodeRGB"==a.PR){var n=
l.$F(m.ki,g,1);l.nI(f,h,n,a.P.id0?v(k(a.N.id0,c.G,d.G),0):a.Ga.id0,a.P.id1?v(k(a.N.id1,c.G,d.G),0):a.Ga.id1,a.P.id2?v(k(a.N.id2,c.G,d.G),0):a.Ga.id2)}"ShaderNodeValue"==a.PR&&(n=l.aG(m.li,g),l.oI(f,h,n,a.P.id0?v(k(a.N.id0,c.G,d.G),0):a.Ga.id0))}}},DELAY:function(a,c,d,e,f){e=b(a,d);switch(c.state){case 2:-1==e.state?(e.state=0,e.bD=0,d.di=!0):0==e.state&&(e.bD+=f,(a.P.dl?v(k(a.N.dl,c.G,d.G),0):a.Ga.dl)<e.bD&&(e.state=-1,d.za=a.Sa,d.di=!1))}},APPLY_SHAPE_KEY:function(a,c,d){function e(a,b){var c=b.Ab.id0=
l.ud(l.le,a.Rd.id0,0);c||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0);var d=a.$c.sk;A.KE(c)?A.O0(c,d)||(u.error("Wrong key name:",d),a.Yb=!0):(u.error("No shape keys in object:",c.name),a.Yb=!0)}switch(c.state){case 2:var f=b(a,d,e);A.$K(f.Ab.id0,a.$c.sk,a.P.skv?v(k(a.N.skv,c.G,d.G),0):a.Ga.skv);d.za=a.Sa}},OUTLINE:function(a,c,d){function e(a,b){f||(b.aa=l.ud(l.le,a.Rd.id0,0),b.aa||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0),b.aa&&b.aa.A&&
b.aa.A.zd||(u.error("Can't evaluate 'Outline' logic node: wrong object"),a.Yb=!0))}var f=a.P.id0;switch(c.state){case 2:var g=b(a,d,e),g=f?k(a.N.id0,c.G,d.G):g.aa;switch(a.$c.outline_operation){case "PLAY":c=g.A.dk;l.Eq(g,c.cn,c.dn,c.en);break;case "STOP":l.lu(g);break;case "INTENSITY":l.pI(g,a.P["in"]?v(k(a.N["in"],c.G,d.G),0):a.Ga["in"])}d.za=a.Sa}},MOVE_CAMERA:function(a,c,d){function e(a,b,c,d){switch(y.Vi(a)){case y.Ob:y.vI(a,b,c);break;case y.Xc:case y.He:G.mk(a,d);break;case y.ed:ja.sub(c,
b,pa),ja.normalize(pa,pa),y.xR(a,c),ia[0]=pa[0],ia[1]=0,ia[2]=pa[2],b=ja.dot(ia,pa),c=Math.acos(b/(ja.length(ia)*ja.length(pa))),b=pa[2]?Math.atan(pa[0]/pa[2]):0<pa[0]?0:Math.PI,0<pa[2]&&0<pa[0]?ma[1]=-(Math.PI+ma[1]):0<pa[2]&&0>pa[0]?ma[1]=-(Math.PI+ma[1]):0>pa[2]&&0>pa[0]?(ma[0]+=Math.PI,b=-(Math.PI-b)):0>pa[2]&&0<pa[0]&&(ma[0]+=Math.PI,b-=Math.PI),y.s4(a,b+Math.PI,-c)}G.W(a);f.$(a)}function h(a,b,c,d){n.lookAt(b,c,q.ic,la);n.invert(la,la);E.fromMat4(la,ea);X.fromMat3(ea,C);X.normalize(C,C);a=R.ge(a.A.D);
R.ti(b,a,C,d)}function l(a,b,d){(b.Ab.ca=g(a,"id0",m,c.G,d.G))||m||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0);b.Ab.tr=g(a,"id1",p,c.G,d.G);b.Ab.tr||p||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0);b.Ab.ta=g(a,"id2",r,c.G,d.G);b.Ab.ta||r||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0);b.state=-1;b.Rc={zS:new Float32Array(3),yS:new Float32Array(3),zG:new Float32Array(3),TI:new Float32Array(3),sS:new Float32Array(3),yG:new Float32Array(3),
En:new Float32Array(8),rk:new Float32Array(8),mv:new Float32Array(8)}}var m=a.P.id0,p=a.P.id1,r=a.P.id2;switch(c.state){case 2:var x=b(a,d,l),A=m?k(a.N.id0,c.G,d.G):x.Ab.ca,t=r?k(a.N.id2,c.G,d.G):x.Ab.ta,w=R.X((p?k(a.N.id1,c.G,d.G):x.Ab.tr).A.D),t=R.X(t.A.D);switch(x.state){case -1:var B=a.P.dur?v(k(a.N.dur,c.G,d.G),0):a.Ga.dur;if(0==B){h(A,w,t,x.Rc.rk);e(A,w,t,x.Rc.rk);d.za=a.Sa;break}a=R.X(A.A.D);ja.copy(a,x.Rc.zS);var D=y.Vi(A);D==y.ed?ja.copy(A.A.Hc,x.Rc.TI):D==y.He||D==y.Xc?(R.copy(A.A.D,x.Rc.En),
h(A,w,t,x.Rc.rk)):ja.copy(A.A.pivot,x.Rc.TI);ja.copy(w,x.Rc.yS);ja.copy(t,x.Rc.sS);x.state=0;B=H.Hi(0,1,1E3*B,function(a){L.Ya()&&(D==y.He||D==y.Xc?R.rr(x.Rc.En,x.Rc.rk,q.sn(a),x.Rc.mv):(x.Rc.yG=ja.lerp(x.Rc.TI,x.Rc.sS,q.sn(a),x.Rc.yG),x.Rc.zG=ja.lerp(x.Rc.zS,x.Rc.yS,q.sn(a),x.Rc.zG)),e(A,x.Rc.zG,x.Rc.yG,x.Rc.mv),1==a&&(x.state=1))});break;case 1:H.Tk(B),x.state=-1,d.za=a.Sa}}},SET_CAMERA_MOVE_STYLE:function(a,c,d){function e(a,b){g.id0||(b.Ab.id0=l.ud(l.le,a.Rd.id0,0))||(u.error("Logic script error: object not found. Node: ",
a.name),a.Yb=!0);g.pvo&&!g.id1&&(b.Ab.id1=l.ud(l.le,a.Rd.id1,0))}var g=a.P;switch(c.state){case 2:var h=b(a,d,e),m=g.id0?k(a.N.id0,c.G,d.G):h.Ab.id0,n=m.A;h.lX={An:n.An,use_panning:n.use_panning,yc:n.yc,ib:n.ib,Vb:n.Vb,he:n.he,ie:n.ie,Re:n.Re,Mj:n.Mj};if(qa.mb(m)){var n=m.A,p=h.lX;y.Yw(m);switch(a.$c.camera_move_style){case 0:n.zb=y.He;break;case 2:n.zb=y.Xc;var r=R.X(n.D);y.C4(m,r,null,p.yc,p.ib);break;case 3:n.zb=y.ed;var r=R.X(n.D),x=pa;a.P.pvo?(h=g.id1?k(a.N.id1,c.G,d.G):h.Ab.id1,x=R.X(h.A.D)):
(x[0]=a.P.pvx?v(k(a.N.pvx,c.G,d.G),0):a.Ga.pvx,x[1]=a.P.pvy?v(k(a.N.pvy,c.G,d.G),0):a.Ga.pvy,x[2]=a.P.pvz?v(k(a.N.pvz,c.G,d.G),0):a.Ga.pvz);y.MR(m,r,x,p.Vb,p.ib,p.he,p.ie,p.Mj);break;case 1:n.zb=y.Ob,r=R.X(n.D),x=pa,a.P.pvo?(h=g.id1?k(a.N.id1,c.G,d.G):h.Ab.id1,x=R.X(h.A.D)):(x[0]=a.P.pvx?v(k(a.N.pvx,c.G,d.G),0):a.Ga.pvx,x[1]=a.P.pvy?v(k(a.N.pvy,c.G,d.G),0):a.Ga.pvy,x[2]=a.P.pvz?v(k(a.N.pvz,c.G,d.G),0):a.Ga.pvz),y.NR(m,r,x,p.yc,p.ib,p.Vb,p.Re,p.use_panning)}ia[0]=a.P.vtr?v(k(a.N.vtr,c.G,d.G),0):a.Ga.vtr;
ia[1]=a.P.vro?v(k(a.N.vro,c.G,d.G),0):a.Ga.vro;ia[2]=a.P.vzo?v(k(a.N.vzo,c.G,d.G),0):a.Ga.vzo;ia[0]=q.pa(ia[0],0,Infinity);ia[1]=q.pa(ia[1],0,Infinity);ia[2]=q.pa(ia[2],0,.99);n.$s=ia[0];n.Zs=ia[1];n.at=ia[2];G.W(m);f.$(m);y.qr(m)}else u.error("Logic script error: object is not a Camera. Node: ",a.name);d.za=a.Sa}},SET_CAMERA_LIMITS:function(a,c,d){function e(a,b){var c;g.id0||(c=b.Ab.id0=l.ud(l.le,a.Rd.id0,0),c||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0))}var g=a.P;
switch(c.state){case 2:var h=b(a,d,e),h=g.id0?k(a.N.id0,c.G,d.G):h.Ab.id0;if(qa.mb(h)){switch(h.A.zb){case y.Ob:if(a.P.dsl){var m=a.P.dslmin?v(k(a.N.dslmin,c.G,d.G),0):a.Ga.dslmin,n=a.P.dslmax?v(k(a.N.dslmax,c.G,d.G),0):a.Ga.dslmax,p={};p.min=Math.max(m,0);p.max=Math.max(n,0);y.jR(h,p)}a.P.vrl&&(m=a.P.vrldown?v(k(a.N.vrldown,c.G,d.G),0):a.Ga.vrldown,n=a.P.vrlup?v(k(a.N.vrlup,c.G,d.G),0):a.Ga.vrlup,p={},p.down=m,p.up=n,p.camera_space="CAMERA"==a.$c.cam_lim_vert_rot_space_type,y.hC(h,p));a.P.hrl&&(m=
a.P.hrlleft?v(k(a.N.hrlleft,c.G,d.G),0):a.Ga.hrlleft,n=a.P.hrlright?v(k(a.N.hrlright,c.G,d.G),0):a.Ga.hrlright,p={},p.left=m,p.right=n,p.camera_space="CAMERA"==a.$c.cam_lim_hor_rot_space_type,y.aC(h,p));a.P.pvl&&(m=a.P.pvlmin?v(k(a.N.pvlmin,c.G,d.G),0):a.Ga.pvlmin,c=a.P.pvlmax?v(k(a.N.pvlmax,c.G,d.G),0):a.Ga.pvlmax,p={},p.min_z=m,p.max_z=c,y.BR(h,p));break;case y.ed:a.P.htl&&(m=a.P.htlmin?v(k(a.N.htlmin,c.G,d.G),0):a.Ga.htlmin,n=a.P.htlmax?v(k(a.N.htlmax,c.G,d.G),0):a.Ga.htlmax,p={},p.min=m,p.max=
n,y.wR(h,p));a.P.vtl&&(m=a.P.vtlmin?v(k(a.N.vtlmin,c.G,d.G),0):a.Ga.vtlmin,n=a.P.vtlmax?v(k(a.N.vtlmax,c.G,d.G),0):a.Ga.vtlmax,p={},p.min=m,p.max=n,y.IR(h,p));a.P.vrl&&(m=a.P.vrldown?v(k(a.N.vrldown,c.G,d.G),0):a.Ga.vrldown,n=a.P.vrlup?v(k(a.N.vrlup,c.G,d.G),0):a.Ga.vrlup,p={},p.down=m,p.up=n,p.camera_space="CAMERA"==a.$c.cam_lim_vert_rot_space_type,y.rA(h,p));a.P.dsl&&(m=a.P.dslmin?v(k(a.N.dslmin,c.G,d.G),0):a.Ga.dslmin,n=a.P.dslmax?v(k(a.N.dslmax,c.G,d.G),0):a.Ga.dslmax,p={},p.min=Math.max(m,0),
p.max=Math.max(n,0),y.qA(h,p));break;case y.Xc:a.P.vrl&&(m=a.P.vrldown?v(k(a.N.vrldown,c.G,d.G),0):a.Ga.vrldown,n=a.P.vrlup?v(k(a.N.vrlup,c.G,d.G),0):a.Ga.vrlup,p={},p.down=m,p.up=n,p.camera_space="CAMERA"==a.$c.cam_lim_vert_rot_space_type,y.hC(h,p)),a.P.hrl&&(m=a.P.hrlleft?v(k(a.N.hrlleft,c.G,d.G),0):a.Ga.hrlleft,n=a.P.hrlright?v(k(a.N.hrlright,c.G,d.G),0):a.Ga.hrlright,p={},p.left=m,p.right=n,p.camera_space="CAMERA"==a.$c.cam_lim_hor_rot_space_type,y.aC(h,p))}G.W(h);f.$(h)}else u.error("Logic script error: object is not a Camera. Node: ",
a.name);d.za=a.Sa}},MOVE_TO:function(a,c,d){function e(a,b){G.mk(a,b);G.W(a);f.$(a)}function h(a,b,d){b.Ab.id0=g(a,"id0",m,c.G,d.G);b.Ab.id0||m||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0);b.Ab.id1=g(a,"id1",n,c.G,d.G);b.Ab.id1||n||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0);b.state=-1;b.Fc={XM:new Float32Array(8),tF:new Float32Array(8),XO:new Float32Array(8)}}var l=a.P,m=l.id0,n=l.id1;switch(c.state){case 2:var p=b(a,d,h),r=l.id0?k(a.N.id0,
c.G,d.G):p.Ab.id0;if(r.ea)switch(R.copy(r.A.D,p.Fc.XM),R.copy((l.id1?k(a.N.id1,c.G,d.G):p.Ab.id1).A.D,p.Fc.tF),p.state){case -1:l=a.P.dur?v(k(a.N.dur,c.G,d.G),0):a.Ga.dur;if(0==l){e(r,p.Fc.tF);d.za=a.Sa;break}p.state=0;var x=H.Hi(0,1,1E3*l,function(a){L.Ya()&&(p.Fc.Qca=R.rr(p.Fc.XM,p.Fc.tF,q.sn(a),p.Fc.XO),e(r,p.Fc.XO),1==a&&(p.state=1))});break;case 1:H.Tk(x),p.state=-1,d.za=a.Sa}else u.error("Logic script error: object '"+r.name+"' must be dynamic. Node: ",a.name),d.za=a.Sa}},TRANSFORM_OBJECT:function(a,
c,d){function e(a,b,c){0==c?G.mk(a,b):G.gC(a,b);G.W(a);f.$(a)}function h(a,b,d){b.aa=g(a,"id0",l,c.G,d.G);b.aa||l||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0);b.state=-1;b.Fc={CC:0,En:new Float32Array(8),rk:new Float32Array(8),mv:new Float32Array(8)}}var l=a.P.id0;switch(c.state){case 2:var m=b(a,d,h),n=l?k(a.N.id0,c.G,d.G):m.aa;switch(m.state){case -1:ia[0]=a.P.trx?v(k(a.N.trx,c.G,d.G),0):a.Ga.trx;ia[1]=a.P["try"]?v(k(a.N["try"],c.G,d.G),0):a.Ga["try"];ia[2]=a.P.trz?
v(k(a.N.trz,c.G,d.G),0):a.Ga.trz;pa[0]=a.P.rox?v(k(a.N.rox,c.G,d.G),0)*Math.PI/180:a.Ga.rox;pa[1]=a.P.roy?v(k(a.N.roy,c.G,d.G),0)*Math.PI/180:a.Ga.roy;pa[2]=a.P.roz?v(k(a.N.roz,c.G,d.G),0)*Math.PI/180:a.Ga.roz;var p=a.P.sc?k(a.N.sc,c.G,d.G):a.Ga.sc;q.fl(pa,C);R.ti(ia,p,C,m.Fc.rk);m.Fc.CC=a.$c.space_type;switch(m.Fc.CC){case 0:G.Km(n,m.Fc.En);break;case 1:G.fv(n,m.Fc.En);break;case 2:G.fv(n,m.Fc.En),R.multiply(m.Fc.En,m.Fc.rk,m.Fc.rk)}p=a.P.dur?v(k(a.N.dur,c.G,d.G),0):a.Ga.dur;if(0==p){e(n,m.Fc.rk,
m.Fc.CC);d.za=a.Sa;break}m.state=0;p=H.Hi(0,1,1E3*p,function(a){L.Ya()&&(R.rr(m.Fc.En,m.Fc.rk,q.sn(a),m.Fc.mv),e(n,m.Fc.mv,m.Fc.CC),1==a&&(m.state=1))});break;case 1:H.Tk(p),m.state=-1,d.za=a.Sa}}},SPEAKER_PLAY:function(a,c,e){function f(a,b,d){b.aa=g(a,"id0",h,c.G,d.G);b.aa||h||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0)}var h=a.P.id0;switch(c.state){case 1:void 0==a.P.not_wait&&(a.P.not_wait=!0);break;case 2:var l=b(a,e,f);l.aa=h?k(a.N.id0,c.G,e.G):l.aa;d.EG(l.aa)||
0!=l.state||(l.state=1);switch(l.state){case -1:for(var m in c.zg){var n=c.zg[m].Sb.za;-1!=n&&(n=c.zg[m].ia[n],"SPEAKER_PLAY"==n.type&&n!=a&&0==l.state&&n.aa==a.aa&&(n.state=1))}a.P.not_wait||(e.di=!0);d.AB(l.aa);l.state=0;break;case 0:a.P.not_wait&&(e.za=a.Sa,l.state=-1);break;case 1:a.P.not_wait||(e.di=!1);e.za=a.Sa;l.state=-1;break;default:q.K("Unknown state of "+a.name),l.state=-1}}},SPEAKER_STOP:function(a,c,e){function f(a,b,d){b.aa=g(a,"id0",h,c.G,d.G);b.aa||h||(u.error("Logic script error: object not found. Node: ",
a.name),a.Yb=!0)}var h=a.P.id0;switch(c.state){case 2:var l=b(a,e,f);d.stop(h?k(a.N.id0,c.G,e.G):l.aa);e.za=a.Sa}},STOP_ANIM:function(a,c,d){function e(a,b,d){b.aa=h?l.aA(a.cN[0],0):g(a,"id0",f,c.G,d.G);b.aa||f||(u.error("Logic script error: object not found. Node: ",a.name),a.Yb=!0)}var f=a.P.id0,h=a.P.env;switch(c.state){case 2:var m=b(a,d,e);m.aa=f?k(a.N.id0,c.G,d.G):m.aa;p.stop(m.aa,p.It);a.P.rst&&p.a4(m.aa,p.It);d.za=a.Sa}},STOP_TIMELINE:function(a,b,c,d){switch(b.state){case 2:a.P.rst&&D.zR(d),
D.gS(),c.za=a.Sa}},CONSOLE_PRINT:function(a,b,c){switch(b.state){case 2:var d=0,e="{",f;for(f in a.N){0<d&&(e+=", ");var g=k(a.N[f],b.G,c.G),e=e+('"'+a.N[f][1]+'": ');try{e+=JSON.stringify(g)}catch(za){e=g?e+('{"name": "'+g.name+'", "type": "'+g.type+'"}'):e+"Object"}++d}u.log(a.$c.msg,e+"}");c.za=a.Sa}},STRING:function(a,b,c){switch(b.state){case 2:var d=a.P.id0?v(k(a.N.id0,b.G,c.G),1):a.Ul.id0,e=a.P.id1?v(k(a.N.id1,b.G,c.G),1):a.Ul.id1,f=0;switch(a.$c.string_operation){case 0:f=d+e;break;case 1:f=
d.indexOf(e);break;case 2:f=d.replace(e,a.P.id2?v(k(a.N.id2,b.G,c.G),1):a.Ul.id2);break;case 3:var g=a.N,f=d.substring(0,d.indexOf(e));h(g.dst1,b.G,c.G,d.substring(d.indexOf(e)+1,d.length));""==k(g.dst,b.G,c.G)&&(f=k(g.dst1,b.G,c.G),h(g.dst1,b.G,c.G,""));break;case 4:switch(a.$c.condition){case 5:f=d==e?1:0;break;case 4:f=d!=e?1:0;break;case 3:f=d<e?1:0;break;case 2:f=d>e?1:0;break;case 1:f=d<=e?1:0;break;case 0:f=d>=e?1:0}}h(a.N.dst,b.G,c.G,f);c.za=a.Sa}},GET_TIMELINE:function(a,b,c,d){switch(b.state){case 2:d=
a.P.nla?v(D.Mz(d),0):v(H.Mz(d),0),h(a.N.vd,b.G,c.G,d),c.za=a.Sa}},JSON:function(a,b,c){function d(a,b,c,d){for(var e=0;e<b.length;e++){for(var f=b[e].split("."),g=a,h=c[e],k=0;k<f.length&&(g=g[f[k]],void 0!==g&&null!==g);k++);g=P(g);d[h]=g}}function e(a,b,c,d){d||(d={});for(var e=0;e<b.length;e++){var f=b[e].split("."),g=d,h=c[e];if(h in a){for(var k=0;k<f.length-1;k++)void 0===g[f[k]]&&(g[f[k]]=isNaN(f[k+1])?{}:[]),g=g[f[k]];g[f[f.length-1]]=P(a[h])}}}switch(b.state){case 2:switch(a.$c.json_operation){case "PARSE":try{var f=
JSON.parse(v(k(a.N.jsn,b.G,c.G),1));d(f,a.G2,a.H2,c.G)}catch(aa){u.error("logic script error: non valid JSON string")}break;case "ENCODE":f={},e(c.G,a.RZ,a.SZ,f),f=v(JSON.stringify(f),1),h(a.N.jsn,b.G,c.G,f)}c.za=a.Sa}},JS_CALLBACK:function(a,b,c){switch(b.state){case 2:for(var d=a.P.cb?v(k(a.N.cb,b.G,c.G),1):a.Ul.cb,e=[],f=0,g="id"+f,m=a.$c.js_cb_params;g in m;)g=0==m[g]?l.ud(l.le,a.Rd[g],0):k(a.N[g],b.G,c.G),e.push(g),f++,g="id"+f;m=[];f=0;for(g="out"+f;g in a.N;)g=k(a.N[g],b.G,c.G),m.push(g),f++,
g="out"+f;f=1;if(d in xa){if(f=!xa[d](e,m))for(d=0;d<m.length;d++)g="out"+d,g in a.N&&h(a.N[g],b.G,c.G,P(m[d]))}else u.error("logic script error: no custom callback with id "+d);f&&(c.za=a.Sa)}},EMPTY:O,DATE_TIME:function(a,b,c){switch(b.state){case 2:var d=new Date,e,f,g,k,l;"L"==a.$c.time_type?(e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),k=d.getHours(),l=d.getMinutes(),d=d.getSeconds()):(e=d.getUTCFullYear(),f=d.getUTCMonth(),g=d.getUTCDate(),k=d.getUTCHours(),l=d.getUTCMinutes(),d=d.getUTCSeconds());
a.P.y&&h(a.N.y,b.G,c.G,e);a.P.M&&h(a.N.M,b.G,c.G,f);a.P.d&&h(a.N.d,b.G,c.G,g);a.P.h&&h(a.N.h,b.G,c.G,k);a.P.m&&h(a.N.m,b.G,c.G,l);a.P.s&&h(a.N.s,b.G,c.G,d);c.za=a.Sa}},ELAPSED:function(a,b,c,d,e){switch(b.state){case 2:h(a.N.s,b.G,c.G,e),c.za=a.Sa}},CALL_FUNC:function(a,b,c){switch(b.state){case 1:c=a.HP.id0;for(var d=a.Xm.id0,e=0;e<b.Xm.length;e++){var f=b.Xm[e];if(f.id[0][0]==c[0]&&f.id[0][1]==c[1]&&f.id[1]==d){a.MF=e;break}}break;case 2:d={};c.uD={};for(e in a.N){var f=a.N[e][1],g=a.Ul[e];d[g]=
a.N[e][0]?b.G[f]:c.G[f];e.startsWith("out")&&(c.uD[f]=g)}c.po.push({FL:a,G:d,SA:b.Xm[a.MF]});c.G=d;c.kJ=!0;c.za=b.Xm[a.MF].Zu.ia[0].Sa}},DEF_FUNC:O,SWITCH:function(a,b,c){switch(b.state){case 1:b=Object.keys(a.N);for(var d in b)b[d].startsWith("id")||b.splice(d,1);a.PA=b;break;case 2:var e=k(a.N.v,b.G,c.G);for(d in a.PA)if(e==k(a.N[a.PA[d]],b.G,c.G)){c.za=a.AP[a.PA[d]];return}c.za=a.Sa}}},da=[],xa={},ca={};a.c1=function(a,b){var c={Le:b,YQ:a.name,state:0,Nr:null,wb:a,mF:null,zg:[],Xm:[],tw:[],G:{},
uD:{}};a.p9=c;B(a,c)};a.update=function(a,b){var c=D.u0();if(!(0>=c))for(var d=0;d<da.length;d++)for(var e=d,f=a,g=b,h=c,k=da[e],l=0;l<da[e].zg.length;l++){k.mF=da[e].zg[l];a:{var m=da[e].zg[l],n=k,p=f,q=g,u=h;m.Sb.kJ=!1;var v=m.Sb.po,r=1>=v.length?m.ia:v[v.length-1].SA.Zu.ia;if(r.length){for(var x=0;x<r.length;x++)r[x].EB=!1;for(x=0;x<r.length;x++){if(0<=m.Sb.za)var y=r[m.Sb.za];else{if(1<m.Sb.po.length){p=m.Sb.po.pop().FL;v=v[v.length-1];m.Sb.za=p.Sa;p=m.Sb.G;m.Sb.G=v.G;for(var C in m.Sb.uD)v=m.Sb.uD[C],
void 0===m.Sb.G[C]?n.G[C]=p[v]:m.Sb.G[C]=p[v]}break a}if(y.EB)break a;if(y.Yb){if("ENTRYPOINT"==y.type)break a;m.Sb.za=y.Sa;y.EB=!0}else if(y.GH(y,n,m.Sb,p,q,u),y.EB=!0,m.Sb.kJ)break a}v.splice(0,v.length)}}}};a.w9=function(a,b){xa[a]=b};a.Gda=function(a){delete xa[a]};a.Wda=function(a,b){for(var c=0;c<da.length;c++)if(da[c].YQ==a){for(var c=da[c],d=0;d<c.zg.length;d++){var e=c.zg[d].ia[0];if(e.name==b){e.P.js&&(e.Yb=!1);c.zg[d].Sb.za=0;break}}break}};a.Ja=function(){da.length=0;xa={};ca={}}};b4w.module.__nla=function(a,w){function t(a,b){for(var c=e.H_(),g=[],h=0,k=0;k<a.length;k++){var l=a[k];""!=l.Ot?l=y.Pd("uuid",l.Ot,c):(l=l.Zg,l=y.Pd("name",l,c)||y.Pd("name",l+"_B4W_BAKED",c));if(l){var l=l.fcurves,m=[],f;for(f in l)m.push(f);g.push(m)}}for(k=0;k<g.length;k++){c=!1;for(f=0;f<k;f++)if(y.BW(g[k],g[f])){a[k].Qc=a[f].Qc;c=!0;break}c||(a[k].Qc=b+h++)}return h}function c(){return{type:"CLIP",Ia:0,vb:0,Kl:!1,paused:!1,Zg:"",Ot:"",Qc:0,pp:null,om:0,$n:0,hN:0,gN:0,cT:!1,scale:1,repeat:1,
OK:0}}function b(a,c,e){if(a.animation_data){var g=a.animation_data.nla_tracks;if(g)for(var h=0;h<g.length;h++)g[h].pp=e,c.push(g[h])}a=a.nodes;for(h=0;h<a.length;h++)if(g=a[h],g.node_group){var k=g.node_group.node_tree;if(k){var l=e.slice();l.push(g.name);b(k,c,l)}}}function k(a,b){var c=Math.round(a)-b.Ia;b.am&&(c%=b.Hm,0>c&&(c+=b.Hm));return b.tc+c}function h(a,b){var c=(b-l)*I.fe()+a.tc;c>a.Ia?(c-=a.Ia,a.ce&&(c%=a.vb-a.Ia+1),c+=a.Ia):c=a.Ia;return c}function O(a,b){a=y.pa(a,b.Ia,b.vb);var c=a==
b.vb?b.OK:b.om+(a-b.Ia)/b.scale%(b.$n-b.om);b.cT&&(c=b.$n-c+b.om);return c}function m(a,b){for(var e=[],g=0;g<a.length;g++){var h=a[g],k=h.strips;if(k)for(var l=0;l<k.length;l++){var m=k[l],f=c();f.type=m.type;f.Ia=m.frame_start;f.vb=m.frame_end;f.Qc=b;f.om=m.action_frame_start;f.$n=m.action_frame_end;f.cT=m.use_reverse;f.scale=m.scale;f.repeat=m.repeat;m.action&&(f.Zg=m.action.name,f.Ot=m.action.uuid,f.pp=h.pp);e.push(f)}}return e}function x(a){return("SPEAKER"==a.type||"LAMP"==a.type)&&a.data.animation_data&&
a.data.animation_data.nla_tracks.length?!0:!1}function r(a){if("MESH"!=a.type||!a.data)return!1;a=a.data.materials;if(!a)return!1;for(var b=0;b<a.length;b++){var c=a[b],e=c.te;if(c=c.Ch&&e)a:{if(e.animation_data&&(c=e.animation_data.nla_tracks)&&c.length){c=!0;break a}e=e.nodes;for(c=0;c<e.length;c++);c=!1}if(c)return!0}return!1}function g(a,b){var c=N.R();if(c.Ta){var e=h(c.Ta,b);c.Ta.tc-=e-a;c.Ta.er=!0}}var e=w("__animation"),B=w("__objects"),v=w("__obj_util"),P=w("__print"),N=w("__scenes"),M=w("__sfx"),
p=w("__textures"),I=w("__time"),y=w("__util"),D=[],l=-1;a.Os=function(a,e){for(var g,h=null,k=e.T.length-1;0<=k&&(g=e.T[k],!g.wb.b4w_use_nla||(h=g,!g.wb.KK));k--);if(g=h){g.hQ=!0;h=0;if((k=a.animation_data)&&k.nla_tracks.length){var l=k.nla_tracks;if(v.sr(e)||v.mb(e)||v.pf(e)||v.ur(e)||v.pv(e)||v.vr(e)||v.Um(e)||v.sl(e))l=m(l,h),l.length&&(e.Qf=e.Qf.concat(l),h++)}x(a)&&(l=a.data.animation_data.nla_tracks,l=m(l,h),l.length&&(e.Qf=e.Qf.concat(l),h++));if(v.pf(e))for(var p=e.Ec,k=0;k<p.length;k++){var n=
p[k];n.Ch&&n.te&&(l=[],b(n.te,l,[n.name]),l=m(l,h),l.length&&(h+=t(l,h),e.Qf=e.Qf.concat(l)))}if(v.sl(e))a.use_nodes&&a.node_tree&&(l=[],b(a.node_tree,l,[a.name]),l=m(l,h),l.length&&(t(l,h),e.Qf=e.Qf.concat(l)));else{for(k=0;k<a.particle_systems.length;k++)l=a.particle_systems[k],p=l.settings,"EMITTER"==p.type&&p.b4w_allow_nla&&(p=c(),p.type="CLIP",p.Ia=g.wb.frame_start,p.vb=g.wb.frame_end+1,p.Zg=l.name,p.Qc=h,p.om=p.Ia,p.$n=p.vb,e.Qf.push(p),h++);g=h+1;for(k=0;k<e.Gd.length;k++)l=e.Gd[k],l.aW&&(h=
g,p=c(),p.type="CLIP",p.Ia=l.Ia,p.vb=l.vb,p.Zg=l.name,p.Qc=h,p.om=p.Ia,p.$n=p.vb,e.Qf.push(p))}}};a.j6=function(a,b,e){a.Ta||(a.Ta={Ia:a.frame_start,vb:a.frame_end,tc:0,wv:-1,Xv:a.frame_end,Yv:a.frame_start,Us:null,ce:b,Ab:[],xa:[],YQ:a.name,Vm:!1,er:!1,YH:!0},D.push(a.Ta));b=a.Ta;for(var g=B.mO(a,"ALL",e),h=0;h<g.length;h++){var k=g[h];if(k.Qf.length){b.Ab[e]||(b.Ab[e]=[]);for(var l=0;l<k.T.length;l++){var m=k.T[l];m.wb==a&&m.hQ&&b.Ab[e].push(k)}for(var l=k.Qf,m=b,f=k.name,p=0;p<l.length;p++){var d=
l[p];m.Ia>d.vb||m.vb<d.Ia?(P.warn("NLA: Strip is out of scene range: "+(f+" ["+d.Ia+":"+d.vb+"]")),l.splice(p,1),p--):d.Zg||"CLIP"!=d.type||(P.warn('NLA: no action in strip for object "'+f+'".'),l.splice(p,1),p--)}k=k.Qf;l=b;for(m=0;m<k.length;m++){for(var f=k[m],p=l.Ia,d=l.vb+1,v=0;v<k.length;v++){var u=k[v];f.Qc==u.Qc&&(u.vb<=f.Ia&&(p=f.Ia),u.Ia>=f.vb&&(d=Math.min(d,u.Ia)))}f.hN=p;f.gN=d;f.OK=f.repeat%1?f.om+f.repeat%1*(f.$n-f.om):f.$n}}}a=a.J.dt;for(h=0;h<a.length;h++)g=a[h].J,g.Jn&&(g.tb||g.je)&&
g.ft==e&&(k=c(),k.type="VIDEO",g.am?(k.Ia=0,k.vb=b.vb):(k.Ia=y.pa(g.Ia,0,b.vb),k.vb=y.pa(g.Ia+g.Hm,0,b.vb)),k.Zg=a[h].name,b.xa.push(g))};a.X2=function(){for(var a=0;a<D.length;a++)for(var b=D[a],c=0;c<b.Ab.length;c++){var g=b.Ab[c];if(g)for(a=0;a<g.length;a++)for(var h=g[a],k=h.Qf,l=0;l<k.length;l++){var m=k[l];e.Y0(h,m.pp,m.dd,m.Zg,m.Qc)}}};a.start=function(){l=0};a.u0=function(){return l};a.qba=function(a){return a.Ta?a.Ta.tc:null};a.eea=function(a,b){return a.Ta?(a.Ta.tc=b,!0):!1};a.update=function(a,
b){if(!(0>l)){0==l&&(l=a);for(var c=0;c<D.length;c++){var m=D[c];m.Vm&&(m.tc-=I.fe()*b);var v=h(m,a);if((!m.Vm||m.er)&&v>=m.Xv)if(m.ce){var v=m,u=a;v.Us&&v.Us();g(v.Yv,u);v.YH=!0;v=h(v,u)}else{var u=m,r=v;u.Vm=!0;u.tc-=r-u.Xv;u.Us&&u.Us()}if(!m.Vm||m.er){for(var u=m,r=v,n=0;n<u.Ab.length;n++){var f=u.Ab[n];if(f)for(var x=0;x<f.length;x++){for(var d=f[x],t=d.Qf,w=0;w<t.length;w++){var B=t[w];"SOUND"==B.type&&r<u.wv-1E-6&&(B.Kl=!1)}for(w=0;w<t.length;w++)switch(B=t[w],B.type){case "CLIP":if(B.hN<=r&&
r<B.gN&&!B.Kl){var n=d,q=B,N=q.pp;""!=q.Ot?e.wW(n,N,q.Ot,q.Qc):e.apply(n,N,q.Zg,q.Qc);e.gI(n,e.BT,q.Qc);N=O(q.Ia,q);e.$B(n,N,q.Qc);for(n=0;n<t.length;n++)t[n]!=B&&t[n].Qc==B.Qc&&(t[n].Kl=!1);B.Kl=!0}B.Kl&&(q=d,N=O(r,B),1E-6<Math.abs(N-e.NN(q,B.Qc))&&e.$B(q,N,B.Qc));break;case "SOUND":if((r<u.wv-1E-6||u.wv<B.Ia)&&B.Ia<=r&&r<B.vb&&!B.Kl){var q=d,L=B,N=(L.Ia-r)/I.fe(),L=(L.vb-L.Ia)/I.fe();M.play(q,N,L);B.Kl=!0}u.wv<B.vb&&B.vb<=r&&B.Kl&&(B.Kl=!1)}}}u=a;r=m;f=v;for(x=0;x<r.xa.length;x++)if(d=r.xa[x],d.tb||
d.je){t=p.nT(d);w=d;B=y.pa(k(f,w),w.tc,w.tc+p.oT(w)-1);w.je&&(B=p.C6(w,B),B==w.kw&&B--);w=B;B=p.pT(d);q=n=!1;if(r.er||r.YH)q=!0;r.Vm||(N=k(f,d),N=d.tc<=N&&N<=d.tc+p.oT(d),L=p.qT(d),d.am&&w==B&&(q=!0),L||t==w||(q=!0),N&&!L?p.rQ(d):N&&L?n=!0:!N&&L&&(d.tb&&t<w?n=!0:p.yH(d)));q?(p.c4(d.Tw,w,d.ft),d.je&&(d.nn=p.TB(d,u))):n&&p.rT(d)&&(d.tb?p.US(d):(t=p.TB(d,u),t!=d.nn&&(d.Ml=w,p.TS(d)),d.nn=t))}m.wv=v}m.er=!1;m.YH=!1}}};a.Ja=function(a){if(0==a)D.length=0,l=-1;else for(var b=0;b<D.length;b++)D[b].Ab[a]=
null};a.zL=function(a){var b=a.animation_data;return b&&b.nla_tracks.length||x(a)||r(a)?!0:!1};a.$B=g;a.Mz=function(a){var b=N.R();return b.Ta?h(b.Ta,a):-1};a.gS=function(){var a=N.R();if(a.Ta){a.Ta.Vm=!0;for(var a=a.Ta.xa,b=0;b<a.length;b++)p.yH(a[b])}};a.T2=function(){var a=N.R();a.Ta&&(a.Ta.Vm=!1,a.Ta.Us=null)};a.rba=function(){var a=N.R();return a.Ta?a.Ta.Ia:-1};a.WN=function(){var a=N.R();return a.Ta?a.Ta.vb:-1};a.qv=function(){var a=N.R();return a.Ta?!a.Ta.Vm:!1};a.g$=function(){var a=N.R();
return a.Ta?a.b4w_use_nla:!1};a.f$=function(){var a=N.R();return a.Ta?0<a.b4w_logic_nodes.length:!1};a.uea=function(a,b){var c=N.R();if(c.Ta)c.Ta.Yv=a,c.Ta.Xv=b;else return!1};a.rI=function(a){var b=N.R();b.Ta&&(b.Ta.Xv=a)};a.n4=function(a){var b=N.R();b.Ta&&(b.Ta.Yv=a)};a.Lda=function(){var a=N.R();if(a.Ta)a=a.Ta,a.Yv=a.Ia,a.Xv=a.vb;else return!1};a.bea=function(a){var b=N.R();if(b.Ta)b.Ta.ce=a;else return!1};a.m$=function(){var a=N.R();a.Ta&&(a.Ta.Us=null)};a.zR=function(a){var b=N.R().Ta;b&&(b.tc=
-(a-l)*I.fe()+b.Yv,b.er=!0)};a.WN=function(){var a=N.R().Ta;return a?a.vb:null}};b4w.module.__controls=function(a,w){function t(a,b){b||(b=B.re());return{type:a,value:0,ja:null,element:b,gb:!1,key:0,Ub:"",Bj:!1,UE:null,TE:function(){},SE:null,jM:function(){},nk:null,from:new Float32Array(3),to:new Float32Array(3),bP:!1,tA:!1,Zv:0,HQ:function(){},axis:"",Bh:0,Ls:new Float32Array(3),GB:new Float32Array(4),threshold:0,BQ:new Float32Array(4),ey:0,dy:0,TQ:0,fy:0,uh:0,repeat:!1,fN:!1,Ti:0,position:l.create(),orientation:p.create(),callback:function(){}}}function c(a){function b(){return{wm:new Float32Array(2),
Br:!0,aa:null,identifier:-1,qk:0}}a||(a=B.re());for(var c=0;c<E.length;c++){var d=E[c];if(a==d.element)return d}d={element:a,rv:!0,Ag:0,FG:!0,cB:0,dB:0,np:0,op:0,Qv:0,Rv:0,kj:new Float32Array(2),xf:new Float32Array(2),lj:new Float32Array(2),Zf:new Float32Array(2),eD:0,cJ:0,wS:0,sg:new Uint8Array(256),FD:0,kG:null,ck:b(),Yl:Array(10),GG:!1,DO:p.create(),hA:0,gA:0,fA:0,mG:0,lG:0,eA:Infinity,sH:null,rH:null,gH:null,cH:null,eH:null,aJ:null,$I:null,fH:null,dH:null,EH:null,bda:null,bJ:null,ZI:null,YI:null,
Hl:{}};for(c=0;10>c;++c)d.Yl[c]=b();d.sH=function(a){d.GG||(v.H0(a,d.DO),d.GG=!0)};d.rH=function(a){a=l.copy(a,X);d.fA=a[0];d.gA=a[1];d.hA=a[2];Infinity==d.eA&&(d.eA=a[0],d.lG=a[1],d.mG=a[2])};d.gH=function(a){d.FD+=a*u.l2};d.cH=function(a){var b=v.ba(v.Wc,d.element),b=v.Zh(b,v.uj,n);d.cB=b[0];d.dB=b[1];d.np=b[0];d.op=b[1];if(3==d.Ag||0==d.Ag)d.Ag=1;d.which=a};d.eH=function(){var a=v.ba(v.Wc,d.element),a=v.Zh(a,v.uj,n),a=B.wy(a[0],a[1],n);d.ck.Br=!1;d.ck.wm[0]=a[0];d.ck.wm[1]=a[1]};d.aJ=function(a){for(var b=
0;b<a.length;++b){for(var c=a[b],e=null,f=null,g=0;g<d.Yl.length;g++){var h=d.Yl[g],k=3==h.qk||0==h.qk;if(h.identifier==c.identifier){k&&(f=h);break}else!e&&k&&(e=h,e.identifier=c.identifier)}if(c=f||e)e=B.wy(a[b].clientX,a[b].clientY,n),c.Br=!1,c.qk=1,c.wm[0]=e[0],c.wm[1]=e[1]}};d.$I=function(a){for(var b=0;b<d.Yl.length;++b){for(var c=d.Yl[b],e=!1,f=0;f<a.length;++f)if(a[f].identifier==c.identifier){e=!0;break}e||(0!=c.qk&&(c.qk=3),c.aa=null)}};d.fH=function(a){var b=v.ba(v.Wc,d.element),b=v.Zh(b,
v.uj,n);d.cB=b[0];d.dB=b[1];d.np=b[0];d.op=b[1];0!=d.Ag&&(d.Ag=3);d.which=a};d.dH=function(a){L.sA&&0==d.Ag||(d.np=a[0],d.op=a[1])};d.EH=function(a){d.Qv+=a[0];d.Rv+=a[1]};d.qP=function(a){2!=d.sg[a]&&(d.sg[a]=1,d.rv=!1)};d.sP=function(){for(var a=0;a<d.sg.length;a++)0!=d.sg[a]&&(d.sg[a]=3,d.rv=!1)};d.tP=function(a){d.rv=!1;d.sg[a]=3};d.bJ=function(a){d.FG=!1;if(1==a.length)d.kj[0]=a[0].clientX,d.kj[1]=-1,d.lj[0]=a[0].clientY,d.lj[1]=-1;else if(1<a.length){d.eD=d.cJ=r(a);d.kj[0]=a[0].clientX;d.kj[1]=
a[1].clientX;d.lj[0]=a[0].clientY;d.lj[1]=a[1].clientY;var b=a[0];a=a[1];d.wS=Math.atan2(b.clientY-a.clientY,b.clientX-a.clientX)}d.xf.set(d.kj);d.Zf.set(d.lj)};d.ZI=function(a){1===a.length?(d.xf[0]=a[0].clientX,d.xf[1]=-1,d.Zf[0]=a[0].clientY,d.Zf[1]=-1):1<a.length&&(d.xf[0]=a[0].clientX,d.xf[1]=a[1].clientX,d.Zf[0]=a[0].clientY,d.Zf[1]=a[1].clientY,d.eD=r(a))};d.YI=function(a){0==a.length&&(d.FG=!0)};E.push(d);return d}function b(a,b){if(b in a.Hl&&0<a.Hl[b])a.Hl[b]+=1;else switch(a.Hl[b]=1,b){case "orientation_quat":var c=
v.ba(v.sj);c&&v.Id(c,v.tq,a.sH);break;case "orientation_angles":(c=v.ba(v.sj))&&v.Id(c,v.tq,a.rH);break;case "mouse_wheel":(c=v.ba(v.Wc,a.element))&&v.Id(c,v.Dt,a.gH);break;case "mouse_down_which":(c=v.ba(v.Wc,a.element))&&v.Id(c,v.lm,a.cH);break;case "mouse_select":(c=v.ba(v.Wc,a.element))&&v.Id(c,v.lm,a.eH);break;case "touch_select":if(c=v.ba(v.Tg,a.element))v.Id(c,v.nm,a.aJ),v.Id(c,v.Wn,a.$I);break;case "mouse_up_which":(c=v.ba(v.Wc,a.element))&&v.Id(c,v.Ct,a.fH);break;case "mouse_location":(c=
v.ba(v.Wc,a.element))&&v.Id(c,v.uj,a.dH);break;case "mouse_pointerlock":(c=v.ba(v.Wc,a.element))&&v.Id(c,v.ZJ,a.EH);break;case "keyboard_downed_keys":if(c=v.ba(v.ot,a.element))v.Id(c,v.At,a.qP),v.Id(c,v.QJ,a.sP),v.Id(c,v.Bt,a.tP);break;case "touch_start":(c=v.ba(v.Tg,a.element))&&v.Id(c,v.nm,a.bJ);break;case "touch_move":(c=v.ba(v.Tg,a.element))&&v.Id(c,v.Kt,a.ZI);break;case "touch_end":(c=v.ba(v.Tg,a.element))&&v.Id(c,v.Wn,a.YI)}}function k(a,b){if(b in a.Hl&&0<a.Hl[b]&&(--a.Hl[b],!a.Hl[b]))switch(b){case "orientation_quat":var c=
v.ba(v.sj);c&&v.oe(c,v.sx,a.sH);break;case "orientation_angles":(c=v.ba(v.sj))&&v.oe(c,v.tq,a.rH);break;case "mouse_wheel":(c=v.ba(v.Wc,a.element))&&v.oe(c,v.Dt,a.gH);break;case "mouse_down_which":(c=v.ba(v.Wc,a.element))&&v.oe(c,v.lm,a.cH);break;case "mouse_select":(c=v.ba(v.Wc,a.element))&&v.oe(c,v.lm,a.eH);break;case "touch_select":if(c=v.ba(v.Tg,a.element))v.oe(c,v.nm,a.aJ),v.oe(c,v.Wn,a.$I);break;case "mouse_up_which":(c=v.ba(v.Wc,a.element))&&v.oe(c,v.Ct,a.fH);break;case "mouse_location":(c=
v.ba(v.Wc,a.element))&&v.oe(c,v.uj,a.dH);break;case "mouse_pointerlock":(c=v.ba(v.Wc,a.element))&&v.oe(c,v.ZJ,a.EH);break;case "keyboard_downed_keys":if(c=v.ba(v.ot,a.element))v.oe(c,v.At,a.qP),v.oe(c,v.QJ,a.sP),v.oe(c,v.Bt,a.tP);break;case "touch_start":(c=v.ba(v.Tg,a.element))&&v.oe(c,v.nm,a.bJ);break;case "touch_move":(c=v.ba(v.Tg,a.element))&&v.oe(c,v.Kt,a.ZI);break;case "touch_end":(c=v.ba(v.Tg,a.element))&&v.oe(c,v.Wn,a.YI)}}function h(a,b){a.value=Number(b)}function O(a){for(var b=a.Ll,c=a.L3,
d=0;d<b.length;d++)c[d]=b[d].value;return a.W1(c)}function m(a,b){a=a||U;var c=a.jj;if(c){var d=a.Ep;if(b){var e=c[b];if(e){for(var f=e.Ll,g=0;g<f.length;g++){var h=f[g],k;k=K.indexOf(h);k=-1<k?A[k]:[];1==k.length?(x(h),h=K.indexOf(h),-1<h?(K.splice(h,1),A.splice(h,1)):D.K("Sensors cache is corrupted")):1<k.length&&k.splice(k.indexOf(e),1)}delete c[b];g=d.indexOf(e);-1<g?d.splice(g,1):D.K("Incorrect manifolds array");Object.getOwnPropertyNames(c).length||(c=F.indexOf(a),-1<c?F.splice(c,1):N.error("Wrong object"))}}else{d=
[];for(g in c)d.push(g);for(g=0;g<d.length;g++)m(a,d[g])}H=!0}}function x(a){switch(a.type){case 90:M.OH(a.UE,a.Ub,a.TE);a.gb=!0;break;case 100:M.PE(a.SE);a.gb=!0;break;case 110:M.PH(a.Zv);a.gb=!0;break;case 140:a.gb=!0;break;case 20:var b=c(a.element);k(b,"keyboard_downed_keys");a.gb=!0;break;case 30:b=c(a.element);k(b,"mouse_wheel");a.gb=!0;break;case 40:b=c(a.element);k(b,"mouse_down_which");k(b,"mouse_up_which");k(b,"mouse_location");a.gb=!0;break;case 280:b=c(a.element);k(b,"mouse_pointerlock");
a.gb=!0;break;case 50:b=c(a.element);k(b,"mouse_down_which");k(b,"mouse_up_which");a.gb=!0;break;case 60:b=c(a.element);k(b,"touch_start");k(b,"touch_move");k(b,"touch_end");a.gb=!0;break;case 70:b=c(a.element);k(b,"touch_start");k(b,"touch_move");a.gb=!0;break;case 75:b=c(a.element);k(b,"touch_start");k(b,"touch_move");a.gb=!0;break;case 80:b=c(a.element);k(b,"touch_start");k(b,"touch_end");a.gb=!0;break;case 170:b=c(a.element);k(b,"mouse_select");k(b,"touch_select");k(b,"touch_start");k(b,"touch_end");
k(b,"mouse_down_which");k(b,"mouse_up_which");a.gb=!0;break;case 180:case 190:b=c(a.element);k(b,"orientation_angles");a.gb=!0;break;case 200:b=c(a.element);k(b,"orientation_quat");a.gb=!0;break;case 210:case 220:a.gb=!0}}function r(a){var b=a[0],c=a[1];a=b.clientX-c.clientX;b=b.clientY-c.clientY;return Math.sqrt(a*a+b*b)}function g(a){return 0==a?v.ba(v.dx):1==a?v.ba(v.RD):2==a?v.ba(v.SD):v.ba(v.TD)}var e=w("__config"),B=w("__container"),v=w("__input"),P=w("__objects"),N=w("__print"),M=w("__physics"),
p=w("__quat"),I=w("__time"),y=w("__tsr"),D=w("__util"),l=w("__vec3"),u=e.controls,L=e.L,F=[],U={},K=[],A=[],E=[],n=new Float32Array(2),f=new Float32Array(2),X=l.create(),d=p.create(),H=!1,G=0;a.Sg=10;a.ob=20;a.cx=30;a.Ai=40;a.Zp=50;a.QD=60;a.Fx=0;a.Ex=1;a.Dx=2;a.dE=3;var R=1;a.update=function(b,e){for(var k=0;k<E.length;k++){var m=E[k];m.ck.Br||(m.ck.aa=P.wp(m.ck.wm[0],m.ck.wm[1]),m.ck.Br=!0,m.kG=m.ck.aa);for(var q=0;10>q;++q){var r=m.Yl[q];r.Br||(r.aa=P.wp(r.wm[0],r.wm[1]),r.Br=!0,m.kG=r.aa)}}for(k=
0;k<K.length;k++)if(m=K[k],r=b,q=e)switch(m.type){case 120:var u=m.nk,x=y.Wb(u.A.D,X),u=y.Fb(u.A.D,d),t=l.dist(m.Ls,x),w=m.BQ;p.invert(m.GB,w);p.multiply(u,w,w);p.normalize(w,w);w=Math.abs(2*Math.acos(w[3]));t/=q;m.ey=D.Tc(t,m.ey,q,.3);m.ja[0]=t;t=w/q;m.dy=D.Tc(t,m.dy,q,.3);m.ja[1]=t;m.ey>=m.threshold||m.dy>=m.TQ?h(m,1):h(m,0);l.copy(x,m.Ls);p.copy(u,m.GB);m.Bh=r;break;case 130:u=m.nk;x=y.Wb(u.A.D,X);u=Math.abs(x[1]-m.Ls[1])/q;m.fy=D.Tc(u,m.fy,q,.3);m.ja=u;m.fy>=m.threshold?h(m,1):h(m,0);l.copy(x,
m.Ls);m.Bh=r;break;case 140:!m.gb&&0<=m.uh&&r-m.Bh>=m.uh&&(h(m,1),m.repeat?m.Bh=r:m.uh=-m.uh);break;case 150:m.Bh||(m.Bh=r);h(m,r-m.Bh);m.Bh=r;break;case 160:h(m,r);break;case 180:r=c(m.element);m.ja[0]=r.hA-r.mG;m.ja[1]=r.gA-r.lG;m.ja[2]=r.fA-r.eA;break;case 190:r=c(m.element);m.ja[0]=r.hA;m.ja[1]=r.gA;m.ja[2]=r.fA;break;case 200:r=c(m.element);p.copy(r.DO,m.ja);break;case 210:q=v.ba(v.Tb);v.Zh(q,v.wx,m.ja);break;case 220:q=v.ba(v.Tb);v.Zh(q,v.xx,m.ja);break;case 240:q=g(m.Ti);m.value=v.i0(q,m.key);
break;case 250:q=g(m.Ti);m.value=v.h0(q,m.key);break;case 260:q=g(m.Ti);v.ZF(q,m.ja);h(m,1);break;case 270:q=g(m.Ti);v.YF(q,m.ja);h(m,1);break;case 230:h(m,m.callback());break;case 30:r=c(m.element);h(m,r.FD);break;case 40:r=c(m.element);if(!L.sA||1==r.Ag||2==r.Ag)switch(x=r.np-r.cB,u=r.op-r.dB,m.ja.coords[0]=r.np,m.ja.coords[1]=r.op,m.axis){case "X":h(m,x);break;case "Y":h(m,u);break;case "XY":q=Math.sqrt(x*x+u*u),h(m,q)}break;case 280:r=c(m.element);x=r.Qv;u=r.Rv;t=D.Tc(x,0,q,.1*R);q=D.Tc(u,0,q,
.1*R);.01<Math.abs(x)||.01<Math.abs(u)?(r.Qv-=t,r.Rv-=q,m.ja.coords[0]=t,m.ja.coords[1]=q):(m.ja.coords[0]=0,m.ja.coords[1]=0);h(m,Math.sqrt(x*x+u*u));break;case 50:r=c(m.element);h(m,0!=r.Ag|0);m.ja.which=r.which;m.ja.coords[0]=r.np;m.ja.coords[1]=r.op;break;case 170:r=c(m.element);h(m,0);if(m.fN)r.kG==m.nk&&h(m,1);else if(0!=r.Ag&&r.ck.aa==m.nk)h(m,1);else for(q=0;10>q;++q)if(x=r.Yl[q],0!=x.qk&&x.aa==m.nk){h(m,1);break}break;case 20:r=c(m.element);m.ja=r.sg[m.key];1==m.ja||r.sg[0]&&16==m.key?h(m,
1):m.ja||h(m,0);break;case 60:r=c(m.element);if(-1==r.xf[1]&&-1==r.Zf[1]){x=r.xf[0]-r.kj[0];u=r.Zf[0]-r.lj[0];q=Math.sqrt(x*x+u*u);if(-1!=r.kj[1]&&-1!=r.lj[1]){var t=r.xf[0]-r.kj[1],w=r.Zf[0]-r.lj[1],B=Math.sqrt(t*t+w*w);B<q&&(x=t,u=w,q=B)}m.ja.gesture=a.Fx}else q=n,q[0]=(r.xf[0]+r.xf[1])/2,q[1]=(r.Zf[0]+r.Zf[1])/2,u=f,u[0]=(r.kj[0]+r.kj[1])/2,u[1]=(r.lj[0]+r.lj[1])/2,x=q[0]-u[0],u=q[1]-u[1],q=Math.sqrt(x*x+u*u),m.ja.gesture=a.Dx;m.ja.coords[0]=r.xf[0];m.ja.coords[1]=r.Zf[0];switch(m.axis){case "X":h(m,
x);break;case "Y":h(m,u);break;case "XY":h(m,q)}break;case 70:r=c(m.element);q=r.eD-r.cJ;m.ja=a.Ex;h(m,q);break;case 75:r=c(m.element);-1!=r.xf[1]&&(q=Math.atan2(r.Zf[0]-r.Zf[1],r.xf[0]-r.xf[1]),m.ja=a.dE,h(m,q-r.wS));break;case 80:r=c(m.element),m.ja.coords[0]=r.xf[0],m.ja.coords[1]=r.Zf[0],r.FG?h(m,0):h(m,1)}for(k=0;k<F.length;k++)for(r=F[k],m=r.Ep,q=0;q<m.length;q++)if(x=m[q],x.Hn!=G){x.Hn=G;w=x;u=0;switch(w.type){case a.Sg:u=(t=O(w))?1:0;break;case a.ob:u=w.ul;(t=O(w))?(u=1,w.ul=1):1==u?(u=-1,
w.ul=-1):u=0;break;case a.cx:u=w.ul;(t=O(w))&&-1==u?(u=1,w.ul=1):t||1!=u?u=0:(u=-1,w.ul=-1);break;case a.Ai:u=w.ul;(t=O(w))&&-1==u?(u=1,w.ul=1):t||1!=u?u=0:(u=0,w.ul=-1);break;case a.Zp:t=O(w);w.wP!=t?(u=1,w.wP=t):u=0;break;case a.QD:t=w.Ll;w=w.y1;for(B=0;B<t.length;B++){var A=t[B].value;u||A==w[B]||(u=1);w[B]=A}break;default:D.K("Wrong sensor manifold type: "+w.type)}if(u&&(t=r==U?null:r,H=!1,x.callback(t,x.id,u,x.kX),H)){k=-1;break}}for(k=0;k<F.length;k++)for(r=F[k],m=r.Ep,q=0;q<m.length;q++)for(x=
m[q],r=x.Ll,x=0;x<r.length;x++)switch(u=r[x],u.type){case 30:h(u,0);break;case 40:h(u,0);break;case 60:h(u,0);break;case 70:h(u,0);break;case 75:h(u,0);break;case 80:h(u,0);break;case 140:h(u,0)}for(k=0;k<E.length;k++){m=E[k];if(!m.rv){for(q=0;q<m.sg.length;q++)1==m.sg[q]?m.sg[q]=2:3==m.sg[q]&&(m.sg[q]=0);m.rv=!0}1==m.Ag?m.Ag=2:3==m.Ag&&(m.Ag=0);for(q=0;q<m.Yl.length;q++)r=m.Yl[q],1==r.qk?r.qk=2:3==r.qk&&(r.qk=0);m.FD=0;m.cB=m.np;m.dB=m.op;m.sg[0]=0;m.kj.set(m.xf);m.lj.set(m.Zf);m.cJ=m.eD;m.mG=m.hA;
m.lG=m.gA;m.eA=m.fA;m.GG=!1}G++};a.zu=function(a){var b=t(10);h(b,a);return b};a.qd=function(a){var b=t(20,document);b.key=a;b.gb=!0;return b};a.gc=function(a,b){var c=t(240,document);b=b||v.Lz();c.Ti=b;c.key=a;c.gb=!0;return c};a.ne=function(a,b){var c=t(250,document);b=void 0==b?v.Lz():b;c.Ti=b;c.key=a;c.gb=!0;return c};a.Ly=function(a){var b=t(260,document);a=void 0===a?v.Lz():a;b.Ti=a;b.gb=!0;b.ja=l.create();return b};a.Ky=function(a){var b=t(270,document);a=void 0===a?v.Lz():a;b.Ti=a;b.gb=!0;
b.ja=p.create();return b};a.$E=function(a,b,c){if(!a||!M.Aa(a))return N.error("Wrong collision object"),null;var d=t(90);d.UE=a;d.Ub=b;d.Bj=c;d.ja={coll_obj:null,coll_pos:c?new Float32Array(3):null,coll_norm:c?new Float32Array(3):null,coll_dist:0};d.TE=function(a,b,c,e,f){h(d,a);a=d.ja;a.coll_obj=b;d.Bj&&(a.coll_pos.set(c),a.coll_norm.set(e),a.coll_dist=f)};d.gb=!0;return d};a.uM=function(a){if(!a||!a.O)return N.error("Wrong collision impulse object"),null;var b=t(100);b.SE=a;b.jM=function(a){h(b,
a)};b.gb=!0;return b};a.CM=function(a,b,c,d,e,f,g){var k=t(110);k.nk=a;k.from=b;k.to=c;k.Ub=d;k.bP=e;k.Bj=f;k.tA=g;k.ja={hit_fract:0,obj_hit:null,hit_time:0,hit_pos:new Float32Array(3),hit_norm:new Float32Array(3),Zv:0};k.HQ=function(a,b,c,d,e,f){k.bP?h(k,-1==b?0:1):h(k,b);k.ja.hit_fract=b;k.ja.obj_hit=c;k.ja.hit_time=d;k.Bj&&(k.ja.hit_pos.set(e),k.ja.hit_norm.set(f))};k.gb=!0;return k};a.yo=function(a){a=t(50,a);a.gb=!0;a.ja={coords:new Float32Array(2),which:null};return a};a.fF=function(a){a=t(30,
a);a.gb=!0;return a};a.Wk=function(a,b){var c=t(40,b);c.axis=a||"XY";c.ja={coords:new Float32Array(2)};c.gb=!0;return c};a.Cu=function(a,b){var c=t(60,b);c.axis=a||"XY";c.ja={coords:new Float32Array(2),gesture:0};c.gb=!0;return c};a.Py=function(a){a=t(70,a);a.ja=0;a.gb=!0;return a};a.KM=function(a){a=t(75,a);a.ja=0;a.gb=!0;return a};a.JM=function(a){a=t(80,a);a.ja={coords:new Float32Array(2)};a.gb=!0;return a};a.yM=function(a,b,c){if(!a)return N.error("Wrong collision object"),null;var d=t(120);d.nk=
a;var e=y.X(a.A.D);a=y.la(a.A.D);d.BQ=new Float32Array(4);d.Ls=new Float32Array(e);d.GB=new Float32Array(a);d.ey=0;d.dy=0;d.threshold=b||.1;d.TQ=c||.1;d.Bh=0;d.ja=new Float32Array([0,0]);return d};a.LM=function(a,b){if(!a)return N.error("Wrong collision object"),null;var c=t(130);c.nk=a;var d=y.X(a.A.D),e=y.la(a.A.D);c.Ls=new Float32Array(d);c.GB=new Float32Array(e);c.fy=0;c.threshold=b||1;c.Bh=0;c.ja=0;return c};a.IM=function(a,b){var c=t(140);c.uh=a;c.repeat=b;c.gb=!0;return c};a.OQ=function(a,
b,c,d){a=a||U;a=a.jj;if(!a||!a[b])return N.error("reset_timer_sensor(): wrong object"),null;b=a[b].Ll[c];if(!b)return N.error("reset_timer_sensor(): sensor not found"),null;b.Bh=I.So();b.uh=d};a.ym=function(){var a=t(150);a.Bh=0;return a};a.xM=function(){var a=t(180,window);a.ja=new Float32Array(3);v.ba(v.sj)?h(a,1):h(a,0);a.gb=!0;return a};a.wM=function(){var a=t(190,window);a.ja=new Float32Array(3);v.ba(v.sj)?h(a,1):h(a,0);a.gb=!0;return a};a.aF=function(){var a=t(200,window);a.ja=p.create();v.ba(v.sj)?
h(a,1):h(a,0);a.gb=!0;return a};a.cF=function(){var a=t(210,window);a.ja=p.create();v.ba(v.Tb)?h(a,1):h(a,0);a.gb=!0;return a};a.bF=function(){var a=t(220,window);a.ja=l.create();v.ba(v.Tb)?h(a,1):h(a,0);a.gb=!0;return a};a.Oy=function(){return t(160)};a.gF=function(a,b){var c=t(170);c.nk=a;c.fN=b;c.gb=!0;return c};a.ZE=function(a,b){var c=t(230);c.callback=a;h(c,b);return c};a.AM=function(a){a=t(280,a);a.ja={coords:new Float32Array(2)};a.gb=!0;return a};a.BM=function(a){a=t(290,a);a.gb=!0;return a};
a.K3=h;a.wd=function(a,b,c){a=a||U;a=a.jj;if(!a||!a[b])return N.error("get_sensor_value(): wrong object"),null;b=a[b].Ll[c];return b?b.value:(N.error("get_sensor_value(): sensor not found"),null)};a.lf=function(a,b,c){a=a||U;a=a.jj;if(!a||!a[b])return N.error("get_sensor_payload(): wrong object"),null;b=a[b].Ll[c];return b?b.ja:(N.error("get_sensor_payload(): sensor not found"),null)};a.Ja=function(){F=[];U={};for(var a=0;a<K.length;a++)x(K[a]);K.length=0;A.length=0};a.tm=function(a,b){a=a||U;if(!a.jj)return!1;
if(b&&a.jj[b])return!0;if(!b)for(var c in a.jj)return!0;return!1};a.qa=function(a,d,e,f,g,h,k){a=a||U;a.Ep=a.Ep||[];a.jj=a.jj||{};var l=a.jj,n=a.Ep;l[d]&&m(a,d);e={id:d,type:e,Ll:f.slice(0),W1:g,L3:Array(f.length),callback:h,kX:k,ul:-1,wP:0,y1:Array(f.length),Hn:-1};l[d]=e;n.push(e);-1==F.indexOf(a)&&F.push(a);for(a=0;a<e.Ll.length;a++){l=d=e.Ll[a];if(l.gb){switch(l.type){case 90:M.pE(l.UE,l.Ub,l.TE,l.Bj);break;case 100:M.qE(l.SE,l.jM);break;case 110:l.Zv=M.Yx(l.nk,l.from,l.to,l.Ub,l.HQ,!1,!1,l.Bj,
l.tA);l.ja.Zv=l.Zv;break;case 140:l.Bh=I.So();0>l.uh&&(l.uh=-l.uh);break;case 20:n=c(l.element);b(n,"keyboard_downed_keys");break;case 30:n=c(l.element);b(n,"mouse_wheel");break;case 40:n=c(l.element);b(n,"mouse_down_which");b(n,"mouse_up_which");b(n,"mouse_location");break;case 280:n=c(l.element);b(n,"mouse_pointerlock");break;case 290:v.ZV(l);break;case 50:n=c(l.element);b(n,"mouse_down_which");b(n,"mouse_up_which");break;case 60:n=c(l.element);b(n,"touch_start");b(n,"touch_move");b(n,"touch_end");
break;case 70:n=c(l.element);b(n,"touch_start");b(n,"touch_move");break;case 75:n=c(l.element);b(n,"touch_start");b(n,"touch_move");break;case 80:n=c(l.element);b(n,"touch_start");b(n,"touch_end");break;case 170:n=c(l.element);b(n,"mouse_select");b(n,"touch_select");b(n,"touch_start");b(n,"touch_end");b(n,"mouse_down_which");b(n,"mouse_up_which");break;case 180:case 190:n=c(l.element);b(n,"orientation_angles");break;case 200:n=c(l.element);b(n,"orientation_quat");break;case 240:case 260:case 270:0==
l.Ti?v.ba(v.dx):1==l.Ti?v.ba(v.RD):2==l.Ti?v.ba(v.SD):v.ba(v.TD)}l.gb=!1}l=K.indexOf(d);-1==l?(K.push(d),A.push([e])):A[l].push(e)}H=!0};a.Yy=function(a){for(var b=0;b<a.length;b++)if(!a[b])return a[b];return a[a.length-1]};a.rF=function(a){for(var b=0;b<a.length;b++)if(a[b])return a[b];return a[a.length-1]};a.Uf=m;a.reset=function(){for(var a=0;a<F.length;a++){var b=F[a],c=b.jj,b=b.Ep,d;for(d in c)delete c[d];b.length=0}for(a=0;a<K.length;a++)x(K[a]);F.length=0;K.length=0;A.length=0};a.debug=function(){N.log(String(F.length)+
" objects with manifolds",F);N.log(String(K.length)+" sensors",K);for(var a=[],b=[],c=0;c<K.length;c++){var d=K[c];90==d.type&&a.push(d);110==d.type&&b.push(d)}N.log(String(a.length)+" collision sensors",a);N.log(String(b.length)+" ray sensors",b)};a.DR=function(a){R=a}};b4w.module.__material=function(a,w){function t(){return{name:"",type:"",dd:"",Ch:!1,te:null,Ah:[],ub:"",Nc:!1,rD:!1,Na:!1,zf:!1,qD:!1,Pw:!1,Qs:!1,ef:!1,Il:!1,Yj:!1,sv:!1,fp:!1,si:0,fk:0,Sd:0,Kf:"",jd:new Float32Array(3),rg:0,dz:0,ez:0,QB:0,bz:0,cz:0,Uy:0,alpha:0,Yf:"",Fg:new Float32Array(3),vw:0,FC:0,GC:0,Gp:0,DC:0,EC:0,Eg:0,gf:0,af:0,ma:{Zj:!1,Xf:!1,Ux:0,Qi:0,iC:new Float32Array(3),lC:new Float32Array(3),jC:0,mC:0,Io:new Float32Array(3),yz:0,JC:0,KC:0,kB:0,ea:!1,waves_height:0,waves_length:0,dst_noise_scale0:0,
dst_noise_scale1:0,dst_noise_freq0:0,dst_noise_freq1:0,dir_min_shore_fac:0,dir_freq:0,dir_noise_scale:0,dir_noise_freq:0,dir_min_noise_fac:0,dst_min_fac:0,waves_hor_fac:0,zA:!1,lB:0,mB:0,az:0,lz:!1,Qk:0,Pk:0},pk:{zr:!1,Nu:"",Mu:""},Ap:{pi:0,Xu:0,Yu:0},kr:{size:0,iv:0,PB:new Float32Array(3),OA:new Float32Array(3),OB:0,MA:0,MC:0,DA:!1,NC:0,OC:0},Td:{Ps:!1,tk:!1,Uh:0,Ph:0,Ub:"",Ej:0,Dj:0,Fj:0}}}var c=w("__util");a.d1=t;a.nY=function(){var a=t();a.name="DEFAULT";a.type="SURFACE";a.dd=c.Fz();a.Ch=!1;a.te=
null;a.Ah=[];a.ub="OPAQUE";a.Nc=!1;a.rD=!1;a.Na=!0;a.Pw=!1;a.Qs=!1;a.Il=!1;a.fp=!1;a.si=0;a.fk=0;a.Sd=0;a.Kf="LAMBERT";a.jd.set([.8,.8,.8]);a.rg=.8;a.alpha=1;a.Yf="COOKTORR";a.Fg.set([1,1,1]);a.vw=.5;a.Gp=50;a.Eg=1;a.gf=0;a.af=1;a.ma.Zj=!1;a.pk.zr=!1;a.Ap.pi=0;a.Ap.Xu=0;a.Ap.Yu=1.25;a.Td.Ps=!1;return a};a.a6=function(a,c){c.name=a.name;c.type=a.type;c.dd=a.uuid;c.Ch=a.use_nodes;c.te=a.node_tree;c.Ah=a.texture_slots;c.ub=a.game_settings.alpha_blend;c.Nc=a.use_shadeless;c.rD=a.use_transparency;c.Na=
a.game_settings.use_backface_culling;c.zf=a.use_tangent_shading;c.qD=a.use_orco_tex_coord;c.Pw=a.use_vertex_color_paint;c.Qs=a.b4w_double_sided_lighting;c.ef=a.b4w_do_not_render;c.Il=a.b4w_render_above_all;c.Yj=a.b4w_lens_flares;c.sv=a.b4w_wettable;c.fp=a.b4w_refractive;c.si=a.b4w_refr_bump;c.fk=a.pass_index;c.Sd=a.offset_z;c.Kf=a.diffuse_shader;c.jd.set(a.diffuse_color);c.rg=a.diffuse_intensity;c.dz=a.diffuse_toon_size;c.ez=a.diffuse_toon_smooth;c.QB=a.roughness;c.bz=a.diffuse_fresnel;c.cz=a.diffuse_fresnel_factor;
c.Uy=a.darkness;c.alpha=a.alpha;c.Yf=a.specular_shader;c.Fg.set(a.specular_color);c.vw=a.specular_intensity;c.FC=a.specular_toon_size;c.GC=a.specular_toon_smooth;c.Gp=a.specular_hardness;c.DC=a.specular_ior;c.EC=a.specular_slope;c.Eg=a.specular_alpha;c.gf=a.emit;c.af=a.ambient;var b=c.ma;b.Zj=a.b4w_water;b.Xf=a.b4w_water_shore_smoothing;b.Ux=a.b4w_water_absorb_factor;b.Qi=a.b4w_foam_factor;b.iC.set(a.b4w_shallow_water_col);b.lC.set(a.b4w_shore_water_col);b.jC=a.b4w_shallow_water_col_fac;b.mC=a.b4w_shore_water_col_fac;
b.Io.set(a.b4w_water_fog_color);b.yz=a.b4w_water_fog_density;b.JC=a.b4w_water_sss_strength;b.KC=a.b4w_water_sss_width;b.kB=a.b4w_water_norm_uv_velocity;b.ea=a.b4w_water_dynamic;b.waves_height=a.b4w_waves_height;b.waves_length=a.b4w_waves_length;b.dst_noise_scale0=a.b4w_water_dst_noise_scale0;b.dst_noise_scale1=a.b4w_water_dst_noise_scale1;b.dst_noise_freq0=a.b4w_water_dst_noise_freq0;b.dst_noise_freq1=a.b4w_water_dst_noise_freq1;b.dir_min_shore_fac=a.b4w_water_dir_min_shore_fac;b.dir_freq=a.b4w_water_dir_freq;
b.dir_noise_scale=a.b4w_water_dir_noise_scale;b.dir_noise_freq=a.b4w_water_dir_noise_freq;b.dir_min_noise_fac=a.b4w_water_dir_min_noise_fac;b.dst_min_fac=a.b4w_water_dst_min_fac;b.waves_hor_fac=a.b4w_water_waves_hor_fac;b.zA=a.b4w_generated_mesh;b.lB=a.b4w_water_num_cascads;b.mB=a.b4w_water_subdivs;b.az=a.b4w_water_detailed_dist;b.lz=a.b4w_water_enable_caust;b.Qk=a.b4w_water_caust_scale;b.Pk=a.b4w_water_caust_brightness;b=c.pk;b.zr=a.b4w_terrain;b.Nu=a.b4w_dynamic_grass_size;b.Mu=a.b4w_dynamic_grass_color;
b=c.Ap;b.pi=a.raytrace_mirror.reflect_factor;b.Xu=a.raytrace_mirror.fresnel;b.Yu=a.raytrace_mirror.fresnel_factor;b=c.kr;b.size=a.halo.size;b.iv=a.halo.hardness;b.PB.set(a.halo.b4w_halo_rings_color);b.OA.set(a.halo.b4w_halo_lines_color);b.OB=a.halo.ring_count;b.MA=a.halo.line_count;b.MC=a.halo.star_tip_count;b.DA=a.b4w_halo_sky_stars;b.NC=a.b4w_halo_stars_blend_height;b.OC=a.b4w_halo_stars_min_height;b=c.Td;b.Ps=a.b4w_collision;b.tk=a.b4w_use_ghost;b.Uh=a.physics.friction;b.Ph=a.physics.elasticity;
b.Ub=a.b4w_collision_id;b.Ej=a.b4w_collision_margin;b.Dj=a.b4w_collision_group;b.Fj=a.b4w_collision_mask};a.RX=function(a){a.name=a.name;a.type=a.type;a.dd=a.dd;a.Ch=a.Ch;a.te=a.te;a.Ah=a.Ah.slice();a.ub=a.ub;a.Nc=a.Nc;a.rD=a.rD;a.Na=a.Na;a.zf=a.zf;a.qD=a.qD;a.Pw=a.Pw;a.Qs=a.Qs;a.ef=a.ef;a.Il=a.Il;a.Yj=a.Yj;a.sv=a.sv;a.fp=a.fp;a.si=a.si;a.fk=a.fk;a.Sd=a.Sd;a.Kf=a.Kf;a.jd.set(a.jd);a.rg=a.rg;a.dz=a.dz;a.ez=a.ez;a.QB=a.QB;a.bz=a.bz;a.cz=a.cz;a.Uy=a.Uy;a.alpha=a.alpha;a.Yf=a.Yf;a.Fg.set(a.Fg);a.vw=a.vw;
a.FC=a.FC;a.GC=a.GC;a.Gp=a.Gp;a.DC=a.DC;a.EC=a.EC;a.Eg=a.Eg;a.gf=a.gf;a.af=a.af;var b=a.ma,c=a.ma;c.Zj=b.Zj;c.Xf=b.Xf;c.Ux=b.Ux;c.Qi=b.Qi;c.iC.set(b.iC);c.lC.set(b.lC);c.jC=b.jC;c.mC=b.mC;c.Io=b.Io;c.yz=b.yz;c.JC=b.JC;c.KC=b.KC;c.kB=b.kB;c.ea=b.ea;c.waves_height=b.waves_height;c.waves_length=b.waves_length;c.dst_noise_scale0=b.dst_noise_scale0;c.dst_noise_scale1=b.dst_noise_scale1;c.dst_noise_freq0=b.dst_noise_freq0;c.dst_noise_freq1=b.dst_noise_freq1;c.dir_min_shore_fac=b.dir_min_shore_fac;c.dir_freq=
b.dir_freq;c.dir_noise_scale=b.dir_noise_scale;c.dir_noise_freq=b.dir_noise_freq;c.dir_min_noise_fac=b.dir_min_noise_fac;c.dst_min_fac=b.dst_min_fac;c.waves_hor_fac=b.waves_hor_fac;c.zA=b.zA;c.lB=b.lB;c.mB=b.mB;c.az=b.az;c.lz=b.lz;c.Qk=b.Qk;c.Pk=b.Pk;c=b=a.pk;c.zr=b.zr;c.Nu=b.Nu;c.Mu=b.Mu;c=b=a.Ap;c.pi=b.pi;c.Xu=b.Xu;c.Yu=b.Yu;c=b=a.kr;c.size=b.size;c.iv=b.iv;c.PB.set(b.PB);c.OA.set(b.OA);c.OB=b.OB;c.MA=b.MA;c.MC=b.MC;c.DA=b.DA;c.NC=b.NC;c.OC=b.OC;c=b=a.Td;c.Ps=b.Ps;c.tk=b.tk;c.Uh=b.Uh;c.Ph=b.Ph;
c.Ub=b.Ub;c.Ej=b.Ej;c.Dj=b.Dj;c.Fj=b.Fj;return a}};b4w.module.__data=function(a,w){function t(a,b){Ca[b.id]=null;Ua[b.id]=null}function c(a,b,c,d){a instanceof ArrayBuffer?(a=Va.BO(a,d),d=a.width,a=a.height):(d=a.width,a=a.height);sa.log("%cLOAD IMAGE "+d+"x"+a,"color: #"+(2048<d||2048<a?"a00":1024<d||1024<a?"aa0":"0a0"),b);-1==b.indexOf(Xb)&&c&&sa.warn("image",b,"is not from app root.")}function b(a,b,c,d,e,f){function g(a){f(b,c,a)}function h(d,f,l,m){if(d){sa.log("%cLOAD METADATA","color: #616",m);f=T.hS(d.b4w_format_version);switch(T.kT(f,Ma.lp)){case -1:f[0]<
Ma.lp[0]?T.K("JSON version is too old relative to B4W engine: "+T.Ln(f)+", required: "+T.Ln(Ma.lp)+". Reexport scene with the latest B4W addon to fix it."):sa.warn("JSON version is a bit old relative to B4W engine: "+T.Ln(f)+", required: "+T.Ln(Ma.lp)+". Some compatibility issues can occur. Reexport scene with the latest B4W addon to fix it.");break;case 1:f[0]>Ma.lp[0]?T.K("B4W engine version is too old relative to JSON. Can't load the scene. Update your engine version to fix it."):sa.error("B4W engine version is a bit old relative to JSON. Some compatibility issues can occur. Update your engine version to fix it.")}Ma.PG=
f;for(var n in d)a[n]=d[n];b.Xb&&($a=Oa.uz(a.scenes));(d=a.binaries[0].binfile)?b.uL=d:(Y.qC(b,"load_binaries"),Y.qC(b,"prepare_bindata"));Ma.is_mobile_device||Y.qC(b,"mobile_media_start");Ma.antialiasing&&Ma.smaa||Y.qC(b,"load_smaa_textures");if(a.b4w_export_errors)for(d=0;d<a.b4w_export_errors.length;d++)n=a.b4w_export_errors[d],(b.Xb&&"PRIMARY"==n.type||"ALL"==n.type)&&sa.YZ(n.text+" See more details in https://www.blend4web.com/doc/en/addon.html#non-critical-export-errors");if(a.b4w_export_warnings)for(d=
0;d<a.b4w_export_warnings.length;d++)n=a.b4w_export_warnings[d],(b.Xb&&"PRIMARY"==n.type||"ALL"==n.type)&&sa.ZZ(n.text+" See more details in https://www.blend4web.com/doc/en/addon.html#other-messages");b.lh&&I(a);e(b,c)}else l==J.jt?(sa.warn("Compressed file ",m,"not found or invalid. Trying to load non-compressed",k),J.enqueue([{id:k,type:J.fm,url:k,nf:b.lh}],h,null,g)):Y.MK(b)}var k=b.Oj;k||T.K("Nothing requested");if(Ma.assets_gzip_available){d=k+".gz";var l=J.jt}else d=k,l=J.fm;J.enqueue([{id:d,
type:l,url:d,nf:b.lh}],h,null,g)}function k(a,b,c,d,e,f){function g(a){f(b,c,a)}function h(d,f,l,m){d?(sa.log("%cLOAD BINARY","color: #616",m),a.bin_data=d,f=(new Uint32Array(d,4,1))[0],d=(new Uint32Array(d,8,1))[0],d=[f,d],f=T.hS(a.b4w_format_version),d[0]!=f[0]&&T.K("BIN version does not match to JSON version: "+T.Ln(d)+", required: "+T.Ln(Ma.lp)+". Couldn't load the scene. Reexport scene to fix it."),d[1]!=f[1]&&sa.warn("BIN version does not match to JSON version: "+ +T.Ln(d)+", required: "+T.Ln(Ma.lp)+
". Some compatibility issues can occur. Reexport scene to fix it."),e(b,c)):l==J.it?(sa.warn("Compressed file ",m,"not found or invalid. Trying to load non-compressed",k),J.enqueue([{id:k,type:J.Xp,url:k,nf:b.lh}],h,null,g)):Y.MK(b)}var k=Z(b.Oj)+b.uL;k||T.K("Binary data is missing");if(Ma.assets_gzip_available){d=k+".gz";var l=J.it}else d=k,l=J.Xp;J.enqueue([{id:d,type:l,url:d,nf:b.lh}],h,null,g)}function h(a,b,c,d,e){Na.TL()&&e(b,c)}function O(a,b,c,d,e){d=a.bin_data;var f=a.binaries[0],g=a.objects,
h=a.meshes;a=a.actions;for(var k=T.BX(),l=["indices"],n=["position","texcoord","texcoord2","shade_tangs"],p=["normal","tangent"],q=["group"],r=["color"],v=0;v<h.length;v++)for(var u=h[v].submeshes,x=0;x<u.length;x++){for(var y in u[x]){var t=u[x][y][1];if(-1!=l.indexOf(y)){var w=u[x][y][0]*T.KJ+f["int"]+12,B=u[x],A=y,z=d;if(k)var D=new Uint32Array(z,w,t);else for(var D=new Uint32Array(t),z=new DataView(z),C=0;C<t;C++)D[C]=z.getUint32(w+C*T.KJ,!0);B[A]=D}else if(-1!=n.indexOf(y))w=u[x][y][0]*T.xk+
f["float"]+12,u[x][y]=m(d,w,t,k);else if(-1!=p.indexOf(y)){w=u[x][y][0]*T.Ht+f["short"]+12;B=u[x];A=y;z=d;D=new Float32Array(t);z=new DataView(z);for(C=0;C<t;C++)D[C]=z.getInt16(w+C*T.Ht,!0)/32767;B[A]=D}else if(-1!=q.indexOf(y)){w=u[x][y][0]*T.Ht+f.ushort+12;B=u[x];A=y;z=d;D=new Float32Array(t);z=new DataView(z);for(C=0;C<t;C++)D[C]=z.getUint16(w+C*T.Ht,!0)/65535;B[A]=D}else if(-1!=r.indexOf(y)){w=u[x][y][0]*T.MD+f.uchar+12;B=u[x];A=y;z=d;D=new Float32Array(t);z=new DataView(z);for(C=0;C<t;C++)D[C]=
z.getUint8(w+C*T.MD)/255;B[A]=D}}t=u[x];if(h[v].b4w_shape_keys.length)for(w=t.base_length,B=t.normal.length/w/3,t.tbn=Ra.fr(t.normal.subarray(0,3*w),t.tangent.subarray(0,4*w),Ra.create(t.normal.length/3)),A=1;A<B;A++)for(z=A*w,D=0;D<w;D++){var N=t.normal.subarray(3*D,3*(D+1)),F=Ka.add(t.normal.subarray(3*(z+D),3*(z+D+1)),N,nb),C=Ra.identity(jc);if(t.tangent.length){var G=t.tangent.subarray(4*D,4*(D+1)),E=Wa.add(t.tangent.subarray(4*(z+D),4*(z+D+1)),G,sb),N=Ra.fr(N,G),F=Ra.fr(F,E);Ra.o2(F,N,C)}else F=
Qa.rotationTo(N,F,ic),Ra.Gc(C,F,0);Ra.lk(t.tbn,C,z+D)}else t.tbn=Ra.fr(t.normal,t.tangent);delete u[x].normal;delete u[x].tangent;"texcoord2"in u[x]&&(t=new Float32Array(u[x].texcoord.length+u[x].texcoord2.length),t.set(u[x].texcoord),t.set(u[x].texcoord2,u[x].texcoord.length),u[x].texcoord=t,delete u[x].texcoord2)}for(y=0;y<g.length;y++)for(h=g[y].particle_systems,l=0;l<h.length;l++)n=h[l],n.transforms=m(d,n.transforms[0]*T.xk+f["float"]+12,n.transforms[1],k);for(g=0;g<a.length;g++){y=a[g];h=y.fcurves;
l=y.frame_range;p=l[0];q=l[1];r=ha.J_(p,q);l=null;0>r&&(r=0);var u=v=!1,H;for(H in h)v|=-1<H.indexOf("rotation_euler"),u|=-1<H.indexOf("rotation_quaternion");n=[];for(H in h)if(v&&u&&-1<H.indexOf("rotation_euler"))delete h[H];else{var x=h[H],M;for(M in x)t=x[M],w=m(d,f["float"]+t.bin_data_pos[0]*T.xk+12,t.bin_data_pos[1],k),B=new Float32Array(r),l||(l=new Int8Array(r)),ha.zW(t,w,B,l,p,q),t.Xg=B;-1<H.indexOf("rotation_euler")&&(ha.h_(h[H]),n.push(H))}for(p=0;p<n.length;p++)q=n[p],r=q.replace("euler",
"quaternion"),h[r]=h[q],delete h[q];y.UV=l}e(b,c)}function m(a,b,c,d){if(d)d=new Float32Array(a,b,c);else{d=new Float32Array(c);a=new DataView(a);for(var e=0;e<c;e++)d[e]=a.getFloat32(b+e*T.xk,!0)}return d}function x(a,b,c,d,f){var h=a.cameras,k=a.groups,l=a.materials,m=a.meshes,n=a.node_groups,p=a.objects,q=a.particles,r=a.scenes,u=a.speakers,x=a.lamps,y=a.textures,t=a.worlds;n||(sa.warn('"node_groups" datablock undefined. reexport main scene.'),n=a.node_groups=[]);for(var w="actions armatures cameras curves groups images lamps materials meshes node_groups objects particles scenes sounds speakers textures worlds".split(" "),
B={},A=0;A<w.length;A++)for(var D=a[w[A]],N=0;N<D.length;N++){var G=D[N];B[G.uuid]=G}for(var E=0;E<r.length;E++){for(var H=r[E],M=H.objects,K=0;K<M.length;K++)U(M,K,B);H.camera&&U(H,"camera",B);H.world&&U(H,"world",B)}for(E=0;E<k.length;E++)for(var J=k[E].objects,K=0;K<J.length;K++)U(J,K,B);for(E=0;E<p.length;E++){var O=p[E];O.dupli_group&&U(O,"dupli_group",B);O.parent&&U(O,"parent",B);O.dg_parent&&U(O,"dg_parent",B);var S=O.animation_data;S&&L(S,B);switch(O.type){case "MESH":O.data||T.K("mesh not found for object "+
O.name);U(O,"data",B);for(var R=!1,V=O.modifiers,K=0;K<V.length;K++){var Q=V[K];"ARMATURE"==Q.type?(R&&sa.warn('Object "'+O.name+'" has more than one armature modifiers. Only the first one will be used.'),R=!0,U(Q,"object",B)):"CURVE"==Q.type&&U(Q,"object",B)}var ca=O.particle_systems;if(ca)for(K=0;K<ca.length;K++)U(ca[K],"settings",B);break;case "ARMATURE":U(O,"data",B);for(var Za=O.pose.bones,X=O.data.bones,K=0;K<Za.length;K++){var aa=Za[K];aa.bone=X[aa.bone];var fa=aa.constraints;if(fa)for(var oa=
0;oa<fa.length;oa++){var Ab=fa[oa];Ab.target&&U(Ab,"target",B)}for(var ba=aa.parent_recursive,oa=0;oa<ba.length;oa++)ba[oa]=Za[ba[oa]]}break;case "LAMP":case "CAMERA":case "SPEAKER":case "CURVE":U(O,"data",B)}if(fa=O.constraints)for(K=0;K<fa.length;K++)Ab=fa[K],Ab.target&&U(Ab,"target",B);var W=O.lod_levels;if(W)for(K=0;K<W.length;K++){var Ja=W[K];Ja.object&&U(Ja,"object",B)}}for(E=0;E<m.length;E++)for(var Y=m[E].materials,K=0;K<Y.length;K++)U(Y,K,B);for(E=0;E<l.length;E++){for(var Nb=l[E],ea=Nb.texture_slots,
K=0;K<ea.length;K++)U(ea[K],"texture",B);var da=Nb.node_tree;da&&F(da,B)}for(E=0;E<n.length;E++)(da=n[E].node_tree)&&F(da,B);for(E=0;E<y.length;E++){var Xb=y[E],ja=Xb.type;"IMAGE"!=ja&&"ENVIRONMENT_MAP"!=ja||U(Xb,"image",B)}for(E=0;E<h.length;E++){var ma=h[E];ma.dof_object&&U(ma,"dof_object",B)}for(E=0;E<u.length;E++){var Sb=u[E];Sb.sound&&U(Sb,"sound",B);(S=Sb.animation_data)&&L(S,B)}for(E=0;E<q.length;E++){for(var pa=q[E],ea=pa.texture_slots,K=0;K<ea.length;K++)U(ea[K],"texture",B);pa.dupli_group&&
U(pa,"dupli_group",B);pa.dupli_object&&U(pa,"dupli_object",B)}for(E=0;E<x.length;E++)(S=x[E].animation_data)&&L(S,B);for(E=0;E<t.length;E++){var la=t[E];if(ea=la.texture_slots)for(K=0;K<ea.length;K++)U(ea[K],"texture",B);(S=la.animation_data)&&L(S,B);(da=la.node_tree)&&F(da,B)}cb.wX(a);I(a);for(var Dc=Z(b.Oj),ia=a.textures,Fb=b.Xb?a.scenes[0].b4w_anisotropic_filtering:$a.b4w_anisotropic_filtering,za=0;za<ia.length;za++){var ka=ia[za];b.Xb||"SCENE"!=ka.b4w_source_type||(ka.b4w_source_id="");var na=
Ha.jZ(ka,Fb,a.scenes,b.id,Dc);ka.J=na}for(var ra={},xa=a.objects,va=0;va<xa.length;va++){var ya=xa[va];if("MESH"===ya.type&&!ya.particle_systems.length)for(var wa=ya.data,nb=wa.name,Aa=wa.submeshes,Ca=wa.materials,Ba=0;Ba<Aa.length;Ba++)0!==Aa[Ba].base_length||ra[nb]||(Ca[Ba]&&sa.warn('material "'+Ca[Ba].name+'" is not assigned to any face (object "'+ya.name+'").'),ra[nb]=!0)}var sb=[];a.materials=[];for(var Da=a.meshes,Fa=0;Fa<Da.length;Fa++){var Ga=Da[Fa];if(0==Ga.materials.length){var Ia=ua.nY();
Ga.materials.push(Ia);-1==sb.indexOf(Ia.dd)&&(sb.push(Ia.dd),a.materials.push(Ia))}else for(var Ka=0;Ka<Ga.materials.length;Ka++){var Ma=Ga.materials[Ka],Na=ua.d1();ua.a6(Ma,Na);Ga.materials[Ka]=Na;-1==sb.indexOf(Na.dd)&&(sb.push(Na.dd),a.materials.push(Na))}}for(var Pa=a.actions,Ra=b.id,ic=0;ic<Pa.length;ic++){var Qa=Pa[ic];Qa.VV=Ra;ha.dW(Qa)}for(var Va={GP:[],RA:[]},Wa=a.scenes,La=0;La<Wa.length;La++)for(var ib=Wa[La],Ya=Wa[La].objects,Ta=0;Ta<Ya.length;Ta++)qa(ib,Ya,Ya[Ta],null,Va);for(La=0;La<
Va.RA.length;La++)for(var Xa=Va.RA[La],Ta=0;Ta<Xa.nB.length;Ta++){var fb=Xa.nB[Ta],ab=Xa.$P[Ta],jc=Xa.cI[Ta],Ib=Xa.oH[Ta];Xa.FP[Ta].object=ab;for(var rb=0;rb<Ib.length;rb++)T.vW(Ib[rb],ab);for(var vb=fb,Mb=jc,Lb=0;Lb<Mb.length;Lb++){for(var Yb=Mb[Lb].objects,$b=0;$b<Yb.length;$b++){var kc=Yb[$b].dupli_group;kc&&C(vb,kc)}var ae=Yb.indexOf(vb);-1<ae&&Yb.splice(ae,1)}}!b.Xb&&1<a.scenes.length&&(a.scenes=[Oa.uz(a.scenes)],sa.warn("loading data contains multiple scenes.","Only the first one will be loaded."));
var Wd=b.Xb?$a:Oa.uz(a.scenes);ga.d4($a.fps);1<a.scenes.length&&(a.scenes.splice(a.scenes.indexOf($a),1),a.scenes.unshift($a));for(var vd=0;vd<a.scenes.length;vd++){var Ac=a.scenes[vd];Ac.J={};Ac.KK=Ac==Wd;Ac.WV=b.Xb;var Cd;if(Cd=ub.enabled){var Dd;if(Dd="OFF"!=Ac.b4w_enable_physics){var bd;if(!(bd="AUTO"!=Ac.b4w_enable_physics))a:{for(var Ed=e(Ac),Qd=0;Qd<Ed.length;Qd++){if(Ed[Qd].b4w_collision){bd=!0;break a}var Fd=Ed[Qd].data;if(Fd.materials)for(var wd=0;wd<Fd.materials.length;wd++)if(Fd.materials[wd].Td.Ps){bd=
!0;break a}}bd=!1}Dd=bd}Cd=Dd}Cd&&(b.Xb||!ta.RB($a)&&Ac==Oa.uz(a))&&ta.e1(Ac)}for(var Gd=0;Gd<a.scenes.length;Gd++){var Hd=a.scenes[Gd];if(Hd.b4w_use_logic_editor){var Id=e(Hd);cb.EW(Id,Hd)}}for(var qc=0;qc<a.scenes.length;qc++){for(var od=a.scenes[qc],Jd=e(od),rc=0;rc<Jd.length;rc++){var qb=Jd[rc];z.xX(qb,od,a)&&(qb.me||(qb.me=[]),qb.me.push(b.Xb?od:$a))}for(var Rd=Jd,Kd=0;Kd<Rd.length;Kd++){var hd=Rd[Kd];if(hd.me&&"WORLD"!=hd.type)for(var be=hd.particle_systems,Sd=0;Sd<be.length;Sd++){var xd=be[Sd].settings;
if("HAIR"==xd.type)if("OBJECT"==xd.render_type){var ac=xd.dupli_object;ac.me||(ac.me=hd.me.slice())}else if("GROUP"==xd.render_type)for(var cd=xd.dupli_group,hc=0;hc<cd.objects.length;hc++)ac=cd.objects[hc],ac.me||(ac.me=hd.me.slice())}}}for(var id=a.scenes,jd=[],zb=0;zb<id.length;zb++)v(id[zb].objects,0,b.Xb,jd);Ua[b.id]=[];for(zb=0;zb<jd.length;zb++)for(var yd=jd[zb],Bc=0;Bc<yd.length;Bc++)for(var Vc=yd[Bc],pd=0;pd<Vc.length;pd++)Ua[b.id].push(Vc[pd]);for(var zd=a.particles,zb=0;zb<zd.length;zb++){var qd=
zd[zb].dupli_object;qd&&(qd.JK=!0,Ua[b.id].push(qd));var Ad=zd[zb].dupli_group;if(Ad)for(var Xd=Ad.objects,Bc=0;Bc<Xd.length;Bc++)qd=Xd[Bc],qd.JK=!0,Ua[b.id].push(qd)}for(var Ld=Ua[b.id],zb=Ld.length-1;0<=zb;zb--)Ld[zb].me||Ld.splice(zb,1);for(var Md=Ua[b.id],qc=0;qc<Md.length;qc++){qb=Md[qc];!b.Xb&&qb.parent&&-1<Cc.indexOf(qb.parent.type)&&(qb.parent="");if("MESH"==qb.type){var Td=cb.yW(qb);Td&&(a.meshes.push(Td),qb.data=Td)}qb.Aq=z.HN(qb,!1);qb.Fk=z.AL(qb)}for(qc=0;qc<Md.length;qc++){for(var qb=
Md[qc],de=qb.Fk,rc=0;rc<qb.lod_levels.length;rc++){var $d=qb.lod_levels[rc].object;$d&&(de=de||$d.Fk)}if(de)for(qb.Fk=!0,rc=0;rc<qb.lod_levels.length;rc++)if($d=qb.lod_levels[rc].object)$d.Fk=!0}for(var ad=0;ad<a.scenes.length;ad++){var he=a.scenes[ad],Wc=he.world;Wc.me||(Wc.me=[]);Wc.me.push(b.Xb?he:$a)}for(var ee=[],ad=0;ad<a.worlds.length;ad++)Wc=a.worlds[ad],Wc.me?(Wc.Aq=z.HN(Wc,!0),Wc.Fk=z.AL(Wc)):ee.push(Wc);for(ad=0;ad<ee.length;ad++)Wc=ee[ad],a.worlds.splice(a.worlds.indexOf(Wc),1);for(var ie=
a.node_groups,je=a.materials,Nd=0;Nd<ie.length;Nd++){var Ud=ie[Nd].node_tree;if(Ud){var Yd=[];g(Ud,Yd,!0);Ud.Sx=Yd}}for(Nd=0;Nd<je.length;Nd++)if(Ud=je[Nd].te)Yd=[],g(Ud,Yd,!1),Ud.Sx=Yd;for(var fe=0;fe<a.scenes.length;fe++){var ke=a.scenes[fe],ge=b.Xb?ke:$a;P(b.id,ge,"SPEAKER").length&&!ge.od&&Ea.IW(ge)}f(b,c)}function r(a,b,c,e,f){e=Z(b.Oj);for(var g=[],h=[],k=0;k<a.speakers.length;k++){var l=a.speakers[k],m=l.sound.uuid;if(-1==h.indexOf(m)){h.push(m);switch(l.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":var n=
J.JD;break;case "BACKGROUND_MUSIC":n=J.KD}l=T.El(e+l.sound.filepath);d(g,m,n,l,b.lh)}}g.length?J.enqueue(g,function(){},function(){f(b,c)}):f(b,c)}function g(a,b,c){a=a.nodes;for(var d=0;d<a.length;d++){var e=a[d],f=e.type;if("GROUP"==f&&e.node_group){if(e=e.node_group.node_tree)if(c)g(e,b,!0);else for(e=e.Sx,f=0;f<e.length;f++){var h=e[f];-1==b.indexOf(h)&&b.push(h)}}else-1!=Mb.indexOf(f)&&-1==b.indexOf(f)&&b.push(f)}}function e(a){var b=[];-1==a.objects.indexOf(a.camera)&&a.objects.push(a.camera);
B(a.objects,"ALL",b);return b}function B(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];"ALL"!=b&&b!=e.type||c.push(e);(e=e.dupli_group)&&B(e.objects,b,c)}}function v(a,b,c,d){d[b]=d[b]||[];for(var e=d[b],f=0;f<a.length;f++){var g=a[f],h=aa(g);e[h]=e[h]||[];(c||-1==Cc.indexOf(g.type))&&-1==e[h].indexOf(g)&&e[h].push(g);(g=g.dupli_group)&&v(g.objects,b+1,c,d)}}function P(a,b,c){var d=[];a=Ua[a];for(var e=0;e<a.length;e++){var f=a[e];if(f.type==c||"ALL"==c)for(var g=0;g<f.me.length;g++)b==f.me[g]&&d.push(f)}return d}
function N(a,b,c,d,e){for(var f=Ua[b.id],g=0;g<f.length;g++){var h=z.zM(f[g]);h.A.Le=b.id}for(var k=a.worlds,g=0;g<k.length;g++)z.zM(k[g],!0);d=z.Pj("ALL",b.id);for(g=0;g<f.length;g++){var l=f[g],h=l.Oa;wa.Os(l,h)}for(g=0;g<k.length;g++)h=k[g],wa.Os(h,h.Oa);b.Xb&&M(a,b.id);for(g=0;g<f.length;g++)l=f[g],h=l.Oa,h.ov||(Q.Z2(l,h),z.c6(l,h),Lb.W(h)),"MESH"==h.type&&z.E_(l,h);for(a=0;a<f.length;a++){var m=f[a],k=m.Oa,g=k.A;if(Da.pf(k)||Da.ur(k)){var n=m.lod_levels.length;if(n){for(var k=[m],h=[0],p=Infinity,
l=0;l<n;l++){var q=m.lod_levels[l].object,r=m.lod_levels[l].distance;if(!q){p=r;break}k.push(q);h.push(r)}h.push(p);for(l=0;l<k.length;l++)q=k[l],m=q.Oa.A,m.ql=!0,"DYNAMIC"==g.type&&0<l&&Ka.subtract(g.bf.V,m.bf.V,m.VA),m.nh=h[l],m.mh=h[l+1],n=h[l+1]-h[l],p=l==k.length-1?Infinity:h[l+2]-h[l+1],m.wl=Math.min(l?h[l]-h[l-1]:0,n),m.xl=Math.min(n,p)}}}for(f=0;f<d.length;f++)if(a=d[f],"MESH"==a.type&&(g=a.by)){var g=g.A,k=a.A.zj,h=[],v;for(v in k)l=k[v],h.push(4*l.sF,4*l.yj);g.ZA.push(h);g.qs.push(a.A)}f=
v=-1;a=ha.$N();for(g=0;g<d.length;g++)k=d[g],h=k.A,Da.pf(k)&&h.Tm&&(k=h.$i,k>v&&(v=k),a>=k&&k>f&&(f=k));for(g=0;g<d.length;g++)k=d[g],h=k.A,Da.pf(k)&&h.Tm&&(h.Lo=!0,v<a?h.$i=v:h.$i<=a?h.$i=f:(sa.warn('too many bones for "'+k.name+'" / '+h.$i+" bones (max "+a+" with blending, "+2*a+" without blending). Blending between frames will be disabled."),h.$i=v,h.Lo=!1),h.Lo=h.Lo&&!Xa.rN);for(v=0;v<d.length;v++)if(f=d[v],f.wg)if(a=f.Kg,"CHASSIS"==a.Cg){f.S={};f.S.Uu=a.Uu;f.S.du=a.du;f.S.NI=a.NI;f.S.QI=a.QI;
f.S.OI=a.OI;f.S.vJ=a.vJ;f.S.ZH=a.ZH;f.S.XG=a.XG;f.S.$q=0;f.S.cu=1;f.S.Ds=0;f.S.speed=0;f.S.yp=[];f.S.Vv=[];f.S.Fs=null;k=(g=Da.Qj(f))?Da.VF(g,d):d;for(g=0;g<k.length;g++)h=k[g],h.wg&&(l=h.Kg,ta.k1(h)&&a.name==l.name?(l=ta.O6(h.Kg.Cg),f.S.yp[l]=h,f.S.Vv[l]=new Float32Array(8)):ta.nP(h)&&a.name==l.name?(f.S.Fs=h,f.S.Es=l.Es,f.S.xw=l.xw,f.S.nv=l.nv,l=na.invert(f.A.D,na.create()),h=na.multiply(l,h.A.D,l),f.S.fS=h,l=new Float32Array([1,0,0]),na.Vd(l,h,l),f.S.eS=l):ta.mP(h)&&a.name==l.name?(f.S.GI=h,f.S.ww=
l.ww,f.S.Gr=l.Gr,l=na.invert(f.A.D,na.create()),h=na.multiply(l,h.A.D,l),f.S.aS=h,l=new Float32Array([1,0,0]),na.Vd(l,h,l),f.S.$R=l):ta.oP(h)&&a.name==l.name&&(f.S.RI=h,f.S.Hu=l.Hu,l=na.invert(f.A.D,na.create()),h=na.multiply(l,h.A.D,l),f.S.qS=h,l=new Float32Array([1,0,0]),na.Vd(l,h,l),f.S.pS=l));4!=f.S.yp.length&&T.K("Not enough wheels for chassis "+f.name)}else if("HULL"==a.Cg)for(f.S={},f.S.yp=[],f.S.Vv=[],f.S.Uu=a.Uu,f.S.du=a.du,f.S.Ho=a.Ho,f.S.Sp=a.Sp,f.S.Tp=a.Tp,f.S.$q=0,f.S.cu=1,f.S.Ds=0,f.S.speed=
0,f.S.Fs=null,k=(g=Da.Qj(f))?Da.VF(g,d):d,g=0;g<k.length;g++)h=k[g],h.wg&&(l=h.Kg,ta.j1(h)&&a.name==l.name?(f.S.yp.push(h),f.S.Vv.push(new Float32Array(8))):ta.nP(h)&&a.name==l.name?(f.S.Fs=h,f.S.Es=l.Es,f.S.xw=l.xw,f.S.nv=l.nv,l=na.invert(f.A.D,na.create()),h=na.multiply(l,h.A.D,l),f.S.fS=h,l=new Float32Array([1,0,0]),na.Vd(l,h,l),f.S.eS=l):ta.mP(h)&&a.name==l.name?(f.S.GI=h,f.S.ww=l.ww,f.S.Gr=l.Gr,l=na.invert(f.A.D,na.create()),h=na.multiply(l,h.A.D,l),f.S.aS=h,l=new Float32Array([1,0,0]),na.Vd(l,
h,l),f.S.$R=l):ta.oP(h)&&a.name==l.name&&(f.S.RI=h,f.S.Hu=l.Hu,l=na.invert(f.A.D,na.create()),h=na.multiply(l,h.A.D,l),f.S.qS=h,l=new Float32Array([1,0,0]),na.Vd(l,h,l),f.S.pS=l));for(v=0;v<d.length;v++)if(f=d[v],f.bp&&(a=f.dr,"MAIN_BODY"==a.Cg))for(f.Sh={},f.Sh.Ho=a.Ho,f.Sh.Sp=a.Sp,f.Sh.Tp=a.Tp,f.Sh.ly=[],g=(g=Da.Qj(f))?Da.VF(g,d):d,k=0;k<g.length;k++)h=g[k],h.bp&&(l=h.dr,ta.m1(h)&&a.name==l.name&&(f.Sh.ly.push(h),h.xE=h.dr.oS));e(b,c)}function M(a,b){for(var c=0;c<a.scenes.length;c++){for(var d=
a.scenes[c],e=z.xc(d,"LAMP",b),f=Array(e.length),g=0;g<e.length;g++)f[g]=g;f.sort(function(a,b){var c=e[a].xd,d=e[b].xd;return d.Kp&&d.Op&&(!c.Kp||!c.Op)||!c.Kp&&(d.Kp||!c.Op&&d.Op)?1:0});for(g=0;g<f.length;g++)Da.La(e[f[g]],d).Av=g}}function p(a,b,c,d,e){for(d=0;d<a.scenes.length;d++){var f=a.scenes[d];f.Ek=f.camera.Oa}for(d=0;d<a.scenes.length;d++){var f=b.Xb?a.scenes[d]:$a,g=b.Xb?z.xc(f,"LAMP",b.id):z.xc(f,"LAMP",0),h=z.xc(f,"ALL",b.id),k=P(b.id,f,"MESH"),l=P(b.id,f,"EMPTY");b.Xb&&Oa.jW(f,h,g,
k,l);for(var h=!1,m=0;m<l.length;m++)for(var n=l[m].Oa,p=n.T,q=0;q<p.length;q++){var r=p[q].wb,v=Oa.NS(r,n);f.name==r.name&&(h=h||v)}b.Xb&&f.J.Yd&&!h&&sa.warn('Scene "'+f.name+'" has water but has no wind. Using default settings.');l=[];Oa.gs(f);ra.zN(f,k,g,l);m=z.xc(f,"LINE",b.id);ra.yN(f,m);n=Oa.Oz(f);if(b.Xb){h=f.J.uC;m=f.world;if(h.QH||h.procedural_skydome)p=m.Oa,ra.pW(f,h,p),ra.Jy(p,n,f);Oa.wN(f,n);(h=f.J.On)&&(h.Nw||h.Pe)&&ra.hW(f,m.Oa)}for(m=0;m<k.length;m++)ra.Jy(k[m].Oa,n,f);for(m=0;m<l.length;m++)ra.Jy(l[m],
n,f),z.x2(l[m]);h=z.xc(f,"ALL",b.id);Oa.gL(f,h,g);for(m=0;m<h.length;m++)n=h[m],n.A.$f&&!n.cP&&z.iJ(n),Da.EX(n)&&(n.YP=!0),z.Y5(n,f)}Oa.kW($a,a.textures,b.id);b.Xb&&$a.J.dt.length&&(b.rG=!0);e(b,c)}function I(a){var b=a.materials;a=a.images;for(var c=0;c<a.length;c++){var d=a[c];d.Hh="FILE"==d.source&&-1<d.filepath.indexOf(".dds")&&"dds"==Ma.uo?"dds":""}if((ab.qF&&"dds"==Ma.uo||ab.FB&&"pvr"==Ma.uo)&&Ma.YS)for(a=0;a<b.length;a++){for(var d=b[a],e=d.texture_slots,c=0;c<e.length;c++){var f=e[c],g=f.texture;
if("IMAGE"==g.type||"ENVIRONMENT_MAP"==g.type){var h=g.image;h&&!h.Hh&&(f=!g.b4w_disable_compression&&!f.use_map_normal&&"ENVIRONMENT_MAP"!=g.type&&!g.b4w_shore_dist_map&&"MOVIE"!=h.source,y(h,f))}}if(c=d.node_tree)for(d=c.nodes,c=0;c<d.length;c++){e=d[c];f=!1;if("TEXTURE"==e.type){if((g=e.texture)&&(h=g.image)&&!h.Hh&&(f=!g.b4w_disable_compression&&"MOVIE"!=g.image.source&&"ENVIRONMENT_MAP"!=g.type)){a:{f=e.outputs;for(e=0;e<f.length;e++)if(g=f[e],g.is_linked&&"Normal"==g.identifier){f=!0;break a}f=
!1}f=!f}}else"TEX_IMAGE"==e.type?(h=e.image)&&!h.Hh&&(f="MOVIE"!=h.source):"TEX_ENVIRONMENT"==e.type&&(f=!1);h&&!h.Hh&&y(h,f)}}}function y(a,b){-1<a.filepath.indexOf(".dds")?a.Hh="dds":b?(a.Hh=Ma.uo,a.filepath="dds"==Ma.uo?a.filepath+".dds":a.filepath+".pvr"):a.Hh=""}function D(a,b,c,d,e){d=a.groups;for(var f=a.objects,g={},h={},k={},m={},n=0;n<d.length;n++){var p=d[n];g[p.uuid]=p;k[p.uuid]=p}for(n=0;n<f.length;n++)p=f[n],h[p.uuid]=p,m[p.uuid]=p;a=a.scenes;for(n=0;n<a.length;n++)l(a[n].objects,null,
m,k,null);for(var q in k)q in g||d.push(k[q]);for(q in m)q in h||f.push(m[q]);e(b,c)}function l(a,b,c,d,e){for(var f=[],g=0;g<a.length;g++){var h=a[g],k=c[h.uuid];if(h=k.proxy){b&&-1==f.indexOf(h.uuid)&&f.push(h.uuid);for(var m=c[h.uuid],n=m.constraints,h=0;h<n.length;h++){var p=T.Y(n[h]);p.name=p.name+"_CLONE";k.constraints.push(p)}"b4w_proxy_inherit_anim"in k&&!k.b4w_proxy_inherit_anim||(k.animation_data&&(m.animation_data=T.Y(k.animation_data)),m.b4w_use_default_animation=k.b4w_use_default_animation,
m.b4w_auto_skel_anim=k.b4w_auto_skel_anim,m.b4w_anim_behavior=k.b4w_anim_behavior,m.b4w_cyclic_animation=k.b4w_cyclic_animation)}}for(g=0;g<f.length;g++)k=T.k0(a,f[g]),-1<k&&a.splice(k,1);f={};if(b)for(g=0;g<a.length;g++)h=a[g],k=c[h.uuid],n=T.Y(k),m="origin_name"in k?k.origin_name:k.name,n.name=Da.vN(b.name,m),n.origin_name=m,n.dg_parent={uuid:b.uuid},u(n),c[n.uuid]=n,f[h.uuid]=n.uuid,h.uuid=n.uuid,e&&e[k.uuid]&&(n.b4w_cluster_data=e[k.uuid]);for(g=0;g<a.length;g++)h=a[g],k=c[h.uuid],k.dupli_group&&
(h=k.dupli_group,e=d[h.uuid],n=T.Y(e),n.name=T.Hw(e.name+"_CLONE"),n.uuid=Pa.KO("Group"+n.name),d[n.uuid]=n,h.uuid=n.uuid,l(n.objects,k,c,d,k.b4w_cluster_data));if(b)for(g=0;g<a.length;g++){h=a[g];k=c[h.uuid];k.parent&&k.parent.uuid in f?k.parent.uuid=f[k.parent.uuid]:k.parent&&(sa.warn("Object's \""+k.name+'" parent is not in dupli group. Disabling parenting.'),k.parent=null);n=k.constraints;for(h=0;h<n.length;h++)b=n[h],b.target&&b.target.uuid in f&&(b.target.uuid=f[b.target.uuid]);if(b=k.pose)for(d=
b.bones,h=0;h<d.length;h++)if(e=d[h].constraints)for(n=0;n<e.length;n++)b=e[n],b.target&&b.target.uuid in f&&(b.target.uuid=f[b.target.uuid]);b=k.modifiers;for(h=0;h<b.length;h++)d=b[h],d.object&&d.object.uuid in f&&(d.object.uuid=f[d.object.uuid]);if((k=k.lod_levels)&&k.length)for(h=0;h<k.length;h++)b=k[h],b.object&&b.object.uuid in f&&(b.object.uuid=f[b.object.uuid])}for(var q in f)Fb[q]=f[q]}function u(a){a.uuid=Pa.KO("Object"+a.name)}function L(a,b){a.action&&U(a,"action",b);if(a.nla_tracks)for(var c=
0;c<a.nla_tracks.length;c++)for(var d=a.nla_tracks[c],e=0;e<d.strips.length;e++)d.strips[e].action&&U(d.strips[e],"action",b)}function F(a,b){for(var c=a.nodes,d=0;d<c.length;d++){var e=c[d];"TEXTURE"==e.type&&e.texture&&U(e,"texture",b);"LAMP"==e.type&&e.lamp&&(e.lamp.uuid in Fb&&(e.lamp.uuid=Fb[e.lamp.uuid]),b[e.lamp.uuid]||(e.lamp=null));"GROUP"==e.type&&e.node_group&&U(e,"node_group",b);"TEX_IMAGE"!=e.type&&"TEX_ENVIRONMENT"!=e.type||!e.image||U(e,"image",b)}e=a.links;for(d=0;d<e.length;d++){var f=
e[d];K(f,"from_node",c);K(f,"to_node",c);A(f,"from_socket",f.from_node.outputs);A(f,"to_socket",f.to_node.inputs)}(c=a.animation_data)&&L(c,b)}function U(a,b,c){a[b]&&((c=c[a[b].uuid])||sa.error("Dangling link found:",b,a),a[b]=c)}function K(a,b,c){c=T.Pd("name",a[b].name,c);a[b]=c}function A(a,b,c){c=T.Pd("identifier",a[b].identifier,c);a[b]=c}function E(a,b,d,e,f,g){var h=[],k=[],l={};e=a.images;for(var m=Ha.ZN(),p=Z(b.Oj),q=0;q<e.length;q++){var r=e[q],v=r.uuid;if(v){var u=T.El(p+r.filepath),x=
J.HC(u),y=x[1].toLowerCase(),t=r.source;if("FILE"===t){t=r.Hh?J.Xp:J.Yp;if(!J.DX(y)){sa.error('image "'+r.name+'" has unsupported format or broken path.');continue}ab.aH&&Ma.use_min50&&(u=n(x))}else if("MOVIE"===t)if(Ma.lw)u=x[0]+".altconv.seq",t=J.ax;else{t=Ea.vF(y);if(""==t){sa.error("failed to load video file (unsupported format)",u);continue}u=t!=y?x[0]+".altconv."+t:x[0]+"."+x[1];t=J.bx}else{sa.error('Image "'+r.name+'" has unsupported format "'+t+'".');continue}v in l||(l[v]=[]);for(x=0;x<m.length;x++)y=
m[x],(!Ha.O_(y)&&y.Mm==r.Hh&&y.Vo==v||b.lh)&&l[v].push(y);r.Hh&&Ma.assets_gzip_available&&(t=J.it,u+=".gz");l[v].length&&h.push({id:v,type:t,url:u,nf:b.lh})}}if(h.length){var w=0,B=function(e,f,m,n){if(e){if(b.lh)f=m;else{f=l[f];for(var p=0;p<f.length;p++){var q=f[p];if(m==J.ax)q.jw=e.Ri,Ha.Jw(q,e.images,b.id);else if(Ha.Jw(q,e,b.id),"ENVIRONMENT_MAP"==q.source&&b.Xb)for(var r=0;r<a.scenes.length;r++)Oa.mD(a.scenes[r]);Ha.Q3(q)}f=f[0].Mm}m==J.bx||m==J.ax?(m==J.bx?(f=e.videoWidth,e=e.videoHeight):
(f=e.images[0].width,e=e.images[0].height),sa.log("%cLOAD VIDEO "+f+"x"+e,"color: #"+(2048<f||2048<e?"a00":1024<f||1024<e?"aa0":"0a0"),n),-1==n.indexOf(Xb)&&sa.warn("video",n,"is not from app root.")):c(e,n,!0,f)}else{a:{e=b.lh;n=n.split("?v")[0];m=J.HC(n);if("gz"==m[1])n=m[0],m=J.Xp;else if("dds"==m[1]||"pvr"==m[1])for(n=m[0],m=J.Yp,p=l[f],q=0;q<p.length;q++)p[q].Mm="";else if(-1!=n.indexOf(".min50"))n=n.split(".min50"),n=n[0]+n[1],m=J.Yp;else{f=null;break a}f={id:f,type:m,url:n,nf:e}}f&&(sa.warn("Trying to load fallback image",
f.url),k.push(f))}f=++w/(h.length+k.length);g(b,d,f)},A=function(){k.length?(J.enqueue(k,B,A),k.length=0):(sa.log("%cLOADED ALL IMAGES","color: #0a0"),f(b,d))};J.enqueue(h,B,A)}else f(b,d)}function n(a){return"dds"==a[1]?(a=J.HC(a[0]),a[0]+".min50."+a[1]+".dds"):a[0]+".min50."+a[1]}function f(a,b,c,d,e){a=Oa.Uz();for(d=0;d<a.length;d++){var f=a[d];if(f.b4w_use_nla){var g=f.b4w_nla_cyclic;f.b4w_use_logic_editor&&(g=!1);wa.j6(f,g,b.id)}}e(b,c)}function X(a,b,c,e,f,g){a=Z(b.Oj);var h=[],k={};e=z.Pj("ALL",
b.id);for(var l=0;l<e.length;l++){var m=e[l];if(H(m)){var n=m.ra.dd;"BACKGROUND_MUSIC"==Ea.gG(m)?(n=T.Fz(),b.nG=!0):"NONE"!=Ea.gG(m)&&Ma.wG&&(b.vG=!0);if(!(n in k)){k[n]=[];var p=T.El(a+m.ra.Oj);switch(Ea.ZR(m)){case Ea.ID:var q=J.JD;break;case Ea.xJ:q=J.KD}d(h,n,q,p,b.lh)}k[n].push(m)}}if(h.length){var r=0;J.enqueue(h,function(a,d,e,f){if(a)for(sa.log("%cLOAD SOUND","color: #0aa",f),-1==f.indexOf(Xb)&&sa.warn("sound",f,"is not from app root."),d=k[d],e=0;e<d.length;e++)Ea.o6(d[e],a);a=++r/h.length;
g(b,c,a)},function(){sa.log("%cLOADED ALL SOUNDS","color: #0aa");f(b,c)})}else f(b,c)}function d(a,b,c,d,e){var f=J.HC(d),g=f[1].toLowerCase(),h=Ea.uF(g);""!=h?(d=h!=g?f[0]+".altconv."+h:f[0]+"."+f[1],a.push({id:b,type:c,url:d,nf:e})):sa.error("failed to load audio file (unsupported format)",d)}function H(a){return Da.Um(a)&&Ea.ZR(a)!=Ea.yJ}function G(a,b,c){a=z.xc(a,"SPEAKER",b);for(b=0;b<a.length;b++){var d=a[b];Da.Um(d)&&(Ea.i1(d)||c)&&Ea.AB(d)}}function R(a,b){for(var c=a.J.dt,d=0;d<c.length;d++){var e=
c[d].J;a.b4w_use_nla&&c[d].b4w_nla_video||!c[d].use_auto_refresh||b!=e.ft||(Ha.PQ(e),Ha.rQ(e))}}function q(a,b,c,d,e){wa.X2();e(b,c)}function ja(a,b,c,d,e){wa.start();sa.log("%cSTART NLA","color: #0a0");e(b,c)}function qa(a,b,c,d,e){for(var f=c.lod_levels.length,g=0;g<f;g++){var h=c.lod_levels[g],k=h.object;if(k){var l=e.GP.indexOf(c);if(-1==l){e.GP.push(c);var m={nB:[],$P:[],FP:[],cI:[],oH:[]};e.RA.push(m)}else m=e.RA[l];var n=m.nB.indexOf(k);-1!=l&&-1!=n?(m.cI[n].push(a),m.oH[n].push(b)):(l=T.ou(k),
l.name=c.name+"_LOD_"+String(g+1),l.b4w_cluster_data=c.b4w_cluster_data,u(l),l.lod_levels=[],d&&(l.dg_parent=d),m.nB.push(k),m.$P.push(l),m.FP.push(h),m.cI.push([a]),m.oH.push([b]))}}if(b=c.dupli_group)for(b=b.objects,d=0;d<b.length;d++)qa(a,b,b[d],c,e)}function C(a,b){var c=b.objects,d=c.indexOf(a);-1<d&&c.splice(d,1);for(d=0;d<c.length;d++)(b=c[d].dupli_group)&&C(a,b)}function pa(a,b,c,d,e){d=!0;for(var f=0;f<a.scenes.length;f++)if(!ta.HX(a.scenes[f])){d=!1;break}d&&(e(b,c),sa.log("%cPHYSICS READY",
"color: #0a0"))}function ia(a,b,c,d,e){for(d=0;d<a.scenes.length;d++){var f=a.scenes[d];if(b.Xb)var g=ta.RB(f);else g=ta.RB($a)||ta.RB(f),f=$a;if(ub.enabled&&g)for(g=0;g<kc.length;g++)for(var h=z.xc(f,kc[g],b.id),k=0;k<h.length;k++){var l=h[k];l.A.Le==b.id&&(ta.pm(l,f),b.BP&&ta.Aa(l)&&ta.yF(l))}}e(b,c)}function ma(a,b,d,e,f){var g={};e=[];for(var h=a.scenes,k=0;k<a.scenes.length;k++){var l=h[k];if(l.J.Yd){var m=l.J.Yd.pn;if(m&&"FILE"===m.source){var l=m.uuid,n=T.El(Z(b.Oj)+m.filepath);e.push({id:l,
type:m.Hh?J.Xp:J.Yp,url:n});g[l]=m}}}e.length?J.enqueue(e,function(a,d,e,f){if(a){c(a,f,!0);e=[];f=Ha.ZN();for(var k=0;k<f.length;k++){var l=f[k];l.uri===d&&e.push(l)}for(d=0;d<e.length;d++)Ha.Jw(e[d],a,b.id);for(d=0;d<h.length;d++)if(e=h[d],e.J.Yd&&(f=e.J.Yd.pn,f===m)){var l=a,n=document.createElement("canvas");f=m.size[0];k=m.size[1];n.width=f;n.height=k;n=n.getContext("2d");n.drawImage(l,0,0);l=n.getImageData(0,0,f,k).data;n=new Float32Array(4);n[0]=1/16581375;n[1]=1/65025;n[2]=1/255;n[3]=1;f*=
k;for(var k=new Float32Array(f),p=0;p<f;p++)k[p]=n[1]*l[4*p+2]+n[2]*l[4*p+3];e.J.BI=k}}else for(a=g[d],d=0;d<h.length;d++)e=h[d],f=e.J.Yd.pn,f===a&&(e.J.Yd.pn=null,sa.warn("image",f.filepath," was not found. Disabling water shore effects."))},function(){f(b,d)}):f(b,d)}function ea(a,b,d,e,f){e=a.scenes[0];a=[];for(var g=[Fa.Ix,Fa.Jt,Fa.Jx,Fa.eE],h=0;h<g.length;h++){var k=Oa.dc(e,g[h]);k&&a.push(k)}if(a.length){e=[];h=J.Yp;e.push({id:"SEARCH_TEXTURE",type:h,url:ya.Tf.smaa_search_texture_path,nf:b.lh});
e.push({id:"AREA_TEXTURE",type:h,url:ya.Tf.smaa_area_texture_path,nf:b.lh});for(h=0;h<a.length;h++)if(g=a[h],g.type==Fa.Jt){a=g.rb;for(h=0;h<a.length;h++)if(g=a[h],"u_search_tex"==g.to)var l=g.Xa;else if("u_area_tex"==g.to)var m=g.Xa;break}e.length?J.enqueue(e,function(a,d,e,f){a&&(c(a,f,!1),d="SEARCH_TEXTURE"==d?l:m,d.source="IMAGE",Ha.Jw(d,a,b.id),Ha.jI(d,Ha.U,Ha.U))},function(){f(b,d)}):f(b,d)}else f(b,d)}function la(a,b,c,d){for(c=0;c<a.scenes.length;c++){var e=a.scenes[c];b.Xb||(e=$a);for(var f=
z.xc(e,"LAMP",b.id),g=0;g<f.length;g++){var h=f[g];h.A.Le==b.id&&d.lE.push({wb:e,aa:h})}f=z.xc(e,"ALL",b.id);for(g=0;g<f.length;g++)h=f[g],"LAMP"!=h.type&&h.A.Le==b.id&&(b.BP&&Da.pf(h)&&Oa.qo(h,!0),d.lE.push({wb:e,aa:h}))}}function ba(a,b,c,d,e,f){var g=d.lE;e=d.fQ;if(g.length){a=g[e].aa;var h=g[e].wb;e=Da.La(a,h);Oa.pm(h,a);!a.anchor||h.J.anaglyph_use||h.J.qw||za.append(a);d=++d.fQ/g.length;a.A.LO&&Oa.ju(a,!0);g=e.Yk;if(-1!=a.A.Ke&&g){var k=Ka.copy(a.A.bf.V,nb);Oa.MS(g,k)}g=a.cw;if(g.length&&h.J.gj)for(h=
na.X(a.A.D),a=na.la(a.A.D),e=e.gk,k=0;k<e.length;k++)Oa.PS(e[k],h,a),Da.QS(g,e[k].H.Kc)}else d=1;f(b,c,d)}function da(a,b,c,d,e){if(b.Xb){a=Oa.Ui();Oa.mD(a);d=Oa.Uz();for(var f=0;f<d.length;f++){var g=d[f];Oa.mD(g);Oa.a3(g,a)}Oa.gs(a)}else Oa.SS($a);a=z.Pj("ALL",b.id);z.d6(a);e(b,c)}function xa(a,b,c,d,e){if(b.Xb)for(a=Oa.Uz(),d=0;d<a.length;d++)for(var f=a[d],g=z.xc(f,"WORLD",0),h=0;h<g.length;h++)Oa.b1(f,g[h]),Oa.mD(f);e(b,c)}function ca(a,b,c,d,e){if(b.Xb)for(a=Oa.Uz(),d=0;d<a.length;d++){var f=
a[d];f.b4w_use_logic_editor&&W.c1(f,b.id)}e(b,c)}function V(a,b,c,d,e){if(b.Xb)for(d=0;d<a.scenes.length;d++)R(a.scenes[d],b.id),G(a.scenes[d],b.id,!1);else R($a,b.id),G($a,b.id,!1);e(b,c)}function Ja(a,b,c,d,e){for(d=0;d<a.scenes.length;d++)a.scenes[d].camera=null;Ma.media_auto_activation&&(b.rG||b.nG||b.vG)?ib||S(a,e,b,c):e(b,c)}function S(a,b,c,d){var e=vb.parentElement;Ta=e.style.zIndex;e.style.zIndex="999";ib=document.createElement("div");ib.style.position="relative";ib.style.height="88px";ib.style.width=
"88px";var f=Math.round(vb.offsetWidth/2-44);ib.style.top=Math.round(vb.offsetHeight/2-44).toString()+"px";ib.style.left=f.toString()+"px";ib.style.backgroundImage="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALAAAACwCAYAAACvt+ReAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAbrwAAG68BXhqRHAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABVDSURBVHic7Z15kF1Vncc/v05Ys7JIQJZ0GLaAgCzCQARGFMIwZKTiqCPBAbTEEodBhYKALJKSVWYsCpTBcgCLAdQBHWZACCCyhCElIRiWEMOSBZAkCglJOoTQyW/++J3Xfe95971+273v3fvOp6qr+5573+vT3d8+93vP+Z3fTwjUhKoKsC0wLvKxDTA68rEVMNK9ZDiwpft6PdDvvl4LvA+sBt5zn1cCy4EVwDJgpYhouj9RMZB2d6ATUdWtgD2BXvcxARgPbJ5RFzYAS4BFwGL38YqIvJ/R988NQcCAqm4LHADsA+yLibannX1KYBMm6JeBBcA8EVnZ3i61n64UsKoOAyYCh7iPCeTvd6HA68BcYA6wQEQ2trdL2ZO3P1rDqGoPsD9wNHAkMKqBt1nNoFctfV7j2ldj/rbPXdsvIuvd994S88QAIzCfHPXOHyHurRvt21PALOAFEdnUwHvkjsILWFV7gcnAUcDYWl8GvAEsZNCDLhKR91rfw4RvrjoWuyv0us97ALtS+99rFfAEMFNElqTRx06hkAJ2I94ngRMwXzsUmzCxzsP85csisja9HtaPqo7CbM9EzK/vRW1/vwXATODJ0h2hSBRKwO5hbAom3KFuw2uAZzD/+JyIrEm5ey1FVUcDB2Ee/hPU9vM+ANwnIu+m3L3MKISAVXU3YCrwNwx6zSTWArOBJ7Gn+P4q1+YGVR0OfByzSX+N+exKfAg8DtwtIm9m0L1UybWAVfWjwJcw4Vb6WRT4A3YbnV0U0VZCVTfDRDwZOJDKv5dNwGPAXSLydja9az25FLCqbg9MA44FhlW4bDXwIPYgszyrvnUSqrojJuRqlqof+C1wp4i8k1XfWkWuBKyqmwN/D3wRW7ZN4m3gfzHhfpBV3zoZNyofBXwem81I4gPgHsxabMiqb82SGwGr6lHAV7A50yQWA3cCT4c4gmRcPMeRwCnY0ngSK4BbRGRWZh1rgo4XsJtZOAvzdUm8CfwSeKxbJu+bxQl5EnAqsEuFy+YAPxKRP2fWsQboWAG7X/JJwGkMRnVFWQXcDjwchNsYbnVyMibkMQmXvA/8DLi/U+9qHSlg95B2HvCxhNP9wG+AO0SkL+F8oE7cws9UzCNvlnDJAuA6EVmWacdqoOMErKpHA98keS7zReAGEXkr2151B6q6C3A2sF/C6bWYpXgy215Vp2MErKpbYMI9NuF0H3ArNrPQkbeyouCs2wnA6SQPIo8AN3XKDE9HCFhVdwK+iwWv+DwLXF+k5c88oKrbAecAByecfh24shMsRdsFrKqHYn53pHdqAzYtdk8YdduDG40nA18DtvBOrwP+TURmZ96xCG0VsKp+DrtV+f1YDFwrIkuz7lOgHBeSej6wm38KmzP+deadcrRFwG765kxsmszncexBrXChf3nGzVScg63o+cwEftyOHSGZC9htmLwAONQ71Y/9N/9P1n0K1I6qngycQXkMyjPANVkPPJkKWFVHApcDe3un1mIPBc9n2Z9AY6jqgcBFlM9SLAAuy3J+PjMBu20yM4DdvVPLge+JyBtZ9SXQPC4G+zJsD1+U14BLs9p+lYmAXTzDFZRHQi0EZojIqiz6EWgtqroNcCmWQyPKUuDiLKY+Uxewqo4BrqL8CfZF4PKQrCPfuIe7S7Dg+ShvARekPTilKmBVHYGNvHt4p54FrshT3GmgMm4V9SJsf16URcBFae43TE3Abrbh+5Q/sM0Gri761p5uwwXNTwcO904twOxEKrMTqaRPcvO851Eu3uewqZYg3oIhIh9iVnGOd2ofYLrLhtRy0sr/dSbl/4nzMdvwYUrfM9Bm3MB0JfCCd+pQbFNCy2m5gN3ysL/CthCbWgmrawXHPdfMAF7xTk12iyAtpaUCVtXDsNiGKMuxqbIg3i7BzSzNwPbXRfmqC95qGS0TsKqOA75N/MGwjzDP25W41K+XYausA83AeS58tiW0RMCRucBo7oF+zPMWOrlcoDJudfUqIBrkMxK40KVIaJpWjcBnUR6MfkuIbQiIyDzgNq95d+AbrXj/pgWsqpMo3wb0eIgqC5Rw8cL+Xrrj3P7HpmhKwKr6EeBfvOYlwA3NvG+gkFyPxUhEOcvtQG+YhgXstpucSzykbgO2kyLMOARiOE1ci2XHLDES+I7TUkM0MwJPoTxvw63hoS1QCRFZjCVKiXIAcGKj79mQgJ11+LLX/BxwX6MdCXQN92K7N6Kc1qiVaHQE/ibx7JB9wA/D7uHAUDiN3MhgMRyArWlwqbluAbsskf5qyq0hb0OgVlwe4tu85sPcjFZd1CVgN/l8htf8IrYrNRCohwexAK8oX3OxxTVT7wg8FdghctyPbYEP1iFQF04zNzBYQxpge+Cz9bxPzQJ2qYb+wWu+NyTaCzSKW2q+32v+gttDWRP1jMDTiOfpXYUllg4EmuFOrJ5JiS2xDPI1UZOAXTWgT3vNt4f8vIFmcRq63Wv+jCtQMyS1jsCnEM/E8haWZjO3qOrDqrp/u/sRAGwSIFqzbjjwj7W8cEgBuwQWftDFfxagMvpngLmqerNbmAm0CVci4ude87GquvNQr61lBP6cd90SrCJ6ERiO7d/7o6pe0KoY1UBDPI5lJS3Rg2mvKlUF7J4Gj/Ga7yjgtNk2wNXAC6r6+XZ3phtxmvqF1/wpl/2nIkONwFOI1x7+E/B0/d3LDXsBvwz+uG08hRWqLLEZySl4B6goYLdN6ASv+b8LOPomEfxxG3Be+F6v+cRqq3PVRuCjie9xWwM82nj3ckfwx+3hYeLzwqNITqoNVBfw8d7xg10aqB78cYa46kd+bM3kStcnCtjVRNgn2gQ81Gznck7wx9kxE9NciYluOreMSiOwr/g/iMjbiVd2H8Efp4wr3+XvaPcdAZAgYJeYz/ccIVwyTvDH6ePf8Y9x2oyRNALvD4yNHPdhKVED5QR/nB5PY7XoSmwD7OtflCRgf9n4/0I61CEJ/rjFuCSB/sBZNhsRE7DL4XqEd01Rlo2zIPjj1uJrb5JvI/wReCIwOnK8GpiXQseKTPDHrWMutv5QYix2txvAF7Bf42BOsA8NE/xxkzjtzfWaYxr1BezvNvbTxQfqJ/jj5njWO45pdEDALuqnN3JuE5asJNAagj9ujGeJL2rs4YpmAvER+EDiyakXplkeqUsJ/rhOXMXP16JNRFKaRQU80XtteHhLj+CP68PX4sB8cE9So+Pl1LoTKBH8cW34WowL2BUlHB+5QIE/pt+vgCP44+rMJ+6DJ7h49YEReE/io/Ebwf9mTvDHFRCR1dhO+BLDcOWLS6Lt9V7j1/gKZEfwx8ks9I4nwKCAd/dOLkq9O4GhCP44jp84vRcqj8BBwJ1D8MeGr8legB5Xn8CPdg9lAjqL4I/jOSMAxquq9ADbAtFfyJpQWbNj6Vp/7BKoR3PxbQmM7QHGedcuy6xXgUbpVn+83DselyRg/6JA59Jt/tjX5g5BwPmnm/xx4gjs5576S0adCbSWbvDHK7zj7XqI78AAy7weyC9F9serveNRSQIOS8jFoIj+2Bfw6CDgYlM0f+xrc3QPVnC52kWB/FMUf+yPwCN7sBysUT7IqDOB7Mm7P97gHW+eJOCwC7n45NUff+gdb5YkYP+iQDHJoz9OFPBwrzGMwN1FnvxxooADgRLvt7sD9dJD+Yjrj8iBYrMSmA7sLyL3tbszQ1Bmd4djw/Lm3kX+016gePQDtwAXi8if292ZGqko4ChhBC4+jwDfFpEX292ROqlJwBVLGgVyz0Lg3BxYhUr4MyUbeihfeRtFoGjkyedWoyzsYTgJ68sZdSaQPnn0udVIFHBZhE9GnQmkS159bjV8bb4XBFw88u5zq+Hb27XDMX8UZfuMOhNoLSuBa4AfugIpRWQH7/id4ZTvM9oxo84EWkPRfG41fG0uTxKwr/JA51JEn1sNX5uJAg4jcOdTZJ9bjbId9D3Au8SD2EdFaxAEOoqizOfWjapuC4yINL0PvNcjIgos9a7vzapjgZroB34C7C0i1xT4Ia0aE7zjJSIyUPUwMfNfoCN4BDhIRL7eBQ9p1ej1jhfBYODOYu+kr/ZA9nSrz63EeO94CQwK2B+B90y9O4FKdMN8biPs5R0vhkEBvwJsxGoPAOyqqqNCnYxM6ab53LpQ1dHAzpGmjcCr4DK0i8h64jZCgH0y6l8g+Nyh2Jd4Ec7XnWZjlYkq1uIKpMZCYIqIHNdFixGN4GvxpdIX1QScx8QXeaFr53Mb5EDveECr0e1Dz2PF5EpD9d6qOsbVqg20huBz60RVxxCvoqUkjcAishJ4PXKhAB9Pu4NdRPC5jXEIcf/7SrSGi58XYm7CiwPNEXxuc/ganBM98AU8xzs+TFXDLuXGCD63SZz2fAHHBllfwAuI79AYSbAR9RLiFlrHwcTT/67CKzkbE7CIbASe8t7kk6l0rZgEn9tajvaOZ4nIpmhDUm60Wd7xEarqJ5QIxAk+t8W4bJmHec2+NhMF/DwWI1xiBHB467pWKILPTY8jga0jx+8SmT4rUSZgFx/sK/2ElnYt/wSfmz7HecdPOG3GqJRedaZ3fKCq7tSSbuWf4HNTRlV3BA7wmh9KujZRwCKyBJuRGGgCjm9J7/JL8LnZMZn44sV8EfF3DQGVR2AoH4VPUNUtm+1ZDgk+N0NUdQvKLauvxQGqCfgJ4nnTRgHHNt613BF8bns4jngGnjUkzD6UqChgEfkA+I3XPFVVu6EsQfC5bcBp67Ne831Oi4kMJcb7iecP3hE4orHu5YLgc9vLJCA6WbAB02BFqgpYRN4FHveap6mqJF2fY4LPbTNu9D3Fa340GnmWRC124G4guny3G+VLfHkl+NzO4Rhg18jxRuBXQ71oSAGLyJvAY17zNFUdlnB5nngAOCD43PbjRt8ves2/E5E/DfXaWh/I7iJejuuj5HxeWEROFBF/G1WgPZwI7BI57gd+XssLaxKwiLwN/NZrPlVVRyRdHwjUiqqOBKZ5zQ+LyLJaXl/PlNidwPrI8RjgS3W8PhBIYhrxed/12B2/JmoWsIi8gz3QRTlJVXdJuj4QGApV3Q34W6/5F272qybqXZT4FfF8wsOBbxVwWi2QMk4z/0x8Z/wy4N563qcuAbtpplu95n0I4ZaB+jmR8oQlP613KrPuZWERmQX83ms+XVW3q/e9At2Jqm4PnOY1zxaR2fW+V6NxDTcCfZHjEQQrEaiBiHWI7rZYB/x7I+/XkICdyb7daz4ImNLI+wW6ipOBQ72220TkL428WTORZfcDL3htp6tqbxPvGSgwqro78E9e8zxsVbQhGhaw25/0r8DaSPPmwPldGvgeqIKqbgWcD0R3uK/BEnmX7XWrlaZie92wf4PXvBtwbvDDgRJOC+cQXy4G+HGj1qFE08HpIvIUFgAe5QjKA5MD3ctUyhPkzBSRJ5t941btrriJeGZLgDNU1c/rGugyVPUgyn3vq8DNrXj/lgjYbfn4PvG8asOA74aHuu7FLRVPZ7D2CpjvvapVsdct298mIiuAHxAPft8auERVt2nV9wnkA1dZ83vEq2sqcJ2I+OWNG6alGzRF5DnKl5rHAZe6p9BAF6CqWwOXUV6c+6ci8mwrv1fLdxiLyK8Bf1/ZnsCMML1WfFxeh0uBv/JOPSgidQXq1EJaW+R/Avjr2hOBi13WwUABcQmpLwQ+5p2agz3ot5xUBOxyuF5HPD0VWLLsC0K61uLh/qYXUb5MPB+42uWebjmpLja4LUdXAHt4p54HZpSK1QXyjbMNF2PxMFEWAReKyNryV7WG1FfLXJnQq7EVuigvAZeLyLq0+xBID/dccwnltdzeBKYPldehWVJPEyUiq7H/Tj+74H7AFWGKLb+4qbJrKBfvUuCitMULGYzAJdzu0xmUVx1/BxuJ/ZW8QAfjFim+R/lU2WvApVkVyMw04MZ54sspLyTeB1wpIvOy7E+gMdzy8HTiixRgD2yXi0hf+avSIfOIMeeZLgA+4Z3aiC2C3NtMeF0gPVxU2VQstsHPzPR74NqsH8zbEvLoUgmdCZyUcHo2FiOa2X9xYGjcwPMtksuuPQjclNZUWTXaGrOrqicDX03ox1Lsv3lx5p0KlOF2UpxPeTzvJuA/0lhhq5W2B52r6gHYL2esd+pD4A7gnmAp2oOzDFOAM4jvpACLKvuBiPj1tTOl7QIGUNVx2CqOv34OVhv3epcZKJARbuv7OZQvToDNNFzZyqiyRukIAcNAZcZvUF4fDGyW4mfAA2E0Thc36v4d9qC2dcIlM4GbOyWXcscIuISqTgLOJl7kucR84AYReSPbXnUHbm73bCzwymcNcKPbQtYxdJyAYeD29R3Ki92B5Y69D7grzFS0BrfIdAqW7ml4wiXzsJmhpjZgpkFHChhqupWtxpKrPNSO6Zsi4LLsnwCcSjzFaYl1wG10sHXrWAGXcOvtX8cq2CSxHPgvTMibKlwTiOAGh0nAl4GdK1z2DPCjThx1o3S8gEs4b/wVbItSEkuxxMizOnW0aDduAWkSZhd2rXDZMmxu9+nMOtYEuREwDET8n4jd8pJsBdiIfC82Iod4YwaCzY8CvkD5YkSJ9Vj+57s7ZYahFnIl4BLOVkwDPk3yQwfYU/ODmJDfzqpvnYSq7oQVzp5MsscFeyh+GHsorjkzeqeQSwGXUNUdsTodn6JybLNiO0BmYjloczO6NIKbTz8SqyK1P5X/xhuB32HCbfuCRKPkWsAlXJ2OqZiQq+23W4cFC80C5opIf5Vrc4OzCAdhNuFwKtsrsCX6R7El+iHrsHU6hRBwCbe74yTMJ1e6ZZbow56052JiTn33QCtR1bHAwcAh2EbKoUqercFS4t6Xt5+1GoUScAm3yfAo7Dbq12FIfAmWr+t5bLXvZbcVqmNQ1THYCtm+2Bae3ant7zcfeAh4slrV97xSSAFHccujx2P1nbet9WXAW1j1+iVY4sIlWT3kuHoj44EJQC+WGKaecmbvAk9gGSALvexeeAGXcJP3+2Ej8yTKwzdroQ+bJ12BTdetwFYE10Q+r8PiZPtL03guGHw49qC5NWZvRkc+74DNb5c+GqmAugrz9rOAl7plLrxrBBzFTejvhXnHQ7C8FXn7XSjwCvCs+1jYjSuRefujpYLzl/tj/nIi5i/9PV/tZiNmZV7Gcmq8mNXO304mCDgBd8vfA/OfvZgXHQ9klZxwPbAY89+L3NevhpXFcoKA68BN05V86g7Adgz62NGYd90KG72Hua8B3sdG0H5MnH2YZy755ncY9NTLijTNlTb/Dz+sKh/f1rAbAAAAAElFTkSuQmCC')";
ib.style.backgroundSize="88px";fb=document.createElement("div");fb.style.position="relative";fb.style.height=vb.offsetHeight.toString()+"px";fb.style.width=vb.offsetWidth.toString()+"px";fb.style.background="rgba(0, 0, 0, 0.5)";fb.style.zIndex="999";e.appendChild(fb);fb.appendChild(ib);Yb=function(){c.rG&&(Ha.play(),Ha.pause(),Ha.reset());if(c.nG){if(c.Xb)for(var e=0;e<a.scenes.length;e++)G(a.scenes[e],c.id,!0);else G($a,c.id,!0);Ea.pause()}c.vG&&Ea.qQ();oa();b(c,d)};ka.Ih(ib,Yb)}function oa(){if(ib){var a=
vb.parentElement;a.style.zIndex=Ta;ka.MB(ib,Yb);fb.removeChild(ib);a.removeChild(fb);ib=fb=null;Ta=0}}function Z(a){(a=a.split("/").slice(0,-1).join("/"))&&(a+="/");return a}function fa(a){ha.ZO(a)&&ha.remove(a);Ya.l3(a);z.lu(a);va.tm(a)&&va.Uf(a);ta.Aa(a)&&ta.Bp(a);Oa.KQ(a);Da.Um(a)&&Ea.Q4(a);za.h1(a)&&za.remove(a)}function aa(a){var b=ha.GN(a);return(a=b&&b.parent==a?null:a.parent||b)?1+aa(a):0}var za=w("__anchors"),ha=w("__animation"),J=w("__assets"),ra=w("__batch"),ya=w("__config"),Q=w("__constraints"),
va=w("__controls"),Va=w("__texcomp"),Ba=w("__debug"),Aa=w("__extensions"),ka=w("__input"),Y=w("__loader"),ua=w("__material"),Pa=w("__md5"),wa=w("__nla"),W=w("__logic_nodes"),Ya=w("__particles"),Ga=w("__nodemat"),z=w("__objects"),Da=w("__obj_util"),ta=w("__physics"),sa=w("__print"),Qa=w("__quat"),cb=w("__reformer"),Ia=w("__renderer"),Oa=w("__scenes"),Ea=w("__sfx"),Na=w("__shaders"),Fa=w("__subscene"),Ra=w("__tbn"),Ha=w("__textures"),ga=w("__time"),Lb=w("__transform"),na=w("__tsr"),T=w("__util"),Ka=
w("__vec3"),Wa=w("__vec4"),Xa=ya.fo,Ma=ya.L,ab=ya.Je,ub=ya.O,rb=ya.ra,Ca=null,Ua=null,Xb="",$a=null,Fb={},nb=new Float32Array(3),sb=new Float32Array(4),ic=new Float32Array(4),jc=Ra.create(),ib=null,fb=null,Ta=0,Ib=!1,Yb=null,Cc=["LAMP"],kc=["MESH","CAMERA","EMPTY"],Mb=["BSDF_GLOSSY","BSDF_DIFFUSE","BSDF_TRANSPARENT"],vb=null;a.Xi=function(a){return Y.Xi(a)};a.update=function(){Y.k6(Ca)};a.B4=function(a){vb=a};a.b6=function(a,b){if(ib){fb.style.height=b.toString()+"px";fb.style.width=a.toString()+
"px";var c=Math.round(a/2-44);ib.style.top=Math.round(b/2-44).toString()+"px";ib.style.left=c.toString()+"px"}};a.load=function(a,c,d,e,g){var l={load_main:{Rb:Y.Dh,$b:!1,inputs:[],fc:!1,hc:500,uc:!1,kc:b},duplicate_objects:{Rb:Y.Ie,$b:!1,inputs:["load_main"],fc:!1,hc:50,uc:!1,kc:D},load_binaries:{Rb:Y.Dh,$b:!1,inputs:["load_main"],fc:!1,hc:500,uc:!1,kc:k},wait_for_shaders:{Rb:Y.Ie,$b:!1,inputs:[],fc:!1,hc:50,uc:!0,sm:h},prepare_bindata:{Rb:Y.Ie,$b:!1,inputs:["duplicate_objects","load_binaries"],
fc:!1,hc:100,uc:!1,kc:O},prepare_bpy_data:{Rb:Y.Ie,$b:!1,inputs:["duplicate_objects","prepare_bindata"],fc:!1,hc:100,uc:!1,kc:x},process_objects:{Rb:Y.Ie,$b:!1,inputs:["prepare_bpy_data"],fc:!1,hc:150,uc:!1,kc:N},process_scenes:{Rb:Y.Ie,$b:!1,inputs:["process_objects","wait_for_shaders"],fc:!1,hc:300,uc:!1,kc:p},load_smaa_textures:{Rb:Y.Dh,$b:!1,inputs:["process_scenes"],fc:!1,hc:30,uc:!0,kc:ea},load_shoremap:{Rb:Y.Dh,$b:!1,inputs:["process_scenes"],fc:!1,hc:30,uc:!0,kc:ma},load_images:{Rb:Y.Dh,$b:!0,
inputs:["process_scenes"],fc:!0,hc:500,uc:!1,kc:E},update_scenes_nla:{Rb:Y.Ie,$b:!1,inputs:["process_scenes","load_images"],fc:!1,hc:50,uc:!1,kc:f},wait_physics_workers:{Rb:Y.Ie,$b:!1,inputs:["load_shoremap"],fc:!1,hc:20,uc:!1,sm:pa},add_physics_objects:{Rb:Y.Ie,$b:!1,inputs:["wait_physics_workers"],fc:!1,hc:50,uc:!1,kc:ia},add_objects:{Rb:Y.Ie,$b:!1,inputs:["add_physics_objects"],fc:!1,hc:600,uc:!1,kc:la,sm:ba,hu:da,iu:{lE:[],fQ:0}},init_cube_sky_dynamic_props:{Rb:Y.Ie,$b:!1,inputs:["add_objects",
"load_images"],fc:!1,hc:50,uc:!1,kc:xa},init_logic_nodes:{Rb:Y.Ie,$b:!1,inputs:["update_scenes_nla","add_objects"],fc:!1,hc:50,uc:!1,kc:ca},load_speakers:{Rb:Y.Dh,$b:!0,inputs:["add_objects"],fc:!0,hc:100,uc:!1,kc:X},mobile_media_start:{Rb:Y.Ie,$b:!1,inputs:["load_images","update_scenes_nla","load_speakers","init_logic_nodes"],fc:!0,hc:5,uc:!1,kc:Ja,sm:Ja},synchronize_media:{Rb:Y.Ie,$b:!0,inputs:["mobile_media_start"],fc:!0,hc:50,uc:!1,kc:V},prepare_nla:{Rb:Y.Ie,$b:!1,inputs:["mobile_media_start"],
fc:!1,hc:5,uc:!0,kc:q},start_nla:{Rb:Y.Ie,$b:!0,inputs:["prepare_nla"],fc:!1,hc:5,uc:!0,kc:ja}},m=Y.fG();m||(m=Y.DM(),Ca={},Ua={},Fb={});Ca[m.Jg.length]={};return Y.HM(l,a,c,d,t,e||rb.jL,Ma.do_not_load_resources,g,!1)};a.kD=function(a){var b=Y.fG();if(!b||!b.Jg.length||a&&!Y.u5(b.Jg[a]))sa.error("Unable to unload data!");else{if(0==a)sa.log("%cUNLOAD ALL","color: #00a"),za.Ja(),ha.Ja(),Ea.Ja(),ra.Ja(),Oa.Ja(),Y.Ja(),va.Ja(),ta.Ja(),z.Ja(),T.Ja(),Ia.Ja(),Ga.Ja(),Na.Ja(),Aa.Ja(),J.Ja(),Ha.Ja(),W.Ja(),
Ya.Ja(),ka.Ja(),Ba.Ja(),Ua=null,Fb={},Ca=$a=null,Ib=!1;else{sa.log("%cUNLOAD DATA "+a,"color: #00a");ha.j3(a);for(var b=z.Pj("ALL",z.Vc),c=0;c<b.length;c++){var d=b[c];Da.bG(d)!=a&&z.Tr(d,!1,!1,!1)}b=z.Pj("ALL",a);for(c=b.length-1;0<=c;c--)d=b[c],fa(d),z.Bp(d);b=z.Pj("ALL",z.Vc);for(c=0;c<b.length;c++)z.Tr(b[c],!0,!0,!0)}wa.Ja(a);oa()}};a.uQ=fa;a.iR=function(a){Xb=a};a.QK=function(){Ib||Ma.media_auto_activation||(Ha.play(),Ha.pause(),Ha.reset(),G($a,z.Vc,!0),Ea.pause(),Ma.wG&&Ea.qQ(),Ib=!0)};a.reset=
function(){vb=null};a.tQ=function(a,c,d){var e={load_main:{Rb:Y.Dh,$b:!1,inputs:[],fc:!1,hc:500,uc:!1,kc:b},load_binaries:{Rb:Y.Dh,$b:!1,inputs:["load_main"],fc:!1,hc:500,uc:!1,kc:k},load_images:{Rb:Y.Dh,$b:!1,inputs:["load_main"],fc:!1,hc:500,uc:!1,kc:E},preload_sounds:{Rb:Y.Dh,$b:!1,inputs:["load_main"],fc:!1,hc:500,uc:!1,kc:r}},f=Y.fG();f||(f=Y.DM(),Ca={},Ua={},Fb={});Ca[f.Jg.length]={};return Y.HM(e,a,c,d,t,!1,Ma.do_not_load_resources,!1,!0)};a.IS=function(){J.NX()}};b4w.module.__loader=function(a,w){function t(b,e,g,h){var k=I,l=P.create(),m;for(m in e){var p=c(e[m]);if(h&&p.fc||!b&&p.uc)p.rw=!0;P.Z(l,p)}for(m in e)for(p=e[m],p.name=m,b=0;b<p.inputs.length;b++)P.I(l,e[p.inputs[b]],p,null);e=c({name:"out",Rb:a.FT,kc:function(a,b,c,e,d){b.Xb&&(k.JI=!0);v(b)||(b.status=2);b.DP(b.id,!0);d(b,c);N.log("%cTHREAD "+b.id+": LOADED CALLBACK","color: #f0f;")},hc:5});if(g)g=P.ev(l);else{m=P.clone(l);do{g=P.ev(m);p=[];for(b=0;b<g.length;b++){h=g[b];var r=P.lb(m,h);r.$b&&
p.push(h)}for(b=0;b<p.length;b++)P.Dg(m,p[b]);p.length&&P.OE(m)}while(p.length)}P.Z(l,e);for(b=0;b<g.length;b++)h=g[b],r=P.lb(l,h),e.inputs.push(r.name),P.I(l,r,e,null);return l}function c(a){a.$b=a.$b||!1;a.Rb||0===a.Rb||(a.Rb=a.Ie);a.inputs=a.inputs||[];a.ap=a.ap||!1;a.rw=a.rw||!1;a.hc=a.hc||0;a.fc=a.fc||!1;a.uc=a.uc||!1;a.status=0;a.ida=0;a.CP=0;a.iu=a.iu||null;return a}function b(a,b,c){b.lM(c,b);b.status=3;a.kE--;p.debug_loading&&N.log("%cTHREAD "+b.id+": 100% LOADING END "+Math.round(performance.now()-
b.Cw)+"ms","color: #f0f;");b.HI=null;b.lM=null;p.debug_loading||(b.vi=null);b.Tl=null}function k(a,b){for(var c=[],e=[],g=0;g<b.length;g++){var h=b[g];P.lb(a.vi,h).ap&&(P.Dn(a.vi,h,function(e){var g=!0;P.$l(a.vi,e,function(a,b){if(!b.ap)return g=!1,1});g&&-1==c.indexOf(e)&&-1==b.indexOf(e)&&c.push(e)}),e.push(g))}for(g=e.length-1;0<=g;g--)b.splice(e[g],1);return c}function h(a){function b(b,c){var e=P.lb(a.vi,b),g=P.lb(a.vi,c),h=g.Rb-e.Rb;h||(h=e.$b-g.$b);return h}var c=[],e=a.Tl,g=!1;do{var h=k(a,
e);c.push.apply(c,e);0<h.length&&(g=!0);e=h}while(0<h.length);g&&c.sort(b);a.Tl=c;return a.Tl.length}function O(a,b,c){if(b.rw)return b.ap=!0,p.debug_loading&&N.log("%cTHREAD "+a.id+": SKIP STAGE "+b.name,"color: #f0f;"),x(a,b),!1;if(p.debug_loading&&0==b.status){var e=m(a);N.log("%cTHREAD "+a.id+": "+e+"% "+("LOADING START "+b.name)+" "+Math.round(performance.now()-a.Cw)+"ms ","color: #f0f;")}if(!b.kc&&!b.sm&&!b.hu)return x(a,b),!1;if(0==b.status&&(b.status++,b.kc))return b.kc(c,a,b,b.iu,x,r),!0;
if(1==b.status){if(b.sm)return b.sm(c,a,b,b.iu,x,r),!0;b.status++}return 2==b.status&&(b.status++,b.hu)?(b.hu(c,a,b,b.iu,x,r),!0):!1}function m(a){if(0==a.LC)return 100;var b=0;P.ka(a.vi,function(c,e){a.do_not_load_resources&&e.fc||(b+=e.CP*e.hc)});return M.trunc(100*b/a.LC)}function x(a,b){b.ap=!0;b.status=3;g(a,b,1);if(p.debug_loading){var c=m(a);N.log("%cTHREAD "+a.id+": "+c+"% "+("LOADING END "+b.name)+" "+Math.round(performance.now()-a.Cw)+"ms ","color: #f0f;")}}function r(a,b,c){1>c?g(a,b,c):
b.status++}function g(a,b,c){var e=I;if(b.kc||b.sm||b.hu)if(b.CP=c,b=m(a),a.OM!=b||1==c)a.HI(b,performance.now()-a.Cw,a.id),a.OM=b,e.QG=!0}function e(a,b){var c=null;P.ka(a.vi,function(a,e){if(e.name==b)return c=e,1});return c}function B(){return 0==I.kE}function v(a){return a&&(3==a.status||4==a.status)}var P=w("__graph"),N=w("__print"),M=w("__util"),p=w("__config").L;a.Ie=0;a.Dh=1;a.FT=2;var I=null;a.fG=function(){return I};a.DM=function(){var a={Jg:[],oF:0,kE:0,JI:!1,QG:!1};return I=a};a.HM=function(a,
b,c,e,g,h,k,m,p){var l=I,n=l.Jg.length,f={id:n,Xb:0==n,status:0,Oj:b,uL:"",DP:c||function(){},BP:m||!1,Kfa:h,Cw:0,OM:0,LC:0,XH:!1,HI:e||function(){},lM:g||function(){},vi:null,Tl:null,rG:!1,nG:!1,vG:!1,lh:p};a=t(f.Xb,a,h,k);f.vi=a;b=[];c=P.t0(a);for(e=0;e<c.length;e++)b.push(c[e]);f.Tl=b;P.ka(a,function(a,b){!(b.kc||b.sm||b.hu)||f.do_not_load_resources&&b.fc||(f.LC+=b.hc)});l.Jg.push(f);l.kE++;return f.id};a.k6=function(c){var e=I;if(e&&!B())if(e.QG)e.QG=!1;else{var g=performance.now();do{var k=e.Jg[e.oF],
m=c[k.id];if(!v(k))if(0==k.status&&(k.status=1,k.Cw=performance.now(),k.HI(0,0,k.id),p.debug_loading&&N.log("%cTHREAD "+k.id+": 0% LOADING START 0ms","color: #f0f;")),h(k)){var r=k,x=r.Tl.length;do{var t=P.lb(r.vi,r.Tl[0]),w=O(r,t,m);t.Rb==a.Dh&&(r.XH=!0);t=r.Tl.shift();r.Tl.push(t);x--}while(!w&&0!=x)}else b(e,k,m);e.JI&&(e.oF=(e.oF+1)%e.Jg.length);if(k.XH){k.XH=!1;break}}while(16>performance.now()-g)}};a.MK=function(a){var c=I;b(c,a,null);a.status=4;a.Xb&&(c.JI=!0);a.DP(a.id,!1)};a.Uea=r;a.qC=function(a,
b){var c=e(a,b);null!==c&&(c.rw=!0)};a.ap=B;a.u5=v;a.Xi=function(a){var b=I;if(!b)return!1;a|=0;return b.Jg[a]&&(3==b.Jg[a].status||2==b.Jg[a].status)};a.G0=function(b){if(p.debug_loading){var c=I;return c&&c.Jg[b]&&c.Jg[b].vi?P.SM(c.Jg[b].vi,function(b,c){if(c.rw)return"SKIPPED\n("+c.name+")";var e=c.name+"\n",g=[];g.push(c.Rb==a.Dh?"ASYNC":"SYNC");c.$b&&g.push("BKG");c.fc&&g.push("RES");return e+g.join(" | ")},null):null}N.error("Debug mode isn't enabled. Can not retrieve the graph.")};a.Ja=function(){I=
null}};b4w.module.__md5=function(a){function w(a,h){var m=a[0],r=a[1],g=a[2],e=a[3],m=c(m,r,g,e,h[0],7,-680876936),e=c(e,m,r,g,h[1],12,-389564586),g=c(g,e,m,r,h[2],17,606105819),r=c(r,g,e,m,h[3],22,-1044525330),m=c(m,r,g,e,h[4],7,-176418897),e=c(e,m,r,g,h[5],12,1200080426),g=c(g,e,m,r,h[6],17,-1473231341),r=c(r,g,e,m,h[7],22,-45705983),m=c(m,r,g,e,h[8],7,1770035416),e=c(e,m,r,g,h[9],12,-1958414417),g=c(g,e,m,r,h[10],17,-42063),r=c(r,g,e,m,h[11],22,-1990404162),m=c(m,r,g,e,h[12],7,1804603682),e=c(e,m,r,g,
h[13],12,-40341101),g=c(g,e,m,r,h[14],17,-1502002290),r=c(r,g,e,m,h[15],22,1236535329),m=b(m,r,g,e,h[1],5,-165796510),e=b(e,m,r,g,h[6],9,-1069501632),g=b(g,e,m,r,h[11],14,643717713),r=b(r,g,e,m,h[0],20,-373897302),m=b(m,r,g,e,h[5],5,-701558691),e=b(e,m,r,g,h[10],9,38016083),g=b(g,e,m,r,h[15],14,-660478335),r=b(r,g,e,m,h[4],20,-405537848),m=b(m,r,g,e,h[9],5,568446438),e=b(e,m,r,g,h[14],9,-1019803690),g=b(g,e,m,r,h[3],14,-187363961),r=b(r,g,e,m,h[8],20,1163531501),m=b(m,r,g,e,h[13],5,-1444681467),e=
b(e,m,r,g,h[2],9,-51403784),g=b(g,e,m,r,h[7],14,1735328473),r=b(r,g,e,m,h[12],20,-1926607734),m=t(r^g^e,m,r,h[5],4,-378558),e=t(m^r^g,e,m,h[8],11,-2022574463),g=t(e^m^r,g,e,h[11],16,1839030562),r=t(g^e^m,r,g,h[14],23,-35309556),m=t(r^g^e,m,r,h[1],4,-1530992060),e=t(m^r^g,e,m,h[4],11,1272893353),g=t(e^m^r,g,e,h[7],16,-155497632),r=t(g^e^m,r,g,h[10],23,-1094730640),m=t(r^g^e,m,r,h[13],4,681279174),e=t(m^r^g,e,m,h[0],11,-358537222),g=t(e^m^r,g,e,h[3],16,-722521979),r=t(g^e^m,r,g,h[6],23,76029189),m=
t(r^g^e,m,r,h[9],4,-640364487),e=t(m^r^g,e,m,h[12],11,-421815835),g=t(e^m^r,g,e,h[15],16,530742520),r=t(g^e^m,r,g,h[2],23,-995338651),m=k(m,r,g,e,h[0],6,-198630844),e=k(e,m,r,g,h[7],10,1126891415),g=k(g,e,m,r,h[14],15,-1416354905),r=k(r,g,e,m,h[5],21,-57434055),m=k(m,r,g,e,h[12],6,1700485571),e=k(e,m,r,g,h[3],10,-1894986606),g=k(g,e,m,r,h[10],15,-1051523),r=k(r,g,e,m,h[1],21,-2054922799),m=k(m,r,g,e,h[8],6,1873313359),e=k(e,m,r,g,h[15],10,-30611744),g=k(g,e,m,r,h[6],15,-1560198380),r=k(r,g,e,m,h[13],
21,1309151649),m=k(m,r,g,e,h[4],6,-145523070),e=k(e,m,r,g,h[11],10,-1120210379),g=k(g,e,m,r,h[2],15,718787259),r=k(r,g,e,m,h[9],21,-343485551);a[0]=m+a[0]&4294967295;a[1]=r+a[1]&4294967295;a[2]=g+a[2]&4294967295;a[3]=e+a[3]&4294967295}function t(a,b,c,h,g,e){b=(b+a&4294967295)+(h+e&4294967295)&4294967295;return(b<<g|b>>>32-g)+c&4294967295}function c(a,b,c,h,g,e,k){return t(b&c|~b&h,a,b,g,e,k)}function b(a,b,c,h,g,e,k){return t(b&h|c&~h,a,b,g,e,k)}function k(a,b,c,h,g,e,k){return t(c^(b|~h),a,b,g,
e,k)}var h="0123456789abcdef".split("");a.KO=function(a){var b=a,c=b.length;a=[1732584193,-271733879,-1732584194,271733878];var k;for(k=64;k<=b.length;k+=64){var g,e=b.substring(k-64,k),t=[];for(g=0;64>g;g+=4)t[g>>2]=e.charCodeAt(g)+(e.charCodeAt(g+1)<<8)+(e.charCodeAt(g+2)<<16)+(e.charCodeAt(g+3)<<24);w(a,t)}b=b.substring(k-64);g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(k=0;k<b.length;k++)g[k>>2]|=b.charCodeAt(k)<<(k%4<<3);g[k>>2]|=128<<(k%4<<3);if(55<k)for(w(a,g),k=0;16>k;k++)g[k]=0;g[14]=8*c;w(a,
g);for(b=0;b<a.length;b++){c=a[b];k="";for(g=0;4>g;g++)k+=h[c>>8*g+4&15]+h[c>>8*g&15];a[b]=k}return a.join("")}};b4w.module.config=function(a,w){var t=w("__config"),c=w("__compat"),b=w("__debug"),k=w("__data"),h=w("__print");a.Bk=t.Bk;a.Ak=t.Ak;a.Vn=t.Vn;a.mK=t.mK;a.Gt=t.Gt;a.set=t.set;a.get=t.get;a.reset=t.reset;a.WH=t.WH;a.Uba=t.SF;a.SF=t.SF;a.Fq=function(a){k.Xi()?h.error("Cannot change quality profile after a scene is loaded."):(t.set("quality",a),b.Nz()&&(t.Fq(),c.vR(b.Nz(),!1)))}};b4w.module.constraints=function(a,w){var t=w("__camera"),c=w("__constraints"),b=w("__obj_util"),k=w("__physics"),h=w("__print"),O=w("__transform"),m=w("__util"),x=w("__vec3");a.B9=function(a,g,e,m,v){b.ea(a)?c.Mi(a,g)?c.Li(a,g)?(e=e||new Float32Array(3),v=v||1,m=m?m:[0,0,0,1],g instanceof Array&&2==g.length?c.qW(a,g[0],g[1],e,m,v):c.UK(a,g,e,m,v),O.W(a),k.$(a)):h.error("Constraint recursion is forbidden."):h.error("Can not apply constraint. Object and target must be different."):h.error('Wrong object: "'+
a.name+'" is not dynamic.')};a.nW=function(a,g,e,x,v,t,w,M){b.ea(a)?c.Mi(a,g)?c.Li(a,g)?(v=m.Pf(v)?v:Math.PI/2,t=m.Pf(t)?t:-Math.PI/2,w=m.Pf(w)?w:Math.PI/2,M=m.Pf(M)?M:-Math.PI/2,e=e||new Float32Array(3),x=x?new Float32Array(x):null,c.oW(a,g,e,x,v,t,w,M),O.W(a),k.$(a)):h.error("Constraint recursion is forbidden."):h.error("Can not apply constraint. Object and target must be different."):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.A9=function(b,c,e,k,m,x,w,M){h.hf("append_semi_stiff_cam",
"append_semi_stiff");t.Ne(b)?a.nW(b,c,e,k,m,x,w,M):h.error("append_semi_stiff_cam(): wrong object type, only EYE camera objects can be parented.")};a.z9=function(b,c,e,k){h.hf("append_semi_soft_cam","append_semi_soft");t.Ne(b)?a.lW(b,c,e,k):h.error("append_semi_soft_cam(): wrong object type, only EYE camera objects can be parented.")};a.lW=function(a,g,e,x){if(b.ea(a))if(c.Mi(a,g))if(c.Li(a,g)){if(!m.Pf(x)||0>x)x=.25;e=e||new Float32Array(3);c.mW(a,g,e,x);O.W(a);k.$(a)}else h.error("Constraint recursion is forbidden.");
else h.error("Can not apply constraint. Object and target must be different.");else h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.rW=function(a,g){var e=[0,0,.5];b.ea(a)?c.Mi(a,g)?c.Li(a,g)?(e=e||new Float32Array(3),c.sW(a,g,e),O.W(a),k.$(a)):h.error("Constraint recursion is forbidden."):h.error("Can not apply constraint. Object and target must be different."):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.t9=function(a,g,e,m,v){if(b.ea(a))if(c.Mi(a,g))if(c.Li(a,g)){m=m||!1;e=
e||"XYZ";v=v||1;var r=O.Me(a,new Float32Array(3)),x=new Float32Array(3);x[0]=-1!=e.indexOf("-X")?-1:-1!=e.indexOf("X")?1:0;x[1]=-1!=e.indexOf("-Y")?-1:-1!=e.indexOf("Y")?1:0;x[2]=-1!=e.indexOf("-Z")?-1:-1!=e.indexOf("Z")?1:0;c.eW(a,g,r,x,m,v);O.W(a);k.$(a)}else h.error("Constraint recursion is forbidden.");else h.error("Can not apply constraint. Object and target must be different.");else h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.v9=function(a,g,e){b.ea(a)?c.Mi(a,g)?c.Li(a,g)?(c.gW(a,
g,e||1),O.W(a),k.$(a)):h.error("Constraint recursion is forbidden."):h.error("Can not apply constraint. Object and target must be different."):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.u9=function(a,g,e,m,v){if(b.ea(a))if(c.Mi(a,g))if(c.Li(a,g)){e=e||"XYZ";var r=new Float32Array(3);r[0]=-1!=e.indexOf("-X")?-1:-1!=e.indexOf("X")?1:0;r[1]=-1!=e.indexOf("-Y")?-1:-1!=e.indexOf("Y")?1:0;r[2]=-1!=e.indexOf("-Z")?-1:-1!=e.indexOf("Z")?1:0;c.fW(a,g,r,m||!1,v||1);O.W(a);k.$(a)}else h.error("Constraint recursion is forbidden.");
else h.error("Can not apply constraint. Object and target must be different.");else h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.C9=function(a,g,e,m){b.ea(a)?c.Mi(a,g)?c.Li(a,g)?(e=e||new Float32Array(3),m=m?new Float32Array(m):[0,0,0,1],c.tW(a,g,e,m),O.W(a),k.$(a)):h.error("Constraint recursion is forbidden."):h.error("Can not apply constraint. Object and target must be different."):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.D9=function(a,g,e,t,v,w){if(b.ea(a))if(c.Mi(a,
g))if(c.Li(a,g)){var r=m.Ee;"-Y"==e?r=m.Eh:"Y"==e?r=m.Ee:"-X"==e?r=m.kt:"X"==e?r=m.Cf:"-Z"==e?r=m.qc:"Z"==e&&(r=m.ic);e=m.ic;"X"==t?e=m.Cf:"Y"==t&&(e=m.Ee);1==Math.abs(x.dot(r,e))?h.error("Can not use parallel vectors for track and up axes."):(c.uW(a,g,r,e,v||!1,w||1),O.W(a),k.$(a))}else h.error("Constraint recursion is forbidden.");else h.error("Can not apply constraint. Object and target must be different.");else h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.x9=function(a,g,e,m){b.ea(a)?
c.Mi(a,g)?c.Li(a,g)?(c.iW(a,g,e,m),O.W(a),k.$(a)):h.error("Constraint recursion is forbidden."):h.error("Can not apply constraint. Object and target must be different."):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.VK=function(a,g,e){b.ea(a)?c.Mi(a,g)?c.Li(a,g)?(e=e||{},c.VK(a,g,e),O.W(a),k.$(a)):h.error("Constraint recursion is forbidden."):h.error("Can not apply constraint. Object and target must be different."):h.error('Wrong object: "'+a.name+'" is not dynamic.')};a.remove=function(a,
b){b=b||!1;a.Cc&&c.remove(a,b);b&&O.W(a)}};b4w.module.scenes=function(a,w){function t(){var a=h.Wh();return x.wp(a.clientWidth/2,a.clientHeight/2)}function c(a){return r.$o(a)||r.ur(a)||r.pv(a)||r.vr(a)}var b=w("__batch"),k=w("__camera"),h=w("__container"),O=w("__data"),m=w("__graph"),x=w("__objects"),r=w("__obj_util"),g=w("__print"),e=w("__scenes"),B=w("__scenegraph"),v=w("__subscene"),P=w("__util");a.Vc=x.Vc;a.gs=function(a){var b=e.cv();e.gs(P.Pd("name",a,b))};a.R=function(){return e.Ya()?e.R().name:""};a.Oba=function(){for(var a=e.cv(),
b=[],c=0;c<a.length;c++)b.push(a[c].name);return b};a.ll=function(){if(e.Ya())return e.Jm(e.R());g.error("No active scene");return!1};a.Aba=function(a,b){var c=x.ud(x.ZD,a,b|0,!0);if(c)return c;g.error("get object "+a+": not found")};a.yba=function(a,b,c){if(a=x.ud(x.YD,a,b,c|0))return a;g.error("get object "+b+": not found")};a.zba=function(a,b){var c=x.ud(x.le,a,b|0);if(c)return c;g.error("get object "+a+": not found")};a.aA=function(a,b){var c=x.aA(a,b|0);if(c)return c;g.error("get object "+a+
": not found")};a.bG=function(a){return r.bG(a)};a.wp=function(a,b){var c=e.Ui();return c?(c=e.dc(c,v.Gh))&&c.enable_hmd_stereo?(g.va("pick_object() is not available in the stereo rendering mode. Use scenes.pick_center instead."),t()):x.wp(a,b):(g.error("No active scene"),null)};a.K2=t;a.B2=function(a){return a&&a.A&&a.A.zd};a.pI=function(a,b){a&&a.A&&a.A.zd?x.pI(a,b):g.error("set_outline_intensity(): wrong object")};a.Hba=function(a){if(a&&a.A&&a.A.zd)return a.A.ek;g.error("get_outline_intensity(): wrong object");
return 0};a.Eq=function(a,b,c,e){a&&a.A&&a.A.zd?x.Eq(a,b,c,e):g.error("apply_outline_anim(): wrong object")};a.F9=function(a){if(a&&a.A&&a.A.zd){var b=a.A.dk;x.Eq(a,b.cn,b.dn,b.en)}else g.error("apply_outline_anim_def(): wrong object")};a.lu=function(a){a&&a.A&&a.A.zd?x.lu(a):g.error("clear_outline_anim(): wrong object")};a.AR=e.AR;a.Gba=function(a){var b=e.R();if(b=e.dc(b,v.vq))return a=a||new Float32Array(3),a.set(b.dj),a};a.hs=function(a){e.Ya()?a&&(!a.distortion_coefs||a.distortion_coefs instanceof
Array||(a.distortion_coefs=null),!a.chromatic_aberration_coefs||a.chromatic_aberration_coefs instanceof Array||(a.chromatic_aberration_coefs=null),"number"!=typeof a.base_line_factor&&(a.base_line_factor=null),"number"!=typeof a.inter_lens_factor&&(a.inter_lens_factor=null),"boolean"!=typeof a.enable_hmd_stereo&&(a.enable_hmd_stereo=null),e.hs(a)):g.error("No active scene")};a.Pba=function(){if(!e.Ya())return g.error("No active scene"),!1;var a=e.R(),b=e.dc(a,v.ae);if(!b)return null;var c=a.J.Cd,
h=e.dc(a,v.Nb),k=e.dc(a,v.Wg),m={};m.csm_resolution=c.csm_resolution;m.self_shadow_polygon_offset=b.self_shadow_polygon_offset;k&&(m.self_shadow_normal_offset=k.self_shadow_normal_offset);m.enable_csm=c.enable_csm;m.csm_num=c.csm_num;m.csm_first_cascade_border=c.csm_first_cascade_border;m.first_cascade_blur_radius=c.first_cascade_blur_radius;m.csm_last_cascade_border=c.csm_last_cascade_border;m.last_cascade_blur_radius=c.last_cascade_blur_radius;m.fade_last_cascade=c.fade_last_cascade;m.blend_between_cascades=
c.blend_between_cascades;c.enable_csm?(m.csm_borders=e.U_(a,h.H),m.blur_radii=new Float32Array(c.csm_num),m.blur_radii.set(h.H.Zr.subarray(0,c.csm_num))):(m.csm_borders=null,m.blur_radii=null);return m};a.Bea=function(a){if(e.Ya()){var c=e.R();"number"==typeof a.self_shadow_polygon_offset&&m.ka(c.J.Da,function(b,c){c.type==v.ae&&(c.self_shadow_polygon_offset=a.self_shadow_polygon_offset)});for(var h=e.zh(c,[v.Wg]),x=0;x<h.length;x++){var t=h[x];"number"==typeof a.self_shadow_normal_offset&&(t.self_shadow_normal_offset=
a.self_shadow_normal_offset);"number"==typeof a.pcf_blur_radius&&(t.pcf_blur_radius=a.pcf_blur_radius)}h=e.zh(c,[v.Hd]);for(x=0;x<h.length;x++){var w=h[x];"number"==typeof a.self_shadow_normal_offset&&(w.self_shadow_normal_offset=a.self_shadow_normal_offset);"number"==typeof a.pcf_blur_radius&&(w.pcf_blur_radius=a.pcf_blur_radius);w.Wa=!0}h=c.J.Cd;"number"==typeof a.csm_first_cascade_border&&(h.csm_first_cascade_border=a.csm_first_cascade_border);"number"==typeof a.first_cascade_blur_radius&&(h.first_cascade_blur_radius=
a.first_cascade_blur_radius);"number"==typeof a.csm_last_cascade_border&&(h.csm_last_cascade_border=a.csm_last_cascade_border);"number"==typeof a.last_cascade_blur_radius&&(h.last_cascade_blur_radius=a.last_cascade_blur_radius);if(t){w=t.kb;for(x=0;x<w.length;x++)for(var l=w[x].Ua,u=0;u<l.length;u++){var B=l[u];if(B.sh.ze){var F=B.Fa;b.hL(F,h);b.Ed(F);v.pd(t,B)}}t.Wa=!0}t=r.La(c.Ek,c).oa;for(x=0;x<t.length;x++)k.jJ(t[x],h);e.eI(c)}else g.error("No active scene")};a.RN=function(){if(!e.Ya())return g.error("No active scene"),
[];var a=e.R();return e.RN(a)};a.iI=function(a,b,c){if(e.Ya()){var h=e.R(),k=e.dc(h,v.Nb);e.iI(h,a||0==a?parseFloat(a):k.ih,b||0==b?b:k.se,c||0==c?c:k.De)}else g.error("No active scene")};a.UN=function(a){if(!e.Ya())return g.error("No active scene"),!1;var b=e.R();return e.UN(b,a)};a.kI=function(a){if(e.Ya()){var b=e.R();e.kI(b,a)}else g.error("No active scene")};a.pba=function(){if(!e.Ya())return g.error("No active scene"),!1;var a=e.R(),b={};b.fog_intensity=e.d0(a);b.fog_depth=e.b0(a);b.fog_start=
e.e0(a);b.fog_height=e.c0(a);return b};a.dea=function(a){if(e.Ya()){var b=e.R();"number"==typeof a.fog_intensity&&e.oR(b,a.fog_intensity);"number"==typeof a.fog_depth&&e.mR(b,a.fog_depth);"number"==typeof a.fog_start&&e.pR(b,a.fog_start);"number"==typeof a.fog_height&&e.nR(b,a.fog_height)}else g.error("No active scene")};a.pO=function(){if(!e.Ya())return g.error("No active scene"),!1;var a=e.R();return e.pO(a)};a.Gea=function(a){if(e.Ya()){var c=e.R(),h=e.zh(c,[v.Kx]),c=e.zh(c,[v.gE]);if(!h.length)return g.error("SSAO is not enabled on the scene"),
0;for(var k=0;k<h.length;k++){var m=h[k],r=c[k],l=a,u=e.R(),x=m.kb[0].Ua[0],t=x.Fa,w=r.kb[0].Ua[0],N=w.Fa;if("quality"in l){var A=l.quality;8===A||16===A||24===A||32===A?(m.Hp=A,b.Vf(t,"SSAO_QUALITY","SSAO_QUALITY_"+A),b.Ed(t),v.pd(m,x)):g.error('set_ssao_params(): Wrong "quality" value.')}"use_hemisphere"in l&&(m.As=l.use_hemisphere,b.Vf(t,"SSAO_HEMISPHERE",l.use_hemisphere|0),b.Ed(t),v.pd(m,x));"use_blur_depth"in l&&(r.xs=l.use_blur_depth,b.Vf(N,"SSAO_BLUR_DEPTH",l.use_blur_depth|0),b.Ed(N),v.pd(r,
w),B.vo(u.J.Da,r,N));"ssao_white"in l&&(m.ssao_white=l.ssao_white,b.Vf(t,"SSAO_WHITE",l.ssao_white|0),b.Ed(t),v.pd(m,x));"blur_discard_value"in l&&(r.ys=l.blur_discard_value);"radius_increase"in l&&(m.Cs=l.radius_increase);"influence"in l&&(m.Bs=l.influence);"dist_factor"in l&&(m.zs=l.dist_factor);if("boolean"==typeof l.ssao_only){u=e.dc(u,v.Nb);u.ssao_only=l.ssao_only;x=u.kb;t=[];for(w=0;w<x.length;w++)for(N=x[w].Ua,A=0;A<N.length;A++){var E=N[A].Fa;b.Vf(E,"SSAO_ONLY",l.ssao_only|0);b.Ed(E);t.push(N[A])}for(w=
0;w<t.length;w++)v.pd(u,t[w])}m.Wa=!0;r.Wa=!0}}else g.error("No active scene")};a.fba=function(){if(!e.Ya())return g.error("No active scene"),null;var a=e.R(),a=e.dc(a,v.OD);if(!a)return null;var b={};b.brightness=a.brightness;b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;return b};a.$da=function(a){if(e.Ya()){var b=e.R();if(b=e.dc(b,v.OD))"brightness"in a&&(b.brightness=a.brightness),"contrast"in a&&(b.contrast=a.contrast),"exposure"in a&&(b.exposure=a.exposure),"saturation"in
a&&(b.saturation=a.saturation),b.Wa=!0}else g.error("No active scene")};a.oO=function(){if(!e.Ya())return g.error("No active scene"),!1;var a=e.R();return e.oO(a)};a.Eea=function(a){if(e.Ya()){var b=e.R(),c=e.dc(b,v.Ye);c&&("color"in a&&c.rn.set(a.color),"rayleigh_brightness"in a&&(c.rayleigh_brightness=a.rayleigh_brightness),"mie_brightness"in a&&(c.mie_brightness=a.mie_brightness),"spot_brightness"in a&&(c.spot_brightness=a.spot_brightness),"scatter_strength"in a&&(c.scatter_strength=a.scatter_strength),
"rayleigh_strength"in a&&(c.rayleigh_strength=a.rayleigh_strength),"mie_strength"in a&&(c.mie_strength=a.mie_strength),"rayleigh_collection_power"in a&&(c.rayleigh_collection_power=a.rayleigh_collection_power),"mie_collection_power"in a&&(c.mie_collection_power=a.mie_collection_power),"mie_distribution"in a&&(c.mie_distribution=a.mie_distribution),c.Wa=!0,c.Kr=!0,e.n6(b,c))}else g.error("No active scene")};a.ON=function(){if(!e.Ya())return g.error("No active scene"),!1;var a=e.R();return e.dc(a,v.qt)?
e.ON(a):null};a.kR=function(a){if(e.Ya()){var b=e.R();e.kR(b,a)}else g.error("No active scene")};a.YN=function(){if(!e.Ya())return g.error("No active scene"),!1;var a=e.R();return e.dc(a,v.sq)?e.YN(a):null};a.uR=function(a){if(e.Ya()){var b=e.R();e.uR(b,a)}else g.error("No active scene")};a.FN=function(){if(!e.Ya())return g.error("No active scene"),!1;var a=e.R();return e.dc(a,v.lt)?e.FN(a):null};a.aR=function(a){if(e.Ya()){var b=e.R();e.aR(b,a)}else g.error("No active scene")};a.XN=function(){if(!e.Ya())return g.error("No active scene"),
!1;var a=e.R();return e.dc(a,v.st)?e.XN(a):null};a.tR=function(a){if(e.Ya()){var b=e.R();e.tR(b,a)}else g.error("No active scene")};a.CO=function(){if(!e.Ya())return g.error("No active scene"),!1;var a=e.R();return e.CO(a)};a.KR=function(a){if(e.Ya()){var b=e.R();x.KR(b,a)}else g.error("No active scene")};a.AO=function(a,b){if(!e.Ya())return g.error("No active scene"),0;var c=e.R();return c.J.Yd?e.AO(c,a,b):(g.error("No water parameters on the active scene"),0)};a.JR=function(a){if(e.Ya()){var b=
e.R();e.JR(b,a)}else g.error("No active scene")};a.zO=function(a){if(e.Ya()){var b=e.R();e.zO(b,a)}else g.error("No active scene")};a.yfa=function(){if(e.Ya()){var a=e.R();e.SS(a)}else g.error("No active scene")};a.xca=function(a,b){b=b||!1;c(a)?b?e.qo(a,!0):e.ju(a,!0):g.error("show/hide is only supported for dynamic objects.")};a.Oea=function(a,b){b=b||!1;c(a)?b?e.qo(a,!1):e.ju(a,!1):g.error("show/hide is only supported for dynamic objects.")};a.DG=function(a){if(c(a))return e.DG(a);g.error("show/hide is only supported for dynamic meshes/empties and lamps");
return!1};a.Cr=function(a){return a.A.Cr};a.j$=function(a,b){return x.ud(x.ZD,a,b|0,!0)?!0:!1};a.h$=function(a,b,c){return x.ud(x.YD,a,b,c|0)?!0:!1};a.i$=function(a,b){return x.ud(x.le,a,b|0)?!0:!1};a.Pj=function(a,b){var c=e.R();a||(a="ALL");b||0===b||(b=x.Vc);return x.mO(c,a,b)};a.Cba=function(a){return a?a.Sf:(g.error("Wrong object name"),"")};a.Dba=function(a){if(!a)return g.error("Wrong object name"),null;for(var b=[];a;)b.push(a.Sf),a=r.Qj(a);return b.reverse()};a.Eba=function(a){return a&&
a.type?a.type:(g.error("Wrong object"),"UNDEFINED")};a.Bba=function(a){return a.cf.slice(0)};a.Kz=function(){return x.Kz(e.R())};a.nO=function(a,b){b||0===b||(b=1);if(!e.Ya())return g.error("No active scene"),0;var c=e.R();return e.nO(c,a,b)};a.IN=function(){return e.IN()};a.Yba=function(a){return r.pf(a)?a.A.type:""};a.Ro=function(){if(!e.Ya())return g.error("No active scene"),!1;var a=e.R();return e.Ro(a)};a.dv=function(){if(!e.Ya())return g.error("No active scene"),!1;var a=e.R();return e.dv(a)};
a.pm=function(a,b){if(b)var c=e.cv(),c=P.Pd("name",b,c);else c=e.R();e.pm(c,a,!0)};a.Bp=function(a){r.$o(a)||r.ur(a)||r.pv(a)?(x.Tr(a,a.A.yA,!1,!1),O.uQ(a),x.Tr(a,!0,!0,!0),x.Bp(a)):g.error("Can't remove object \""+a.name+'". It must be dynamic and type of MESH or EMPTY.')};a.NP=function(a){var b=e.R();if(b.timeline_markers&&a in b.timeline_markers)return e.NP(b,a);g.error('"'+a+'" marker not found.');return 0};a.vba=function(){var a=e.R();return(a=e.dc(a,v.tj))?{mb_factor:a.mb_factor,mb_decay_threshold:a.mb_decay_threshold}:
null};a.mea=function(a){var b=e.R(),b=e.zh(b,[v.tj]);if(b.length)for(var c=0;c<b.length;c++){var h=b[c];"number"==typeof a.mb_decay_threshold&&(h.mb_decay_threshold=a.mb_decay_threshold);"number"==typeof a.mb_factor&&(h.mb_factor=a.mb_factor)}else g.error("The motion blur subscene doesn't exist.")};a.GL=function(){var a=e.R();return!!e.dc(a,v.Df)}};b4w.module.container=function(a,w){var t=w("__container"),c=w("__print");a.Wh=t.Wh;a.JN=t.JN;a.re=t.re;a.kv=function(a,k){2!=arguments.length?c.error("insert_to_container(): two arguments required"):a&&k&&t.kv(a,k)};a.bR=function(a,k){c.va("container.set_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");return t.bR(a,k)};a.LS=function(){c.va("container.update_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");
t.LS()};a.wy=function(a,c,h){h||(h=new Float32Array(2));return t.wy(a,c,h)};a.hM=function(a,c,h,w){w||(w=new Float32Array(2));return t.hM(a,c,h,w)};a.MN=function(a,c,h){h||(h=new Float32Array(2));return t.MN(a,c,h)};a.KF=function(){c.va("container.force_offsets_updating() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");t.KF()};a.resize=function(a,c,h){t.resize(a,c,h)};a.Jl=function(a){t.Jl(a||!1)}};b4w.module.input=function(a,w){function t(a){m.hf("enable_split_screen","screen.request_split_screen");var k=c.ba(c.Tb);if(!k)return!1;if(B)return!0;var p=c.Zh(k,c.IJ,g),r=c.Zh(k,c.JJ,e);b.mI(a,p,r);if(p=c.vg(k,N))r=x.R(),a=O.La(a,r).oa,b.ZB(a,p);a={base_line_factor:.5,inter_lens_factor:.5,enable_hmd_stereo:!0};c.vg(k,c.Ug)&(c.jm|c.zk|c.uq)&&(a.distortion_coefs=[k.distortion_coefs[0],k.distortion_coefs[1]],a.chromatic_aberration_coefs=[k.chromatic_aberration_coefs[0],k.chromatic_aberration_coefs[1],
k.chromatic_aberration_coefs[2],k.chromatic_aberration_coefs[3]],k.Up||(k.wj&&k.Vj&&k.xj?a.base_line_factor=(k.wj-k.xj)/k.Vj:k.xj||(a.base_line_factor=k.wj/k.Vj)),k.Wi&&k.Nn&&!k.Up&&(a.inter_lens_factor=k.Wi/k.Nn),v.enabled||(p=1+k.distortion_coefs[0]+k.distortion_coefs[1],x.fB(p,p)));x.hs(a);h.Jl(!0);c.VH(k);return B=!0}var c=w("__input"),b=w("__camera"),k=w("__config"),h=w("__container"),O=w("__obj_util"),m=w("__print"),x=w("__scenes"),r=w("__vec4"),g=r.create(),e=r.create(),B=!1,v=k.Bo,P=k.L;a.hq=
c.hq;a.iq=c.iq;a.kq=c.kq;a.jq=c.jq;a.nq=c.nq;a.cq=c.cq;a.eq=c.eq;a.mq=c.mq;a.pq=c.pq;a.Tn=c.Tn;a.oq=c.oq;a.Sn=c.Sn;a.qq=c.qq;a.rq=c.rq;a.fq=c.fq;a.gq=c.gq;a.lq=c.lq;a.ix=c.ix;a.jx=c.jx;a.kx=c.kx;a.lx=c.lx;a.mx=c.mx;a.nx=c.nx;a.ox=c.ox;a.px=c.px;a.qx=c.qx;a.GJ=c.GJ;a.HJ=c.HJ;a.EJ=c.EJ;a.FJ=c.FJ;a.hm=c.hm;a.Qn=c.Qn;a.im=c.im;a.Rn=c.Rn;a.aq=c.aq;a.bq=c.bq;a.vt=c.vt;a.wt=c.wt;a.xt=c.xt;a.yt=c.yt;a.tt=c.tt;a.ut=c.ut;a.wx=c.wx;a.xx=c.xx;a.Ug=c.Ug;a.uq=c.uq;a.zk=c.zk;a.jm=c.jm;a.Un=c.Un;a.Bx=c.Bx;var N=
c.zt;a.zt=N;a.vx=c.vx;a.tx=c.tx;a.zx=c.zx;a.Ax=c.Ax;a.yx=c.yx;a.ux=c.ux;a.uj=c.uj;a.lm=c.lm;a.Ct=c.Ct;a.Dt=c.Dt;a.Bt=c.Bt;a.At=c.At;a.nm=c.nm;a.Kt=c.Kt;a.Wn=c.Wn;a.sx=c.sx;a.tq=c.tq;var M={};M[c.Tb]=[c.wx,c.xx];M[c.Wc]=[c.uj];var p={};p[c.Tb]=[c.Ug];var I={};I[c.Wc]=[c.uj,c.lm,c.Ct,c.Dt];I[c.ot]=[c.Bt,c.At];I[c.Tg]=[c.nm,c.Kt,c.Wn];I[c.sj]=[c.sx,c.tq];var y={};y[c.Tb]=[c.vx,c.zt,c.tx,c.zx,c.Ax,c.yx,c.ux];a.sj=c.sj;a.Tb=c.Tb;a.Wc=c.Wc;a.ot=c.ot;a.Tg=c.Tg;a.Cj=c.Cj;a.ba=c.ba;a.zw=function(a,b){a&&c.zw(a,
b)};a.Fda=function(){m.va("input.register_device() deprecated")};a.VH=function(a){a&&a.type==c.Tb?c.VH(a):m.error("reset_device is undefined for device.")};a.Zh=function(a,b,e){if(a&&a.type in M&&0<=M[a.type].indexOf(b))return c.Zh(a,b,e);m.error("device hasn't param: ",b);return null};a.vg=function(a,b){if(a&&a.type in p&&0<=p[a.type].indexOf(b))return c.vg(a,b);m.error("device hasn't param: ",b);return null};a.Id=function(a,b,e){e=e||null;if(a&&a.type in I&&0<=I[a.type].indexOf(b))return c.Id(a,
b,e);m.error("device hasn't param: ",b)};a.oe=function(a,b,e){e=e||null;if(a&&a.type in I&&0<=I[a.type].indexOf(b))return c.oe(a,b,e);m.error("device hasn't param: ",b)};a.kk=function(a,b,e){if(a&&a.type in y&&0<=y[a.type].indexOf(b))return c.kk(a,b,e);m.error("device hasn't config: ",b)};a.NQ=function(){m.hf("request_fullscreen_hmd","screen.request_fullscreen_hmd");if(x.Ya()){var a=x.Jm(x.R());if(a&&(t(a),a=c.ba(c.Tb))){var b=a.Zd;b&&!b.isPresenting&&(b.capabilities.canPresent?(a=h.Wh(),b.requestPresent([{source:a}]).then(function(){if(!P.is_mobile_device){var a=
b.getEyeParameters("left"),c=b.getEyeParameters("right");h.resize(2*Math.max(a.renderWidth,c.renderWidth),Math.max(a.renderHeight,c.renderHeight),!1)}},function(){m.error("HMD fullscreen request failed.")})):m.error("HMD fullscreen request failed."))}}};a.saa=t;a.K$=function(){m.hf("disable_split_screen","screen.exit_split_screen");var a=c.ba(c.Tb);if(!B||!a||!a.vh)return!1;x.hs({enable_hmd_stereo:!1});a=1/(1+a.distortion_coefs[0]+a.distortion_coefs[1]);x.fB(a,a);h.Jl(!0);return!0};a.nw=function(a,
b,e){switch(a){case 0:a=c.dx;break;case 1:a=c.RD;break;case 2:a=c.SD;break;case 3:a=c.TD;break;default:a=c.dx}a=c.ba(a);c.kk(a,b,e)};a.dG=c.dG;a.Rz=c.Rz;a.ZF=c.ZF;a.YF=c.YF;a.AX=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=[],c=0;c<a.length;c++)a[c]&&b.push(c);return b};a.yO=function(a){for(var b=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],c=0,e=0;4>c;c++){var g=
b[c];if(g&&(""==g.id||"OpenVR Gamepad"==g.id||"Oculus Touch (Left)"==g.id||"Oculus Touch (Right)"==g.id)){if(e==a)return e;e++}}return a};a.Ih=function(a,b){a&&b&&c.Ih(a,b)};a.MB=function(a,b){a&&b&&c.MB(a,b)}};b4w.module.rgb=function(a,w){var t=w("__util"),c=new Float32Array(3);a.create=function(){return new Float32Array(3)};a.Bz=function(a,c,h){var b=new Float32Array(3);b[0]=a;b[1]=c;b[2]=h;return b};a.set=function(a,c,h,t){t[0]=a;t[1]=c;t[2]=h;return t};a.B$=function(a,c,h,w){w=w||new Float32Array(3);w[0]=a/255;w[1]=c/255;w[2]=h/255;t.cS(w,w);return w};a.Mda=function(a){a=t.NG(a,c);return[Math.round(255*a[0]),Math.round(255*a[1]),Math.round(255*a[2])]};a.Nda=function(a){function b(a){a=Math.round(255*
a).toString(16);return 1==a.length?"0"+a:a}a=t.NG(a,c);return"#"+b(a[0])+b(a[1])+b(a[2])}};
b4w.module.rgba=function(a,w){var t=w("__util"),c=new Float32Array(3);a.create=function(){var a=new Float32Array(4);a[3]=1;return a};a.Bz=function(a,c,h,t){var b=new Float32Array(4);b[0]=a;b[1]=c;b[2]=h;b[3]=t;return b};a.set=function(a,c,h,t,m){m[0]=a;m[1]=c;m[2]=h;m[3]=t;return m};a.C$=function(a,c,h,w,m){m=m||new Float32Array(4);m[0]=a/255;m[1]=c/255;m[2]=h/255;m[3]=w;t.cS(m,m);return m};a.Oda=function(a){var b=t.NG(a,c);return[Math.round(255*b[0]),Math.round(255*b[1]),Math.round(255*b[2]),a[3]]}};b4w.module.objects=function(a,w){var t=w("__geometry"),c=w("__objects"),b=w("__batch"),k=w("__obj_util"),h=w("__print"),O=w("__scenes"),m=w("__util");a.Ro=function(a){if(a)return c.Ro(a)};a.dv=function(a){if(a)return c.dv(a)};a.copy=function(a,b,g){return k.pf(a)?k.ea(a)?t.oG(a)||t.KE(a)||!g?-1==c.xc(O.R(),"MESH",c.Vc).indexOf(a)?(h.error('object "'+a.name+'" does not belong to the active scene.'),!1):c.copy(a,b||"",g):(h.error('object "'+a.name+'" has not dynamic geometry for deep copying.'),!1):
(h.error('object "'+a.name+'" is not dynamic.'),!1):(h.error('object "'+a.name+'" is not of type "MESH".'),!1)};a.oI=function(a,m,g){h.hf("set_nodemat_value","material.set_nodemat_value");if(k.$o(a)){var e=m[0],r=b.Gm(a,e);if(null===r)return h.error('Material "'+e+'" was not found in the object "'+a.name+'".'),null;r=c.aG(r.li,m);if(null===r)return h.error('Value node "'+m[m.length-1]+'" was not found in the object "'+a.name+'".'),null;c.oI(a,e,r,g)}else h.error('The type of the object "'+a.name+
'" is not "MESH" or it is not dynamic.')};a.cO=function(a,m){h.hf("get_nodemat_value","material.get_nodemat_value");if(!k.$o(a))return h.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.'),0;var g=m[0],e=b.Gm(a,g);if(null===e)return h.error('Material "'+g+'" was not found in the object "'+a.name+'".'),0;g=c.aG(e.li,m);return null===g?(h.error('Value node "'+m[m.length-1]+'" was not found in the object "'+a.name+'".'),0):c.cO(e,g)};a.nI=function(a,m,g,e,t){h.hf("set_nodemat_rgb",
"material.set_nodemat_rgb");if(k.$o(a)){var v=m[0],r=b.Gm(a,v);null===r?h.error('Material "'+v+'" was not found in the object "'+a.name+'".'):(r=c.$F(r.ki,m,1),null===r?h.error('RGB node "'+m[m.length-1]+'" was not found in the object "'+a.name+'".'):c.nI(a,v,r,g,e,t))}else h.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.')};a.bO=function(a,m,g){h.hf("get_nodemat_rgb","material.get_nodemat_rgb");if(!k.$o(a))return h.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.'),
null;var e=m[0],r=b.Gm(a,e);if(null===r)return h.error('Material "'+e+'" was not found in the object "'+a.name+'".'),null;e=c.$F(r.ki,m);if(null===e)return h.error('RGB node "'+m[m.length-1]+'" was not found in the object "'+a.name+'".'),null;g||(g=new Float32Array(3));return c.bO(r,e,g)};a.iJ=function(a){k.pf(a)?t.oG(a)||t.KE(a)?c.iJ(a):h.error('object "'+a.name+'" has not dynamic geometry.'):h.error('The type of the object "'+a.name+'" is not "MESH".')};a.eO=k.eO;a.Qj=k.Qj;a.pf=k.pf;a.sr=k.sr;a.Um=
k.Um;a.mb=k.mb;a.vr=k.vr;a.ur=k.ur;a.pv=k.pv;a.sl=k.sl;a.Wz=function(){return c.Wz()};a.dO=function(){return c.dO()};a.ea=k.ea;a.Jea=function(a,r){if(k.$o(a)){var g=a.A;if(g.Bf){if("number"==typeof r.angle){var e=b.vT(m.df(r.angle),g.Mk,g.D[3]);g.Og=e}"number"==typeof r.main_frequency&&(g.Pg=r.main_frequency);"number"==typeof r.detail_frequency&&(g.qg=r.detail_frequency);"number"==typeof r.detail_amplitude&&(g.pg=r.detail_amplitude);"number"==typeof r.branch_amplitude&&(g.kg=r.branch_amplitude);c.f4(a)}else h.error('The "'+
a.name+"\" object doesn't have wind bending parameters.")}else h.error('The type of the object "'+a.name+'" is not "MESH" or it is not dynamic.')};a.ica=function(a){a=a.A;if(!a.Bf)return null;var c={},g=m.JB(b.N6(a.Og,a.Mk,a.D[3]));c.angle=g;c.main_frequency=a.Pg;c.detail_frequency=a.qg;c.detail_amplitude=a.pg;c.branch_amplitude=a.kg;return c};a.eF=function(a){return c.eF(a)};a.vca=function(a){a=c.Pj("ALL",a);for(var b=0;b<a.length;b++)O.qo(a[b],!0)};a.Mea=function(a){a=c.Pj("ALL",a);for(var b=0;b<
a.length;b++)O.qo(a[b],!1)}};b4w.module.controls=function(a,w){var t=w("__controls"),c=w("__physics"),b=w("__print");a.Sg=t.Sg;a.ob=t.ob;a.cx=t.cx;a.Ai=t.Ai;a.Zp=t.Zp;a.QD=t.QD;a.C7=8;a.r8=9;a.L7=13;a.n8=16;a.G7=17;a.A7=18;a.j8=19;a.E7=20;a.N7=27;a.p8=32;a.UJ=37;a.XJ=38;a.VJ=39;a.TJ=40;a.q7=49;a.r7=50;a.s7=51;a.t7=52;a.u7=53;a.v7=54;a.w7=55;a.x7=56;a.y7=57;a.RJ=65;a.B7=66;a.YT=67;a.SJ=68;a.K7=69;a.ZT=70;a.P7=71;a.S7=72;a.T7=73;a.U7=74;a.$T=75;a.aU=76;a.V7=77;a.X7=78;a.i8=79;a.cU=80;a.l8=81;a.dU=82;a.WJ=83;a.fU=84;a.s8=85;a.t8=
86;a.YJ=87;a.u8=88;a.v8=89;a.w8=90;a.Y7=96;a.Z7=97;a.a8=98;a.b8=99;a.c8=100;a.d8=101;a.e8=102;a.f8=103;a.g8=104;a.h8=105;a.W7=106;a.z7=107;a.q8=109;a.I7=110;a.J7=111;a.m8=186;a.M7=187;a.F7=188;a.H7=189;a.k8=190;a.O7=191;a.Q7=192;a.bU=219;a.D7=220;a.eU=221;a.o8=222;a.Fx=t.Fx;a.Ex=t.Ex;a.Dx=t.Dx;a.dE=t.dE;a.Yy=t.Yy;a.rF=t.rF;a.gc=t.gc;a.ne=t.ne;a.Ly=t.Ly;a.Ky=t.Ky;a.zu=t.zu;a.qd=t.qd;a.$E=function(a,b,c){return t.$E(a,b||"ANY",c||!1)};a.uM=t.uM;a.CM=function(a,h,w,m,x,r,g){if(a&&!c.Aa(a))b.va("No physics for object "+
a.name);else return t.CM(a,h,w,m||"ANY",x||!1,r||!1,g||!1)};a.yo=t.yo;a.fF=t.fF;a.Wk=t.Wk;a.AM=t.AM;a.BM=t.BM;a.Cu=t.Cu;a.Py=t.Py;a.KM=t.KM;a.JM=t.JM;a.yM=t.yM;a.LM=t.LM;a.wM=t.wM;a.aF=t.aF;a.xM=t.xM;a.cF=t.cF;a.bF=t.bF;a.IM=function(a,b){return t.IM(a,b||!1)};a.OQ=t.OQ;a.ym=t.ym;a.Oy=t.Oy;a.gF=function(a,b){return t.gF(a,b||!1)};a.ZE=function(a,b){return t.ZE(a,b||0)};a.aea=function(a,b){t.K3(a,b)};a.hba=function(a){return a.value};a.wd=t.wd;a.lf=t.lf;a.qa=function(a,b,c,m,w,r,g){w=w||t.Yy;t.qa(a,
b,c,m,w,r,void 0===g?null:g)};a.Qq=function(a,b,c,m,w){m=t.qd(m);t.qa(a,b,c,[m],t.Yy,w,null)};a.k$=function(a){return t.tm(a,null)};a.tm=t.tm;a.Uf=t.Uf;a.reset=t.reset;a.DR=t.DR};b4w.module.data=function(a,w){var t=w("__data"),c=w("__loader");a.load=t.load;a.kD=function(a){t.kD(a|0)};a.iR=t.iR;a.Xi=t.Xi;a.Wca=c.ap;a.fda=t.load;a.Ja=a.kD;a.QK=t.QK;a.tQ=t.tQ;a.IS=t.IS};b4w.module.debug=function(a,w){function t(a,b,c,d){L.group(n.RC(a),d);for(a=0;a<c.length;a++){var e=c[a],f=e.A;if(f.type==d)for(var g=!1,h=0;h<b.length;h++){for(var k=b[h].Ua,l=0;l<k.length;l++){var m=k[l];if(m.lc&&m.sh==f){"STATIC"==d?L.Qd(e.Sf,e):L.Qd(e.name,e);g=!0;break}}if(g)break}}L.groupEnd()}function c(a){var b={};if(!a)return b;a=a.split("\n");for(var c=0;c<a.length;c++){var d=a[c];if(-1!=d.search(new RegExp(/^[A-Z.]+ ?/))){var e=d.split(" ")[0];e in b||(b[e]=0);b[e]++}}d=c=a=0;for(e in b)switch(e){case "KIL":case "TEX":case "TXB":case "TXP":case "KIL.F":case "TEX.F":case "TXB.F":case "TXD.F":case "TXL.F":case "TXQ.F":case "TXP.F":c+=
b[e];a+=b[e];break;case "ATTRIB":d+=b[e];break;case "ADDRESS":case "PARAM":case "TEMP":case "ALIAS":case "OUTPUT":break;case "END":break;default:a+=b[e]}b.ALL_OPS=a;b.TEX_OPS=c;b.ATTRIBS=d;return b}function b(a,b){var c=new XMLHttpRequest;c.open("POST",a,!1);c.send(b);if(200==c.status)return c.responseText;L.error(c.responseText);throw"Error POST XHR: "+c.status;}function k(a){a.sort(function(a,b){return b.LF.ALL_OPS-a.LF.ALL_OPS});for(var b=0;b<a.length;b++){var c=a[b],d=c.LF,e=c.I6,f=h(c.mZ),f=
f.length?"\t\t("+f.join(", ")+")":"\t\t(NA)";L.groupCollapsed("VERT ->","OPS",e.ALL_OPS,"ATT",e.ATTRIBS,"TEX",e.TEX_OPS,"\t\tFRAG ->","OPS",d.ALL_OPS,"TEX",d.TEX_OPS,f);L.groupCollapsed("directives");for(var g=c.qb.Oi.slice().sort(),f=0;f<g.length;f++){var k=g[f];L.Qd(k[0],k[1])}L.groupEnd();L.groupCollapsed("node elements");g=c.qb.Rf;for(f=0;f<g.length;f++)L.Qd(g[f]);L.groupEnd();L.groupCollapsed("vert source");L.Qd(c.G6);L.groupEnd();L.groupCollapsed("vert translated source");L.Qd(c.H6);L.groupEnd();
f=["ALL_OPS","TEX_OPS","ATTRIBS"];L.groupCollapsed("vert ops stats");for(var l in e)-1==f.indexOf(l)&&L.Qd(l,e[l]);L.groupEnd();L.groupCollapsed("vert assembly");L.Qd(c.F6);L.groupEnd();L.groupCollapsed("frag source");L.Qd(c.v_);L.groupEnd();L.groupCollapsed("frag translated source");L.Qd(c.w_);L.groupEnd();L.groupCollapsed("frag ops stats");for(l in d)-1==f.indexOf(l)&&L.Qd(l,d[l]);L.groupEnd();L.groupCollapsed("frag assembly");L.Qd(c.n_);L.groupEnd();L.groupEnd()}}function h(a){for(var b=[],c=U.cv(),
d=0;d<c.length;d++)for(var e=c[d],f=D.xc(e,"MESH",D.Vc),g=0;g<f.length;g++){var h=l.La(f[g],e);if(h&&h.da.length)for(var h=h.da,k=0;k<h.length;k++){var m=h[k];if(m.Hb==a)for(var n=0;n<m.Dc.length;n++){var p=m.Dc[n];-1==b.indexOf(p)&&b.push(p)}}}return b}function O(a){function b(){ia.push(b);return a.apply(a,arguments)}return b}function m(a,b,c,d,e){if(typeof b!=typeof a)throw"debug.eqv: wrong expected data type";if(a.length!=b.length)throw"debug.eqv: wrong expected vector length";c=c?c:1E-6;for(var f=
0;f<a.length;f++){if("number"!=typeof b[f]||isNaN(b[f]))throw"debug.eqv: wrong expected data type";if("number"!=typeof a[f]||isNaN(a[f]))throw"debug.eqv: wrong result data type";if(b[f]>a[f]+c||b[f]<a[f]-c)throw"debug.eqv: wrong result";}x(d,e,"eqv")}function x(a,b,c){a=a||"";b=b||"";if(ba){if(""==a)throw"debug."+c+': no error is expected, but got "'+ea+'"';if(ea!=a)throw"debug."+c+': error "'+a+'" is expected, but got "'+ea+'"';}else if(""!=a)throw"debug."+c+': error "'+a+'" is expected, but got nothing';
if(la){if(""==b)throw"debug."+c+': no warning is expected, but got "'+ma+'"';if(ma!=b)throw"debug."+c+': warning "'+b+'" is expected, but got "'+ma+'"';}else if(""!=b)throw"debug."+c+': warning "'+b+'" is expected, but got nothing';ba=la=!1}function r(){C&&(D.Tr(C,!1,!1,!1),N.uQ(C),D.Tr(C,!0,!0,!0),D.Bp(C),C=null)}var g=w("__batch"),e=w("__config"),B=w("__compat"),v=w("__controls"),P=w("__container"),N=w("__data"),M=w("__debug"),p=w("__extensions"),I=w("__geometry"),y=w("__loader"),D=w("__objects"),
l=w("__obj_util"),u=w("__physics"),L=w("__print"),F=w("__renderer"),U=w("__scenes"),K=w("__scenegraph"),A=w("__sfx"),E=w("__shaders"),n=w("__subscene"),f=w("__textures"),X=w("__transform"),d=w("__tsr"),H=w("__util"),G=w("__vec3"),R=d.create(),q=new Float32Array(2),ja=G.create(),qa=G.create(),C=null,pa=e.L,ia=[],ma="",ea="",la=!1,ba=!1,da=!0,xa=new Uint8Array(4);a.gx=M.gx;a.XD=M.XD;a.hx=M.hx;a.WD=M.WD;a.fx=M.fx;a.VD=M.VD;a.UD=M.UD;a.rt=M.rt;a.Bda=function(){u.tZ()};a.Ada=function(a){L.log("O",u.k_(a));
var b=u.G_();if(b)for(var b=b.Pc.Ua,c=0;c<b.length;c++){var d=b[c];d.O.na==a&&L.log("B",d)}else L.error("No active physics scene.")};a.Jfa=function(){for(var a=U.R(),b=D.xc(a,"MESH",D.Vc),a=U.zh(a,[n.Nb,n.Hd,n.Fe]),c=0;c<a.length;c++){var d=a[c],e=d.kb;e.length&&(t(d,e,b,"DYNAMIC"),t(d,e,b,"STATIC"))}};a.vda=function(a){for(var b=U.R(),c=D.xc(b,"MESH",D.Vc),d=0;d<c.length;d++){var e=c[d];if(e.name==a){L.log("Object",e);for(var f=U.QF(b),g=0;g<f.length;g++){for(var h=f[g],k=[],l=h.kb,m=0;m<l.length;m++)for(var n=
l[m].Ua,p=0;p<n.length;p++)n[p].sh==e.A&&k.push(n[p]);L.log("Subscene "+h.type,k)}}}};a.wda=function(){var a=U.R();L.log("Armatures: "+D.xc(a,"ARMATURE",D.Vc).length);L.log("Cameras: "+D.xc(a,"CAMERA",D.Vc).length);L.log("Curves: "+D.xc(a,"CURVE",D.Vc).length);L.log("Empties: "+D.xc(a,"EMPTY",D.Vc).length);L.log("Lamps: "+D.xc(a,"LAMP",D.Vc).length);L.log("Meshes: "+D.xc(a,"MESH",D.Vc).length);L.log("Speakers: "+D.xc(a,"SPEAKER",D.Vc).length)};a.Hv=function(){for(var a=0,b=U.R(),b=U.zh(b,[n.Nb,n.Hd,
n.Fe]),c=0;c<b.length;c++)for(var d=b[c].kb,e=0;e<d.length;e++)for(var f=d[e].Ua,g=0;g<f.length;g++){var h=f[g].Fa;h&&(a+=h.Hv)}return a};a.qp=function(){for(var a=0,b=U.R(),b=U.zh(b,[n.Nb,n.Hd,n.Fe]),c=0;c<b.length;c++)for(var d=b[c].kb,e=0;e<d.length;e++)for(var f=d[e].Ua,g=0;g<f.length;g++){var h=f[g].Fa;h&&(a+=h.qp)}return a};a.pda=function(){for(var a=U.R(),b=U.zh(a,[n.Nb,n.Hd,n.Fe,n.Ge,n.Vg]),c=0,d=0;d<b.length;d++)for(var e=b[d],e=e.kb,f=0;f<e.length;f++)c+=e[f].Ua.length;a=U.zh(a,[n.$d,n.dg]);
for(d=0;d<a.length;d++)for(e=a[d],e=e.kb,f=0;f<e.length;f++)c+=6*e[f].Ua.length;return c};a.rda=function(){return H.nl(E.KN())};a.Uaa=function(){for(var a=U.R(),b=U.QF(a),a={},c=0;c<b.length;c++){var d=b[c];if(d.type!=n.mm&&d.type!=n.Bi)for(var e=d.kb,f=0;f<e.length;f++)for(var g=e[f].Ua,h=0;h<g.length;h++){var k=g[h].Fa,l=g[h].sh;k&&(d.type!=n.Df&&d.type!=n.Ci||l.qB||l.pB)&&(a[k.id]=k)}}var c=b=0,m;for(m in a)d=a[m].Pa,d.Sq&&(c+=d.Sq/1048576),b+=d.Uq/1048576;return{vbo_memory:b,ibo_memory:c}};a.sda=
function(){for(var a=[],b=0,c=U.R(),c=U.zh(c,[n.Nb,n.Hd,n.Fe]),d=0;d<c.length;d++)for(var e=c[d].kb,f=0;f<e.length;f++)for(var g=e[f].Ua,h=0;h<g.length;h++){var k=g[h].Fa;if(k)for(var k=k.xa,l=0;l<k.length;l++){var m=k[l];if("IMAGE"===m.source||"ENVIRONMENT_MAP"===m.source){var p=m.Kb;-1===a.indexOf(p)&&(a.push(p),m=m.width*m.height*4/1048576/m.uu,m*=1.3333,b+=m)}}}return{number:a.length,memory:b}};a.qda=function(){for(var a=[],b=0,c=U.R(),c=U.QF(c),d=0;d<c.length;d++){var e=c[d];if(e.type!=n.mm){var g=
e.H,h=[g.bc,g.og];h.push.apply(h,e.xi);for(e=0;e<h.length;e++){var k=h[e];f.Ar(k)&&-1==a.indexOf(k)&&(a.push(k),b+=g.width*g.height*f.A0(k))}}}return{number:a.length,memory:b/1024/1024}};a.X1=function(){var a=U.R();(a=U.dc(a,n.Nb))&&U.KP(a.H,a,[1,1,0])};a.Z1=function(){var a=U.R(),b=U.dc(a,n.Nb),a=U.zh(a,[n.ae]);if(b)for(var c=0;c<a.length;c++){var d=a[c],e;switch(c){case 0:e=[1,0,0];break;case 1:e=[0,1,0];break;case 2:e=[0,0,1];break;default:e=[1,0,1]}U.KP(d.H,b,e)}};a.Yda=function(){for(var a=U.cv(),
b=0;b<a.length;b++)L.log("\n"+K.rZ(U.Oz(a[b])))};a.hda=function(a){L.log("\n"+y.G0(a|0))};a.u$=v.debug;a.uda=function(a,b){var c=d.X(a.A.D),e=d.X(b.A.D);return G.dist(c,e)};a.Pb=M.Pb;a.sz=M.sz;a.xQ=M.xQ;a.DH=M.DH;a.Faa=function(a,b){function c(){M.sz("FBRES",a());setTimeout(c,b)}b||(b=16);c()};a.M9=function(){var a=new Float32Array([0,0,0,1]),b=new Float32Array([1,0,0]),c=new Float32Array([0,1,0]),d=new Float32Array([0,0,1]),e=new Float32Array([-1,0,0]),f=new Float32Array([0,-1,0]),g=new Float32Array([0,
0,-1]);if(!H.um(new Float32Array(3),H.hE))throw"Wrong VEC3_IDENT";if(!H.um(a,H.Gx))throw"Wrong QUAT4_IDENT";if(!H.um(b,H.Cf))throw"Wrong AXIS_X";if(!H.um(c,H.Ee))throw"Wrong AXIS_Y";if(!H.um(d,H.ic))throw"Wrong AXIS_Z";if(!H.um(e,H.kt))throw"Wrong AXIS_MX";if(!H.um(f,H.Eh))throw"Wrong AXIS_MY";if(!H.um(g,H.qc))throw"Wrong AXIS_MZ";};a.oda=function(){for(var a=A.Yz(),b=0;b<a.length;b++){var c=a[b];"BACKGROUND_MUSIC"==A.gG(c)&&A.Yb(c,!0)}};a.OL=M.OL;a.cea=function(a){var b=U.R(),b=U.zh(b,[n.Bi]);if(b.length)for(var c=
0;c<b.length;c++){var d=b[c];if("number"==typeof a.debug_view_mode)switch(a.debug_view_mode){case M.gx:case M.XD:case M.hx:case M.WD:case M.fx:case M.VD:case M.UD:case M.rt:U.U3(d,a.debug_view_mode);break;default:L.error("set_debug_params(): Wrong debug view mode")}"number"==typeof a.debug_colors_seed&&U.T3(d,a.debug_colors_seed);"number"==typeof a.s3&&U.p4(d,a.s3);"object"==typeof a.wireframe_edge_color&&U.A4(d,H.Qh(a.wireframe_edge_color))}else L.error("Debugging is not available on the scene.")};
a.lba=function(){return L.Z_()};a.gca=function(){return L.D0()};a.fM=function(){return L.fM()};a.q9=function(a){var d=E.KN(),e=0,f;for(f in d)a&&-1===f.indexOf(a)||e++;var e="of "+e+" analyzing...",g={};for(f in d)if(!a||-1!==f.indexOf(a)){var h=d[f],l;l=h.AD;var m=h.Cz,n=p.V_();if(n){var q=n.getTranslatedShaderSource(l),n=n.getTranslatedShaderSource(m);if(B.Cm())var q=q.replace("#version","#version 300 //"),n=n.replace("#version","#version 300 //"),v=b("/analyze_shader/vert_gles",q),r=b("/analyze_shader/frag_gles",
n);else q=q.replace("#version","#version 400 //"),n=n.replace("#version","#version 400 //"),v=b("/analyze_shader/vert",q),r=b("/analyze_shader/frag",n);var u=c(v),t=c(r);l={G6:M.Nz().getShaderSource(l),H6:q,F6:v,I6:u,v_:M.Nz().getShaderSource(m),w_:n,n_:r,LF:t}}else L.warn("WEBGL_debug_shaders extension not found"),l=void 0;if(l){var m=h.qb,w=m.Lg+" + "+m.jf;l.mZ=h;l.qb=m;h=g[w]=g[w]||[];h.push(l);L.Qd(e)}}for(w in g)L.group("%c"+w,"color: #800"),h=g[w],k(h),L.groupEnd()};a.lN=M.lN;a.tS=function(b){if(E.TL())if(p.WF()){var c=
pa.gl_debug;pa.gl_debug=!0;var d=K.AY();U.wN(null,d);for(var e=K.cc(d,n.Ft),f=e.H,d=0;5>d;d++)F.cl(e);pa.gl_debug=c;window.setTimeout(function(){M.b3(e);var a=e.ng;b(a,f.width*f.height*40/(a/1E3)/Math.pow(10,9))},100)}else b(0,0);else window.setTimeout(function(){a.tS(b)},100)};a.EL=M.EL;a.UR=M.UR;a.wQ=M.wQ;a.Vea=function(a){ia=[];da=!0;a=w(a);for(var b in a)"function"===typeof a[b]&&(a[b]=O(a[b]))};a.e$=function(){return da};a.test=function(a,b){var c=w("__print"),d=c.error,e=c.va,f=c.warn;c.error=
c.va=function(){ea=c.mM(arguments,"B4W ERROR").join(" ");ba=!0};c.warn=function(){ma=c.mM(arguments,"B4W WARN").join(" ");la=!0};ba=la=!1;try{b();var g=!0}catch(aa){da=!1,console.error('Test "'+a+'" failed with exception: "'+aa+'"'),ba=la=g=!1}c.error=d;c.va=e;c.warn=f;return g};a.Cda=function(a){var b=P.wO(),c=P.vO(),d=b/2,e=c/2;P.resize(b,c,!1);b=U.R().J.Da;(c=K.l_(b))||H.K("Couldn't find onscreen subscene");b=c.H;d=P.gu(d,e,q,c.H);d[1]=b.height-d[1];d=F.KB(b.Mf,d[0],d[1],1,1,xa);m(a,d,1)};a.vaa=
function(a,b,c,d){if(JSON.stringify(a)!=JSON.stringify(b))throw"debug.eqs: wrong result";x(c,d,"eqs")};a.waa=m;a.uaa=function(a,b,c,d,e){if("number"!=typeof b||isNaN(b))throw"debug.eqf: wrong expected data type";if("number"!=typeof a||isNaN(a))throw"debug.eqf: wrong result data type";c=c?c:1E-6;if(b>a+c||b<a-c)throw"debug.eqf: wrong result";x(d,e,"eqf")};a.taa=function(a,b,c,d){if(a!==b)throw"debug.eq: wrong result";x(c,d,"eq")};a.ok=function(a,b,c){if(!a)throw"debug.ok: wrong result";x(b,c,"ok")};
a.stat=function(a){var b=[];a=w(a);for(var c in a)-1==ia.indexOf(a[c])&&"function"===typeof a[c]&&b.push(c);if(b.length){L.groupCollapsed(b.length+" function(s) not tested.");for(c=0;c<b.length;c++)L.Qd(b[c]);L.groupEnd()}else L.group("All functions were tested.")};a.Nea=function(a,b,c,e){r();b=g.Gm(a,b);if(!I.oG(a)||!b)return L.error("Normals are not avaliable for the dynamic object:",a.name),!1;var f=b.Pa;if(!(f&&f.cd&&f.cd.a_position&&f.cd.a_tbn))return L.error("Normals are not avaliable for the object:",
a.name),!1;b=I.iN(f,"a_position");var f=I.iN(f,"a_normal"),h=X.Km(a,R);C=D.eF("normal_line");a=new Float32Array(2*b.length);for(var k=0;k<b.length;k+=3){var l=ja;l[0]=b[k+0];l[1]=b[k+1];l[2]=b[k+2];var m=d.Mc(l,h,qa);a[2*k+0]=m[0];a[2*k+1]=m[1];a[2*k+2]=m[2];m=G.scale(f.subarray(k,k+3),c,qa);l=G.add(l,m,qa);l=d.Mc(l,h,qa);a[2*k+3]=l[0];a[2*k+4]=l[1];a[2*k+5]=l[2]}c=g.$_(C);I.FZ(c,a);F.fL(c);c.jd.set([1,1,1,1]);c.Bv=e};a.wca=r};b4w.module.main=function(a,w){function t(){}function c(){}function b(){}function k(){window.performance||(f.log("Apply performance workaround"),window.performance={});var a=Date.now();window.performance.now||(f.log("Apply performance.now() workaround"),window.performance.now=function(){return Date.now()-a});q.HR(0)}function h(a,b){for(var c=null,d=b?ca:xa,e=0;e<d.length;e++){var f=d[e];try{c=a.getContext(f,ia)}catch(ha){}if(c)break}c&&M.yZ(c);return c}function O(a,b,h){a.addEventListener("webglcontextlost",
function(a){a.preventDefault();f.error("WebGL context lost");x()},!1);l.wh(h);var k=l.Vz();k&&f.log("%cRENDERER INFO:","color: #00a",h.getParameter(k.UNMASKED_VENDOR_WEBGL)+", "+h.getParameter(k.UNMASKED_RENDERER_WEBGL));X.wh(h);u.wh(h);R.wh(h);G.wh(h);p.wh(h);D.wh(h);y.B4(a);p.Nf(a,b);d.LR(a.width,a.height,1);H.Nf();L.Nf();c=e();g()}function m(){t=function(){}}function x(){r()||(la=performance.now()/1E3,H.pause(),n.pause(),R.pause(),B.pause())}function r(){return ba<la}function g(){var a="HMD"===
ma.stereo&&L.E0();a?a.requestAnimationFrame(g):Ja(g);var b=performance.now()/1E3;ea||(ea=b);var e=b-ea;if(!(e<1/ma.max_fps)){for(var f=q.So(),h=0;h<da.length;h++)da[h](f,e);r()||(ba>ea&&(e-=ba-Math.max(la,ea)),q.X3(e),f+=e,q.HR(f),D.update(),P.update(),y.update(),h=e,y.Xi()&&(F.reset(),ja.update(h),A.update(f,h),U.update(f,h),H.update(f,h),h&&v.update(h),y.Xi()&&(n.update(f,h),y.Xi()&&(L.update(f),I.update(f,h),y.Xi()&&(B.update(!1),E.update(f,h),pa.update(),t(h,f),y.Xi()&&(d.update(f,h),B.VS(),K.frame()))))),
c(e));ea=b;a&&a.isPresenting&&a.submitFrame()}}function e(){var a=60,c=0,d=ma.qN,e=ma.o_;return function(f){f<1/ma.max_fps||(a=qa.Tc(1/f,a,f,d),f=n.f0(),(c=(c+1)%e)||b(Math.round(a),f))}}var B=w("__anchors"),v=w("__animation"),P=w("__assets"),N=w("__config"),M=w("__compat"),p=w("__container"),I=w("__controls"),y=w("__data"),D=w("__debug"),l=w("__extensions"),u=w("__geometry"),L=w("__input"),F=w("__hud"),U=w("__nla"),K=w("__main"),A=w("__logic_nodes"),E=w("__objects"),n=w("__physics"),f=w("__print"),
X=w("__renderer"),d=w("__scenes"),H=w("__sfx"),G=w("__shaders"),R=w("__textures"),q=w("__time"),ja=w("__transform"),qa=w("__util"),C=w("__version"),pa=w("__particles"),ia=N.context,ma=N.L,ea=0,la=0,ba=0,da=[],xa=["webgl","experimental-webgl"],ca=["webgl2","experimental-webgl2"],V=null,Ja=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,
1E3/ma.max_fps)}}();a.Nf=function(a,b){f.y4(ma.console_verbose);var c=C.Sw()+" "+C.type()+" ("+C.pF()+")";f.log("%cINIT ENGINE","color: #00a",c);f.log("%cUSER AGENT:","color: #00a",navigator.userAgent);if(!window.WebGLRenderingContext)return null;k();b?F.Nf(b):(N.L.show_hud_debug_info=!1,N.ra.aB=!1);M.xW();M.LE("Chrome")||M.LE("Firefox")||(ma.sb=!1);c=h(a,ma.sb);!c&&ma.sb&&(ma.sb=!1,c=h(a,!1));if(!c)return null;f.log("%cINIT WEBGL "+(ma.sb?"2":"1"),"color: #00a");V=c;O(a,b,c);N.Fq();M.vR(c,!0);N.k4();
G.N1();ma.sA&&(a.style["touch-action"]="none");f.log("%cSET PRECISION:","color: #00a",ma.precision);return c};a.b4=function(a){b=a};a.n$=function(){b=function(){}};a.o4=function(a){t=a};a.o$=function(){m()};a.pause=x;a.resume=function(){r()&&(ba=performance.now()/1E3,H.resume(),n.resume(),R.play(!0),B.resume())};a.xr=r;a.reset=function(){y.kD(0);y.reset();l.reset();X.reset();u.reset();R.z3();G.reset();D.reset();p.reset();y.reset();p.reset();q.reset();H.reset();ba=la=ea=0;b=function(){};c=function(){};
t=function(){};da.length=0;V=null};a.GE=function(a,b,c,d){K.GE(a,b,c,d)};a.Cm=function(){return M.Cm()};a.Pt=function(a){for(var b=0;b<da.length;b++)if(da[b]==a)return;da.push(a)};a.k3=function(a){for(var b=0;b<da.length;b++)if(da[b]==a){da.splice(b,1);break}};a.Vz=function(){var a=l.Vz();return a?{vendor:V.getParameter(a.UNMASKED_VENDOR_WEBGL),renderer:V.getParameter(a.UNMASKED_RENDERER_WEBGL)}:null}};b4w.module.__main=function(a,w){function t(a,b,e){var g=c.Wh();if(g.toBlob)g.toBlob(a,b,e);else{e=atob(g.toDataURL(b,e).split(",")[1]);for(var g=new Uint8Array(e.length),h=0;h<e.length;h++)g[h]=e.charCodeAt(h);a(new Blob([g],{type:b||"image/png"}))}}var c=w("__container"),b=null,k="image/png",h=1,O="",m=!1,x=!1;a.GE=function(a,c,e,t){m=x="undefined"===typeof t?t:!0;b=a;k=c||k;h=e||h};a.frame=function(){var a=b;a&&(m&&O&&URL.revokeObjectURL(O),t(function(b){navigator.msSaveOrOpenBlob?a(b):(O=URL.createObjectURL(b),
a(O))},k,h),b=null,k="image/png",h=1)}};b4w.module.physics=function(a,w){function t(a,b,c,g){return h.DZ(a,g[c[0]],g[c[1]],g[c[2]])}function c(a,b,c,g,e){b=Math.abs(a[2]-b[2]);return b<e&&O.r1(a,c,g)?b:Number.MAX_VALUE}var b=w("__physics"),k=w("__print"),h=w("__util"),O=w("__navmesh");a.CT=0;a.W6=1;a.V6=2;a.BJ=3;a.eN=function(a){b.Aa(a)?b.eN(a):k.va("No physics for object "+a.name)};a.yF=function(a){b.Aa(a)?b.yF(a):k.va("No physics for object "+a.name)};a.pca=function(a){return b.Aa(a)};a.qG=function(a){return b.qG(a)};a.HO=function(a){return b.HO(a)};
a.lI=function(a,c){k.hf("set_gravity","set_object_gravity");b.Aa(a)?b.lI(a,0,0,-c):k.va("No physics for object "+a.name)};a.pea=function(a,c){b.Aa(a)?b.lI(a,c[0],c[1],c[2]):k.va("No physics for object "+a.name)};a.dC=function(a,c,h){b.Aa(a)?b.dC(a,c,h):k.va("No physics for object "+a.name)};a.$=function(a){b.Aa(a)?b.$(a):k.va("No physics for object "+a.name)};a.bL=function(a,c,h,g){b.Aa(a)?b.bL(a,c,h,g):k.va("No physics for object "+a.name)};a.cL=function(a,c,h,g){b.Aa(a)?b.cL(a,c,h,g):k.va("No physics for object "+
a.name)};a.rE=function(a,c,h,g){b.Aa(a)?b.rE(a,c,h,g,!1):k.va("No physics for object "+a.name)};a.E9=function(a,c,h,g){b.Aa(a)?b.rE(a,c,h,g,!0):k.va("No physics for object "+a.name)};a.aL=function(a,c,h,g){b.Aa(a)?b.aL(a,c,h,g):k.va("No physics for object "+a.name)};a.$Q=function(a,c,h,g){b.Aa(a)?b.$Q(a,c,h,g):k.va("No physics for object "+a.name)};a.Ys=function(a,c){b.Aa(a)?(b.xg(a)||b.yg(a)||k.error("Wrong object"),b.Ys(a,h.pa(c,-1,1))):k.va("No physics for object "+a.name)};a.Hfa=function(a,c,
r){if(b.Aa(a)){b.xg(a)||b.yg(a)||k.error("Wrong object");c=h.pa(c,0,1);var g=a.S.$q;-1==r||1==r?g=Math.max(-1,Math.min(g+r*c,1)):!r&&0<=g?g=Math.max(0,g-c):!r&&0>g?g=Math.min(0,g+c):k.error("Wrong steering direction");b.Ys(a,h.pa(g,-1,1))}else k.va("No physics for object "+a.name)};a.Xs=function(a,c){b.Aa(a)?(b.xg(a)||b.yg(a)||k.error("Wrong object"),b.Xs(a,h.pa(c,-1,1))):k.va("No physics for object "+a.name)};a.Gfa=function(a,c,r){if(b.Aa(a)){b.xg(a)||b.yg(a)||k.error("Wrong object");c=h.pa(c,0,
1);var g=a.S.Ds;-1==r||1==r?g=Math.max(-1,Math.min(g+r*c,1)):!r&&0<=g?g=Math.max(0,g-c):!r&&0>g?g=Math.min(0,g+c):k.error("Wrong steering direction");b.Xs(a,h.pa(g,-1,1))}else k.va("No physics for object "+a.name)};a.qJ=function(a,c){b.Aa(a)?(b.xg(a)||b.yg(a)||k.error("Wrong object"),b.qJ(a,h.pa(c,0,1))):k.va("No physics for object "+a.name)};a.Ffa=function(a,c){if(b.Aa(a)){b.xg(a)||b.yg(a)||k.error("Wrong object");c=h.pa(c,-1,1);var m=a.S.cu;b.qJ(a,h.pa(m+m*c,0,1))}else k.va("No physics for object "+
a.name)};a.xg=function(a){return b.xg(a)};a.yg=function(a){return b.yg(a)};a.aca=function(a){if(!b.Aa(a))return k.va("No physics for object "+a.name),null;if(b.xg(a)||b.yg(a))return a.Kg.name;k.error("Wrong object");return null};a.cca=function(a){if(!b.Aa(a))return k.va("No physics for object "+a.name),null;if(b.xg(a)||b.yg(a))return a.S.$q;k.error("Wrong object");return null};a.bca=function(a){if(!b.Aa(a))return k.va("No physics for object "+a.name),0;if(b.xg(a)||b.yg(a))return a.S.Ds;k.error("Wrong object");
return 0};a.$ba=function(a){if(!b.Aa(a))return k.va("No physics for object "+a.name),0;if(b.xg(a)||b.yg(a))return a.S.cu;k.error("Wrong object");return 0};a.uO=function(a){if(!b.Aa(a))return k.va("No physics for object "+a.name),0;if(b.xg(a)||b.yg(a))return b.uO(a);k.error("Wrong object");return 0};a.pl=function(a){return b.FO(a)};a.hI=function(a,c,h){b.Aa(a)?b.hI(a,c,h):k.va("No physics for object "+a.name)};a.VB=function(a,c){b.Aa(a)?b.VB(a,c):k.va("No physics for object "+a.name)};a.gR=function(a,
c){b.Aa(a)?b.gR(a,c):k.va("No physics for object "+a.name)};a.fR=function(a,c){b.Aa(a)?b.fR(a,c):k.va("No physics for object "+a.name)};a.cR=function(a,c){b.Aa(a)?b.cR(a,c):k.va("No physics for object "+a.name)};a.KL=function(a){b.Aa(a)?b.KL(a):k.va("No physics for object "+a.name)};a.LL=function(a,c,h){b.Aa(a)?b.LL(a,c,h):k.va("No physics for object "+a.name)};a.dR=function(a,c,h){b.Aa(a)?b.dR(a,c,h):k.va("No physics for object "+a.name)};a.eR=function(a,c){b.Aa(a)?b.eR(a,c):k.va("No physics for object "+
a.name)};a.WB=function(a,c){b.Aa(a)?b.WB(a,c):k.va("No physics for object "+a.name)};a.XB=function(a,c){b.Aa(a)?b.XB(a,c):k.va("No physics for object "+a.name)};a.pE=function(a,c,h,g){b.Aa(a)?b.pE(a,c||"ANY",h,g||!1):k.va("No physics for object "+a.name)};a.OH=function(a,c,h){b.Aa(a)?b.OH(a,c||"ANY",h):k.va("No physics for object "+a.name)};a.qE=function(a,c){b.Aa(a)?b.qE(a,c):k.va("No physics for object "+a.name)};a.PE=function(a){b.Aa(a)?b.PE(a):k.va("No physics for object "+a.name)};a.Yx=function(a,
c,h,g,e,t){a=a||null;return null==a||b.Aa(a)?b.Yx(a,c,h,g||"ANY",e,t||!1,!1,!1,!1):(k.va("No physics for object "+a.name),0)};a.y9=function(a,c,h,g,e,t,v,w,N){a=a||null;return null==a||b.Aa(a)?b.Yx(a,c,h,g||"ANY",e,t||!1,v||!1,w||!1,N||!1):(k.va("No physics for object "+a.name),0)};a.PH=function(a){b.lP(a)?b.PH(a):k.error("Wrong ray test ID")};a.JL=function(a,c,h){b.lP(a)?b.JL(a,c,h):k.error("Wrong ray test ID")};a.XK=function(a,c,h,g,e,t,v,w,N,M){b.Aa(c)&&b.Aa(e)?b.XK(a,c,h,g,e,t,v,w,N,M):k.error("Wrong objects")};
a.eM=function(a){b.Aa(a)&&b.J0(a)?b.eM(a):k.error("Wrong object")};a.zQ=function(a,c,h,g,e,t){b.Aa(a)&&b.Aa(g)?b.zQ(a,c,h,g,e,t):k.error("Wrong objects")};a.WP=function(a,c,h){h||(h=t);if(b.Aa(a)){var g=a.O.Ev;return g?O.WP(g,c,h):(k.error(a.name+" is not a navigation mesh object"),null)}k.va("No physics for object "+a.name)};a.VP=function(a,h,r,g){if(b.Aa(a)){var e=a.O.Ev;if(!e)return k.error(a.name+" is not a navigation mesh object"),null;g=g||{};a={};a.do_not_pull_string=!!g.do_not_pull_string;
a.distance_to_closest=g.distance_to_closest||t;a.distance_to_farthest=g.distance_to_farthest||c;a.island=g.island||0;a.allowed_distance=g.allowed_distance||Number.MAX_VALUE;a.return_normals=g.return_normals||!1;return O.VP(e,h,r,a)}k.va("No physics for object "+a.name)}};b4w.module.screen=function(a,w){function t(){}function c(){}function b(a,b,c){function e(){document.fullscreenElement===a||document.webkitFullscreenElement===a||document.mozFullScreenElement===a||document.webkitIsFullScreen||document.msFullscreenElement===a?b():(document.removeEventListener("fullscreenchange",e,!1),document.removeEventListener("webkitfullscreenchange",e,!1),document.removeEventListener("mozfullscreenchange",e,!1),document.removeEventListener("MSFullscreenChange",e,!1),c())}a=a||m.re();
b=b||function(){};c=c||function(){};document.addEventListener("fullscreenchange",e,!1);document.addEventListener("webkitfullscreenchange",e,!1);document.addEventListener("mozfullscreenchange",e,!1);document.addEventListener("MSFullscreenChange",e,!1);a.TH=a.TH||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen;a.TH?a.TH():v.error("B4W App: request fullscreen method is not supported")}function k(){var a=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||
document.msExitFullscreen;"function"!=typeof a&&v.error("B4W App: exit fullscreen method is not supported");a.apply(document)}function h(a){var b=g.ba(g.Tb);if(b&&!I){var c=g.vg(b,g.Ug);if(c&g.Bx){var e=b.Zd,h=e.getEyeParameters("left"),e=e.getEyeParameters("right");m.resize(2*Math.max(h.renderWidth,e.renderWidth),Math.max(h.renderHeight,e.renderHeight),!1)}else h=m.Wh(),h=Math.max(2*h.height,h.width),m.resize(h,h/2,!1);h=g.Zh(b,g.IJ,M);e=g.Zh(b,g.JJ,p);O.mI(a,h,e,!(c&g.Bx));h={base_line_factor:.5,
inter_lens_factor:.5,enable_hmd_stereo:!0};c&(g.jm|g.zk|g.uq)&&(h.distortion_coefs=[b.distortion_coefs[0],b.distortion_coefs[1]],h.chromatic_aberration_coefs=[b.chromatic_aberration_coefs[0],b.chromatic_aberration_coefs[1],b.chromatic_aberration_coefs[2],b.chromatic_aberration_coefs[3]],b.Up||(b.wj&&b.Vj&&b.xj?h.base_line_factor=(b.wj-b.xj)/b.Vj:b.xj||(h.base_line_factor=b.wj/b.Vj)),b.Wi&&b.Nn&&!b.Up&&(h.inter_lens_factor=b.Wi/b.Nn));y.enabled||P.fB(.5,1);P.hs(h);if(b=g.vg(b,g.zt))c=P.R(),a=B.La(a,
c).oa,O.ZB(a,b);P.m3();I=!0}}var O=w("__camera"),m=w("__container"),x=w("__config"),r=w("__hud"),g=w("__input"),e=w("__main"),B=w("__obj_util"),v=w("__print"),P=w("__scenes"),N=w("__vec4"),M=N.create(),p=N.create(),I=!1,y=x.Bo;a.aN=r.aN;a.sQ=r.sQ;a.UH=b;a.DF=k;a.Mq=g.Mq;a.NQ=function(a,c,e){if("HMD"!=!x.get("stereo")||"NONE"==x.get("stereo")&&x.get("is_mobile_device")){var h=g.ba(g.Tb);if(h&&g.vg(h,g.Ug)&g.Un){var k=h.Zd;k&&!k.isPresenting&&(c=c||function(){},e=e||function(){},t=function(){k.isPresenting?
c():(window.removeEventListener("vrdisplaypresentchange",t),e())},window.addEventListener("vrdisplaypresentchange",t,!1),k.capabilities.canPresent?(a=m.Wh(),k.requestPresent([{source:a}]).then(function(){},function(){v.error("HMD fullscreen request failed.")})):v.error("HMD fullscreen request failed."))}else b(a,c,e)}};a.VZ=function(){if("HMD"!=!x.get("stereo")||"NONE"==x.get("stereo")&&x.get("is_mobile_device")){var a=g.ba(g.Tb);a&&g.vg(a,g.Ug)&g.Un?(a=a.Zd)&&a.isPresenting&&(a.exitPresent(),m.Jl(!0)):
k()}};a.IE=function(){var a=g.ba(g.Tb),b=g.vg(a,g.Ug)&g.Un;return a&&(b&&a.Zd||!b&&g.Mq())?!0:!1};a.y3=function(a){var b=g.ba(g.Tb);if(b&&!I&&(c=void 0,P.Ya())){var e=P.Jm(P.R());e&&(b.vh?(h(e),a&&a()):(g.x3(b),b.dw=function(){h(e);a&&a()}))}};a.WZ=function(){var a=g.ba(g.Tb);I&&a&&a.vh&&(P.hs({enable_hmd_stereo:!1}),I=!1,c&&c(),P.n3(),y.enabled||P.fB(2,1),m.Jl(!0))};a.Lea=function(a,b){a=a||"image/png";e.GE(function(b){var c="screenshot."+a.split("/")[1];navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(b,
c):(c=window.document.createElement("a"),document.body.appendChild(c),c.style.display="none",c.href=b,c.download="screenshot."+a.split("/")[1],c.click(),document.body.removeChild(c))},a,b||1,!0)}};b4w.module.transform=function(a,w){var t=w("__boundings"),c=w("__obj_util"),b=w("__physics"),k=w("__print"),h=w("__quat"),O=w("__transform"),m=w("__tsr"),x=w("__util"),r=m.create(),g=new Float32Array(3),e=new Float32Array(4);a.ke=function(a,e,h,m){c.ea(a)?(g[0]=e,g[1]=h,g[2]=m,O.ke(a,g),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.eC=function(a,e,h,m){c.ea(a)?(g[0]=e,g[1]=h,g[2]=m,O.eC(a,g),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.fC=function(a,
e){c.ea(a)?(O.ke(a,e),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Iea=function(a,e){c.ea(a)?(O.eC(a,e),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Hea=function(a,e,h,r,t){c.ea(a)?(g[0]=e,g[1]=h,g[2]=r,e=m.X(t.A.D),t=m.la(t.A.D),x.Mc(g,1,t,e,g),O.ke(a,g),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Me=function(a,b){b||(b=new Float32Array(3));O.Me(a,b);return b};a.sO=function(a,b){b||(b=new Float32Array(3));O.sO(a,b);
return b};a.Ol=function(a,g,h,m,r){c.ea(a)?(e[0]=g,e[1]=h,e[2]=m,e[3]=r,O.Ol(a,e),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.bC=function(a,g,h,m,r){c.ea(a)?(e[0]=g,e[1]=h,e[2]=m,e[3]=r,O.bC(a,e),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.ow=function(a,e){c.ea(a)?(O.Ol(a,e),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.yea=function(a,e){c.ea(a)?(O.bC(a,e),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};
a.Mba=function(a,b){if(c.ea(a))return O.eG(a,b),b;k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Rj=function(a,b){b||(b=new Float32Array(4));O.Rj(a,b);return b};a.eG=function(a,b){b||(b=new Float32Array(4));O.eG(a,b);return b};a.sI=function(a,e,h,m){c.ea(a)?(g[0]=e,g[1]=h,g[2]=m,O.sI(a,g),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.iO=function(a,b){b||(b=new Float32Array(3));O.iO(a,b);return b};a.jO=function(a,b){b||(b=new Float32Array(3));O.jO(a,b);return b};
a.tI=function(a,e,h,m){c.ea(a)?(g[0]=e,g[1]=h,g[2]=m,O.tI(a,g),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.wea=function(a,e){c.ea(a)?(O.sI(a,e),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.vea=function(a,e){c.ea(a)?(O.tI(a,e),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Ue=function(a,b){c.ea(a)?(O.Ue(a,b),O.W(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.uI=function(a,b){c.ea(a)?(O.uI(a,b),O.W(a)):k.error('Wrong object: "'+
a.name+'" is not dynamic.')};a.ge=function(a){return O.ge(a)};a.lO=function(a){return O.lO(a)};a.oaa=function(a){if("EMPTY"!=a.type)k.error("Wrong object: "+a.name);else{for(var e=0;e<a.cf.length;e++)if(!c.ea(a.cf[e])){k.error('Wrong object: "'+a.cf[e].name+'" is not dynamic.');return}O.ke(a,[0,0,0]);O.Ol(a,[0,0,0,1]);O.Ue(a,1);O.W(a);b.$(a)}};a.cG=function(a){return c.pf(a)?O.cG(a):(k.error("Wrong object: "+a.name),0)};a.Tz=function(a,b,e){if(!c.pf(a))return k.error("Wrong object: "+a.name),null;
e||(e=new Float32Array(3));return O.Tz(a,b,e)};a.Bg=function(a,e,g,h){c.ea(a)?(O.Bg(a,e,g,h),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Tda=function(a,g){if(c.ea(a)){var m=h.setAxisAngle(x.Cf,g,e);O.aI(a,m);O.W(a);b.$(a)}else k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Uda=function(a,g){if(c.ea(a)){var m=h.setAxisAngle(x.Eh,g,e);O.aI(a,m);O.W(a);b.$(a)}else k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Vda=function(a,g){if(c.ea(a)){var m=h.setAxisAngle(x.ic,
g,e);O.aI(a,m);O.W(a);b.$(a)}else k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.xba=function(a){return t.xy(a.A.Ki)};a.mk=function(a,e){c.ea(a)?(O.mk(a,e),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.gC=function(a,e){c.ea(a)?(O.gC(a,e),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.Km=function(a,b){b||(b=new Float32Array(8));O.Km(a,b);return b};a.fv=function(a,b){b||(b=new Float32Array(8));O.fv(a,b);return b};a.distance=function(a,b){return O.distance(a,
b)};a.kea=function(a,e){c.ea(a)?(m.Vh(e,r),O.mk(a,r),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.lea=function(a,e){c.ea(a)?(m.Vh(e,r),O.gC(a,r),O.W(a),b.$(a)):k.error('Wrong object: "'+a.name+'" is not dynamic.')};a.tba=function(a,b){b||(b=new Float32Array(16));O.Km(a,r);m.cD(r,b);return b};a.uba=function(a,b){b||(b=new Float32Array(16));O.fv(a,r);m.cD(r,b);return b}};b4w.module.util=function(a,w){var t=w("__compat"),c=w("__print"),b=w("__quat"),k=w("__tbn"),h=w("__util"),O=w("__vec3");a.Cf=new Float32Array([1,0,0]);a.Ee=new Float32Array([0,1,0]);a.ic=new Float32Array([0,0,1]);a.kt=new Float32Array([-1,0,0]);a.Eh=new Float32Array([0,-1,0]);a.qc=new Float32Array([0,0,-1]);a.wK=h.wK;a.DK=h.DK;a.EK=h.EK;a.yK=h.yK;a.AK=h.AK;a.GK=h.GK;a.xK=h.xK;a.CK=h.CK;a.iE=h.iE;a.zK=h.zK;a.BK=h.BK;a.FK=h.FK;a.Qh=function(a){return h.Qh(a||0)};a.assert=h.assert;a.uP=h.uP;a.Pd=h.Pd;
a.SG=function(a){return h.SG(a)};a.fl=function(a,b){b||(b=new Float32Array(4));return h.fl(a,b)};a.qH=function(a,c,k){k||(k=b.create());return h.qH(a,c,k)};a.DQ=function(a,b,c){c||(c=O.create());return h.DQ(a,b,c)};a.Wv=function(a,b){b||(b=new Float32Array(3));return h.Wv(a,b)};a.sign=h.sign;a.pa=h.pa;a.Jc=h.Jc;a.kca=function(a,b){return h.HB(a,h.qc,h.ic,h.Ee,b)};a.FE=function(a,b){return h.FE(a,b)};a.HB=function(a,b,k,g,e){return 0!=O.dot(k,g)?(c.error("Wrong in-plane direction"),null):h.HB(a,b,
k,g,e)};a.JO=h.JO;a.Tc=h.Tc;a.BC=h.BC;a.Yi=h.Yi;a.XE=h.XE;a.CQ=h.CQ;a.FQ=h.FQ;a.OO=h.OO;a.Jh=h.Jh;a.Fi=h.Fi;a.sn=h.sn;a.lerp=h.lerp;a.df=h.df;a.JB=h.JB;a.wF=h.wF;a.ep=t.ep;a.Qaa=k.get;a.trunc=h.trunc};b4w.module.camera_anim=function(a,w){function t(a,b,e,g,h){e=r.Jh(b-e);e=Math.min(e,2*Math.PI-e);b=r.Jh(g-b);b=Math.min(b,2*Math.PI-b);if(1E-6>Math.abs(e)||1E-6>2*Math.PI-Math.abs(e))e=0;if(1E-6>Math.abs(b)||1E-6>2*Math.PI-Math.abs(b))b=0;c.Ne(a)?(h[0]=b,h[1]=e):(h[0]=e,h[1]=b);return h}var c=w("camera"),b=w("controls"),k=w("print"),h=w("scenes"),O=w("time"),m=w("transform"),x=w("tsr"),r=w("util"),g=w("vec3"),e=new Float32Array(2),B=new Float32Array(2),v=new Float32Array(3),P=new Float32Array(3),
N=new Float32Array(3),M=x.create(),p=x.create(),I=x.create(),y={},D=!1,l=!1,u=!1,L=!1;a.pfa=function(a,h,l,p,t,n,f,u){if(c.Ne(a)){if(r.Yi(h))var d=h;else d=v,m.Tz(h,!1,d);l=l||1;p=p||2;t=t||1;n=n||1;var w=m.Me(a,P);h=g.subtract(d,w,N);var d=c.ml(a,e),x=c.P_(h,B),y=x[0]-d[0],q=x[1]-d[1],A=Math.abs(Math.acos(Math.cos(y)*Math.cos(q))/l),E=g.length(h)*(1-1/p),C=function(a){return 6*a*(1-a)},F=O.So(),D=0,K=function(){b.Uf(a,"TRACK_TO_TARGET");f&&f()};l=b.Oy();p=b.ym();b.qa(a,"TRACK_TO_TARGET",b.ob,[l,
p],null,function(d,e,f){c.Ne(d)?1==f&&(f=b.wd(d,e,0)-F,e=b.wd(d,e,1),f<A?(f=C(f/A),c.Lc(a,f*y*e/A,f*q*e/A)):f<A+t?(D||(c.Lc(a,x[0],x[1],!0),D++),f=C(f-A/t),e=f*E*e/t,m.Bg(d,0,0,-e)):f<A+t+n?1>=D&&(c.Lc(a,x[0],x[1],!0),c.IF(a,w),m.Bg(d,0,0,-E),u&&u(),D++):f<A+t+n+t?(2>=D&&(c.Lc(a,x[0],x[1],!0),c.IF(a,w),m.Bg(d,0,0,-E),D++),f=C(f-A-t-n/t),e=f*E*e/t,m.Bg(d,0,0,e)):(c.Lc(a,x[0],x[1],!0),c.IF(a,w),K())):K()})}else k.error("track_to_target(): Wrong camera object or camera move style")};a.kL=function(a){function g(a,
d,h){if(1==h)if(h=c.Vi(a),h==c.He)l();else if(h!=c.Ob&&h!=c.Xc||!c.M0(a))p=null,d=b.wd(a,d,0),c.Lc(a,.3*d,0);else{h=h==c.Xc?c.e_(a,y):c.l5(a,y);if(null===p||h.left!=p.left||h.right!=p.right){p=p||{};p.left=h.left;p.right=h.right;n=Math.min(.2,r.Jh(p.right-p.left)/2);h=m;var g=p,k=c.ml(h,e)[0];h=t(h,k,g.left,g.right,B);f=.3*Math.min(1,h[0]/.2,h[1]/.2)}d=b.wd(a,d,0);h=c.ml(a,e)[0];h=t(a,h,p.left,p.right,B);h[1]>n&&h[0]>n?f=.3*r.sign(f):h[1]<n?f-=Math.pow(.3,2)/.4*d:h[0]<n&&(f+=Math.pow(.3,2)/.4*d);
c.Lc(a,d*f,0)}}function l(){b.Uf(m,"AUTO_ROTATE");b.Uf(m,"DISABLE_AUTO_ROTATE");a()}a=a||function(){};var m=h.ll();if(c.gp(m))k.error("auto_rotate(): Wrong camera move style");else{var p={},n=0,f=0;if(b.tm(m,"AUTO_ROTATE"))l();else{var v=b.Wk("X"),d=b.Wk("Y"),u=b.yo(),w=b.Cu(),x=b.Py(),q=b.ym(),D=b.zu(0);b.qa(m,"DISABLE_AUTO_ROTATE",b.Zp,[v,d,u,w,x,D],function(a){return a[0]&&a[2]||a[1]&&a[2]||a[3]||a[4]||a[5]},l);b.qa(m,"AUTO_ROTATE",b.ob,[q],function(a){return a[0]},g)}}};a.$O=function(){var a=
h.ll();return b.tm(a,"AUTO_ROTATE")};a.tX=function(){var a=h.ll();return c.Vi(a)==c.He?!1:!0};a.mda=function(a,b,e,h,l){if(c.Vi(a)!=c.He)k.error("move_camera_to_point(): wrong camera type");else if(!D)if(a)if(b){e=e||1;h=h||.01;var n=r.Yi(a)?a:m.Km(a,M),f=r.Yi(b)?b:m.Km(b,p);b=g.distance(x.X(n),x.X(f))/e;e=r.Jc(x.la(n),r.qc,v);var t=r.Jc(x.la(f),r.qc,P);e=Math.min(Math.abs(g.dot(e,t)),1);h=1E3*Math.max(b,Math.acos(e)/h);D=!0;var d=O.Hi(0,1,h,function(b){var c=x.rr(n,f,r.sn(b),I);u?(O.Tk(d),D=u=!1):
(m.mk(a,c),1==b&&(D=!1,l&&l()))})}else k.error("move_camera_to_point(): you must specify the point object");else k.error("move_camera_to_point(): you must specify the camera object")};a.Lc=function(a,b,e,h,g){if(c.Vi(a)==c.He)k.error("rotate_camera(): not supported for STATIC cameras");else if(!l)if(a)if(b||e){h=h||1E3;l=!0;var m=0,f=O.Hi(0,b,h,function(d){L||d>=b?(L=!1,O.Tk(f),l&&(l=!1,g&&g())):(c.Lc(a,m-d,0),m=d)}),p=0,d=O.Hi(0,e,h,function(b){L||b>=e?(L=!1,O.Tk(d),l&&(l=!1,g&&g())):(c.Lc(a,0,p-
b),p=b)})}else k.error("rotate_camera(): you must specify the rotation angle");else k.error("rotate_camera(): you must specify the camera object")};a.Zea=function(){u=!0};a.$ea=function(){L=!0};a.Yca=function(){return D};a.$ca=function(){return l}};b4w.module.time=function(a,w){var t=w("__time");a.cC=t.cC;a.Nq=t.Nq;a.So=t.So;a.Hi=t.Hi;a.Tk=t.Tk};b4w.module.tsr=function(a,w){var t=w("__mat4"),c=w("__tsr");a.create=c.create;a.Bz=c.Bz;a.copy=c.copy;a.identity=c.identity;a.ti=c.ti;a.Bd=c.Bd;a.Ue=c.Ue;a.on=c.on;a.Gc=c.Gc;a.X=c.X;a.ge=c.ge;a.la=c.la;a.invert=c.invert;a.cD=function(a,k){k||(k=t.create());c.cD(a,k);return k};a.Vh=c.Vh;a.multiply=c.multiply;a.Mc=c.Mc;a.BS=c.BS;a.Cn=c.Cn;a.eJ=c.eJ;a.Vd=c.Vd;a.fJ=c.fJ;a.translate=c.translate;a.rr=function(a,k,h,t){t||(t=c.create());c.rr(a,k,h,t);return t}};b4w.module.gp_conf=function(a,w){function t(){A.length=0;for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<a.length;b++)a[b]&&A.push(a[b]);return A}function c(a){var b=P.get(a+"_gmpd_stngs","b4w");if(b){var b=JSON.parse(b),c;for(c in b)v.nw(a,c,b[c])}else c=JSON.stringify(M),P.set(a+"_gmpd_stngs",c,"b4w")}function b(a){X=!0;var b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("div"),
h=document.createElement("div"),g=document.createElement("div"),k=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div"),t=document.createElement("div"),r=document.createElement("div"),w=document.createElement("div"),y=document.createElement("div"),A=document.createElement("div"),B=document.createElement("div"),H=document.createElement("div"),D=document.createElement("div"),F=document.createElement("div"),K=document.createElement("div"),I=document.createElement("div"),
L=document.createElement("div"),M=document.createElement("div");u=b;b.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg26627" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="128.51mm" viewBox="0 0 636.63517 455.33329" width="179.67mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/"><defs id="defs26629"><linearGradient id="linearGradient4691"><stop id="stop4693" offset="0"/><stop id="stop4695" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4358"><stop id="stop4360" stop-color="#2e2e2e" offset="0"/><stop id="stop4362" stop-color="#2e2e2e" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4364" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="matrix(-1 0 0 1 1531.4 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4368" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="translate(-896.37 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4430" x1="959.32" gradientUnits="userSpaceOnUse" y1="653.07" gradientTransform="matrix(-1 0 0 1 1531.4 70.097)" x2="1467.6" y2="653.07"><stop id="stop4426" stop-color="#4f4f4f" offset="0"/><stop id="stop4428" stop-color="#4f4f4f" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4701" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="translate(-52.276 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4713" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="matrix(-1 0 0 1 689.01 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4725" x1="367.39" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="125.6" gradientTransform="matrix(-1.3272 0 0 .68317 806.95 579.14)" x2="367.39" y2="116.11"/></defs><metadata id="metadata26632"><rdf:RDF><cc:Work rdf:about="">    <dc:format>image/svg+xml</dc:format>    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>    <dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -597.03)"><g id="g20" fill-rule="evenodd"><path id="path4209" fill="#434343" d="m576.71 1052.4c42.015-1.9097 64.296-46.468 59.204-122.86-5.0928-76.387-27.374-175.69-44.562-224.7-17.188-49.015-25.501-62.531-26.737-65.565-3.7697-9.2504-11.278-19.949-62.379-27.691-28.97-4.3891-16.697-7.9577-27.084-9.4696-17.96-2.6141-43.609-1.229-52.203 1.6354-8.594 2.8645-12.709 29.16-24.486 35.207-11.777 6.0473-19.416 10.185-80.149 10.185s-68.372-4.1376-80.149-10.185c-11.777-6.0473-18.113-32.099-25.736-36.993-11.183-7.1796-26.985-5.6722-54.891-0.57481-5.64 1.0302-1.1304 7.6212-18.165 12.509-32.913 9.4438-52.094 3.7056-65.087 20.831-1.9807 2.6106-11.822 21.096-29.01 70.111-17.179 48.95-39.46 148.25-44.553 224.64-5.0929 76.39 17.188 120.99 59.204 122.89 73.339-1.7 55.219-116.53 258.4-116.53s185.05 114.82 258.4 116.49z"/><path id="path4366" fill="url(#linearGradient4368)" d="m249.77 838.51c-107.76 0-171.55 96.288-176.84 121.23-5.2294 24.634-17.658 55.705 3.8195 53.789 9.6996-0.8655 18.053-15.713 37.559-38.193 18.78-21.643 41.379-54.425 96.763-54.425s73.209-44.877 75.119-53.152c1.9098-8.2752 2.4146-27.976-36.418-29.25z"/><path id="path4217" fill="url(#linearGradient4364)" d="m385.23 838.51c107.76 0 171.55 96.288 176.84 121.23 5.2293 24.634 17.658 55.705-3.8195 53.789-9.6996-0.8655-18.053-15.713-37.559-38.193-18.78-21.643-41.379-54.425-96.763-54.425s-73.209-44.877-75.119-53.152c-1.9098-8.2752-2.4146-27.976 36.418-29.25z"/><path id="path4370" fill="url(#linearGradient4430)" d="m572.06 654.81c-60.48-19.09-76.79-18.6-89.84-17.96-13.05 0.63657-22.638 16.617-45.237 49.4s-67.48 125.27-116.23 125.27c-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-32.008-48.942-45.059-49.579-13.05-0.63648-35.251 1.8354-95.728 20.932l1.1161-2.3404c60.494-19.1 81.754-20.83 94.804-20.19 13.05 0.63657 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63648 28.783-1.6248 89.26 17.472"/><path id="path4315" fill="#343434" d="m570.99 652.48c-60.477-19.097-76.074-18.269-89.124-17.633-13.05 0.63658-22.281 14.832-44.88 47.614-22.599 32.783-67.48 125.27-116.23 125.27-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-31.83-46.978-44.88-47.614-13.05-0.63648-34.715 1.2996-95.192 20.396l1.1161-2.3404c60.474-19.1 81.024-22.26 94.074-21.62 13.05 0.63658 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63647 27.71-0.17274 88.186 18.924"/></g><g id="g15645" transform="matrix(.75439 0 0 1 1558.5 -6638.3)" fill-rule="evenodd"><rect id="rect15584" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6558.3" x="100.71" fill="#4164bb"/><rect id="rect15331" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6554.6" x="100.71" fill="#5276cf"/></g><text id="text15623-9" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="22px" line-height="430.99999428%" y="-53.755863" x="1792.7805" font-family="&apos;Noto Sans CJK TC&apos;" fill="#ffffff"><tspan id="tspan15625-5" y="-53.755863" x="1792.7805"/></text><text id="text15657" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="13px" line-height="430.99999428%" y="-3.7607465" x="1670.2437" font-family="&apos;Noto Sans CJK TC&apos;" fill="#828282"><tspan id="tspan15659" y="-3.7607465" x="1670.2437"/></text><g id="g34" fill-rule="evenodd"><path id="path4675" fill="#303030" d="m551.75 628.4c9.3003 4.1796 8.2375 11.558 2.1302 9.9581-6.1073-1.6003-33.792-9.1405-46.239-11.577-12.446-2.4363-34.904-3.0623-36.951-4.0165-2.0474-0.95416 0.93313-7.7247 5.491-7.3449 23.258 0.91012 59.905 6.0339 75.569 12.98z"/><path id="path4677" fill="#303030" d="m474.88 602.61c3.6488 0.63684 4.1169 1.3708 2.4115 5.2499-0.80967 1.8416-1.261 3.904-3.4715 3.7336-4.456-0.34344-16.578-1.2846-25.692-1.3764-9.1139-0.0918-23.83 1.217-25.307 0.79399-1.4771-0.42301-1.8834-4.9141 1.7769-6.7458 4.6221-1.3593 38.698-3.2021 50.281-1.6553z"/><path id="path4699" opacity=".384" fill="url(#linearGradient4701)" d="m475.53 611.7c-11.693-0.63604-8.4597-0.73151-44.068 54.448-6.5182 8.6489-22.874 37.231-36.865 35.326-6.7491-1.4177 15.436-67.299 22.724-75.767 11.112-12.911 19.255-16.122 58.209-14.007z"/><path id="path4703" fill="#303030" d="m84.068 628.4c-9.3003 4.1796-8.2375 11.558-2.1302 9.9581 6.1073-1.6003 33.792-9.1405 46.239-11.577 12.446-2.4363 34.904-3.0623 36.951-4.0165 2.0474-0.95416-0.93313-7.7247-5.491-7.3449-23.258 0.91012-59.905 6.0339-75.569 12.98z"/><path id="path4705" fill="#303030" d="m161.86 602.61c-3.6488 0.63684-4.1169 1.3708-2.4115 5.2499 0.80967 1.8416 1.261 3.904 3.4715 3.7336 4.456-0.34344 16.578-1.2846 25.692-1.3764 9.1139-0.0918 23.83 1.217 25.307 0.79399 1.4771-0.42301 1.8834-4.9141-1.7769-6.7458-4.6221-1.3593-38.698-3.2021-50.281-1.6553z"/><path id="path4711" opacity=".384" fill="url(#linearGradient4713)" d="m161.2 611.7c11.693-0.63604 8.4597-0.73151 44.068 54.448 6.5182 8.6489 22.874 37.231 36.865 35.326 6.7491-1.4177-15.436-67.299-22.724-75.767-11.112-12.911-19.255-16.122-58.209-14.007z"/><path id="path4717" opacity=".115" fill="url(#linearGradient4725)" d="m413.37 645.84c-9.0496 10.007-29.401 19.937-36.775 19.937h-52.205c-31.171 0-37.359 0.34506-47.75 0.51758-10.39 0.17253-18.682 0.65628-23.653-3.278-5.0513-3.9977-24-15.425-24-15.425 53.346 4.1464 144.49 4.3368 184.38-1.7523z"/></g></g><g id="layer1-0" fill-rule="evenodd" transform="translate(159.08 -720.76)"><g id="g4527-3" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g><g id="layer1-7" fill-rule="evenodd" transform="translate(352.57 -719.72)"><g id="g4527-3-4" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8-9" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3-5" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506-2" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g></svg>')+
"');width: 637px;height: 455px;background-size: 100% 100%;left: 50%;margin-bottom: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);bottom: 0px;";c.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3904" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="35.924mm" width="35.926mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 127.29808 127.28933"><metadata id="metadata3909"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -925.07)"><ellipse id="circle4330" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="63.649" ry="63.645" cy="988.72" cx="63.649" fill="#303030"/><ellipse id="circle4223" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="59.705" ry="59.701" cy="988.72" cx="63.649" fill="#4c4c4c"/></g></svg>')+
"');position: absolute;top: 47px;left: 65px;width: 135px;height: 135px;";d.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;left: 49px;top: 8px;position: absolute;";e.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 84px;position: absolute;";h.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;bottom: 11px;left: 51px;position: absolute;";g.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 13px;position: absolute;";k.style.cssText="position: absolute;top: 55px;left: 434px;width: 150px;height: 150px;";l.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;top: 0px;position: absolute;";m.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 107px;top: 51px;position: absolute;";t.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;bottom: 0px;position: absolute;";r.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;top: 51px;position: absolute;";w.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 222px;left: 183px;width: 85px;height: 85px;";y.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 223px;left: 376px;width: 85px;height: 85px;";A.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 227px;width: 34px;height: 34px;";B.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 376px;width: 34px;height: 34px;";H.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>')+
"');position: absolute;top: 4px;left: 78px;width: 79px;height: 33px;";D.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: 4px;left: 477px;width: 79px;height: 33px;";F.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 425px;width: 50px;height: 17px;";K.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 164px;width: 50px;height: 17px;";I.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>')+
"');position: absolute;top: 68px;left: 274px;width: 92px;height: 92px;";L.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 186px;left: 148px;width: 157px;height: 157px;";M.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 187px;left: 339px;width: 157px;height: 157px;";b.appendChild(L);b.appendChild(M);c.appendChild(d);c.appendChild(e);c.appendChild(h);c.appendChild(g);b.appendChild(c);k.appendChild(l);k.appendChild(m);k.appendChild(t);k.appendChild(r);b.appendChild(k);b.appendChild(w);b.appendChild(y);b.appendChild(A);b.appendChild(B);b.appendChild(H);b.appendChild(D);b.appendChild(F);a.appendChild(b);b.appendChild(K);b.appendChild(I);E.length=0;p.length=0;n.length=0;f.length=0;E.push(t,
m,r,l,H,D,K,F,A,B,w,y,d,h,g,e,I);p.push('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>',
'<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>');
n.push(w,w,y,y);f.push(L,M);for(a=0;a<E.length;a++)E[a].setAttribute("id","pad_btn_"+a),E[a].setAttribute("data-colorstate","B"),E[a].setAttribute("data-key",a),E[a].setAttribute("data-svgid",a);L.setAttribute("id","pad_left_axis");L.setAttribute("data-colorstate","GR");L.setAttribute("data-key",v.hm);L.setAttribute("data-svgid",p.length);M.setAttribute("id","pad_right_axis");M.setAttribute("data-colorstate","GR");M.setAttribute("data-key",v.im);M.setAttribute("data-svgid",p.length+1);p.push('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>',
'<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>');
x(E,N);x(f,"#e6e6e6")}function k(a){return[B.gc(v.cq,a),B.gc(v.eq,a),B.gc(v.mq,a),B.gc(v.nq,a),B.gc(v.oq,a),B.gc(v.pq,a),B.gc(v.Sn,a),B.gc(v.Tn,a),B.gc(v.qq,a),B.gc(v.rq,a),B.gc(v.fq,a),B.gc(v.gq,a),B.gc(v.hq,a),B.gc(v.iq,a),B.gc(v.jq,a),B.gc(v.kq,a),B.gc(v.lq,a),B.gc(v.ix,a),B.gc(v.jx,a),B.gc(v.kx,a),B.gc(v.lx,a),B.gc(v.mx,a),B.gc(v.nx,a),B.gc(v.ox,a),B.gc(v.px,a),B.gc(v.qx,a)]}function h(a){return[B.ne(v.hm,a),B.ne(v.Qn,a),B.ne(v.im,a),B.ne(v.Rn,a),B.ne(v.aq,a),B.ne(v.bq,a),B.ne(v.vt,a),B.ne(v.wt,
a),B.ne(v.xt,a),B.ne(v.yt,a),B.ne(v.tt,a),B.ne(v.ut,a)]}function O(a,b){var c=document.createElement("input");c.style.cssText="display: inline-block;position = relative;";c.setAttribute("type","radio");c.setAttribute("name","choice");var d=document.createElement("label");d.textContent=b;d.style.cssText="position = relative;display: inline-block;color: white;";a.appendChild(c);a.appendChild(d);return c}function m(a){l.removeChild(u);u=null;switch(a){case "PAD":U.checked=!0;b(l);break;case "WHEEL":F.checked=
!0;var c=l;X=!1;var d=document.createElement("div"),e=document.createElement("div"),h=document.createElement("div"),g=document.createElement("div"),k=document.createElement("div"),m=document.createElement("div"),t=document.createElement("div"),r=document.createElement("div"),w=document.createElement("div"),y=document.createElement("div"),A=document.createElement("div"),B=document.createElement("div"),D=document.createElement("div"),H=document.createElement("div"),K=document.createElement("div"),I=
document.createElement("div"),L=document.createElement("div"),M=document.createElement("div"),O=document.createElement("div"),P=document.createElement("div"),aa=document.createElement("div"),za=document.createElement("div"),ha=document.createElement("div"),J=document.createElement("div");a=document.createElement("div");var ra=document.createElement("div"),ya=document.createElement("div"),Q=document.createElement("div"),va=document.createElement("div"),Va=document.createElement("div");u=d;var Ba="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+
btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>')+
"');width: 19px;height: 19px;background-size: 100% 100%;";d.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="112.08413mm" height="128.46834mm" viewBox="0 0 397.14849 455.20277" id="svg3440" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel.svg"><defs id="defs3442" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="0.98994949" inkscape:cx="421.01508" inkscape:cy="52.510802" inkscape:document-units="px" inkscape:current-layer="g87" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3445"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title /></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(-2.3645008e-8,-597.15942)"><path inkscape:connector-curvature="0" style="fill:#4d4d4d;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4140" d="m 307.84153,715.52552 c -4.35995,43.11849 -2.78952,86.66385 -15.90234,128.54337 -10.85452,25.86023 -13.33477,47.2976 6.91492,61.09536 7.23778,50.7442 78.38013,47.39232 82.20535,0 23.06079,-14.19054 13.49405,-42.79138 6.91492,-61.09536 -17.40045,-40.83001 -4.82581,-86.43019 -15.90235,-128.54337 -8.3177,-20.33228 -56.75348,-20.7661 -64.22927,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#cccccc;stroke:#1a1a1a;stroke-width:2.09465766;stroke-miterlimit:4;stroke-dasharray:none" id="path4266" d="m 313.11812,724.1957 -3.84514,68.80568 c 4.64168,13.40814 62.19981,10.8172 61.83082,0 l -3.84515,-68.80568 c -4.46942,-24.00369 -52.58756,-18.95946 -54.13979,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#353535;stroke:#2c2c2c;stroke-width:2.11880326;stroke-miterlimit:4;stroke-dasharray:none" id="path4156" d="m 304.91419,870.673 c -12.36924,67.40381 80.42804,69.69607 70.55134,0 -6.57605,-36.5947 -65.0964,-34.8253 -70.55134,0 z m 60.53812,3.9862 c 8.65841,48.24354 -57.58987,49.86644 -50.52489,0 4.7009,-26.27069 46.6394,-24.84292 50.52489,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#e6e6e6;stroke:#969696;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4011" d="m 106.04576,696.97906 c -11.197076,4.25792 -17.123706,8.24834 -17.123706,8.24834 l -66.18493,16.33946 1.40291,30.64619 46.54715,-7.67623 c 17.00932,-1.6438 32.551896,8.94676 38.302026,23.34506 l 2.78663,65.4778 27.6363,0 2.78663,-65.4778 c 8.0428,-15.3291 20.46247,-27.10803 38.30202,-23.34506 l 46.54716,7.67623 1.40291,-30.64619 -66.18493,-16.33946 c 0,0 -5.92627,-3.99074 -17.12371,-8.24834 -13.45408,-4.31874 -26.62772,-4.20804 -39.08982,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#252525;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path2996" d="m 38.311064,931.09899 c -8.01574,5.05649 -22.76006,21.74743 -26.34852,58.0567 -4.1290804,35.18581 -4.8394604,60.59901 28.55878,61.68771 l 162.934726,0 c 39.19437,1.1693 30.46155,-41.5992 28.55878,-61.68771 -3.58839,-36.30927 -18.33277,-52.99983 -26.34851,-58.0567 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#373737;stroke:#6e6e6e;stroke-width:2.83429575;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none" id="path3019" d="m 26.230254,979.1291 c -11.50334,14.44882 -11.98241,47.3999 -0.33519,57.1202 l 191.802226,0 c 12.10111,-12.3068 9.93082,-46.99573 -0.33518,-57.1202 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#808080;stroke:#1a1a1a;stroke-width:2.14882827;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4133" d="m 360.82498,854.6914 a 20.634815,21.265151 0 1 1 -41.269,0 20.634815,21.265151 0 1 1 41.269,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#333333;stroke:#000000;stroke-width:2.11880326;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4280" d="m 351.64051,761.132 a 11.444622,11.75148 0 1 1 -22.88896,0 11.444622,11.75148 0 1 1 22.88896,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#313131;stroke:#565656;stroke-width:2.93434715;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path3993" d="m 125.52855,598.62659 c -68.528026,0 -124.0613764,57.81925 -124.0613764,129.13695 0,71.31265 55.5370404,129.13696 124.0613764,129.13696 68.52804,0 124.07984,-57.81926 124.07984,-129.13696 0,-71.31264 -55.55611,-129.13695 -124.07984,-129.13695 z m -1.00095,23.63932 c 10.01261,0.0734 20.238,1.32074 28.95237,3.51006 11.62203,3.80301 21.53624,8.52304 31.01135,16.15381 26.21752,19.0207 43.36275,50.36277 43.36275,85.83029 0,58.01564 -45.80548,105.05244 -102.30928,105.05244 -56.500726,0 -102.309276,-47.03364 -102.309276,-105.05244 0,-32.14848 14.06783,-60.91918 36.22336,-80.19121 11.45168,-11.11714 23.14136,-17.13322 37.3943,-21.79731 7.855846,-2.48302 17.655666,-3.5835 27.668276,-3.51006 z" stroke-miterlimit="4" /><g style="stroke-miterlimit:4;stroke-dasharray:none" id="g4127" stroke-miterlimit="4" transform="matrix(0.61498728,0,0,0.63147657,-18.171616,453.28593)"><g id="g4111"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="rect3040" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path3024" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4115" transform="translate(97.984785,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4117" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4119" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4121" transform="translate(195.96959,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4123" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4125" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g></g><g style="fill:#666666;stroke:#969696;stroke-width:3.99777174;stroke-miterlimit:4;stroke-dasharray:none" id="g4051" transform="translate(-42.878584,98.083591)" stroke-miterlimit="4"><g id="g4437" transform="matrix(0.74686368,0,0,0.74686368,-73.374214,285.30447)"><path inkscape:connector-curvature="0" id="rect4348" style="color:#000000;text-indent:0;text-transform:none;block-progression:tb;fill:#ffffff" d="m 567.31,584.22 0,42.25 0,3.4062 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.4062,0 0,-43.969 0,-1.6875 -1.7188,0 -28.75,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 z" /><g style="fill:#a02c2c;stroke:#ffffff;stroke-width:3.4000001;stroke-linecap:square" id="g87" /></g></g></g></svg>')+
"');width: 397px;height: 455px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);background-size: 100% 100%;left: 50%;margin-left: 25px;margin-bottom: 40px;bottom: 0px;";e.style.cssText=Ba+"top: 132px;left: 331px;";h.style.cssText=Ba+"top: 122px;left: 315px;";g.style.cssText=Ba+"top: 122px;left: 347px;";k.style.cssText=Ba+"top: 113px;left: 331px;";m.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+
btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 166px;";t.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 36px;";r.style.cssText=Ba+"top: 107px;left: 141px;";w.style.cssText=Ba+"top: 107px;left: 90px;";y.style.cssText=Ba+"top: 185px;left: 321px;";A.style.cssText=Ba+"top: 185px;left: 340px;";B.style.cssText=Ba+"top: 179px;left: 358px;";D.style.cssText=Ba+"top: 178px;left: 303px;";H.style.cssText=Ba+"top: 210px;left: 299px;";K.style.cssText=Ba+"top: 279px;left: 299px;";I.style.cssText=Ba+"top: 210px;left: 321px;";L.style.cssText=Ba+
"top: 279px;left: 321px;";M.style.cssText=Ba+"top: 210px;left: 344px;";O.style.cssText=Ba+"top: 278px;left: 344px;";P.style.cssText=Ba+"top: 124px;left: 147px;";aa.style.cssText=Ba+"top: 138px;left: 133px;";za.style.cssText=Ba+"top: 124px;left: 82px;";ha.style.cssText=Ba+"top: 138px;left: 96px;";J.style.cssText=Ba+"top: 278px;left: 367px;";Ba="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>')+
"');width: 19px;height: 46px;background-size: 100% 100%;";a.style.cssText=Ba+"top: 291px;left: 50px;";ra.style.cssText=Ba+"top: 291px;left: 111px;";ya.style.cssText=Ba+"top: 291px;left: 171px;";Q.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>')+
"');width: 297px;height: 179px;background-size: 100% 100%;top: 43px;left: -25px;";va.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>')+
"');width: 33px;height: 10px;background-size: 100% 100%;top: 159px;left: 324px;";Va.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>')+
"');width: 10px;height: 33px;background-size: 100% 100%;top: 148px;left: 335px;";c.appendChild(d);d.appendChild(a);d.appendChild(ra);d.appendChild(ya);d.appendChild(Q);d.appendChild(va);d.appendChild(Va);d.appendChild(e);d.appendChild(h);d.appendChild(g);d.appendChild(k);d.appendChild(m);d.appendChild(t);d.appendChild(r);d.appendChild(w);d.appendChild(y);d.appendChild(A);d.appendChild(B);d.appendChild(D);d.appendChild(H);d.appendChild(K);d.appendChild(I);d.appendChild(L);d.appendChild(M);d.appendChild(O);
d.appendChild(P);d.appendChild(aa);d.appendChild(za);d.appendChild(ha);d.appendChild(J);E.length=0;p.length=0;n.length=0;f.length=0;E.push(e,h,g,k,m,t,r,w,y,A,B,D,H,K,I,L,M,O,P,aa,za,ha,J);p.push('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>');
f.push(Q,a,ya,ra,va,Va);for(c=0;c<E.length;c++)E[c].setAttribute("id","wheel_btn_"+c),E[c].setAttribute("data-colorstate","B"),E[c].setAttribute("data-key",c),E[c].setAttribute("data-svgid",c);for(c=0;c<f.length;c++)E[c].setAttribute("id","wheel_axis_"+c),E[c].setAttribute("data-colorstate","GR");Q.setAttribute("data-key",v.hm);Q.setAttribute("data-svgid",p.length);a.setAttribute("data-key",v.Qn);a.setAttribute("data-svgid",p.length+1);ya.setAttribute("data-key",v.im);ya.setAttribute("data-svgid",
p.length+2);ra.setAttribute("data-key",v.Rn);ra.setAttribute("data-svgid",p.length+3);va.setAttribute("data-key",v.aq);va.setAttribute("data-svgid",p.length+4);Va.setAttribute("data-key",v.bq);Va.setAttribute("data-svgid",p.length+5);p.push('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>');
x(E,N);x(f,"#e6e6e6")}}function x(a,b){function c(a){a=a.target;if(!(0>I||"G"==a.getAttribute("data-colorstate")))if(D){if("R"==a.getAttribute("data-colorstate")&&(y=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",D=0),"B"==a.getAttribute("data-colorstate")||"GR"==a.getAttribute("data-colorstate")){var c=parseFloat(y.getAttribute("data-svgid"));y.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(p[c])+"')";y.setAttribute("data-colorstate",
a.getAttribute("data-colorstate"));y=a;c=parseFloat(a.getAttribute("data-svgid"));a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(p[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R")}}else{var c=parseFloat(a.getAttribute("data-svgid")),d="B"==a.getAttribute("data-colorstate")?1:2;D=d;a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(p[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R");document.getElementById("action_label").textContent=
1==d?"Now press the button on the device":"Now move the axis on the device";y=a}}for(var d=0;d<a.length;d++)v.Ih(a[d],c)}function r(a){var b=document.createElement("label");b.style.cssText="position: relative;display: inline-block;width: 50px;color: white;margin: 0 10px;font-size: 36px;line-height: 50px;background-color: black;border: 3px solid white;border-radius: 5px;height: 50px;";b.textContent=a;return b}function g(){var a=window.innerWidth,b=window.innerHeight;l.style.zoom=750>=b&&400<b||750>=
a&&400<a?"0.5":400>=a||400>=b?"0.3":"1"}var e=w("container"),B=w("controls"),v=w("input"),P=w("storage"),N=RegExp("#5276cf","g"),M={};M[v.hq]=v.hq;M[v.iq]=v.iq;M[v.kq]=v.kq;M[v.jq]=v.jq;M[v.nq]=v.nq;M[v.cq]=v.cq;M[v.eq]=v.eq;M[v.mq]=v.mq;M[v.pq]=v.pq;M[v.Tn]=v.Tn;M[v.oq]=v.oq;M[v.Sn]=v.Sn;M[v.qq]=v.qq;M[v.rq]=v.rq;M[v.fq]=v.fq;M[v.gq]=v.gq;M[v.lq]=v.lq;var p=[],I=-1,y=null,D=0,l=null,u=null,L=null,F=null,U=null,K=null,A=[],E=[],n=[],f=[],X=!0,d={};d[v.hm]=-2;d[v.Qn]=-2;d[v.im]=-2;d[v.Rn]=-2;d[v.aq]=
-2;d[v.bq]=-2;d[v.vt]=-2;d[v.wt]=-2;d[v.xt]=-2;d[v.yt]=-2;d[v.tt]=-2;d[v.ut]=-2;a.show=function(){var a=document.createElement("div");l=a;a.style.cssText="position: absolute;width: 720px;height: 750px;top: 50%;left: 50%;-moz-transform: translateY(-50%) translateX(-50%);-ms-transform: translateY(-50%) translateX(-50%);-webkit-transform: translateY(-50%) translateX(-50%);transform: translateY(-50%) translateX(-50%);background-color: black;border: 4px solid white;border-radius: 35px;box-shadow: 0px 0px 20px 0px rgba(50, 50, 50, 1);";
e.kv(a,"LAST");b(a);var u=document.createElement("div");u.style.cssText="position: absolute;width: 637px;top: 0px;font-family: sans-serif;text-align: center;margin-top: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);left: 50%;";var w=document.createElement("div");w.innerHTML="Select a device";w.style.cssText="color: #fff;display: inline-block;";u.appendChild(w);for(w=0;4>w;w++){var q=k(w),x=function(){return!0},
A=function(a,b){if(b==I)for(var c=0;c<E.length;c++){var d=E[c],e=B.wd(a,b,c),f=c;if(D)e=v.dG(I),0<=e&&y&&1==D&&(d=y.getAttribute("data-key"),v.nw(I,d,e),f=P.get(I+"_gmpd_stngs","b4w")||"{}",f=JSON.parse(f),f[d]=e,P.set(I+"_gmpd_stngs",JSON.stringify(f),"b4w"),y=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",D=0);else{if(e&&"B"==d.getAttribute("data-colorstate")){var h=p[f];d.style.backgroundImage="url('data:image/svg+xml;base64,"+
btoa(h.replace(N,"#00ff00"))+"')";d.setAttribute("data-colorstate","G")}e||"B"==d.getAttribute("data-colorstate")||(h=p[f],d.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(h)+"')",d.setAttribute("data-colorstate","B"))}}};B.qa(null,w,B.ob,q,x,A)}0<t().length&&(I=0);var C=[],w=document.createElement("div");w.style.cssText="margin-top: 20px;";for(q=0;4>q;q++)A=r(q),q==I&&(A.style.backgroundColor="green",L=A),c(q),w.appendChild(A),A.setAttribute("data-device_type","PAD"),C.push(A),v.Ih(A,
function(a){var b=t();a=a.target;for(var d=0;d<b.length;d++)C[d]==a&&(I=d,L=a,c(I),m(a.getAttribute("data-device_type")))});u.appendChild(w);K=document.createElement("label");K.style.cssText="position: relative;display: block;color: white;";u.appendChild(K);w=document.createElement("div");w.style.cssText="margin-top: 20px;";q=O(w,"Pad");A=O(w,"Wheel");q.setAttribute("checked","true");q.onchange=function(){m("PAD");L&&L.setAttribute("data-device_type","PAD")};A.onchange=function(){m("WHEEL");L&&L.setAttribute("data-device_type",
"WHEEL")};q.setAttribute("id","test");U=q;F=A;q=document.createElement("label");q.style.cssText+="color: #fff;display: block;";w.appendChild(q);q.textContent="Click on the buttons & arrows to setup your controller";q.setAttribute("id","action_label");u.appendChild(w);a.appendChild(u);a=B.ym();B.qa(null,"UPDATE_GAMEPAD_DATA",B.ob,[a],x,function(){var a=t(),b=a.length;-1==I&&a.length&&(I=a[0].index,L=C[I]);for(var c=0;c<C.length;c++)c<b?(C[c].textContent=a[c].index,C[c]==L?(C[c].style.backgroundColor=
"green",K.textContent="Selected device: "+a[c].index+". Data: "+a[c].id):C[c].style.backgroundColor="blue"):C[c].style.backgroundColor="black";b||(I=-1,K.textContent="")});for(w=0;4>w;w++)q=h(w),A=function(a,b){if(b=="AXES"+I){for(var c=0;c<n.length;c+=2){var e=n[c],h=a,g=b,k=c,l=20*B.wd(h,g,k),h=20*B.wd(h,g,k+1);e.style.transform="translate3d("+l+"px, "+h+"px, 0px) rotate(0rad)"}if(X)for(c=0;12>c;c+=2){if(h=a,g=b,e=c,!(e+1>2*f.length)){l=B.wd(h,g,e);h=B.wd(h,g,e+1);if(-2<d[e]){var m=l-d[e],q=h-d[e+
1],g=f[Math.floor(e/2)],k=g.getAttribute("data-svgid");D?2==D&&(m=v.Rz(I),0<=m&&(m%2&&m--,D=0,g.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(p[k])+"')",g=parseFloat(y.getAttribute("data-key")),v.nw(I,g,m),v.nw(I,g+1,m+1),y=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller")):g.style.backgroundImage=m||q?"url('data:image/svg+xml;base64,"+btoa(p[k].replace("#e6e6e6","#00ff00"))+"')":"url('data:image/svg+xml;base64,"+btoa(p[k])+
"')"}d[e]=l;d[e+1]=h}}else for(c=0;12>c;c++)(e=c,e>=f.length)||(l=B.wd(a,b,e),-2<d[e]&&((k=l-d[e],h=f[e],g=h.getAttribute("data-svgid"),D)?2==D&&(k=v.Rz(I),0<=k&&(D=0,h.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(p[g])+"')",h=parseFloat(y.getAttribute("data-key")),v.nw(I,h,k),y=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller")):h.style.backgroundImage=k?"url('data:image/svg+xml;base64,"+btoa(p[g].replace("#e6e6e6","#00ff00"))+
"')":"url('data:image/svg+xml;base64,"+btoa(p[g])+"')"),d[e]=l)}},B.qa(null,"AXES"+w,B.ob,q,function(){return!0},A);g();window.addEventListener("resize",g)};a.bi=function(){D=0;I=-1;U=F=y=L=null;n.length=0;E.length=0;f.length=0;e.re().removeChild(l);l=null;B.Uf(null,"UPDATE_GAMEPAD_DATA");for(var a=0;4>a;a++)B.Uf(null,a),B.Uf(null,"AXES"+a);window.removeEventListener("resize",g)};a.update=function(){for(var a=0;4>a;a++)c(a)}};b4w.module.storage=function(a,w){function t(a){return k[a?a:b]?JSON.parse(k[a?a:b]):{}}var c=w("print"),b="b4w",k=null;a.Nf=function(a){a?"b4w"!==a?b=a:c.error("b4w prefix denied"):c.warn("Prefix should be a string. Last declared storage prefix will be used.")};a.set=function(a,c,m){var h=t(m);h[a]=String(c);k[m?m:b]=JSON.stringify(h)};a.Ja=function(a){delete k[a?a:b]};a.get=function(a,b){var c=t(b);return c[a]?c[a]:""};a.debug=function(a){c.log(t(a?a:b))};try{k=window.localStorage;try{k.tmp=null,
delete k.tmp}catch(h){c.warn("localStorage quota is limited. Disabling localStorage"),k=null}}catch(h){c.warn("Applying chrome localStorage bug workaround"),k=null}k||(c.warn("localStorage is not available, initializing temporary storage"),k={})};b4w.module.hmd=function(a,w){function t(){k.Uf(null,"VR_CONTROLLERS")}function c(a,c){function h(c,d,f){if(0<f&&(f=m.ll())&&b.Ne(f)){var h=k.lf(c,d,1);c=k.lf(c,d,2);c=e.add(c,U,p);r.fC(f,c);if(h)if(1==a){var h=O.multiply(F,h,L),n=e.transformQuat(g.Eh,h,p);b.wI(f,n);r.ow(f,h)}else if(2==a||3==a){c=r.Rj(f,l);c=O.invert(c,l);d=O.multiply(B,c,l);c=b.B0(f,p);Math.abs(c[2])<Math.PI/4?n=e.cross(c,g.Eh,I):Math.abs(c[1])<Math.PI/4&&(n=e.cross(c,g.ic,I));e.normalize(n,n);d=e.transformQuat(n,d,y);var q=e.dot(c,
d);d=e.scaleAndAdd(d,c,-q,y);e.normalize(d,d);c=e.cross(c,n,p);n=Math.acos(g.pa(e.dot(n,d),0,1));c=g.sign(e.dot(d,c));v+=n*c;n=O.setAxisAngle(g.ic,-v,l);3==a?h=O.multiply(n,h,D):(c=g.HB(h,g.qc,g.ic,g.Ee,u),c=O.invert(c,u),h=O.multiply(c,h,u),h=O.multiply(n,h,D));n=e.transformQuat(g.Eh,h,p);b.wI(f,n);r.ow(f,h);O.copy(h,B)}}}if(c){var f=m.ll();f&&x.y3(function(){b.Ne(f)||(P=b.Ic(f),N=b.md(f),M=b.gp(f),b.f_(f));var a=k.ym(),d=k.bF();B=r.Rj(f,B);k.qa(null,"HMD_ROTATE_CAMERA",k.ob,[a,c,d],null,h)})}}var b=
w("camera"),k=w("controls"),h=w("input"),O=w("quat"),m=w("scenes"),x=w("screen"),r=w("transform"),g=w("util"),e=w("vec3"),B=O.create(),v=0,P=!1,N=!1,M=!1,p=e.create(),I=e.create(),y=e.create(),D=O.create(),l=O.create(),u=O.create(),L=O.create(),F=O.create(),U=e.create(),K={pivot:e.create()};a.l7=0;a.GT=1;a.o7=2;a.k7=3;a.QZ=function(a){var b;if(b=h.ba(h.Tb))b=h.vg(b,h.Ug)&(h.zk|h.uq|h.Un)?k.cF():k.aF(),c(a,b)};a.d$=function(){return!!h.Cj(h.Tb)};a.paa=function(a,b){t();if(a||b){var c=h.yO(0),f=k.Ly(c),
c=k.Ky(c),g=h.yO(1),d=k.Ly(g),g=k.Ky(g);k.qa(null,"VR_CONTROLLERS",k.ob,[f,d,c,g],null,function(c,d){if(a){var f=k.lf(c,d,0),h=k.lf(c,d,2);e.add(U,f,f);r.fC(a,f);r.ow(a,h)}b&&(f=k.lf(c,d,1),h=k.lf(c,d,3),e.add(U,f,f),r.fC(b,f),r.ow(b,h))})}};a.I$=t;a.AZ=function(){if(k.tm(null,"HMD_ROTATE_CAMERA")){k.Uf(null,"HMD_ROTATE_CAMERA");x.WZ();var a=m.ll();P?b.p5(a,K):N?b.RO(a,K):M&&b.c5(a,K);b.wI(a,g.ic);var c=r.Rj(a,D);r.ow(a,c)}};a.q4=function(a){O.copy(a,F)};a.Lba=function(a){O.copy(F,a);return a};a.l4=
function(a){O.copy(a,U)};a.Kba=function(a){O.copy(U,a);return a}};b4w.module.hmd_conf=function(a,w){function t(){if(!B.Cj(B.Tb))return!1;var a=B.ba(B.Tb),a=B.vg(a,B.Ug);return a&(B.jm|B.zk|B.uq)&&!(a&B.Un)}function c(a){a=a.target.value;var b=L[a],c;for(c in l)if(c in b){var e=document.getElementById(c+"_slider");e&&(e.disabled="custom"!==a,e.value=b[c]);if(e=document.getElementById(c+"_number"))e.disabled="custom"!==a,e.value=b[c];l[c]=b[c]}}function b(){e.Uf(null,"UPDATE_HMD_RENDERING");h();m();M&&(M=!1,g.re().removeChild(p),document.head.removeChild(I),I=y=p=
null)}function k(){h(!0);m();for(var a in l){var b=document.getElementById(a+"_slider");b&&(b.value=l[a]);if(b=document.getElementById(a+"_number"))b.value=l[a]}}function h(a){var b=Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio,c=Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio,e=0,f=0,h=0,d;a:{d=U;var g=navigator.userAgent||navigator.vendor||window.opera;if(1==d.format&&d.devices&&d.devices.length)for(var k=0;k<d.devices.length;k++){var m=d.devices[k];
if(m.rules&&("ios"==m.type&&u||"android"==m.type)){for(var p=!1,t=0;t<m.rules.length;t++){var r=m.rules[t];if(r.ua&&0<=g.indexOf(r.ua)||!r.ua&&r.res&&r.res[0]&&r.res[1]&&Math.min(b,c)==Math.min(r.res[0],r.res[1])&&Math.max(b,c)==Math.max(r.res[0],r.res[1])){p=!0;break}}if(p){d=k;break a}}}else v.error("DPDB isn't correct.");d=-1}-1!=d&&(h=U.devices[d],f=h.dpi[1]||h.dpi,e=Math.round(25.4*b/(h.dpi[0]||h.dpi)),f=Math.round(25.4*c/f),h=Math.round(h.bw));b=P.get("hmd_conf","b4w");b=JSON.parse(b?b:"{}");
a?(l.first_distortion=.34,l.second_distortion=.55,l.bevel_size=h||4,l.screen_width=e||110,l.screen_height=f||65,l.screen_lense=50,l.ipd=64,l.baseline=32):(l.first_distortion="first_distortion"in b?parseFloat(b.first_distortion):.34,l.second_distortion="second_distortion"in b?parseFloat(b.second_distortion):.55,l.bevel_size="bevel_size"in b?parseFloat(b.bevel_size):h||4,l.screen_width="screen_width"in b?parseFloat(b.screen_width):e||110,l.screen_height="screen_height"in b?parseFloat(b.screen_height):
f||65,l.screen_lense="screen_lense"in b?parseFloat(b.screen_lense):50,l.ipd="ipd"in b?parseFloat(b.ipd):64,l.baseline="baseline"in b?parseFloat(b.baseline):32);D=!0}function O(){P.set("hmd_conf",JSON.stringify(l),"b4w");b()}function m(){if(D){var a=B.ba(B.Tb);a&&(B.kk(a,B.vx,[l.first_distortion,l.second_distortion]),B.vg(a,B.Ug)&(B.jm|B.zk)&&(B.kk(a,B.ux,.001*l.bevel_size),B.kk(a,B.Ax,.001*l.screen_width),B.kk(a,B.yx,.001*l.screen_height),B.kk(a,B.zx,.001*l.screen_lense),B.kk(a,B.zt,.001*l.ipd),B.kk(a,
B.tx,.001*l.baseline)));D=!1}}function x(a){var b=a.target.id.split("_"),b=b.splice(0,b.length-1).join("_");b in l&&l[b]!=a.target.value&&(D=!0,l[b]=a.target.value,document.getElementById(b+"_slider").value=a.target.value,document.getElementById(b+"_number").value=a.target.value)}function r(a,b,c){var e=document.createElement("button");e.onclick=a;e.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 160px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;padding-left: 8px;line-height: 28px;margin-right:"+
c+";box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";e.innerHTML=b;return e}var g=w("container"),e=w("controls"),B=w("input"),v=w("print"),P=w("storage"),N=w("util"),M=!1,p=null,I=null,y=null,D=!0,l={profile:"custom",first_distortion:0,second_distortion:0,bevel_size:0,screen_width:0,screen_height:0,screen_lense:0,ipd:0,baseline:0},u=/iPad|iPhone|iPod/.test(navigator.platform),L={oculus_dk2:{name:"Oculus Rift DK2",type:2,first_distortion:.22,second_distortion:.28},cardboard_1:{name:"Cardboard (2014)",
type:1,ipd:60,baseline:35,screen_lense:42,first_distortion:.441,second_distortion:.156},cardboard_2:{name:"Cardboard (2015)",type:1,ipd:64,baseline:35,screen_lense:39,first_distortion:.34,second_distortion:.55},custom:{name:"Custom",type:0,ipd:64,baseline:35,screen_lense:39,first_distortion:0,second_distortion:0}},F=[{label:"Tray to lens-center distance.",wr:!0,inputs:[{id:"baseline",max:"50",step:"0.5"}]},{label:"Interpupillary distance.",wr:!0,inputs:[{id:"ipd",max:"100",step:"1"}]},{label:"Screen to lense distance.",
wr:!0,inputs:[{id:"screen_lense",max:"100",step:"1"}]},{label:"Screen height.",wr:!0,inputs:[{id:"screen_height",max:"150",step:"1"}]},{label:"Screen width.",wr:!0,inputs:[{id:"screen_width",max:"200",step:"1"}]},{label:"Bevel width.",wr:!0,inputs:[{id:"bevel_size",max:"20",step:"1"}]},{label:"Distortion coefficients.",inputs:[{id:"first_distortion",max:"1.0",step:"0.01"},{id:"second_distortion",max:"1.0",step:"0.01"}]}];a.check=t;a.show=function(a){if(t()){var v=g.re();I=document.createElement("style");
I.innerHTML="."+a+" input[type=range]::-webkit-slider-runnable-track {width: 100%; height: 8px;cursor: pointer;background-color: #fff;border: 2px solid rgba(98, 98, 98, .2);box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);}."+a+" input[type=range]::-webkit-slider-thumb {box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);height: 30px;width: 16px;border-radius: 2px;background-color: #323232;cursor: pointer;margin-top: -13px;-webkit-appearance: none;}";document.head.appendChild(I);if(!M){M=!0;h();var u=
B.ba(B.Wc,v);B.zw(u,!1);u=B.ba(B.Tg,v);B.zw(u,!1);p=document.createElement("div");p.className=a;v.appendChild(p);y=document.createElement("div");p.appendChild(y);y.style.cssText="background-color: #484848;border: 2px solid rgba(150, 150, 150, 0.7);box-shadow: 0px 0px 10px 0px rgba(150, 150, 150, 0.7);position: relative;width: 524px;padding: 16px;overflow: hidden;";a=P.get("hmd_conf","b4w");a=JSON.parse(a?a:"{}").profile||"custom";v=document.createElement("div");u=document.createElement("label");u.innerHTML=
"Profile: ";u.className="text_label";u.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 120px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";v.appendChild(u);u=document.createElement("select");v.appendChild(u);u.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
var n=B.ba(B.Tb);if(n)for(var f in L)if(0==L[f].type||B.vg(n,B.Ug)&(B.jm|B.zk)&&1==L[f].type){var w=document.createElement("option");w.value=f;w.text=L[f].name;u.appendChild(w)}u.value=a;N.ep()?u.onchange=c:u.oninput=c;y.appendChild(v);f=B.ba(B.Tb);for(a=0;a<F.length;a++)if(B.vg(f,B.Ug)&(B.jm|B.zk)||!F[a].wr){v=F[a];n=a;u=document.createElement("div");w=document.createElement("label");w.className="text_label";var d="8px";n%2&&(d="0");w.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 100%;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
w.textContent=v.label;u.appendChild(w);u.style.cssText="margin-top: 16px;float: left;width: 240px;margin-right: "+d+";border-top: 2px solid rgba(98, 98, 98, .4);box-sizing: border-box;-webkit-box-sizing: border-box;padding-top: 8px;";for(n=0;n<v.inputs.length;n++){w=v.inputs[n];d=document.createElement("div");d.className="row";var D=document.createElement("input");D.className="input_slider";D.style.cssText="-webkit-appearance: none;width: 192px;display: block;float: left;height: 8px;margin-bottom: 16px;margin-top: 16px;box-sizing: border-box;margin-right: 8px;margin-left: 0;";
D.setAttribute("id",w.id+"_slider");D.setAttribute("type","range");D.setAttribute("min","0.00");D.setAttribute("step",w.step);D.setAttribute("value",l[w.id]);D.setAttribute("max",w.max);d.appendChild(D);var G=document.createElement("input");G.className="input_text";G.setAttribute("id",w.id+"_number");G.setAttribute("type","number");G.setAttribute("min","0.00");G.setAttribute("step",w.step);G.setAttribute("value",l[w.id]);G.setAttribute("max",w.max);d.appendChild(G);G.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 40px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;box-sizing: border-box;line-height: 28px;margin-top: 4px;margin-right: 0;margin-left: 0;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
N.ep()?(D.onchange=x,G.onchange=x):(D.oninput=x,G.oninput=x);u.appendChild(d)}y.appendChild(u)}f=document.createElement("div");a=r(O,"SAVE","4px");v=r(b,"CANCEL","4px");u=r(k,"RESET","0px");f.className="row";f.style.cssText="padding-top: 32px;clear: both;box-sizing: border-box;-webkit-box-sizing: border-box;";f.appendChild(a);f.appendChild(v);f.appendChild(u);y.appendChild(f);f=e.Oy();e.qa(null,"UPDATE_HMD_RENDERING",e.ob,[f],null,m)}}};a.bi=b;a.reset=k;a.update=function(){h();m()};var U={_comment:"AUTOMATICALLY GENERATED BY generate_dpdb.py. DO NOT EDIT.",
format:1,last_updated:"2016-01-26T23:11:18Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],
dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1E3},
{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},
{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],
dpi:[480,446.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,
256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],
bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1E3},{type:"android",
rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},
{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},
{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},
{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],
dpi:[304.8,305.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],
dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,
164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1E3},
{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},
{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1E3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1E3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1E3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],
bw:4,ac:1E3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1E3}]}};b4w.module.sfx=function(a,w){var t=w("__obj_util"),c=w("__scenes"),b=w("__sfx"),k=w("__print");a.play=function(a,c,k){b.play(a,c||0,k||0)};a.AB=function(a){b.AB(a)};a.EG=function(a){return b.EG(a)};a.stop=function(a){b.stop(a)};a.pause=function(a){b.P4(a)};a.resume=function(a){b.S4(a)};a.JP=function(a,c,k){b.JP(a,c||0,k||!1)};a.CH=function(a,c){b.CH(a,c)};a.fO=function(a){return b.fO(a)};a.ce=function(a,c){b.ce(a,c)};a.CG=function(a){return b.CG(a)};a.eda=function(){b.Er()};a.Er=function(){b.Er()};
a.Rea=function(a){b.FI(a)};a.FI=function(a){b.FI(a)};a.xO=function(a){return a&&"object"===typeof a?b.xO(a):b.n0()};a.yI=function(a,c){a&&"object"===typeof a?b.yI(a,c):b.j4(c)};a.Yb=function(a,c){a&&"object"===typeof a?b.Yb(a,c):b.p2(c)};a.kP=function(a){return a&&"object"===typeof a?b.kP(a):b.p1()};a.Yz=function(){return b.Yz().slice(0)};a.NL=b.NL;a.hR=function(a){b.hR(c.R(),a)};a.LN=function(){return b.LN(c.R())};a.bN=function(a,c,k){a&&"object"===typeof a?b.bN(a,c,k):b.IZ(c,k)};a.HS=function(a){a&&
"object"===typeof a?b.HS(a):b.C5()};a.ZK=b.ZK;a.gM=b.gM;a.uF=b.uF;a.vF=b.vF;a.ER=b.ER;a.gO=b.gO;a.lR=b.lR;a.TN=b.TN;a.SN=b.SN;a.PN=function(a){return a&&t.Um(a)?b.PN(a):(k.error('Object "'+(a?a.name:void 0)+'" is not a valid speaker'),0)}};b4w.module.version=function(a,w){var t=w("__version");a.version=t.version;a.Sw=t.Sw;a.type=t.type;a.RM=t.RM;a.pF=t.pF;a.get_build_version=t.get_build_version};b4w.register("embed_main",function(a,w){function t(a,b){ta=document.querySelector("#circle_container");sa=document.querySelector("#preloader_caption");Qa=document.querySelector("#first_stage");cb=document.querySelector("#second_stage");Ia=document.querySelector("#third_stage");Oa=document.querySelector("#load_container");Ea=document.querySelector("#preloader_container");Na=document.querySelector("#opened_button");Fa=document.querySelector("#logo_container");Ra=document.querySelector("#buttons_container");
Ha=document.querySelector("#quality_buttons_container");ga=document.querySelector("#stereo_buttons_container");Lb=document.querySelector("#help_info_container");na=document.querySelector("#help_button");T=document.querySelector("#hor_button_section");if(b){Z.pause();var d=document.querySelector("#rel_version");va.Sw()&&(d.innerHTML=va.Sw());d=document.querySelector("#fullscreen_on_button");za.Mq()||za.IE()||d.parentElement.removeChild(d);d=J.get("quality");d&&"CUSTOM"!=d||(d="HIGH",J.set("quality",
d));Ha.className="control_panel_button";switch(d){case "LOW":Ha.classList.add("low_mode_button");break;case "HIGH":Ha.classList.add("high_mode_button");break;case "ULTRA":Ha.classList.add("ultra_mode_button")}k();h();c();V.update();if(d=m())x(d),window.addEventListener("resize",A),A()}else if((d=ea.Zz(!0))&&d.fallback_image){var e=document.createElement("div");e.className="image_wrapper";document.body.appendChild(e);Ea.style.display="none";e.style.backgroundImage="url("+d.fallback_image+")"}else if(d&&
d.fallback_video){var e=document.createElement("div"),f=document.createElement("video");e.className="video_wrapper";e.appendChild(f);f.autoplay=!0;for(var g=0;g<d.fallback_video.length;g++){var l=document.createElement("source");l.src=d.fallback_video[g];f.appendChild(l)}document.body.appendChild(e);Ea.style.display="none"}else ma("Browser could not initialize WebGL","https://www.blend4web.com/doc/en/problems_and_solutions.html#problems-upon-startup")}function c(){var a=Ya;if(a.length){var b=["t",
"f","g","v","w"],a=a.filter(function(a){return 0<=b.indexOf(a)});if(a.length){for(var c=["tw_button","fb_button","g_button","vk_button","weibo_button"],d=[],e=[],f=0;f<a.length;f++)switch(a[f]){case "t":d.push("tw_button");break;case "f":d.push("fb_button");break;case "g":d.push("g_button");break;case "v":d.push("vk_button");break;case "w":d.push("weibo_button")}for(f=0;f<c.length;f++)0>d.indexOf(c[f])&&e.push(c[f]);for(f=0;f<e.length;f++)a=document.getElementById(e[f]),a.parentElement.removeChild(a);
[].slice.call(document.querySelector("#vert_section_button").children).sort(function(a,b){return d.indexOf(a.id)-d.indexOf(b.id)}).forEach(function(a){document.querySelector("#vert_section_button").appendChild(a)})}}}function b(){var a=document.querySelector("#auto_rotate_on_button");la.tX()||a.parentElement.removeChild(a)}function k(a){a=a||J.get("stereo")||"NONE";ga.className="control_panel_button";switch(a){case "NONE":ga.classList.add("def_mode_button");break;case "ANAGLYPH":ga.classList.add("anag_mode_button");
break;case "SIDEBYSIDE":ga.classList.add("side_mode_button");break;case "HMD":ga.classList.add("hmd_mode_button")}}function h(){window.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return!1};O();for(var a=0;a<Ca.length;a++){var b=Ca[a],c=document.getElementById(b.id);c&&(r(c),function(a){oa.Ih(c,function(b){a.callback(b,a)})}(b))}}function O(){for(var a=document.querySelectorAll(".control_panel_button a"),b=0;b<a.length;b++){var c=a[b];c.hasAttribute("href")&&(c.href+=document.location.href);
r(c.parentNode)}}function m(){var a=ba.get("built_in_module_name");if(b4w.module_check(a)){var a=w(a).data.main_file,b=document.getElementById("built_in_scripts");b.parentElement.removeChild(b);return a}a=ea.Zz();Fa.style.display="block";if(a&&a.load)return a=a.load;if(Ua.load&&"__ASSETS_LOADING_PATH__"!=Ua.load)return a=Ua.load;ma("Please specify a scene to load","https://www.blend4web.com/doc/en/web_player.html#scene-errors");return null}function x(a){ea.Nh(Fa,"opacity",0,1,300,"","",function(){sa.style.display=
"block";ea.Nh(sa,"opacity",0,1,300,"","",function(){Z.resume();ca.load(a,d,G,!1)})})}function r(a){a&&(Z.Cm()?(a.addEventListener("touchstart",function(){a.classList.add("hover");F()}),a.addEventListener("touchend",function(){a.classList.remove("hover");L()})):(a.addEventListener("mouseenter",function(){a.classList.add("hover")}),a.addEventListener("mouseout",function(){a.classList.remove("hover")})))}function g(a){if(!u()){var b=a?a.target:document.querySelector("#auto_rotate_on_button");la.kL(function(){b&&
N(b)});b&&N(b);Z.xr()&&(B(),M())}}function e(a){u()||(la.kL(),a&&N(a.target))}function B(a){u()||(Z.resume(),a&&N(a.target))}function v(){u()||(za.IE()?za.NQ(document.body,P,P):za.UH(document.body,P,P))}function P(){!I("buttons_container")&&Y&&L();var a=document.querySelector("#fullscreen_on_button")||document.querySelector("#fullscreen_off_button");a&&N(a)}function N(a){var b=a.id,c;a:{for(c=0;c<Ca.length;c++)if(Ca[c].id==a.id){c=Ca[c];break a}c=null}var d=c.callback;a.id=c.id=c.fw;c.fw=b;I(a.id)||
a.classList.remove("hover");c.callback=c.ew;c.ew=d}function M(){var a=document.querySelector("#play_button")||document.querySelector("#pause_button");a&&N(a)}function p(){var a=document.querySelector("#auto_rotate_on_button")||document.querySelector("#auto_rotate_off_button");a&&N(a)}function I(a){var b=!1;if(document.querySelectorAll)for(var c=document.querySelectorAll(":hover"),d=0;d<c.length;d++)if(c[d].id==a){b=!0;break}return b}function y(){if(!u()){Ra.removeEventListener("mouseleave",L);Ra.removeEventListener("mouseenter",
F);document.body.removeEventListener("touchmove",L);U();K();var a=document.querySelector("#vert_section_button").firstElementChild,b=function(a){Y=!0;ea.Nh(a,"marginRight",0,-45,50,"","px");ea.Nh(a,"opacity",1,0,50,"","",function(){a.previousElementSibling&&"opened_button"!=a.previousElementSibling.id?b(a.previousElementSibling):setTimeout(function(){Aa=Y=!1;l();T.style.display=""},100)})},c=function(a){ka=!0;ea.Nh(a,"marginBottom",0,-45,50,"","px");ea.Nh(a,"opacity",1,0,50,"","",function(){a.nextElementSibling&&
"opened_button"!=a.nextElementSibling.id?c(a.nextElementSibling):setTimeout(function(){Ba=ka=!1;l()},100)})};b(document.querySelector("#help_button"));W||c(a)}}function D(){F();if(!u())if(oa.MB(Na,D),Ba||Aa)y();else{var a=document.querySelector("#fullscreen_on_button")||document.querySelector("#fullscreen_off_button")||document.querySelector("#quality_buttons_container"),b=document.querySelector("#vert_section_button").lastElementChild,c=function(a){Y=!0;a.style.marginRight="-45px";"help_button"==
a.id&&wa?setTimeout(function(){Y=!1;Aa=!0;l()},100):(a.style.display="block",ea.Nh(a,"marginRight",-45,0,50,"","px",function(){a.nextElementSibling?c(a.nextElementSibling):setTimeout(function(){Y=!1;Aa=!0;l()},100)}),ea.Nh(a,"opacity",0,1,50,"",""))},d=function(a){ka=!0;a.style.marginBottom="-45px";a.style.display="block";ea.Nh(a,"marginBottom",-45,0,50,"","px",function(){a.previousElementSibling?d(a.previousElementSibling):setTimeout(function(){ka=!1;Ba=!0;l()},100)});ea.Nh(a,"opacity",0,1,50,"",
"")};T.style.display="block";c(a);W||d(b);Z.Cm()?document.body.addEventListener("touchmove",L):(Ra.addEventListener("mouseleave",L),Ra.addEventListener("mouseenter",F))}}function l(){u()||(oa.Ih(Na,D),(!I("buttons_container")&&(Ba||Aa)||Z.Cm()&&(Ba||Aa))&&L())}function u(){return ka||Y}function L(){u()||(F(),Va=setTimeout(y,2E3))}function F(){clearTimeout(Va)}function U(a){if(!u()&&ua){ua=!1;a?(a.stopPropagation(),a=a.target):a=document.querySelectorAll(".active_elem_q")[0];Ha.style.marginRight="0px";
for(var b=0,c=Ha.children;b<c.length;b++)c[b].style.display="none",c[b].style.opacity=0;Ha.className="control_panel_button "+a.id}}function K(a){if(!u()&&Pa){Pa=!1;a?(a.stopPropagation(),a=a.target):a=document.querySelectorAll(".active_elem_s")[0];ga.style.marginRight="0px";for(var b=0,c=ga.children;b<c.length;b++)c[b].style.display="none",c[b].style.opacity=0;ga.className="control_panel_button "+a.id}}function A(){da.Jl()}function E(){if(aa.GL()){var a=da.Wh(),a=oa.ba(oa.Wc,a),a=oa.Zh(a,oa.uj,Xa);
X(a[0],a[1])}}function n(a){if(aa.GL())for(var b=0;b<a.length;b++)X(a[b].clientX,a[b].clientY)}function f(){var a=da.Wh(),b=oa.ba(oa.Wc,a);b&&oa.Id(b,oa.lm,E);(a=oa.ba(oa.Tg,a))&&oa.Id(a,oa.nm,n)}function X(a,b){var c=Ka;c&&aa.B2(c)&&aa.lu(c);Ka=rb(a,b)}function d(a,c){if(c){f();b();ea.PZ();Z.o4(q);A();var d=xa.Wk(),e=xa.yo(),h=da.re();xa.qa(null,"MOUSE_MOVE",xa.Ai,[e,d],function(a){return a[0]&&a[1]},function(){h.className="move"});xa.qa(null,"MOUSE_STOP",xa.cx,[e],function(a){return a[0]},function(a,
b,c){-1==c&&(h.className="")});((d=ea.Zz())&&"autorotate"in d||"__AUTOROTATE__"!=Ua.autorotate)&&g();d=aa.Ro();d.title&&(document.title=d.title);H()}else ma("Could not load the scene","https://www.blend4web.com/doc/en/web_player.html#scene-errors")}function H(){var a=document.querySelector("#hmd_mode_button");oa.Cj(oa.Tb)||a.parentElement.removeChild(a)}function G(a){sa.innerHTML=a+"%";33>a?(Ga||(Ga=!0,ta.style.display="block"),Qa.style.width=4.7*a+"px",ta.style.webkitTransform="rotate("+(3.6*a-503)+
"deg)",ta.style.transform="rotate("+(3.6*a-503)+"deg)"):66>a?(z||(z=!0,Qa.style.width="142px",cb.style.backgroundColor="#000",cb.style.marginTop="135px"),0<135-4.5*(a-33)&&(cb.style.marginTop=135-3.5*(a-33)+"px"),ta.style.webkitTransform="rotate("+(3.6*a-503)+"deg)",ta.style.transform="rotate("+(3.6*a-503)+"deg)"):100!=a&&(Da||(Da=!0,cb.style.marginTop="0px",Ia.style.backgroundColor="#000",Ia.style.height="0px"),75<a&&(Ia.style.height=.1*a+"px"),ta.style.webkitTransform="rotate("+(3.6*a-503)+"deg)",
ta.style.transform="rotate("+(3.6*a-503)+"deg)");100==a&&(ha.Yz().length||(a=document.querySelector("#sound_on_button"),a.parentElement.removeChild(a)),Qa.parentElement.removeChild(Qa),cb.parentElement.removeChild(cb),Ia.parentElement.removeChild(Ia),ta.parentElement.removeChild(ta),Oa.style.backgroundColor="#000",a=[{elem:sa,duration:300},{elem:Oa,duration:300,cb:function(){Na.style.display="block";ea.Nh(Na,"transform",0,1,300,"scale(",")")}},{elem:Fa,duration:300},{elem:Ea,duration:300,cb:function(){Ea.parentElement.removeChild(Ea);
D()}}],R(a),ea.EQ(a))}function R(a){for(var b={type:"css",prop:"opacity",from:1,to:0},c=a.length;c--;)for(var d in b)a[c][d]=b[d]}function q(){}function ja(a){if(ba.get("quality")!=a){switch(a){case ba.Bk:var b="LOW";break;case ba.Ak:b="HIGH";break;case ba.Vn:b="ULTRA"}J.set("quality",b);C()}}function qa(a){L();if(Wa!=a){switch(a){case "NONE":J.set("stereo","NONE");"ANAGLYPH"==Wa||"SIDEBYSIDE"==Wa?C():(Ja.AZ(),rb=aa.wp);break;case "ANAGLYPH":J.set("stereo","ANAGLYPH");C();break;case "SIDEBYSIDE":J.set("stereo",
"SIDEBYSIDE");C();break;case "HMD":if(J.set("stereo","NONE"),"NONE"==Wa){oa.Cj(oa.Tb)&&S.update();la.$O()&&(e(),p());var b=aa.ll(),c=ra.Me(b,Ma),b=ra.Rj(b,ub),b=Q.transformQuat(ya.Cf,b,ab);b[2]=0;Q.normalize(b,b);b=fa.rotationTo(ya.Cf,b,ub);Ja.l4(c);Ja.q4(b);Ja.QZ(Ja.GT);rb=aa.K2;document.querySelector("#fullscreen_on_button")&&v()}else J.set("stereo","NONE"),C()}Wa=a;k(a)}}function C(){setTimeout(function(){window.location.reload()},100)}function pa(){var a=J.get("quality");a&&"CUSTOM"!=a||(a="HIGH",
J.set("quality",a));switch(a){case "LOW":var b=ba.Bk;break;case "HIGH":b=ba.Ak;break;case "ULTRA":b=ba.Vn}ba.set("quality",b)}function ia(){var a=J.get("stereo")||"NONE";Wa=a;"NONE"==a&&oa.Cj(oa.Tb)&&(a="HMD");ba.set("stereo",a)}function ma(a,b){var c=document.querySelector("#error_name"),d=document.querySelector("#error_info"),e=document.querySelector("#error_container");ta.style.display="none";c.innerHTML=a;d.innerHTML="For more info visit <a href="+b+">"+b.replace("https://www.","")+"</a>";e.style.display=
"block";Fa.style.opacity=1;Fa.style.marginTop="-90px"}var ea=w("app"),la=w("camera_anim"),ba=w("config"),da=w("container"),xa=w("controls"),ca=w("data"),V=w("gp_conf"),Ja=w("hmd"),S=w("hmd_conf"),oa=w("input"),Z=w("main"),fa=w("quat"),aa=w("scenes"),za=w("screen"),ha=w("sfx"),J=w("storage"),ra=w("transform"),ya=w("util"),Q=w("vec3"),va=w("version"),Va=null,Ba=!1,Aa=!1,ka=!1,Y=!1,ua=!1,Pa=!1,wa=!1,W=!1,Ya=[],Ga=!1,z=!1,Da=!1,ta,sa,Qa,cb,Ia,Oa,Ea,Na,Fa,Ra,Ha,ga,Lb,na,T,Ka,Wa,Xa=new Float32Array(2),
Ma=new Float32Array(3),ab=new Float32Array(3),ub=new Float32Array(4),rb=aa.wp,Ca=[{type:"simple_button",id:"opened_button",callback:D},{type:"simple_button",id:"help_button",callback:function(){u()||(Z.Cm()?Lb.className="touch":Lb.className="",Lb.style.display="block",na.style.display="none",wa=!0)}},{type:"simple_button",id:"close_help",callback:function(){wa&&(Lb.style.display="none",na.style.display="block",wa=!1)}},{type:"trigger_button",id:"fullscreen_on_button",callback:v,fw:"fullscreen_off_button",
ew:function(){u()||(za.IE()?za.VZ():za.DF())}},{type:"trigger_button",id:"pause_button",callback:function(a){u()||(Z.pause(),a&&N(a.target),la.$O()&&(e(),p()))},fw:"play_button",ew:B},{type:"trigger_button",id:"auto_rotate_on_button",callback:g,fw:"auto_rotate_off_button",ew:e},{type:"trigger_button",id:"sound_on_button",callback:function(a){u()||(ha.Yb(null,!0),N(a.target))},fw:"sound_off_button",ew:function(a){u()||(ha.Yb(null,!1),N(a.target))}},{type:"menu_button",id:"stereo_buttons_container",
callback:function(a,b){if(!u()){U();Pa=!0;oa.Cj(oa.Tb)||(ga.style.marginRight="-30px");for(var c=b.NE,d=b.ME,e=0;e<c.length;e++){var f=document.getElementById(c[e]);f&&(ga.classList.contains(c[e])?(f.className="active_elem_s",oa.Ih(f,K)):(f.className="qual_button",oa.Ih(f,d[e])))}e="";oa.Cj(oa.Tb)||(e="no_hmd");ga.className="stereo_buttons_container "+e;e=0;for(c=ga.children;e<c.length;e++)c[e].style.display="block",c[e].style.opacity=1}},NE:["def_mode_button","anag_mode_button","side_mode_button",
"hmd_mode_button"],ME:[function(){qa("NONE")},function(){qa("ANAGLYPH")},function(){qa("SIDEBYSIDE")},function(){qa("HMD")}]},{type:"menu_button",id:"quality_buttons_container",callback:function(a,b){if(!u()){K();ua=!0;Ha.style.marginRight="-30px";for(var c=b.NE,d=b.ME,e=0;e<c.length;e++){var f=document.getElementById(c[e]);Ha.classList.contains(c[e])?(f.className="active_elem_q",oa.Ih(f,U)):oa.Ih(f,d[e])}Ha.className="quality_buttons_container";e=0;for(c=Ha.children;e<c.length;e++)c[e].style.display=
"block",c[e].style.opacity=1}},NE:["low_mode_button","high_mode_button","ultra_mode_button"],ME:[function(){ja(ba.Bk)},function(){ja(ba.Ak)},function(){ja(ba.Vn)}]}],Ua={load:"__ASSETS_LOADING_PATH__",compressed_textures_pvr:"__COMPRESSED_TEXTURES_PVR__",compressed_textures_dds:"__COMPRESSED_TEXTURES_DDS__",show_fps:"__SHOW_FPS__",no_social:"__NO_SOCIAL__",alpha:"__ALPHA__",min_capabilities:"__MIN_CAPABILITIES__",autorotate:"__AUTOROTATE__",compressed_gzip:"__COMPRESSED_GZIP__"};a.Nf=function(){var a=
"DEBUG"==va.type(),b=b4w.module_check(ba.get("built_in_module_name")),c=ea.Zz(),d="";"__ASSETS_LOADING_PATH__"!=Ua.load?d=Ua.load:d=window.location.href;var e="__SHOW_FPS__"!=Ua.show_fps,f="__ALPHA__"!=Ua.alpha,g="__COMPRESSED_TEXTURES_DDS__"!=Ua.compressed_textures_dds,h="__MIN_CAPABILITIES__"!=Ua.min_capabilities,k="__COMPRESSED_TEXTURES_PVR__"!=Ua.compressed_textures_pvr,l="__COMPRESSED_GZIP__"!=Ua.compressed_gzip;W="__NO_SOCIAL__"!=Ua.no_social;var m=!1;!g&&!k||b||a||(m=!0);c&&(b||a||(!g&&"compressed_textures"in
c&&(g=m=!0),!k&&"compressed_textures_pvr"in c&&(k=m=!0),!l&&"compressed_gzip"in c&&(l=!0)),!e&&"show_fps"in c&&(e=!0),!W&&"no_social"in c&&(W=!0),!f&&"alpha"in c&&(f=!0),"load"in c&&(d=c.load),!h&&"min_capabilities"in c&&(h=!0),"socials"in c&&(Ya=c.socials.split("").filter(function(a,b,c){return c.indexOf(a)==b})));J.Nf("b4w_webplayer:"+d);ia();pa();f||ba.set("background_color",[.224,.224,.224,1]);ea.Nf({canvas_container_id:"main_canvas_container",callback:t,gl_debug:a,physics_enabled:!b,show_fps:e,
report_init_failure:!1,console_verbose:a,error_purge_elements:["control_panel"],alpha:f,key_pause_enabled:!1,fps_elem_id:"fps_container",fps_wrapper_id:"fps_wrapper",assets_pvr_available:k,assets_dds_available:g,assets_min50_available:m,min_capabilities:h,assets_gzip_available:l})}});window.addEventListener("load",function(){b4w.require("embed_main").Nf()});
